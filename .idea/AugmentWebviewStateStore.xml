<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="AugmentWebviewStateStore">
    <option name="stateMap">
      <map>
        <entry key="CHAT_STATE" value="eyJjdXJyZW50Q29udmVyc2F0aW9uSWQiOiI5NjQyOWIxZS00OTM3LTQ0YmQtODk5Yi02MjJiMzc2YTQxMTQiLCJjb252ZXJzYXRpb25zIjp7IjNjYjFmNzJiLWNjZDYtNDJkMS04MWQyLTIwMmNmZGJjOTYwZSI6eyJpZCI6IjNjYjFmNzJiLWNjZDYtNDJkMS04MWQyLTIwMmNmZGJjOTYwZSIsIm5hbWUiOiJXZWxjb21lIHRvIHRoZSBBdWdtZW50IEFnZW50IiwiY3JlYXRlZEF0SXNvIjoiMjAyNS0wNS0xMVQwOTozMToyNC44ODlaIiwibGFzdEludGVyYWN0ZWRBdElzbyI6IjIwMjUtMDUtMTNUMDE6MTc6NDkuMzI3WiIsImNoYXRIaXN0b3J5IjpbeyJyZXF1ZXN0X2lkIjoiMjg4YmI2YzktNjlhNi00MTg5LTgxNWEtYjlhYjE5MzgzODNiIiwidXVpZCI6IjM5OGYyNTQzLTg0MzQtNDZhMy04NTNhLTE0M2ZjMzc0ZTJlMCIsImNoYXRJdGVtVHlwZSI6ImFnZW50aWMtY2hlY2twb2ludC1kZWxpbWl0ZXIiLCJzdGF0dXMiOiJzdWNjZXNzIiwiZnJvbVRpbWVzdGFtcCI6MCwidG9UaW1lc3RhbXAiOjE3NDY5NTU4ODQ4OTEsInNlZW5fc3RhdGUiOiJzZWVuIn0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6ImExZjZhMGYzLWY5NWMtNDBmMC1hMTM5LWI0ZjBmYmFkMWRkOCIsInJlcXVlc3RfbWVzc2FnZSI6ImZpeCBlcnJvcjogcnVuOlxyXG5qYXZhLnNxbC5TUUxJbnRlZ3JpdHlDb25zdHJhaW50VmlvbGF0aW9uRXhjZXB0aW9uOiBDYW5ub3QgYWRkIG9yIHVwZGF0ZSBhIGNoaWxkIHJvdzogYSBmb3JlaWduIGtleSBjb25zdHJhaW50IGZhaWxzIChgSW50ZXJuZXREQmAuYFNVQlNDUklCRVJgLCBDT05TVFJBSU5UIGBTVUJTQ1JJQkVSX2liZmtfMWAgRk9SRUlHTiBLRVkgKGB1c2VyX2lkYCkgUkVGRVJFTkNFUyBgVVNFUmAgKGB1c2VyX2lkYCkpXHJcblx0YXQgY29tLm15c3FsLmNqLmpkYmMuZXhjZXB0aW9ucy5TUUxFcnJvci5jcmVhdGVTUUxFeGNlcHRpb24oU1FMRXJyb3IuamF2YToxMTcpXHJcblx0YXQgY29tLm15c3FsLmNqLmpkYmMuZXhjZXB0aW9ucy5TUUxFeGNlcHRpb25zTWFwcGluZy50cmFuc2xhdGVFeGNlcHRpb24oU1FMRXhjZXB0aW9uc01hcHBpbmcuamF2YToxMjIpXHJcblx0YXQgY29tLm15c3FsLmNqLmpkYmMuQ2xpZW50UHJlcGFyZWRTdGF0ZW1lbnQuZXhlY3V0ZUludGVybmFsKENsaWVudFByZXBhcmVkU3RhdGVtZW50LmphdmE6OTE2KVxyXG5cdGF0IGNvbS5teXNxbC5jai5qZGJjLkNsaWVudFByZXBhcmVkU3RhdGVtZW50LmV4ZWN1dGVVcGRhdGVJbnRlcm5hbChDbGllbnRQcmVwYXJlZFN0YXRlbWVudC5qYXZhOjEwNjEpXHJcblx0YXQgY29tLm15c3FsLmNqLmpkYmMuQ2xpZW50UHJlcGFyZWRTdGF0ZW1lbnQuZXhlY3V0ZVVwZGF0ZUludGVybmFsKENsaWVudFByZXBhcmVkU3RhdGVtZW50LmphdmE6MTAwOSlcclxuXHRhdCBjb20ubXlzcWwuY2ouamRiYy5DbGllbnRQcmVwYXJlZFN0YXRlbWVudC5leGVjdXRlTGFyZ2VVcGRhdGUoQ2xpZW50UHJlcGFyZWRTdGF0ZW1lbnQuamF2YToxMzIwKVxyXG5cdGF0IGNvbS5teXNxbC5jai5qZGJjLkNsaWVudFByZXBhcmVkU3RhdGVtZW50LmV4ZWN1dGVVcGRhdGUoQ2xpZW50UHJlcGFyZWRTdGF0ZW1lbnQuamF2YTo5OTQpXHJcblx0YXQgREFPLlN1YnNjcmliZXJEQU8uaW5zZXJ0KFN1YnNjcmliZXJEQU8uamF2YTo0NClcclxuXHRhdCBpbnRlcm5ldC5tYW5nZW1lbnQuc3lzdGVtLlNpZ25VcC5idG5TaWdudXBBY3Rpb25QZXJmb3JtZWQoU2lnblVwLmphdmE6Mjc5KVxyXG5cdGF0IGludGVybmV0Lm1hbmdlbWVudC5zeXN0ZW0uU2lnblVwJDcuYWN0aW9uUGVyZm9ybWVkKFNpZ25VcC5qYXZhOjE3MSlcclxuXHRhdCBqYXZhLmRlc2t0b3AvamF2YXguc3dpbmcuQWJzdHJhY3RCdXR0b24uZmlyZUFjdGlvblBlcmZvcm1lZChBYnN0cmFjdEJ1dHRvbi5qYXZhOjE5NzIpXHJcblx0YXQgamF2YS5kZXNrdG9wL2phdmF4LnN3aW5nLkFic3RyYWN0QnV0dG9uJEhhbmRsZXIuYWN0aW9uUGVyZm9ybWVkKEFic3RyYWN0QnV0dG9uLmphdmE6MjMxNClcclxuXHRhdCBqYXZhLmRlc2t0b3AvamF2YXguc3dpbmcuRGVmYXVsdEJ1dHRvbk1vZGVsLmZpcmVBY3Rpb25QZXJmb3JtZWQoRGVmYXVsdEJ1dHRvbk1vZGVsLmphdmE6NDA3KVxyXG5cdGF0IGphdmEuZGVza3RvcC9qYXZheC5zd2luZy5EZWZhdWx0QnV0dG9uTW9kZWwuc2V0UHJlc3NlZChEZWZhdWx0QnV0dG9uTW9kZWwuamF2YToyNjIpXHJcblx0YXQgamF2YS5kZXNrdG9wL2phdmF4LnN3aW5nLnBsYWYuYmFzaWMuQmFzaWNCdXR0b25MaXN0ZW5lci5tb3VzZVJlbGVhc2VkKEJhc2ljQnV0dG9uTGlzdGVuZXIuamF2YToyNzkpXHJcblx0YXQgamF2YS5kZXNrdG9wL2phdmEuYXd0LkNvbXBvbmVudC5wcm9jZXNzTW91c2VFdmVudChDb21wb25lbnQuamF2YTo2NjIxKVxyXG5cdGF0IGphdmEuZGVza3RvcC9qYXZheC5zd2luZy5KQ29tcG9uZW50LnByb2Nlc3NNb3VzZUV2ZW50KEpDb21wb25lbnQuamF2YTozMzk4KVxyXG5cdGF0IGphdmEuZGVza3RvcC9qYXZhLmF3dC5Db21wb25lbnQucHJvY2Vzc0V2ZW50KENvbXBvbmVudC5qYXZhOjYzODYpXHJcblx0YXQgamF2YS5kZXNrdG9wL2phdmEuYXd0LkNvbnRhaW5lci5wcm9jZXNzRXZlbnQoQ29udGFpbmVyLmphdmE6MjI2NilcclxuXHRhdCBqYXZhLmRlc2t0b3AvamF2YS5hd3QuQ29tcG9uZW50LmRpc3BhdGNoRXZlbnRJbXBsKENvbXBvbmVudC5qYXZhOjQ5OTYpXHJcblx0YXQgamF2YS5kZXNrdG9wL2phdmEuYXd0LkNvbnRhaW5lci5kaXNwYXRjaEV2ZW50SW1wbChDb250YWluZXIuamF2YToyMzI0KVxyXG5cdGF0IGphdmEuZGVza3RvcC9qYXZhLmF3dC5Db21wb25lbnQuZGlzcGF0Y2hFdmVudChDb21wb25lbnQuamF2YTo0ODI4KVxyXG5cdGF0IGphdmEuZGVza3RvcC9qYXZhLmF3dC5MaWdodHdlaWdodERpc3BhdGNoZXIucmV0YXJnZXRNb3VzZUV2ZW50KENvbnRhaW5lci5qYXZhOjQ5NDgpXHJcblx0YXQgamF2YS5kZXNrdG9wL2phdmEuYXd0LkxpZ2h0d2VpZ2h0RGlzcGF0Y2hlci5wcm9jZXNzTW91c2VFdmVudChDb250YWluZXIuamF2YTo0NTc1KVxyXG5cdGF0IGphdmEuZGVza3RvcC9qYXZhLmF3dC5MaWdodHdlaWdodERpc3BhdGNoZXIuZGlzcGF0Y2hFdmVudChDb250YWluZXIuamF2YTo0NTE2KVxyXG5cdGF0IGphdmEuZGVza3RvcC9qYXZhLmF3dC5Db250YWluZXIuZGlzcGF0Y2hFdmVudEltcGwoQ29udGFpbmVyLmphdmE6MjMxMClcclxuXHRhdCBqYXZhLmRlc2t0b3AvamF2YS5hd3QuV2luZG93LmRpc3BhdGNoRXZlbnRJbXBsKFdpbmRvdy5qYXZhOjI3ODApXHJcblx0YXQgamF2YS5kZXNrdG9wL2phdmEuYXd0LkNvbXBvbmVudC5kaXNwYXRjaEV2ZW50KENvbXBvbmVudC5qYXZhOjQ4MjgpXHJcblx0YXQgamF2YS5kZXNrdG9wL2phdmEuYXd0LkV2ZW50UXVldWUuZGlzcGF0Y2hFdmVudEltcGwoRXZlbnRRdWV1ZS5qYXZhOjc3NSlcclxuXHRhdCBqYXZhLmRlc2t0b3AvamF2YS5hd3QuRXZlbnRRdWV1ZSQ0LnJ1bihFdmVudFF1ZXVlLmphdmE6NzIwKVxyXG5cdGF0IGphdmEuZGVza3RvcC9qYXZhLmF3dC5FdmVudFF1ZXVlJDQucnVuKEV2ZW50UXVldWUuamF2YTo3MTQpXHJcblx0YXQgamF2YS5iYXNlL2phdmEuc2VjdXJpdHkuQWNjZXNzQ29udHJvbGxlci5kb1ByaXZpbGVnZWQoQWNjZXNzQ29udHJvbGxlci5qYXZhOjQwMClcclxuXHRhdCBqYXZhLmJhc2UvamF2YS5zZWN1cml0eS5Qcm90ZWN0aW9uRG9tYWluJEphdmFTZWN1cml0eUFjY2Vzc0ltcGwuZG9JbnRlcnNlY3Rpb25Qcml2aWxlZ2UoUHJvdGVjdGlvbkRvbWFpbi5qYXZhOjg3KVxyXG5cdGF0IGphdmEuYmFzZS9qYXZhLnNlY3VyaXR5LlByb3RlY3Rpb25Eb21haW4kSmF2YVNlY3VyaXR5QWNjZXNzSW1wbC5kb0ludGVyc2VjdGlvblByaXZpbGVnZShQcm90ZWN0aW9uRG9tYWluLmphdmE6OTgpXHJcblx0YXQgamF2YS5kZXNrdG9wL2phdmEuYXd0LkV2ZW50UXVldWUkNS5ydW4oRXZlbnRRdWV1ZS5qYXZhOjc0NylcclxuXHRhdCBqYXZhLmRlc2t0b3AvamF2YS5hd3QuRXZlbnRRdWV1ZSQ1LnJ1bihFdmVudFF1ZXVlLmphdmE6NzQ1KVxyXG5cdGF0IGphdmEuYmFzZS9qYXZhLnNlY3VyaXR5LkFjY2Vzc0NvbnRyb2xsZXIuZG9Qcml2aWxlZ2VkKEFjY2Vzc0NvbnRyb2xsZXIuamF2YTo0MDApXHJcblx0YXQgamF2YS5iYXNlL2phdmEuc2VjdXJpdHkuUHJvdGVjdGlvbkRvbWFpbiRKYXZhU2VjdXJpdHlBY2Nlc3NJbXBsLmRvSW50ZXJzZWN0aW9uUHJpdmlsZWdlKFByb3RlY3Rpb25Eb21haW4uamF2YTo4NylcclxuXHRhdCBqYXZhLmRlc2t0b3AvamF2YS5hd3QuRXZlbnRRdWV1ZS5kaXNwYXRjaEV2ZW50KEV2ZW50UXVldWUuamF2YTo3NDQpXHJcblx0YXQgamF2YS5kZXNrdG9wL2phdmEuYXd0LkV2ZW50RGlzcGF0Y2hUaHJlYWQucHVtcE9uZUV2ZW50Rm9yRmlsdGVycyhFdmVudERpc3BhdGNoVGhyZWFkLmphdmE6MjAzKVxyXG5cdGF0IGphdmEuZGVza3RvcC9qYXZhLmF3dC5FdmVudERpc3BhdGNoVGhyZWFkLnB1bXBFdmVudHNGb3JGaWx0ZXIoRXZlbnREaXNwYXRjaFRocmVhZC5qYXZhOjEyNClcclxuXHRhdCBqYXZhLmRlc2t0b3AvamF2YS5hd3QuRXZlbnREaXNwYXRjaFRocmVhZC5wdW1wRXZlbnRzRm9ySGllcmFyY2h5KEV2ZW50RGlzcGF0Y2hUaHJlYWQuamF2YToxMTMpXHJcblx0YXQgamF2YS5kZXNrdG9wL2phdmEuYXd0LkV2ZW50RGlzcGF0Y2hUaHJlYWQucHVtcEV2ZW50cyhFdmVudERpc3BhdGNoVGhyZWFkLmphdmE6MTA5KVxyXG5cdGF0IGphdmEuZGVza3RvcC9qYXZhLmF3dC5FdmVudERpc3BhdGNoVGhyZWFkLnB1bXBFdmVudHMoRXZlbnREaXNwYXRjaFRocmVhZC5qYXZhOjEwMSlcclxuXHRhdCBqYXZhLmRlc2t0b3AvamF2YS5hd3QuRXZlbnREaXNwYXRjaFRocmVhZC5ydW4oRXZlbnREaXNwYXRjaFRocmVhZC5qYXZhOjkwKVxyXG4iLCJyaWNoX3RleHRfanNvbl9yZXByIjp7InR5cGUiOiJkb2MiLCJjb250ZW50IjpbeyJ0eXBlIjoicGFyYWdyYXBoIiwiY29udGVudCI6W3sidHlwZSI6InRleHQiLCJ0ZXh0IjoiZml4IGVycm9yOiBydW46XHIifSx7InR5cGUiOiJoYXJkQnJlYWsifSx7InR5cGUiOiJ0ZXh0IiwidGV4dCI6ImphdmEuc3FsLlNRTEludGVncml0eUNvbnN0cmFpbnRWaW9sYXRpb25FeGNlcHRpb246IENhbm5vdCBhZGQgb3IgdXBkYXRlIGEgY2hpbGQgcm93OiBhIGZvcmVpZ24ga2V5IGNvbnN0cmFpbnQgZmFpbHMgKGBJbnRlcm5ldERCYC5gU1VCU0NSSUJFUmAsIENPTlNUUkFJTlQgYFNVQlNDUklCRVJfaWJma18xYCBGT1JFSUdOIEtFWSAoYHVzZXJfaWRgKSBSRUZFUkVOQ0VTIGBVU0VSYCAoYHVzZXJfaWRgKSlcciJ9LHsidHlwZSI6ImhhcmRCcmVhayJ9LHsidHlwZSI6InRleHQiLCJ0ZXh0IjoiXHRhdCBjb20ubXlzcWwuY2ouamRiYy5leGNlcHRpb25zLlNRTEVycm9yLmNyZWF0ZVNRTEV4Y2VwdGlvbihTUUxFcnJvci5qYXZhOjExNylcciJ9LHsidHlwZSI6ImhhcmRCcmVhayJ9LHsidHlwZSI6InRleHQiLCJ0ZXh0IjoiXHRhdCBjb20ubXlzcWwuY2ouamRiYy5leGNlcHRpb25zLlNRTEV4Y2VwdGlvbnNNYXBwaW5nLnRyYW5zbGF0ZUV4Y2VwdGlvbihTUUxFeGNlcHRpb25zTWFwcGluZy5qYXZhOjEyMilcciJ9LHsidHlwZSI6ImhhcmRCcmVhayJ9LHsidHlwZSI6InRleHQiLCJ0ZXh0IjoiXHRhdCBjb20ubXlzcWwuY2ouamRiYy5DbGllbnRQcmVwYXJlZFN0YXRlbWVudC5leGVjdXRlSW50ZXJuYWwoQ2xpZW50UHJlcGFyZWRTdGF0ZW1lbnQuamF2YTo5MTYpXHIifSx7InR5cGUiOiJoYXJkQnJlYWsifSx7InR5cGUiOiJ0ZXh0IiwidGV4dCI6Ilx0YXQgY29tLm15c3FsLmNqLmpkYmMuQ2xpZW50UHJlcGFyZWRTdGF0ZW1lbnQuZXhlY3V0ZVVwZGF0ZUludGVybmFsKENsaWVudFByZXBhcmVkU3RhdGVtZW50LmphdmE6MTA2MSlcciJ9LHsidHlwZSI6ImhhcmRCcmVhayJ9LHsidHlwZSI6InRleHQiLCJ0ZXh0IjoiXHRhdCBjb20ubXlzcWwuY2ouamRiYy5DbGllbnRQcmVwYXJlZFN0YXRlbWVudC5leGVjdXRlVXBkYXRlSW50ZXJuYWwoQ2xpZW50UHJlcGFyZWRTdGF0ZW1lbnQuamF2YToxMDA5KVxyIn0seyJ0eXBlIjoiaGFyZEJyZWFrIn0seyJ0eXBlIjoidGV4dCIsInRleHQiOiJcdGF0IGNvbS5teXNxbC5jai5qZGJjLkNsaWVudFByZXBhcmVkU3RhdGVtZW50LmV4ZWN1dGVMYXJnZVVwZGF0ZShDbGllbnRQcmVwYXJlZFN0YXRlbWVudC5qYXZhOjEzMjApXHIifSx7InR5cGUiOiJoYXJkQnJlYWsifSx7InR5cGUiOiJ0ZXh0IiwidGV4dCI6Ilx0YXQgY29tLm15c3FsLmNqLmpkYmMuQ2xpZW50UHJlcGFyZWRTdGF0ZW1lbnQuZXhlY3V0ZVVwZGF0ZShDbGllbnRQcmVwYXJlZFN0YXRlbWVudC5qYXZhOjk5NClcciJ9LHsidHlwZSI6ImhhcmRCcmVhayJ9LHsidHlwZSI6InRleHQiLCJ0ZXh0IjoiXHRhdCBEQU8uU3Vic2NyaWJlckRBTy5pbnNlcnQoU3Vic2NyaWJlckRBTy5qYXZhOjQ0KVxyIn0seyJ0eXBlIjoiaGFyZEJyZWFrIn0seyJ0eXBlIjoidGV4dCIsInRleHQiOiJcdGF0IGludGVybmV0Lm1hbmdlbWVudC5zeXN0ZW0uU2lnblVwLmJ0blNpZ251cEFjdGlvblBlcmZvcm1lZChTaWduVXAuamF2YToyNzkpXHIifSx7InR5cGUiOiJoYXJkQnJlYWsifSx7InR5cGUiOiJ0ZXh0IiwidGV4dCI6Ilx0YXQgaW50ZXJuZXQubWFuZ2VtZW50LnN5c3RlbS5TaWduVXAkNy5hY3Rpb25QZXJmb3JtZWQoU2lnblVwLmphdmE6MTcxKVxyIn0seyJ0eXBlIjoiaGFyZEJyZWFrIn0seyJ0eXBlIjoidGV4dCIsInRleHQiOiJcdGF0IGphdmEuZGVza3RvcC9qYXZheC5zd2luZy5BYnN0cmFjdEJ1dHRvbi5maXJlQWN0aW9uUGVyZm9ybWVkKEFic3RyYWN0QnV0dG9uLmphdmE6MTk3MilcciJ9LHsidHlwZSI6ImhhcmRCcmVhayJ9LHsidHlwZSI6InRleHQiLCJ0ZXh0IjoiXHRhdCBqYXZhLmRlc2t0b3AvamF2YXguc3dpbmcuQWJzdHJhY3RCdXR0b24kSGFuZGxlci5hY3Rpb25QZXJmb3JtZWQoQWJzdHJhY3RCdXR0b24uamF2YToyMzE0KVxyIn0seyJ0eXBlIjoiaGFyZEJyZWFrIn0seyJ0eXBlIjoidGV4dCIsInRleHQiOiJcdGF0IGphdmEuZGVza3RvcC9qYXZheC5zd2luZy5EZWZhdWx0QnV0dG9uTW9kZWwuZmlyZUFjdGlvblBlcmZvcm1lZChEZWZhdWx0QnV0dG9uTW9kZWwuamF2YTo0MDcpXHIifSx7InR5cGUiOiJoYXJkQnJlYWsifSx7InR5cGUiOiJ0ZXh0IiwidGV4dCI6Ilx0YXQgamF2YS5kZXNrdG9wL2phdmF4LnN3aW5nLkRlZmF1bHRCdXR0b25Nb2RlbC5zZXRQcmVzc2VkKERlZmF1bHRCdXR0b25Nb2RlbC5qYXZhOjI2MilcciJ9LHsidHlwZSI6ImhhcmRCcmVhayJ9LHsidHlwZSI6InRleHQiLCJ0ZXh0IjoiXHRhdCBqYXZhLmRlc2t0b3AvamF2YXguc3dpbmcucGxhZi5iYXNpYy5CYXNpY0J1dHRvbkxpc3RlbmVyLm1vdXNlUmVsZWFzZWQoQmFzaWNCdXR0b25MaXN0ZW5lci5qYXZhOjI3OSlcciJ9LHsidHlwZSI6ImhhcmRCcmVhayJ9LHsidHlwZSI6InRleHQiLCJ0ZXh0IjoiXHRhdCBqYXZhLmRlc2t0b3AvamF2YS5hd3QuQ29tcG9uZW50LnByb2Nlc3NNb3VzZUV2ZW50KENvbXBvbmVudC5qYXZhOjY2MjEpXHIifSx7InR5cGUiOiJoYXJkQnJlYWsifSx7InR5cGUiOiJ0ZXh0IiwidGV4dCI6Ilx0YXQgamF2YS5kZXNrdG9wL2phdmF4LnN3aW5nLkpDb21wb25lbnQucHJvY2Vzc01vdXNlRXZlbnQoSkNvbXBvbmVudC5qYXZhOjMzOTgpXHIifSx7InR5cGUiOiJoYXJkQnJlYWsifSx7InR5cGUiOiJ0ZXh0IiwidGV4dCI6Ilx0YXQgamF2YS5kZXNrdG9wL2phdmEuYXd0LkNvbXBvbmVudC5wcm9jZXNzRXZlbnQoQ29tcG9uZW50LmphdmE6NjM4NilcciJ9LHsidHlwZSI6ImhhcmRCcmVhayJ9LHsidHlwZSI6InRleHQiLCJ0ZXh0IjoiXHRhdCBqYXZhLmRlc2t0b3AvamF2YS5hd3QuQ29udGFpbmVyLnByb2Nlc3NFdmVudChDb250YWluZXIuamF2YToyMjY2KVxyIn0seyJ0eXBlIjoiaGFyZEJyZWFrIn0seyJ0eXBlIjoidGV4dCIsInRleHQiOiJcdGF0IGphdmEuZGVza3RvcC9qYXZhLmF3dC5Db21wb25lbnQuZGlzcGF0Y2hFdmVudEltcGwoQ29tcG9uZW50LmphdmE6NDk5NilcciJ9LHsidHlwZSI6ImhhcmRCcmVhayJ9LHsidHlwZSI6InRleHQiLCJ0ZXh0IjoiXHRhdCBqYXZhLmRlc2t0b3AvamF2YS5hd3QuQ29udGFpbmVyLmRpc3BhdGNoRXZlbnRJbXBsKENvbnRhaW5lci5qYXZhOjIzMjQpXHIifSx7InR5cGUiOiJoYXJkQnJlYWsifSx7InR5cGUiOiJ0ZXh0IiwidGV4dCI6Ilx0YXQgamF2YS5kZXNrdG9wL2phdmEuYXd0LkNvbXBvbmVudC5kaXNwYXRjaEV2ZW50KENvbXBvbmVudC5qYXZhOjQ4MjgpXHIifSx7InR5cGUiOiJoYXJkQnJlYWsifSx7InR5cGUiOiJ0ZXh0IiwidGV4dCI6Ilx0YXQgamF2YS5kZXNrdG9wL2phdmEuYXd0LkxpZ2h0d2VpZ2h0RGlzcGF0Y2hlci5yZXRhcmdldE1vdXNlRXZlbnQoQ29udGFpbmVyLmphdmE6NDk0OClcciJ9LHsidHlwZSI6ImhhcmRCcmVhayJ9LHsidHlwZSI6InRleHQiLCJ0ZXh0IjoiXHRhdCBqYXZhLmRlc2t0b3AvamF2YS5hd3QuTGlnaHR3ZWlnaHREaXNwYXRjaGVyLnByb2Nlc3NNb3VzZUV2ZW50KENvbnRhaW5lci5qYXZhOjQ1NzUpXHIifSx7InR5cGUiOiJoYXJkQnJlYWsifSx7InR5cGUiOiJ0ZXh0IiwidGV4dCI6Ilx0YXQgamF2YS5kZXNrdG9wL2phdmEuYXd0LkxpZ2h0d2VpZ2h0RGlzcGF0Y2hlci5kaXNwYXRjaEV2ZW50KENvbnRhaW5lci5qYXZhOjQ1MTYpXHIifSx7InR5cGUiOiJoYXJkQnJlYWsifSx7InR5cGUiOiJ0ZXh0IiwidGV4dCI6Ilx0YXQgamF2YS5kZXNrdG9wL2phdmEuYXd0LkNvbnRhaW5lci5kaXNwYXRjaEV2ZW50SW1wbChDb250YWluZXIuamF2YToyMzEwKVxyIn0seyJ0eXBlIjoiaGFyZEJyZWFrIn0seyJ0eXBlIjoidGV4dCIsInRleHQiOiJcdGF0IGphdmEuZGVza3RvcC9qYXZhLmF3dC5XaW5kb3cuZGlzcGF0Y2hFdmVudEltcGwoV2luZG93LmphdmE6Mjc4MClcciJ9LHsidHlwZSI6ImhhcmRCcmVhayJ9LHsidHlwZSI6InRleHQiLCJ0ZXh0IjoiXHRhdCBqYXZhLmRlc2t0b3AvamF2YS5hd3QuQ29tcG9uZW50LmRpc3BhdGNoRXZlbnQoQ29tcG9uZW50LmphdmE6NDgyOClcciJ9LHsidHlwZSI6ImhhcmRCcmVhayJ9LHsidHlwZSI6InRleHQiLCJ0ZXh0IjoiXHRhdCBqYXZhLmRlc2t0b3AvamF2YS5hd3QuRXZlbnRRdWV1ZS5kaXNwYXRjaEV2ZW50SW1wbChFdmVudFF1ZXVlLmphdmE6Nzc1KVxyIn0seyJ0eXBlIjoiaGFyZEJyZWFrIn0seyJ0eXBlIjoidGV4dCIsInRleHQiOiJcdGF0IGphdmEuZGVza3RvcC9qYXZhLmF3dC5FdmVudFF1ZXVlJDQucnVuKEV2ZW50UXVldWUuamF2YTo3MjApXHIifSx7InR5cGUiOiJoYXJkQnJlYWsifSx7InR5cGUiOiJ0ZXh0IiwidGV4dCI6Ilx0YXQgamF2YS5kZXNrdG9wL2phdmEuYXd0LkV2ZW50UXVldWUkNC5ydW4oRXZlbnRRdWV1ZS5qYXZhOjcxNClcciJ9LHsidHlwZSI6ImhhcmRCcmVhayJ9LHsidHlwZSI6InRleHQiLCJ0ZXh0IjoiXHRhdCBqYXZhLmJhc2UvamF2YS5zZWN1cml0eS5BY2Nlc3NDb250cm9sbGVyLmRvUHJpdmlsZWdlZChBY2Nlc3NDb250cm9sbGVyLmphdmE6NDAwKVxyIn0seyJ0eXBlIjoiaGFyZEJyZWFrIn0seyJ0eXBlIjoidGV4dCIsInRleHQiOiJcdGF0IGphdmEuYmFzZS9qYXZhLnNlY3VyaXR5LlByb3RlY3Rpb25Eb21haW4kSmF2YVNlY3VyaXR5QWNjZXNzSW1wbC5kb0ludGVyc2VjdGlvblByaXZpbGVnZShQcm90ZWN0aW9uRG9tYWluLmphdmE6ODcpXHIifSx7InR5cGUiOiJoYXJkQnJlYWsifSx7InR5cGUiOiJ0ZXh0IiwidGV4dCI6Ilx0YXQgamF2YS5iYXNlL2phdmEuc2VjdXJpdHkuUHJvdGVjdGlvbkRvbWFpbiRKYXZhU2VjdXJpdHlBY2Nlc3NJbXBsLmRvSW50ZXJzZWN0aW9uUHJpdmlsZWdlKFByb3RlY3Rpb25Eb21haW4uamF2YTo5OClcciJ9LHsidHlwZSI6ImhhcmRCcmVhayJ9LHsidHlwZSI6InRleHQiLCJ0ZXh0IjoiXHRhdCBqYXZhLmRlc2t0b3AvamF2YS5hd3QuRXZlbnRRdWV1ZSQ1LnJ1bihFdmVudFF1ZXVlLmphdmE6NzQ3KVxyIn0seyJ0eXBlIjoiaGFyZEJyZWFrIn0seyJ0eXBlIjoidGV4dCIsInRleHQiOiJcdGF0IGphdmEuZGVza3RvcC9qYXZhLmF3dC5FdmVudFF1ZXVlJDUucnVuKEV2ZW50UXVldWUuamF2YTo3NDUpXHIifSx7InR5cGUiOiJoYXJkQnJlYWsifSx7InR5cGUiOiJ0ZXh0IiwidGV4dCI6Ilx0YXQgamF2YS5iYXNlL2phdmEuc2VjdXJpdHkuQWNjZXNzQ29udHJvbGxlci5kb1ByaXZpbGVnZWQoQWNjZXNzQ29udHJvbGxlci5qYXZhOjQwMClcciJ9LHsidHlwZSI6ImhhcmRCcmVhayJ9LHsidHlwZSI6InRleHQiLCJ0ZXh0IjoiXHRhdCBqYXZhLmJhc2UvamF2YS5zZWN1cml0eS5Qcm90ZWN0aW9uRG9tYWluJEphdmFTZWN1cml0eUFjY2Vzc0ltcGwuZG9JbnRlcnNlY3Rpb25Qcml2aWxlZ2UoUHJvdGVjdGlvbkRvbWFpbi5qYXZhOjg3KVxyIn0seyJ0eXBlIjoiaGFyZEJyZWFrIn0seyJ0eXBlIjoidGV4dCIsInRleHQiOiJcdGF0IGphdmEuZGVza3RvcC9qYXZhLmF3dC5FdmVudFF1ZXVlLmRpc3BhdGNoRXZlbnQoRXZlbnRRdWV1ZS5qYXZhOjc0NClcciJ9LHsidHlwZSI6ImhhcmRCcmVhayJ9LHsidHlwZSI6InRleHQiLCJ0ZXh0IjoiXHRhdCBqYXZhLmRlc2t0b3AvamF2YS5hd3QuRXZlbnREaXNwYXRjaFRocmVhZC5wdW1wT25lRXZlbnRGb3JGaWx0ZXJzKEV2ZW50RGlzcGF0Y2hUaHJlYWQuamF2YToyMDMpXHIifSx7InR5cGUiOiJoYXJkQnJlYWsifSx7InR5cGUiOiJ0ZXh0IiwidGV4dCI6Ilx0YXQgamF2YS5kZXNrdG9wL2phdmEuYXd0LkV2ZW50RGlzcGF0Y2hUaHJlYWQucHVtcEV2ZW50c0ZvckZpbHRlcihFdmVudERpc3BhdGNoVGhyZWFkLmphdmE6MTI0KVxyIn0seyJ0eXBlIjoiaGFyZEJyZWFrIn0seyJ0eXBlIjoidGV4dCIsInRleHQiOiJcdGF0IGphdmEuZGVza3RvcC9qYXZhLmF3dC5FdmVudERpc3BhdGNoVGhyZWFkLnB1bXBFdmVudHNGb3JIaWVyYXJjaHkoRXZlbnREaXNwYXRjaFRocmVhZC5qYXZhOjExMylcciJ9LHsidHlwZSI6ImhhcmRCcmVhayJ9LHsidHlwZSI6InRleHQiLCJ0ZXh0IjoiXHRhdCBqYXZhLmRlc2t0b3AvamF2YS5hd3QuRXZlbnREaXNwYXRjaFRocmVhZC5wdW1wRXZlbnRzKEV2ZW50RGlzcGF0Y2hUaHJlYWQuamF2YToxMDkpXHIifSx7InR5cGUiOiJoYXJkQnJlYWsifSx7InR5cGUiOiJ0ZXh0IiwidGV4dCI6Ilx0YXQgamF2YS5kZXNrdG9wL2phdmEuYXd0LkV2ZW50RGlzcGF0Y2hUaHJlYWQucHVtcEV2ZW50cyhFdmVudERpc3BhdGNoVGhyZWFkLmphdmE6MTAxKVxyIn0seyJ0eXBlIjoiaGFyZEJyZWFrIn0seyJ0eXBlIjoidGV4dCIsInRleHQiOiJcdGF0IGphdmEuZGVza3RvcC9qYXZhLmF3dC5FdmVudERpc3BhdGNoVGhyZWFkLnJ1bihFdmVudERpc3BhdGNoVGhyZWFkLmphdmE6OTApXHIifSx7InR5cGUiOiJoYXJkQnJlYWsifV19XX0sIm1lbnRpb25lZF9pdGVtcyI6W10sInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfMDFDd3lMS1FHdHpacHU1WU5lbkpub1VLIiwidG9vbF9uYW1lIjoiY29kZWJhc2UtcmV0cmlldmFsIiwiaW5wdXRfanNvbiI6IntcImluZm9ybWF0aW9uX3JlcXVlc3RcIjogXCJTaG93IHRoZSBTdWJzY3JpYmVyREFPLmphdmEgZmlsZSwgZXNwZWNpYWxseSB0aGUgaW5zZXJ0IG1ldGhvZCBhdCBsaW5lIDQ0IHRoYXQncyBtZW50aW9uZWQgaW4gdGhlIGVycm9yIHN0YWNrIHRyYWNlLlwifSIsIm1jcF9zZXJ2ZXJfbmFtZSI6IiIsIm1jcF90b29sX25hbWUiOiIifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IkknbGwgaGVscCB5b3UgZml4IHRoZSBmb3JlaWduIGtleSBjb25zdHJhaW50IGVycm9yLiBUaGlzIGVycm9yIG9jY3VycyB3aGVuIHRyeWluZyB0byBhZGQgYSByZWNvcmQgdG8gdGhlIFNVQlNDUklCRVIgdGFibGUgd2l0aCBhIHVzZXJfaWQgdGhhdCBkb2Vzbid0IGV4aXN0IGluIHRoZSBVU0VSIHRhYmxlLiBMZXQncyBpbnZlc3RpZ2F0ZSBhbmQgZml4IHRoaXMgaXNzdWUuXG5cbiMjIEluZm9ybWF0aW9uIEdhdGhlcmluZ1xuXG5GaXJzdCwgbGV0J3MgbG9vayBhdCB0aGUgcmVsZXZhbnQgY29kZSBpbiB0aGUgU3Vic2NyaWJlckRBTyBhbmQgU2lnblVwIGNsYXNzZXMgdG8gdW5kZXJzdGFuZCB3aGF0J3MgaGFwcGVuaW5nOlxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MCwidGV4dF9ub2RlIjp7ImNvbnRlbnQiOiJmaXggZXJyb3I6IHJ1bjpcclxuamF2YS5zcWwuU1FMSW50ZWdyaXR5Q29uc3RyYWludFZpb2xhdGlvbkV4Y2VwdGlvbjogQ2Fubm90IGFkZCBvciB1cGRhdGUgYSBjaGlsZCByb3c6IGEgZm9yZWlnbiBrZXkgY29uc3RyYWludCBmYWlscyAoYEludGVybmV0REJgLmBTVUJTQ1JJQkVSYCwgQ09OU1RSQUlOVCBgU1VCU0NSSUJFUl9pYmZrXzFgIEZPUkVJR04gS0VZIChgdXNlcl9pZGApIFJFRkVSRU5DRVMgYFVTRVJgIChgdXNlcl9pZGApKVxyXG5cdGF0IGNvbS5teXNxbC5jai5qZGJjLmV4Y2VwdGlvbnMuU1FMRXJyb3IuY3JlYXRlU1FMRXhjZXB0aW9uKFNRTEVycm9yLmphdmE6MTE3KVxyXG5cdGF0IGNvbS5teXNxbC5jai5qZGJjLmV4Y2VwdGlvbnMuU1FMRXhjZXB0aW9uc01hcHBpbmcudHJhbnNsYXRlRXhjZXB0aW9uKFNRTEV4Y2VwdGlvbnNNYXBwaW5nLmphdmE6MTIyKVxyXG5cdGF0IGNvbS5teXNxbC5jai5qZGJjLkNsaWVudFByZXBhcmVkU3RhdGVtZW50LmV4ZWN1dGVJbnRlcm5hbChDbGllbnRQcmVwYXJlZFN0YXRlbWVudC5qYXZhOjkxNilcclxuXHRhdCBjb20ubXlzcWwuY2ouamRiYy5DbGllbnRQcmVwYXJlZFN0YXRlbWVudC5leGVjdXRlVXBkYXRlSW50ZXJuYWwoQ2xpZW50UHJlcGFyZWRTdGF0ZW1lbnQuamF2YToxMDYxKVxyXG5cdGF0IGNvbS5teXNxbC5jai5qZGJjLkNsaWVudFByZXBhcmVkU3RhdGVtZW50LmV4ZWN1dGVVcGRhdGVJbnRlcm5hbChDbGllbnRQcmVwYXJlZFN0YXRlbWVudC5qYXZhOjEwMDkpXHJcblx0YXQgY29tLm15c3FsLmNqLmpkYmMuQ2xpZW50UHJlcGFyZWRTdGF0ZW1lbnQuZXhlY3V0ZUxhcmdlVXBkYXRlKENsaWVudFByZXBhcmVkU3RhdGVtZW50LmphdmE6MTMyMClcclxuXHRhdCBjb20ubXlzcWwuY2ouamRiYy5DbGllbnRQcmVwYXJlZFN0YXRlbWVudC5leGVjdXRlVXBkYXRlKENsaWVudFByZXBhcmVkU3RhdGVtZW50LmphdmE6OTk0KVxyXG5cdGF0IERBTy5TdWJzY3JpYmVyREFPLmluc2VydChTdWJzY3JpYmVyREFPLmphdmE6NDQpXHJcblx0YXQgaW50ZXJuZXQubWFuZ2VtZW50LnN5c3RlbS5TaWduVXAuYnRuU2lnbnVwQWN0aW9uUGVyZm9ybWVkKFNpZ25VcC5qYXZhOjI3OSlcclxuXHRhdCBpbnRlcm5ldC5tYW5nZW1lbnQuc3lzdGVtLlNpZ25VcCQ3LmFjdGlvblBlcmZvcm1lZChTaWduVXAuamF2YToxNzEpXHJcblx0YXQgamF2YS5kZXNrdG9wL2phdmF4LnN3aW5nLkFic3RyYWN0QnV0dG9uLmZpcmVBY3Rpb25QZXJmb3JtZWQoQWJzdHJhY3RCdXR0b24uamF2YToxOTcyKVxyXG5cdGF0IGphdmEuZGVza3RvcC9qYXZheC5zd2luZy5BYnN0cmFjdEJ1dHRvbiRIYW5kbGVyLmFjdGlvblBlcmZvcm1lZChBYnN0cmFjdEJ1dHRvbi5qYXZhOjIzMTQpXHJcblx0YXQgamF2YS5kZXNrdG9wL2phdmF4LnN3aW5nLkRlZmF1bHRCdXR0b25Nb2RlbC5maXJlQWN0aW9uUGVyZm9ybWVkKERlZmF1bHRCdXR0b25Nb2RlbC5qYXZhOjQwNylcclxuXHRhdCBqYXZhLmRlc2t0b3AvamF2YXguc3dpbmcuRGVmYXVsdEJ1dHRvbk1vZGVsLnNldFByZXNzZWQoRGVmYXVsdEJ1dHRvbk1vZGVsLmphdmE6MjYyKVxyXG5cdGF0IGphdmEuZGVza3RvcC9qYXZheC5zd2luZy5wbGFmLmJhc2ljLkJhc2ljQnV0dG9uTGlzdGVuZXIubW91c2VSZWxlYXNlZChCYXNpY0J1dHRvbkxpc3RlbmVyLmphdmE6Mjc5KVxyXG5cdGF0IGphdmEuZGVza3RvcC9qYXZhLmF3dC5Db21wb25lbnQucHJvY2Vzc01vdXNlRXZlbnQoQ29tcG9uZW50LmphdmE6NjYyMSlcclxuXHRhdCBqYXZhLmRlc2t0b3AvamF2YXguc3dpbmcuSkNvbXBvbmVudC5wcm9jZXNzTW91c2VFdmVudChKQ29tcG9uZW50LmphdmE6MzM5OClcclxuXHRhdCBqYXZhLmRlc2t0b3AvamF2YS5hd3QuQ29tcG9uZW50LnByb2Nlc3NFdmVudChDb21wb25lbnQuamF2YTo2Mzg2KVxyXG5cdGF0IGphdmEuZGVza3RvcC9qYXZhLmF3dC5Db250YWluZXIucHJvY2Vzc0V2ZW50KENvbnRhaW5lci5qYXZhOjIyNjYpXHJcblx0YXQgamF2YS5kZXNrdG9wL2phdmEuYXd0LkNvbXBvbmVudC5kaXNwYXRjaEV2ZW50SW1wbChDb21wb25lbnQuamF2YTo0OTk2KVxyXG5cdGF0IGphdmEuZGVza3RvcC9qYXZhLmF3dC5Db250YWluZXIuZGlzcGF0Y2hFdmVudEltcGwoQ29udGFpbmVyLmphdmE6MjMyNClcclxuXHRhdCBqYXZhLmRlc2t0b3AvamF2YS5hd3QuQ29tcG9uZW50LmRpc3BhdGNoRXZlbnQoQ29tcG9uZW50LmphdmE6NDgyOClcclxuXHRhdCBqYXZhLmRlc2t0b3AvamF2YS5hd3QuTGlnaHR3ZWlnaHREaXNwYXRjaGVyLnJldGFyZ2V0TW91c2VFdmVudChDb250YWluZXIuamF2YTo0OTQ4KVxyXG5cdGF0IGphdmEuZGVza3RvcC9qYXZhLmF3dC5MaWdodHdlaWdodERpc3BhdGNoZXIucHJvY2Vzc01vdXNlRXZlbnQoQ29udGFpbmVyLmphdmE6NDU3NSlcclxuXHRhdCBqYXZhLmRlc2t0b3AvamF2YS5hd3QuTGlnaHR3ZWlnaHREaXNwYXRjaGVyLmRpc3BhdGNoRXZlbnQoQ29udGFpbmVyLmphdmE6NDUxNilcclxuXHRhdCBqYXZhLmRlc2t0b3AvamF2YS5hd3QuQ29udGFpbmVyLmRpc3BhdGNoRXZlbnRJbXBsKENvbnRhaW5lci5qYXZhOjIzMTApXHJcblx0YXQgamF2YS5kZXNrdG9wL2phdmEuYXd0LldpbmRvdy5kaXNwYXRjaEV2ZW50SW1wbChXaW5kb3cuamF2YToyNzgwKVxyXG5cdGF0IGphdmEuZGVza3RvcC9qYXZhLmF3dC5Db21wb25lbnQuZGlzcGF0Y2hFdmVudChDb21wb25lbnQuamF2YTo0ODI4KVxyXG5cdGF0IGphdmEuZGVza3RvcC9qYXZhLmF3dC5FdmVudFF1ZXVlLmRpc3BhdGNoRXZlbnRJbXBsKEV2ZW50UXVldWUuamF2YTo3NzUpXHJcblx0YXQgamF2YS5kZXNrdG9wL2phdmEuYXd0LkV2ZW50UXVldWUkNC5ydW4oRXZlbnRRdWV1ZS5qYXZhOjcyMClcclxuXHRhdCBqYXZhLmRlc2t0b3AvamF2YS5hd3QuRXZlbnRRdWV1ZSQ0LnJ1bihFdmVudFF1ZXVlLmphdmE6NzE0KVxyXG5cdGF0IGphdmEuYmFzZS9qYXZhLnNlY3VyaXR5LkFjY2Vzc0NvbnRyb2xsZXIuZG9Qcml2aWxlZ2VkKEFjY2Vzc0NvbnRyb2xsZXIuamF2YTo0MDApXHJcblx0YXQgamF2YS5iYXNlL2phdmEuc2VjdXJpdHkuUHJvdGVjdGlvbkRvbWFpbiRKYXZhU2VjdXJpdHlBY2Nlc3NJbXBsLmRvSW50ZXJzZWN0aW9uUHJpdmlsZWdlKFByb3RlY3Rpb25Eb21haW4uamF2YTo4NylcclxuXHRhdCBqYXZhLmJhc2UvamF2YS5zZWN1cml0eS5Qcm90ZWN0aW9uRG9tYWluJEphdmFTZWN1cml0eUFjY2Vzc0ltcGwuZG9JbnRlcnNlY3Rpb25Qcml2aWxlZ2UoUHJvdGVjdGlvbkRvbWFpbi5qYXZhOjk4KVxyXG5cdGF0IGphdmEuZGVza3RvcC9qYXZhLmF3dC5FdmVudFF1ZXVlJDUucnVuKEV2ZW50UXVldWUuamF2YTo3NDcpXHJcblx0YXQgamF2YS5kZXNrdG9wL2phdmEuYXd0LkV2ZW50UXVldWUkNS5ydW4oRXZlbnRRdWV1ZS5qYXZhOjc0NSlcclxuXHRhdCBqYXZhLmJhc2UvamF2YS5zZWN1cml0eS5BY2Nlc3NDb250cm9sbGVyLmRvUHJpdmlsZWdlZChBY2Nlc3NDb250cm9sbGVyLmphdmE6NDAwKVxyXG5cdGF0IGphdmEuYmFzZS9qYXZhLnNlY3VyaXR5LlByb3RlY3Rpb25Eb21haW4kSmF2YVNlY3VyaXR5QWNjZXNzSW1wbC5kb0ludGVyc2VjdGlvblByaXZpbGVnZShQcm90ZWN0aW9uRG9tYWluLmphdmE6ODcpXHJcblx0YXQgamF2YS5kZXNrdG9wL2phdmEuYXd0LkV2ZW50UXVldWUuZGlzcGF0Y2hFdmVudChFdmVudFF1ZXVlLmphdmE6NzQ0KVxyXG5cdGF0IGphdmEuZGVza3RvcC9qYXZhLmF3dC5FdmVudERpc3BhdGNoVGhyZWFkLnB1bXBPbmVFdmVudEZvckZpbHRlcnMoRXZlbnREaXNwYXRjaFRocmVhZC5qYXZhOjIwMylcclxuXHRhdCBqYXZhLmRlc2t0b3AvamF2YS5hd3QuRXZlbnREaXNwYXRjaFRocmVhZC5wdW1wRXZlbnRzRm9yRmlsdGVyKEV2ZW50RGlzcGF0Y2hUaHJlYWQuamF2YToxMjQpXHJcblx0YXQgamF2YS5kZXNrdG9wL2phdmEuYXd0LkV2ZW50RGlzcGF0Y2hUaHJlYWQucHVtcEV2ZW50c0ZvckhpZXJhcmNoeShFdmVudERpc3BhdGNoVGhyZWFkLmphdmE6MTEzKVxyXG5cdGF0IGphdmEuZGVza3RvcC9qYXZhLmF3dC5FdmVudERpc3BhdGNoVGhyZWFkLnB1bXBFdmVudHMoRXZlbnREaXNwYXRjaFRocmVhZC5qYXZhOjEwOSlcclxuXHRhdCBqYXZhLmRlc2t0b3AvamF2YS5hd3QuRXZlbnREaXNwYXRjaFRocmVhZC5wdW1wRXZlbnRzKEV2ZW50RGlzcGF0Y2hUaHJlYWQuamF2YToxMDEpXHJcblx0YXQgamF2YS5kZXNrdG9wL2phdmEuYXd0LkV2ZW50RGlzcGF0Y2hUaHJlYWQucnVuKEV2ZW50RGlzcGF0Y2hUaHJlYWQuamF2YTo5MClcclxuIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiRTovSG9jVGFwLzAyX0pBVkEvMDNfUHJvamVjdC9JbnRlcm5ldCBNYW5nZW1lbnQgU3lzdGVtIiwiZm9sZGVyUm9vdCI6IkU6L0hvY1RhcC8wMl9KQVZBLzAzX1Byb2plY3QvSW50ZXJuZXQgTWFuZ2VtZW50IFN5c3RlbSJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInRpbWVzdGFtcCI6IjIwMjUtMDUtMTFUMDk6MzI6MTguOTQ2WiIsInJlc3BvbnNlX3RleHQiOiJJJ2xsIGhlbHAgeW91IGZpeCB0aGUgZm9yZWlnbiBrZXkgY29uc3RyYWludCBlcnJvci4gVGhpcyBlcnJvciBvY2N1cnMgd2hlbiB0cnlpbmcgdG8gYWRkIGEgcmVjb3JkIHRvIHRoZSBTVUJTQ1JJQkVSIHRhYmxlIHdpdGggYSB1c2VyX2lkIHRoYXQgZG9lc24ndCBleGlzdCBpbiB0aGUgVVNFUiB0YWJsZS4gTGV0J3MgaW52ZXN0aWdhdGUgYW5kIGZpeCB0aGlzIGlzc3VlLlxuXG4jIyBJbmZvcm1hdGlvbiBHYXRoZXJpbmdcblxuRmlyc3QsIGxldCdzIGxvb2sgYXQgdGhlIHJlbGV2YW50IGNvZGUgaW4gdGhlIFN1YnNjcmliZXJEQU8gYW5kIFNpZ25VcCBjbGFzc2VzIHRvIHVuZGVyc3RhbmQgd2hhdCdzIGhhcHBlbmluZzpcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiIzZTVkYzM3YS0xODlmLTRmYTYtYTQ5Yi02Nzk2N2EzYzU4MTYiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1XzAxWVFDNnZKM0dva1Mya0VtdTlMR1VBciIsInRvb2xfbmFtZSI6ImxhdW5jaC1wcm9jZXNzIiwiaW5wdXRfanNvbiI6IntcImNvbW1hbmRcIjogXCJteXNxbCAtaCAxMjUuMjEyLjIzMS4xODQgLVAgNjk2OSAtdSBtaW50b3JpMDkgLXAnTWludG9yeTA5QDk2JyAtZSBcXFwiREVTQ1JJQkUgSW50ZXJuZXREQi5VU0VSOyBERVNDUklCRSBJbnRlcm5ldERCLlNVQlNDUklCRVI7XFxcIlwiLCBcIndhaXRcIjogdHJ1ZSwgXCJtYXhfd2FpdF9zZWNvbmRzXCI6IDMwfSIsIm1jcF9zZXJ2ZXJfbmFtZSI6IiIsIm1jcF90b29sX25hbWUiOiIifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6Ik5vdyBsZXQncyBsb29rIGF0IHRoZSBkYXRhYmFzZSBzY2hlbWEgdG8gdW5kZXJzdGFuZCB0aGUgcmVsYXRpb25zaGlwIGJldHdlZW4gVVNFUiBhbmQgU1VCU0NSSUJFUiB0YWJsZXM6XG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJUaGUgZm9sbG93aW5nIGNvZGUgc2VjdGlvbnMgd2VyZSByZXRyaWV2ZWQ6XG5QYXRoOiBzcmMvREFPL1N1YnNjcmliZXJEQU8uamF2YVxuLypcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvTGljZW5zZXMvbGljZW5zZS1kZWZhdWx0LnR4dCB0byBjaGFuZ2UgdGhpcyBsaWNlbnNlXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ2xhc3MuamF2YSB0byBlZGl0IHRoaXMgdGVtcGxhdGVcbiAqL1xucGFja2FnZSBEQU87XG5cbmltcG9ydCBNb2RlbC5TdWJzY3JpYmVyO1xuaW1wb3J0IGphdmEudXRpbC5MaXN0O1xuaW1wb3J0IGphdmEuc3FsLkNvbm5lY3Rpb247XG5pbXBvcnQgamF2YS5zcWwuUHJlcGFyZWRTdGF0ZW1lbnQ7XG5pbXBvcnQgamF2YS5zcWwuVGltZXN0YW1wO1xuXG4vKipcbiAqXG4gKiBAYXV0aG9yIE5nb2MgVGhhb1xuICovXG5wdWJsaWMgY2xhc3MgU3Vic2NyaWJlckRBT3tcblxuICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBpbnNlcnQoU3Vic2NyaWJlciBvYmopIHtcbiAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcbiAgICAgICAgUHJlcGFyZWRTdGF0ZW1lbnQgcHNVc2VyID0gbnVsbDtcbiAgICAgICAgUHJlcGFyZWRTdGF0ZW1lbnQgcHNTdWJzY3JpYmVyID0gbnVsbDtcbiAgICAgICAgXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25uID0gQ29ubmVjdGlvblByb3ZpZGVyLmdldENvbm4oKTtcbiAgICAgICAgICAgIGNvbm4uc2V0QXV0b0NvbW1pdChmYWxzZSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFN0cmluZyBzcWxVc2VyID0gXCJJTlNFUlQgSU5UTyBVU0VSKHVzZXJfaWQsIHVzZXJuYW1lLCBwYXNzd29yZCwgcm9sZSwgY3JlYXRlZF9hdCkgVkFMVUVTICg/LCA/LCA/LCA/LCA/KVwiO1xuICAgICAgICAgICAgcHNVc2VyID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHNxbFVzZXIpO1xuICAgICAgICAgICAgcHNVc2VyLnNldEludCgxLCBvYmouZ2V0VXNlcl9pZCgpKTtcbiAgICAgICAgICAgIHBzVXNlci5zZXRTdHJpbmcoMiwgb2JqLmdldFVzZXJuYW1lKCkpO1xuICAgICAgICAgICAgcHNVc2VyLnNldFN0cmluZygzLCBvYmouZ2V0UGFzc3dvcmQoKSk7XG4gICAgICAgICAgICBwc1VzZXIuc2V0U3RyaW5nKDQsIG9iai5nZXRSb2xlKCkpO1xuICAgICAgICAgICAgcHNVc2VyLnNldFRpbWVzdGFtcCg1LCBUaW1lc3RhbXAudmFsdWVPZihvYmouZ2V0Q3JlYXRlX2F0KCkpKTtcbiAgICAgICAgICAgIHBzVXNlci5leGVjdXRlVXBkYXRlKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFN0cmluZyBzcWxTdWJzY3JpYmVyID0gXCJJTlNFUlQgSU5UTyBTVUJTQ1JJQkVSIChzdWJzY3JpYmVyX2lkLCBuYW1lLCBhZGRyZXNzLCBwaG9uZSwgdXNlcl9pZCkgVkFMVUVTICg/LCA/LCA/LCA/LCA/KVwiO1xuICAgICAgICAgICAgcHNTdWJzY3JpYmVyID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHNxbFN1YnNjcmliZXIpO1xuICAgICAgICAgICAgcHNTdWJzY3JpYmVyLnNldEludCgxLCBvYmouZ2V0U3Vic2NyaWJlcl9pZCgpKTtcbiAgICAgICAgICAgIHBzU3Vic2NyaWJlci5zZXRTdHJpbmcoMiwgb2JqLmdldEZ1bGxOYW1lKCkpO1xuICAgICAgICAgICAgcHNTdWJzY3JpYmVyLnNldFN0cmluZygzLCBvYmouZ2V0QWRkcmVzcygpKTtcbiAgICAgICAgICAgIHBzU3Vic2NyaWJlci5zZXRTdHJpbmcoNCwgb2JqLmdldFBob25lKCkpO1xuICAgICAgICAgICAgcHNTdWJzY3JpYmVyLnNldEludCg1LCBvYmouZ2V0VXNlcl9pZCgpKTtcbiAgICAgICAgICAgIHBzU3Vic2NyaWJlci5leGVjdXRlVXBkYXRlKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbm4uY29tbWl0KCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmIChjb25uICE9IG51bGwpIGNvbm4ucm9sbGJhY2soKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiByb2xsYmFja0V4KSB7XG4gICAgICAgICAgICAgICAgcm9sbGJhY2tFeC5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmIChwc1N1YnNjcmliZXIgIT0gbnVsbCkgcHNTdWJzY3JpYmVyLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgaWYgKHBzVXNlciAhPSBudWxsKSBwc1VzZXIuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICBpZiAoY29ubiAhPSBudWxsKSBjb25uLmNsb3NlKCk7XG4gICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZXgpIHtcbiAgICAgICAgICAgICAgICBleC5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgdm9pZCB1cGRhdGUoU3Vic2NyaWJlciBvYmopIHtcbiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpOyAvLyBHZW5lcmF0ZWQgZnJvbSBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ29kZS9HZW5lcmF0ZWRNZXRob2RCb2R5XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyB2b2lkIGRlbGV0ZShpbnQgaWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpOyAvLyBHZW5lcmF0ZWQgZnJvbSBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ29kZS9HZW5lcmF0ZWRNZXRob2RCb2R5XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBTdWJzY3JpYmVyIGdldEJ5SWQoaW50IGlkKSB7XG4gICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbihcIk5vdCBzdXBwb3J0ZWQgeWV0LlwiKTsgLy8gR2VuZXJhdGVkIGZyb20gbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NvZGUvR2VuZXJhdGVkTWV0aG9kQm9keVxuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxTdWJzY3JpYmVyPiBnZXRBbGwoKSB7XG4gICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbihcIk5vdCBzdXBwb3J0ZWQgeWV0LlwiKTsgLy8gR2VuZXJhdGVkIGZyb20gbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NvZGUvR2VuZXJhdGVkTWV0aG9kQm9keVxuICAgIH1cbiAgICBcbn1cbi4uLlxuUGF0aDogc3JjL0RBTy9Vc2VyREFPLmphdmFcbi8qXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0xpY2Vuc2VzL2xpY2Vuc2UtZGVmYXVsdC50eHQgdG8gY2hhbmdlIHRoaXMgbGljZW5zZVxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NsYXNzLmphdmEgdG8gZWRpdCB0aGlzIHRlbXBsYXRlXG4gKi9cbnBhY2thZ2UgREFPO1xuXG5pbXBvcnQgTW9kZWwuVXNlcjtcbmltcG9ydCBqYXZhLnV0aWwuTGlzdDtcblxuLyoqXG4gKlxuICogQGF1dGhvciBOZ29jIFRoYW9cbiAqL1xucHVibGljIGNsYXNzIFVzZXJEQU97XG5cbiAgICBwdWJsaWMgc3RhdGljIHZvaWQgaW5zZXJ0KFVzZXIgb2JqKSB7XG4gICAgICAgIFxuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgdm9pZCB1cGRhdGUoVXNlciBvYmopIHtcbiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpOyAvLyBHZW5lcmF0ZWQgZnJvbSBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ29kZS9HZW5lcmF0ZWRNZXRob2RCb2R5XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyB2b2lkIGRlbGV0ZShpbnQgaWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpOyAvLyBHZW5lcmF0ZWQgZnJvbSBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ29kZS9HZW5lcmF0ZWRNZXRob2RCb2R5XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBVc2VyIGdldEJ5SWQoaW50IGlkKSB7XG4gICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbihcIk5vdCBzdXBwb3J0ZWQgeWV0LlwiKTsgLy8gR2VuZXJhdGVkIGZyb20gbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NvZGUvR2VuZXJhdGVkTWV0aG9kQm9keVxuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxVc2VyPiBnZXRBbGwoKSB7XG4gICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbihcIk5vdCBzdXBwb3J0ZWQgeWV0LlwiKTsgLy8gR2VuZXJhdGVkIGZyb20gbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NvZGUvR2VuZXJhdGVkTWV0aG9kQm9keVxuICAgIH1cbiAgICBcbn1cbi4uLlxuUGF0aDogc3JjL0RBTy9EYk9wZXJhdGlvbnMuamF2YVxucGFja2FnZSBEQU87XG5cbmltcG9ydCBqYXZhLnNxbC5Db25uZWN0aW9uO1xuaW1wb3J0IGphdmEuc3FsLlN0YXRlbWVudDtcbmltcG9ydCBqYXZheC5zd2luZy5KT3B0aW9uUGFuZTtcblxucHVibGljIGNsYXNzIERiT3BlcmF0aW9ucyB7XG4gICAgcHVibGljIHN0YXRpYyB2b2lkIHNldERhdGFPckRlbGV0ZShTdHJpbmcgcXVlcnksIFN0cmluZyBtc2cpIHtcbiAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcbiAgICAgICAgU3RhdGVtZW50IHN0ID0gbnVsbDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbm4gPSBDb25uZWN0aW9uUHJvdmlkZXIuZ2V0Q29ubigpO1xuICAgICAgICAgICAgc3QgPSBjb25uLmNyZWF0ZVN0YXRlbWVudCgpO1xuICAgICAgICAgICAgc3QuZXhlY3V0ZVVwZGF0ZShxdWVyeSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmKCFtc2cuZXF1YWxzKFwiXCIpKSB7XG4gICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgbXNnLCBcIk1lc3NhZ2VcIiwgSk9wdGlvblBhbmUuSU5GT1JNQVRJT05fTUVTU0FHRSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBleCkge1xuICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgZXgsIFwiTWVzc2FnZVwiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKHN0ICE9IG51bGwpIHN0LmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgaWYgKGNvbm4gIT0gbnVsbCkgY29ubi5jbG9zZSgpO1xuICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuLi4uXG5QYXRoOiBzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9TaWduVXAuamF2YVxuLypcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvTGljZW5zZXMvbGljZW5zZS1kZWZhdWx0LnR4dCB0byBjaGFuZ2UgdGhpcyBsaWNlbnNlXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0dVSUZvcm1zL0pGcmFtZS5qYXZhIHRvIGVkaXQgdGhpcyB0ZW1wbGF0ZVxuICovXG5wYWNrYWdlIGludGVybmV0Lm1hbmdlbWVudC5zeXN0ZW07XG5cbmltcG9ydCBEQU8uU3Vic2NyaWJlckRBTztcbmltcG9ydCBNb2RlbC5TdWJzY3JpYmVyO1xuaW1wb3J0IGphdmEudGltZS5Mb2NhbERhdGVUaW1lO1xuaW1wb3J0IGphdmF4LnN3aW5nLkpPcHRpb25QYW5lO1xuXG4vKipcbiAqXG4gKiBAYXV0aG9yIE5nb2MgVGhhb1xuICovXG5wdWJsaWMgY2xhc3MgU2lnblVwIGV4dGVuZHMgamF2YXguc3dpbmcuSkZyYW1lIHtcblxuICAgIHB1YmxpYyBTdHJpbmcgcGhvbmVQYXR0ZXJuID0gXCJeWzAtOV0qJFwiO1xuICAgIHByaXZhdGUgU3RyaW5nIERFRkFVTFRfUk9MRSA9IFwidXNlclwiO1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgbmV3IGZvcm0gU2lnbkluXG4gICAgICovXG4gICAgcHVibGljIFNpZ25VcCgpIHtcbiAgICAgICAgaW5pdENvbXBvbmVudHMoKTtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIHZvaWQgY2xlYXIoKXtcbiAgICAgICAgdHh0TmFtZS5zZXRUZXh0KFwiXCIpO1xuICAgICAgICB0eHRVc2VyTmFtZS5zZXRUZXh0KFwiXCIpO1xuICAgICAgICB0eHRQYXNzd29yZC5zZXRUZXh0KFwiXCIpO1xuICAgICAgICB0eHRBZGRyZXNzLnNldFRleHQoXCJcIik7XG4gICAgICAgIHR4dFBob25lLnNldFRleHQoXCJcIik7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyB2b2lkIHZhbGlkYXRlRmllbGRzKCl7XG4gICAgICAgIFN0cmluZyBuYW1lID0gdHh0TmFtZS5nZXRUZXh0KCk7XG4gICAgICAgIFN0cmluZyB1c2VyTmFtZSA9IHR4dFVzZXJOYW1lLmdldFRleHQoKTtcbiAgICAgICAgU3RyaW5nIHBhc3N3b3JkID0gdHh0UGFzc3dvcmQuZ2V0VGV4dCgpO1xuICAgICAgICBTdHJpbmcgYWRkcmVzcyA9IHR4dEFkZHJlc3MuZ2V0VGV4dCgpO1xuICAgICAgICBTdHJpbmcgcGhvbmUgPSB0eHRQaG9uZS5nZXRUZXh0KCk7XG4gICAgICAgIFxuICAgICAgICBpZihuYW1lLmVxdWFscyhcIlwiKSAmJiB1c2VyTmFtZS5lcXVhbHMoXCJcIikgJiYgcGFzc3dvcmQuZXF1YWxzKFwiXCIpICYmIGFkZHJlc3MuZXF1YWxzKFwiXCIpICYmIHBob25lLmVxdWFscyhcIlwiKSl7XG4gICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcIlZ1aSBsw7JuZyBraMO0bmcgYuG7jyB0cuG7kW5nIVwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYocGhvbmUubGVuZ3RoKCkgPT0gMTAgJiYgcGhvbmUubWF0Y2hlcyhwaG9uZVBhdHRlcm4pKSB7XG4gICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcIlZ1aSBsw7JuZyBuaOG6rXAgxJHDum5nIMSR4buLbmggZOG6oW5nIHPhu5EgxJFp4buHbiB0aG/huqFpIVwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICB9XG4uLi5cblxuICAgICAgICBqRnJhbWUxID0gbmV3IGphdmF4LnN3aW5nLkpGcmFtZSgpO1xuICAgICAgICBqTGFiZWwxID0gbmV3IGphdmF4LnN3aW5nLkpMYWJlbCgpO1xuICAgICAgICBqTGFiZWwyID0gbmV3IGphdmF4LnN3aW5nLkpMYWJlbCgpO1xuICAgICAgICBqTGFiZWwzID0gbmV3IGphdmF4LnN3aW5nLkpMYWJlbCgpO1xuICAgICAgICBqTGFiZWw0ID0gbmV3IGphdmF4LnN3aW5nLkpMYWJlbCgpO1xuICAgICAgICBqTGFiZWw1ID0gbmV3IGphdmF4LnN3aW5nLkpMYWJlbCgpO1xuICAgICAgICBqTGFiZWw2ID0gbmV3IGphdmF4LnN3aW5nLkpMYWJlbCgpO1xuICAgICAgICB0eHROYW1lID0gbmV3IGphdmF4LnN3aW5nLkpUZXh0RmllbGQoKTtcbiAgICAgICAgdHh0VXNlck5hbWUgPSBuZXcgamF2YXguc3dpbmcuSlRleHRGaWVsZCgpO1xuICAgICAgICB0eHRBZGRyZXNzID0gbmV3IGphdmF4LnN3aW5nLkpUZXh0RmllbGQoKTtcbiAgICAgICAgdHh0UGhvbmUgPSBuZXcgamF2YXguc3dpbmcuSlRleHRGaWVsZCgpO1xuICAgICAgICB0eHRQYXNzd29yZCA9IG5ldyBqYXZheC5zd2luZy5KUGFzc3dvcmRGaWVsZCgpO1xuICAgICAgICBidG5SZXR1cm4gPSBuZXcgamF2YXguc3dpbmcuSkJ1dHRvbigpO1xuICAgICAgICBidG5TaWdudXAgPSBuZXcgamF2YXguc3dpbmcuSkJ1dHRvbigpO1xuICAgICAgICBqTGFiZWw3ID0gbmV3IGphdmF4LnN3aW5nLkpMYWJlbCgpO1xuICAgICAgICBqTGFiZWw4ID0gbmV3IGphdmF4LnN3aW5nLkpMYWJlbCgpO1xuICAgICAgICBqU2VwYXJhdG9yMSA9IG5ldyBqYXZheC5zd2luZy5KU2VwYXJhdG9yKCk7XG4gICAgICAgIGpTZXBhcmF0b3IyID0gbmV3IGphdmF4LnN3aW5nLkpTZXBhcmF0b3IoKTtcbi4uLlxuICAgICAgICBcbiAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5SZXR1cm5BY3Rpb25QZXJmb3JtZWRcblxuICAgIHByaXZhdGUgdm9pZCBidG5TaWdudXBBY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuU2lnbnVwQWN0aW9uUGVyZm9ybWVkXG4gICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxuICAgICAgICBTdWJzY3JpYmVyIHN1YiA9IG5ldyBTdWJzY3JpYmVyKCk7XG4gICAgICAgIHN1Yi5zZXRGdWxsTmFtZSh0eHROYW1lLmdldFRleHQoKSk7XG4gICAgICAgIHN1Yi5zZXRVc2VybmFtZSh0eHRVc2VyTmFtZS5nZXRUZXh0KCkpO1xuICAgICAgICBzdWIuc2V0UGFzc3dvcmQodHh0UGFzc3dvcmQuZ2V0VGV4dCgpKTtcbiAgICAgICAgc3ViLnNldFJvbGUoREVGQVVMVF9ST0xFKTtcbiAgICAgICAgc3ViLnNldEFkZHJlc3ModHh0QWRkcmVzcy5nZXRUZXh0KCkpO1xuICAgICAgICBzdWIuc2V0UGhvbmUodHh0UGhvbmUuZ2V0VGV4dCgpKTtcbiAgICAgICAgc3ViLnNldENyZWF0ZV9hdChMb2NhbERhdGVUaW1lLm5vdygpKTtcbiAgICAgICAgU3Vic2NyaWJlckRBTy5pbnNlcnQoc3ViKTtcbiAgICAgICAgY2xlYXIoKTtcbiAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5TaWdudXBBY3Rpb25QZXJmb3JtZWRcblxuICAgIHByaXZhdGUgdm9pZCB0eHROYW1lS2V5UmVsZWFzZWQoamF2YS5hd3QuZXZlbnQuS2V5RXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfdHh0TmFtZUtleVJlbGVhc2VkXG4gICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxuICAgICAgICB2YWxpZGF0ZUZpZWxkcygpO1xuICAgIH0vL0dFTi1MQVNUOmV2ZW50X3R4dE5hbWVLZXlSZWxlYXNlZFxuLi4uXG5QYXRoOiBzcmMvTW9kZWwvU3Vic2NyaWJlci5qYXZhXG4vKlxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9MaWNlbnNlcy9saWNlbnNlLWRlZmF1bHQudHh0IHRvIGNoYW5nZSB0aGlzIGxpY2Vuc2VcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9DbGFzcy5qYXZhIHRvIGVkaXQgdGhpcyB0ZW1wbGF0ZVxuICovXG5wYWNrYWdlIE1vZGVsO1xuXG5pbXBvcnQgamF2YS50aW1lLkxvY2FsRGF0ZVRpbWU7XG5cbi8qKlxuICpcbiAqIEBhdXRob3IgTmdvYyBUaGFvXG4gKi9cbnB1YmxpYyBjbGFzcyBTdWJzY3JpYmVyIGV4dGVuZHMgVXNlciB7XG4gICAgcHJpdmF0ZSBpbnQgc3Vic2NyaWJlcl9pZDtcbiAgICBwcml2YXRlIFN0cmluZyBmdWxsTmFtZTtcbiAgICBwcml2YXRlIFN0cmluZyBhZGRyZXNzO1xuICAgIHByaXZhdGUgU3RyaW5nIHBob25lO1xuICAgIFxuICAgIHB1YmxpYyBTdWJzY3JpYmVyKCkge1xuICAgIH1cblxuICAgIHB1YmxpYyBTdWJzY3JpYmVyKGludCBzdWJzY3JpYmVyX2lkLCBTdHJpbmcgZnVsbE5hbWUsIFN0cmluZyBhZGRyZXNzLCBTdHJpbmcgcGhvbmUpIHtcbiAgICAgICAgdGhpcy5zdWJzY3JpYmVyX2lkID0gc3Vic2NyaWJlcl9pZDtcbiAgICAgICAgdGhpcy5mdWxsTmFtZSA9IGZ1bGxOYW1lO1xuICAgICAgICB0aGlzLmFkZHJlc3MgPSBhZGRyZXNzO1xuICAgICAgICB0aGlzLnBob25lID0gcGhvbmU7XG4gICAgfVxuXG4gICAgcHVibGljIFN1YnNjcmliZXIoaW50IHN1YnNjcmliZXJfaWQsIFN0cmluZyBmdWxsTmFtZSwgU3RyaW5nIGFkZHJlc3MsIFN0cmluZyBwaG9uZSwgaW50IHVzZXJfaWQsIFN0cmluZyB1c2VybmFtZSwgU3RyaW5nIHBhc3N3b3JkLCBTdHJpbmcgcm9sZSwgTG9jYWxEYXRlVGltZSBjcmVhdGVfYXQpIHtcbiAgICAgICAgc3VwZXIodXNlcl9pZCwgdXNlcm5hbWUsIHBhc3N3b3JkLCByb2xlLCBjcmVhdGVfYXQpO1xuICAgICAgICB0aGlzLnN1YnNjcmliZXJfaWQgPSBzdWJzY3JpYmVyX2lkO1xuICAgICAgICB0aGlzLmZ1bGxOYW1lID0gZnVsbE5hbWU7XG4gICAgICAgIHRoaXMuYWRkcmVzcyA9IGFkZHJlc3M7XG4gICAgICAgIHRoaXMucGhvbmUgPSBwaG9uZTtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIGludCBnZXRTdWJzY3JpYmVyX2lkKCkge1xuICAgICAgICByZXR1cm4gc3Vic2NyaWJlcl9pZDtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXRTdWJzY3JpYmVyX2lkKGludCBzdWJzY3JpYmVyX2lkKSB7XG4gICAgICAgIHRoaXMuc3Vic2NyaWJlcl9pZCA9IHN1YnNjcmliZXJfaWQ7XG4gICAgfVxuXG4gICAgcHVibGljIFN0cmluZyBnZXRGdWxsTmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIGZ1bGxOYW1lO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHNldEZ1bGxOYW1lKFN0cmluZyBmdWxsTmFtZSkge1xuICAgICAgICB0aGlzLmZ1bGxOYW1lID0gZnVsbE5hbWU7XG4gICAgfVxuXG4gICAgcHVibGljIFN0cmluZyBnZXRBZGRyZXNzKCkge1xuICAgICAgICByZXR1cm4gYWRkcmVzcztcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXRBZGRyZXNzKFN0cmluZyBhZGRyZXNzKSB7XG4gICAgICAgIHRoaXMuYWRkcmVzcyA9IGFkZHJlc3M7XG4gICAgfVxuXG4gICAgcHVibGljIFN0cmluZyBnZXRQaG9uZSgpIHtcbiAgICAgICAgcmV0dXJuIHBob25lO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHNldFBob25lKFN0cmluZyBwaG9uZSkge1xuICAgICAgICB0aGlzLnBob25lID0gcGhvbmU7XG4gICAgfVxuICAgIFxuICAgIFxufVxuLi4uXG5QYXRoOiBzcmMvREFPL0Nvbm5lY3Rpb25Qcm92aWRlci5qYXZhXG4vKlxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9MaWNlbnNlcy9saWNlbnNlLWRlZmF1bHQudHh0IHRvIGNoYW5nZSB0aGlzIGxpY2Vuc2VcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9DbGFzcy5qYXZhIHRvIGVkaXQgdGhpcyB0ZW1wbGF0ZVxuICovXG5wYWNrYWdlIERBTztcblxuaW1wb3J0IGphdmEuc3FsLio7XG5cbi8qKlxuICpcbiAqIEBhdXRob3IgTmdvYyBUaGFvXG4gKi9cbnB1YmxpYyBjbGFzcyBDb25uZWN0aW9uUHJvdmlkZXIge1xuICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmluZyBVUkwgPSBcImpkYmM6bXlzcWw6Ly8xMjUuMjEyLjIzMS4xODQ6Njk2OS9JbnRlcm5ldERCXCI7XG4gICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nIFVTRVIgPSBcIm1pbnRvcmkwOVwiO1xuICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmluZyBQQVNTV09SRCA9IFwiTWludG9yeTA5QDk2XCI7XG4gICAgXG4gICAgcHVibGljIHN0YXRpYyBDb25uZWN0aW9uIGdldENvbm4oKXtcbiAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgQ2xhc3MuZm9yTmFtZShcImNvbS5teXNxbC5jai5qZGJjLkRyaXZlclwiKTtcbiAgICAgICAgICAgIGNvbm4gPSBEcml2ZXJNYW5hZ2VyLmdldENvbm5lY3Rpb24oVVJMLCBVU0VSLCBQQVNTV09SRCk7XG4gICAgICAgIH0gY2F0Y2ggKENsYXNzTm90Rm91bmRFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgU3lzdGVtLmVyci5wcmludGxuKFwiTXlTUUwgSkRCQyBEcml2ZXIgbm90IGZvdW5kLlwiKTtcbiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBTeXN0ZW0uZXJyLnByaW50bG4oXCJDb25uZWN0aW9uIGZhaWxlZC5cIik7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb25uO1xuICAgIH1cbi4uLlxuUGF0aDogc3JjL01vZGVsL1VzZXIuamF2YVxuLypcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvTGljZW5zZXMvbGljZW5zZS1kZWZhdWx0LnR4dCB0byBjaGFuZ2UgdGhpcyBsaWNlbnNlXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ2xhc3MuamF2YSB0byBlZGl0IHRoaXMgdGVtcGxhdGVcbiAqL1xucGFja2FnZSBNb2RlbDtcblxuaW1wb3J0IGphdmEudGltZS5Mb2NhbERhdGVUaW1lO1xuLyoqXG4gKlxuICogQGF1dGhvciBOZ29jIFRoYW9cbiAqL1xucHVibGljIGNsYXNzIFVzZXIge1xuICAgIHByaXZhdGUgaW50IHVzZXJfaWQ7XG4gICAgcHJpdmF0ZSBTdHJpbmcgdXNlcm5hbWU7XG4gICAgcHJpdmF0ZSBTdHJpbmcgcGFzc3dvcmQ7XG4gICAgcHJpdmF0ZSBTdHJpbmcgcm9sZTtcbiAgICBwcml2YXRlIExvY2FsRGF0ZVRpbWUgY3JlYXRlX2F0O1xuXG4gICAgcHVibGljIFVzZXIoKSB7XG4gICAgfVxuXG4gICAgcHVibGljIFVzZXIoaW50IHVzZXJfaWQsIFN0cmluZyB1c2VybmFtZSwgU3RyaW5nIHBhc3N3b3JkLCBTdHJpbmcgcm9sZSwgTG9jYWxEYXRlVGltZSBjcmVhdGVfYXQpIHtcbiAgICAgICAgdGhpcy51c2VyX2lkID0gdXNlcl9pZDtcbiAgICAgICAgdGhpcy51c2VybmFtZSA9IHVzZXJuYW1lO1xuICAgICAgICB0aGlzLnBhc3N3b3JkID0gcGFzc3dvcmQ7XG4gICAgICAgIHRoaXMucm9sZSA9IHJvbGU7XG4gICAgICAgIHRoaXMuY3JlYXRlX2F0ID0gY3JlYXRlX2F0O1xuICAgIH1cblxuICAgIHB1YmxpYyBpbnQgZ2V0VXNlcl9pZCgpIHtcbiAgICAgICAgcmV0dXJuIHVzZXJfaWQ7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgc2V0VXNlcl9pZChpbnQgdXNlcl9pZCkge1xuICAgICAgICB0aGlzLnVzZXJfaWQgPSB1c2VyX2lkO1xuICAgIH1cblxuICAgIHB1YmxpYyBTdHJpbmcgZ2V0VXNlcm5hbWUoKSB7XG4gICAgICAgIHJldHVybiB1c2VybmFtZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXRVc2VybmFtZShTdHJpbmcgdXNlcm5hbWUpIHtcbiAgICAgICAgdGhpcy51c2VybmFtZSA9IHVzZXJuYW1lO1xuICAgIH1cblxuICAgIHB1YmxpYyBTdHJpbmcgZ2V0UGFzc3dvcmQoKSB7XG4gICAgICAgIHJldHVybiBwYXNzd29yZDtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXRQYXNzd29yZChTdHJpbmcgcGFzc3dvcmQpIHtcbiAgICAgICAgdGhpcy5wYXNzd29yZCA9IHBhc3N3b3JkO1xuICAgIH1cblxuICAgIHB1YmxpYyBTdHJpbmcgZ2V0Um9sZSgpIHtcbiAgICAgICAgcmV0dXJuIHJvbGU7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgc2V0Um9sZShTdHJpbmcgcm9sZSkge1xuICAgICAgICB0aGlzLnJvbGUgPSByb2xlO1xuICAgIH1cblxuICAgIHB1YmxpYyBMb2NhbERhdGVUaW1lIGdldENyZWF0ZV9hdCgpIHtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZV9hdDtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXRDcmVhdGVfYXQoTG9jYWxEYXRlVGltZSBjcmVhdGVfYXQpIHtcbiAgICAgICAgdGhpcy5jcmVhdGVfYXQgPSBjcmVhdGVfYXQ7XG4gICAgfVxuICAgIFxuICAgIFxufVxuLi4uXG5QYXRoOiBzcmMvTW9kZWwvUGxhbi5qYXZhXG4vKlxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9MaWNlbnNlcy9saWNlbnNlLWRlZmF1bHQudHh0IHRvIGNoYW5nZSB0aGlzIGxpY2Vuc2VcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9DbGFzcy5qYXZhIHRvIGVkaXQgdGhpcyB0ZW1wbGF0ZVxuICovXG5wYWNrYWdlIE1vZGVsO1xuXG4vKipcbiAqXG4gKiBAYXV0aG9yIE5nb2MgVGhhb1xuICovXG5wdWJsaWMgY2xhc3MgUGxhbiB7XG4gICAgcHJpdmF0ZSBpbnQgcGxhbl9pZDtcbiAgICBwcml2YXRlIFN0cmluZyBuYW1lO1xuICAgIHByaXZhdGUgbG9uZyBwcmljZTtcbiAgICBwcml2YXRlIGludCBtYXhfc3BlZWRfZG9tZXN0aWM7XG4gICAgcHJpdmF0ZSBpbnQgbWF4X3NwZWVkX2ludGVybmF0aW9uYWw7XG4gICAgcHJpdmF0ZSBpbnQgbWluX3NwZWVkX2RvbWVzdGljO1xuICAgIHByaXZhdGUgaW50IG1pbl9zcGVlZF9pbnRlcm5hdGlvbmFsO1xuXG4gICAgcHVibGljIFBsYW4oKSB7XG4gICAgfVxuXG4gICAgcHVibGljIFBsYW4oaW50IHBsYW5faWQsIFN0cmluZyBuYW1lLCBsb25nIHByaWNlLCBpbnQgbWF4X3NwZWVkX2RvbWVzdGljLCBpbnQgbWF4X3NwZWVkX2ludGVybmF0aW9uYWwsIGludCBtaW5fc3BlZWRfZG9tZXN0aWMsIGludCBtaW5fc3BlZWRfaW50ZXJuYXRpb25hbCkge1xuICAgICAgICB0aGlzLnBsYW5faWQgPSBwbGFuX2lkO1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLnByaWNlID0gcHJpY2U7XG4gICAgICAgIHRoaXMubWF4X3NwZWVkX2RvbWVzdGljID0gbWF4X3NwZWVkX2RvbWVzdGljO1xuICAgICAgICB0aGlzLm1heF9zcGVlZF9pbnRlcm5hdGlvbmFsID0gbWF4X3NwZWVkX2ludGVybmF0aW9uYWw7XG4gICAgICAgIHRoaXMubWluX3NwZWVkX2RvbWVzdGljID0gbWluX3NwZWVkX2RvbWVzdGljO1xuICAgICAgICB0aGlzLm1pbl9zcGVlZF9pbnRlcm5hdGlvbmFsID0gbWluX3NwZWVkX2ludGVybmF0aW9uYWw7XG4gICAgfVxuXG4gICAgcHVibGljIGludCBnZXRQbGFuX2lkKCkge1xuICAgICAgICByZXR1cm4gcGxhbl9pZDtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXRQbGFuX2lkKGludCBwbGFuX2lkKSB7XG4gICAgICAgIHRoaXMucGxhbl9pZCA9IHBsYW5faWQ7XG4gICAgfVxuXG4gICAgcHVibGljIFN0cmluZyBnZXROYW1lKCkge1xuICAgICAgICByZXR1cm4gbmFtZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXROYW1lKFN0cmluZyBuYW1lKSB7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgfVxuXG4gICAgcHVibGljIGxvbmcgZ2V0UHJpY2UoKSB7XG4gICAgICAgIHJldHVybiBwcmljZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXRQcmljZShsb25nIHByaWNlKSB7XG4gICAgICAgIHRoaXMucHJpY2UgPSBwcmljZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgaW50IGdldE1heF9zcGVlZF9kb21lc3RpYygpIHtcbiAgICAgICAgcmV0dXJuIG1heF9zcGVlZF9kb21lc3RpYztcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXRNYXhfc3BlZWRfZG9tZXN0aWMoaW50IG1heF9zcGVlZF9kb21lc3RpYykge1xuICAgICAgICB0aGlzLm1heF9zcGVlZF9kb21lc3RpYyA9IG1heF9zcGVlZF9kb21lc3RpYztcbiAgICB9XG5cbiAgICBwdWJsaWMgaW50IGdldE1heF9zcGVlZF9pbnRlcm5hdGlvbmFsKCkge1xuICAgICAgICByZXR1cm4gbWF4X3NwZWVkX2ludGVybmF0aW9uYWw7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgc2V0TWF4X3NwZWVkX2ludGVybmF0aW9uYWwoaW50IG1heF9zcGVlZF9pbnRlcm5hdGlvbmFsKSB7XG4gICAgICAgIHRoaXMubWF4X3NwZWVkX2ludGVybmF0aW9uYWwgPSBtYXhfc3BlZWRfaW50ZXJuYXRpb25hbDtcbiAgICB9XG5cbiAgICBwdWJsaWMgaW50IGdldE1pbl9zcGVlZF9kb21lc3RpYygpIHtcbiAgICAgICAgcmV0dXJuIG1pbl9zcGVlZF9kb21lc3RpYztcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXRNaW5fc3BlZWRfZG9tZXN0aWMoaW50IG1pbl9zcGVlZF9kb21lc3RpYykge1xuICAgICAgICB0aGlzLm1pbl9zcGVlZF9kb21lc3RpYyA9IG1pbl9zcGVlZF9kb21lc3RpYztcbiAgICB9XG5cbiAgICBwdWJsaWMgaW50IGdldE1pbl9zcGVlZF9pbnRlcm5hdGlvbmFsKCkge1xuICAgICAgICByZXR1cm4gbWluX3NwZWVkX2ludGVybmF0aW9uYWw7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgc2V0TWluX3NwZWVkX2ludGVybmF0aW9uYWwoaW50IG1pbl9zcGVlZF9pbnRlcm5hdGlvbmFsKSB7XG4gICAgICAgIHRoaXMubWluX3NwZWVkX2ludGVybmF0aW9uYWwgPSBtaW5fc3BlZWRfaW50ZXJuYXRpb25hbDtcbiAgICB9XG4gICBcbiAgIFxufVxuLi4uXG5QYXRoOiBzcmMvTW9kZWwvQ29udHJhY3QuamF2YVxuLypcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvTGljZW5zZXMvbGljZW5zZS1kZWZhdWx0LnR4dCB0byBjaGFuZ2UgdGhpcyBsaWNlbnNlXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ2xhc3MuamF2YSB0byBlZGl0IHRoaXMgdGVtcGxhdGVcbiAqL1xucGFja2FnZSBNb2RlbDtcblxuaW1wb3J0IGphdmEudGltZS5Mb2NhbERhdGVUaW1lO1xuXG4vKipcbiAqXG4gKiBAYXV0aG9yIE5nb2MgVGhhb1xuICovXG5wdWJsaWMgY2xhc3MgQ29udHJhY3Qge1xuICAgIHByaXZhdGUgaW50IGNvbnRyYWN0X2lkO1xuICAgIHByaXZhdGUgaW50IHN1Yl9pZDtcbiAgICBwcml2YXRlIGludCBwYWNrYWdlX2lkO1xuICAgIHByaXZhdGUgTG9jYWxEYXRlVGltZSBkYXRlX3NpZ247XG4gICAgcHJpdmF0ZSBMb2NhbERhdGVUaW1lIGRhdGVfZXhwaXJhdGlvbjtcbiAgICBwcml2YXRlIFN0cmluZyBhZGRyZXNzO1xuICAgIHByaXZhdGUgTG9jYWxEYXRlVGltZSBjcmVhdGVfYXQ7XG5cbiAgICBwdWJsaWMgQ29udHJhY3QoKSB7XG4gICAgfVxuXG4gICAgcHVibGljIENvbnRyYWN0KGludCBjb250cmFjdF9pZCwgaW50IHN1Yl9pZCwgaW50IHBhY2thZ2VfaWQsIExvY2FsRGF0ZVRpbWUgZGF0ZV9zaWduLCBMb2NhbERhdGVUaW1lIGRhdGVfZXhwaXJhdGlvbiwgU3RyaW5nIGFkZHJlc3MsIExvY2FsRGF0ZVRpbWUgY3JlYXRlX2F0KSB7XG4gICAgICAgIHRoaXMuY29udHJhY3RfaWQgPSBjb250cmFjdF9pZDtcbiAgICAgICAgdGhpcy5zdWJfaWQgPSBzdWJfaWQ7XG4gICAgICAgIHRoaXMucGFja2FnZV9pZCA9IHBhY2thZ2VfaWQ7XG4gICAgICAgIHRoaXMuZGF0ZV9zaWduID0gZGF0ZV9zaWduO1xuICAgICAgICB0aGlzLmRhdGVfZXhwaXJhdGlvbiA9IGRhdGVfZXhwaXJhdGlvbjtcbiAgICAgICAgdGhpcy5hZGRyZXNzID0gYWRkcmVzcztcbiAgICAgICAgdGhpcy5jcmVhdGVfYXQgPSBjcmVhdGVfYXQ7XG4gICAgfVxuXG4gICAgcHVibGljIGludCBnZXRDb250cmFjdF9pZCgpIHtcbiAgICAgICAgcmV0dXJuIGNvbnRyYWN0X2lkO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHNldENvbnRyYWN0X2lkKGludCBjb250cmFjdF9pZCkge1xuICAgICAgICB0aGlzLmNvbnRyYWN0X2lkID0gY29udHJhY3RfaWQ7XG4gICAgfVxuXG4gICAgcHVibGljIGludCBnZXRTdWJfaWQoKSB7XG4gICAgICAgIHJldHVybiBzdWJfaWQ7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgc2V0U3ViX2lkKGludCBzdWJfaWQpIHtcbiAgICAgICAgdGhpcy5zdWJfaWQgPSBzdWJfaWQ7XG4gICAgfVxuXG4gICAgcHVibGljIGludCBnZXRQYWNrYWdlX2lkKCkge1xuICAgICAgICByZXR1cm4gcGFja2FnZV9pZDtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXRQYWNrYWdlX2lkKGludCBwYWNrYWdlX2lkKSB7XG4gICAgICAgIHRoaXMucGFja2FnZV9pZCA9IHBhY2thZ2VfaWQ7XG4gICAgfVxuXG4gICAgcHVibGljIExvY2FsRGF0ZVRpbWUgZ2V0RGF0ZV9zaWduKCkge1xuICAgICAgICByZXR1cm4gZGF0ZV9zaWduO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHNldERhdGVfc2lnbihMb2NhbERhdGVUaW1lIGRhdGVfc2lnbikge1xuICAgICAgICB0aGlzLmRhdGVfc2lnbiA9IGRhdGVfc2lnbjtcbiAgICB9XG5cbiAgICBwdWJsaWMgTG9jYWxEYXRlVGltZSBnZXREYXRlX2V4cGlyYXRpb24oKSB7XG4gICAgICAgIHJldHVybiBkYXRlX2V4cGlyYXRpb247XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgc2V0RGF0ZV9leHBpcmF0aW9uKExvY2FsRGF0ZVRpbWUgZGF0ZV9leHBpcmF0aW9uKSB7XG4gICAgICAgIHRoaXMuZGF0ZV9leHBpcmF0aW9uID0gZGF0ZV9leHBpcmF0aW9uO1xuICAgIH1cblxuICAgIHB1YmxpYyBTdHJpbmcgZ2V0QWRkcmVzcygpIHtcbiAgICAgICAgcmV0dXJuIGFkZHJlc3M7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgc2V0QWRkcmVzcyhTdHJpbmcgYWRkcmVzcykge1xuICAgICAgICB0aGlzLmFkZHJlc3MgPSBhZGRyZXNzO1xuICAgIH1cblxuICAgIHB1YmxpYyBMb2NhbERhdGVUaW1lIGdldENyZWF0ZV9hdCgpIHtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZV9hdDtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXRDcmVhdGVfYXQoTG9jYWxEYXRlVGltZSBjcmVhdGVfYXQpIHtcbiAgICAgICAgdGhpcy5jcmVhdGVfYXQgPSBjcmVhdGVfYXQ7XG4gICAgfVxuICAgIFxuICAgIFxufVxuLi4uXG5QYXRoOiBzcmMvTW9kZWwvQmlsbEhpc3RvcnkuamF2YVxuLypcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvTGljZW5zZXMvbGljZW5zZS1kZWZhdWx0LnR4dCB0byBjaGFuZ2UgdGhpcyBsaWNlbnNlXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ2xhc3MuamF2YSB0byBlZGl0IHRoaXMgdGVtcGxhdGVcbiAqL1xucGFja2FnZSBNb2RlbDtcblxuaW1wb3J0IGphdmEudGltZS5Mb2NhbERhdGU7XG5pbXBvcnQgamF2YS50aW1lLkxvY2FsRGF0ZVRpbWU7XG5cbi8qKlxuICpcbiAqIEBhdXRob3IgTmdvYyBUaGFvXG4gKi9cbnB1YmxpYyBjbGFzcyBCaWxsSGlzdG9yeSB7XG4gICAgcHJpdmF0ZSBpbnQgYmlsbF9pZDtcbiAgICBwcml2YXRlIGludCBjb250cmFjdF9pZDtcbiAgICBwcml2YXRlIExvY2FsRGF0ZSBiaWxsaW5nX3BlcmlvZDtcbiAgICBwcml2YXRlIGxvbmcgYW1vdW50O1xuICAgIHByaXZhdGUgTG9jYWxEYXRlVGltZSBwYXltZW50X2RhdGU7XG4gICAgcHJpdmF0ZSBTdHJpbmcgc3RhdHVzOyAgIFxuXG4gICAgcHVibGljIEJpbGxIaXN0b3J5KCkge1xuICAgIH1cblxuICAgIHB1YmxpYyBCaWxsSGlzdG9yeShpbnQgYmlsbF9pZCwgaW50IGNvbnRyYWN0X2lkLCBMb2NhbERhdGUgYmlsbGluZ19wZXJpb2QsIGxvbmcgYW1vdW50LCBMb2NhbERhdGVUaW1lIHBheW1lbnRfZGF0ZSwgU3RyaW5nIHN0YXR1cykge1xuICAgICAgICB0aGlzLmJpbGxfaWQgPSBiaWxsX2lkO1xuICAgICAgICB0aGlzLmNvbnRyYWN0X2lkID0gY29udHJhY3RfaWQ7XG4gICAgICAgIHRoaXMuYmlsbGluZ19wZXJpb2QgPSBiaWxsaW5nX3BlcmlvZDtcbiAgICAgICAgdGhpcy5hbW91bnQgPSBhbW91bnQ7XG4gICAgICAgIHRoaXMucGF5bWVudF9kYXRlID0gcGF5bWVudF9kYXRlO1xuICAgICAgICB0aGlzLnN0YXR1cyA9IHN0YXR1cztcbiAgICB9XG5cbiAgICBwdWJsaWMgaW50IGdldEJpbGxfaWQoKSB7XG4gICAgICAgIHJldHVybiBiaWxsX2lkO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHNldEJpbGxfaWQoaW50IGJpbGxfaWQpIHtcbiAgICAgICAgdGhpcy5iaWxsX2lkID0gYmlsbF9pZDtcbiAgICB9XG5cbiAgICBwdWJsaWMgaW50IGdldENvbnRyYWN0X2lkKCkge1xuICAgICAgICByZXR1cm4gY29udHJhY3RfaWQ7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgc2V0Q29udHJhY3RfaWQoaW50IGNvbnRyYWN0X2lkKSB7XG4gICAgICAgIHRoaXMuY29udHJhY3RfaWQgPSBjb250cmFjdF9pZDtcbiAgICB9XG5cbiAgICBwdWJsaWMgTG9jYWxEYXRlIGdldEJpbGxpbmdfcGVyaW9kKCkge1xuICAgICAgICByZXR1cm4gYmlsbGluZ19wZXJpb2Q7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgc2V0QmlsbGluZ19wZXJpb2QoTG9jYWxEYXRlIGJpbGxpbmdfcGVyaW9kKSB7XG4gICAgICAgIHRoaXMuYmlsbGluZ19wZXJpb2QgPSBiaWxsaW5nX3BlcmlvZDtcbiAgICB9XG5cbiAgICBwdWJsaWMgbG9uZyBnZXRBbW91bnQoKSB7XG4gICAgICAgIHJldHVybiBhbW91bnQ7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgc2V0QW1vdW50KGxvbmcgYW1vdW50KSB7XG4gICAgICAgIHRoaXMuYW1vdW50ID0gYW1vdW50O1xuICAgIH1cblxuICAgIHB1YmxpYyBMb2NhbERhdGVUaW1lIGdldFBheW1lbnRfZGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHBheW1lbnRfZGF0ZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXRQYXltZW50X2RhdGUoTG9jYWxEYXRlVGltZSBwYXltZW50X2RhdGUpIHtcbiAgICAgICAgdGhpcy5wYXltZW50X2RhdGUgPSBwYXltZW50X2RhdGU7XG4gICAgfVxuXG4gICAgcHVibGljIFN0cmluZyBnZXRTdGF0dXMoKSB7XG4gICAgICAgIHJldHVybiBzdGF0dXM7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgc2V0U3RhdHVzKFN0cmluZyBzdGF0dXMpIHtcbiAgICAgICAgdGhpcy5zdGF0dXMgPSBzdGF0dXM7XG4gICAgfVxuICAgIFxuICAgIFxufVxuLi4uXG5QYXRoOiBuYnByb2plY3QvY29uZmlncy9TaWduVXAucHJvcGVydGllc1xubWFpbi5jbGFzcz1pbnRlcm5ldC5tYW5nZW1lbnQuc3lzdGVtLlNpZ25VcFxuLi4uXG4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1XzAxQ3d5TEtRR3R6WnB1NVlOZW5Kbm9VSyJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkU6L0hvY1RhcC8wMl9KQVZBLzAzX1Byb2plY3QvSW50ZXJuZXQgTWFuZ2VtZW50IFN5c3RlbSIsImZvbGRlclJvb3QiOiJFOi9Ib2NUYXAvMDJfSkFWQS8wM19Qcm9qZWN0L0ludGVybmV0IE1hbmdlbWVudCBTeXN0ZW0ifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJ0aW1lc3RhbXAiOiIyMDI1LTA1LTExVDA5OjMyOjI3LjAzNloiLCJyZXNwb25zZV90ZXh0IjoiTm93IGxldCdzIGxvb2sgYXQgdGhlIGRhdGFiYXNlIHNjaGVtYSB0byB1bmRlcnN0YW5kIHRoZSByZWxhdGlvbnNoaXAgYmV0d2VlbiBVU0VSIGFuZCBTVUJTQ1JJQkVSIHRhYmxlczpcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiJlZjM3YTE3Yy0xODM4LTQ5MDEtYTgyZi1mZTIyZDJhMTA0OWYiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1XzAxNXFrQnhrZm9iamU2bWdzeVVpeFk3WCIsInRvb2xfbmFtZSI6InN0ci1yZXBsYWNlLWVkaXRvciIsImlucHV0X2pzb24iOiJ7XCJjb21tYW5kXCI6IFwidmlld1wiLCBcInBhdGhcIjogXCJzcmMvREFPL1N1YnNjcmliZXJEQU8uamF2YVwifSIsIm1jcF9zZXJ2ZXJfbmFtZSI6IiIsIm1jcF90b29sX25hbWUiOiIifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6Ikkgc2VlIHRoZSBpc3N1ZSBub3cuIExldCBtZSBhbmFseXplIHRoZSBwcm9ibGVtIGFuZCBwcm92aWRlIGEgc29sdXRpb24uXG5cbiMjIFByb2JsZW0gQW5hbHlzaXNcblxuQWZ0ZXIgZXhhbWluaW5nIHRoZSBjb2RlLCBJIGNhbiBpZGVudGlmeSB0aGUgcm9vdCBjYXVzZSBvZiB0aGUgZXJyb3I6XG5cbjEuIFRoZSBlcnJvciBpcyBhIGZvcmVpZ24ga2V5IGNvbnN0cmFpbnQgdmlvbGF0aW9uOiBgQ2Fubm90IGFkZCBvciB1cGRhdGUgYSBjaGlsZCByb3c6IGEgZm9yZWlnbiBrZXkgY29uc3RyYWludCBmYWlscyAoSW50ZXJuZXREQi5TVUJTQ1JJQkVSLCBDT05TVFJBSU5UIFNVQlNDUklCRVJfaWJma18xIEZPUkVJR04gS0VZICh1c2VyX2lkKSBSRUZFUkVOQ0VTIFVTRVIgKHVzZXJfaWQpKWBcblxuMi4gVGhpcyBoYXBwZW5zIGluIHRoZSBgU3Vic2NyaWJlckRBTy5pbnNlcnQoKWAgbWV0aG9kIHdoZW4gdHJ5aW5nIHRvIGluc2VydCBhIHJlY29yZCBpbnRvIHRoZSBTVUJTQ1JJQkVSIHRhYmxlLlxuXG4zLiBMb29raW5nIGF0IHRoZSBjb2RlIGluIGBTdWJzY3JpYmVyREFPLmphdmFgLCBJIGNhbiBzZWUgdGhhdCBpdCdzIHRyeWluZyB0byBpbnNlcnQgcmVjb3JkcyBpbnRvIGJvdGggdGhlIFVTRVIgYW5kIFNVQlNDUklCRVIgdGFibGVzLCBidXQgdGhlcmUncyBhIGNyaXRpY2FsIGlzc3VlOlxuXG40LiBJbiB0aGUgYFNpZ25VcC5qYXZhYCBmaWxlLCB3aGVuIGNyZWF0aW5nIGEgbmV3IFN1YnNjcmliZXIgb2JqZWN0LCB0aGUgYHVzZXJfaWRgIGlzIG5vdCBiZWluZyBzZXQgYmVmb3JlIGNhbGxpbmcgYFN1YnNjcmliZXJEQU8uaW5zZXJ0KClgLlxuXG4jIyBEZXRhaWxlZCBQbGFuXG5cbkhlcmUncyBteSBwbGFuIHRvIGZpeCB0aGUgaXNzdWU6XG5cbjEuIE1vZGlmeSB0aGUgYFN1YnNjcmliZXJEQU8uaW5zZXJ0KClgIG1ldGhvZCB0bzpcbiAgIC0gR2VuZXJhdGUgYSB1bmlxdWUgdXNlcl9pZCBpbnN0ZWFkIG9mIGV4cGVjdGluZyBpdCB0byBiZSBzZXRcbiAgIC0gVXNlIHRoZSBnZW5lcmF0ZWQgdXNlcl9pZCBmb3IgYm90aCBVU0VSIGFuZCBTVUJTQ1JJQkVSIHRhYmxlc1xuICAgLSBQcm9wZXJseSBoYW5kbGUgdGhlIHRyYW5zYWN0aW9uXG5cbiMjIEltcGxlbWVudGF0aW9uXG5cbkxldCdzIG1ha2UgdGhlIG5lY2Vzc2FyeSBjaGFuZ2VzOlxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiSGVyZSBhcmUgdGhlIHJlc3VsdHMgZnJvbSBleGVjdXRpbmcgdGhlIGNvbW1hbmQuXG4gICAgICAgIDxyZXR1cm4tY29kZT5cbiAgICAgICAgMVxuICAgICAgICA8L3JldHVybi1jb2RlPlxuICAgICAgICA8c3Rkb3V0PlxuICAgICAgICBcdTAwMWJbPzkwMDFoXHUwMDFiWz8xMDA0aFx1MDAxYls/MjVsXHUwMDFiWzJKXHUwMDFiW21cdTAwMWJbSFxuXG5cblxuXG5cblxuXHUwMDFiW0hcdTAwMWJdMDtDOlxcV2luZG93c1xcU3lzdGVtMzJcXFdpbmRvd3NQb3dlclNoZWxsXFx2MS4wXFxwb3dlcnNoZWxsLmV4ZVx1MDAwN1x1MDAxYls/MjVoXHUwMDFiWzM4OzU7OW1teXNxbCA6IFRoZSB0ZXJtICdteXNxbCcgaXMgbm90IHJlY29nbml6ZWQgYXMgdGhlIG5hbWUgb2YgYSBjbWRsZXQsIGZ1bmN0aW9uLCBzY3JpcHQgZmlsZSwgb3Igb3BlcmFibGUgcHJvZ3JhbS4gQ2hlY2sgdGhlIHNwZWxsaW5nIG9mIHRoZSBuYW1lLCBvciBpZiBhIHBhdGggd2FzIGluY2x1ZGVkLCB2ZXJpZnkgXG50aGF0IHRoZSBwYXRoIGlzIGNvcnJlY3QgYW5kIHRyeSBhZ2Fpbi5cbkF0IGxpbmU6MSBjaGFyOjFcbisgbXlzcWwgLWggMTI1LjIxMi4yMzEuMTg0IC1QIDY5NjkgLXUgbWludG9yaTA5IC1wJ01pbnRvcnkwOUA5NicgLWUgXCJERSAuLi5cbisgfn5+fn5cbiAgICArIENhdGVnb3J5SW5mbyAgICAgICAgICA6IE9iamVjdE5vdEZvdW5kOiAobXlzcWw6U3RyaW5nKSBbXSwgQ29tbWFuZE5vdEZvdW5kRXhjZXB0aW9uXG4gICAgKyBGdWxseVF1YWxpZmllZEVycm9ySWQgOiBDb21tYW5kTm90Rm91bmRFeGNlcHRpb25cbiBcdTAwMWJbbVxuXG4gICAgICAgIDwvc3Rkb3V0PlxuICAgICAgICA8c3RkZXJyPlxuICAgICAgICBcbiAgICAgICAgPC9zdGRlcnI+IiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV8wMVlRQzZ2SjNHb2tTMmtFbXU5TEdVQXIifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJFOi9Ib2NUYXAvMDJfSkFWQS8wM19Qcm9qZWN0L0ludGVybmV0IE1hbmdlbWVudCBTeXN0ZW0iLCJmb2xkZXJSb290IjoiRTovSG9jVGFwLzAyX0pBVkEvMDNfUHJvamVjdC9JbnRlcm5ldCBNYW5nZW1lbnQgU3lzdGVtIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZSwiY3VycmVudFRlcm1pbmFsIjp7InRlcm1pbmFsSWQiOjIsImN1cnJlbnRXb3JraW5nRGlyZWN0b3J5IjoiRTovSG9jVGFwLzAyX0pBVkEvMDNfUHJvamVjdC9JbnRlcm5ldCBNYW5nZW1lbnQgU3lzdGVtIn19fV0sInRpbWVzdGFtcCI6IjIwMjUtMDUtMTFUMDk6MzI6NDUuNzIzWiIsInJlc3BvbnNlX3RleHQiOiJJIHNlZSB0aGUgaXNzdWUgbm93LiBMZXQgbWUgYW5hbHl6ZSB0aGUgcHJvYmxlbSBhbmQgcHJvdmlkZSBhIHNvbHV0aW9uLlxuXG4jIyBQcm9ibGVtIEFuYWx5c2lzXG5cbkFmdGVyIGV4YW1pbmluZyB0aGUgY29kZSwgSSBjYW4gaWRlbnRpZnkgdGhlIHJvb3QgY2F1c2Ugb2YgdGhlIGVycm9yOlxuXG4xLiBUaGUgZXJyb3IgaXMgYSBmb3JlaWduIGtleSBjb25zdHJhaW50IHZpb2xhdGlvbjogYENhbm5vdCBhZGQgb3IgdXBkYXRlIGEgY2hpbGQgcm93OiBhIGZvcmVpZ24ga2V5IGNvbnN0cmFpbnQgZmFpbHMgKEludGVybmV0REIuU1VCU0NSSUJFUiwgQ09OU1RSQUlOVCBTVUJTQ1JJQkVSX2liZmtfMSBGT1JFSUdOIEtFWSAodXNlcl9pZCkgUkVGRVJFTkNFUyBVU0VSICh1c2VyX2lkKSlgXG5cbjIuIFRoaXMgaGFwcGVucyBpbiB0aGUgYFN1YnNjcmliZXJEQU8uaW5zZXJ0KClgIG1ldGhvZCB3aGVuIHRyeWluZyB0byBpbnNlcnQgYSByZWNvcmQgaW50byB0aGUgU1VCU0NSSUJFUiB0YWJsZS5cblxuMy4gTG9va2luZyBhdCB0aGUgY29kZSBpbiBgU3Vic2NyaWJlckRBTy5qYXZhYCwgSSBjYW4gc2VlIHRoYXQgaXQncyB0cnlpbmcgdG8gaW5zZXJ0IHJlY29yZHMgaW50byBib3RoIHRoZSBVU0VSIGFuZCBTVUJTQ1JJQkVSIHRhYmxlcywgYnV0IHRoZXJlJ3MgYSBjcml0aWNhbCBpc3N1ZTpcblxuNC4gSW4gdGhlIGBTaWduVXAuamF2YWAgZmlsZSwgd2hlbiBjcmVhdGluZyBhIG5ldyBTdWJzY3JpYmVyIG9iamVjdCwgdGhlIGB1c2VyX2lkYCBpcyBub3QgYmVpbmcgc2V0IGJlZm9yZSBjYWxsaW5nIGBTdWJzY3JpYmVyREFPLmluc2VydCgpYC5cblxuIyMgRGV0YWlsZWQgUGxhblxuXG5IZXJlJ3MgbXkgcGxhbiB0byBmaXggdGhlIGlzc3VlOlxuXG4xLiBNb2RpZnkgdGhlIGBTdWJzY3JpYmVyREFPLmluc2VydCgpYCBtZXRob2QgdG86XG4gICAtIEdlbmVyYXRlIGEgdW5pcXVlIHVzZXJfaWQgaW5zdGVhZCBvZiBleHBlY3RpbmcgaXQgdG8gYmUgc2V0XG4gICAtIFVzZSB0aGUgZ2VuZXJhdGVkIHVzZXJfaWQgZm9yIGJvdGggVVNFUiBhbmQgU1VCU0NSSUJFUiB0YWJsZXNcbiAgIC0gUHJvcGVybHkgaGFuZGxlIHRoZSB0cmFuc2FjdGlvblxuXG4jIyBJbXBsZW1lbnRhdGlvblxuXG5MZXQncyBtYWtlIHRoZSBuZWNlc3NhcnkgY2hhbmdlczpcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiIzZjQ0MDNmMS05MzQ2LTQ2ODgtYjkyMS1jOTg0ZWFiNWUxMWQiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1XzAxVGNhWEJhQ3kzN2FiUGhERzZCbXFWRSIsInRvb2xfbmFtZSI6InN0ci1yZXBsYWNlLWVkaXRvciIsImlucHV0X2pzb24iOiJ7XCJjb21tYW5kXCI6IFwidmlld1wiLCBcInBhdGhcIjogXCJzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9TaWduVXAuamF2YVwiLCBcInZpZXdfcmFuZ2VcIjogWzI3MCwgMjkwXX0iLCJtY3Bfc2VydmVyX25hbWUiOiIiLCJtY3BfdG9vbF9uYW1lIjoiIn19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiIifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJIZXJlJ3MgdGhlIHJlc3VsdCBvZiBydW5uaW5nIGBjYXQgLW5gIG9uIHNyYy9EQU8vU3Vic2NyaWJlckRBTy5qYXZhOlxuICAgICAxXHQvKlxuICAgICAyXHQgKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0xpY2Vuc2VzL2xpY2Vuc2UtZGVmYXVsdC50eHQgdG8gY2hhbmdlIHRoaXMgbGljZW5zZVxuICAgICAzXHQgKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ2xhc3MuamF2YSB0byBlZGl0IHRoaXMgdGVtcGxhdGVcbiAgICAgNFx0ICovXG4gICAgIDVcdHBhY2thZ2UgREFPO1xuICAgICA2XHRcbiAgICAgN1x0aW1wb3J0IE1vZGVsLlN1YnNjcmliZXI7XG4gICAgIDhcdGltcG9ydCBqYXZhLnV0aWwuTGlzdDtcbiAgICAgOVx0aW1wb3J0IGphdmEuc3FsLkNvbm5lY3Rpb247XG4gICAgMTBcdGltcG9ydCBqYXZhLnNxbC5QcmVwYXJlZFN0YXRlbWVudDtcbiAgICAxMVx0aW1wb3J0IGphdmEuc3FsLlRpbWVzdGFtcDtcbiAgICAxMlx0XG4gICAgMTNcdC8qKlxuICAgIDE0XHQgKlxuICAgIDE1XHQgKiBAYXV0aG9yIE5nb2MgVGhhb1xuICAgIDE2XHQgKi9cbiAgICAxN1x0cHVibGljIGNsYXNzIFN1YnNjcmliZXJEQU97XG4gICAgMThcdFxuICAgIDE5XHQgICAgcHVibGljIHN0YXRpYyB2b2lkIGluc2VydChTdWJzY3JpYmVyIG9iaikge1xuICAgIDIwXHQgICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgMjFcdCAgICAgICAgUHJlcGFyZWRTdGF0ZW1lbnQgcHNVc2VyID0gbnVsbDtcbiAgICAyMlx0ICAgICAgICBQcmVwYXJlZFN0YXRlbWVudCBwc1N1YnNjcmliZXIgPSBudWxsO1xuICAgIDIzXHQgICAgICAgIFxuICAgIDI0XHQgICAgICAgIHRyeSB7XG4gICAgMjVcdCAgICAgICAgICAgIGNvbm4gPSBDb25uZWN0aW9uUHJvdmlkZXIuZ2V0Q29ubigpO1xuICAgIDI2XHQgICAgICAgICAgICBjb25uLnNldEF1dG9Db21taXQoZmFsc2UpO1xuICAgIDI3XHQgICAgICAgICAgICBcbiAgICAyOFx0ICAgICAgICAgICAgU3RyaW5nIHNxbFVzZXIgPSBcIklOU0VSVCBJTlRPIFVTRVIodXNlcl9pZCwgdXNlcm5hbWUsIHBhc3N3b3JkLCByb2xlLCBjcmVhdGVkX2F0KSBWQUxVRVMgKD8sID8sID8sID8sID8pXCI7XG4gICAgMjlcdCAgICAgICAgICAgIHBzVXNlciA9IGNvbm4ucHJlcGFyZVN0YXRlbWVudChzcWxVc2VyKTtcbiAgICAzMFx0ICAgICAgICAgICAgcHNVc2VyLnNldEludCgxLCBvYmouZ2V0VXNlcl9pZCgpKTtcbiAgICAzMVx0ICAgICAgICAgICAgcHNVc2VyLnNldFN0cmluZygyLCBvYmouZ2V0VXNlcm5hbWUoKSk7XG4gICAgMzJcdCAgICAgICAgICAgIHBzVXNlci5zZXRTdHJpbmcoMywgb2JqLmdldFBhc3N3b3JkKCkpO1xuICAgIDMzXHQgICAgICAgICAgICBwc1VzZXIuc2V0U3RyaW5nKDQsIG9iai5nZXRSb2xlKCkpO1xuICAgIDM0XHQgICAgICAgICAgICBwc1VzZXIuc2V0VGltZXN0YW1wKDUsIFRpbWVzdGFtcC52YWx1ZU9mKG9iai5nZXRDcmVhdGVfYXQoKSkpO1xuICAgIDM1XHQgICAgICAgICAgICBwc1VzZXIuZXhlY3V0ZVVwZGF0ZSgpO1xuICAgIDM2XHQgICAgICAgICAgICBcbiAgICAzN1x0ICAgICAgICAgICAgU3RyaW5nIHNxbFN1YnNjcmliZXIgPSBcIklOU0VSVCBJTlRPIFNVQlNDUklCRVIgKHN1YnNjcmliZXJfaWQsIG5hbWUsIGFkZHJlc3MsIHBob25lLCB1c2VyX2lkKSBWQUxVRVMgKD8sID8sID8sID8sID8pXCI7XG4gICAgMzhcdCAgICAgICAgICAgIHBzU3Vic2NyaWJlciA9IGNvbm4ucHJlcGFyZVN0YXRlbWVudChzcWxTdWJzY3JpYmVyKTtcbiAgICAzOVx0ICAgICAgICAgICAgcHNTdWJzY3JpYmVyLnNldEludCgxLCBvYmouZ2V0U3Vic2NyaWJlcl9pZCgpKTtcbiAgICA0MFx0ICAgICAgICAgICAgcHNTdWJzY3JpYmVyLnNldFN0cmluZygyLCBvYmouZ2V0RnVsbE5hbWUoKSk7XG4gICAgNDFcdCAgICAgICAgICAgIHBzU3Vic2NyaWJlci5zZXRTdHJpbmcoMywgb2JqLmdldEFkZHJlc3MoKSk7XG4gICAgNDJcdCAgICAgICAgICAgIHBzU3Vic2NyaWJlci5zZXRTdHJpbmcoNCwgb2JqLmdldFBob25lKCkpO1xuICAgIDQzXHQgICAgICAgICAgICBwc1N1YnNjcmliZXIuc2V0SW50KDUsIG9iai5nZXRVc2VyX2lkKCkpO1xuICAgIDQ0XHQgICAgICAgICAgICBwc1N1YnNjcmliZXIuZXhlY3V0ZVVwZGF0ZSgpO1xuICAgIDQ1XHQgICAgICAgICAgICBcbiAgICA0Nlx0ICAgICAgICAgICAgY29ubi5jb21taXQoKTtcbiAgICA0N1x0ICAgICAgICB9XG4gICAgNDhcdCAgICAgICAgY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAgNDlcdCAgICAgICAgICAgIHRyeSB7XG4gICAgNTBcdCAgICAgICAgICAgICAgICBpZiAoY29ubiAhPSBudWxsKSBjb25uLnJvbGxiYWNrKCk7XG4gICAgNTFcdCAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiByb2xsYmFja0V4KSB7XG4gICAgNTJcdCAgICAgICAgICAgICAgICByb2xsYmFja0V4LnByaW50U3RhY2tUcmFjZSgpO1xuICAgIDUzXHQgICAgICAgICAgICB9XG4gICAgNTRcdCAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgNTVcdCAgICAgICAgfSBmaW5hbGx5IHtcbiAgICA1Nlx0ICAgICAgICAgICAgdHJ5IHtcbiAgICA1N1x0ICAgICAgICAgICAgICAgIGlmIChwc1N1YnNjcmliZXIgIT0gbnVsbCkgcHNTdWJzY3JpYmVyLmNsb3NlKCk7XG4gICAgNThcdCAgICAgICAgICAgICAgICBpZiAocHNVc2VyICE9IG51bGwpIHBzVXNlci5jbG9zZSgpO1xuICAgIDU5XHQgICAgICAgICAgICAgICAgaWYgKGNvbm4gIT0gbnVsbCkgY29ubi5jbG9zZSgpO1xuICAgIDYwXHQgICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZXgpIHtcbiAgICA2MVx0ICAgICAgICAgICAgICAgIGV4LnByaW50U3RhY2tUcmFjZSgpO1xuICAgIDYyXHQgICAgICAgICAgICB9XG4gICAgNjNcdCAgICAgICAgfVxuICAgIDY0XHQgICAgfVxuICAgIDY1XHRcbiAgICA2Nlx0ICAgIHB1YmxpYyBzdGF0aWMgdm9pZCB1cGRhdGUoU3Vic2NyaWJlciBvYmopIHtcbiAgICA2N1x0ICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oXCJOb3Qgc3VwcG9ydGVkIHlldC5cIik7IC8vIEdlbmVyYXRlZCBmcm9tIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9Db2RlL0dlbmVyYXRlZE1ldGhvZEJvZHlcbiAgICA2OFx0ICAgIH1cbiAgICA2OVx0XG4gICAgNzBcdCAgICBwdWJsaWMgc3RhdGljIHZvaWQgZGVsZXRlKGludCBpZCkge1xuICAgIDcxXHQgICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbihcIk5vdCBzdXBwb3J0ZWQgeWV0LlwiKTsgLy8gR2VuZXJhdGVkIGZyb20gbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NvZGUvR2VuZXJhdGVkTWV0aG9kQm9keVxuICAgIDcyXHQgICAgfVxuICAgIDczXHRcbiAgICA3NFx0ICAgIHB1YmxpYyBzdGF0aWMgU3Vic2NyaWJlciBnZXRCeUlkKGludCBpZCkge1xuICAgIDc1XHQgICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbihcIk5vdCBzdXBwb3J0ZWQgeWV0LlwiKTsgLy8gR2VuZXJhdGVkIGZyb20gbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NvZGUvR2VuZXJhdGVkTWV0aG9kQm9keVxuICAgIDc2XHQgICAgfVxuICAgIDc3XHRcbiAgICA3OFx0ICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxTdWJzY3JpYmVyPiBnZXRBbGwoKSB7XG4gICAgNzlcdCAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpOyAvLyBHZW5lcmF0ZWQgZnJvbSBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ29kZS9HZW5lcmF0ZWRNZXRob2RCb2R5XG4gICAgODBcdCAgICB9XG4gICAgODFcdCAgICBcbiAgICA4Mlx0fVxuICAgIDgzXHRcblRvdGFsIGxpbmVzIGluIGZpbGU6IDgzXG4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1XzAxNXFrQnhrZm9iamU2bWdzeVVpeFk3WCJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkU6L0hvY1RhcC8wMl9KQVZBLzAzX1Byb2plY3QvSW50ZXJuZXQgTWFuZ2VtZW50IFN5c3RlbSIsImZvbGRlclJvb3QiOiJFOi9Ib2NUYXAvMDJfSkFWQS8wM19Qcm9qZWN0L0ludGVybmV0IE1hbmdlbWVudCBTeXN0ZW0ifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlLCJjdXJyZW50VGVybWluYWwiOnsidGVybWluYWxJZCI6MiwiY3VycmVudFdvcmtpbmdEaXJlY3RvcnkiOiJFOi9Ib2NUYXAvMDJfSkFWQS8wM19Qcm9qZWN0L0ludGVybmV0IE1hbmdlbWVudCBTeXN0ZW0ifX19XSwidGltZXN0YW1wIjoiMjAyNS0wNS0xMVQwOTozMjo1NC4wMzVaIiwicmVzcG9uc2VfdGV4dCI6IiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiJlYWIzYjg1ZC1hMzA1LTQzZDQtYWEzNy0yNDUyZjEzMThjODEiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1XzAxSmtaZVR1djJSUEdQWDVaRldaRHl6bSIsInRvb2xfbmFtZSI6InN0ci1yZXBsYWNlLWVkaXRvciIsImlucHV0X2pzb24iOiJ7XCJjb21tYW5kXCI6IFwic3RyX3JlcGxhY2VcIiwgXCJwYXRoXCI6IFwic3JjL0RBTy9TdWJzY3JpYmVyREFPLmphdmFcIiwgXCJzdHJfcmVwbGFjZV9lbnRyaWVzXCI6IFt7XCJvbGRfc3RyXCI6IFwiaW1wb3J0IE1vZGVsLlN1YnNjcmliZXI7XFxuaW1wb3J0IGphdmEudXRpbC5MaXN0O1xcbmltcG9ydCBqYXZhLnNxbC5Db25uZWN0aW9uO1xcbmltcG9ydCBqYXZhLnNxbC5QcmVwYXJlZFN0YXRlbWVudDtcXG5pbXBvcnQgamF2YS5zcWwuVGltZXN0YW1wO1wiLCBcIm5ld19zdHJcIjogXCJpbXBvcnQgTW9kZWwuU3Vic2NyaWJlcjtcXG5pbXBvcnQgamF2YS51dGlsLkxpc3Q7XFxuaW1wb3J0IGphdmEuc3FsLkNvbm5lY3Rpb247XFxuaW1wb3J0IGphdmEuc3FsLlByZXBhcmVkU3RhdGVtZW50O1xcbmltcG9ydCBqYXZhLnNxbC5SZXN1bHRTZXQ7XFxuaW1wb3J0IGphdmEuc3FsLlN0YXRlbWVudDtcXG5pbXBvcnQgamF2YS5zcWwuVGltZXN0YW1wO1xcbmltcG9ydCBqYXZheC5zd2luZy5KT3B0aW9uUGFuZTtcIiwgXCJvbGRfc3RyX3N0YXJ0X2xpbmVfbnVtYmVyXCI6IDcsIFwib2xkX3N0cl9lbmRfbGluZV9udW1iZXJcIjogMTF9LCB7XCJvbGRfc3RyXCI6IFwiICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBpbnNlcnQoU3Vic2NyaWJlciBvYmopIHtcXG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XFxuICAgICAgICBQcmVwYXJlZFN0YXRlbWVudCBwc1VzZXIgPSBudWxsO1xcbiAgICAgICAgUHJlcGFyZWRTdGF0ZW1lbnQgcHNTdWJzY3JpYmVyID0gbnVsbDtcXG4gICAgICAgIFxcbiAgICAgICAgdHJ5IHtcXG4gICAgICAgICAgICBjb25uID0gQ29ubmVjdGlvblByb3ZpZGVyLmdldENvbm4oKTtcXG4gICAgICAgICAgICBjb25uLnNldEF1dG9Db21taXQoZmFsc2UpO1xcbiAgICAgICAgICAgIFxcbiAgICAgICAgICAgIFN0cmluZyBzcWxVc2VyID0gXFxcIklOU0VSVCBJTlRPIFVTRVIodXNlcl9pZCwgdXNlcm5hbWUsIHBhc3N3b3JkLCByb2xlLCBjcmVhdGVkX2F0KSBWQUxVRVMgKD8sID8sID8sID8sID8pXFxcIjtcXG4gICAgICAgICAgICBwc1VzZXIgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsVXNlcik7XFxuICAgICAgICAgICAgcHNVc2VyLnNldEludCgxLCBvYmouZ2V0VXNlcl9pZCgpKTtcXG4gICAgICAgICAgICBwc1VzZXIuc2V0U3RyaW5nKDIsIG9iai5nZXRVc2VybmFtZSgpKTtcXG4gICAgICAgICAgICBwc1VzZXIuc2V0U3RyaW5nKDMsIG9iai5nZXRQYXNzd29yZCgpKTtcXG4gICAgICAgICAgICBwc1VzZXIuc2V0U3RyaW5nKDQsIG9iai5nZXRSb2xlKCkpO1xcbiAgICAgICAgICAgIHBzVXNlci5zZXRUaW1lc3RhbXAoNSwgVGltZXN0YW1wLnZhbHVlT2Yob2JqLmdldENyZWF0ZV9hdCgpKSk7XFxuICAgICAgICAgICAgcHNVc2VyLmV4ZWN1dGVVcGRhdGUoKTtcXG4gICAgICAgICAgICBcXG4gICAgICAgICAgICBTdHJpbmcgc3FsU3Vic2NyaWJlciA9IFxcXCJJTlNFUlQgSU5UTyBTVUJTQ1JJQkVSIChzdWJzY3JpYmVyX2lkLCBuYW1lLCBhZGRyZXNzLCBwaG9uZSwgdXNlcl9pZCkgVkFMVUVTICg/LCA/LCA/LCA/LCA/KVxcXCI7XFxuICAgICAgICAgICAgcHNTdWJzY3JpYmVyID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHNxbFN1YnNjcmliZXIpO1xcbiAgICAgICAgICAgIHBzU3Vic2NyaWJlci5zZXRJbnQoMSwgb2JqLmdldFN1YnNjcmliZXJfaWQoKSk7XFxuICAgICAgICAgICAgcHNTdWJzY3JpYmVyLnNldFN0cmluZygyLCBvYmouZ2V0RnVsbE5hbWUoKSk7XFxuICAgICAgICAgICAgcHNTdWJzY3JpYmVyLnNldFN0cmluZygzLCBvYmouZ2V0QWRkcmVzcygpKTtcXG4gICAgICAgICAgICBwc1N1YnNjcmliZXIuc2V0U3RyaW5nKDQsIG9iai5nZXRQaG9uZSgpKTtcXG4gICAgICAgICAgICBwc1N1YnNjcmliZXIuc2V0SW50KDUsIG9iai5nZXRVc2VyX2lkKCkpO1xcbiAgICAgICAgICAgIHBzU3Vic2NyaWJlci5leGVjdXRlVXBkYXRlKCk7XFxuICAgICAgICAgICAgXFxuICAgICAgICAgICAgY29ubi5jb21taXQoKTtcXG4gICAgICAgIH1cXG4gICAgICAgIGNhdGNoIChFeGNlcHRpb24gZSkge1xcbiAgICAgICAgICAgIHRyeSB7XFxuICAgICAgICAgICAgICAgIGlmIChjb25uICE9IG51bGwpIGNvbm4ucm9sbGJhY2soKTtcXG4gICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gcm9sbGJhY2tFeCkge1xcbiAgICAgICAgICAgICAgICByb2xsYmFja0V4LnByaW50U3RhY2tUcmFjZSgpO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xcbiAgICAgICAgfSBmaW5hbGx5IHtcXG4gICAgICAgICAgICB0cnkge1xcbiAgICAgICAgICAgICAgICBpZiAocHNTdWJzY3JpYmVyICE9IG51bGwpIHBzU3Vic2NyaWJlci5jbG9zZSgpO1xcbiAgICAgICAgICAgICAgICBpZiAocHNVc2VyICE9IG51bGwpIHBzVXNlci5jbG9zZSgpO1xcbiAgICAgICAgICAgICAgICBpZiAoY29ubiAhPSBudWxsKSBjb25uLmNsb3NlKCk7XFxuICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGV4KSB7XFxuICAgICAgICAgICAgICAgIGV4LnByaW50U3RhY2tUcmFjZSgpO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgIH1cIiwgXCJuZXdfc3RyXCI6IFwiICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBpbnNlcnQoU3Vic2NyaWJlciBvYmopIHtcXG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XFxuICAgICAgICBQcmVwYXJlZFN0YXRlbWVudCBwc1VzZXIgPSBudWxsO1xcbiAgICAgICAgUHJlcGFyZWRTdGF0ZW1lbnQgcHNTdWJzY3JpYmVyID0gbnVsbDtcXG4gICAgICAgIFJlc3VsdFNldCBycyA9IG51bGw7XFxuICAgICAgICBcXG4gICAgICAgIHRyeSB7XFxuICAgICAgICAgICAgY29ubiA9IENvbm5lY3Rpb25Qcm92aWRlci5nZXRDb25uKCk7XFxuICAgICAgICAgICAgY29ubi5zZXRBdXRvQ29tbWl0KGZhbHNlKTtcXG4gICAgICAgICAgICBcXG4gICAgICAgICAgICAvLyBHZW5lcmF0ZSB1c2VyX2lkXFxuICAgICAgICAgICAgaW50IHVzZXJJZCA9IGdlbmVyYXRlTmV4dElkKGNvbm4sIFxcXCJVU0VSXFxcIiwgXFxcInVzZXJfaWRcXFwiKTtcXG4gICAgICAgICAgICBvYmouc2V0VXNlcl9pZCh1c2VySWQpO1xcbiAgICAgICAgICAgIFxcbiAgICAgICAgICAgIC8vIEdlbmVyYXRlIHN1YnNjcmliZXJfaWRcXG4gICAgICAgICAgICBpbnQgc3Vic2NyaWJlcklkID0gZ2VuZXJhdGVOZXh0SWQoY29ubiwgXFxcIlNVQlNDUklCRVJcXFwiLCBcXFwic3Vic2NyaWJlcl9pZFxcXCIpO1xcbiAgICAgICAgICAgIG9iai5zZXRTdWJzY3JpYmVyX2lkKHN1YnNjcmliZXJJZCk7XFxuICAgICAgICAgICAgXFxuICAgICAgICAgICAgLy8gSW5zZXJ0IGludG8gVVNFUiB0YWJsZSBmaXJzdFxcbiAgICAgICAgICAgIFN0cmluZyBzcWxVc2VyID0gXFxcIklOU0VSVCBJTlRPIFVTRVIodXNlcl9pZCwgdXNlcm5hbWUsIHBhc3N3b3JkLCByb2xlLCBjcmVhdGVkX2F0KSBWQUxVRVMgKD8sID8sID8sID8sID8pXFxcIjtcXG4gICAgICAgICAgICBwc1VzZXIgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsVXNlcik7XFxuICAgICAgICAgICAgcHNVc2VyLnNldEludCgxLCB1c2VySWQpO1xcbiAgICAgICAgICAgIHBzVXNlci5zZXRTdHJpbmcoMiwgb2JqLmdldFVzZXJuYW1lKCkpO1xcbiAgICAgICAgICAgIHBzVXNlci5zZXRTdHJpbmcoMywgb2JqLmdldFBhc3N3b3JkKCkpO1xcbiAgICAgICAgICAgIHBzVXNlci5zZXRTdHJpbmcoNCwgb2JqLmdldFJvbGUoKSk7XFxuICAgICAgICAgICAgcHNVc2VyLnNldFRpbWVzdGFtcCg1LCBUaW1lc3RhbXAudmFsdWVPZihvYmouZ2V0Q3JlYXRlX2F0KCkpKTtcXG4gICAgICAgICAgICBwc1VzZXIuZXhlY3V0ZVVwZGF0ZSgpO1xcbiAgICAgICAgICAgIFxcbiAgICAgICAgICAgIC8vIFRoZW4gaW5zZXJ0IGludG8gU1VCU0NSSUJFUiB0YWJsZSB3aXRoIHRoZSBzYW1lIHVzZXJfaWRcXG4gICAgICAgICAgICBTdHJpbmcgc3FsU3Vic2NyaWJlciA9IFxcXCJJTlNFUlQgSU5UTyBTVUJTQ1JJQkVSIChzdWJzY3JpYmVyX2lkLCBuYW1lLCBhZGRyZXNzLCBwaG9uZSwgdXNlcl9pZCkgVkFMVUVTICg/LCA/LCA/LCA/LCA/KVxcXCI7XFxuICAgICAgICAgICAgcHNTdWJzY3JpYmVyID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHNxbFN1YnNjcmliZXIpO1xcbiAgICAgICAgICAgIHBzU3Vic2NyaWJlci5zZXRJbnQoMSwgc3Vic2NyaWJlcklkKTtcXG4gICAgICAgICAgICBwc1N1YnNjcmliZXIuc2V0U3RyaW5nKDIsIG9iai5nZXRGdWxsTmFtZSgpKTtcXG4gICAgICAgICAgICBwc1N1YnNjcmliZXIuc2V0U3RyaW5nKDMsIG9iai5nZXRBZGRyZXNzKCkpO1xcbiAgICAgICAgICAgIHBzU3Vic2NyaWJlci5zZXRTdHJpbmcoNCwgb2JqLmdldFBob25lKCkpO1xcbiAgICAgICAgICAgIHBzU3Vic2NyaWJlci5zZXRJbnQoNSwgdXNlcklkKTsgLy8gVXNlIHRoZSBzYW1lIHVzZXJfaWRcXG4gICAgICAgICAgICBwc1N1YnNjcmliZXIuZXhlY3V0ZVVwZGF0ZSgpO1xcbiAgICAgICAgICAgIFxcbiAgICAgICAgICAgIGNvbm4uY29tbWl0KCk7XFxuICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXFxcIlxcdTAxMTBcXHUwMTAzbmcga1xcdTAwZmQgdGhcXHUwMGUwbmggY1xcdTAwZjRuZyFcXFwiLCBcXFwiVGhcXHUwMGY0bmcgYlxcdTAwZTFvXFxcIiwgSk9wdGlvblBhbmUuSU5GT1JNQVRJT05fTUVTU0FHRSk7XFxuICAgICAgICB9XFxuICAgICAgICBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcXG4gICAgICAgICAgICB0cnkge1xcbiAgICAgICAgICAgICAgICBpZiAoY29ubiAhPSBudWxsKSBjb25uLnJvbGxiYWNrKCk7XFxuICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIHJvbGxiYWNrRXgpIHtcXG4gICAgICAgICAgICAgICAgcm9sbGJhY2tFeC5wcmludFN0YWNrVHJhY2UoKTtcXG4gICAgICAgICAgICB9XFxuICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXFxcIkxcXHUxZWQ3aTogXFxcIiArIGUuZ2V0TWVzc2FnZSgpLCBcXFwiVGhcXHUwMGY0bmcgYlxcdTAwZTFvXFxcIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XFxuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcXG4gICAgICAgIH0gZmluYWxseSB7XFxuICAgICAgICAgICAgdHJ5IHtcXG4gICAgICAgICAgICAgICAgaWYgKHJzICE9IG51bGwpIHJzLmNsb3NlKCk7XFxuICAgICAgICAgICAgICAgIGlmIChwc1N1YnNjcmliZXIgIT0gbnVsbCkgcHNTdWJzY3JpYmVyLmNsb3NlKCk7XFxuICAgICAgICAgICAgICAgIGlmIChwc1VzZXIgIT0gbnVsbCkgcHNVc2VyLmNsb3NlKCk7XFxuICAgICAgICAgICAgICAgIGlmIChjb25uICE9IG51bGwpIGNvbm4uY2xvc2UoKTtcXG4gICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZXgpIHtcXG4gICAgICAgICAgICAgICAgZXgucHJpbnRTdGFja1RyYWNlKCk7XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgfVwiLCBcIm9sZF9zdHJfc3RhcnRfbGluZV9udW1iZXJcIjogMTksIFwib2xkX3N0cl9lbmRfbGluZV9udW1iZXJcIjogNjN9XX0iLCJtY3Bfc2VydmVyX25hbWUiOiIiLCJtY3BfdG9vbF9uYW1lIjoiIn19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiJOb3cgSSdsbCBtb2RpZnkgdGhlIGBTdWJzY3JpYmVyREFPLmluc2VydCgpYCBtZXRob2QgdG8gZml4IHRoZSBpc3N1ZTpcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IkhlcmUncyB0aGUgcmVzdWx0IG9mIHJ1bm5pbmcgYGNhdCAtbmAgb24gc3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vU2lnblVwLmphdmE6XG4gICAyNzBcdCAgICAgICAgLy8gVE9ETyBhZGQgeW91ciBoYW5kbGluZyBjb2RlIGhlcmU6XG4gICAyNzFcdCAgICAgICAgU3Vic2NyaWJlciBzdWIgPSBuZXcgU3Vic2NyaWJlcigpO1xuICAgMjcyXHQgICAgICAgIHN1Yi5zZXRGdWxsTmFtZSh0eHROYW1lLmdldFRleHQoKSk7XG4gICAyNzNcdCAgICAgICAgc3ViLnNldFVzZXJuYW1lKHR4dFVzZXJOYW1lLmdldFRleHQoKSk7XG4gICAyNzRcdCAgICAgICAgc3ViLnNldFBhc3N3b3JkKHR4dFBhc3N3b3JkLmdldFRleHQoKSk7XG4gICAyNzVcdCAgICAgICAgc3ViLnNldFJvbGUoREVGQVVMVF9ST0xFKTtcbiAgIDI3Nlx0ICAgICAgICBzdWIuc2V0QWRkcmVzcyh0eHRBZGRyZXNzLmdldFRleHQoKSk7XG4gICAyNzdcdCAgICAgICAgc3ViLnNldFBob25lKHR4dFBob25lLmdldFRleHQoKSk7XG4gICAyNzhcdCAgICAgICAgc3ViLnNldENyZWF0ZV9hdChMb2NhbERhdGVUaW1lLm5vdygpKTtcbiAgIDI3OVx0ICAgICAgICBTdWJzY3JpYmVyREFPLmluc2VydChzdWIpO1xuICAgMjgwXHQgICAgICAgIGNsZWFyKCk7XG4gICAyODFcdCAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5TaWdudXBBY3Rpb25QZXJmb3JtZWRcbiAgIDI4Mlx0XG4gICAyODNcdCAgICBwcml2YXRlIHZvaWQgdHh0TmFtZUtleVJlbGVhc2VkKGphdmEuYXd0LmV2ZW50LktleUV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X3R4dE5hbWVLZXlSZWxlYXNlZFxuICAgMjg0XHQgICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxuICAgMjg1XHQgICAgICAgIHZhbGlkYXRlRmllbGRzKCk7XG4gICAyODZcdCAgICB9Ly9HRU4tTEFTVDpldmVudF90eHROYW1lS2V5UmVsZWFzZWRcbiAgIDI4N1x0XG4gICAyODhcdCAgICBwcml2YXRlIHZvaWQgdHh0VXNlck5hbWVLZXlSZWxlYXNlZChqYXZhLmF3dC5ldmVudC5LZXlFdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF90eHRVc2VyTmFtZUtleVJlbGVhc2VkXG4gICAyODlcdCAgICAgICAgLy8gVE9ETyBhZGQgeW91ciBoYW5kbGluZyBjb2RlIGhlcmU6XG4gICAyOTBcdCAgICAgICAgdmFsaWRhdGVGaWVsZHMoKTtcblRvdGFsIGxpbmVzIGluIGZpbGU6IDM2NVxuIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV8wMVRjYVhCYUN5MzdhYlBoREc2Qm1xVkUifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJFOi9Ib2NUYXAvMDJfSkFWQS8wM19Qcm9qZWN0L0ludGVybmV0IE1hbmdlbWVudCBTeXN0ZW0iLCJmb2xkZXJSb290IjoiRTovSG9jVGFwLzAyX0pBVkEvMDNfUHJvamVjdC9JbnRlcm5ldCBNYW5nZW1lbnQgU3lzdGVtIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZSwiY3VycmVudFRlcm1pbmFsIjp7InRlcm1pbmFsSWQiOjIsImN1cnJlbnRXb3JraW5nRGlyZWN0b3J5IjoiRTovSG9jVGFwLzAyX0pBVkEvMDNfUHJvamVjdC9JbnRlcm5ldCBNYW5nZW1lbnQgU3lzdGVtIn19fV0sInRpbWVzdGFtcCI6IjIwMjUtMDUtMTFUMDk6MzI6NTcuMTM5WiIsInJlc3BvbnNlX3RleHQiOiJOb3cgSSdsbCBtb2RpZnkgdGhlIGBTdWJzY3JpYmVyREFPLmluc2VydCgpYCBtZXRob2QgdG8gZml4IHRoZSBpc3N1ZTpcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsicmVxdWVzdF9pZCI6IjVhYjliNDhhLWYzOTMtNGYxYy1iZWZhLTkxZmQ4ODE3YTVhMyIsInV1aWQiOiI4NWYwMmMwYS1lNWExLTQ4YWMtOTllYi1iOGEzNjc1NTQxMDAiLCJjaGF0SXRlbVR5cGUiOiJhZ2VudGljLWNoZWNrcG9pbnQtZGVsaW1pdGVyIiwic3RhdHVzIjoic3VjY2VzcyIsImZyb21UaW1lc3RhbXAiOjE3NDY5NTU4ODQ4OTEsInRvVGltZXN0YW1wIjoxNzQ2OTU2MDU3OTQ1LCJzZWVuX3N0YXRlIjoic2VlbiJ9LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiJlZjYyOTE5Zi00YmMwLTQ0OGUtOWY3Zi0wYWMzZGY4NTZlOWMiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1XzAxV1p2NWJMd0NWZGUyd1dNRmlqYkhheiIsInRvb2xfbmFtZSI6InN0ci1yZXBsYWNlLWVkaXRvciIsImlucHV0X2pzb24iOiJ7XCJjb21tYW5kXCI6IFwic3RyX3JlcGxhY2VcIiwgXCJwYXRoXCI6IFwic3JjL0RBTy9TdWJzY3JpYmVyREFPLmphdmFcIiwgXCJzdHJfcmVwbGFjZV9lbnRyaWVzXCI6IFt7XCJvbGRfc3RyXCI6IFwiICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxTdWJzY3JpYmVyPiBnZXRBbGwoKSB7XFxuICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oXFxcIk5vdCBzdXBwb3J0ZWQgeWV0LlxcXCIpOyAvLyBHZW5lcmF0ZWQgZnJvbSBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ29kZS9HZW5lcmF0ZWRNZXRob2RCb2R5XFxuICAgIH1cXG4gICAgXFxufVwiLCBcIm5ld19zdHJcIjogXCIgICAgcHVibGljIHN0YXRpYyBMaXN0PFN1YnNjcmliZXI+IGdldEFsbCgpIHtcXG4gICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbihcXFwiTm90IHN1cHBvcnRlZCB5ZXQuXFxcIik7IC8vIEdlbmVyYXRlZCBmcm9tIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9Db2RlL0dlbmVyYXRlZE1ldGhvZEJvZHlcXG4gICAgfVxcbiAgICBcXG4gICAgLyoqXFxuICAgICAqIEdlbmVyYXRlIHRoZSBuZXh0IGF2YWlsYWJsZSBJRCBmb3IgYSB0YWJsZVxcbiAgICAgKiBAcGFyYW0gY29ubiBEYXRhYmFzZSBjb25uZWN0aW9uXFxuICAgICAqIEBwYXJhbSB0YWJsZU5hbWUgTmFtZSBvZiB0aGUgdGFibGVcXG4gICAgICogQHBhcmFtIGlkQ29sdW1uTmFtZSBOYW1lIG9mIHRoZSBJRCBjb2x1bW5cXG4gICAgICogQHJldHVybiBOZXh0IGF2YWlsYWJsZSBJRFxcbiAgICAgKiBAdGhyb3dzIEV4Y2VwdGlvbiBJZiBhbiBlcnJvciBvY2N1cnNcXG4gICAgICovXFxuICAgIHByaXZhdGUgc3RhdGljIGludCBnZW5lcmF0ZU5leHRJZChDb25uZWN0aW9uIGNvbm4sIFN0cmluZyB0YWJsZU5hbWUsIFN0cmluZyBpZENvbHVtbk5hbWUpIHRocm93cyBFeGNlcHRpb24ge1xcbiAgICAgICAgaW50IG5leHRJZCA9IDE7IC8vIERlZmF1bHQgc3RhcnRpbmcgSURcXG4gICAgICAgIFN0YXRlbWVudCBzdG10ID0gbnVsbDtcXG4gICAgICAgIFJlc3VsdFNldCBycyA9IG51bGw7XFxuICAgICAgICBcXG4gICAgICAgIHRyeSB7XFxuICAgICAgICAgICAgc3RtdCA9IGNvbm4uY3JlYXRlU3RhdGVtZW50KCk7XFxuICAgICAgICAgICAgU3RyaW5nIHF1ZXJ5ID0gXFxcIlNFTEVDVCBNQVgoXFxcIiArIGlkQ29sdW1uTmFtZSArIFxcXCIpIEFTIG1heF9pZCBGUk9NIFxcXCIgKyB0YWJsZU5hbWU7XFxuICAgICAgICAgICAgcnMgPSBzdG10LmV4ZWN1dGVRdWVyeShxdWVyeSk7XFxuICAgICAgICAgICAgXFxuICAgICAgICAgICAgaWYgKHJzLm5leHQoKSkge1xcbiAgICAgICAgICAgICAgICBpbnQgbWF4SWQgPSBycy5nZXRJbnQoXFxcIm1heF9pZFxcXCIpO1xcbiAgICAgICAgICAgICAgICBuZXh0SWQgPSBtYXhJZCArIDE7XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgfSBmaW5hbGx5IHtcXG4gICAgICAgICAgICBpZiAocnMgIT0gbnVsbCkgcnMuY2xvc2UoKTtcXG4gICAgICAgICAgICBpZiAoc3RtdCAhPSBudWxsKSBzdG10LmNsb3NlKCk7XFxuICAgICAgICB9XFxuICAgICAgICBcXG4gICAgICAgIHJldHVybiBuZXh0SWQ7XFxuICAgIH1cXG59XCIsIFwib2xkX3N0cl9zdGFydF9saW5lX251bWJlclwiOiA3OCwgXCJvbGRfc3RyX2VuZF9saW5lX251bWJlclwiOiA4Mn1dfSIsIm1jcF9zZXJ2ZXJfbmFtZSI6IiIsIm1jcF90b29sX25hbWUiOiIifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6Ik5vdyBJIG5lZWQgdG8gYWRkIHRoZSBgZ2VuZXJhdGVOZXh0SWRgIG1ldGhvZCB0byB0aGUgYFN1YnNjcmliZXJEQU9gIGNsYXNzOlxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiU3VjY2Vzc2Z1bGx5IGVkaXRlZCB0aGUgZmlsZSBzcmMvREFPL1N1YnNjcmliZXJEQU8uamF2YS5cblJlc3VsdCBmb3Igc3RyX3JlcGxhY2UgZm9yIGVudHJ5IHdpdGggaW5kZXggWzBdOlxuUmVwbGFjZW1lbnQgc3VjY2Vzc2Z1bC5cbkVkaXRlZCBzZWN0aW9uIGFmdGVyIElERSBhdXRvLWZvcm1hdHRpbmcgd2FzIGFwcGxpZWQ6XG4gICAgIDNcdCAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9DbGFzcy5qYXZhIHRvIGVkaXQgdGhpcyB0ZW1wbGF0ZVxuICAgICA0XHQgKi9cbiAgICAgNVx0cGFja2FnZSBEQU87XG4gICAgIDZcdFxuICAgICA3XHRpbXBvcnQgTW9kZWwuU3Vic2NyaWJlcjtcbiAgICAgOFx0aW1wb3J0IGphdmEudXRpbC5MaXN0O1xuICAgICA5XHRpbXBvcnQgamF2YS5zcWwuQ29ubmVjdGlvbjtcbiAgICAxMFx0aW1wb3J0IGphdmEuc3FsLlByZXBhcmVkU3RhdGVtZW50O1xuICAgIDExXHRpbXBvcnQgamF2YS5zcWwuUmVzdWx0U2V0O1xuICAgIDEyXHRpbXBvcnQgamF2YS5zcWwuU3RhdGVtZW50O1xuICAgIDEzXHRpbXBvcnQgamF2YS5zcWwuVGltZXN0YW1wO1xuICAgIDE0XHRpbXBvcnQgamF2YXguc3dpbmcuSk9wdGlvblBhbmU7XG4gICAgMTVcdFxuICAgIDE2XHQvKipcbiAgICAxN1x0ICpcbiAgICAxOFx0ICogQGF1dGhvciBOZ29jIFRoYW9cblxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZSBmb3IgZW50cnkgd2l0aCBpbmRleCBbMV06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgICAxOFx0ICogQGF1dGhvciBOZ29jIFRoYW9cbiAgICAxOVx0ICovXG4gICAgMjBcdHB1YmxpYyBjbGFzcyBTdWJzY3JpYmVyREFPe1xuICAgIDIxXHRcbiAgICAyMlx0ICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBpbnNlcnQoU3Vic2NyaWJlciBvYmopIHtcbiAgICAyM1x0ICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgIDI0XHQgICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHBzVXNlciA9IG51bGw7XG4gICAgMjVcdCAgICAgICAgUHJlcGFyZWRTdGF0ZW1lbnQgcHNTdWJzY3JpYmVyID0gbnVsbDtcbiAgICAyNlx0ICAgICAgICBSZXN1bHRTZXQgcnMgPSBudWxsO1xuICAgIDI3XHRcbiAgICAyOFx0ICAgICAgICB0cnkge1xuICAgIDI5XHQgICAgICAgICAgICBjb25uID0gQ29ubmVjdGlvblByb3ZpZGVyLmdldENvbm4oKTtcbiAgICAzMFx0ICAgICAgICAgICAgY29ubi5zZXRBdXRvQ29tbWl0KGZhbHNlKTtcbiAgICAzMVx0XG4gICAgMzJcdCAgICAgICAgICAgIC8vIEdlbmVyYXRlIHVzZXJfaWRcbiAgICAzM1x0ICAgICAgICAgICAgaW50IHVzZXJJZCA9IGdlbmVyYXRlTmV4dElkKGNvbm4sIFwiVVNFUlwiLCBcInVzZXJfaWRcIik7XG4gICAgMzRcdCAgICAgICAgICAgIG9iai5zZXRVc2VyX2lkKHVzZXJJZCk7XG4gICAgMzVcdFxuICAgIDM2XHQgICAgICAgICAgICAvLyBHZW5lcmF0ZSBzdWJzY3JpYmVyX2lkXG4gICAgMzdcdCAgICAgICAgICAgIGludCBzdWJzY3JpYmVySWQgPSBnZW5lcmF0ZU5leHRJZChjb25uLCBcIlNVQlNDUklCRVJcIiwgXCJzdWJzY3JpYmVyX2lkXCIpO1xuICAgIDM4XHQgICAgICAgICAgICBvYmouc2V0U3Vic2NyaWJlcl9pZChzdWJzY3JpYmVySWQpO1xuICAgIDM5XHRcbiAgICA0MFx0ICAgICAgICAgICAgLy8gSW5zZXJ0IGludG8gVVNFUiB0YWJsZSBmaXJzdFxuICAgIDQxXHQgICAgICAgICAgICBTdHJpbmcgc3FsVXNlciA9IFwiSU5TRVJUIElOVE8gVVNFUih1c2VyX2lkLCB1c2VybmFtZSwgcGFzc3dvcmQsIHJvbGUsIGNyZWF0ZWRfYXQpIFZBTFVFUyAoPywgPywgPywgPywgPylcIjtcbiAgICA0Mlx0ICAgICAgICAgICAgcHNVc2VyID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHNxbFVzZXIpO1xuICAgIDQzXHQgICAgICAgICAgICBwc1VzZXIuc2V0SW50KDEsIHVzZXJJZCk7XG4gICAgNDRcdCAgICAgICAgICAgIHBzVXNlci5zZXRTdHJpbmcoMiwgb2JqLmdldFVzZXJuYW1lKCkpO1xuICAgIDQ1XHQgICAgICAgICAgICBwc1VzZXIuc2V0U3RyaW5nKDMsIG9iai5nZXRQYXNzd29yZCgpKTtcbiAgICA0Nlx0ICAgICAgICAgICAgcHNVc2VyLnNldFN0cmluZyg0LCBvYmouZ2V0Um9sZSgpKTtcbiAgICA0N1x0ICAgICAgICAgICAgcHNVc2VyLnNldFRpbWVzdGFtcCg1LCBUaW1lc3RhbXAudmFsdWVPZihvYmouZ2V0Q3JlYXRlX2F0KCkpKTtcbiAgICA0OFx0ICAgICAgICAgICAgcHNVc2VyLmV4ZWN1dGVVcGRhdGUoKTtcbiAgICA0OVx0XG4gICAgNTBcdCAgICAgICAgICAgIC8vIFRoZW4gaW5zZXJ0IGludG8gU1VCU0NSSUJFUiB0YWJsZSB3aXRoIHRoZSBzYW1lIHVzZXJfaWRcbiAgICA1MVx0ICAgICAgICAgICAgU3RyaW5nIHNxbFN1YnNjcmliZXIgPSBcIklOU0VSVCBJTlRPIFNVQlNDUklCRVIgKHN1YnNjcmliZXJfaWQsIG5hbWUsIGFkZHJlc3MsIHBob25lLCB1c2VyX2lkKSBWQUxVRVMgKD8sID8sID8sID8sID8pXCI7XG4gICAgNTJcdCAgICAgICAgICAgIHBzU3Vic2NyaWJlciA9IGNvbm4ucHJlcGFyZVN0YXRlbWVudChzcWxTdWJzY3JpYmVyKTtcbiAgICA1M1x0ICAgICAgICAgICAgcHNTdWJzY3JpYmVyLnNldEludCgxLCBzdWJzY3JpYmVySWQpO1xuICAgIDU0XHQgICAgICAgICAgICBwc1N1YnNjcmliZXIuc2V0U3RyaW5nKDIsIG9iai5nZXRGdWxsTmFtZSgpKTtcbiAgICA1NVx0ICAgICAgICAgICAgcHNTdWJzY3JpYmVyLnNldFN0cmluZygzLCBvYmouZ2V0QWRkcmVzcygpKTtcbiAgICA1Nlx0ICAgICAgICAgICAgcHNTdWJzY3JpYmVyLnNldFN0cmluZyg0LCBvYmouZ2V0UGhvbmUoKSk7XG4gICAgNTdcdCAgICAgICAgICAgIHBzU3Vic2NyaWJlci5zZXRJbnQoNSwgdXNlcklkKTsgLy8gVXNlIHRoZSBzYW1lIHVzZXJfaWRcbiAgICA1OFx0ICAgICAgICAgICAgcHNTdWJzY3JpYmVyLmV4ZWN1dGVVcGRhdGUoKTtcbiAgICA1OVx0XG4gICAgNjBcdCAgICAgICAgICAgIGNvbm4uY29tbWl0KCk7XG4gICAgNjFcdCAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwixJDEg25nIGvDvSB0aMOgbmggY8O0bmchXCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuSU5GT1JNQVRJT05fTUVTU0FHRSk7XG4gICAgNjJcdCAgICAgICAgfVxuICAgIDYzXHQgICAgICAgIGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgIDY0XHQgICAgICAgICAgICB0cnkge1xuICAgIDY1XHQgICAgICAgICAgICAgICAgaWYgKGNvbm4gIT0gbnVsbCkgY29ubi5yb2xsYmFjaygpO1xuICAgIDY2XHQgICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gcm9sbGJhY2tFeCkge1xuICAgIDY3XHQgICAgICAgICAgICAgICAgcm9sbGJhY2tFeC5wcmludFN0YWNrVHJhY2UoKTtcbiAgICA2OFx0ICAgICAgICAgICAgfVxuICAgIDY5XHQgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcIkzhu5dpOiBcIiArIGUuZ2V0TWVzc2FnZSgpLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgIDcwXHQgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgIDcxXHQgICAgICAgIH0gZmluYWxseSB7XG4gICAgNzJcdCAgICAgICAgICAgIHRyeSB7XG4gICAgNzNcdCAgICAgICAgICAgICAgICBpZiAocnMgIT0gbnVsbCkgcnMuY2xvc2UoKTtcbiAgICA3NFx0ICAgICAgICAgICAgICAgIGlmIChwc1N1YnNjcmliZXIgIT0gbnVsbCkgcHNTdWJzY3JpYmVyLmNsb3NlKCk7XG4gICAgNzVcdCAgICAgICAgICAgICAgICBpZiAocHNVc2VyICE9IG51bGwpIHBzVXNlci5jbG9zZSgpO1xuICAgIDc2XHQgICAgICAgICAgICAgICAgaWYgKGNvbm4gIT0gbnVsbCkgY29ubi5jbG9zZSgpO1xuICAgIDc3XHQgICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZXgpIHtcbiAgICA3OFx0ICAgICAgICAgICAgICAgIGV4LnByaW50U3RhY2tUcmFjZSgpO1xuICAgIDc5XHQgICAgICAgICAgICB9XG4gICAgODBcdCAgICAgICAgfVxuICAgIDgxXHQgICAgfVxuICAgIDgyXHRcbiAgICA4M1x0ICAgIHB1YmxpYyBzdGF0aWMgdm9pZCB1cGRhdGUoU3Vic2NyaWJlciBvYmopIHtcbiAgICA4NFx0ICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oXCJOb3Qgc3VwcG9ydGVkIHlldC5cIik7IC8vIEdlbmVyYXRlZCBmcm9tIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9Db2RlL0dlbmVyYXRlZE1ldGhvZEJvZHlcblxuUmV2aWV3IHRoZSBjaGFuZ2VzIGFuZCBtYWtlIHN1cmUgdGhleSBhcmUgYXMgZXhwZWN0ZWQgKGNvcnJlY3QgaW5kZW50YXRpb24sIG5vIGR1cGxpY2F0ZSBsaW5lcywgZXRjKS5cbkVkaXQgdGhlIGZpbGUgYWdhaW4gaWYgbmVjZXNzYXJ5LlxuIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV8wMUprWmVUdXYyUlBHUFg1WkZXWkR5em0ifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJFOi9Ib2NUYXAvMDJfSkFWQS8wM19Qcm9qZWN0L0ludGVybmV0IE1hbmdlbWVudCBTeXN0ZW0iLCJmb2xkZXJSb290IjoiRTovSG9jVGFwLzAyX0pBVkEvMDNfUHJvamVjdC9JbnRlcm5ldCBNYW5nZW1lbnQgU3lzdGVtIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZSwiY3VycmVudFRlcm1pbmFsIjp7InRlcm1pbmFsSWQiOjIsImN1cnJlbnRXb3JraW5nRGlyZWN0b3J5IjoiRTovSG9jVGFwLzAyX0pBVkEvMDNfUHJvamVjdC9JbnRlcm5ldCBNYW5nZW1lbnQgU3lzdGVtIn19fV0sInRpbWVzdGFtcCI6IjIwMjUtMDUtMTFUMDk6MzQ6MjIuNzE4WiIsInJlc3BvbnNlX3RleHQiOiJOb3cgSSBuZWVkIHRvIGFkZCB0aGUgYGdlbmVyYXRlTmV4dElkYCBtZXRob2QgdG8gdGhlIGBTdWJzY3JpYmVyREFPYCBjbGFzczpcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiJjZWRkMjliNC1jY2ZjLTRhYTYtOTA4My0yZjQxMGI3YWFlMmYiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1XzAxVEg5djN3U205RDZ2SDk4ZGc0ODdnViIsInRvb2xfbmFtZSI6InN0ci1yZXBsYWNlLWVkaXRvciIsImlucHV0X2pzb24iOiJ7XCJjb21tYW5kXCI6IFwic3RyX3JlcGxhY2VcIiwgXCJwYXRoXCI6IFwic3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vU2lnblVwLmphdmFcIiwgXCJzdHJfcmVwbGFjZV9lbnRyaWVzXCI6IFt7XCJvbGRfc3RyXCI6IFwiICAgIHB1YmxpYyB2b2lkIHZhbGlkYXRlRmllbGRzKCl7XFxuICAgICAgICBTdHJpbmcgbmFtZSA9IHR4dE5hbWUuZ2V0VGV4dCgpO1xcbiAgICAgICAgU3RyaW5nIHVzZXJOYW1lID0gdHh0VXNlck5hbWUuZ2V0VGV4dCgpO1xcbiAgICAgICAgU3RyaW5nIHBhc3N3b3JkID0gdHh0UGFzc3dvcmQuZ2V0VGV4dCgpO1xcbiAgICAgICAgU3RyaW5nIGFkZHJlc3MgPSB0eHRBZGRyZXNzLmdldFRleHQoKTtcXG4gICAgICAgIFN0cmluZyBwaG9uZSA9IHR4dFBob25lLmdldFRleHQoKTtcXG4gICAgICAgIFxcbiAgICAgICAgaWYobmFtZS5lcXVhbHMoXFxcIlxcXCIpICYmIHVzZXJOYW1lLmVxdWFscyhcXFwiXFxcIikgJiYgcGFzc3dvcmQuZXF1YWxzKFxcXCJcXFwiKSAmJiBhZGRyZXNzLmVxdWFscyhcXFwiXFxcIikgJiYgcGhvbmUuZXF1YWxzKFxcXCJcXFwiKSl7XFxuICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXFxcIlZ1aSBsXFx1MDBmMm5nIGtoXFx1MDBmNG5nIGJcXHUxZWNmIHRyXFx1MWVkMW5nIVxcXCIsIFxcXCJUaFxcdTAwZjRuZyBiXFx1MDBlMW9cXFwiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcXG4gICAgICAgIH1cXG4gICAgICAgIGVsc2UgaWYocGhvbmUubGVuZ3RoKCkgPT0gMTAgJiYgcGhvbmUubWF0Y2hlcyhwaG9uZVBhdHRlcm4pKSB7XFxuICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXFxcIlZ1aSBsXFx1MDBmMm5nIG5oXFx1MWVhZHAgXFx1MDExMVxcdTAwZmFuZyBcXHUwMTExXFx1MWVjYm5oIGRcXHUxZWExbmcgc1xcdTFlZDEgXFx1MDExMWlcXHUxZWM3biB0aG9cXHUxZWExaSFcXFwiLCBcXFwiVGhcXHUwMGY0bmcgYlxcdTAwZTFvXFxcIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XFxuICAgICAgICB9XFxuICAgICAgICBlbHNlIHtcXG4gICAgICAgICAgICBcXG4gICAgICAgIH1cIiwgXCJuZXdfc3RyXCI6IFwiICAgIHB1YmxpYyBib29sZWFuIHZhbGlkYXRlRmllbGRzKCl7XFxuICAgICAgICBTdHJpbmcgbmFtZSA9IHR4dE5hbWUuZ2V0VGV4dCgpO1xcbiAgICAgICAgU3RyaW5nIHVzZXJOYW1lID0gdHh0VXNlck5hbWUuZ2V0VGV4dCgpO1xcbiAgICAgICAgU3RyaW5nIHBhc3N3b3JkID0gdHh0UGFzc3dvcmQuZ2V0VGV4dCgpO1xcbiAgICAgICAgU3RyaW5nIGFkZHJlc3MgPSB0eHRBZGRyZXNzLmdldFRleHQoKTtcXG4gICAgICAgIFN0cmluZyBwaG9uZSA9IHR4dFBob25lLmdldFRleHQoKTtcXG4gICAgICAgIFxcbiAgICAgICAgaWYobmFtZS5pc0VtcHR5KCkgfHwgdXNlck5hbWUuaXNFbXB0eSgpIHx8IHBhc3N3b3JkLmlzRW1wdHkoKSB8fCBhZGRyZXNzLmlzRW1wdHkoKSB8fCBwaG9uZS5pc0VtcHR5KCkpe1xcbiAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFxcXCJWdWkgbFxcdTAwZjJuZyBraFxcdTAwZjRuZyBiXFx1MWVjZiB0clxcdTFlZDFuZyFcXFwiLCBcXFwiVGhcXHUwMGY0bmcgYlxcdTAwZTFvXFxcIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XFxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xcbiAgICAgICAgfVxcbiAgICAgICAgZWxzZSBpZihwaG9uZS5sZW5ndGgoKSAhPSAxMCB8fCAhcGhvbmUubWF0Y2hlcyhwaG9uZVBhdHRlcm4pKSB7XFxuICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXFxcIlZ1aSBsXFx1MDBmMm5nIG5oXFx1MWVhZHAgXFx1MDExMVxcdTAwZmFuZyBcXHUwMTExXFx1MWVjYm5oIGRcXHUxZWExbmcgc1xcdTFlZDEgXFx1MDExMWlcXHUxZWM3biB0aG9cXHUxZWExaSFcXFwiLCBcXFwiVGhcXHUwMGY0bmcgYlxcdTAwZTFvXFxcIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XFxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xcbiAgICAgICAgfVxcbiAgICAgICAgcmV0dXJuIHRydWU7XFxuICAgIH1cIiwgXCJvbGRfc3RyX3N0YXJ0X2xpbmVfbnVtYmVyXCI6IDMxLCBcIm9sZF9zdHJfZW5kX2xpbmVfbnVtYmVyXCI6IDQ1fSwge1wib2xkX3N0clwiOiBcIiAgICBwcml2YXRlIHZvaWQgYnRuU2lnbnVwQWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0blNpZ251cEFjdGlvblBlcmZvcm1lZFxcbiAgICAgICAgLy8gVE9ETyBhZGQgeW91ciBoYW5kbGluZyBjb2RlIGhlcmU6XFxuICAgICAgICBTdWJzY3JpYmVyIHN1YiA9IG5ldyBTdWJzY3JpYmVyKCk7XFxuICAgICAgICBzdWIuc2V0RnVsbE5hbWUodHh0TmFtZS5nZXRUZXh0KCkpO1xcbiAgICAgICAgc3ViLnNldFVzZXJuYW1lKHR4dFVzZXJOYW1lLmdldFRleHQoKSk7XFxuICAgICAgICBzdWIuc2V0UGFzc3dvcmQodHh0UGFzc3dvcmQuZ2V0VGV4dCgpKTtcXG4gICAgICAgIHN1Yi5zZXRSb2xlKERFRkFVTFRfUk9MRSk7XFxuICAgICAgICBzdWIuc2V0QWRkcmVzcyh0eHRBZGRyZXNzLmdldFRleHQoKSk7XFxuICAgICAgICBzdWIuc2V0UGhvbmUodHh0UGhvbmUuZ2V0VGV4dCgpKTtcXG4gICAgICAgIHN1Yi5zZXRDcmVhdGVfYXQoTG9jYWxEYXRlVGltZS5ub3coKSk7XFxuICAgICAgICBTdWJzY3JpYmVyREFPLmluc2VydChzdWIpO1xcbiAgICAgICAgY2xlYXIoKTtcXG4gICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuU2lnbnVwQWN0aW9uUGVyZm9ybWVkXCIsIFwibmV3X3N0clwiOiBcIiAgICBwcml2YXRlIHZvaWQgYnRuU2lnbnVwQWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0blNpZ251cEFjdGlvblBlcmZvcm1lZFxcbiAgICAgICAgLy8gVE9ETyBhZGQgeW91ciBoYW5kbGluZyBjb2RlIGhlcmU6XFxuICAgICAgICBpZiAodmFsaWRhdGVGaWVsZHMoKSkge1xcbiAgICAgICAgICAgIHRyeSB7XFxuICAgICAgICAgICAgICAgIFN1YnNjcmliZXIgc3ViID0gbmV3IFN1YnNjcmliZXIoKTtcXG4gICAgICAgICAgICAgICAgc3ViLnNldEZ1bGxOYW1lKHR4dE5hbWUuZ2V0VGV4dCgpKTtcXG4gICAgICAgICAgICAgICAgc3ViLnNldFVzZXJuYW1lKHR4dFVzZXJOYW1lLmdldFRleHQoKSk7XFxuICAgICAgICAgICAgICAgIHN1Yi5zZXRQYXNzd29yZCh0eHRQYXNzd29yZC5nZXRUZXh0KCkpO1xcbiAgICAgICAgICAgICAgICBzdWIuc2V0Um9sZShERUZBVUxUX1JPTEUpO1xcbiAgICAgICAgICAgICAgICBzdWIuc2V0QWRkcmVzcyh0eHRBZGRyZXNzLmdldFRleHQoKSk7XFxuICAgICAgICAgICAgICAgIHN1Yi5zZXRQaG9uZSh0eHRQaG9uZS5nZXRUZXh0KCkpO1xcbiAgICAgICAgICAgICAgICBzdWIuc2V0Q3JlYXRlX2F0KExvY2FsRGF0ZVRpbWUubm93KCkpO1xcbiAgICAgICAgICAgICAgICBTdWJzY3JpYmVyREFPLmluc2VydChzdWIpO1xcbiAgICAgICAgICAgICAgICBjbGVhcigpO1xcbiAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBleCkge1xcbiAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcXFwiTFxcdTFlZDdpOiBcXFwiICsgZXguZ2V0TWVzc2FnZSgpLCBcXFwiVGhcXHUwMGY0bmcgYlxcdTAwZTFvXFxcIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgfVxcbiAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5TaWdudXBBY3Rpb25QZXJmb3JtZWRcIiwgXCJvbGRfc3RyX3N0YXJ0X2xpbmVfbnVtYmVyXCI6IDI3MCwgXCJvbGRfc3RyX2VuZF9saW5lX251bWJlclwiOiAyODJ9XX0iLCJtY3Bfc2VydmVyX25hbWUiOiIiLCJtY3BfdG9vbF9uYW1lIjoiIn19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiJOb3cgbGV0J3MgYWxzbyB1cGRhdGUgdGhlIFNpZ25VcCBjbGFzcyB0byBoYW5kbGUgdmFsaWRhdGlvbiBiZXR0ZXIgYW5kIHByb3ZpZGUgbW9yZSB1c2VyIGZlZWRiYWNrOlxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiU3VjY2Vzc2Z1bGx5IGVkaXRlZCB0aGUgZmlsZSBzcmMvREFPL1N1YnNjcmliZXJEQU8uamF2YS5cblJlc3VsdCBmb3Igc3RyX3JlcGxhY2UgZm9yIGVudHJ5IHdpdGggaW5kZXggWzBdOlxuUmVwbGFjZW1lbnQgc3VjY2Vzc2Z1bC5cbkVkaXRlZCBzZWN0aW9uIGFmdGVyIElERSBhdXRvLWZvcm1hdHRpbmcgd2FzIGFwcGxpZWQ6XG4gICAgOTFcdCAgICBwdWJsaWMgc3RhdGljIFN1YnNjcmliZXIgZ2V0QnlJZChpbnQgaWQpIHtcbiAgICA5Mlx0ICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oXCJOb3Qgc3VwcG9ydGVkIHlldC5cIik7IC8vIEdlbmVyYXRlZCBmcm9tIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9Db2RlL0dlbmVyYXRlZE1ldGhvZEJvZHlcbiAgICA5M1x0ICAgIH1cbiAgICA5NFx0XG4gICAgOTVcdCAgICBwdWJsaWMgc3RhdGljIExpc3Q8U3Vic2NyaWJlcj4gZ2V0QWxsKCkge1xuICAgIDk2XHQgICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbihcIk5vdCBzdXBwb3J0ZWQgeWV0LlwiKTsgLy8gR2VuZXJhdGVkIGZyb20gbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NvZGUvR2VuZXJhdGVkTWV0aG9kQm9keVxuICAgIDk3XHQgICAgfVxuICAgIDk4XHRcbiAgICA5OVx0ICAgIC8qKlxuICAgMTAwXHQgICAgICogR2VuZXJhdGUgdGhlIG5leHQgYXZhaWxhYmxlIElEIGZvciBhIHRhYmxlXG4gICAxMDFcdCAgICAgKiBAcGFyYW0gY29ubiBEYXRhYmFzZSBjb25uZWN0aW9uXG4gICAxMDJcdCAgICAgKiBAcGFyYW0gdGFibGVOYW1lIE5hbWUgb2YgdGhlIHRhYmxlXG4gICAxMDNcdCAgICAgKiBAcGFyYW0gaWRDb2x1bW5OYW1lIE5hbWUgb2YgdGhlIElEIGNvbHVtblxuICAgMTA0XHQgICAgICogQHJldHVybiBOZXh0IGF2YWlsYWJsZSBJRFxuICAgMTA1XHQgICAgICogQHRocm93cyBFeGNlcHRpb24gSWYgYW4gZXJyb3Igb2NjdXJzXG4gICAxMDZcdCAgICAgKi9cbiAgIDEwN1x0ICAgIHByaXZhdGUgc3RhdGljIGludCBnZW5lcmF0ZU5leHRJZChDb25uZWN0aW9uIGNvbm4sIFN0cmluZyB0YWJsZU5hbWUsIFN0cmluZyBpZENvbHVtbk5hbWUpIHRocm93cyBFeGNlcHRpb24ge1xuICAgMTA4XHQgICAgICAgIGludCBuZXh0SWQgPSAxOyAvLyBEZWZhdWx0IHN0YXJ0aW5nIElEXG4gICAxMDlcdCAgICAgICAgU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuICAgMTEwXHQgICAgICAgIFJlc3VsdFNldCBycyA9IG51bGw7XG4gICAxMTFcdFxuICAgMTEyXHQgICAgICAgIHRyeSB7XG4gICAxMTNcdCAgICAgICAgICAgIHN0bXQgPSBjb25uLmNyZWF0ZVN0YXRlbWVudCgpO1xuICAgMTE0XHQgICAgICAgICAgICBTdHJpbmcgcXVlcnkgPSBcIlNFTEVDVCBNQVgoXCIgKyBpZENvbHVtbk5hbWUgKyBcIikgQVMgbWF4X2lkIEZST00gXCIgKyB0YWJsZU5hbWU7XG4gICAxMTVcdCAgICAgICAgICAgIHJzID0gc3RtdC5leGVjdXRlUXVlcnkocXVlcnkpO1xuICAgMTE2XHRcbiAgIDExN1x0ICAgICAgICAgICAgaWYgKHJzLm5leHQoKSkge1xuICAgMTE4XHQgICAgICAgICAgICAgICAgaW50IG1heElkID0gcnMuZ2V0SW50KFwibWF4X2lkXCIpO1xuICAgMTE5XHQgICAgICAgICAgICAgICAgbmV4dElkID0gbWF4SWQgKyAxO1xuICAgMTIwXHQgICAgICAgICAgICB9XG4gICAxMjFcdCAgICAgICAgfSBmaW5hbGx5IHtcbiAgIDEyMlx0ICAgICAgICAgICAgaWYgKHJzICE9IG51bGwpIHJzLmNsb3NlKCk7XG4gICAxMjNcdCAgICAgICAgICAgIGlmIChzdG10ICE9IG51bGwpIHN0bXQuY2xvc2UoKTtcbiAgIDEyNFx0ICAgICAgICB9XG4gICAxMjVcdFxuICAgMTI2XHQgICAgICAgIHJldHVybiBuZXh0SWQ7XG4gICAxMjdcdCAgICB9XG4gICAxMjhcdH1cbiAgIDEyOVx0XG5cblJldmlldyB0aGUgY2hhbmdlcyBhbmQgbWFrZSBzdXJlIHRoZXkgYXJlIGFzIGV4cGVjdGVkIChjb3JyZWN0IGluZGVudGF0aW9uLCBubyBkdXBsaWNhdGUgbGluZXMsIGV0YykuXG5FZGl0IHRoZSBmaWxlIGFnYWluIGlmIG5lY2Vzc2FyeS5cbiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfMDFXWnY1Ykx3Q1ZkZTJ3V01GaWpiSGF6In19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiRTovSG9jVGFwLzAyX0pBVkEvMDNfUHJvamVjdC9JbnRlcm5ldCBNYW5nZW1lbnQgU3lzdGVtIiwiZm9sZGVyUm9vdCI6IkU6L0hvY1RhcC8wMl9KQVZBLzAzX1Byb2plY3QvSW50ZXJuZXQgTWFuZ2VtZW50IFN5c3RlbSJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2UsImN1cnJlbnRUZXJtaW5hbCI6eyJ0ZXJtaW5hbElkIjoyLCJjdXJyZW50V29ya2luZ0RpcmVjdG9yeSI6IkU6L0hvY1RhcC8wMl9KQVZBLzAzX1Byb2plY3QvSW50ZXJuZXQgTWFuZ2VtZW50IFN5c3RlbSJ9fX1dLCJ0aW1lc3RhbXAiOiIyMDI1LTA1LTExVDA5OjM0OjMzLjA3OVoiLCJyZXNwb25zZV90ZXh0IjoiTm93IGxldCdzIGFsc28gdXBkYXRlIHRoZSBTaWduVXAgY2xhc3MgdG8gaGFuZGxlIHZhbGlkYXRpb24gYmV0dGVyIGFuZCBwcm92aWRlIG1vcmUgdXNlciBmZWVkYmFjazpcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiJjZDNhYzdkOS02ZjUyLTRlZTUtOWJlMC00MWFjOTU0OWFhZGUiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1XzAxNHBieFh2WW9WVUNFWUhuZGp2aVRNRCIsInRvb2xfbmFtZSI6InN0ci1yZXBsYWNlLWVkaXRvciIsImlucHV0X2pzb24iOiJ7XCJjb21tYW5kXCI6IFwic3RyX3JlcGxhY2VcIiwgXCJwYXRoXCI6IFwic3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vU2lnblVwLmphdmFcIiwgXCJzdHJfcmVwbGFjZV9lbnRyaWVzXCI6IFt7XCJvbGRfc3RyXCI6IFwiICAgICAgICByZXR1cm4gdHJ1ZTtcXG4gICAgfVxcbiAgICB9XCIsIFwibmV3X3N0clwiOiBcIiAgICAgICAgcmV0dXJuIHRydWU7XFxuICAgIH1cIiwgXCJvbGRfc3RyX3N0YXJ0X2xpbmVfbnVtYmVyXCI6IDQ5LCBcIm9sZF9zdHJfZW5kX2xpbmVfbnVtYmVyXCI6IDUxfV19IiwibWNwX3NlcnZlcl9uYW1lIjoiIiwibWNwX3Rvb2xfbmFtZSI6IiJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiVGhlcmUgc2VlbXMgdG8gYmUgYW4gZXh0cmEgY2xvc2luZyBicmFjZSBpbiB0aGUgU2lnblVwLmphdmEgZmlsZS4gTGV0J3MgZml4IHRoYXQ6XG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJTdWNjZXNzZnVsbHkgZWRpdGVkIHRoZSBmaWxlIHNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL1NpZ25VcC5qYXZhLlxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZSBmb3IgZW50cnkgd2l0aCBpbmRleCBbMF06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgICAzMVx0ICAgICAgICB0eHRBZGRyZXNzLnNldFRleHQoXCJcIik7XG4gICAgMzJcdCAgICAgICAgdHh0UGhvbmUuc2V0VGV4dChcIlwiKTtcbiAgICAzM1x0ICAgIH1cbiAgICAzNFx0XG4gICAgMzVcdCAgICBwdWJsaWMgYm9vbGVhbiB2YWxpZGF0ZUZpZWxkcygpe1xuICAgIDM2XHQgICAgICAgIFN0cmluZyBuYW1lID0gdHh0TmFtZS5nZXRUZXh0KCk7XG4gICAgMzdcdCAgICAgICAgU3RyaW5nIHVzZXJOYW1lID0gdHh0VXNlck5hbWUuZ2V0VGV4dCgpO1xuICAgIDM4XHQgICAgICAgIFN0cmluZyBwYXNzd29yZCA9IHR4dFBhc3N3b3JkLmdldFRleHQoKTtcbiAgICAzOVx0ICAgICAgICBTdHJpbmcgYWRkcmVzcyA9IHR4dEFkZHJlc3MuZ2V0VGV4dCgpO1xuICAgIDQwXHQgICAgICAgIFN0cmluZyBwaG9uZSA9IHR4dFBob25lLmdldFRleHQoKTtcbiAgICA0MVx0XG4gICAgNDJcdCAgICAgICAgaWYobmFtZS5pc0VtcHR5KCkgfHwgdXNlck5hbWUuaXNFbXB0eSgpIHx8IHBhc3N3b3JkLmlzRW1wdHkoKSB8fCBhZGRyZXNzLmlzRW1wdHkoKSB8fCBwaG9uZS5pc0VtcHR5KCkpe1xuICAgIDQzXHQgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcIlZ1aSBsw7JuZyBraMO0bmcgYuG7jyB0cuG7kW5nIVwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgIDQ0XHQgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgNDVcdCAgICAgICAgfVxuICAgIDQ2XHQgICAgICAgIGVsc2UgaWYocGhvbmUubGVuZ3RoKCkgIT0gMTAgfHwgIXBob25lLm1hdGNoZXMocGhvbmVQYXR0ZXJuKSkge1xuICAgIDQ3XHQgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcIlZ1aSBsw7JuZyBuaOG6rXAgxJHDum5nIMSR4buLbmggZOG6oW5nIHPhu5EgxJFp4buHbiB0aG/huqFpIVwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgIDQ4XHQgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgNDlcdCAgICAgICAgfVxuICAgIDUwXHQgICAgICAgIHJldHVybiB0cnVlO1xuICAgIDUxXHQgICAgfVxuICAgIDUyXHQgICAgfVxuICAgIDUzXHRcbiAgICA1NFx0ICAgIC8qKlxuICAgIDU1XHQgICAgICogVGhpcyBtZXRob2QgaXMgY2FsbGVkIGZyb20gd2l0aGluIHRoZSBjb25zdHJ1Y3RvciB0byBpbml0aWFsaXplIHRoZSBmb3JtLlxuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlIGZvciBlbnRyeSB3aXRoIGluZGV4IFsxXTpcblJlcGxhY2VtZW50IHN1Y2Nlc3NmdWwuXG5FZGl0ZWQgc2VjdGlvbiBhZnRlciBJREUgYXV0by1mb3JtYXR0aW5nIHdhcyBhcHBsaWVkOlxuICAgMjY2XHQgICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxuICAgMjY3XHRcbiAgIDI2OFx0ICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0blJldHVybkFjdGlvblBlcmZvcm1lZFxuICAgMjY5XHRcbiAgIDI3MFx0ICAgIHByaXZhdGUgdm9pZCBidG5TaWdudXBBY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuU2lnbnVwQWN0aW9uUGVyZm9ybWVkXG4gICAyNzFcdCAgICAgICAgLy8gVE9ETyBhZGQgeW91ciBoYW5kbGluZyBjb2RlIGhlcmU6XG4gICAyNzJcdCAgICAgICAgaWYgKHZhbGlkYXRlRmllbGRzKCkpIHtcbiAgIDI3M1x0ICAgICAgICAgICAgdHJ5IHtcbiAgIDI3NFx0ICAgICAgICAgICAgICAgIFN1YnNjcmliZXIgc3ViID0gbmV3IFN1YnNjcmliZXIoKTtcbiAgIDI3NVx0ICAgICAgICAgICAgICAgIHN1Yi5zZXRGdWxsTmFtZSh0eHROYW1lLmdldFRleHQoKSk7XG4gICAyNzZcdCAgICAgICAgICAgICAgICBzdWIuc2V0VXNlcm5hbWUodHh0VXNlck5hbWUuZ2V0VGV4dCgpKTtcbiAgIDI3N1x0ICAgICAgICAgICAgICAgIHN1Yi5zZXRQYXNzd29yZCh0eHRQYXNzd29yZC5nZXRUZXh0KCkpO1xuICAgMjc4XHQgICAgICAgICAgICAgICAgc3ViLnNldFJvbGUoREVGQVVMVF9ST0xFKTtcbiAgIDI3OVx0ICAgICAgICAgICAgICAgIHN1Yi5zZXRBZGRyZXNzKHR4dEFkZHJlc3MuZ2V0VGV4dCgpKTtcbiAgIDI4MFx0ICAgICAgICAgICAgICAgIHN1Yi5zZXRQaG9uZSh0eHRQaG9uZS5nZXRUZXh0KCkpO1xuICAgMjgxXHQgICAgICAgICAgICAgICAgc3ViLnNldENyZWF0ZV9hdChMb2NhbERhdGVUaW1lLm5vdygpKTtcbiAgIDI4Mlx0ICAgICAgICAgICAgICAgIFN1YnNjcmliZXJEQU8uaW5zZXJ0KHN1Yik7XG4gICAyODNcdCAgICAgICAgICAgICAgICBjbGVhcigpO1xuICAgMjg0XHQgICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZXgpIHtcbiAgIDI4NVx0ICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwiTOG7l2k6IFwiICsgZXguZ2V0TWVzc2FnZSgpLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgMjg2XHQgICAgICAgICAgICB9XG4gICAyODdcdCAgICAgICAgfVxuICAgMjg4XHQgICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuU2lnbnVwQWN0aW9uUGVyZm9ybWVkXG4gICAyODlcdFxuICAgMjkwXHQgICAgcHJpdmF0ZSB2b2lkIHR4dE5hbWVLZXlSZWxlYXNlZChqYXZhLmF3dC5ldmVudC5LZXlFdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF90eHROYW1lS2V5UmVsZWFzZWRcbiAgIDI5MVx0ICAgICAgICAvLyBUT0RPIGFkZCB5b3VyIGhhbmRsaW5nIGNvZGUgaGVyZTpcbiAgIDI5Mlx0ICAgICAgICB2YWxpZGF0ZUZpZWxkcygpO1xuXG5SZXZpZXcgdGhlIGNoYW5nZXMgYW5kIG1ha2Ugc3VyZSB0aGV5IGFyZSBhcyBleHBlY3RlZCAoY29ycmVjdCBpbmRlbnRhdGlvbiwgbm8gZHVwbGljYXRlIGxpbmVzLCBldGMpLlxuRWRpdCB0aGUgZmlsZSBhZ2FpbiBpZiBuZWNlc3NhcnkuXG4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1XzAxVEg5djN3U205RDZ2SDk4ZGc0ODdnViJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkU6L0hvY1RhcC8wMl9KQVZBLzAzX1Byb2plY3QvSW50ZXJuZXQgTWFuZ2VtZW50IFN5c3RlbSIsImZvbGRlclJvb3QiOiJFOi9Ib2NUYXAvMDJfSkFWQS8wM19Qcm9qZWN0L0ludGVybmV0IE1hbmdlbWVudCBTeXN0ZW0ifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlLCJjdXJyZW50VGVybWluYWwiOnsidGVybWluYWxJZCI6MiwiY3VycmVudFdvcmtpbmdEaXJlY3RvcnkiOiJFOi9Ib2NUYXAvMDJfSkFWQS8wM19Qcm9qZWN0L0ludGVybmV0IE1hbmdlbWVudCBTeXN0ZW0ifX19XSwidGltZXN0YW1wIjoiMjAyNS0wNS0xMVQwOTozNDo0OS41MzNaIiwicmVzcG9uc2VfdGV4dCI6IlRoZXJlIHNlZW1zIHRvIGJlIGFuIGV4dHJhIGNsb3NpbmcgYnJhY2UgaW4gdGhlIFNpZ25VcC5qYXZhIGZpbGUuIExldCdzIGZpeCB0aGF0OlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6ImY1NmU4ZDljLWU0MTMtNDU4Yy1iYzZhLTlmNmZkNWVlNjQxNiIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IiMjIFN1bW1hcnkgb2YgQ2hhbmdlc1xuXG5JJ3ZlIGZpeGVkIHRoZSBmb3JlaWduIGtleSBjb25zdHJhaW50IGVycm9yIGJ5IG1ha2luZyB0aGUgZm9sbG93aW5nIGNoYW5nZXM6XG5cbjEuICoqSW4gU3Vic2NyaWJlckRBTy5qYXZhKio6XG4gICAtIEFkZGVkIGEgYGdlbmVyYXRlTmV4dElkYCBtZXRob2QgdG8gYXV0b21hdGljYWxseSBnZW5lcmF0ZSB1bmlxdWUgSURzIGZvciBib3RoIFVTRVIgYW5kIFNVQlNDUklCRVIgdGFibGVzXG4gICAtIE1vZGlmaWVkIHRoZSBgaW5zZXJ0YCBtZXRob2QgdG86XG4gICAgIC0gR2VuZXJhdGUgYW5kIHNldCB1c2VyX2lkIGFuZCBzdWJzY3JpYmVyX2lkIGF1dG9tYXRpY2FsbHlcbiAgICAgLSBJbnNlcnQgaW50byBVU0VSIHRhYmxlIGZpcnN0LCB0aGVuIFNVQlNDUklCRVIgdGFibGUgd2l0aCB0aGUgc2FtZSB1c2VyX2lkXG4gICAgIC0gQWRkZWQgYmV0dGVyIGVycm9yIGhhbmRsaW5nIGFuZCB1c2VyIGZlZWRiYWNrXG4gICAgIC0gUHJvcGVybHkgbWFuYWdlIGRhdGFiYXNlIHJlc291cmNlc1xuXG4yLiAqKkluIFNpZ25VcC5qYXZhKio6XG4gICAtIEltcHJvdmVkIHRoZSBgdmFsaWRhdGVGaWVsZHNgIG1ldGhvZCB0bzpcbiAgICAgLSBSZXR1cm4gYSBib29sZWFuIHZhbHVlIHRvIGluZGljYXRlIHZhbGlkYXRpb24gc3VjY2Vzcy9mYWlsdXJlXG4gICAgIC0gRml4IHRoZSBsb2dpYyBmb3IgZW1wdHkgZmllbGQgY2hlY2tpbmcgKHVzaW5nIE9SIGluc3RlYWQgb2YgQU5EKVxuICAgICAtIEZpeCB0aGUgcGhvbmUgdmFsaWRhdGlvbiBsb2dpY1xuICAgLSBFbmhhbmNlZCB0aGUgYGJ0blNpZ251cEFjdGlvblBlcmZvcm1lZGAgbWV0aG9kIHRvOlxuICAgICAtIE9ubHkgcHJvY2VlZCB3aXRoIHNpZ251cCBpZiB2YWxpZGF0aW9uIHBhc3Nlc1xuICAgICAtIEFkZCB0cnktY2F0Y2ggZm9yIGJldHRlciBlcnJvciBoYW5kbGluZ1xuXG4jIyBFeHBsYW5hdGlvbiBvZiB0aGUgRml4XG5cblRoZSByb290IGNhdXNlIG9mIHRoZSBlcnJvciB3YXMgdGhhdCB3aGVuIGNyZWF0aW5nIGEgbmV3IFN1YnNjcmliZXIsIHRoZSB1c2VyX2lkIHdhcyBub3QgYmVpbmcgc2V0IGJlZm9yZSBpbnNlcnRpbmcgaW50byB0aGUgZGF0YWJhc2UuIFRoZSBmb3JlaWduIGtleSBjb25zdHJhaW50IHJlcXVpcmVzIHRoYXQgdGhlIHVzZXJfaWQgaW4gdGhlIFNVQlNDUklCRVIgdGFibGUgbXVzdCBleGlzdCBpbiB0aGUgVVNFUiB0YWJsZS5cblxuVGhlIHNvbHV0aW9uIGF1dG9tYXRpY2FsbHkgZ2VuZXJhdGVzIElEcyBmb3IgYm90aCB0YWJsZXMgYW5kIGVuc3VyZXMgdGhhdCB0aGUgVVNFUiByZWNvcmQgaXMgaW5zZXJ0ZWQgZmlyc3QsIGZvbGxvd2VkIGJ5IHRoZSBTVUJTQ1JJQkVSIHJlY29yZCB3aXRoIHRoZSBzYW1lIHVzZXJfaWQuIFRoaXMgbWFpbnRhaW5zIHRoZSBmb3JlaWduIGtleSByZWxhdGlvbnNoaXAgYW5kIHByZXZlbnRzIHRoZSBjb25zdHJhaW50IHZpb2xhdGlvbi5cblxuQWRkaXRpb25hbGx5LCBJJ3ZlIGltcHJvdmVkIHRoZSB2YWxpZGF0aW9uIGFuZCBlcnJvciBoYW5kbGluZyB0byBwcm92aWRlIGJldHRlciBmZWVkYmFjayB0byB0aGUgdXNlciBhbmQgcHJldmVudCBpbnZhbGlkIGRhdGEgZnJvbSBiZWluZyBzdWJtaXR0ZWQuXG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJTdWNjZXNzZnVsbHkgZWRpdGVkIHRoZSBmaWxlIHNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL1NpZ25VcC5qYXZhLlxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZSBmb3IgZW50cnkgd2l0aCBpbmRleCBbMF06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgICA0Nlx0ICAgICAgICBlbHNlIGlmKHBob25lLmxlbmd0aCgpICE9IDEwIHx8ICFwaG9uZS5tYXRjaGVzKHBob25lUGF0dGVybikpIHtcbiAgICA0N1x0ICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXCJWdWkgbMOybmcgbmjhuq1wIMSRw7puZyDEkeG7i25oIGThuqFuZyBz4buRIMSRaeG7h24gdGhv4bqhaSFcIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgICA0OFx0ICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIDQ5XHQgICAgICAgIH1cbiAgICA1MFx0ICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICA1MVx0ICAgIH1cbiAgICA1Mlx0XG4gICAgNTNcdCAgICAvKipcbiAgICA1NFx0ICAgICAqIFRoaXMgbWV0aG9kIGlzIGNhbGxlZCBmcm9tIHdpdGhpbiB0aGUgY29uc3RydWN0b3IgdG8gaW5pdGlhbGl6ZSB0aGUgZm9ybS5cbiAgICA1NVx0ICAgICAqIFdBUk5JTkc6IERvIE5PVCBtb2RpZnkgdGhpcyBjb2RlLiBUaGUgY29udGVudCBvZiB0aGlzIG1ldGhvZCBpcyBhbHdheXNcblxuUmV2aWV3IHRoZSBjaGFuZ2VzIGFuZCBtYWtlIHN1cmUgdGhleSBhcmUgYXMgZXhwZWN0ZWQgKGNvcnJlY3QgaW5kZW50YXRpb24sIG5vIGR1cGxpY2F0ZSBsaW5lcywgZXRjKS5cbkVkaXQgdGhlIGZpbGUgYWdhaW4gaWYgbmVjZXNzYXJ5LlxuIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV8wMTRwYnhYdllvVlVDRVlIbmRqdmlUTUQifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJFOi9Ib2NUYXAvMDJfSkFWQS8wM19Qcm9qZWN0L0ludGVybmV0IE1hbmdlbWVudCBTeXN0ZW0iLCJmb2xkZXJSb290IjoiRTovSG9jVGFwLzAyX0pBVkEvMDNfUHJvamVjdC9JbnRlcm5ldCBNYW5nZW1lbnQgU3lzdGVtIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZSwiY3VycmVudFRlcm1pbmFsIjp7InRlcm1pbmFsSWQiOjIsImN1cnJlbnRXb3JraW5nRGlyZWN0b3J5IjoiRTovSG9jVGFwLzAyX0pBVkEvMDNfUHJvamVjdC9JbnRlcm5ldCBNYW5nZW1lbnQgU3lzdGVtIn19fV0sInRpbWVzdGFtcCI6IjIwMjUtMDUtMTFUMDk6MzQ6NTQuODE2WiIsInJlc3BvbnNlX3RleHQiOiIjIyBTdW1tYXJ5IG9mIENoYW5nZXNcblxuSSd2ZSBmaXhlZCB0aGUgZm9yZWlnbiBrZXkgY29uc3RyYWludCBlcnJvciBieSBtYWtpbmcgdGhlIGZvbGxvd2luZyBjaGFuZ2VzOlxuXG4xLiAqKkluIFN1YnNjcmliZXJEQU8uamF2YSoqOlxuICAgLSBBZGRlZCBhIGBnZW5lcmF0ZU5leHRJZGAgbWV0aG9kIHRvIGF1dG9tYXRpY2FsbHkgZ2VuZXJhdGUgdW5pcXVlIElEcyBmb3IgYm90aCBVU0VSIGFuZCBTVUJTQ1JJQkVSIHRhYmxlc1xuICAgLSBNb2RpZmllZCB0aGUgYGluc2VydGAgbWV0aG9kIHRvOlxuICAgICAtIEdlbmVyYXRlIGFuZCBzZXQgdXNlcl9pZCBhbmQgc3Vic2NyaWJlcl9pZCBhdXRvbWF0aWNhbGx5XG4gICAgIC0gSW5zZXJ0IGludG8gVVNFUiB0YWJsZSBmaXJzdCwgdGhlbiBTVUJTQ1JJQkVSIHRhYmxlIHdpdGggdGhlIHNhbWUgdXNlcl9pZFxuICAgICAtIEFkZGVkIGJldHRlciBlcnJvciBoYW5kbGluZyBhbmQgdXNlciBmZWVkYmFja1xuICAgICAtIFByb3Blcmx5IG1hbmFnZSBkYXRhYmFzZSByZXNvdXJjZXNcblxuMi4gKipJbiBTaWduVXAuamF2YSoqOlxuICAgLSBJbXByb3ZlZCB0aGUgYHZhbGlkYXRlRmllbGRzYCBtZXRob2QgdG86XG4gICAgIC0gUmV0dXJuIGEgYm9vbGVhbiB2YWx1ZSB0byBpbmRpY2F0ZSB2YWxpZGF0aW9uIHN1Y2Nlc3MvZmFpbHVyZVxuICAgICAtIEZpeCB0aGUgbG9naWMgZm9yIGVtcHR5IGZpZWxkIGNoZWNraW5nICh1c2luZyBPUiBpbnN0ZWFkIG9mIEFORClcbiAgICAgLSBGaXggdGhlIHBob25lIHZhbGlkYXRpb24gbG9naWNcbiAgIC0gRW5oYW5jZWQgdGhlIGBidG5TaWdudXBBY3Rpb25QZXJmb3JtZWRgIG1ldGhvZCB0bzpcbiAgICAgLSBPbmx5IHByb2NlZWQgd2l0aCBzaWdudXAgaWYgdmFsaWRhdGlvbiBwYXNzZXNcbiAgICAgLSBBZGQgdHJ5LWNhdGNoIGZvciBiZXR0ZXIgZXJyb3IgaGFuZGxpbmdcblxuIyMgRXhwbGFuYXRpb24gb2YgdGhlIEZpeFxuXG5UaGUgcm9vdCBjYXVzZSBvZiB0aGUgZXJyb3Igd2FzIHRoYXQgd2hlbiBjcmVhdGluZyBhIG5ldyBTdWJzY3JpYmVyLCB0aGUgdXNlcl9pZCB3YXMgbm90IGJlaW5nIHNldCBiZWZvcmUgaW5zZXJ0aW5nIGludG8gdGhlIGRhdGFiYXNlLiBUaGUgZm9yZWlnbiBrZXkgY29uc3RyYWludCByZXF1aXJlcyB0aGF0IHRoZSB1c2VyX2lkIGluIHRoZSBTVUJTQ1JJQkVSIHRhYmxlIG11c3QgZXhpc3QgaW4gdGhlIFVTRVIgdGFibGUuXG5cblRoZSBzb2x1dGlvbiBhdXRvbWF0aWNhbGx5IGdlbmVyYXRlcyBJRHMgZm9yIGJvdGggdGFibGVzIGFuZCBlbnN1cmVzIHRoYXQgdGhlIFVTRVIgcmVjb3JkIGlzIGluc2VydGVkIGZpcnN0LCBmb2xsb3dlZCBieSB0aGUgU1VCU0NSSUJFUiByZWNvcmQgd2l0aCB0aGUgc2FtZSB1c2VyX2lkLiBUaGlzIG1haW50YWlucyB0aGUgZm9yZWlnbiBrZXkgcmVsYXRpb25zaGlwIGFuZCBwcmV2ZW50cyB0aGUgY29uc3RyYWludCB2aW9sYXRpb24uXG5cbkFkZGl0aW9uYWxseSwgSSd2ZSBpbXByb3ZlZCB0aGUgdmFsaWRhdGlvbiBhbmQgZXJyb3IgaGFuZGxpbmcgdG8gcHJvdmlkZSBiZXR0ZXIgZmVlZGJhY2sgdG8gdGhlIHVzZXIgYW5kIHByZXZlbnQgaW52YWxpZCBkYXRhIGZyb20gYmVpbmcgc3VibWl0dGVkLlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJyZXF1ZXN0X2lkIjoiMWM5NTMwMzctMWJjNi00ZjU0LWI1YjEtNzczNjE1ZDhiYmEyIiwidXVpZCI6IjdmYWQwODQxLTQ3MDgtNDY1NC1iNzNhLTYwODUwNDhiNTJlMSIsImNoYXRJdGVtVHlwZSI6ImFnZW50aWMtY2hlY2twb2ludC1kZWxpbWl0ZXIiLCJzdGF0dXMiOiJzdWNjZXNzIiwiZnJvbVRpbWVzdGFtcCI6MTc0Njk1NjA1Nzk0NSwidG9UaW1lc3RhbXAiOjE3NDY5NTYxMDU4MjUsInNlZW5fc3RhdGUiOiJzZWVuIn0seyJyZXF1ZXN0X2lkIjoiMjgyZjNiZTQtNDA5OC00YjkyLTgyZWItOTM4NjUyZDFjOTQ1Iiwic3RhdHVzIjoiY2FuY2VsbGVkIiwiY2hhdEl0ZW1UeXBlIjoiYWdlbnRpYy10dXJuLWRlbGltaXRlciJ9LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiI0NDE1NWZkNy1iY2YwLTRmNTQtYjM2YS0yM2YzNWU4OTY0ZjYiLCJyZXF1ZXN0X21lc3NhZ2UiOiJ1c2UgRGJPcGVyYXRpb25zIGNsYXNzIiwicmljaF90ZXh0X2pzb25fcmVwciI6eyJ0eXBlIjoiZG9jIiwiY29udGVudCI6W3sidHlwZSI6InBhcmFncmFwaCIsImNvbnRlbnQiOlt7InR5cGUiOiJ0ZXh0IiwidGV4dCI6InVzZSBEYk9wZXJhdGlvbnMgY2xhc3MifV19XX0sIm1lbnRpb25lZF9pdGVtcyI6W10sInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfMDFIdW1rcVE0OWs5bkdzbnhNSkwxdldVIiwidG9vbF9uYW1lIjoic3RyLXJlcGxhY2UtZWRpdG9yIiwiaW5wdXRfanNvbiI6IntcImNvbW1hbmRcIjogXCJzdHJfcmVwbGFjZVwiLCBcInBhdGhcIjogXCJzcmMvREFPL0RiT3BlcmF0aW9ucy5qYXZhXCIsIFwic3RyX3JlcGxhY2VfZW50cmllc1wiOiBbe1wib2xkX3N0clwiOiBcInBhY2thZ2UgREFPO1xcblxcbmltcG9ydCBqYXZhLnNxbC5Db25uZWN0aW9uO1xcbmltcG9ydCBqYXZhLnNxbC5TdGF0ZW1lbnQ7XFxuaW1wb3J0IGphdmF4LnN3aW5nLkpPcHRpb25QYW5lO1wiLCBcIm5ld19zdHJcIjogXCJwYWNrYWdlIERBTztcXG5cXG5pbXBvcnQgamF2YS5zcWwuQ29ubmVjdGlvbjtcXG5pbXBvcnQgamF2YS5zcWwuUHJlcGFyZWRTdGF0ZW1lbnQ7XFxuaW1wb3J0IGphdmEuc3FsLlJlc3VsdFNldDtcXG5pbXBvcnQgamF2YS5zcWwuU3RhdGVtZW50O1xcbmltcG9ydCBqYXZheC5zd2luZy5KT3B0aW9uUGFuZTtcIiwgXCJvbGRfc3RyX3N0YXJ0X2xpbmVfbnVtYmVyXCI6IDEsIFwib2xkX3N0cl9lbmRfbGluZV9udW1iZXJcIjogNX0sIHtcIm9sZF9zdHJcIjogXCJwdWJsaWMgY2xhc3MgRGJPcGVyYXRpb25zIHtcXG4gICAgcHVibGljIHN0YXRpYyB2b2lkIHNldERhdGFPckRlbGV0ZShTdHJpbmcgcXVlcnksIFN0cmluZyBtc2cpIHtcXG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XFxuICAgICAgICBTdGF0ZW1lbnQgc3QgPSBudWxsO1xcbiAgICAgICAgdHJ5IHtcXG4gICAgICAgICAgICBjb25uID0gQ29ubmVjdGlvblByb3ZpZGVyLmdldENvbm4oKTtcXG4gICAgICAgICAgICBzdCA9IGNvbm4uY3JlYXRlU3RhdGVtZW50KCk7XFxuICAgICAgICAgICAgc3QuZXhlY3V0ZVVwZGF0ZShxdWVyeSk7XFxuICAgICAgICAgICAgXFxuICAgICAgICAgICAgaWYoIW1zZy5lcXVhbHMoXFxcIlxcXCIpKSB7XFxuICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIG1zZywgXFxcIk1lc3NhZ2VcXFwiLCBKT3B0aW9uUGFuZS5JTkZPUk1BVElPTl9NRVNTQUdFKTtcXG4gICAgICAgICAgICB9XFxuICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZXgpIHtcXG4gICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBleCwgXFxcIk1lc3NhZ2VcXFwiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcXG4gICAgICAgIH0gZmluYWxseSB7XFxuICAgICAgICAgICAgdHJ5IHtcXG4gICAgICAgICAgICAgICAgaWYgKHN0ICE9IG51bGwpIHN0LmNsb3NlKCk7XFxuICAgICAgICAgICAgICAgIGlmIChjb25uICE9IG51bGwpIGNvbm4uY2xvc2UoKTtcXG4gICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xcbiAgICAgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgIH1cXG4gICAgfVxcbn1cIiwgXCJuZXdfc3RyXCI6IFwicHVibGljIGNsYXNzIERiT3BlcmF0aW9ucyB7XFxuICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBzZXREYXRhT3JEZWxldGUoU3RyaW5nIHF1ZXJ5LCBTdHJpbmcgbXNnKSB7XFxuICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xcbiAgICAgICAgU3RhdGVtZW50IHN0ID0gbnVsbDtcXG4gICAgICAgIHRyeSB7XFxuICAgICAgICAgICAgY29ubiA9IENvbm5lY3Rpb25Qcm92aWRlci5nZXRDb25uKCk7XFxuICAgICAgICAgICAgc3QgPSBjb25uLmNyZWF0ZVN0YXRlbWVudCgpO1xcbiAgICAgICAgICAgIHN0LmV4ZWN1dGVVcGRhdGUocXVlcnkpO1xcbiAgICAgICAgICAgIFxcbiAgICAgICAgICAgIGlmKCFtc2cuZXF1YWxzKFxcXCJcXFwiKSkge1xcbiAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBtc2csIFxcXCJNZXNzYWdlXFxcIiwgSk9wdGlvblBhbmUuSU5GT1JNQVRJT05fTUVTU0FHRSk7XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGV4KSB7XFxuICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgZXgsIFxcXCJNZXNzYWdlXFxcIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XFxuICAgICAgICB9IGZpbmFsbHkge1xcbiAgICAgICAgICAgIHRyeSB7XFxuICAgICAgICAgICAgICAgIGlmIChzdCAhPSBudWxsKSBzdC5jbG9zZSgpO1xcbiAgICAgICAgICAgICAgICBpZiAoY29ubiAhPSBudWxsKSBjb25uLmNsb3NlKCk7XFxuICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcXG4gICAgICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcXG4gICAgICAgICAgICB9XFxuICAgICAgICB9XFxuICAgIH1cXG4gICAgXFxuICAgIC8qKlxcbiAgICAgKiBHZW5lcmF0ZSB0aGUgbmV4dCBhdmFpbGFibGUgSUQgZm9yIGEgdGFibGVcXG4gICAgICogQHBhcmFtIHRhYmxlTmFtZSBOYW1lIG9mIHRoZSB0YWJsZVxcbiAgICAgKiBAcGFyYW0gaWRDb2x1bW5OYW1lIE5hbWUgb2YgdGhlIElEIGNvbHVtblxcbiAgICAgKiBAcmV0dXJuIE5leHQgYXZhaWxhYmxlIElEXFxuICAgICAqL1xcbiAgICBwdWJsaWMgc3RhdGljIGludCBnZXROZXh0SWQoU3RyaW5nIHRhYmxlTmFtZSwgU3RyaW5nIGlkQ29sdW1uTmFtZSkge1xcbiAgICAgICAgaW50IG5leHRJZCA9IDE7IC8vIERlZmF1bHQgc3RhcnRpbmcgSURcXG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XFxuICAgICAgICBTdGF0ZW1lbnQgc3RtdCA9IG51bGw7XFxuICAgICAgICBSZXN1bHRTZXQgcnMgPSBudWxsO1xcbiAgICAgICAgXFxuICAgICAgICB0cnkge1xcbiAgICAgICAgICAgIGNvbm4gPSBDb25uZWN0aW9uUHJvdmlkZXIuZ2V0Q29ubigpO1xcbiAgICAgICAgICAgIHN0bXQgPSBjb25uLmNyZWF0ZVN0YXRlbWVudCgpO1xcbiAgICAgICAgICAgIFN0cmluZyBxdWVyeSA9IFxcXCJTRUxFQ1QgTUFYKFxcXCIgKyBpZENvbHVtbk5hbWUgKyBcXFwiKSBBUyBtYXhfaWQgRlJPTSBcXFwiICsgdGFibGVOYW1lO1xcbiAgICAgICAgICAgIHJzID0gc3RtdC5leGVjdXRlUXVlcnkocXVlcnkpO1xcbiAgICAgICAgICAgIFxcbiAgICAgICAgICAgIGlmIChycy5uZXh0KCkpIHtcXG4gICAgICAgICAgICAgICAgaW50IG1heElkID0gcnMuZ2V0SW50KFxcXCJtYXhfaWRcXFwiKTtcXG4gICAgICAgICAgICAgICAgbmV4dElkID0gbWF4SWQgKyAxO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XFxuICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgZSwgXFxcIkVycm9yXFxcIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XFxuICAgICAgICB9IGZpbmFsbHkge1xcbiAgICAgICAgICAgIHRyeSB7XFxuICAgICAgICAgICAgICAgIGlmIChycyAhPSBudWxsKSBycy5jbG9zZSgpO1xcbiAgICAgICAgICAgICAgICBpZiAoc3RtdCAhPSBudWxsKSBzdG10LmNsb3NlKCk7XFxuICAgICAgICAgICAgICAgIGlmIChjb25uICE9IG51bGwpIGNvbm4uY2xvc2UoKTtcXG4gICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xcbiAgICAgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgIH1cXG4gICAgICAgIFxcbiAgICAgICAgcmV0dXJuIG5leHRJZDtcXG4gICAgfVxcbiAgICBcXG4gICAgLyoqXFxuICAgICAqIEV4ZWN1dGUgYSB0cmFuc2FjdGlvbiB3aXRoIG11bHRpcGxlIFNRTCBvcGVyYXRpb25zXFxuICAgICAqIEBwYXJhbSBvcGVyYXRpb25zIEFycmF5IG9mIFNRTCBvcGVyYXRpb25zIHRvIGV4ZWN1dGVcXG4gICAgICogQHBhcmFtIHN1Y2Nlc3NNc2cgTWVzc2FnZSB0byBkaXNwbGF5IG9uIHN1Y2Nlc3NcXG4gICAgICogQHJldHVybiB0cnVlIGlmIHRyYW5zYWN0aW9uIHdhcyBzdWNjZXNzZnVsLCBmYWxzZSBvdGhlcndpc2VcXG4gICAgICovXFxuICAgIHB1YmxpYyBzdGF0aWMgYm9vbGVhbiBleGVjdXRlVHJhbnNhY3Rpb24oU3FsT3BlcmF0aW9uW10gb3BlcmF0aW9ucywgU3RyaW5nIHN1Y2Nlc3NNc2cpIHtcXG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XFxuICAgICAgICBib29sZWFuIHN1Y2Nlc3MgPSBmYWxzZTtcXG4gICAgICAgIFxcbiAgICAgICAgdHJ5IHtcXG4gICAgICAgICAgICBjb25uID0gQ29ubmVjdGlvblByb3ZpZGVyLmdldENvbm4oKTtcXG4gICAgICAgICAgICBjb25uLnNldEF1dG9Db21taXQoZmFsc2UpO1xcbiAgICAgICAgICAgIFxcbiAgICAgICAgICAgIC8vIEV4ZWN1dGUgYWxsIG9wZXJhdGlvbnNcXG4gICAgICAgICAgICBmb3IgKFNxbE9wZXJhdGlvbiBvcGVyYXRpb24gOiBvcGVyYXRpb25zKSB7XFxuICAgICAgICAgICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHBzID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KG9wZXJhdGlvbi5nZXRTcWwoKSk7XFxuICAgICAgICAgICAgICAgIG9wZXJhdGlvbi5zZXRQYXJhbWV0ZXJzKHBzKTtcXG4gICAgICAgICAgICAgICAgcHMuZXhlY3V0ZVVwZGF0ZSgpO1xcbiAgICAgICAgICAgICAgICBwcy5jbG9zZSgpO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgICAgICBcXG4gICAgICAgICAgICAvLyBDb21taXQgdHJhbnNhY3Rpb25cXG4gICAgICAgICAgICBjb25uLmNvbW1pdCgpO1xcbiAgICAgICAgICAgIHN1Y2Nlc3MgPSB0cnVlO1xcbiAgICAgICAgICAgIFxcbiAgICAgICAgICAgIC8vIFNob3cgc3VjY2VzcyBtZXNzYWdlIGlmIHByb3ZpZGVkXFxuICAgICAgICAgICAgaWYgKHN1Y2Nlc3NNc2cgIT0gbnVsbCAmJiAhc3VjY2Vzc01zZy5pc0VtcHR5KCkpIHtcXG4gICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgc3VjY2Vzc01zZywgXFxcIlN1Y2Nlc3NcXFwiLCBKT3B0aW9uUGFuZS5JTkZPUk1BVElPTl9NRVNTQUdFKTtcXG4gICAgICAgICAgICB9XFxuICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xcbiAgICAgICAgICAgIC8vIFJvbGxiYWNrIHRyYW5zYWN0aW9uIG9uIGVycm9yXFxuICAgICAgICAgICAgdHJ5IHtcXG4gICAgICAgICAgICAgICAgaWYgKGNvbm4gIT0gbnVsbCkgY29ubi5yb2xsYmFjaygpO1xcbiAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiByb2xsYmFja0V4KSB7XFxuICAgICAgICAgICAgICAgIHJvbGxiYWNrRXgucHJpbnRTdGFja1RyYWNlKCk7XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgICAgIFxcbiAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFxcXCJFcnJvcjogXFxcIiArIGUuZ2V0TWVzc2FnZSgpLCBcXFwiRXJyb3JcXFwiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcXG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xcbiAgICAgICAgfSBmaW5hbGx5IHtcXG4gICAgICAgICAgICB0cnkge1xcbiAgICAgICAgICAgICAgICBpZiAoY29ubiAhPSBudWxsKSB7XFxuICAgICAgICAgICAgICAgICAgICBjb25uLnNldEF1dG9Db21taXQodHJ1ZSk7XFxuICAgICAgICAgICAgICAgICAgICBjb25uLmNsb3NlKCk7XFxuICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xcbiAgICAgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgIH1cXG4gICAgICAgIFxcbiAgICAgICAgcmV0dXJuIHN1Y2Nlc3M7XFxuICAgIH1cXG4gICAgXFxuICAgIC8qKlxcbiAgICAgKiBJbnRlcmZhY2UgZm9yIFNRTCBvcGVyYXRpb25zIHdpdGggcHJlcGFyZWQgc3RhdGVtZW50c1xcbiAgICAgKi9cXG4gICAgcHVibGljIGludGVyZmFjZSBTcWxPcGVyYXRpb24ge1xcbiAgICAgICAgU3RyaW5nIGdldFNxbCgpO1xcbiAgICAgICAgdm9pZCBzZXRQYXJhbWV0ZXJzKFByZXBhcmVkU3RhdGVtZW50IHBzKSB0aHJvd3MgRXhjZXB0aW9uO1xcbiAgICB9XFxufVwiLCBcIm9sZF9zdHJfc3RhcnRfbGluZV9udW1iZXJcIjogNywgXCJvbGRfc3RyX2VuZF9saW5lX251bWJlclwiOiAyOX1dfSIsIm1jcF9zZXJ2ZXJfbmFtZSI6IiIsIm1jcF90b29sX25hbWUiOiIifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IkknbGwgaGVscCB5b3UgbW9kaWZ5IHRoZSBzb2x1dGlvbiB0byB1c2UgdGhlIERiT3BlcmF0aW9ucyBjbGFzcyBmb3IgZGF0YWJhc2Ugb3BlcmF0aW9ucy4gVGhpcyB3aWxsIG1ha2UgdGhlIGNvZGUgbW9yZSBjb25zaXN0ZW50IHdpdGggdGhlIHJlc3Qgb2YgdGhlIGFwcGxpY2F0aW9uLlxuXG5MZXQncyBleGFtaW5lIHRoZSBEYk9wZXJhdGlvbnMgY2xhc3MgZmlyc3QgdG8gdW5kZXJzdGFuZCBob3cgaXQncyB1c2VkOlxuXG48YXVnbWVudF9jb2RlX3NuaXBwZXQgcGF0aD1cInNyYy9EQU8vRGJPcGVyYXRpb25zLmphdmFcIiBtb2RlPVwiRVhDRVJQVFwiPlxuYGBgamF2YVxucGFja2FnZSBEQU87XG5cbmltcG9ydCBqYXZhLnNxbC5Db25uZWN0aW9uO1xuaW1wb3J0IGphdmEuc3FsLlN0YXRlbWVudDtcbmltcG9ydCBqYXZheC5zd2luZy5KT3B0aW9uUGFuZTtcblxucHVibGljIGNsYXNzIERiT3BlcmF0aW9ucyB7XG4gICAgcHVibGljIHN0YXRpYyB2b2lkIHNldERhdGFPckRlbGV0ZShTdHJpbmcgcXVlcnksIFN0cmluZyBtc2cpIHtcbiAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcbiAgICAgICAgU3RhdGVtZW50IHN0ID0gbnVsbDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbm4gPSBDb25uZWN0aW9uUHJvdmlkZXIuZ2V0Q29ubigpO1xuICAgICAgICAgICAgc3QgPSBjb25uLmNyZWF0ZVN0YXRlbWVudCgpO1xuICAgICAgICAgICAgc3QuZXhlY3V0ZVVwZGF0ZShxdWVyeSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmKCFtc2cuZXF1YWxzKFwiXCIpKSB7XG4gICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgbXNnLCBcIk1lc3NhZ2VcIiwgSk9wdGlvblBhbmUuSU5GT1JNQVRJT05fTUVTU0FHRSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBleCkge1xuICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgZXgsIFwiTWVzc2FnZVwiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKHN0ICE9IG51bGwpIHN0LmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgaWYgKGNvbm4gIT0gbnVsbCkgY29ubi5jbG9zZSgpO1xuICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuYGBgXG48L2F1Z21lbnRfY29kZV9zbmlwcGV0PlxuXG5JIHNlZSB0aGF0IHRoZSBEYk9wZXJhdGlvbnMgY2xhc3MgaGFzIGEgbWV0aG9kIGZvciBleGVjdXRpbmcgU1FMIHN0YXRlbWVudHMsIGJ1dCBpdCBkb2Vzbid0IHN1cHBvcnQgcHJlcGFyZWQgc3RhdGVtZW50cyB3aGljaCBhcmUgbmVlZGVkIGZvciBvdXIgdXNlIGNhc2UuIExldCdzIGVuaGFuY2UgdGhlIERiT3BlcmF0aW9ucyBjbGFzcyB0byBzdXBwb3J0IG91ciBuZWVkcyBhbmQgdGhlbiB1cGRhdGUgdGhlIFN1YnNjcmliZXJEQU8gdG8gdXNlIGl0LlxuXG4jIyBQbGFuOlxuMS4gQWRkIGEgbmV3IG1ldGhvZCB0byBEYk9wZXJhdGlvbnMgZm9yIGhhbmRsaW5nIHRyYW5zYWN0aW9ucyB3aXRoIHByZXBhcmVkIHN0YXRlbWVudHNcbjIuIFVwZGF0ZSBTdWJzY3JpYmVyREFPIHRvIHVzZSB0aGUgZW5oYW5jZWQgRGJPcGVyYXRpb25zIGNsYXNzXG5cbkxldCdzIGltcGxlbWVudCB0aGVzZSBjaGFuZ2VzOiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiJJJ2xsIGhlbHAgeW91IG1vZGlmeSB0aGUgc29sdXRpb24gdG8gdXNlIHRoZSBEYk9wZXJhdGlvbnMgY2xhc3MgZm9yIGRhdGFiYXNlIG9wZXJhdGlvbnMuIFRoaXMgd2lsbCBtYWtlIHRoZSBjb2RlIG1vcmUgY29uc2lzdGVudCB3aXRoIHRoZSByZXN0IG9mIHRoZSBhcHBsaWNhdGlvbi5cblxuTGV0J3MgZXhhbWluZSB0aGUgRGJPcGVyYXRpb25zIGNsYXNzIGZpcnN0IHRvIHVuZGVyc3RhbmQgaG93IGl0J3MgdXNlZDpcblxuYGBgYGphdmEgcGF0aD1zcmMvREFPL0RiT3BlcmF0aW9ucy5qYXZhIG1vZGU9RVhDRVJQVFxucGFja2FnZSBEQU87XG5cbmltcG9ydCBqYXZhLnNxbC5Db25uZWN0aW9uO1xuaW1wb3J0IGphdmEuc3FsLlN0YXRlbWVudDtcbmltcG9ydCBqYXZheC5zd2luZy5KT3B0aW9uUGFuZTtcblxucHVibGljIGNsYXNzIERiT3BlcmF0aW9ucyB7XG4gICAgcHVibGljIHN0YXRpYyB2b2lkIHNldERhdGFPckRlbGV0ZShTdHJpbmcgcXVlcnksIFN0cmluZyBtc2cpIHtcbiAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcbiAgICAgICAgU3RhdGVtZW50IHN0ID0gbnVsbDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbm4gPSBDb25uZWN0aW9uUHJvdmlkZXIuZ2V0Q29ubigpO1xuICAgICAgICAgICAgc3QgPSBjb25uLmNyZWF0ZVN0YXRlbWVudCgpO1xuICAgICAgICAgICAgc3QuZXhlY3V0ZVVwZGF0ZShxdWVyeSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmKCFtc2cuZXF1YWxzKFwiXCIpKSB7XG4gICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgbXNnLCBcIk1lc3NhZ2VcIiwgSk9wdGlvblBhbmUuSU5GT1JNQVRJT05fTUVTU0FHRSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBleCkge1xuICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgZXgsIFwiTWVzc2FnZVwiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKHN0ICE9IG51bGwpIHN0LmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgaWYgKGNvbm4gIT0gbnVsbCkgY29ubi5jbG9zZSgpO1xuICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuYGBgYFxuXG5JIHNlZSB0aGF0IHRoZSBEYk9wZXJhdGlvbnMgY2xhc3MgaGFzIGEgbWV0aG9kIGZvciBleGVjdXRpbmcgU1FMIHN0YXRlbWVudHMsIGJ1dCBpdCBkb2Vzbid0IHN1cHBvcnQgcHJlcGFyZWQgc3RhdGVtZW50cyB3aGljaCBhcmUgbmVlZGVkIGZvciBvdXIgdXNlIGNhc2UuIExldCdzIGVuaGFuY2UgdGhlIERiT3BlcmF0aW9ucyBjbGFzcyB0byBzdXBwb3J0IG91ciBuZWVkcyBhbmQgdGhlbiB1cGRhdGUgdGhlIFN1YnNjcmliZXJEQU8gdG8gdXNlIGl0LlxuXG4jIyBQbGFuOlxuMS4gQWRkIGEgbmV3IG1ldGhvZCB0byBEYk9wZXJhdGlvbnMgZm9yIGhhbmRsaW5nIHRyYW5zYWN0aW9ucyB3aXRoIHByZXBhcmVkIHN0YXRlbWVudHNcbjIuIFVwZGF0ZSBTdWJzY3JpYmVyREFPIHRvIHVzZSB0aGUgZW5oYW5jZWQgRGJPcGVyYXRpb25zIGNsYXNzXG5cbkxldCdzIGltcGxlbWVudCB0aGVzZSBjaGFuZ2VzOlxuIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjowLCJ0ZXh0X25vZGUiOnsiY29udGVudCI6InVzZSBEYk9wZXJhdGlvbnMgY2xhc3MifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJFOi9Ib2NUYXAvMDJfSkFWQS8wM19Qcm9qZWN0L0ludGVybmV0IE1hbmdlbWVudCBTeXN0ZW0iLCJmb2xkZXJSb290IjoiRTovSG9jVGFwLzAyX0pBVkEvMDNfUHJvamVjdC9JbnRlcm5ldCBNYW5nZW1lbnQgU3lzdGVtIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZSwiY3VycmVudFRlcm1pbmFsIjp7InRlcm1pbmFsSWQiOjIsImN1cnJlbnRXb3JraW5nRGlyZWN0b3J5IjoiRTovSG9jVGFwLzAyX0pBVkEvMDNfUHJvamVjdC9JbnRlcm5ldCBNYW5nZW1lbnQgU3lzdGVtIn19fV0sInRpbWVzdGFtcCI6IjIwMjUtMDUtMTFUMDk6MzU6NTYuODEzWiIsInJlc3BvbnNlX3RleHQiOiJJJ2xsIGhlbHAgeW91IG1vZGlmeSB0aGUgc29sdXRpb24gdG8gdXNlIHRoZSBEYk9wZXJhdGlvbnMgY2xhc3MgZm9yIGRhdGFiYXNlIG9wZXJhdGlvbnMuIFRoaXMgd2lsbCBtYWtlIHRoZSBjb2RlIG1vcmUgY29uc2lzdGVudCB3aXRoIHRoZSByZXN0IG9mIHRoZSBhcHBsaWNhdGlvbi5cblxuTGV0J3MgZXhhbWluZSB0aGUgRGJPcGVyYXRpb25zIGNsYXNzIGZpcnN0IHRvIHVuZGVyc3RhbmQgaG93IGl0J3MgdXNlZDpcblxuYGBgYGphdmEgcGF0aD1zcmMvREFPL0RiT3BlcmF0aW9ucy5qYXZhIG1vZGU9RVhDRVJQVFxucGFja2FnZSBEQU87XG5cbmltcG9ydCBqYXZhLnNxbC5Db25uZWN0aW9uO1xuaW1wb3J0IGphdmEuc3FsLlN0YXRlbWVudDtcbmltcG9ydCBqYXZheC5zd2luZy5KT3B0aW9uUGFuZTtcblxucHVibGljIGNsYXNzIERiT3BlcmF0aW9ucyB7XG4gICAgcHVibGljIHN0YXRpYyB2b2lkIHNldERhdGFPckRlbGV0ZShTdHJpbmcgcXVlcnksIFN0cmluZyBtc2cpIHtcbiAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcbiAgICAgICAgU3RhdGVtZW50IHN0ID0gbnVsbDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbm4gPSBDb25uZWN0aW9uUHJvdmlkZXIuZ2V0Q29ubigpO1xuICAgICAgICAgICAgc3QgPSBjb25uLmNyZWF0ZVN0YXRlbWVudCgpO1xuICAgICAgICAgICAgc3QuZXhlY3V0ZVVwZGF0ZShxdWVyeSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmKCFtc2cuZXF1YWxzKFwiXCIpKSB7XG4gICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgbXNnLCBcIk1lc3NhZ2VcIiwgSk9wdGlvblBhbmUuSU5GT1JNQVRJT05fTUVTU0FHRSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBleCkge1xuICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgZXgsIFwiTWVzc2FnZVwiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKHN0ICE9IG51bGwpIHN0LmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgaWYgKGNvbm4gIT0gbnVsbCkgY29ubi5jbG9zZSgpO1xuICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuYGBgYFxuXG5JIHNlZSB0aGF0IHRoZSBEYk9wZXJhdGlvbnMgY2xhc3MgaGFzIGEgbWV0aG9kIGZvciBleGVjdXRpbmcgU1FMIHN0YXRlbWVudHMsIGJ1dCBpdCBkb2Vzbid0IHN1cHBvcnQgcHJlcGFyZWQgc3RhdGVtZW50cyB3aGljaCBhcmUgbmVlZGVkIGZvciBvdXIgdXNlIGNhc2UuIExldCdzIGVuaGFuY2UgdGhlIERiT3BlcmF0aW9ucyBjbGFzcyB0byBzdXBwb3J0IG91ciBuZWVkcyBhbmQgdGhlbiB1cGRhdGUgdGhlIFN1YnNjcmliZXJEQU8gdG8gdXNlIGl0LlxuXG4jIyBQbGFuOlxuMS4gQWRkIGEgbmV3IG1ldGhvZCB0byBEYk9wZXJhdGlvbnMgZm9yIGhhbmRsaW5nIHRyYW5zYWN0aW9ucyB3aXRoIHByZXBhcmVkIHN0YXRlbWVudHNcbjIuIFVwZGF0ZSBTdWJzY3JpYmVyREFPIHRvIHVzZSB0aGUgZW5oYW5jZWQgRGJPcGVyYXRpb25zIGNsYXNzXG5cbkxldCdzIGltcGxlbWVudCB0aGVzZSBjaGFuZ2VzOlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6ImNhYjcxZWY4LWZlMmQtNDgxNi05MzgyLTA3Yjc3ZjAyOWQ5YyIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfMDFZRmVWd0oxTVlaQk0xQnhIWURNYVNVIiwidG9vbF9uYW1lIjoic3RyLXJlcGxhY2UtZWRpdG9yIiwiaW5wdXRfanNvbiI6IntcImNvbW1hbmRcIjogXCJzdHJfcmVwbGFjZVwiLCBcInBhdGhcIjogXCJzcmMvREFPL1N1YnNjcmliZXJEQU8uamF2YVwiLCBcInN0cl9yZXBsYWNlX2VudHJpZXNcIjogW3tcIm9sZF9zdHJcIjogXCJpbXBvcnQgTW9kZWwuU3Vic2NyaWJlcjtcXG5pbXBvcnQgamF2YS51dGlsLkxpc3Q7XFxuaW1wb3J0IGphdmEuc3FsLkNvbm5lY3Rpb247XFxuaW1wb3J0IGphdmEuc3FsLlByZXBhcmVkU3RhdGVtZW50O1xcbmltcG9ydCBqYXZhLnNxbC5SZXN1bHRTZXQ7XFxuaW1wb3J0IGphdmEuc3FsLlN0YXRlbWVudDtcXG5pbXBvcnQgamF2YS5zcWwuVGltZXN0YW1wO1xcbmltcG9ydCBqYXZheC5zd2luZy5KT3B0aW9uUGFuZTtcIiwgXCJuZXdfc3RyXCI6IFwiaW1wb3J0IE1vZGVsLlN1YnNjcmliZXI7XFxuaW1wb3J0IGphdmEudXRpbC5MaXN0O1xcbmltcG9ydCBqYXZhLnNxbC5QcmVwYXJlZFN0YXRlbWVudDtcXG5pbXBvcnQgamF2YS5zcWwuVGltZXN0YW1wO1xcbmltcG9ydCBEQU8uRGJPcGVyYXRpb25zLlNxbE9wZXJhdGlvbjtcIiwgXCJvbGRfc3RyX3N0YXJ0X2xpbmVfbnVtYmVyXCI6IDcsIFwib2xkX3N0cl9lbmRfbGluZV9udW1iZXJcIjogMTR9LCB7XCJvbGRfc3RyXCI6IFwiICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBpbnNlcnQoU3Vic2NyaWJlciBvYmopIHtcXG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XFxuICAgICAgICBQcmVwYXJlZFN0YXRlbWVudCBwc1VzZXIgPSBudWxsO1xcbiAgICAgICAgUHJlcGFyZWRTdGF0ZW1lbnQgcHNTdWJzY3JpYmVyID0gbnVsbDtcXG4gICAgICAgIFJlc3VsdFNldCBycyA9IG51bGw7XFxuICAgICAgICBcXG4gICAgICAgIHRyeSB7XFxuICAgICAgICAgICAgY29ubiA9IENvbm5lY3Rpb25Qcm92aWRlci5nZXRDb25uKCk7XFxuICAgICAgICAgICAgY29ubi5zZXRBdXRvQ29tbWl0KGZhbHNlKTtcXG4gICAgICAgICAgICBcXG4gICAgICAgICAgICAvLyBHZW5lcmF0ZSB1c2VyX2lkXFxuICAgICAgICAgICAgaW50IHVzZXJJZCA9IGdlbmVyYXRlTmV4dElkKGNvbm4sIFxcXCJVU0VSXFxcIiwgXFxcInVzZXJfaWRcXFwiKTtcXG4gICAgICAgICAgICBvYmouc2V0VXNlcl9pZCh1c2VySWQpO1xcbiAgICAgICAgICAgIFxcbiAgICAgICAgICAgIC8vIEdlbmVyYXRlIHN1YnNjcmliZXJfaWRcXG4gICAgICAgICAgICBpbnQgc3Vic2NyaWJlcklkID0gZ2VuZXJhdGVOZXh0SWQoY29ubiwgXFxcIlNVQlNDUklCRVJcXFwiLCBcXFwic3Vic2NyaWJlcl9pZFxcXCIpO1xcbiAgICAgICAgICAgIG9iai5zZXRTdWJzY3JpYmVyX2lkKHN1YnNjcmliZXJJZCk7XFxuICAgICAgICAgICAgXFxuICAgICAgICAgICAgLy8gSW5zZXJ0IGludG8gVVNFUiB0YWJsZSBmaXJzdFxcbiAgICAgICAgICAgIFN0cmluZyBzcWxVc2VyID0gXFxcIklOU0VSVCBJTlRPIFVTRVIodXNlcl9pZCwgdXNlcm5hbWUsIHBhc3N3b3JkLCByb2xlLCBjcmVhdGVkX2F0KSBWQUxVRVMgKD8sID8sID8sID8sID8pXFxcIjtcXG4gICAgICAgICAgICBwc1VzZXIgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsVXNlcik7XFxuICAgICAgICAgICAgcHNVc2VyLnNldEludCgxLCB1c2VySWQpO1xcbiAgICAgICAgICAgIHBzVXNlci5zZXRTdHJpbmcoMiwgb2JqLmdldFVzZXJuYW1lKCkpO1xcbiAgICAgICAgICAgIHBzVXNlci5zZXRTdHJpbmcoMywgb2JqLmdldFBhc3N3b3JkKCkpO1xcbiAgICAgICAgICAgIHBzVXNlci5zZXRTdHJpbmcoNCwgb2JqLmdldFJvbGUoKSk7XFxuICAgICAgICAgICAgcHNVc2VyLnNldFRpbWVzdGFtcCg1LCBUaW1lc3RhbXAudmFsdWVPZihvYmouZ2V0Q3JlYXRlX2F0KCkpKTtcXG4gICAgICAgICAgICBwc1VzZXIuZXhlY3V0ZVVwZGF0ZSgpO1xcbiAgICAgICAgICAgIFxcbiAgICAgICAgICAgIC8vIFRoZW4gaW5zZXJ0IGludG8gU1VCU0NSSUJFUiB0YWJsZSB3aXRoIHRoZSBzYW1lIHVzZXJfaWRcXG4gICAgICAgICAgICBTdHJpbmcgc3FsU3Vic2NyaWJlciA9IFxcXCJJTlNFUlQgSU5UTyBTVUJTQ1JJQkVSIChzdWJzY3JpYmVyX2lkLCBuYW1lLCBhZGRyZXNzLCBwaG9uZSwgdXNlcl9pZCkgVkFMVUVTICg/LCA/LCA/LCA/LCA/KVxcXCI7XFxuICAgICAgICAgICAgcHNTdWJzY3JpYmVyID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHNxbFN1YnNjcmliZXIpO1xcbiAgICAgICAgICAgIHBzU3Vic2NyaWJlci5zZXRJbnQoMSwgc3Vic2NyaWJlcklkKTtcXG4gICAgICAgICAgICBwc1N1YnNjcmliZXIuc2V0U3RyaW5nKDIsIG9iai5nZXRGdWxsTmFtZSgpKTtcXG4gICAgICAgICAgICBwc1N1YnNjcmliZXIuc2V0U3RyaW5nKDMsIG9iai5nZXRBZGRyZXNzKCkpO1xcbiAgICAgICAgICAgIHBzU3Vic2NyaWJlci5zZXRTdHJpbmcoNCwgb2JqLmdldFBob25lKCkpO1xcbiAgICAgICAgICAgIHBzU3Vic2NyaWJlci5zZXRJbnQoNSwgdXNlcklkKTsgLy8gVXNlIHRoZSBzYW1lIHVzZXJfaWRcXG4gICAgICAgICAgICBwc1N1YnNjcmliZXIuZXhlY3V0ZVVwZGF0ZSgpO1xcbiAgICAgICAgICAgIFxcbiAgICAgICAgICAgIGNvbm4uY29tbWl0KCk7XFxuICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXFxcIlxcdTAxMTBcXHUwMTAzbmcga1xcdTAwZmQgdGhcXHUwMGUwbmggY1xcdTAwZjRuZyFcXFwiLCBcXFwiVGhcXHUwMGY0bmcgYlxcdTAwZTFvXFxcIiwgSk9wdGlvblBhbmUuSU5GT1JNQVRJT05fTUVTU0FHRSk7XFxuICAgICAgICB9XFxuICAgICAgICBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcXG4gICAgICAgICAgICB0cnkge1xcbiAgICAgICAgICAgICAgICBpZiAoY29ubiAhPSBudWxsKSBjb25uLnJvbGxiYWNrKCk7XFxuICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIHJvbGxiYWNrRXgpIHtcXG4gICAgICAgICAgICAgICAgcm9sbGJhY2tFeC5wcmludFN0YWNrVHJhY2UoKTtcXG4gICAgICAgICAgICB9XFxuICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXFxcIkxcXHUxZWQ3aTogXFxcIiArIGUuZ2V0TWVzc2FnZSgpLCBcXFwiVGhcXHUwMGY0bmcgYlxcdTAwZTFvXFxcIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XFxuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcXG4gICAgICAgIH0gZmluYWxseSB7XFxuICAgICAgICAgICAgdHJ5IHtcXG4gICAgICAgICAgICAgICAgaWYgKHJzICE9IG51bGwpIHJzLmNsb3NlKCk7XFxuICAgICAgICAgICAgICAgIGlmIChwc1N1YnNjcmliZXIgIT0gbnVsbCkgcHNTdWJzY3JpYmVyLmNsb3NlKCk7XFxuICAgICAgICAgICAgICAgIGlmIChwc1VzZXIgIT0gbnVsbCkgcHNVc2VyLmNsb3NlKCk7XFxuICAgICAgICAgICAgICAgIGlmIChjb25uICE9IG51bGwpIGNvbm4uY2xvc2UoKTtcXG4gICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZXgpIHtcXG4gICAgICAgICAgICAgICAgZXgucHJpbnRTdGFja1RyYWNlKCk7XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgfVwiLCBcIm5ld19zdHJcIjogXCIgICAgcHVibGljIHN0YXRpYyB2b2lkIGluc2VydChmaW5hbCBTdWJzY3JpYmVyIG9iaikge1xcbiAgICAgICAgLy8gR2VuZXJhdGUgdXNlcl9pZCBhbmQgc3Vic2NyaWJlcl9pZFxcbiAgICAgICAgZmluYWwgaW50IHVzZXJJZCA9IERiT3BlcmF0aW9ucy5nZXROZXh0SWQoXFxcIlVTRVJcXFwiLCBcXFwidXNlcl9pZFxcXCIpO1xcbiAgICAgICAgZmluYWwgaW50IHN1YnNjcmliZXJJZCA9IERiT3BlcmF0aW9ucy5nZXROZXh0SWQoXFxcIlNVQlNDUklCRVJcXFwiLCBcXFwic3Vic2NyaWJlcl9pZFxcXCIpO1xcbiAgICAgICAgXFxuICAgICAgICAvLyBTZXQgdGhlIGdlbmVyYXRlZCBJRHNcXG4gICAgICAgIG9iai5zZXRVc2VyX2lkKHVzZXJJZCk7XFxuICAgICAgICBvYmouc2V0U3Vic2NyaWJlcl9pZChzdWJzY3JpYmVySWQpO1xcbiAgICAgICAgXFxuICAgICAgICAvLyBDcmVhdGUgU1FMIG9wZXJhdGlvbnMgZm9yIHRoZSB0cmFuc2FjdGlvblxcbiAgICAgICAgU3FsT3BlcmF0aW9uW10gb3BlcmF0aW9ucyA9IG5ldyBTcWxPcGVyYXRpb25bXSB7XFxuICAgICAgICAgICAgLy8gSW5zZXJ0IGludG8gVVNFUiB0YWJsZVxcbiAgICAgICAgICAgIG5ldyBTcWxPcGVyYXRpb24oKSB7XFxuICAgICAgICAgICAgICAgIEBPdmVycmlkZVxcbiAgICAgICAgICAgICAgICBwdWJsaWMgU3RyaW5nIGdldFNxbCgpIHtcXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcXFwiSU5TRVJUIElOVE8gVVNFUih1c2VyX2lkLCB1c2VybmFtZSwgcGFzc3dvcmQsIHJvbGUsIGNyZWF0ZWRfYXQpIFZBTFVFUyAoPywgPywgPywgPywgPylcXFwiO1xcbiAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgICAgIFxcbiAgICAgICAgICAgICAgICBAT3ZlcnJpZGVcXG4gICAgICAgICAgICAgICAgcHVibGljIHZvaWQgc2V0UGFyYW1ldGVycyhQcmVwYXJlZFN0YXRlbWVudCBwcykgdGhyb3dzIEV4Y2VwdGlvbiB7XFxuICAgICAgICAgICAgICAgICAgICBwcy5zZXRJbnQoMSwgdXNlcklkKTtcXG4gICAgICAgICAgICAgICAgICAgIHBzLnNldFN0cmluZygyLCBvYmouZ2V0VXNlcm5hbWUoKSk7XFxuICAgICAgICAgICAgICAgICAgICBwcy5zZXRTdHJpbmcoMywgb2JqLmdldFBhc3N3b3JkKCkpO1xcbiAgICAgICAgICAgICAgICAgICAgcHMuc2V0U3RyaW5nKDQsIG9iai5nZXRSb2xlKCkpO1xcbiAgICAgICAgICAgICAgICAgICAgcHMuc2V0VGltZXN0YW1wKDUsIFRpbWVzdGFtcC52YWx1ZU9mKG9iai5nZXRDcmVhdGVfYXQoKSkpO1xcbiAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgfSxcXG4gICAgICAgICAgICBcXG4gICAgICAgICAgICAvLyBJbnNlcnQgaW50byBTVUJTQ1JJQkVSIHRhYmxlXFxuICAgICAgICAgICAgbmV3IFNxbE9wZXJhdGlvbigpIHtcXG4gICAgICAgICAgICAgICAgQE92ZXJyaWRlXFxuICAgICAgICAgICAgICAgIHB1YmxpYyBTdHJpbmcgZ2V0U3FsKCkge1xcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFxcXCJJTlNFUlQgSU5UTyBTVUJTQ1JJQkVSIChzdWJzY3JpYmVyX2lkLCBuYW1lLCBhZGRyZXNzLCBwaG9uZSwgdXNlcl9pZCkgVkFMVUVTICg/LCA/LCA/LCA/LCA/KVxcXCI7XFxuICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICAgICAgXFxuICAgICAgICAgICAgICAgIEBPdmVycmlkZVxcbiAgICAgICAgICAgICAgICBwdWJsaWMgdm9pZCBzZXRQYXJhbWV0ZXJzKFByZXBhcmVkU3RhdGVtZW50IHBzKSB0aHJvd3MgRXhjZXB0aW9uIHtcXG4gICAgICAgICAgICAgICAgICAgIHBzLnNldEludCgxLCBzdWJzY3JpYmVySWQpO1xcbiAgICAgICAgICAgICAgICAgICAgcHMuc2V0U3RyaW5nKDIsIG9iai5nZXRGdWxsTmFtZSgpKTtcXG4gICAgICAgICAgICAgICAgICAgIHBzLnNldFN0cmluZygzLCBvYmouZ2V0QWRkcmVzcygpKTtcXG4gICAgICAgICAgICAgICAgICAgIHBzLnNldFN0cmluZyg0LCBvYmouZ2V0UGhvbmUoKSk7XFxuICAgICAgICAgICAgICAgICAgICBwcy5zZXRJbnQoNSwgdXNlcklkKTtcXG4gICAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgIH1cXG4gICAgICAgIH07XFxuICAgICAgICBcXG4gICAgICAgIC8vIEV4ZWN1dGUgdGhlIHRyYW5zYWN0aW9uXFxuICAgICAgICBEYk9wZXJhdGlvbnMuZXhlY3V0ZVRyYW5zYWN0aW9uKG9wZXJhdGlvbnMsIFxcXCJcXHUwMTEwXFx1MDEwM25nIGtcXHUwMGZkIHRoXFx1MDBlMG5oIGNcXHUwMGY0bmchXFxcIik7XFxuICAgIH1cIiwgXCJvbGRfc3RyX3N0YXJ0X2xpbmVfbnVtYmVyXCI6IDIyLCBcIm9sZF9zdHJfZW5kX2xpbmVfbnVtYmVyXCI6IDgwfSwge1wib2xkX3N0clwiOiBcIiAgICAvKipcXG4gICAgICogR2VuZXJhdGUgdGhlIG5leHQgYXZhaWxhYmxlIElEIGZvciBhIHRhYmxlXFxuICAgICAqIEBwYXJhbSBjb25uIERhdGFiYXNlIGNvbm5lY3Rpb25cXG4gICAgICogQHBhcmFtIHRhYmxlTmFtZSBOYW1lIG9mIHRoZSB0YWJsZVxcbiAgICAgKiBAcGFyYW0gaWRDb2x1bW5OYW1lIE5hbWUgb2YgdGhlIElEIGNvbHVtblxcbiAgICAgKiBAcmV0dXJuIE5leHQgYXZhaWxhYmxlIElEXFxuICAgICAqIEB0aHJvd3MgRXhjZXB0aW9uIElmIGFuIGVycm9yIG9jY3Vyc1xcbiAgICAgKi9cXG4gICAgcHJpdmF0ZSBzdGF0aWMgaW50IGdlbmVyYXRlTmV4dElkKENvbm5lY3Rpb24gY29ubiwgU3RyaW5nIHRhYmxlTmFtZSwgU3RyaW5nIGlkQ29sdW1uTmFtZSkgdGhyb3dzIEV4Y2VwdGlvbiB7XFxuICAgICAgICBpbnQgbmV4dElkID0gMTsgLy8gRGVmYXVsdCBzdGFydGluZyBJRFxcbiAgICAgICAgU3RhdGVtZW50IHN0bXQgPSBudWxsO1xcbiAgICAgICAgUmVzdWx0U2V0IHJzID0gbnVsbDtcXG4gICAgICAgIFxcbiAgICAgICAgdHJ5IHtcXG4gICAgICAgICAgICBzdG10ID0gY29ubi5jcmVhdGVTdGF0ZW1lbnQoKTtcXG4gICAgICAgICAgICBTdHJpbmcgcXVlcnkgPSBcXFwiU0VMRUNUIE1BWChcXFwiICsgaWRDb2x1bW5OYW1lICsgXFxcIikgQVMgbWF4X2lkIEZST00gXFxcIiArIHRhYmxlTmFtZTtcXG4gICAgICAgICAgICBycyA9IHN0bXQuZXhlY3V0ZVF1ZXJ5KHF1ZXJ5KTtcXG4gICAgICAgICAgICBcXG4gICAgICAgICAgICBpZiAocnMubmV4dCgpKSB7XFxuICAgICAgICAgICAgICAgIGludCBtYXhJZCA9IHJzLmdldEludChcXFwibWF4X2lkXFxcIik7XFxuICAgICAgICAgICAgICAgIG5leHRJZCA9IG1heElkICsgMTtcXG4gICAgICAgICAgICB9XFxuICAgICAgICB9IGZpbmFsbHkge1xcbiAgICAgICAgICAgIGlmIChycyAhPSBudWxsKSBycy5jbG9zZSgpO1xcbiAgICAgICAgICAgIGlmIChzdG10ICE9IG51bGwpIHN0bXQuY2xvc2UoKTtcXG4gICAgICAgIH1cXG4gICAgICAgIFxcbiAgICAgICAgcmV0dXJuIG5leHRJZDtcXG4gICAgfVwiLCBcIm5ld19zdHJcIjogXCJcIiwgXCJvbGRfc3RyX3N0YXJ0X2xpbmVfbnVtYmVyXCI6IDk5LCBcIm9sZF9zdHJfZW5kX2xpbmVfbnVtYmVyXCI6IDEyN31dfSIsIm1jcF9zZXJ2ZXJfbmFtZSI6IiIsIm1jcF90b29sX25hbWUiOiIifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6Ik5vdywgbGV0J3MgdXBkYXRlIHRoZSBTdWJzY3JpYmVyREFPIGNsYXNzIHRvIHVzZSB0aGUgZW5oYW5jZWQgRGJPcGVyYXRpb25zIGNsYXNzOlxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiU3VjY2Vzc2Z1bGx5IGVkaXRlZCB0aGUgZmlsZSBzcmMvREFPL0RiT3BlcmF0aW9ucy5qYXZhLlxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZSBmb3IgZW50cnkgd2l0aCBpbmRleCBbMF06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgICAgMVx0cGFja2FnZSBEQU87XG4gICAgIDJcdFxuICAgICAzXHRpbXBvcnQgamF2YS5zcWwuQ29ubmVjdGlvbjtcbiAgICAgNFx0aW1wb3J0IGphdmEuc3FsLlByZXBhcmVkU3RhdGVtZW50O1xuICAgICA1XHRpbXBvcnQgamF2YS5zcWwuUmVzdWx0U2V0O1xuICAgICA2XHRpbXBvcnQgamF2YS5zcWwuU3RhdGVtZW50O1xuICAgICA3XHRpbXBvcnQgamF2YXguc3dpbmcuSk9wdGlvblBhbmU7XG4gICAgIDhcdFxuICAgICA5XHRwdWJsaWMgY2xhc3MgRGJPcGVyYXRpb25zIHtcbiAgICAxMFx0ICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBzZXREYXRhT3JEZWxldGUoU3RyaW5nIHF1ZXJ5LCBTdHJpbmcgbXNnKSB7XG4gICAgMTFcdCAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcblxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZSBmb3IgZW50cnkgd2l0aCBpbmRleCBbMV06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgICAgNVx0aW1wb3J0IGphdmEuc3FsLlJlc3VsdFNldDtcbiAgICAgNlx0aW1wb3J0IGphdmEuc3FsLlN0YXRlbWVudDtcbiAgICAgN1x0aW1wb3J0IGphdmF4LnN3aW5nLkpPcHRpb25QYW5lO1xuICAgICA4XHRcbiAgICAgOVx0cHVibGljIGNsYXNzIERiT3BlcmF0aW9ucyB7XG4gICAgMTBcdCAgICBwdWJsaWMgc3RhdGljIHZvaWQgc2V0RGF0YU9yRGVsZXRlKFN0cmluZyBxdWVyeSwgU3RyaW5nIG1zZykge1xuICAgIDExXHQgICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgMTJcdCAgICAgICAgU3RhdGVtZW50IHN0ID0gbnVsbDtcbiAgICAxM1x0ICAgICAgICB0cnkge1xuICAgIDE0XHQgICAgICAgICAgICBjb25uID0gQ29ubmVjdGlvblByb3ZpZGVyLmdldENvbm4oKTtcbiAgICAxNVx0ICAgICAgICAgICAgc3QgPSBjb25uLmNyZWF0ZVN0YXRlbWVudCgpO1xuICAgIDE2XHQgICAgICAgICAgICBzdC5leGVjdXRlVXBkYXRlKHF1ZXJ5KTtcbiAgICAxN1x0XG4gICAgMThcdCAgICAgICAgICAgIGlmKCFtc2cuZXF1YWxzKFwiXCIpKSB7XG4gICAgMTlcdCAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBtc2csIFwiTWVzc2FnZVwiLCBKT3B0aW9uUGFuZS5JTkZPUk1BVElPTl9NRVNTQUdFKTtcbiAgICAyMFx0ICAgICAgICAgICAgfVxuICAgIDIxXHQgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBleCkge1xuICAgIDIyXHQgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBleCwgXCJNZXNzYWdlXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgIDIzXHQgICAgICAgIH0gZmluYWxseSB7XG4gICAgMjRcdCAgICAgICAgICAgIHRyeSB7XG4gICAgMjVcdCAgICAgICAgICAgICAgICBpZiAoc3QgIT0gbnVsbCkgc3QuY2xvc2UoKTtcbiAgICAyNlx0ICAgICAgICAgICAgICAgIGlmIChjb25uICE9IG51bGwpIGNvbm4uY2xvc2UoKTtcbiAgICAyN1x0ICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICAyOFx0ICAgICAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgMjlcdCAgICAgICAgICAgIH1cbiAgICAzMFx0ICAgICAgICB9XG4gICAgMzFcdCAgICB9XG4gICAgMzJcdFxuICAgIDMzXHQgICAgLyoqXG4gICAgMzRcdCAgICAgKiBHZW5lcmF0ZSB0aGUgbmV4dCBhdmFpbGFibGUgSUQgZm9yIGEgdGFibGVcbiAgICAzNVx0ICAgICAqIEBwYXJhbSB0YWJsZU5hbWUgTmFtZSBvZiB0aGUgdGFibGVcbiAgICAzNlx0ICAgICAqIEBwYXJhbSBpZENvbHVtbk5hbWUgTmFtZSBvZiB0aGUgSUQgY29sdW1uXG4gICAgMzdcdCAgICAgKiBAcmV0dXJuIE5leHQgYXZhaWxhYmxlIElEXG4gICAgMzhcdCAgICAgKi9cbiAgICAzOVx0ICAgIHB1YmxpYyBzdGF0aWMgaW50IGdldE5leHRJZChTdHJpbmcgdGFibGVOYW1lLCBTdHJpbmcgaWRDb2x1bW5OYW1lKSB7XG4gICAgNDBcdCAgICAgICAgaW50IG5leHRJZCA9IDE7IC8vIERlZmF1bHQgc3RhcnRpbmcgSURcbiAgICA0MVx0ICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgIDQyXHQgICAgICAgIFN0YXRlbWVudCBzdG10ID0gbnVsbDtcbiAgICA0M1x0ICAgICAgICBSZXN1bHRTZXQgcnMgPSBudWxsO1xuICAgIDQ0XHRcbiAgICA0NVx0ICAgICAgICB0cnkge1xuICAgIDQ2XHQgICAgICAgICAgICBjb25uID0gQ29ubmVjdGlvblByb3ZpZGVyLmdldENvbm4oKTtcbiAgICA0N1x0ICAgICAgICAgICAgc3RtdCA9IGNvbm4uY3JlYXRlU3RhdGVtZW50KCk7XG4gICAgNDhcdCAgICAgICAgICAgIFN0cmluZyBxdWVyeSA9IFwiU0VMRUNUIE1BWChcIiArIGlkQ29sdW1uTmFtZSArIFwiKSBBUyBtYXhfaWQgRlJPTSBcIiArIHRhYmxlTmFtZTtcbiAgICA0OVx0ICAgICAgICAgICAgcnMgPSBzdG10LmV4ZWN1dGVRdWVyeShxdWVyeSk7XG4gICAgNTBcdFxuICAgIDUxXHQgICAgICAgICAgICBpZiAocnMubmV4dCgpKSB7XG4gICAgNTJcdCAgICAgICAgICAgICAgICBpbnQgbWF4SWQgPSBycy5nZXRJbnQoXCJtYXhfaWRcIik7XG4gICAgNTNcdCAgICAgICAgICAgICAgICBuZXh0SWQgPSBtYXhJZCArIDE7XG4gICAgNTRcdCAgICAgICAgICAgIH1cbiAgICA1NVx0ICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgIDU2XHQgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBlLCBcIkVycm9yXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgIDU3XHQgICAgICAgIH0gZmluYWxseSB7XG4gICAgNThcdCAgICAgICAgICAgIHRyeSB7XG4gICAgNTlcdCAgICAgICAgICAgICAgICBpZiAocnMgIT0gbnVsbCkgcnMuY2xvc2UoKTtcbiAgICA2MFx0ICAgICAgICAgICAgICAgIGlmIChzdG10ICE9IG51bGwpIHN0bXQuY2xvc2UoKTtcbiAgICA2MVx0ICAgICAgICAgICAgICAgIGlmIChjb25uICE9IG51bGwpIGNvbm4uY2xvc2UoKTtcbiAgICA2Mlx0ICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICA2M1x0ICAgICAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgNjRcdCAgICAgICAgICAgIH1cbiAgICA2NVx0ICAgICAgICB9XG4gICAgNjZcdFxuICAgIDY3XHQgICAgICAgIHJldHVybiBuZXh0SWQ7XG4gICAgNjhcdCAgICB9XG4gICAgNjlcdFxuICAgIDcwXHQgICAgLyoqXG4gICAgNzFcdCAgICAgKiBFeGVjdXRlIGEgdHJhbnNhY3Rpb24gd2l0aCBtdWx0aXBsZSBTUUwgb3BlcmF0aW9uc1xuICAgIDcyXHQgICAgICogQHBhcmFtIG9wZXJhdGlvbnMgQXJyYXkgb2YgU1FMIG9wZXJhdGlvbnMgdG8gZXhlY3V0ZVxuICAgIDczXHQgICAgICogQHBhcmFtIHN1Y2Nlc3NNc2cgTWVzc2FnZSB0byBkaXNwbGF5IG9uIHN1Y2Nlc3NcbiAgICA3NFx0ICAgICAqIEByZXR1cm4gdHJ1ZSBpZiB0cmFuc2FjdGlvbiB3YXMgc3VjY2Vzc2Z1bCwgZmFsc2Ugb3RoZXJ3aXNlXG4gICAgNzVcdCAgICAgKi9cbiAgICA3Nlx0ICAgIHB1YmxpYyBzdGF0aWMgYm9vbGVhbiBleGVjdXRlVHJhbnNhY3Rpb24oU3FsT3BlcmF0aW9uW10gb3BlcmF0aW9ucywgU3RyaW5nIHN1Y2Nlc3NNc2cpIHtcbiAgICA3N1x0ICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgIDc4XHQgICAgICAgIGJvb2xlYW4gc3VjY2VzcyA9IGZhbHNlO1xuICAgIDc5XHRcbiAgICA4MFx0ICAgICAgICB0cnkge1xuICAgIDgxXHQgICAgICAgICAgICBjb25uID0gQ29ubmVjdGlvblByb3ZpZGVyLmdldENvbm4oKTtcbiAgICA4Mlx0ICAgICAgICAgICAgY29ubi5zZXRBdXRvQ29tbWl0KGZhbHNlKTtcbiAgICA4M1x0XG4gICAgODRcdCAgICAgICAgICAgIC8vIEV4ZWN1dGUgYWxsIG9wZXJhdGlvbnNcbiAgICA4NVx0ICAgICAgICAgICAgZm9yIChTcWxPcGVyYXRpb24gb3BlcmF0aW9uIDogb3BlcmF0aW9ucykge1xuICAgIDg2XHQgICAgICAgICAgICAgICAgUHJlcGFyZWRTdGF0ZW1lbnQgcHMgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQob3BlcmF0aW9uLmdldFNxbCgpKTtcbiAgICA4N1x0ICAgICAgICAgICAgICAgIG9wZXJhdGlvbi5zZXRQYXJhbWV0ZXJzKHBzKTtcbiAgICA4OFx0ICAgICAgICAgICAgICAgIHBzLmV4ZWN1dGVVcGRhdGUoKTtcbiAgICA4OVx0ICAgICAgICAgICAgICAgIHBzLmNsb3NlKCk7XG4gICAgOTBcdCAgICAgICAgICAgIH1cbiAgICA5MVx0XG4gICAgOTJcdCAgICAgICAgICAgIC8vIENvbW1pdCB0cmFuc2FjdGlvblxuICAgIDkzXHQgICAgICAgICAgICBjb25uLmNvbW1pdCgpO1xuICAgIDk0XHQgICAgICAgICAgICBzdWNjZXNzID0gdHJ1ZTtcbiAgICA5NVx0XG4gICAgOTZcdCAgICAgICAgICAgIC8vIFNob3cgc3VjY2VzcyBtZXNzYWdlIGlmIHByb3ZpZGVkXG4gICAgOTdcdCAgICAgICAgICAgIGlmIChzdWNjZXNzTXNnICE9IG51bGwgJiYgIXN1Y2Nlc3NNc2cuaXNFbXB0eSgpKSB7XG4gICAgOThcdCAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBzdWNjZXNzTXNnLCBcIlN1Y2Nlc3NcIiwgSk9wdGlvblBhbmUuSU5GT1JNQVRJT05fTUVTU0FHRSk7XG4gICAgOTlcdCAgICAgICAgICAgIH1cbiAgIDEwMFx0ICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgMTAxXHQgICAgICAgICAgICAvLyBSb2xsYmFjayB0cmFuc2FjdGlvbiBvbiBlcnJvclxuICAgMTAyXHQgICAgICAgICAgICB0cnkge1xuICAgMTAzXHQgICAgICAgICAgICAgICAgaWYgKGNvbm4gIT0gbnVsbCkgY29ubi5yb2xsYmFjaygpO1xuICAgMTA0XHQgICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gcm9sbGJhY2tFeCkge1xuICAgMTA1XHQgICAgICAgICAgICAgICAgcm9sbGJhY2tFeC5wcmludFN0YWNrVHJhY2UoKTtcbiAgIDEwNlx0ICAgICAgICAgICAgfVxuICAgMTA3XHRcbiAgIDEwOFx0ICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXCJFcnJvcjogXCIgKyBlLmdldE1lc3NhZ2UoKSwgXCJFcnJvclwiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgIDEwOVx0ICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgIDExMFx0ICAgICAgICB9IGZpbmFsbHkge1xuICAgMTExXHQgICAgICAgICAgICB0cnkge1xuICAgMTEyXHQgICAgICAgICAgICAgICAgaWYgKGNvbm4gIT0gbnVsbCkge1xuICAgMTEzXHQgICAgICAgICAgICAgICAgICAgIGNvbm4uc2V0QXV0b0NvbW1pdCh0cnVlKTtcbiAgIDExNFx0ICAgICAgICAgICAgICAgICAgICBjb25uLmNsb3NlKCk7XG4gICAxMTVcdCAgICAgICAgICAgICAgICB9XG4gICAxMTZcdCAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAxMTdcdCAgICAgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgMTE4XHQgICAgICAgICAgICB9XG4gICAxMTlcdCAgICAgICAgfVxuICAgMTIwXHRcbiAgIDEyMVx0ICAgICAgICByZXR1cm4gc3VjY2VzcztcbiAgIDEyMlx0ICAgIH1cbiAgIDEyM1x0XG4gICAxMjRcdCAgICAvKipcbiAgIDEyNVx0ICAgICAqIEludGVyZmFjZSBmb3IgU1FMIG9wZXJhdGlvbnMgd2l0aCBwcmVwYXJlZCBzdGF0ZW1lbnRzXG4gICAxMjZcdCAgICAgKi9cbiAgIDEyN1x0ICAgIHB1YmxpYyBpbnRlcmZhY2UgU3FsT3BlcmF0aW9uIHtcbiAgIDEyOFx0ICAgICAgICBTdHJpbmcgZ2V0U3FsKCk7XG4gICAxMjlcdCAgICAgICAgdm9pZCBzZXRQYXJhbWV0ZXJzKFByZXBhcmVkU3RhdGVtZW50IHBzKSB0aHJvd3MgRXhjZXB0aW9uO1xuICAgMTMwXHQgICAgfVxuICAgMTMxXHR9XG4gICAxMzJcdFxuXG5SZXZpZXcgdGhlIGNoYW5nZXMgYW5kIG1ha2Ugc3VyZSB0aGV5IGFyZSBhcyBleHBlY3RlZCAoY29ycmVjdCBpbmRlbnRhdGlvbiwgbm8gZHVwbGljYXRlIGxpbmVzLCBldGMpLlxuRWRpdCB0aGUgZmlsZSBhZ2FpbiBpZiBuZWNlc3NhcnkuXG4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1XzAxSHVta3FRNDlrOW5Hc254TUpMMXZXVSJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkU6L0hvY1RhcC8wMl9KQVZBLzAzX1Byb2plY3QvSW50ZXJuZXQgTWFuZ2VtZW50IFN5c3RlbSIsImZvbGRlclJvb3QiOiJFOi9Ib2NUYXAvMDJfSkFWQS8wM19Qcm9qZWN0L0ludGVybmV0IE1hbmdlbWVudCBTeXN0ZW0ifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlLCJjdXJyZW50VGVybWluYWwiOnsidGVybWluYWxJZCI6MiwiY3VycmVudFdvcmtpbmdEaXJlY3RvcnkiOiJFOi9Ib2NUYXAvMDJfSkFWQS8wM19Qcm9qZWN0L0ludGVybmV0IE1hbmdlbWVudCBTeXN0ZW0ifX19XSwidGltZXN0YW1wIjoiMjAyNS0wNS0xMVQwOTozNjoyNi42NjVaIiwicmVzcG9uc2VfdGV4dCI6Ik5vdywgbGV0J3MgdXBkYXRlIHRoZSBTdWJzY3JpYmVyREFPIGNsYXNzIHRvIHVzZSB0aGUgZW5oYW5jZWQgRGJPcGVyYXRpb25zIGNsYXNzOlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6ImQxOGFhNTkwLWRhMzQtNGNmZS1hMDI5LTU2MjBhNDRlOThkMSIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfMDE3Nnd5WHpTaDhWTkxwbTJKaFBBMVJDIiwidG9vbF9uYW1lIjoic3RyLXJlcGxhY2UtZWRpdG9yIiwiaW5wdXRfanNvbiI6IntcImNvbW1hbmRcIjogXCJzdHJfcmVwbGFjZVwiLCBcInBhdGhcIjogXCJzcmMvREFPL1N1YnNjcmliZXJEQU8uamF2YVwiLCBcInN0cl9yZXBsYWNlX2VudHJpZXNcIjogW3tcIm9sZF9zdHJcIjogXCIgICAgICAgIC8vIEV4ZWN1dGUgdGhlIHRyYW5zYWN0aW9uXFxuICAgICAgICBEYk9wZXJhdGlvbnMuZXhlY3V0ZVRyYW5zYWN0aW9uKG9wZXJhdGlvbnMsIFxcXCJcXHUwMTEwXFx1MDEwM25nIGtcXHUwMGZkIHRoXFx1MDBlMG5oIGNcXHUwMGY0bmchXFxcIik7XFxuICAgIH1cXG4gICAgfVwiLCBcIm5ld19zdHJcIjogXCIgICAgICAgIC8vIEV4ZWN1dGUgdGhlIHRyYW5zYWN0aW9uXFxuICAgICAgICBEYk9wZXJhdGlvbnMuZXhlY3V0ZVRyYW5zYWN0aW9uKG9wZXJhdGlvbnMsIFxcXCJcXHUwMTEwXFx1MDEwM25nIGtcXHUwMGZkIHRoXFx1MDBlMG5oIGNcXHUwMGY0bmchXFxcIik7XFxuICAgIH1cIiwgXCJvbGRfc3RyX3N0YXJ0X2xpbmVfbnVtYmVyXCI6IDY1LCBcIm9sZF9zdHJfZW5kX2xpbmVfbnVtYmVyXCI6IDY4fV19IiwibWNwX3NlcnZlcl9uYW1lIjoiIiwibWNwX3Rvb2xfbmFtZSI6IiJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiVGhlcmUncyBhbiBleHRyYSBjbG9zaW5nIGJyYWNlIGluIHRoZSBTdWJzY3JpYmVyREFPLmphdmEgZmlsZS4gTGV0J3MgZml4IHRoYXQ6XG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJTdWNjZXNzZnVsbHkgZWRpdGVkIHRoZSBmaWxlIHNyYy9EQU8vU3Vic2NyaWJlckRBTy5qYXZhLlxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZSBmb3IgZW50cnkgd2l0aCBpbmRleCBbMF06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgICAgM1x0ICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NsYXNzLmphdmEgdG8gZWRpdCB0aGlzIHRlbXBsYXRlXG4gICAgIDRcdCAqL1xuICAgICA1XHRwYWNrYWdlIERBTztcbiAgICAgNlx0XG4gICAgIDdcdGltcG9ydCBNb2RlbC5TdWJzY3JpYmVyO1xuICAgICA4XHRpbXBvcnQgamF2YS51dGlsLkxpc3Q7XG4gICAgIDlcdGltcG9ydCBqYXZhLnNxbC5QcmVwYXJlZFN0YXRlbWVudDtcbiAgICAxMFx0aW1wb3J0IGphdmEuc3FsLlRpbWVzdGFtcDtcbiAgICAxMVx0aW1wb3J0IERBTy5EYk9wZXJhdGlvbnMuU3FsT3BlcmF0aW9uO1xuICAgIDEyXHRcbiAgICAxM1x0LyoqXG4gICAgMTRcdCAqXG4gICAgMTVcdCAqIEBhdXRob3IgTmdvYyBUaGFvXG5cblJlc3VsdCBmb3Igc3RyX3JlcGxhY2UgZm9yIGVudHJ5IHdpdGggaW5kZXggWzFdOlxuUmVwbGFjZW1lbnQgc3VjY2Vzc2Z1bC5cbkVkaXRlZCBzZWN0aW9uIGFmdGVyIElERSBhdXRvLWZvcm1hdHRpbmcgd2FzIGFwcGxpZWQ6XG4gICAgMTVcdCAqIEBhdXRob3IgTmdvYyBUaGFvXG4gICAgMTZcdCAqL1xuICAgIDE3XHRwdWJsaWMgY2xhc3MgU3Vic2NyaWJlckRBT3tcbiAgICAxOFx0XG4gICAgMTlcdCAgICBwdWJsaWMgc3RhdGljIHZvaWQgaW5zZXJ0KGZpbmFsIFN1YnNjcmliZXIgb2JqKSB7XG4gICAgMjBcdCAgICAgICAgLy8gR2VuZXJhdGUgdXNlcl9pZCBhbmQgc3Vic2NyaWJlcl9pZFxuICAgIDIxXHQgICAgICAgIGZpbmFsIGludCB1c2VySWQgPSBEYk9wZXJhdGlvbnMuZ2V0TmV4dElkKFwiVVNFUlwiLCBcInVzZXJfaWRcIik7XG4gICAgMjJcdCAgICAgICAgZmluYWwgaW50IHN1YnNjcmliZXJJZCA9IERiT3BlcmF0aW9ucy5nZXROZXh0SWQoXCJTVUJTQ1JJQkVSXCIsIFwic3Vic2NyaWJlcl9pZFwiKTtcbiAgICAyM1x0XG4gICAgMjRcdCAgICAgICAgLy8gU2V0IHRoZSBnZW5lcmF0ZWQgSURzXG4gICAgMjVcdCAgICAgICAgb2JqLnNldFVzZXJfaWQodXNlcklkKTtcbiAgICAyNlx0ICAgICAgICBvYmouc2V0U3Vic2NyaWJlcl9pZChzdWJzY3JpYmVySWQpO1xuICAgIDI3XHRcbiAgICAyOFx0ICAgICAgICAvLyBDcmVhdGUgU1FMIG9wZXJhdGlvbnMgZm9yIHRoZSB0cmFuc2FjdGlvblxuICAgIDI5XHQgICAgICAgIFNxbE9wZXJhdGlvbltdIG9wZXJhdGlvbnMgPSBuZXcgU3FsT3BlcmF0aW9uW10ge1xuICAgIDMwXHQgICAgICAgICAgICAvLyBJbnNlcnQgaW50byBVU0VSIHRhYmxlXG4gICAgMzFcdCAgICAgICAgICAgIG5ldyBTcWxPcGVyYXRpb24oKSB7XG4gICAgMzJcdCAgICAgICAgICAgICAgICBAT3ZlcnJpZGVcbiAgICAzM1x0ICAgICAgICAgICAgICAgIHB1YmxpYyBTdHJpbmcgZ2V0U3FsKCkge1xuICAgIDM0XHQgICAgICAgICAgICAgICAgICAgIHJldHVybiBcIklOU0VSVCBJTlRPIFVTRVIodXNlcl9pZCwgdXNlcm5hbWUsIHBhc3N3b3JkLCByb2xlLCBjcmVhdGVkX2F0KSBWQUxVRVMgKD8sID8sID8sID8sID8pXCI7XG4gICAgMzVcdCAgICAgICAgICAgICAgICB9XG4gICAgMzZcdFxuICAgIDM3XHQgICAgICAgICAgICAgICAgQE92ZXJyaWRlXG4gICAgMzhcdCAgICAgICAgICAgICAgICBwdWJsaWMgdm9pZCBzZXRQYXJhbWV0ZXJzKFByZXBhcmVkU3RhdGVtZW50IHBzKSB0aHJvd3MgRXhjZXB0aW9uIHtcbiAgICAzOVx0ICAgICAgICAgICAgICAgICAgICBwcy5zZXRJbnQoMSwgdXNlcklkKTtcbiAgICA0MFx0ICAgICAgICAgICAgICAgICAgICBwcy5zZXRTdHJpbmcoMiwgb2JqLmdldFVzZXJuYW1lKCkpO1xuICAgIDQxXHQgICAgICAgICAgICAgICAgICAgIHBzLnNldFN0cmluZygzLCBvYmouZ2V0UGFzc3dvcmQoKSk7XG4gICAgNDJcdCAgICAgICAgICAgICAgICAgICAgcHMuc2V0U3RyaW5nKDQsIG9iai5nZXRSb2xlKCkpO1xuICAgIDQzXHQgICAgICAgICAgICAgICAgICAgIHBzLnNldFRpbWVzdGFtcCg1LCBUaW1lc3RhbXAudmFsdWVPZihvYmouZ2V0Q3JlYXRlX2F0KCkpKTtcbiAgICA0NFx0ICAgICAgICAgICAgICAgIH1cbiAgICA0NVx0ICAgICAgICAgICAgfSxcbiAgICA0Nlx0XG4gICAgNDdcdCAgICAgICAgICAgIC8vIEluc2VydCBpbnRvIFNVQlNDUklCRVIgdGFibGVcbiAgICA0OFx0ICAgICAgICAgICAgbmV3IFNxbE9wZXJhdGlvbigpIHtcbiAgICA0OVx0ICAgICAgICAgICAgICAgIEBPdmVycmlkZVxuICAgIDUwXHQgICAgICAgICAgICAgICAgcHVibGljIFN0cmluZyBnZXRTcWwoKSB7XG4gICAgNTFcdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiSU5TRVJUIElOVE8gU1VCU0NSSUJFUiAoc3Vic2NyaWJlcl9pZCwgbmFtZSwgYWRkcmVzcywgcGhvbmUsIHVzZXJfaWQpIFZBTFVFUyAoPywgPywgPywgPywgPylcIjtcbiAgICA1Mlx0ICAgICAgICAgICAgICAgIH1cbiAgICA1M1x0XG4gICAgNTRcdCAgICAgICAgICAgICAgICBAT3ZlcnJpZGVcbiAgICA1NVx0ICAgICAgICAgICAgICAgIHB1YmxpYyB2b2lkIHNldFBhcmFtZXRlcnMoUHJlcGFyZWRTdGF0ZW1lbnQgcHMpIHRocm93cyBFeGNlcHRpb24ge1xuICAgIDU2XHQgICAgICAgICAgICAgICAgICAgIHBzLnNldEludCgxLCBzdWJzY3JpYmVySWQpO1xuICAgIDU3XHQgICAgICAgICAgICAgICAgICAgIHBzLnNldFN0cmluZygyLCBvYmouZ2V0RnVsbE5hbWUoKSk7XG4gICAgNThcdCAgICAgICAgICAgICAgICAgICAgcHMuc2V0U3RyaW5nKDMsIG9iai5nZXRBZGRyZXNzKCkpO1xuICAgIDU5XHQgICAgICAgICAgICAgICAgICAgIHBzLnNldFN0cmluZyg0LCBvYmouZ2V0UGhvbmUoKSk7XG4gICAgNjBcdCAgICAgICAgICAgICAgICAgICAgcHMuc2V0SW50KDUsIHVzZXJJZCk7XG4gICAgNjFcdCAgICAgICAgICAgICAgICB9XG4gICAgNjJcdCAgICAgICAgICAgIH1cbiAgICA2M1x0ICAgICAgICB9O1xuICAgIDY0XHRcbiAgICA2NVx0ICAgICAgICAvLyBFeGVjdXRlIHRoZSB0cmFuc2FjdGlvblxuICAgIDY2XHQgICAgICAgIERiT3BlcmF0aW9ucy5leGVjdXRlVHJhbnNhY3Rpb24ob3BlcmF0aW9ucywgXCLEkMSDbmcga8O9IHRow6BuaCBjw7RuZyFcIik7XG4gICAgNjdcdCAgICB9XG4gICAgNjhcdCAgICB9XG4gICAgNjlcdFxuICAgIDcwXHQgICAgcHVibGljIHN0YXRpYyB2b2lkIHVwZGF0ZShTdWJzY3JpYmVyIG9iaikge1xuICAgIDcxXHQgICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbihcIk5vdCBzdXBwb3J0ZWQgeWV0LlwiKTsgLy8gR2VuZXJhdGVkIGZyb20gbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NvZGUvR2VuZXJhdGVkTWV0aG9kQm9keVxuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlIGZvciBlbnRyeSB3aXRoIGluZGV4IFsyXTpcblJlcGxhY2VtZW50IHN1Y2Nlc3NmdWwuXG5FZGl0ZWQgc2VjdGlvbiBhZnRlciBJREUgYXV0by1mb3JtYXR0aW5nIHdhcyBhcHBsaWVkOlxuICAgIDgyXHQgICAgcHVibGljIHN0YXRpYyBMaXN0PFN1YnNjcmliZXI+IGdldEFsbCgpIHtcbiAgICA4M1x0ICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oXCJOb3Qgc3VwcG9ydGVkIHlldC5cIik7IC8vIEdlbmVyYXRlZCBmcm9tIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9Db2RlL0dlbmVyYXRlZE1ldGhvZEJvZHlcbiAgICA4NFx0ICAgIH1cbiAgICA4NVx0XG4gICAgODZcdFxuICAgIDg3XHR9XG4gICAgODhcdFxuXG5SZXZpZXcgdGhlIGNoYW5nZXMgYW5kIG1ha2Ugc3VyZSB0aGV5IGFyZSBhcyBleHBlY3RlZCAoY29ycmVjdCBpbmRlbnRhdGlvbiwgbm8gZHVwbGljYXRlIGxpbmVzLCBldGMpLlxuRWRpdCB0aGUgZmlsZSBhZ2FpbiBpZiBuZWNlc3NhcnkuXG4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1XzAxWUZlVndKMU1ZWkJNMUJ4SFlETWFTVSJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkU6L0hvY1RhcC8wMl9KQVZBLzAzX1Byb2plY3QvSW50ZXJuZXQgTWFuZ2VtZW50IFN5c3RlbSIsImZvbGRlclJvb3QiOiJFOi9Ib2NUYXAvMDJfSkFWQS8wM19Qcm9qZWN0L0ludGVybmV0IE1hbmdlbWVudCBTeXN0ZW0ifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlLCJjdXJyZW50VGVybWluYWwiOnsidGVybWluYWxJZCI6MiwiY3VycmVudFdvcmtpbmdEaXJlY3RvcnkiOiJFOi9Ib2NUYXAvMDJfSkFWQS8wM19Qcm9qZWN0L0ludGVybmV0IE1hbmdlbWVudCBTeXN0ZW0ifX19XSwidGltZXN0YW1wIjoiMjAyNS0wNS0xMVQwOTozNjo1My42MTdaIiwicmVzcG9uc2VfdGV4dCI6IlRoZXJlJ3MgYW4gZXh0cmEgY2xvc2luZyBicmFjZSBpbiB0aGUgU3Vic2NyaWJlckRBTy5qYXZhIGZpbGUuIExldCdzIGZpeCB0aGF0OlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6Ijg2ODI4N2RlLWYwZmEtNGI1YS1hNDcxLWQ5MDdiYTE0NDUxMCIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IiMjIFN1bW1hcnkgb2YgQ2hhbmdlc1xuXG5JJ3ZlIHVwZGF0ZWQgdGhlIHNvbHV0aW9uIHRvIHVzZSB0aGUgRGJPcGVyYXRpb25zIGNsYXNzIGZvciBkYXRhYmFzZSBvcGVyYXRpb25zLiBIZXJlJ3MgYSBzdW1tYXJ5IG9mIHRoZSBjaGFuZ2VzOlxuXG4xLiAqKkVuaGFuY2VkIERiT3BlcmF0aW9ucyBjbGFzcyoqOlxuICAgLSBBZGRlZCBhIGBnZXROZXh0SWRgIG1ldGhvZCB0byBnZW5lcmF0ZSB1bmlxdWUgSURzIGZvciBkYXRhYmFzZSB0YWJsZXNcbiAgIC0gQWRkZWQgYW4gYGV4ZWN1dGVUcmFuc2FjdGlvbmAgbWV0aG9kIHRvIGhhbmRsZSB0cmFuc2FjdGlvbnMgd2l0aCBtdWx0aXBsZSBTUUwgb3BlcmF0aW9uc1xuICAgLSBDcmVhdGVkIGEgYFNxbE9wZXJhdGlvbmAgaW50ZXJmYWNlIHRvIGRlZmluZSBTUUwgb3BlcmF0aW9ucyB3aXRoIHByZXBhcmVkIHN0YXRlbWVudHNcblxuMi4gKipVcGRhdGVkIFN1YnNjcmliZXJEQU8gY2xhc3MqKjpcbiAgIC0gU2ltcGxpZmllZCB0aGUgYGluc2VydGAgbWV0aG9kIHRvIHVzZSB0aGUgZW5oYW5jZWQgRGJPcGVyYXRpb25zIGNsYXNzXG4gICAtIFJlbW92ZWQgdGhlIHJlZHVuZGFudCBgZ2VuZXJhdGVOZXh0SWRgIG1ldGhvZCBzaW5jZSBpdCdzIG5vdyBwYXJ0IG9mIERiT3BlcmF0aW9uc1xuICAgLSBVc2VkIHRoZSB0cmFuc2FjdGlvbiBzdXBwb3J0IGZyb20gRGJPcGVyYXRpb25zIHRvIGVuc3VyZSBkYXRhIGludGVncml0eVxuXG4zLiAqKktlcHQgdGhlIFNpZ25VcCBjbGFzcyBpbXByb3ZlbWVudHMqKjpcbiAgIC0gQmV0dGVyIHZhbGlkYXRpb24gbG9naWNcbiAgIC0gSW1wcm92ZWQgZXJyb3IgaGFuZGxpbmdcblxuIyMgQmVuZWZpdHMgb2YgdGhlIE5ldyBJbXBsZW1lbnRhdGlvblxuXG4xLiAqKkNvZGUgUmV1c2FiaWxpdHkqKjogVGhlIGVuaGFuY2VkIERiT3BlcmF0aW9ucyBjbGFzcyBjYW4gYmUgdXNlZCB0aHJvdWdob3V0IHRoZSBhcHBsaWNhdGlvbiBmb3Igc2ltaWxhciBkYXRhYmFzZSBvcGVyYXRpb25zLlxuXG4yLiAqKkNsZWFuZXIgQ29kZSoqOiBUaGUgU3Vic2NyaWJlckRBTyBjbGFzcyBpcyBub3cgbW9yZSBmb2N1c2VkIG9uIGl0cyBzcGVjaWZpYyBmdW5jdGlvbmFsaXR5IHJhdGhlciB0aGFuIGRhdGFiYXNlIGNvbm5lY3Rpb24gbWFuYWdlbWVudC5cblxuMy4gKipCZXR0ZXIgVHJhbnNhY3Rpb24gTWFuYWdlbWVudCoqOiBUaGUgdHJhbnNhY3Rpb24gaGFuZGxpbmcgaXMgY2VudHJhbGl6ZWQgaW4gdGhlIERiT3BlcmF0aW9ucyBjbGFzcywgbWFraW5nIGl0IG1vcmUgY29uc2lzdGVudCBhbmQgcmVsaWFibGUuXG5cbjQuICoqSW1wcm92ZWQgRXJyb3IgSGFuZGxpbmcqKjogRXJyb3IgbWVzc2FnZXMgYXJlIG1vcmUgdXNlci1mcmllbmRseSBhbmQgcHJvdmlkZSBiZXR0ZXIgZmVlZGJhY2suXG5cblRoZXNlIGNoYW5nZXMgc2hvdWxkIGZpeCB0aGUgZm9yZWlnbiBrZXkgY29uc3RyYWludCBlcnJvciB3aGlsZSBtYWtpbmcgdGhlIGNvZGUgbW9yZSBtYWludGFpbmFibGUgYW5kIGNvbnNpc3RlbnQgd2l0aCB0aGUgcmVzdCBvZiB0aGUgYXBwbGljYXRpb24uXG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InVuc2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IlN1Y2Nlc3NmdWxseSBlZGl0ZWQgdGhlIGZpbGUgc3JjL0RBTy9TdWJzY3JpYmVyREFPLmphdmEuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlIGZvciBlbnRyeSB3aXRoIGluZGV4IFswXTpcblJlcGxhY2VtZW50IHN1Y2Nlc3NmdWwuXG5FZGl0ZWQgc2VjdGlvbiBhZnRlciBJREUgYXV0by1mb3JtYXR0aW5nIHdhcyBhcHBsaWVkOlxuICAgIDYxXHQgICAgICAgICAgICAgICAgfVxuICAgIDYyXHQgICAgICAgICAgICB9XG4gICAgNjNcdCAgICAgICAgfTtcbiAgICA2NFx0XG4gICAgNjVcdCAgICAgICAgLy8gRXhlY3V0ZSB0aGUgdHJhbnNhY3Rpb25cbiAgICA2Nlx0ICAgICAgICBEYk9wZXJhdGlvbnMuZXhlY3V0ZVRyYW5zYWN0aW9uKG9wZXJhdGlvbnMsIFwixJDEg25nIGvDvSB0aMOgbmggY8O0bmchXCIpO1xuICAgIDY3XHQgICAgfVxuICAgIDY4XHRcbiAgICA2OVx0ICAgIHB1YmxpYyBzdGF0aWMgdm9pZCB1cGRhdGUoU3Vic2NyaWJlciBvYmopIHtcbiAgICA3MFx0ICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oXCJOb3Qgc3VwcG9ydGVkIHlldC5cIik7IC8vIEdlbmVyYXRlZCBmcm9tIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9Db2RlL0dlbmVyYXRlZE1ldGhvZEJvZHlcbiAgICA3MVx0ICAgIH1cblxuUmV2aWV3IHRoZSBjaGFuZ2VzIGFuZCBtYWtlIHN1cmUgdGhleSBhcmUgYXMgZXhwZWN0ZWQgKGNvcnJlY3QgaW5kZW50YXRpb24sIG5vIGR1cGxpY2F0ZSBsaW5lcywgZXRjKS5cbkVkaXQgdGhlIGZpbGUgYWdhaW4gaWYgbmVjZXNzYXJ5LlxuIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV8wMTc2d3lYelNoOFZOTHBtMkpoUEExUkMifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJFOi9Ib2NUYXAvMDJfSkFWQS8wM19Qcm9qZWN0L0ludGVybmV0IE1hbmdlbWVudCBTeXN0ZW0iLCJmb2xkZXJSb290IjoiRTovSG9jVGFwLzAyX0pBVkEvMDNfUHJvamVjdC9JbnRlcm5ldCBNYW5nZW1lbnQgU3lzdGVtIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZSwiY3VycmVudFRlcm1pbmFsIjp7InRlcm1pbmFsSWQiOjIsImN1cnJlbnRXb3JraW5nRGlyZWN0b3J5IjoiRTovSG9jVGFwLzAyX0pBVkEvMDNfUHJvamVjdC9JbnRlcm5ldCBNYW5nZW1lbnQgU3lzdGVtIn19fV0sInRpbWVzdGFtcCI6IjIwMjUtMDUtMTFUMDk6Mzc6MDAuNzQ4WiIsInJlc3BvbnNlX3RleHQiOiIjIyBTdW1tYXJ5IG9mIENoYW5nZXNcblxuSSd2ZSB1cGRhdGVkIHRoZSBzb2x1dGlvbiB0byB1c2UgdGhlIERiT3BlcmF0aW9ucyBjbGFzcyBmb3IgZGF0YWJhc2Ugb3BlcmF0aW9ucy4gSGVyZSdzIGEgc3VtbWFyeSBvZiB0aGUgY2hhbmdlczpcblxuMS4gKipFbmhhbmNlZCBEYk9wZXJhdGlvbnMgY2xhc3MqKjpcbiAgIC0gQWRkZWQgYSBgZ2V0TmV4dElkYCBtZXRob2QgdG8gZ2VuZXJhdGUgdW5pcXVlIElEcyBmb3IgZGF0YWJhc2UgdGFibGVzXG4gICAtIEFkZGVkIGFuIGBleGVjdXRlVHJhbnNhY3Rpb25gIG1ldGhvZCB0byBoYW5kbGUgdHJhbnNhY3Rpb25zIHdpdGggbXVsdGlwbGUgU1FMIG9wZXJhdGlvbnNcbiAgIC0gQ3JlYXRlZCBhIGBTcWxPcGVyYXRpb25gIGludGVyZmFjZSB0byBkZWZpbmUgU1FMIG9wZXJhdGlvbnMgd2l0aCBwcmVwYXJlZCBzdGF0ZW1lbnRzXG5cbjIuICoqVXBkYXRlZCBTdWJzY3JpYmVyREFPIGNsYXNzKio6XG4gICAtIFNpbXBsaWZpZWQgdGhlIGBpbnNlcnRgIG1ldGhvZCB0byB1c2UgdGhlIGVuaGFuY2VkIERiT3BlcmF0aW9ucyBjbGFzc1xuICAgLSBSZW1vdmVkIHRoZSByZWR1bmRhbnQgYGdlbmVyYXRlTmV4dElkYCBtZXRob2Qgc2luY2UgaXQncyBub3cgcGFydCBvZiBEYk9wZXJhdGlvbnNcbiAgIC0gVXNlZCB0aGUgdHJhbnNhY3Rpb24gc3VwcG9ydCBmcm9tIERiT3BlcmF0aW9ucyB0byBlbnN1cmUgZGF0YSBpbnRlZ3JpdHlcblxuMy4gKipLZXB0IHRoZSBTaWduVXAgY2xhc3MgaW1wcm92ZW1lbnRzKio6XG4gICAtIEJldHRlciB2YWxpZGF0aW9uIGxvZ2ljXG4gICAtIEltcHJvdmVkIGVycm9yIGhhbmRsaW5nXG5cbiMjIEJlbmVmaXRzIG9mIHRoZSBOZXcgSW1wbGVtZW50YXRpb25cblxuMS4gKipDb2RlIFJldXNhYmlsaXR5Kio6IFRoZSBlbmhhbmNlZCBEYk9wZXJhdGlvbnMgY2xhc3MgY2FuIGJlIHVzZWQgdGhyb3VnaG91dCB0aGUgYXBwbGljYXRpb24gZm9yIHNpbWlsYXIgZGF0YWJhc2Ugb3BlcmF0aW9ucy5cblxuMi4gKipDbGVhbmVyIENvZGUqKjogVGhlIFN1YnNjcmliZXJEQU8gY2xhc3MgaXMgbm93IG1vcmUgZm9jdXNlZCBvbiBpdHMgc3BlY2lmaWMgZnVuY3Rpb25hbGl0eSByYXRoZXIgdGhhbiBkYXRhYmFzZSBjb25uZWN0aW9uIG1hbmFnZW1lbnQuXG5cbjMuICoqQmV0dGVyIFRyYW5zYWN0aW9uIE1hbmFnZW1lbnQqKjogVGhlIHRyYW5zYWN0aW9uIGhhbmRsaW5nIGlzIGNlbnRyYWxpemVkIGluIHRoZSBEYk9wZXJhdGlvbnMgY2xhc3MsIG1ha2luZyBpdCBtb3JlIGNvbnNpc3RlbnQgYW5kIHJlbGlhYmxlLlxuXG40LiAqKkltcHJvdmVkIEVycm9yIEhhbmRsaW5nKio6IEVycm9yIG1lc3NhZ2VzIGFyZSBtb3JlIHVzZXItZnJpZW5kbHkgYW5kIHByb3ZpZGUgYmV0dGVyIGZlZWRiYWNrLlxuXG5UaGVzZSBjaGFuZ2VzIHNob3VsZCBmaXggdGhlIGZvcmVpZ24ga2V5IGNvbnN0cmFpbnQgZXJyb3Igd2hpbGUgbWFraW5nIHRoZSBjb2RlIG1vcmUgbWFpbnRhaW5hYmxlIGFuZCBjb25zaXN0ZW50IHdpdGggdGhlIHJlc3Qgb2YgdGhlIGFwcGxpY2F0aW9uLlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJyZXF1ZXN0X2lkIjoiNzMwOGI2NGEtMjExMy00NzM5LWEzZTQtMzkzNDA1ZDlhYmQyIiwidXVpZCI6IjAzYjE0YzI0LTZhZDctNDlkOS1iZGQwLTAzZjIxNGZmYjZmMSIsImNoYXRJdGVtVHlwZSI6ImFnZW50aWMtY2hlY2twb2ludC1kZWxpbWl0ZXIiLCJzdGF0dXMiOiJzdWNjZXNzIiwiZnJvbVRpbWVzdGFtcCI6MTc0Njk1NjEwNTgyNSwidG9UaW1lc3RhbXAiOjE3NDY5NTYyMjg5MjB9LHsicmVxdWVzdF9pZCI6IjI0NTllNWE4LTg4MjktNGU2Ni1iZWM1LTYwZTA4NTkxMGZhMyIsInV1aWQiOiIyMzRiYmM2Yi1hZThkLTQxMTEtOGI4NS01MmQ4ZDExZDFhNDMiLCJjaGF0SXRlbVR5cGUiOiJhZ2VudGljLWNoZWNrcG9pbnQtZGVsaW1pdGVyIiwic3RhdHVzIjoic3VjY2VzcyIsImZyb21UaW1lc3RhbXAiOjE3NDY5NTYyMjg5MjAsInRvVGltZXN0YW1wIjoxNzQ3MDk5MDcxODAwfV0sImZlZWRiYWNrU3RhdGVzIjp7InRlbXAtZmUtNmViYjY3MTMtNGMyNi00MThhLTgyMDMtNTFlYThkMzYwNzk5Ijp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS0zZmM0MDE2YS03OWQ1LTRhMWQtYjA2YS01NmVjNzg2YWUwOWQiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLWQ1MjIzMmM5LTQwYjEtNGNiYi1hNmU3LTY5ZWJiNzNmYWQ5ZCI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtYjczZjgzNWMtNjc5Zi00ODMzLWIzYjItY2VkMzg1YWUwY2JkIjp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS02MTc4MmFjYy03ZDFmLTQ0YTktOTA0YS05NmU1NWYwZmFiNzUiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLTU5NmM1Y2IxLWRjNjEtNGZlZi1hNTcyLWYzYWQ4MmMwNGI5ZCI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtYTBmZWIzZjgtNzhmNS00YmY5LWE1YWItZGQ2MzgyOTY3MzdhIjp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS1iNDM0MWI3NC03ZTBmLTRmYWUtOGU0OS0xYzE1Nzg3MGZjNjEiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLWQ1MzhmN2E0LTYyYzUtNDk5ZS1iNGUyLTI1NjI4ZmE3ODRjNyI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtM2I3Y2U5ZTEtOTlmYi00ZTAxLWJmODItZTc0ODYwZjMxZTliIjp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS0xMjYwNGZiOS0xZDk5LTRlODgtYjYzMy02ODU1NmUwMzY4ZmEiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLTYwMDFiYjVlLWVmOWQtNGJhOC05YzkyLTQ1ZDRiZDBjYTlkOSI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtNTZlODY0MTctYjcyNS00ZTkxLWJiNDktZjNkODQyNTAxZDc4Ijp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS03MWU4Zjc3YS03NDEwLTQ1ZWQtOTg2MS1kODBmNzE4YjBmMGMiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9fSwidG9vbFVzZVN0YXRlcyI6eyJhMWY2YTBmMy1mOTVjLTQwZjAtYTEzOS1iNGYwZmJhZDFkZDg7dG9vbHVfMDFDd3lMS1FHdHpacHU1WU5lbkpub1VLIjp7InJlcXVlc3RJZCI6ImExZjZhMGYzLWY5NWMtNDBmMC1hMTM5LWI0ZjBmYmFkMWRkOCIsInRvb2xVc2VJZCI6InRvb2x1XzAxQ3d5TEtRR3R6WnB1NVlOZW5Kbm9VSyIsInBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IlRoZSBmb2xsb3dpbmcgY29kZSBzZWN0aW9ucyB3ZXJlIHJldHJpZXZlZDpcblBhdGg6IHNyYy9EQU8vU3Vic2NyaWJlckRBTy5qYXZhXG4vKlxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9MaWNlbnNlcy9saWNlbnNlLWRlZmF1bHQudHh0IHRvIGNoYW5nZSB0aGlzIGxpY2Vuc2VcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9DbGFzcy5qYXZhIHRvIGVkaXQgdGhpcyB0ZW1wbGF0ZVxuICovXG5wYWNrYWdlIERBTztcblxuaW1wb3J0IE1vZGVsLlN1YnNjcmliZXI7XG5pbXBvcnQgamF2YS51dGlsLkxpc3Q7XG5pbXBvcnQgamF2YS5zcWwuQ29ubmVjdGlvbjtcbmltcG9ydCBqYXZhLnNxbC5QcmVwYXJlZFN0YXRlbWVudDtcbmltcG9ydCBqYXZhLnNxbC5UaW1lc3RhbXA7XG5cbi8qKlxuICpcbiAqIEBhdXRob3IgTmdvYyBUaGFvXG4gKi9cbnB1YmxpYyBjbGFzcyBTdWJzY3JpYmVyREFPe1xuXG4gICAgcHVibGljIHN0YXRpYyB2b2lkIGluc2VydChTdWJzY3JpYmVyIG9iaikge1xuICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgICAgICBQcmVwYXJlZFN0YXRlbWVudCBwc1VzZXIgPSBudWxsO1xuICAgICAgICBQcmVwYXJlZFN0YXRlbWVudCBwc1N1YnNjcmliZXIgPSBudWxsO1xuICAgICAgICBcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbm4gPSBDb25uZWN0aW9uUHJvdmlkZXIuZ2V0Q29ubigpO1xuICAgICAgICAgICAgY29ubi5zZXRBdXRvQ29tbWl0KGZhbHNlKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgU3RyaW5nIHNxbFVzZXIgPSBcIklOU0VSVCBJTlRPIFVTRVIodXNlcl9pZCwgdXNlcm5hbWUsIHBhc3N3b3JkLCByb2xlLCBjcmVhdGVkX2F0KSBWQUxVRVMgKD8sID8sID8sID8sID8pXCI7XG4gICAgICAgICAgICBwc1VzZXIgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsVXNlcik7XG4gICAgICAgICAgICBwc1VzZXIuc2V0SW50KDEsIG9iai5nZXRVc2VyX2lkKCkpO1xuICAgICAgICAgICAgcHNVc2VyLnNldFN0cmluZygyLCBvYmouZ2V0VXNlcm5hbWUoKSk7XG4gICAgICAgICAgICBwc1VzZXIuc2V0U3RyaW5nKDMsIG9iai5nZXRQYXNzd29yZCgpKTtcbiAgICAgICAgICAgIHBzVXNlci5zZXRTdHJpbmcoNCwgb2JqLmdldFJvbGUoKSk7XG4gICAgICAgICAgICBwc1VzZXIuc2V0VGltZXN0YW1wKDUsIFRpbWVzdGFtcC52YWx1ZU9mKG9iai5nZXRDcmVhdGVfYXQoKSkpO1xuICAgICAgICAgICAgcHNVc2VyLmV4ZWN1dGVVcGRhdGUoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgU3RyaW5nIHNxbFN1YnNjcmliZXIgPSBcIklOU0VSVCBJTlRPIFNVQlNDUklCRVIgKHN1YnNjcmliZXJfaWQsIG5hbWUsIGFkZHJlc3MsIHBob25lLCB1c2VyX2lkKSBWQUxVRVMgKD8sID8sID8sID8sID8pXCI7XG4gICAgICAgICAgICBwc1N1YnNjcmliZXIgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsU3Vic2NyaWJlcik7XG4gICAgICAgICAgICBwc1N1YnNjcmliZXIuc2V0SW50KDEsIG9iai5nZXRTdWJzY3JpYmVyX2lkKCkpO1xuICAgICAgICAgICAgcHNTdWJzY3JpYmVyLnNldFN0cmluZygyLCBvYmouZ2V0RnVsbE5hbWUoKSk7XG4gICAgICAgICAgICBwc1N1YnNjcmliZXIuc2V0U3RyaW5nKDMsIG9iai5nZXRBZGRyZXNzKCkpO1xuICAgICAgICAgICAgcHNTdWJzY3JpYmVyLnNldFN0cmluZyg0LCBvYmouZ2V0UGhvbmUoKSk7XG4gICAgICAgICAgICBwc1N1YnNjcmliZXIuc2V0SW50KDUsIG9iai5nZXRVc2VyX2lkKCkpO1xuICAgICAgICAgICAgcHNTdWJzY3JpYmVyLmV4ZWN1dGVVcGRhdGUoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29ubi5jb21taXQoKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbm4gIT0gbnVsbCkgY29ubi5yb2xsYmFjaygpO1xuICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIHJvbGxiYWNrRXgpIHtcbiAgICAgICAgICAgICAgICByb2xsYmFja0V4LnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKHBzU3Vic2NyaWJlciAhPSBudWxsKSBwc1N1YnNjcmliZXIuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICBpZiAocHNVc2VyICE9IG51bGwpIHBzVXNlci5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIGlmIChjb25uICE9IG51bGwpIGNvbm4uY2xvc2UoKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBleCkge1xuICAgICAgICAgICAgICAgIGV4LnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyB2b2lkIHVwZGF0ZShTdWJzY3JpYmVyIG9iaikge1xuICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oXCJOb3Qgc3VwcG9ydGVkIHlldC5cIik7IC8vIEdlbmVyYXRlZCBmcm9tIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9Db2RlL0dlbmVyYXRlZE1ldGhvZEJvZHlcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIHZvaWQgZGVsZXRlKGludCBpZCkge1xuICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oXCJOb3Qgc3VwcG9ydGVkIHlldC5cIik7IC8vIEdlbmVyYXRlZCBmcm9tIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9Db2RlL0dlbmVyYXRlZE1ldGhvZEJvZHlcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIFN1YnNjcmliZXIgZ2V0QnlJZChpbnQgaWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpOyAvLyBHZW5lcmF0ZWQgZnJvbSBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ29kZS9HZW5lcmF0ZWRNZXRob2RCb2R5XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBMaXN0PFN1YnNjcmliZXI+IGdldEFsbCgpIHtcbiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpOyAvLyBHZW5lcmF0ZWQgZnJvbSBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ29kZS9HZW5lcmF0ZWRNZXRob2RCb2R5XG4gICAgfVxuICAgIFxufVxuLi4uXG5QYXRoOiBzcmMvREFPL1VzZXJEQU8uamF2YVxuLypcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvTGljZW5zZXMvbGljZW5zZS1kZWZhdWx0LnR4dCB0byBjaGFuZ2UgdGhpcyBsaWNlbnNlXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ2xhc3MuamF2YSB0byBlZGl0IHRoaXMgdGVtcGxhdGVcbiAqL1xucGFja2FnZSBEQU87XG5cbmltcG9ydCBNb2RlbC5Vc2VyO1xuaW1wb3J0IGphdmEudXRpbC5MaXN0O1xuXG4vKipcbiAqXG4gKiBAYXV0aG9yIE5nb2MgVGhhb1xuICovXG5wdWJsaWMgY2xhc3MgVXNlckRBT3tcblxuICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBpbnNlcnQoVXNlciBvYmopIHtcbiAgICAgICAgXG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyB2b2lkIHVwZGF0ZShVc2VyIG9iaikge1xuICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oXCJOb3Qgc3VwcG9ydGVkIHlldC5cIik7IC8vIEdlbmVyYXRlZCBmcm9tIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9Db2RlL0dlbmVyYXRlZE1ldGhvZEJvZHlcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIHZvaWQgZGVsZXRlKGludCBpZCkge1xuICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oXCJOb3Qgc3VwcG9ydGVkIHlldC5cIik7IC8vIEdlbmVyYXRlZCBmcm9tIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9Db2RlL0dlbmVyYXRlZE1ldGhvZEJvZHlcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIFVzZXIgZ2V0QnlJZChpbnQgaWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpOyAvLyBHZW5lcmF0ZWQgZnJvbSBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ29kZS9HZW5lcmF0ZWRNZXRob2RCb2R5XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBMaXN0PFVzZXI+IGdldEFsbCgpIHtcbiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpOyAvLyBHZW5lcmF0ZWQgZnJvbSBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ29kZS9HZW5lcmF0ZWRNZXRob2RCb2R5XG4gICAgfVxuICAgIFxufVxuLi4uXG5QYXRoOiBzcmMvREFPL0RiT3BlcmF0aW9ucy5qYXZhXG5wYWNrYWdlIERBTztcblxuaW1wb3J0IGphdmEuc3FsLkNvbm5lY3Rpb247XG5pbXBvcnQgamF2YS5zcWwuU3RhdGVtZW50O1xuaW1wb3J0IGphdmF4LnN3aW5nLkpPcHRpb25QYW5lO1xuXG5wdWJsaWMgY2xhc3MgRGJPcGVyYXRpb25zIHtcbiAgICBwdWJsaWMgc3RhdGljIHZvaWQgc2V0RGF0YU9yRGVsZXRlKFN0cmluZyBxdWVyeSwgU3RyaW5nIG1zZykge1xuICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgICAgICBTdGF0ZW1lbnQgc3QgPSBudWxsO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29ubiA9IENvbm5lY3Rpb25Qcm92aWRlci5nZXRDb25uKCk7XG4gICAgICAgICAgICBzdCA9IGNvbm4uY3JlYXRlU3RhdGVtZW50KCk7XG4gICAgICAgICAgICBzdC5leGVjdXRlVXBkYXRlKHF1ZXJ5KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYoIW1zZy5lcXVhbHMoXCJcIikpIHtcbiAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBtc2csIFwiTWVzc2FnZVwiLCBKT3B0aW9uUGFuZS5JTkZPUk1BVElPTl9NRVNTQUdFKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGV4KSB7XG4gICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBleCwgXCJNZXNzYWdlXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAoc3QgIT0gbnVsbCkgc3QuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICBpZiAoY29ubiAhPSBudWxsKSBjb25uLmNsb3NlKCk7XG4gICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG4uLi5cblBhdGg6IHNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL1NpZ25VcC5qYXZhXG4vKlxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9MaWNlbnNlcy9saWNlbnNlLWRlZmF1bHQudHh0IHRvIGNoYW5nZSB0aGlzIGxpY2Vuc2VcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvR1VJRm9ybXMvSkZyYW1lLmphdmEgdG8gZWRpdCB0aGlzIHRlbXBsYXRlXG4gKi9cbnBhY2thZ2UgaW50ZXJuZXQubWFuZ2VtZW50LnN5c3RlbTtcblxuaW1wb3J0IERBTy5TdWJzY3JpYmVyREFPO1xuaW1wb3J0IE1vZGVsLlN1YnNjcmliZXI7XG5pbXBvcnQgamF2YS50aW1lLkxvY2FsRGF0ZVRpbWU7XG5pbXBvcnQgamF2YXguc3dpbmcuSk9wdGlvblBhbmU7XG5cbi8qKlxuICpcbiAqIEBhdXRob3IgTmdvYyBUaGFvXG4gKi9cbnB1YmxpYyBjbGFzcyBTaWduVXAgZXh0ZW5kcyBqYXZheC5zd2luZy5KRnJhbWUge1xuXG4gICAgcHVibGljIFN0cmluZyBwaG9uZVBhdHRlcm4gPSBcIl5bMC05XSokXCI7XG4gICAgcHJpdmF0ZSBTdHJpbmcgREVGQVVMVF9ST0xFID0gXCJ1c2VyXCI7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBuZXcgZm9ybSBTaWduSW5cbiAgICAgKi9cbiAgICBwdWJsaWMgU2lnblVwKCkge1xuICAgICAgICBpbml0Q29tcG9uZW50cygpO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgdm9pZCBjbGVhcigpe1xuICAgICAgICB0eHROYW1lLnNldFRleHQoXCJcIik7XG4gICAgICAgIHR4dFVzZXJOYW1lLnNldFRleHQoXCJcIik7XG4gICAgICAgIHR4dFBhc3N3b3JkLnNldFRleHQoXCJcIik7XG4gICAgICAgIHR4dEFkZHJlc3Muc2V0VGV4dChcIlwiKTtcbiAgICAgICAgdHh0UGhvbmUuc2V0VGV4dChcIlwiKTtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIHZvaWQgdmFsaWRhdGVGaWVsZHMoKXtcbiAgICAgICAgU3RyaW5nIG5hbWUgPSB0eHROYW1lLmdldFRleHQoKTtcbiAgICAgICAgU3RyaW5nIHVzZXJOYW1lID0gdHh0VXNlck5hbWUuZ2V0VGV4dCgpO1xuICAgICAgICBTdHJpbmcgcGFzc3dvcmQgPSB0eHRQYXNzd29yZC5nZXRUZXh0KCk7XG4gICAgICAgIFN0cmluZyBhZGRyZXNzID0gdHh0QWRkcmVzcy5nZXRUZXh0KCk7XG4gICAgICAgIFN0cmluZyBwaG9uZSA9IHR4dFBob25lLmdldFRleHQoKTtcbiAgICAgICAgXG4gICAgICAgIGlmKG5hbWUuZXF1YWxzKFwiXCIpICYmIHVzZXJOYW1lLmVxdWFscyhcIlwiKSAmJiBwYXNzd29yZC5lcXVhbHMoXCJcIikgJiYgYWRkcmVzcy5lcXVhbHMoXCJcIikgJiYgcGhvbmUuZXF1YWxzKFwiXCIpKXtcbiAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwiVnVpIGzDsm5nIGtow7RuZyBi4buPIHRy4buRbmchXCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZihwaG9uZS5sZW5ndGgoKSA9PSAxMCAmJiBwaG9uZS5tYXRjaGVzKHBob25lUGF0dGVybikpIHtcbiAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwiVnVpIGzDsm5nIG5o4bqtcCDEkcO6bmcgxJHhu4tuaCBk4bqhbmcgc+G7kSDEkWnhu4duIHRob+G6oWkhXCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgIH1cbi4uLlxuXG4gICAgICAgIGpGcmFtZTEgPSBuZXcgamF2YXguc3dpbmcuSkZyYW1lKCk7XG4gICAgICAgIGpMYWJlbDEgPSBuZXcgamF2YXguc3dpbmcuSkxhYmVsKCk7XG4gICAgICAgIGpMYWJlbDIgPSBuZXcgamF2YXguc3dpbmcuSkxhYmVsKCk7XG4gICAgICAgIGpMYWJlbDMgPSBuZXcgamF2YXguc3dpbmcuSkxhYmVsKCk7XG4gICAgICAgIGpMYWJlbDQgPSBuZXcgamF2YXguc3dpbmcuSkxhYmVsKCk7XG4gICAgICAgIGpMYWJlbDUgPSBuZXcgamF2YXguc3dpbmcuSkxhYmVsKCk7XG4gICAgICAgIGpMYWJlbDYgPSBuZXcgamF2YXguc3dpbmcuSkxhYmVsKCk7XG4gICAgICAgIHR4dE5hbWUgPSBuZXcgamF2YXguc3dpbmcuSlRleHRGaWVsZCgpO1xuICAgICAgICB0eHRVc2VyTmFtZSA9IG5ldyBqYXZheC5zd2luZy5KVGV4dEZpZWxkKCk7XG4gICAgICAgIHR4dEFkZHJlc3MgPSBuZXcgamF2YXguc3dpbmcuSlRleHRGaWVsZCgpO1xuICAgICAgICB0eHRQaG9uZSA9IG5ldyBqYXZheC5zd2luZy5KVGV4dEZpZWxkKCk7XG4gICAgICAgIHR4dFBhc3N3b3JkID0gbmV3IGphdmF4LnN3aW5nLkpQYXNzd29yZEZpZWxkKCk7XG4gICAgICAgIGJ0blJldHVybiA9IG5ldyBqYXZheC5zd2luZy5KQnV0dG9uKCk7XG4gICAgICAgIGJ0blNpZ251cCA9IG5ldyBqYXZheC5zd2luZy5KQnV0dG9uKCk7XG4gICAgICAgIGpMYWJlbDcgPSBuZXcgamF2YXguc3dpbmcuSkxhYmVsKCk7XG4gICAgICAgIGpMYWJlbDggPSBuZXcgamF2YXguc3dpbmcuSkxhYmVsKCk7XG4gICAgICAgIGpTZXBhcmF0b3IxID0gbmV3IGphdmF4LnN3aW5nLkpTZXBhcmF0b3IoKTtcbiAgICAgICAgalNlcGFyYXRvcjIgPSBuZXcgamF2YXguc3dpbmcuSlNlcGFyYXRvcigpO1xuLi4uXG4gICAgICAgIFxuICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0blJldHVybkFjdGlvblBlcmZvcm1lZFxuXG4gICAgcHJpdmF0ZSB2b2lkIGJ0blNpZ251cEFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5TaWdudXBBY3Rpb25QZXJmb3JtZWRcbiAgICAgICAgLy8gVE9ETyBhZGQgeW91ciBoYW5kbGluZyBjb2RlIGhlcmU6XG4gICAgICAgIFN1YnNjcmliZXIgc3ViID0gbmV3IFN1YnNjcmliZXIoKTtcbiAgICAgICAgc3ViLnNldEZ1bGxOYW1lKHR4dE5hbWUuZ2V0VGV4dCgpKTtcbiAgICAgICAgc3ViLnNldFVzZXJuYW1lKHR4dFVzZXJOYW1lLmdldFRleHQoKSk7XG4gICAgICAgIHN1Yi5zZXRQYXNzd29yZCh0eHRQYXNzd29yZC5nZXRUZXh0KCkpO1xuICAgICAgICBzdWIuc2V0Um9sZShERUZBVUxUX1JPTEUpO1xuICAgICAgICBzdWIuc2V0QWRkcmVzcyh0eHRBZGRyZXNzLmdldFRleHQoKSk7XG4gICAgICAgIHN1Yi5zZXRQaG9uZSh0eHRQaG9uZS5nZXRUZXh0KCkpO1xuICAgICAgICBzdWIuc2V0Q3JlYXRlX2F0KExvY2FsRGF0ZVRpbWUubm93KCkpO1xuICAgICAgICBTdWJzY3JpYmVyREFPLmluc2VydChzdWIpO1xuICAgICAgICBjbGVhcigpO1xuICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0blNpZ251cEFjdGlvblBlcmZvcm1lZFxuXG4gICAgcHJpdmF0ZSB2b2lkIHR4dE5hbWVLZXlSZWxlYXNlZChqYXZhLmF3dC5ldmVudC5LZXlFdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF90eHROYW1lS2V5UmVsZWFzZWRcbiAgICAgICAgLy8gVE9ETyBhZGQgeW91ciBoYW5kbGluZyBjb2RlIGhlcmU6XG4gICAgICAgIHZhbGlkYXRlRmllbGRzKCk7XG4gICAgfS8vR0VOLUxBU1Q6ZXZlbnRfdHh0TmFtZUtleVJlbGVhc2VkXG4uLi5cblBhdGg6IHNyYy9Nb2RlbC9TdWJzY3JpYmVyLmphdmFcbi8qXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0xpY2Vuc2VzL2xpY2Vuc2UtZGVmYXVsdC50eHQgdG8gY2hhbmdlIHRoaXMgbGljZW5zZVxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NsYXNzLmphdmEgdG8gZWRpdCB0aGlzIHRlbXBsYXRlXG4gKi9cbnBhY2thZ2UgTW9kZWw7XG5cbmltcG9ydCBqYXZhLnRpbWUuTG9jYWxEYXRlVGltZTtcblxuLyoqXG4gKlxuICogQGF1dGhvciBOZ29jIFRoYW9cbiAqL1xucHVibGljIGNsYXNzIFN1YnNjcmliZXIgZXh0ZW5kcyBVc2VyIHtcbiAgICBwcml2YXRlIGludCBzdWJzY3JpYmVyX2lkO1xuICAgIHByaXZhdGUgU3RyaW5nIGZ1bGxOYW1lO1xuICAgIHByaXZhdGUgU3RyaW5nIGFkZHJlc3M7XG4gICAgcHJpdmF0ZSBTdHJpbmcgcGhvbmU7XG4gICAgXG4gICAgcHVibGljIFN1YnNjcmliZXIoKSB7XG4gICAgfVxuXG4gICAgcHVibGljIFN1YnNjcmliZXIoaW50IHN1YnNjcmliZXJfaWQsIFN0cmluZyBmdWxsTmFtZSwgU3RyaW5nIGFkZHJlc3MsIFN0cmluZyBwaG9uZSkge1xuICAgICAgICB0aGlzLnN1YnNjcmliZXJfaWQgPSBzdWJzY3JpYmVyX2lkO1xuICAgICAgICB0aGlzLmZ1bGxOYW1lID0gZnVsbE5hbWU7XG4gICAgICAgIHRoaXMuYWRkcmVzcyA9IGFkZHJlc3M7XG4gICAgICAgIHRoaXMucGhvbmUgPSBwaG9uZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgU3Vic2NyaWJlcihpbnQgc3Vic2NyaWJlcl9pZCwgU3RyaW5nIGZ1bGxOYW1lLCBTdHJpbmcgYWRkcmVzcywgU3RyaW5nIHBob25lLCBpbnQgdXNlcl9pZCwgU3RyaW5nIHVzZXJuYW1lLCBTdHJpbmcgcGFzc3dvcmQsIFN0cmluZyByb2xlLCBMb2NhbERhdGVUaW1lIGNyZWF0ZV9hdCkge1xuICAgICAgICBzdXBlcih1c2VyX2lkLCB1c2VybmFtZSwgcGFzc3dvcmQsIHJvbGUsIGNyZWF0ZV9hdCk7XG4gICAgICAgIHRoaXMuc3Vic2NyaWJlcl9pZCA9IHN1YnNjcmliZXJfaWQ7XG4gICAgICAgIHRoaXMuZnVsbE5hbWUgPSBmdWxsTmFtZTtcbiAgICAgICAgdGhpcy5hZGRyZXNzID0gYWRkcmVzcztcbiAgICAgICAgdGhpcy5waG9uZSA9IHBob25lO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgaW50IGdldFN1YnNjcmliZXJfaWQoKSB7XG4gICAgICAgIHJldHVybiBzdWJzY3JpYmVyX2lkO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHNldFN1YnNjcmliZXJfaWQoaW50IHN1YnNjcmliZXJfaWQpIHtcbiAgICAgICAgdGhpcy5zdWJzY3JpYmVyX2lkID0gc3Vic2NyaWJlcl9pZDtcbiAgICB9XG5cbiAgICBwdWJsaWMgU3RyaW5nIGdldEZ1bGxOYW1lKCkge1xuICAgICAgICByZXR1cm4gZnVsbE5hbWU7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgc2V0RnVsbE5hbWUoU3RyaW5nIGZ1bGxOYW1lKSB7XG4gICAgICAgIHRoaXMuZnVsbE5hbWUgPSBmdWxsTmFtZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgU3RyaW5nIGdldEFkZHJlc3MoKSB7XG4gICAgICAgIHJldHVybiBhZGRyZXNzO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHNldEFkZHJlc3MoU3RyaW5nIGFkZHJlc3MpIHtcbiAgICAgICAgdGhpcy5hZGRyZXNzID0gYWRkcmVzcztcbiAgICB9XG5cbiAgICBwdWJsaWMgU3RyaW5nIGdldFBob25lKCkge1xuICAgICAgICByZXR1cm4gcGhvbmU7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgc2V0UGhvbmUoU3RyaW5nIHBob25lKSB7XG4gICAgICAgIHRoaXMucGhvbmUgPSBwaG9uZTtcbiAgICB9XG4gICAgXG4gICAgXG59XG4uLi5cblBhdGg6IHNyYy9EQU8vQ29ubmVjdGlvblByb3ZpZGVyLmphdmFcbi8qXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0xpY2Vuc2VzL2xpY2Vuc2UtZGVmYXVsdC50eHQgdG8gY2hhbmdlIHRoaXMgbGljZW5zZVxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NsYXNzLmphdmEgdG8gZWRpdCB0aGlzIHRlbXBsYXRlXG4gKi9cbnBhY2thZ2UgREFPO1xuXG5pbXBvcnQgamF2YS5zcWwuKjtcblxuLyoqXG4gKlxuICogQGF1dGhvciBOZ29jIFRoYW9cbiAqL1xucHVibGljIGNsYXNzIENvbm5lY3Rpb25Qcm92aWRlciB7XG4gICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nIFVSTCA9IFwiamRiYzpteXNxbDovLzEyNS4yMTIuMjMxLjE4NDo2OTY5L0ludGVybmV0REJcIjtcbiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBTdHJpbmcgVVNFUiA9IFwibWludG9yaTA5XCI7XG4gICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nIFBBU1NXT1JEID0gXCJNaW50b3J5MDlAOTZcIjtcbiAgICBcbiAgICBwdWJsaWMgc3RhdGljIENvbm5lY3Rpb24gZ2V0Q29ubigpe1xuICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBDbGFzcy5mb3JOYW1lKFwiY29tLm15c3FsLmNqLmpkYmMuRHJpdmVyXCIpO1xuICAgICAgICAgICAgY29ubiA9IERyaXZlck1hbmFnZXIuZ2V0Q29ubmVjdGlvbihVUkwsIFVTRVIsIFBBU1NXT1JEKTtcbiAgICAgICAgfSBjYXRjaCAoQ2xhc3NOb3RGb3VuZEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBTeXN0ZW0uZXJyLnByaW50bG4oXCJNeVNRTCBKREJDIERyaXZlciBub3QgZm91bmQuXCIpO1xuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIFN5c3RlbS5lcnIucHJpbnRsbihcIkNvbm5lY3Rpb24gZmFpbGVkLlwiKTtcbiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbm47XG4gICAgfVxuLi4uXG5QYXRoOiBzcmMvTW9kZWwvVXNlci5qYXZhXG4vKlxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9MaWNlbnNlcy9saWNlbnNlLWRlZmF1bHQudHh0IHRvIGNoYW5nZSB0aGlzIGxpY2Vuc2VcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9DbGFzcy5qYXZhIHRvIGVkaXQgdGhpcyB0ZW1wbGF0ZVxuICovXG5wYWNrYWdlIE1vZGVsO1xuXG5pbXBvcnQgamF2YS50aW1lLkxvY2FsRGF0ZVRpbWU7XG4vKipcbiAqXG4gKiBAYXV0aG9yIE5nb2MgVGhhb1xuICovXG5wdWJsaWMgY2xhc3MgVXNlciB7XG4gICAgcHJpdmF0ZSBpbnQgdXNlcl9pZDtcbiAgICBwcml2YXRlIFN0cmluZyB1c2VybmFtZTtcbiAgICBwcml2YXRlIFN0cmluZyBwYXNzd29yZDtcbiAgICBwcml2YXRlIFN0cmluZyByb2xlO1xuICAgIHByaXZhdGUgTG9jYWxEYXRlVGltZSBjcmVhdGVfYXQ7XG5cbiAgICBwdWJsaWMgVXNlcigpIHtcbiAgICB9XG5cbiAgICBwdWJsaWMgVXNlcihpbnQgdXNlcl9pZCwgU3RyaW5nIHVzZXJuYW1lLCBTdHJpbmcgcGFzc3dvcmQsIFN0cmluZyByb2xlLCBMb2NhbERhdGVUaW1lIGNyZWF0ZV9hdCkge1xuICAgICAgICB0aGlzLnVzZXJfaWQgPSB1c2VyX2lkO1xuICAgICAgICB0aGlzLnVzZXJuYW1lID0gdXNlcm5hbWU7XG4gICAgICAgIHRoaXMucGFzc3dvcmQgPSBwYXNzd29yZDtcbiAgICAgICAgdGhpcy5yb2xlID0gcm9sZTtcbiAgICAgICAgdGhpcy5jcmVhdGVfYXQgPSBjcmVhdGVfYXQ7XG4gICAgfVxuXG4gICAgcHVibGljIGludCBnZXRVc2VyX2lkKCkge1xuICAgICAgICByZXR1cm4gdXNlcl9pZDtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXRVc2VyX2lkKGludCB1c2VyX2lkKSB7XG4gICAgICAgIHRoaXMudXNlcl9pZCA9IHVzZXJfaWQ7XG4gICAgfVxuXG4gICAgcHVibGljIFN0cmluZyBnZXRVc2VybmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHVzZXJuYW1lO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHNldFVzZXJuYW1lKFN0cmluZyB1c2VybmFtZSkge1xuICAgICAgICB0aGlzLnVzZXJuYW1lID0gdXNlcm5hbWU7XG4gICAgfVxuXG4gICAgcHVibGljIFN0cmluZyBnZXRQYXNzd29yZCgpIHtcbiAgICAgICAgcmV0dXJuIHBhc3N3b3JkO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHNldFBhc3N3b3JkKFN0cmluZyBwYXNzd29yZCkge1xuICAgICAgICB0aGlzLnBhc3N3b3JkID0gcGFzc3dvcmQ7XG4gICAgfVxuXG4gICAgcHVibGljIFN0cmluZyBnZXRSb2xlKCkge1xuICAgICAgICByZXR1cm4gcm9sZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXRSb2xlKFN0cmluZyByb2xlKSB7XG4gICAgICAgIHRoaXMucm9sZSA9IHJvbGU7XG4gICAgfVxuXG4gICAgcHVibGljIExvY2FsRGF0ZVRpbWUgZ2V0Q3JlYXRlX2F0KCkge1xuICAgICAgICByZXR1cm4gY3JlYXRlX2F0O1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHNldENyZWF0ZV9hdChMb2NhbERhdGVUaW1lIGNyZWF0ZV9hdCkge1xuICAgICAgICB0aGlzLmNyZWF0ZV9hdCA9IGNyZWF0ZV9hdDtcbiAgICB9XG4gICAgXG4gICAgXG59XG4uLi5cblBhdGg6IHNyYy9Nb2RlbC9QbGFuLmphdmFcbi8qXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0xpY2Vuc2VzL2xpY2Vuc2UtZGVmYXVsdC50eHQgdG8gY2hhbmdlIHRoaXMgbGljZW5zZVxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NsYXNzLmphdmEgdG8gZWRpdCB0aGlzIHRlbXBsYXRlXG4gKi9cbnBhY2thZ2UgTW9kZWw7XG5cbi8qKlxuICpcbiAqIEBhdXRob3IgTmdvYyBUaGFvXG4gKi9cbnB1YmxpYyBjbGFzcyBQbGFuIHtcbiAgICBwcml2YXRlIGludCBwbGFuX2lkO1xuICAgIHByaXZhdGUgU3RyaW5nIG5hbWU7XG4gICAgcHJpdmF0ZSBsb25nIHByaWNlO1xuICAgIHByaXZhdGUgaW50IG1heF9zcGVlZF9kb21lc3RpYztcbiAgICBwcml2YXRlIGludCBtYXhfc3BlZWRfaW50ZXJuYXRpb25hbDtcbiAgICBwcml2YXRlIGludCBtaW5fc3BlZWRfZG9tZXN0aWM7XG4gICAgcHJpdmF0ZSBpbnQgbWluX3NwZWVkX2ludGVybmF0aW9uYWw7XG5cbiAgICBwdWJsaWMgUGxhbigpIHtcbiAgICB9XG5cbiAgICBwdWJsaWMgUGxhbihpbnQgcGxhbl9pZCwgU3RyaW5nIG5hbWUsIGxvbmcgcHJpY2UsIGludCBtYXhfc3BlZWRfZG9tZXN0aWMsIGludCBtYXhfc3BlZWRfaW50ZXJuYXRpb25hbCwgaW50IG1pbl9zcGVlZF9kb21lc3RpYywgaW50IG1pbl9zcGVlZF9pbnRlcm5hdGlvbmFsKSB7XG4gICAgICAgIHRoaXMucGxhbl9pZCA9IHBsYW5faWQ7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMucHJpY2UgPSBwcmljZTtcbiAgICAgICAgdGhpcy5tYXhfc3BlZWRfZG9tZXN0aWMgPSBtYXhfc3BlZWRfZG9tZXN0aWM7XG4gICAgICAgIHRoaXMubWF4X3NwZWVkX2ludGVybmF0aW9uYWwgPSBtYXhfc3BlZWRfaW50ZXJuYXRpb25hbDtcbiAgICAgICAgdGhpcy5taW5fc3BlZWRfZG9tZXN0aWMgPSBtaW5fc3BlZWRfZG9tZXN0aWM7XG4gICAgICAgIHRoaXMubWluX3NwZWVkX2ludGVybmF0aW9uYWwgPSBtaW5fc3BlZWRfaW50ZXJuYXRpb25hbDtcbiAgICB9XG5cbiAgICBwdWJsaWMgaW50IGdldFBsYW5faWQoKSB7XG4gICAgICAgIHJldHVybiBwbGFuX2lkO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHNldFBsYW5faWQoaW50IHBsYW5faWQpIHtcbiAgICAgICAgdGhpcy5wbGFuX2lkID0gcGxhbl9pZDtcbiAgICB9XG5cbiAgICBwdWJsaWMgU3RyaW5nIGdldE5hbWUoKSB7XG4gICAgICAgIHJldHVybiBuYW1lO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHNldE5hbWUoU3RyaW5nIG5hbWUpIHtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgbG9uZyBnZXRQcmljZSgpIHtcbiAgICAgICAgcmV0dXJuIHByaWNlO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHNldFByaWNlKGxvbmcgcHJpY2UpIHtcbiAgICAgICAgdGhpcy5wcmljZSA9IHByaWNlO1xuICAgIH1cblxuICAgIHB1YmxpYyBpbnQgZ2V0TWF4X3NwZWVkX2RvbWVzdGljKCkge1xuICAgICAgICByZXR1cm4gbWF4X3NwZWVkX2RvbWVzdGljO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHNldE1heF9zcGVlZF9kb21lc3RpYyhpbnQgbWF4X3NwZWVkX2RvbWVzdGljKSB7XG4gICAgICAgIHRoaXMubWF4X3NwZWVkX2RvbWVzdGljID0gbWF4X3NwZWVkX2RvbWVzdGljO1xuICAgIH1cblxuICAgIHB1YmxpYyBpbnQgZ2V0TWF4X3NwZWVkX2ludGVybmF0aW9uYWwoKSB7XG4gICAgICAgIHJldHVybiBtYXhfc3BlZWRfaW50ZXJuYXRpb25hbDtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXRNYXhfc3BlZWRfaW50ZXJuYXRpb25hbChpbnQgbWF4X3NwZWVkX2ludGVybmF0aW9uYWwpIHtcbiAgICAgICAgdGhpcy5tYXhfc3BlZWRfaW50ZXJuYXRpb25hbCA9IG1heF9zcGVlZF9pbnRlcm5hdGlvbmFsO1xuICAgIH1cblxuICAgIHB1YmxpYyBpbnQgZ2V0TWluX3NwZWVkX2RvbWVzdGljKCkge1xuICAgICAgICByZXR1cm4gbWluX3NwZWVkX2RvbWVzdGljO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHNldE1pbl9zcGVlZF9kb21lc3RpYyhpbnQgbWluX3NwZWVkX2RvbWVzdGljKSB7XG4gICAgICAgIHRoaXMubWluX3NwZWVkX2RvbWVzdGljID0gbWluX3NwZWVkX2RvbWVzdGljO1xuICAgIH1cblxuICAgIHB1YmxpYyBpbnQgZ2V0TWluX3NwZWVkX2ludGVybmF0aW9uYWwoKSB7XG4gICAgICAgIHJldHVybiBtaW5fc3BlZWRfaW50ZXJuYXRpb25hbDtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXRNaW5fc3BlZWRfaW50ZXJuYXRpb25hbChpbnQgbWluX3NwZWVkX2ludGVybmF0aW9uYWwpIHtcbiAgICAgICAgdGhpcy5taW5fc3BlZWRfaW50ZXJuYXRpb25hbCA9IG1pbl9zcGVlZF9pbnRlcm5hdGlvbmFsO1xuICAgIH1cbiAgIFxuICAgXG59XG4uLi5cblBhdGg6IHNyYy9Nb2RlbC9Db250cmFjdC5qYXZhXG4vKlxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9MaWNlbnNlcy9saWNlbnNlLWRlZmF1bHQudHh0IHRvIGNoYW5nZSB0aGlzIGxpY2Vuc2VcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9DbGFzcy5qYXZhIHRvIGVkaXQgdGhpcyB0ZW1wbGF0ZVxuICovXG5wYWNrYWdlIE1vZGVsO1xuXG5pbXBvcnQgamF2YS50aW1lLkxvY2FsRGF0ZVRpbWU7XG5cbi8qKlxuICpcbiAqIEBhdXRob3IgTmdvYyBUaGFvXG4gKi9cbnB1YmxpYyBjbGFzcyBDb250cmFjdCB7XG4gICAgcHJpdmF0ZSBpbnQgY29udHJhY3RfaWQ7XG4gICAgcHJpdmF0ZSBpbnQgc3ViX2lkO1xuICAgIHByaXZhdGUgaW50IHBhY2thZ2VfaWQ7XG4gICAgcHJpdmF0ZSBMb2NhbERhdGVUaW1lIGRhdGVfc2lnbjtcbiAgICBwcml2YXRlIExvY2FsRGF0ZVRpbWUgZGF0ZV9leHBpcmF0aW9uO1xuICAgIHByaXZhdGUgU3RyaW5nIGFkZHJlc3M7XG4gICAgcHJpdmF0ZSBMb2NhbERhdGVUaW1lIGNyZWF0ZV9hdDtcblxuICAgIHB1YmxpYyBDb250cmFjdCgpIHtcbiAgICB9XG5cbiAgICBwdWJsaWMgQ29udHJhY3QoaW50IGNvbnRyYWN0X2lkLCBpbnQgc3ViX2lkLCBpbnQgcGFja2FnZV9pZCwgTG9jYWxEYXRlVGltZSBkYXRlX3NpZ24sIExvY2FsRGF0ZVRpbWUgZGF0ZV9leHBpcmF0aW9uLCBTdHJpbmcgYWRkcmVzcywgTG9jYWxEYXRlVGltZSBjcmVhdGVfYXQpIHtcbiAgICAgICAgdGhpcy5jb250cmFjdF9pZCA9IGNvbnRyYWN0X2lkO1xuICAgICAgICB0aGlzLnN1Yl9pZCA9IHN1Yl9pZDtcbiAgICAgICAgdGhpcy5wYWNrYWdlX2lkID0gcGFja2FnZV9pZDtcbiAgICAgICAgdGhpcy5kYXRlX3NpZ24gPSBkYXRlX3NpZ247XG4gICAgICAgIHRoaXMuZGF0ZV9leHBpcmF0aW9uID0gZGF0ZV9leHBpcmF0aW9uO1xuICAgICAgICB0aGlzLmFkZHJlc3MgPSBhZGRyZXNzO1xuICAgICAgICB0aGlzLmNyZWF0ZV9hdCA9IGNyZWF0ZV9hdDtcbiAgICB9XG5cbiAgICBwdWJsaWMgaW50IGdldENvbnRyYWN0X2lkKCkge1xuICAgICAgICByZXR1cm4gY29udHJhY3RfaWQ7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgc2V0Q29udHJhY3RfaWQoaW50IGNvbnRyYWN0X2lkKSB7XG4gICAgICAgIHRoaXMuY29udHJhY3RfaWQgPSBjb250cmFjdF9pZDtcbiAgICB9XG5cbiAgICBwdWJsaWMgaW50IGdldFN1Yl9pZCgpIHtcbiAgICAgICAgcmV0dXJuIHN1Yl9pZDtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXRTdWJfaWQoaW50IHN1Yl9pZCkge1xuICAgICAgICB0aGlzLnN1Yl9pZCA9IHN1Yl9pZDtcbiAgICB9XG5cbiAgICBwdWJsaWMgaW50IGdldFBhY2thZ2VfaWQoKSB7XG4gICAgICAgIHJldHVybiBwYWNrYWdlX2lkO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHNldFBhY2thZ2VfaWQoaW50IHBhY2thZ2VfaWQpIHtcbiAgICAgICAgdGhpcy5wYWNrYWdlX2lkID0gcGFja2FnZV9pZDtcbiAgICB9XG5cbiAgICBwdWJsaWMgTG9jYWxEYXRlVGltZSBnZXREYXRlX3NpZ24oKSB7XG4gICAgICAgIHJldHVybiBkYXRlX3NpZ247XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgc2V0RGF0ZV9zaWduKExvY2FsRGF0ZVRpbWUgZGF0ZV9zaWduKSB7XG4gICAgICAgIHRoaXMuZGF0ZV9zaWduID0gZGF0ZV9zaWduO1xuICAgIH1cblxuICAgIHB1YmxpYyBMb2NhbERhdGVUaW1lIGdldERhdGVfZXhwaXJhdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGRhdGVfZXhwaXJhdGlvbjtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXREYXRlX2V4cGlyYXRpb24oTG9jYWxEYXRlVGltZSBkYXRlX2V4cGlyYXRpb24pIHtcbiAgICAgICAgdGhpcy5kYXRlX2V4cGlyYXRpb24gPSBkYXRlX2V4cGlyYXRpb247XG4gICAgfVxuXG4gICAgcHVibGljIFN0cmluZyBnZXRBZGRyZXNzKCkge1xuICAgICAgICByZXR1cm4gYWRkcmVzcztcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXRBZGRyZXNzKFN0cmluZyBhZGRyZXNzKSB7XG4gICAgICAgIHRoaXMuYWRkcmVzcyA9IGFkZHJlc3M7XG4gICAgfVxuXG4gICAgcHVibGljIExvY2FsRGF0ZVRpbWUgZ2V0Q3JlYXRlX2F0KCkge1xuICAgICAgICByZXR1cm4gY3JlYXRlX2F0O1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHNldENyZWF0ZV9hdChMb2NhbERhdGVUaW1lIGNyZWF0ZV9hdCkge1xuICAgICAgICB0aGlzLmNyZWF0ZV9hdCA9IGNyZWF0ZV9hdDtcbiAgICB9XG4gICAgXG4gICAgXG59XG4uLi5cblBhdGg6IHNyYy9Nb2RlbC9CaWxsSGlzdG9yeS5qYXZhXG4vKlxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9MaWNlbnNlcy9saWNlbnNlLWRlZmF1bHQudHh0IHRvIGNoYW5nZSB0aGlzIGxpY2Vuc2VcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9DbGFzcy5qYXZhIHRvIGVkaXQgdGhpcyB0ZW1wbGF0ZVxuICovXG5wYWNrYWdlIE1vZGVsO1xuXG5pbXBvcnQgamF2YS50aW1lLkxvY2FsRGF0ZTtcbmltcG9ydCBqYXZhLnRpbWUuTG9jYWxEYXRlVGltZTtcblxuLyoqXG4gKlxuICogQGF1dGhvciBOZ29jIFRoYW9cbiAqL1xucHVibGljIGNsYXNzIEJpbGxIaXN0b3J5IHtcbiAgICBwcml2YXRlIGludCBiaWxsX2lkO1xuICAgIHByaXZhdGUgaW50IGNvbnRyYWN0X2lkO1xuICAgIHByaXZhdGUgTG9jYWxEYXRlIGJpbGxpbmdfcGVyaW9kO1xuICAgIHByaXZhdGUgbG9uZyBhbW91bnQ7XG4gICAgcHJpdmF0ZSBMb2NhbERhdGVUaW1lIHBheW1lbnRfZGF0ZTtcbiAgICBwcml2YXRlIFN0cmluZyBzdGF0dXM7ICAgXG5cbiAgICBwdWJsaWMgQmlsbEhpc3RvcnkoKSB7XG4gICAgfVxuXG4gICAgcHVibGljIEJpbGxIaXN0b3J5KGludCBiaWxsX2lkLCBpbnQgY29udHJhY3RfaWQsIExvY2FsRGF0ZSBiaWxsaW5nX3BlcmlvZCwgbG9uZyBhbW91bnQsIExvY2FsRGF0ZVRpbWUgcGF5bWVudF9kYXRlLCBTdHJpbmcgc3RhdHVzKSB7XG4gICAgICAgIHRoaXMuYmlsbF9pZCA9IGJpbGxfaWQ7XG4gICAgICAgIHRoaXMuY29udHJhY3RfaWQgPSBjb250cmFjdF9pZDtcbiAgICAgICAgdGhpcy5iaWxsaW5nX3BlcmlvZCA9IGJpbGxpbmdfcGVyaW9kO1xuICAgICAgICB0aGlzLmFtb3VudCA9IGFtb3VudDtcbiAgICAgICAgdGhpcy5wYXltZW50X2RhdGUgPSBwYXltZW50X2RhdGU7XG4gICAgICAgIHRoaXMuc3RhdHVzID0gc3RhdHVzO1xuICAgIH1cblxuICAgIHB1YmxpYyBpbnQgZ2V0QmlsbF9pZCgpIHtcbiAgICAgICAgcmV0dXJuIGJpbGxfaWQ7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgc2V0QmlsbF9pZChpbnQgYmlsbF9pZCkge1xuICAgICAgICB0aGlzLmJpbGxfaWQgPSBiaWxsX2lkO1xuICAgIH1cblxuICAgIHB1YmxpYyBpbnQgZ2V0Q29udHJhY3RfaWQoKSB7XG4gICAgICAgIHJldHVybiBjb250cmFjdF9pZDtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXRDb250cmFjdF9pZChpbnQgY29udHJhY3RfaWQpIHtcbiAgICAgICAgdGhpcy5jb250cmFjdF9pZCA9IGNvbnRyYWN0X2lkO1xuICAgIH1cblxuICAgIHB1YmxpYyBMb2NhbERhdGUgZ2V0QmlsbGluZ19wZXJpb2QoKSB7XG4gICAgICAgIHJldHVybiBiaWxsaW5nX3BlcmlvZDtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXRCaWxsaW5nX3BlcmlvZChMb2NhbERhdGUgYmlsbGluZ19wZXJpb2QpIHtcbiAgICAgICAgdGhpcy5iaWxsaW5nX3BlcmlvZCA9IGJpbGxpbmdfcGVyaW9kO1xuICAgIH1cblxuICAgIHB1YmxpYyBsb25nIGdldEFtb3VudCgpIHtcbiAgICAgICAgcmV0dXJuIGFtb3VudDtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXRBbW91bnQobG9uZyBhbW91bnQpIHtcbiAgICAgICAgdGhpcy5hbW91bnQgPSBhbW91bnQ7XG4gICAgfVxuXG4gICAgcHVibGljIExvY2FsRGF0ZVRpbWUgZ2V0UGF5bWVudF9kYXRlKCkge1xuICAgICAgICByZXR1cm4gcGF5bWVudF9kYXRlO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHNldFBheW1lbnRfZGF0ZShMb2NhbERhdGVUaW1lIHBheW1lbnRfZGF0ZSkge1xuICAgICAgICB0aGlzLnBheW1lbnRfZGF0ZSA9IHBheW1lbnRfZGF0ZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgU3RyaW5nIGdldFN0YXR1cygpIHtcbiAgICAgICAgcmV0dXJuIHN0YXR1cztcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXRTdGF0dXMoU3RyaW5nIHN0YXR1cykge1xuICAgICAgICB0aGlzLnN0YXR1cyA9IHN0YXR1cztcbiAgICB9XG4gICAgXG4gICAgXG59XG4uLi5cblBhdGg6IG5icHJvamVjdC9jb25maWdzL1NpZ25VcC5wcm9wZXJ0aWVzXG5tYWluLmNsYXNzPWludGVybmV0Lm1hbmdlbWVudC5zeXN0ZW0uU2lnblVwXG4uLi5cbiIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX0sIjNlNWRjMzdhLTE4OWYtNGZhNi1hNDliLTY3OTY3YTNjNTgxNjt0b29sdV8wMVlRQzZ2SjNHb2tTMmtFbXU5TEdVQXIiOnsicmVxdWVzdElkIjoiM2U1ZGMzN2EtMTg5Zi00ZmE2LWE0OWItNjc5NjdhM2M1ODE2IiwidG9vbFVzZUlkIjoidG9vbHVfMDFZUUM2dkozR29rUzJrRW11OUxHVUFyIiwicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiSGVyZSBhcmUgdGhlIHJlc3VsdHMgZnJvbSBleGVjdXRpbmcgdGhlIGNvbW1hbmQuXG4gICAgICAgIDxyZXR1cm4tY29kZT5cbiAgICAgICAgMVxuICAgICAgICA8L3JldHVybi1jb2RlPlxuICAgICAgICA8c3Rkb3V0PlxuICAgICAgICBcdTAwMWJbPzkwMDFoXHUwMDFiWz8xMDA0aFx1MDAxYls/MjVsXHUwMDFiWzJKXHUwMDFiW21cdTAwMWJbSFxuXG5cblxuXG5cblxuXHUwMDFiW0hcdTAwMWJdMDtDOlxcV2luZG93c1xcU3lzdGVtMzJcXFdpbmRvd3NQb3dlclNoZWxsXFx2MS4wXFxwb3dlcnNoZWxsLmV4ZVx1MDAwN1x1MDAxYls/MjVoXHUwMDFiWzM4OzU7OW1teXNxbCA6IFRoZSB0ZXJtICdteXNxbCcgaXMgbm90IHJlY29nbml6ZWQgYXMgdGhlIG5hbWUgb2YgYSBjbWRsZXQsIGZ1bmN0aW9uLCBzY3JpcHQgZmlsZSwgb3Igb3BlcmFibGUgcHJvZ3JhbS4gQ2hlY2sgdGhlIHNwZWxsaW5nIG9mIHRoZSBuYW1lLCBvciBpZiBhIHBhdGggd2FzIGluY2x1ZGVkLCB2ZXJpZnkgXG50aGF0IHRoZSBwYXRoIGlzIGNvcnJlY3QgYW5kIHRyeSBhZ2Fpbi5cbkF0IGxpbmU6MSBjaGFyOjFcbisgbXlzcWwgLWggMTI1LjIxMi4yMzEuMTg0IC1QIDY5NjkgLXUgbWludG9yaTA5IC1wJ01pbnRvcnkwOUA5NicgLWUgXCJERSAuLi5cbisgfn5+fn5cbiAgICArIENhdGVnb3J5SW5mbyAgICAgICAgICA6IE9iamVjdE5vdEZvdW5kOiAobXlzcWw6U3RyaW5nKSBbXSwgQ29tbWFuZE5vdEZvdW5kRXhjZXB0aW9uXG4gICAgKyBGdWxseVF1YWxpZmllZEVycm9ySWQgOiBDb21tYW5kTm90Rm91bmRFeGNlcHRpb25cbiBcdTAwMWJbbVxuXG4gICAgICAgIDwvc3Rkb3V0PlxuICAgICAgICA8c3RkZXJyPlxuICAgICAgICBcbiAgICAgICAgPC9zdGRlcnI+IiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiZWYzN2ExN2MtMTgzOC00OTAxLWE4MmYtZmUyMmQyYTEwNDlmO3Rvb2x1XzAxNXFrQnhrZm9iamU2bWdzeVVpeFk3WCI6eyJyZXF1ZXN0SWQiOiJlZjM3YTE3Yy0xODM4LTQ5MDEtYTgyZi1mZTIyZDJhMTA0OWYiLCJ0b29sVXNlSWQiOiJ0b29sdV8wMTVxa0J4a2ZvYmplNm1nc3lVaXhZN1giLCJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJIZXJlJ3MgdGhlIHJlc3VsdCBvZiBydW5uaW5nIGBjYXQgLW5gIG9uIHNyYy9EQU8vU3Vic2NyaWJlckRBTy5qYXZhOlxuICAgICAxXHQvKlxuICAgICAyXHQgKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0xpY2Vuc2VzL2xpY2Vuc2UtZGVmYXVsdC50eHQgdG8gY2hhbmdlIHRoaXMgbGljZW5zZVxuICAgICAzXHQgKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ2xhc3MuamF2YSB0byBlZGl0IHRoaXMgdGVtcGxhdGVcbiAgICAgNFx0ICovXG4gICAgIDVcdHBhY2thZ2UgREFPO1xuICAgICA2XHRcbiAgICAgN1x0aW1wb3J0IE1vZGVsLlN1YnNjcmliZXI7XG4gICAgIDhcdGltcG9ydCBqYXZhLnV0aWwuTGlzdDtcbiAgICAgOVx0aW1wb3J0IGphdmEuc3FsLkNvbm5lY3Rpb247XG4gICAgMTBcdGltcG9ydCBqYXZhLnNxbC5QcmVwYXJlZFN0YXRlbWVudDtcbiAgICAxMVx0aW1wb3J0IGphdmEuc3FsLlRpbWVzdGFtcDtcbiAgICAxMlx0XG4gICAgMTNcdC8qKlxuICAgIDE0XHQgKlxuICAgIDE1XHQgKiBAYXV0aG9yIE5nb2MgVGhhb1xuICAgIDE2XHQgKi9cbiAgICAxN1x0cHVibGljIGNsYXNzIFN1YnNjcmliZXJEQU97XG4gICAgMThcdFxuICAgIDE5XHQgICAgcHVibGljIHN0YXRpYyB2b2lkIGluc2VydChTdWJzY3JpYmVyIG9iaikge1xuICAgIDIwXHQgICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgMjFcdCAgICAgICAgUHJlcGFyZWRTdGF0ZW1lbnQgcHNVc2VyID0gbnVsbDtcbiAgICAyMlx0ICAgICAgICBQcmVwYXJlZFN0YXRlbWVudCBwc1N1YnNjcmliZXIgPSBudWxsO1xuICAgIDIzXHQgICAgICAgIFxuICAgIDI0XHQgICAgICAgIHRyeSB7XG4gICAgMjVcdCAgICAgICAgICAgIGNvbm4gPSBDb25uZWN0aW9uUHJvdmlkZXIuZ2V0Q29ubigpO1xuICAgIDI2XHQgICAgICAgICAgICBjb25uLnNldEF1dG9Db21taXQoZmFsc2UpO1xuICAgIDI3XHQgICAgICAgICAgICBcbiAgICAyOFx0ICAgICAgICAgICAgU3RyaW5nIHNxbFVzZXIgPSBcIklOU0VSVCBJTlRPIFVTRVIodXNlcl9pZCwgdXNlcm5hbWUsIHBhc3N3b3JkLCByb2xlLCBjcmVhdGVkX2F0KSBWQUxVRVMgKD8sID8sID8sID8sID8pXCI7XG4gICAgMjlcdCAgICAgICAgICAgIHBzVXNlciA9IGNvbm4ucHJlcGFyZVN0YXRlbWVudChzcWxVc2VyKTtcbiAgICAzMFx0ICAgICAgICAgICAgcHNVc2VyLnNldEludCgxLCBvYmouZ2V0VXNlcl9pZCgpKTtcbiAgICAzMVx0ICAgICAgICAgICAgcHNVc2VyLnNldFN0cmluZygyLCBvYmouZ2V0VXNlcm5hbWUoKSk7XG4gICAgMzJcdCAgICAgICAgICAgIHBzVXNlci5zZXRTdHJpbmcoMywgb2JqLmdldFBhc3N3b3JkKCkpO1xuICAgIDMzXHQgICAgICAgICAgICBwc1VzZXIuc2V0U3RyaW5nKDQsIG9iai5nZXRSb2xlKCkpO1xuICAgIDM0XHQgICAgICAgICAgICBwc1VzZXIuc2V0VGltZXN0YW1wKDUsIFRpbWVzdGFtcC52YWx1ZU9mKG9iai5nZXRDcmVhdGVfYXQoKSkpO1xuICAgIDM1XHQgICAgICAgICAgICBwc1VzZXIuZXhlY3V0ZVVwZGF0ZSgpO1xuICAgIDM2XHQgICAgICAgICAgICBcbiAgICAzN1x0ICAgICAgICAgICAgU3RyaW5nIHNxbFN1YnNjcmliZXIgPSBcIklOU0VSVCBJTlRPIFNVQlNDUklCRVIgKHN1YnNjcmliZXJfaWQsIG5hbWUsIGFkZHJlc3MsIHBob25lLCB1c2VyX2lkKSBWQUxVRVMgKD8sID8sID8sID8sID8pXCI7XG4gICAgMzhcdCAgICAgICAgICAgIHBzU3Vic2NyaWJlciA9IGNvbm4ucHJlcGFyZVN0YXRlbWVudChzcWxTdWJzY3JpYmVyKTtcbiAgICAzOVx0ICAgICAgICAgICAgcHNTdWJzY3JpYmVyLnNldEludCgxLCBvYmouZ2V0U3Vic2NyaWJlcl9pZCgpKTtcbiAgICA0MFx0ICAgICAgICAgICAgcHNTdWJzY3JpYmVyLnNldFN0cmluZygyLCBvYmouZ2V0RnVsbE5hbWUoKSk7XG4gICAgNDFcdCAgICAgICAgICAgIHBzU3Vic2NyaWJlci5zZXRTdHJpbmcoMywgb2JqLmdldEFkZHJlc3MoKSk7XG4gICAgNDJcdCAgICAgICAgICAgIHBzU3Vic2NyaWJlci5zZXRTdHJpbmcoNCwgb2JqLmdldFBob25lKCkpO1xuICAgIDQzXHQgICAgICAgICAgICBwc1N1YnNjcmliZXIuc2V0SW50KDUsIG9iai5nZXRVc2VyX2lkKCkpO1xuICAgIDQ0XHQgICAgICAgICAgICBwc1N1YnNjcmliZXIuZXhlY3V0ZVVwZGF0ZSgpO1xuICAgIDQ1XHQgICAgICAgICAgICBcbiAgICA0Nlx0ICAgICAgICAgICAgY29ubi5jb21taXQoKTtcbiAgICA0N1x0ICAgICAgICB9XG4gICAgNDhcdCAgICAgICAgY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAgNDlcdCAgICAgICAgICAgIHRyeSB7XG4gICAgNTBcdCAgICAgICAgICAgICAgICBpZiAoY29ubiAhPSBudWxsKSBjb25uLnJvbGxiYWNrKCk7XG4gICAgNTFcdCAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiByb2xsYmFja0V4KSB7XG4gICAgNTJcdCAgICAgICAgICAgICAgICByb2xsYmFja0V4LnByaW50U3RhY2tUcmFjZSgpO1xuICAgIDUzXHQgICAgICAgICAgICB9XG4gICAgNTRcdCAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgNTVcdCAgICAgICAgfSBmaW5hbGx5IHtcbiAgICA1Nlx0ICAgICAgICAgICAgdHJ5IHtcbiAgICA1N1x0ICAgICAgICAgICAgICAgIGlmIChwc1N1YnNjcmliZXIgIT0gbnVsbCkgcHNTdWJzY3JpYmVyLmNsb3NlKCk7XG4gICAgNThcdCAgICAgICAgICAgICAgICBpZiAocHNVc2VyICE9IG51bGwpIHBzVXNlci5jbG9zZSgpO1xuICAgIDU5XHQgICAgICAgICAgICAgICAgaWYgKGNvbm4gIT0gbnVsbCkgY29ubi5jbG9zZSgpO1xuICAgIDYwXHQgICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZXgpIHtcbiAgICA2MVx0ICAgICAgICAgICAgICAgIGV4LnByaW50U3RhY2tUcmFjZSgpO1xuICAgIDYyXHQgICAgICAgICAgICB9XG4gICAgNjNcdCAgICAgICAgfVxuICAgIDY0XHQgICAgfVxuICAgIDY1XHRcbiAgICA2Nlx0ICAgIHB1YmxpYyBzdGF0aWMgdm9pZCB1cGRhdGUoU3Vic2NyaWJlciBvYmopIHtcbiAgICA2N1x0ICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oXCJOb3Qgc3VwcG9ydGVkIHlldC5cIik7IC8vIEdlbmVyYXRlZCBmcm9tIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9Db2RlL0dlbmVyYXRlZE1ldGhvZEJvZHlcbiAgICA2OFx0ICAgIH1cbiAgICA2OVx0XG4gICAgNzBcdCAgICBwdWJsaWMgc3RhdGljIHZvaWQgZGVsZXRlKGludCBpZCkge1xuICAgIDcxXHQgICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbihcIk5vdCBzdXBwb3J0ZWQgeWV0LlwiKTsgLy8gR2VuZXJhdGVkIGZyb20gbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NvZGUvR2VuZXJhdGVkTWV0aG9kQm9keVxuICAgIDcyXHQgICAgfVxuICAgIDczXHRcbiAgICA3NFx0ICAgIHB1YmxpYyBzdGF0aWMgU3Vic2NyaWJlciBnZXRCeUlkKGludCBpZCkge1xuICAgIDc1XHQgICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbihcIk5vdCBzdXBwb3J0ZWQgeWV0LlwiKTsgLy8gR2VuZXJhdGVkIGZyb20gbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NvZGUvR2VuZXJhdGVkTWV0aG9kQm9keVxuICAgIDc2XHQgICAgfVxuICAgIDc3XHRcbiAgICA3OFx0ICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxTdWJzY3JpYmVyPiBnZXRBbGwoKSB7XG4gICAgNzlcdCAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpOyAvLyBHZW5lcmF0ZWQgZnJvbSBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ29kZS9HZW5lcmF0ZWRNZXRob2RCb2R5XG4gICAgODBcdCAgICB9XG4gICAgODFcdCAgICBcbiAgICA4Mlx0fVxuICAgIDgzXHRcblRvdGFsIGxpbmVzIGluIGZpbGU6IDgzXG4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCIzZjQ0MDNmMS05MzQ2LTQ2ODgtYjkyMS1jOTg0ZWFiNWUxMWQ7dG9vbHVfMDFUY2FYQmFDeTM3YWJQaERHNkJtcVZFIjp7InJlcXVlc3RJZCI6IjNmNDQwM2YxLTkzNDYtNDY4OC1iOTIxLWM5ODRlYWI1ZTExZCIsInRvb2xVc2VJZCI6InRvb2x1XzAxVGNhWEJhQ3kzN2FiUGhERzZCbXFWRSIsInBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IkhlcmUncyB0aGUgcmVzdWx0IG9mIHJ1bm5pbmcgYGNhdCAtbmAgb24gc3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vU2lnblVwLmphdmE6XG4gICAyNzBcdCAgICAgICAgLy8gVE9ETyBhZGQgeW91ciBoYW5kbGluZyBjb2RlIGhlcmU6XG4gICAyNzFcdCAgICAgICAgU3Vic2NyaWJlciBzdWIgPSBuZXcgU3Vic2NyaWJlcigpO1xuICAgMjcyXHQgICAgICAgIHN1Yi5zZXRGdWxsTmFtZSh0eHROYW1lLmdldFRleHQoKSk7XG4gICAyNzNcdCAgICAgICAgc3ViLnNldFVzZXJuYW1lKHR4dFVzZXJOYW1lLmdldFRleHQoKSk7XG4gICAyNzRcdCAgICAgICAgc3ViLnNldFBhc3N3b3JkKHR4dFBhc3N3b3JkLmdldFRleHQoKSk7XG4gICAyNzVcdCAgICAgICAgc3ViLnNldFJvbGUoREVGQVVMVF9ST0xFKTtcbiAgIDI3Nlx0ICAgICAgICBzdWIuc2V0QWRkcmVzcyh0eHRBZGRyZXNzLmdldFRleHQoKSk7XG4gICAyNzdcdCAgICAgICAgc3ViLnNldFBob25lKHR4dFBob25lLmdldFRleHQoKSk7XG4gICAyNzhcdCAgICAgICAgc3ViLnNldENyZWF0ZV9hdChMb2NhbERhdGVUaW1lLm5vdygpKTtcbiAgIDI3OVx0ICAgICAgICBTdWJzY3JpYmVyREFPLmluc2VydChzdWIpO1xuICAgMjgwXHQgICAgICAgIGNsZWFyKCk7XG4gICAyODFcdCAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5TaWdudXBBY3Rpb25QZXJmb3JtZWRcbiAgIDI4Mlx0XG4gICAyODNcdCAgICBwcml2YXRlIHZvaWQgdHh0TmFtZUtleVJlbGVhc2VkKGphdmEuYXd0LmV2ZW50LktleUV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X3R4dE5hbWVLZXlSZWxlYXNlZFxuICAgMjg0XHQgICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxuICAgMjg1XHQgICAgICAgIHZhbGlkYXRlRmllbGRzKCk7XG4gICAyODZcdCAgICB9Ly9HRU4tTEFTVDpldmVudF90eHROYW1lS2V5UmVsZWFzZWRcbiAgIDI4N1x0XG4gICAyODhcdCAgICBwcml2YXRlIHZvaWQgdHh0VXNlck5hbWVLZXlSZWxlYXNlZChqYXZhLmF3dC5ldmVudC5LZXlFdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF90eHRVc2VyTmFtZUtleVJlbGVhc2VkXG4gICAyODlcdCAgICAgICAgLy8gVE9ETyBhZGQgeW91ciBoYW5kbGluZyBjb2RlIGhlcmU6XG4gICAyOTBcdCAgICAgICAgdmFsaWRhdGVGaWVsZHMoKTtcblRvdGFsIGxpbmVzIGluIGZpbGU6IDM2NVxuIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiZWFiM2I4NWQtYTMwNS00M2Q0LWFhMzctMjQ1MmYxMzE4YzgxO3Rvb2x1XzAxSmtaZVR1djJSUEdQWDVaRldaRHl6bSI6eyJyZXF1ZXN0SWQiOiJlYWIzYjg1ZC1hMzA1LTQzZDQtYWEzNy0yNDUyZjEzMThjODEiLCJ0b29sVXNlSWQiOiJ0b29sdV8wMUprWmVUdXYyUlBHUFg1WkZXWkR5em0iLCJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJTdWNjZXNzZnVsbHkgZWRpdGVkIHRoZSBmaWxlIHNyYy9EQU8vU3Vic2NyaWJlckRBTy5qYXZhLlxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZSBmb3IgZW50cnkgd2l0aCBpbmRleCBbMF06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgICAgM1x0ICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NsYXNzLmphdmEgdG8gZWRpdCB0aGlzIHRlbXBsYXRlXG4gICAgIDRcdCAqL1xuICAgICA1XHRwYWNrYWdlIERBTztcbiAgICAgNlx0XG4gICAgIDdcdGltcG9ydCBNb2RlbC5TdWJzY3JpYmVyO1xuICAgICA4XHRpbXBvcnQgamF2YS51dGlsLkxpc3Q7XG4gICAgIDlcdGltcG9ydCBqYXZhLnNxbC5Db25uZWN0aW9uO1xuICAgIDEwXHRpbXBvcnQgamF2YS5zcWwuUHJlcGFyZWRTdGF0ZW1lbnQ7XG4gICAgMTFcdGltcG9ydCBqYXZhLnNxbC5SZXN1bHRTZXQ7XG4gICAgMTJcdGltcG9ydCBqYXZhLnNxbC5TdGF0ZW1lbnQ7XG4gICAgMTNcdGltcG9ydCBqYXZhLnNxbC5UaW1lc3RhbXA7XG4gICAgMTRcdGltcG9ydCBqYXZheC5zd2luZy5KT3B0aW9uUGFuZTtcbiAgICAxNVx0XG4gICAgMTZcdC8qKlxuICAgIDE3XHQgKlxuICAgIDE4XHQgKiBAYXV0aG9yIE5nb2MgVGhhb1xuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlIGZvciBlbnRyeSB3aXRoIGluZGV4IFsxXTpcblJlcGxhY2VtZW50IHN1Y2Nlc3NmdWwuXG5FZGl0ZWQgc2VjdGlvbiBhZnRlciBJREUgYXV0by1mb3JtYXR0aW5nIHdhcyBhcHBsaWVkOlxuICAgIDE4XHQgKiBAYXV0aG9yIE5nb2MgVGhhb1xuICAgIDE5XHQgKi9cbiAgICAyMFx0cHVibGljIGNsYXNzIFN1YnNjcmliZXJEQU97XG4gICAgMjFcdFxuICAgIDIyXHQgICAgcHVibGljIHN0YXRpYyB2b2lkIGluc2VydChTdWJzY3JpYmVyIG9iaikge1xuICAgIDIzXHQgICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgMjRcdCAgICAgICAgUHJlcGFyZWRTdGF0ZW1lbnQgcHNVc2VyID0gbnVsbDtcbiAgICAyNVx0ICAgICAgICBQcmVwYXJlZFN0YXRlbWVudCBwc1N1YnNjcmliZXIgPSBudWxsO1xuICAgIDI2XHQgICAgICAgIFJlc3VsdFNldCBycyA9IG51bGw7XG4gICAgMjdcdFxuICAgIDI4XHQgICAgICAgIHRyeSB7XG4gICAgMjlcdCAgICAgICAgICAgIGNvbm4gPSBDb25uZWN0aW9uUHJvdmlkZXIuZ2V0Q29ubigpO1xuICAgIDMwXHQgICAgICAgICAgICBjb25uLnNldEF1dG9Db21taXQoZmFsc2UpO1xuICAgIDMxXHRcbiAgICAzMlx0ICAgICAgICAgICAgLy8gR2VuZXJhdGUgdXNlcl9pZFxuICAgIDMzXHQgICAgICAgICAgICBpbnQgdXNlcklkID0gZ2VuZXJhdGVOZXh0SWQoY29ubiwgXCJVU0VSXCIsIFwidXNlcl9pZFwiKTtcbiAgICAzNFx0ICAgICAgICAgICAgb2JqLnNldFVzZXJfaWQodXNlcklkKTtcbiAgICAzNVx0XG4gICAgMzZcdCAgICAgICAgICAgIC8vIEdlbmVyYXRlIHN1YnNjcmliZXJfaWRcbiAgICAzN1x0ICAgICAgICAgICAgaW50IHN1YnNjcmliZXJJZCA9IGdlbmVyYXRlTmV4dElkKGNvbm4sIFwiU1VCU0NSSUJFUlwiLCBcInN1YnNjcmliZXJfaWRcIik7XG4gICAgMzhcdCAgICAgICAgICAgIG9iai5zZXRTdWJzY3JpYmVyX2lkKHN1YnNjcmliZXJJZCk7XG4gICAgMzlcdFxuICAgIDQwXHQgICAgICAgICAgICAvLyBJbnNlcnQgaW50byBVU0VSIHRhYmxlIGZpcnN0XG4gICAgNDFcdCAgICAgICAgICAgIFN0cmluZyBzcWxVc2VyID0gXCJJTlNFUlQgSU5UTyBVU0VSKHVzZXJfaWQsIHVzZXJuYW1lLCBwYXNzd29yZCwgcm9sZSwgY3JlYXRlZF9hdCkgVkFMVUVTICg/LCA/LCA/LCA/LCA/KVwiO1xuICAgIDQyXHQgICAgICAgICAgICBwc1VzZXIgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsVXNlcik7XG4gICAgNDNcdCAgICAgICAgICAgIHBzVXNlci5zZXRJbnQoMSwgdXNlcklkKTtcbiAgICA0NFx0ICAgICAgICAgICAgcHNVc2VyLnNldFN0cmluZygyLCBvYmouZ2V0VXNlcm5hbWUoKSk7XG4gICAgNDVcdCAgICAgICAgICAgIHBzVXNlci5zZXRTdHJpbmcoMywgb2JqLmdldFBhc3N3b3JkKCkpO1xuICAgIDQ2XHQgICAgICAgICAgICBwc1VzZXIuc2V0U3RyaW5nKDQsIG9iai5nZXRSb2xlKCkpO1xuICAgIDQ3XHQgICAgICAgICAgICBwc1VzZXIuc2V0VGltZXN0YW1wKDUsIFRpbWVzdGFtcC52YWx1ZU9mKG9iai5nZXRDcmVhdGVfYXQoKSkpO1xuICAgIDQ4XHQgICAgICAgICAgICBwc1VzZXIuZXhlY3V0ZVVwZGF0ZSgpO1xuICAgIDQ5XHRcbiAgICA1MFx0ICAgICAgICAgICAgLy8gVGhlbiBpbnNlcnQgaW50byBTVUJTQ1JJQkVSIHRhYmxlIHdpdGggdGhlIHNhbWUgdXNlcl9pZFxuICAgIDUxXHQgICAgICAgICAgICBTdHJpbmcgc3FsU3Vic2NyaWJlciA9IFwiSU5TRVJUIElOVE8gU1VCU0NSSUJFUiAoc3Vic2NyaWJlcl9pZCwgbmFtZSwgYWRkcmVzcywgcGhvbmUsIHVzZXJfaWQpIFZBTFVFUyAoPywgPywgPywgPywgPylcIjtcbiAgICA1Mlx0ICAgICAgICAgICAgcHNTdWJzY3JpYmVyID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHNxbFN1YnNjcmliZXIpO1xuICAgIDUzXHQgICAgICAgICAgICBwc1N1YnNjcmliZXIuc2V0SW50KDEsIHN1YnNjcmliZXJJZCk7XG4gICAgNTRcdCAgICAgICAgICAgIHBzU3Vic2NyaWJlci5zZXRTdHJpbmcoMiwgb2JqLmdldEZ1bGxOYW1lKCkpO1xuICAgIDU1XHQgICAgICAgICAgICBwc1N1YnNjcmliZXIuc2V0U3RyaW5nKDMsIG9iai5nZXRBZGRyZXNzKCkpO1xuICAgIDU2XHQgICAgICAgICAgICBwc1N1YnNjcmliZXIuc2V0U3RyaW5nKDQsIG9iai5nZXRQaG9uZSgpKTtcbiAgICA1N1x0ICAgICAgICAgICAgcHNTdWJzY3JpYmVyLnNldEludCg1LCB1c2VySWQpOyAvLyBVc2UgdGhlIHNhbWUgdXNlcl9pZFxuICAgIDU4XHQgICAgICAgICAgICBwc1N1YnNjcmliZXIuZXhlY3V0ZVVwZGF0ZSgpO1xuICAgIDU5XHRcbiAgICA2MFx0ICAgICAgICAgICAgY29ubi5jb21taXQoKTtcbiAgICA2MVx0ICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXCLEkMSDbmcga8O9IHRow6BuaCBjw7RuZyFcIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5JTkZPUk1BVElPTl9NRVNTQUdFKTtcbiAgICA2Mlx0ICAgICAgICB9XG4gICAgNjNcdCAgICAgICAgY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAgNjRcdCAgICAgICAgICAgIHRyeSB7XG4gICAgNjVcdCAgICAgICAgICAgICAgICBpZiAoY29ubiAhPSBudWxsKSBjb25uLnJvbGxiYWNrKCk7XG4gICAgNjZcdCAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiByb2xsYmFja0V4KSB7XG4gICAgNjdcdCAgICAgICAgICAgICAgICByb2xsYmFja0V4LnByaW50U3RhY2tUcmFjZSgpO1xuICAgIDY4XHQgICAgICAgICAgICB9XG4gICAgNjlcdCAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwiTOG7l2k6IFwiICsgZS5nZXRNZXNzYWdlKCksIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAgNzBcdCAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgNzFcdCAgICAgICAgfSBmaW5hbGx5IHtcbiAgICA3Mlx0ICAgICAgICAgICAgdHJ5IHtcbiAgICA3M1x0ICAgICAgICAgICAgICAgIGlmIChycyAhPSBudWxsKSBycy5jbG9zZSgpO1xuICAgIDc0XHQgICAgICAgICAgICAgICAgaWYgKHBzU3Vic2NyaWJlciAhPSBudWxsKSBwc1N1YnNjcmliZXIuY2xvc2UoKTtcbiAgICA3NVx0ICAgICAgICAgICAgICAgIGlmIChwc1VzZXIgIT0gbnVsbCkgcHNVc2VyLmNsb3NlKCk7XG4gICAgNzZcdCAgICAgICAgICAgICAgICBpZiAoY29ubiAhPSBudWxsKSBjb25uLmNsb3NlKCk7XG4gICAgNzdcdCAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBleCkge1xuICAgIDc4XHQgICAgICAgICAgICAgICAgZXgucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgNzlcdCAgICAgICAgICAgIH1cbiAgICA4MFx0ICAgICAgICB9XG4gICAgODFcdCAgICB9XG4gICAgODJcdFxuICAgIDgzXHQgICAgcHVibGljIHN0YXRpYyB2b2lkIHVwZGF0ZShTdWJzY3JpYmVyIG9iaikge1xuICAgIDg0XHQgICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbihcIk5vdCBzdXBwb3J0ZWQgeWV0LlwiKTsgLy8gR2VuZXJhdGVkIGZyb20gbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NvZGUvR2VuZXJhdGVkTWV0aG9kQm9keVxuXG5SZXZpZXcgdGhlIGNoYW5nZXMgYW5kIG1ha2Ugc3VyZSB0aGV5IGFyZSBhcyBleHBlY3RlZCAoY29ycmVjdCBpbmRlbnRhdGlvbiwgbm8gZHVwbGljYXRlIGxpbmVzLCBldGMpLlxuRWRpdCB0aGUgZmlsZSBhZ2FpbiBpZiBuZWNlc3NhcnkuXG4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCJlZjYyOTE5Zi00YmMwLTQ0OGUtOWY3Zi0wYWMzZGY4NTZlOWM7dG9vbHVfMDFXWnY1Ykx3Q1ZkZTJ3V01GaWpiSGF6Ijp7InJlcXVlc3RJZCI6ImVmNjI5MTlmLTRiYzAtNDQ4ZS05ZjdmLTBhYzNkZjg1NmU5YyIsInRvb2xVc2VJZCI6InRvb2x1XzAxV1p2NWJMd0NWZGUyd1dNRmlqYkhheiIsInBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IlN1Y2Nlc3NmdWxseSBlZGl0ZWQgdGhlIGZpbGUgc3JjL0RBTy9TdWJzY3JpYmVyREFPLmphdmEuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlIGZvciBlbnRyeSB3aXRoIGluZGV4IFswXTpcblJlcGxhY2VtZW50IHN1Y2Nlc3NmdWwuXG5FZGl0ZWQgc2VjdGlvbiBhZnRlciBJREUgYXV0by1mb3JtYXR0aW5nIHdhcyBhcHBsaWVkOlxuICAgIDkxXHQgICAgcHVibGljIHN0YXRpYyBTdWJzY3JpYmVyIGdldEJ5SWQoaW50IGlkKSB7XG4gICAgOTJcdCAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpOyAvLyBHZW5lcmF0ZWQgZnJvbSBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ29kZS9HZW5lcmF0ZWRNZXRob2RCb2R5XG4gICAgOTNcdCAgICB9XG4gICAgOTRcdFxuICAgIDk1XHQgICAgcHVibGljIHN0YXRpYyBMaXN0PFN1YnNjcmliZXI+IGdldEFsbCgpIHtcbiAgICA5Nlx0ICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oXCJOb3Qgc3VwcG9ydGVkIHlldC5cIik7IC8vIEdlbmVyYXRlZCBmcm9tIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9Db2RlL0dlbmVyYXRlZE1ldGhvZEJvZHlcbiAgICA5N1x0ICAgIH1cbiAgICA5OFx0XG4gICAgOTlcdCAgICAvKipcbiAgIDEwMFx0ICAgICAqIEdlbmVyYXRlIHRoZSBuZXh0IGF2YWlsYWJsZSBJRCBmb3IgYSB0YWJsZVxuICAgMTAxXHQgICAgICogQHBhcmFtIGNvbm4gRGF0YWJhc2UgY29ubmVjdGlvblxuICAgMTAyXHQgICAgICogQHBhcmFtIHRhYmxlTmFtZSBOYW1lIG9mIHRoZSB0YWJsZVxuICAgMTAzXHQgICAgICogQHBhcmFtIGlkQ29sdW1uTmFtZSBOYW1lIG9mIHRoZSBJRCBjb2x1bW5cbiAgIDEwNFx0ICAgICAqIEByZXR1cm4gTmV4dCBhdmFpbGFibGUgSURcbiAgIDEwNVx0ICAgICAqIEB0aHJvd3MgRXhjZXB0aW9uIElmIGFuIGVycm9yIG9jY3Vyc1xuICAgMTA2XHQgICAgICovXG4gICAxMDdcdCAgICBwcml2YXRlIHN0YXRpYyBpbnQgZ2VuZXJhdGVOZXh0SWQoQ29ubmVjdGlvbiBjb25uLCBTdHJpbmcgdGFibGVOYW1lLCBTdHJpbmcgaWRDb2x1bW5OYW1lKSB0aHJvd3MgRXhjZXB0aW9uIHtcbiAgIDEwOFx0ICAgICAgICBpbnQgbmV4dElkID0gMTsgLy8gRGVmYXVsdCBzdGFydGluZyBJRFxuICAgMTA5XHQgICAgICAgIFN0YXRlbWVudCBzdG10ID0gbnVsbDtcbiAgIDExMFx0ICAgICAgICBSZXN1bHRTZXQgcnMgPSBudWxsO1xuICAgMTExXHRcbiAgIDExMlx0ICAgICAgICB0cnkge1xuICAgMTEzXHQgICAgICAgICAgICBzdG10ID0gY29ubi5jcmVhdGVTdGF0ZW1lbnQoKTtcbiAgIDExNFx0ICAgICAgICAgICAgU3RyaW5nIHF1ZXJ5ID0gXCJTRUxFQ1QgTUFYKFwiICsgaWRDb2x1bW5OYW1lICsgXCIpIEFTIG1heF9pZCBGUk9NIFwiICsgdGFibGVOYW1lO1xuICAgMTE1XHQgICAgICAgICAgICBycyA9IHN0bXQuZXhlY3V0ZVF1ZXJ5KHF1ZXJ5KTtcbiAgIDExNlx0XG4gICAxMTdcdCAgICAgICAgICAgIGlmIChycy5uZXh0KCkpIHtcbiAgIDExOFx0ICAgICAgICAgICAgICAgIGludCBtYXhJZCA9IHJzLmdldEludChcIm1heF9pZFwiKTtcbiAgIDExOVx0ICAgICAgICAgICAgICAgIG5leHRJZCA9IG1heElkICsgMTtcbiAgIDEyMFx0ICAgICAgICAgICAgfVxuICAgMTIxXHQgICAgICAgIH0gZmluYWxseSB7XG4gICAxMjJcdCAgICAgICAgICAgIGlmIChycyAhPSBudWxsKSBycy5jbG9zZSgpO1xuICAgMTIzXHQgICAgICAgICAgICBpZiAoc3RtdCAhPSBudWxsKSBzdG10LmNsb3NlKCk7XG4gICAxMjRcdCAgICAgICAgfVxuICAgMTI1XHRcbiAgIDEyNlx0ICAgICAgICByZXR1cm4gbmV4dElkO1xuICAgMTI3XHQgICAgfVxuICAgMTI4XHR9XG4gICAxMjlcdFxuXG5SZXZpZXcgdGhlIGNoYW5nZXMgYW5kIG1ha2Ugc3VyZSB0aGV5IGFyZSBhcyBleHBlY3RlZCAoY29ycmVjdCBpbmRlbnRhdGlvbiwgbm8gZHVwbGljYXRlIGxpbmVzLCBldGMpLlxuRWRpdCB0aGUgZmlsZSBhZ2FpbiBpZiBuZWNlc3NhcnkuXG4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCJjZWRkMjliNC1jY2ZjLTRhYTYtOTA4My0yZjQxMGI3YWFlMmY7dG9vbHVfMDFUSDl2M3dTbTlENnZIOThkZzQ4N2dWIjp7InJlcXVlc3RJZCI6ImNlZGQyOWI0LWNjZmMtNGFhNi05MDgzLTJmNDEwYjdhYWUyZiIsInRvb2xVc2VJZCI6InRvb2x1XzAxVEg5djN3U205RDZ2SDk4ZGc0ODdnViIsInBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IlN1Y2Nlc3NmdWxseSBlZGl0ZWQgdGhlIGZpbGUgc3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vU2lnblVwLmphdmEuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlIGZvciBlbnRyeSB3aXRoIGluZGV4IFswXTpcblJlcGxhY2VtZW50IHN1Y2Nlc3NmdWwuXG5FZGl0ZWQgc2VjdGlvbiBhZnRlciBJREUgYXV0by1mb3JtYXR0aW5nIHdhcyBhcHBsaWVkOlxuICAgIDMxXHQgICAgICAgIHR4dEFkZHJlc3Muc2V0VGV4dChcIlwiKTtcbiAgICAzMlx0ICAgICAgICB0eHRQaG9uZS5zZXRUZXh0KFwiXCIpO1xuICAgIDMzXHQgICAgfVxuICAgIDM0XHRcbiAgICAzNVx0ICAgIHB1YmxpYyBib29sZWFuIHZhbGlkYXRlRmllbGRzKCl7XG4gICAgMzZcdCAgICAgICAgU3RyaW5nIG5hbWUgPSB0eHROYW1lLmdldFRleHQoKTtcbiAgICAzN1x0ICAgICAgICBTdHJpbmcgdXNlck5hbWUgPSB0eHRVc2VyTmFtZS5nZXRUZXh0KCk7XG4gICAgMzhcdCAgICAgICAgU3RyaW5nIHBhc3N3b3JkID0gdHh0UGFzc3dvcmQuZ2V0VGV4dCgpO1xuICAgIDM5XHQgICAgICAgIFN0cmluZyBhZGRyZXNzID0gdHh0QWRkcmVzcy5nZXRUZXh0KCk7XG4gICAgNDBcdCAgICAgICAgU3RyaW5nIHBob25lID0gdHh0UGhvbmUuZ2V0VGV4dCgpO1xuICAgIDQxXHRcbiAgICA0Mlx0ICAgICAgICBpZihuYW1lLmlzRW1wdHkoKSB8fCB1c2VyTmFtZS5pc0VtcHR5KCkgfHwgcGFzc3dvcmQuaXNFbXB0eSgpIHx8IGFkZHJlc3MuaXNFbXB0eSgpIHx8IHBob25lLmlzRW1wdHkoKSl7XG4gICAgNDNcdCAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwiVnVpIGzDsm5nIGtow7RuZyBi4buPIHRy4buRbmchXCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAgNDRcdCAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICA0NVx0ICAgICAgICB9XG4gICAgNDZcdCAgICAgICAgZWxzZSBpZihwaG9uZS5sZW5ndGgoKSAhPSAxMCB8fCAhcGhvbmUubWF0Y2hlcyhwaG9uZVBhdHRlcm4pKSB7XG4gICAgNDdcdCAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwiVnVpIGzDsm5nIG5o4bqtcCDEkcO6bmcgxJHhu4tuaCBk4bqhbmcgc+G7kSDEkWnhu4duIHRob+G6oWkhXCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAgNDhcdCAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICA0OVx0ICAgICAgICB9XG4gICAgNTBcdCAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgNTFcdCAgICB9XG4gICAgNTJcdCAgICB9XG4gICAgNTNcdFxuICAgIDU0XHQgICAgLyoqXG4gICAgNTVcdCAgICAgKiBUaGlzIG1ldGhvZCBpcyBjYWxsZWQgZnJvbSB3aXRoaW4gdGhlIGNvbnN0cnVjdG9yIHRvIGluaXRpYWxpemUgdGhlIGZvcm0uXG5cblJlc3VsdCBmb3Igc3RyX3JlcGxhY2UgZm9yIGVudHJ5IHdpdGggaW5kZXggWzFdOlxuUmVwbGFjZW1lbnQgc3VjY2Vzc2Z1bC5cbkVkaXRlZCBzZWN0aW9uIGFmdGVyIElERSBhdXRvLWZvcm1hdHRpbmcgd2FzIGFwcGxpZWQ6XG4gICAyNjZcdCAgICAgICAgLy8gVE9ETyBhZGQgeW91ciBoYW5kbGluZyBjb2RlIGhlcmU6XG4gICAyNjdcdFxuICAgMjY4XHQgICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuUmV0dXJuQWN0aW9uUGVyZm9ybWVkXG4gICAyNjlcdFxuICAgMjcwXHQgICAgcHJpdmF0ZSB2b2lkIGJ0blNpZ251cEFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5TaWdudXBBY3Rpb25QZXJmb3JtZWRcbiAgIDI3MVx0ICAgICAgICAvLyBUT0RPIGFkZCB5b3VyIGhhbmRsaW5nIGNvZGUgaGVyZTpcbiAgIDI3Mlx0ICAgICAgICBpZiAodmFsaWRhdGVGaWVsZHMoKSkge1xuICAgMjczXHQgICAgICAgICAgICB0cnkge1xuICAgMjc0XHQgICAgICAgICAgICAgICAgU3Vic2NyaWJlciBzdWIgPSBuZXcgU3Vic2NyaWJlcigpO1xuICAgMjc1XHQgICAgICAgICAgICAgICAgc3ViLnNldEZ1bGxOYW1lKHR4dE5hbWUuZ2V0VGV4dCgpKTtcbiAgIDI3Nlx0ICAgICAgICAgICAgICAgIHN1Yi5zZXRVc2VybmFtZSh0eHRVc2VyTmFtZS5nZXRUZXh0KCkpO1xuICAgMjc3XHQgICAgICAgICAgICAgICAgc3ViLnNldFBhc3N3b3JkKHR4dFBhc3N3b3JkLmdldFRleHQoKSk7XG4gICAyNzhcdCAgICAgICAgICAgICAgICBzdWIuc2V0Um9sZShERUZBVUxUX1JPTEUpO1xuICAgMjc5XHQgICAgICAgICAgICAgICAgc3ViLnNldEFkZHJlc3ModHh0QWRkcmVzcy5nZXRUZXh0KCkpO1xuICAgMjgwXHQgICAgICAgICAgICAgICAgc3ViLnNldFBob25lKHR4dFBob25lLmdldFRleHQoKSk7XG4gICAyODFcdCAgICAgICAgICAgICAgICBzdWIuc2V0Q3JlYXRlX2F0KExvY2FsRGF0ZVRpbWUubm93KCkpO1xuICAgMjgyXHQgICAgICAgICAgICAgICAgU3Vic2NyaWJlckRBTy5pbnNlcnQoc3ViKTtcbiAgIDI4M1x0ICAgICAgICAgICAgICAgIGNsZWFyKCk7XG4gICAyODRcdCAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBleCkge1xuICAgMjg1XHQgICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXCJM4buXaTogXCIgKyBleC5nZXRNZXNzYWdlKCksIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAyODZcdCAgICAgICAgICAgIH1cbiAgIDI4N1x0ICAgICAgICB9XG4gICAyODhcdCAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5TaWdudXBBY3Rpb25QZXJmb3JtZWRcbiAgIDI4OVx0XG4gICAyOTBcdCAgICBwcml2YXRlIHZvaWQgdHh0TmFtZUtleVJlbGVhc2VkKGphdmEuYXd0LmV2ZW50LktleUV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X3R4dE5hbWVLZXlSZWxlYXNlZFxuICAgMjkxXHQgICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxuICAgMjkyXHQgICAgICAgIHZhbGlkYXRlRmllbGRzKCk7XG5cblJldmlldyB0aGUgY2hhbmdlcyBhbmQgbWFrZSBzdXJlIHRoZXkgYXJlIGFzIGV4cGVjdGVkIChjb3JyZWN0IGluZGVudGF0aW9uLCBubyBkdXBsaWNhdGUgbGluZXMsIGV0YykuXG5FZGl0IHRoZSBmaWxlIGFnYWluIGlmIG5lY2Vzc2FyeS5cbiIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX0sImNkM2FjN2Q5LTZmNTItNGVlNS05YmUwLTQxYWM5NTQ5YWFkZTt0b29sdV8wMTRwYnhYdllvVlVDRVlIbmRqdmlUTUQiOnsicmVxdWVzdElkIjoiY2QzYWM3ZDktNmY1Mi00ZWU1LTliZTAtNDFhYzk1NDlhYWRlIiwidG9vbFVzZUlkIjoidG9vbHVfMDE0cGJ4WHZZb1ZVQ0VZSG5kanZpVE1EIiwicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiU3VjY2Vzc2Z1bGx5IGVkaXRlZCB0aGUgZmlsZSBzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9TaWduVXAuamF2YS5cblJlc3VsdCBmb3Igc3RyX3JlcGxhY2UgZm9yIGVudHJ5IHdpdGggaW5kZXggWzBdOlxuUmVwbGFjZW1lbnQgc3VjY2Vzc2Z1bC5cbkVkaXRlZCBzZWN0aW9uIGFmdGVyIElERSBhdXRvLWZvcm1hdHRpbmcgd2FzIGFwcGxpZWQ6XG4gICAgNDZcdCAgICAgICAgZWxzZSBpZihwaG9uZS5sZW5ndGgoKSAhPSAxMCB8fCAhcGhvbmUubWF0Y2hlcyhwaG9uZVBhdHRlcm4pKSB7XG4gICAgNDdcdCAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwiVnVpIGzDsm5nIG5o4bqtcCDEkcO6bmcgxJHhu4tuaCBk4bqhbmcgc+G7kSDEkWnhu4duIHRob+G6oWkhXCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAgNDhcdCAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICA0OVx0ICAgICAgICB9XG4gICAgNTBcdCAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgNTFcdCAgICB9XG4gICAgNTJcdFxuICAgIDUzXHQgICAgLyoqXG4gICAgNTRcdCAgICAgKiBUaGlzIG1ldGhvZCBpcyBjYWxsZWQgZnJvbSB3aXRoaW4gdGhlIGNvbnN0cnVjdG9yIHRvIGluaXRpYWxpemUgdGhlIGZvcm0uXG4gICAgNTVcdCAgICAgKiBXQVJOSU5HOiBEbyBOT1QgbW9kaWZ5IHRoaXMgY29kZS4gVGhlIGNvbnRlbnQgb2YgdGhpcyBtZXRob2QgaXMgYWx3YXlzXG5cblJldmlldyB0aGUgY2hhbmdlcyBhbmQgbWFrZSBzdXJlIHRoZXkgYXJlIGFzIGV4cGVjdGVkIChjb3JyZWN0IGluZGVudGF0aW9uLCBubyBkdXBsaWNhdGUgbGluZXMsIGV0YykuXG5FZGl0IHRoZSBmaWxlIGFnYWluIGlmIG5lY2Vzc2FyeS5cbiIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX0sIjQ0MTU1ZmQ3LWJjZjAtNGY1NC1iMzZhLTIzZjM1ZTg5NjRmNjt0b29sdV8wMUh1bWtxUTQ5azluR3NueE1KTDF2V1UiOnsicmVxdWVzdElkIjoiNDQxNTVmZDctYmNmMC00ZjU0LWIzNmEtMjNmMzVlODk2NGY2IiwidG9vbFVzZUlkIjoidG9vbHVfMDFIdW1rcVE0OWs5bkdzbnhNSkwxdldVIiwicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiU3VjY2Vzc2Z1bGx5IGVkaXRlZCB0aGUgZmlsZSBzcmMvREFPL0RiT3BlcmF0aW9ucy5qYXZhLlxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZSBmb3IgZW50cnkgd2l0aCBpbmRleCBbMF06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgICAgMVx0cGFja2FnZSBEQU87XG4gICAgIDJcdFxuICAgICAzXHRpbXBvcnQgamF2YS5zcWwuQ29ubmVjdGlvbjtcbiAgICAgNFx0aW1wb3J0IGphdmEuc3FsLlByZXBhcmVkU3RhdGVtZW50O1xuICAgICA1XHRpbXBvcnQgamF2YS5zcWwuUmVzdWx0U2V0O1xuICAgICA2XHRpbXBvcnQgamF2YS5zcWwuU3RhdGVtZW50O1xuICAgICA3XHRpbXBvcnQgamF2YXguc3dpbmcuSk9wdGlvblBhbmU7XG4gICAgIDhcdFxuICAgICA5XHRwdWJsaWMgY2xhc3MgRGJPcGVyYXRpb25zIHtcbiAgICAxMFx0ICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBzZXREYXRhT3JEZWxldGUoU3RyaW5nIHF1ZXJ5LCBTdHJpbmcgbXNnKSB7XG4gICAgMTFcdCAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcblxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZSBmb3IgZW50cnkgd2l0aCBpbmRleCBbMV06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgICAgNVx0aW1wb3J0IGphdmEuc3FsLlJlc3VsdFNldDtcbiAgICAgNlx0aW1wb3J0IGphdmEuc3FsLlN0YXRlbWVudDtcbiAgICAgN1x0aW1wb3J0IGphdmF4LnN3aW5nLkpPcHRpb25QYW5lO1xuICAgICA4XHRcbiAgICAgOVx0cHVibGljIGNsYXNzIERiT3BlcmF0aW9ucyB7XG4gICAgMTBcdCAgICBwdWJsaWMgc3RhdGljIHZvaWQgc2V0RGF0YU9yRGVsZXRlKFN0cmluZyBxdWVyeSwgU3RyaW5nIG1zZykge1xuICAgIDExXHQgICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgMTJcdCAgICAgICAgU3RhdGVtZW50IHN0ID0gbnVsbDtcbiAgICAxM1x0ICAgICAgICB0cnkge1xuICAgIDE0XHQgICAgICAgICAgICBjb25uID0gQ29ubmVjdGlvblByb3ZpZGVyLmdldENvbm4oKTtcbiAgICAxNVx0ICAgICAgICAgICAgc3QgPSBjb25uLmNyZWF0ZVN0YXRlbWVudCgpO1xuICAgIDE2XHQgICAgICAgICAgICBzdC5leGVjdXRlVXBkYXRlKHF1ZXJ5KTtcbiAgICAxN1x0XG4gICAgMThcdCAgICAgICAgICAgIGlmKCFtc2cuZXF1YWxzKFwiXCIpKSB7XG4gICAgMTlcdCAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBtc2csIFwiTWVzc2FnZVwiLCBKT3B0aW9uUGFuZS5JTkZPUk1BVElPTl9NRVNTQUdFKTtcbiAgICAyMFx0ICAgICAgICAgICAgfVxuICAgIDIxXHQgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBleCkge1xuICAgIDIyXHQgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBleCwgXCJNZXNzYWdlXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgIDIzXHQgICAgICAgIH0gZmluYWxseSB7XG4gICAgMjRcdCAgICAgICAgICAgIHRyeSB7XG4gICAgMjVcdCAgICAgICAgICAgICAgICBpZiAoc3QgIT0gbnVsbCkgc3QuY2xvc2UoKTtcbiAgICAyNlx0ICAgICAgICAgICAgICAgIGlmIChjb25uICE9IG51bGwpIGNvbm4uY2xvc2UoKTtcbiAgICAyN1x0ICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICAyOFx0ICAgICAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgMjlcdCAgICAgICAgICAgIH1cbiAgICAzMFx0ICAgICAgICB9XG4gICAgMzFcdCAgICB9XG4gICAgMzJcdFxuICAgIDMzXHQgICAgLyoqXG4gICAgMzRcdCAgICAgKiBHZW5lcmF0ZSB0aGUgbmV4dCBhdmFpbGFibGUgSUQgZm9yIGEgdGFibGVcbiAgICAzNVx0ICAgICAqIEBwYXJhbSB0YWJsZU5hbWUgTmFtZSBvZiB0aGUgdGFibGVcbiAgICAzNlx0ICAgICAqIEBwYXJhbSBpZENvbHVtbk5hbWUgTmFtZSBvZiB0aGUgSUQgY29sdW1uXG4gICAgMzdcdCAgICAgKiBAcmV0dXJuIE5leHQgYXZhaWxhYmxlIElEXG4gICAgMzhcdCAgICAgKi9cbiAgICAzOVx0ICAgIHB1YmxpYyBzdGF0aWMgaW50IGdldE5leHRJZChTdHJpbmcgdGFibGVOYW1lLCBTdHJpbmcgaWRDb2x1bW5OYW1lKSB7XG4gICAgNDBcdCAgICAgICAgaW50IG5leHRJZCA9IDE7IC8vIERlZmF1bHQgc3RhcnRpbmcgSURcbiAgICA0MVx0ICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgIDQyXHQgICAgICAgIFN0YXRlbWVudCBzdG10ID0gbnVsbDtcbiAgICA0M1x0ICAgICAgICBSZXN1bHRTZXQgcnMgPSBudWxsO1xuICAgIDQ0XHRcbiAgICA0NVx0ICAgICAgICB0cnkge1xuICAgIDQ2XHQgICAgICAgICAgICBjb25uID0gQ29ubmVjdGlvblByb3ZpZGVyLmdldENvbm4oKTtcbiAgICA0N1x0ICAgICAgICAgICAgc3RtdCA9IGNvbm4uY3JlYXRlU3RhdGVtZW50KCk7XG4gICAgNDhcdCAgICAgICAgICAgIFN0cmluZyBxdWVyeSA9IFwiU0VMRUNUIE1BWChcIiArIGlkQ29sdW1uTmFtZSArIFwiKSBBUyBtYXhfaWQgRlJPTSBcIiArIHRhYmxlTmFtZTtcbiAgICA0OVx0ICAgICAgICAgICAgcnMgPSBzdG10LmV4ZWN1dGVRdWVyeShxdWVyeSk7XG4gICAgNTBcdFxuICAgIDUxXHQgICAgICAgICAgICBpZiAocnMubmV4dCgpKSB7XG4gICAgNTJcdCAgICAgICAgICAgICAgICBpbnQgbWF4SWQgPSBycy5nZXRJbnQoXCJtYXhfaWRcIik7XG4gICAgNTNcdCAgICAgICAgICAgICAgICBuZXh0SWQgPSBtYXhJZCArIDE7XG4gICAgNTRcdCAgICAgICAgICAgIH1cbiAgICA1NVx0ICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgIDU2XHQgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBlLCBcIkVycm9yXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgIDU3XHQgICAgICAgIH0gZmluYWxseSB7XG4gICAgNThcdCAgICAgICAgICAgIHRyeSB7XG4gICAgNTlcdCAgICAgICAgICAgICAgICBpZiAocnMgIT0gbnVsbCkgcnMuY2xvc2UoKTtcbiAgICA2MFx0ICAgICAgICAgICAgICAgIGlmIChzdG10ICE9IG51bGwpIHN0bXQuY2xvc2UoKTtcbiAgICA2MVx0ICAgICAgICAgICAgICAgIGlmIChjb25uICE9IG51bGwpIGNvbm4uY2xvc2UoKTtcbiAgICA2Mlx0ICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICA2M1x0ICAgICAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgNjRcdCAgICAgICAgICAgIH1cbiAgICA2NVx0ICAgICAgICB9XG4gICAgNjZcdFxuICAgIDY3XHQgICAgICAgIHJldHVybiBuZXh0SWQ7XG4gICAgNjhcdCAgICB9XG4gICAgNjlcdFxuICAgIDcwXHQgICAgLyoqXG4gICAgNzFcdCAgICAgKiBFeGVjdXRlIGEgdHJhbnNhY3Rpb24gd2l0aCBtdWx0aXBsZSBTUUwgb3BlcmF0aW9uc1xuICAgIDcyXHQgICAgICogQHBhcmFtIG9wZXJhdGlvbnMgQXJyYXkgb2YgU1FMIG9wZXJhdGlvbnMgdG8gZXhlY3V0ZVxuICAgIDczXHQgICAgICogQHBhcmFtIHN1Y2Nlc3NNc2cgTWVzc2FnZSB0byBkaXNwbGF5IG9uIHN1Y2Nlc3NcbiAgICA3NFx0ICAgICAqIEByZXR1cm4gdHJ1ZSBpZiB0cmFuc2FjdGlvbiB3YXMgc3VjY2Vzc2Z1bCwgZmFsc2Ugb3RoZXJ3aXNlXG4gICAgNzVcdCAgICAgKi9cbiAgICA3Nlx0ICAgIHB1YmxpYyBzdGF0aWMgYm9vbGVhbiBleGVjdXRlVHJhbnNhY3Rpb24oU3FsT3BlcmF0aW9uW10gb3BlcmF0aW9ucywgU3RyaW5nIHN1Y2Nlc3NNc2cpIHtcbiAgICA3N1x0ICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgIDc4XHQgICAgICAgIGJvb2xlYW4gc3VjY2VzcyA9IGZhbHNlO1xuICAgIDc5XHRcbiAgICA4MFx0ICAgICAgICB0cnkge1xuICAgIDgxXHQgICAgICAgICAgICBjb25uID0gQ29ubmVjdGlvblByb3ZpZGVyLmdldENvbm4oKTtcbiAgICA4Mlx0ICAgICAgICAgICAgY29ubi5zZXRBdXRvQ29tbWl0KGZhbHNlKTtcbiAgICA4M1x0XG4gICAgODRcdCAgICAgICAgICAgIC8vIEV4ZWN1dGUgYWxsIG9wZXJhdGlvbnNcbiAgICA4NVx0ICAgICAgICAgICAgZm9yIChTcWxPcGVyYXRpb24gb3BlcmF0aW9uIDogb3BlcmF0aW9ucykge1xuICAgIDg2XHQgICAgICAgICAgICAgICAgUHJlcGFyZWRTdGF0ZW1lbnQgcHMgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQob3BlcmF0aW9uLmdldFNxbCgpKTtcbiAgICA4N1x0ICAgICAgICAgICAgICAgIG9wZXJhdGlvbi5zZXRQYXJhbWV0ZXJzKHBzKTtcbiAgICA4OFx0ICAgICAgICAgICAgICAgIHBzLmV4ZWN1dGVVcGRhdGUoKTtcbiAgICA4OVx0ICAgICAgICAgICAgICAgIHBzLmNsb3NlKCk7XG4gICAgOTBcdCAgICAgICAgICAgIH1cbiAgICA5MVx0XG4gICAgOTJcdCAgICAgICAgICAgIC8vIENvbW1pdCB0cmFuc2FjdGlvblxuICAgIDkzXHQgICAgICAgICAgICBjb25uLmNvbW1pdCgpO1xuICAgIDk0XHQgICAgICAgICAgICBzdWNjZXNzID0gdHJ1ZTtcbiAgICA5NVx0XG4gICAgOTZcdCAgICAgICAgICAgIC8vIFNob3cgc3VjY2VzcyBtZXNzYWdlIGlmIHByb3ZpZGVkXG4gICAgOTdcdCAgICAgICAgICAgIGlmIChzdWNjZXNzTXNnICE9IG51bGwgJiYgIXN1Y2Nlc3NNc2cuaXNFbXB0eSgpKSB7XG4gICAgOThcdCAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBzdWNjZXNzTXNnLCBcIlN1Y2Nlc3NcIiwgSk9wdGlvblBhbmUuSU5GT1JNQVRJT05fTUVTU0FHRSk7XG4gICAgOTlcdCAgICAgICAgICAgIH1cbiAgIDEwMFx0ICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgMTAxXHQgICAgICAgICAgICAvLyBSb2xsYmFjayB0cmFuc2FjdGlvbiBvbiBlcnJvclxuICAgMTAyXHQgICAgICAgICAgICB0cnkge1xuICAgMTAzXHQgICAgICAgICAgICAgICAgaWYgKGNvbm4gIT0gbnVsbCkgY29ubi5yb2xsYmFjaygpO1xuICAgMTA0XHQgICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gcm9sbGJhY2tFeCkge1xuICAgMTA1XHQgICAgICAgICAgICAgICAgcm9sbGJhY2tFeC5wcmludFN0YWNrVHJhY2UoKTtcbiAgIDEwNlx0ICAgICAgICAgICAgfVxuICAgMTA3XHRcbiAgIDEwOFx0ICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXCJFcnJvcjogXCIgKyBlLmdldE1lc3NhZ2UoKSwgXCJFcnJvclwiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgIDEwOVx0ICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgIDExMFx0ICAgICAgICB9IGZpbmFsbHkge1xuICAgMTExXHQgICAgICAgICAgICB0cnkge1xuICAgMTEyXHQgICAgICAgICAgICAgICAgaWYgKGNvbm4gIT0gbnVsbCkge1xuICAgMTEzXHQgICAgICAgICAgICAgICAgICAgIGNvbm4uc2V0QXV0b0NvbW1pdCh0cnVlKTtcbiAgIDExNFx0ICAgICAgICAgICAgICAgICAgICBjb25uLmNsb3NlKCk7XG4gICAxMTVcdCAgICAgICAgICAgICAgICB9XG4gICAxMTZcdCAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAxMTdcdCAgICAgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgMTE4XHQgICAgICAgICAgICB9XG4gICAxMTlcdCAgICAgICAgfVxuICAgMTIwXHRcbiAgIDEyMVx0ICAgICAgICByZXR1cm4gc3VjY2VzcztcbiAgIDEyMlx0ICAgIH1cbiAgIDEyM1x0XG4gICAxMjRcdCAgICAvKipcbiAgIDEyNVx0ICAgICAqIEludGVyZmFjZSBmb3IgU1FMIG9wZXJhdGlvbnMgd2l0aCBwcmVwYXJlZCBzdGF0ZW1lbnRzXG4gICAxMjZcdCAgICAgKi9cbiAgIDEyN1x0ICAgIHB1YmxpYyBpbnRlcmZhY2UgU3FsT3BlcmF0aW9uIHtcbiAgIDEyOFx0ICAgICAgICBTdHJpbmcgZ2V0U3FsKCk7XG4gICAxMjlcdCAgICAgICAgdm9pZCBzZXRQYXJhbWV0ZXJzKFByZXBhcmVkU3RhdGVtZW50IHBzKSB0aHJvd3MgRXhjZXB0aW9uO1xuICAgMTMwXHQgICAgfVxuICAgMTMxXHR9XG4gICAxMzJcdFxuXG5SZXZpZXcgdGhlIGNoYW5nZXMgYW5kIG1ha2Ugc3VyZSB0aGV5IGFyZSBhcyBleHBlY3RlZCAoY29ycmVjdCBpbmRlbnRhdGlvbiwgbm8gZHVwbGljYXRlIGxpbmVzLCBldGMpLlxuRWRpdCB0aGUgZmlsZSBhZ2FpbiBpZiBuZWNlc3NhcnkuXG4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCJjYWI3MWVmOC1mZTJkLTQ4MTYtOTM4Mi0wN2I3N2YwMjlkOWM7dG9vbHVfMDFZRmVWd0oxTVlaQk0xQnhIWURNYVNVIjp7InJlcXVlc3RJZCI6ImNhYjcxZWY4LWZlMmQtNDgxNi05MzgyLTA3Yjc3ZjAyOWQ5YyIsInRvb2xVc2VJZCI6InRvb2x1XzAxWUZlVndKMU1ZWkJNMUJ4SFlETWFTVSIsInBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IlN1Y2Nlc3NmdWxseSBlZGl0ZWQgdGhlIGZpbGUgc3JjL0RBTy9TdWJzY3JpYmVyREFPLmphdmEuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlIGZvciBlbnRyeSB3aXRoIGluZGV4IFswXTpcblJlcGxhY2VtZW50IHN1Y2Nlc3NmdWwuXG5FZGl0ZWQgc2VjdGlvbiBhZnRlciBJREUgYXV0by1mb3JtYXR0aW5nIHdhcyBhcHBsaWVkOlxuICAgICAzXHQgKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ2xhc3MuamF2YSB0byBlZGl0IHRoaXMgdGVtcGxhdGVcbiAgICAgNFx0ICovXG4gICAgIDVcdHBhY2thZ2UgREFPO1xuICAgICA2XHRcbiAgICAgN1x0aW1wb3J0IE1vZGVsLlN1YnNjcmliZXI7XG4gICAgIDhcdGltcG9ydCBqYXZhLnV0aWwuTGlzdDtcbiAgICAgOVx0aW1wb3J0IGphdmEuc3FsLlByZXBhcmVkU3RhdGVtZW50O1xuICAgIDEwXHRpbXBvcnQgamF2YS5zcWwuVGltZXN0YW1wO1xuICAgIDExXHRpbXBvcnQgREFPLkRiT3BlcmF0aW9ucy5TcWxPcGVyYXRpb247XG4gICAgMTJcdFxuICAgIDEzXHQvKipcbiAgICAxNFx0ICpcbiAgICAxNVx0ICogQGF1dGhvciBOZ29jIFRoYW9cblxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZSBmb3IgZW50cnkgd2l0aCBpbmRleCBbMV06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgICAxNVx0ICogQGF1dGhvciBOZ29jIFRoYW9cbiAgICAxNlx0ICovXG4gICAgMTdcdHB1YmxpYyBjbGFzcyBTdWJzY3JpYmVyREFPe1xuICAgIDE4XHRcbiAgICAxOVx0ICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBpbnNlcnQoZmluYWwgU3Vic2NyaWJlciBvYmopIHtcbiAgICAyMFx0ICAgICAgICAvLyBHZW5lcmF0ZSB1c2VyX2lkIGFuZCBzdWJzY3JpYmVyX2lkXG4gICAgMjFcdCAgICAgICAgZmluYWwgaW50IHVzZXJJZCA9IERiT3BlcmF0aW9ucy5nZXROZXh0SWQoXCJVU0VSXCIsIFwidXNlcl9pZFwiKTtcbiAgICAyMlx0ICAgICAgICBmaW5hbCBpbnQgc3Vic2NyaWJlcklkID0gRGJPcGVyYXRpb25zLmdldE5leHRJZChcIlNVQlNDUklCRVJcIiwgXCJzdWJzY3JpYmVyX2lkXCIpO1xuICAgIDIzXHRcbiAgICAyNFx0ICAgICAgICAvLyBTZXQgdGhlIGdlbmVyYXRlZCBJRHNcbiAgICAyNVx0ICAgICAgICBvYmouc2V0VXNlcl9pZCh1c2VySWQpO1xuICAgIDI2XHQgICAgICAgIG9iai5zZXRTdWJzY3JpYmVyX2lkKHN1YnNjcmliZXJJZCk7XG4gICAgMjdcdFxuICAgIDI4XHQgICAgICAgIC8vIENyZWF0ZSBTUUwgb3BlcmF0aW9ucyBmb3IgdGhlIHRyYW5zYWN0aW9uXG4gICAgMjlcdCAgICAgICAgU3FsT3BlcmF0aW9uW10gb3BlcmF0aW9ucyA9IG5ldyBTcWxPcGVyYXRpb25bXSB7XG4gICAgMzBcdCAgICAgICAgICAgIC8vIEluc2VydCBpbnRvIFVTRVIgdGFibGVcbiAgICAzMVx0ICAgICAgICAgICAgbmV3IFNxbE9wZXJhdGlvbigpIHtcbiAgICAzMlx0ICAgICAgICAgICAgICAgIEBPdmVycmlkZVxuICAgIDMzXHQgICAgICAgICAgICAgICAgcHVibGljIFN0cmluZyBnZXRTcWwoKSB7XG4gICAgMzRcdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiSU5TRVJUIElOVE8gVVNFUih1c2VyX2lkLCB1c2VybmFtZSwgcGFzc3dvcmQsIHJvbGUsIGNyZWF0ZWRfYXQpIFZBTFVFUyAoPywgPywgPywgPywgPylcIjtcbiAgICAzNVx0ICAgICAgICAgICAgICAgIH1cbiAgICAzNlx0XG4gICAgMzdcdCAgICAgICAgICAgICAgICBAT3ZlcnJpZGVcbiAgICAzOFx0ICAgICAgICAgICAgICAgIHB1YmxpYyB2b2lkIHNldFBhcmFtZXRlcnMoUHJlcGFyZWRTdGF0ZW1lbnQgcHMpIHRocm93cyBFeGNlcHRpb24ge1xuICAgIDM5XHQgICAgICAgICAgICAgICAgICAgIHBzLnNldEludCgxLCB1c2VySWQpO1xuICAgIDQwXHQgICAgICAgICAgICAgICAgICAgIHBzLnNldFN0cmluZygyLCBvYmouZ2V0VXNlcm5hbWUoKSk7XG4gICAgNDFcdCAgICAgICAgICAgICAgICAgICAgcHMuc2V0U3RyaW5nKDMsIG9iai5nZXRQYXNzd29yZCgpKTtcbiAgICA0Mlx0ICAgICAgICAgICAgICAgICAgICBwcy5zZXRTdHJpbmcoNCwgb2JqLmdldFJvbGUoKSk7XG4gICAgNDNcdCAgICAgICAgICAgICAgICAgICAgcHMuc2V0VGltZXN0YW1wKDUsIFRpbWVzdGFtcC52YWx1ZU9mKG9iai5nZXRDcmVhdGVfYXQoKSkpO1xuICAgIDQ0XHQgICAgICAgICAgICAgICAgfVxuICAgIDQ1XHQgICAgICAgICAgICB9LFxuICAgIDQ2XHRcbiAgICA0N1x0ICAgICAgICAgICAgLy8gSW5zZXJ0IGludG8gU1VCU0NSSUJFUiB0YWJsZVxuICAgIDQ4XHQgICAgICAgICAgICBuZXcgU3FsT3BlcmF0aW9uKCkge1xuICAgIDQ5XHQgICAgICAgICAgICAgICAgQE92ZXJyaWRlXG4gICAgNTBcdCAgICAgICAgICAgICAgICBwdWJsaWMgU3RyaW5nIGdldFNxbCgpIHtcbiAgICA1MVx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJJTlNFUlQgSU5UTyBTVUJTQ1JJQkVSIChzdWJzY3JpYmVyX2lkLCBuYW1lLCBhZGRyZXNzLCBwaG9uZSwgdXNlcl9pZCkgVkFMVUVTICg/LCA/LCA/LCA/LCA/KVwiO1xuICAgIDUyXHQgICAgICAgICAgICAgICAgfVxuICAgIDUzXHRcbiAgICA1NFx0ICAgICAgICAgICAgICAgIEBPdmVycmlkZVxuICAgIDU1XHQgICAgICAgICAgICAgICAgcHVibGljIHZvaWQgc2V0UGFyYW1ldGVycyhQcmVwYXJlZFN0YXRlbWVudCBwcykgdGhyb3dzIEV4Y2VwdGlvbiB7XG4gICAgNTZcdCAgICAgICAgICAgICAgICAgICAgcHMuc2V0SW50KDEsIHN1YnNjcmliZXJJZCk7XG4gICAgNTdcdCAgICAgICAgICAgICAgICAgICAgcHMuc2V0U3RyaW5nKDIsIG9iai5nZXRGdWxsTmFtZSgpKTtcbiAgICA1OFx0ICAgICAgICAgICAgICAgICAgICBwcy5zZXRTdHJpbmcoMywgb2JqLmdldEFkZHJlc3MoKSk7XG4gICAgNTlcdCAgICAgICAgICAgICAgICAgICAgcHMuc2V0U3RyaW5nKDQsIG9iai5nZXRQaG9uZSgpKTtcbiAgICA2MFx0ICAgICAgICAgICAgICAgICAgICBwcy5zZXRJbnQoNSwgdXNlcklkKTtcbiAgICA2MVx0ICAgICAgICAgICAgICAgIH1cbiAgICA2Mlx0ICAgICAgICAgICAgfVxuICAgIDYzXHQgICAgICAgIH07XG4gICAgNjRcdFxuICAgIDY1XHQgICAgICAgIC8vIEV4ZWN1dGUgdGhlIHRyYW5zYWN0aW9uXG4gICAgNjZcdCAgICAgICAgRGJPcGVyYXRpb25zLmV4ZWN1dGVUcmFuc2FjdGlvbihvcGVyYXRpb25zLCBcIsSQxINuZyBrw70gdGjDoG5oIGPDtG5nIVwiKTtcbiAgICA2N1x0ICAgIH1cbiAgICA2OFx0ICAgIH1cbiAgICA2OVx0XG4gICAgNzBcdCAgICBwdWJsaWMgc3RhdGljIHZvaWQgdXBkYXRlKFN1YnNjcmliZXIgb2JqKSB7XG4gICAgNzFcdCAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpOyAvLyBHZW5lcmF0ZWQgZnJvbSBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ29kZS9HZW5lcmF0ZWRNZXRob2RCb2R5XG5cblJlc3VsdCBmb3Igc3RyX3JlcGxhY2UgZm9yIGVudHJ5IHdpdGggaW5kZXggWzJdOlxuUmVwbGFjZW1lbnQgc3VjY2Vzc2Z1bC5cbkVkaXRlZCBzZWN0aW9uIGFmdGVyIElERSBhdXRvLWZvcm1hdHRpbmcgd2FzIGFwcGxpZWQ6XG4gICAgODJcdCAgICBwdWJsaWMgc3RhdGljIExpc3Q8U3Vic2NyaWJlcj4gZ2V0QWxsKCkge1xuICAgIDgzXHQgICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbihcIk5vdCBzdXBwb3J0ZWQgeWV0LlwiKTsgLy8gR2VuZXJhdGVkIGZyb20gbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NvZGUvR2VuZXJhdGVkTWV0aG9kQm9keVxuICAgIDg0XHQgICAgfVxuICAgIDg1XHRcbiAgICA4Nlx0XG4gICAgODdcdH1cbiAgICA4OFx0XG5cblJldmlldyB0aGUgY2hhbmdlcyBhbmQgbWFrZSBzdXJlIHRoZXkgYXJlIGFzIGV4cGVjdGVkIChjb3JyZWN0IGluZGVudGF0aW9uLCBubyBkdXBsaWNhdGUgbGluZXMsIGV0YykuXG5FZGl0IHRoZSBmaWxlIGFnYWluIGlmIG5lY2Vzc2FyeS5cbiIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX0sImQxOGFhNTkwLWRhMzQtNGNmZS1hMDI5LTU2MjBhNDRlOThkMTt0b29sdV8wMTc2d3lYelNoOFZOTHBtMkpoUEExUkMiOnsicmVxdWVzdElkIjoiZDE4YWE1OTAtZGEzNC00Y2ZlLWEwMjktNTYyMGE0NGU5OGQxIiwidG9vbFVzZUlkIjoidG9vbHVfMDE3Nnd5WHpTaDhWTkxwbTJKaFBBMVJDIiwicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiU3VjY2Vzc2Z1bGx5IGVkaXRlZCB0aGUgZmlsZSBzcmMvREFPL1N1YnNjcmliZXJEQU8uamF2YS5cblJlc3VsdCBmb3Igc3RyX3JlcGxhY2UgZm9yIGVudHJ5IHdpdGggaW5kZXggWzBdOlxuUmVwbGFjZW1lbnQgc3VjY2Vzc2Z1bC5cbkVkaXRlZCBzZWN0aW9uIGFmdGVyIElERSBhdXRvLWZvcm1hdHRpbmcgd2FzIGFwcGxpZWQ6XG4gICAgNjFcdCAgICAgICAgICAgICAgICB9XG4gICAgNjJcdCAgICAgICAgICAgIH1cbiAgICA2M1x0ICAgICAgICB9O1xuICAgIDY0XHRcbiAgICA2NVx0ICAgICAgICAvLyBFeGVjdXRlIHRoZSB0cmFuc2FjdGlvblxuICAgIDY2XHQgICAgICAgIERiT3BlcmF0aW9ucy5leGVjdXRlVHJhbnNhY3Rpb24ob3BlcmF0aW9ucywgXCLEkMSDbmcga8O9IHRow6BuaCBjw7RuZyFcIik7XG4gICAgNjdcdCAgICB9XG4gICAgNjhcdFxuICAgIDY5XHQgICAgcHVibGljIHN0YXRpYyB2b2lkIHVwZGF0ZShTdWJzY3JpYmVyIG9iaikge1xuICAgIDcwXHQgICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbihcIk5vdCBzdXBwb3J0ZWQgeWV0LlwiKTsgLy8gR2VuZXJhdGVkIGZyb20gbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NvZGUvR2VuZXJhdGVkTWV0aG9kQm9keVxuICAgIDcxXHQgICAgfVxuXG5SZXZpZXcgdGhlIGNoYW5nZXMgYW5kIG1ha2Ugc3VyZSB0aGV5IGFyZSBhcyBleHBlY3RlZCAoY29ycmVjdCBpbmRlbnRhdGlvbiwgbm8gZHVwbGljYXRlIGxpbmVzLCBldGMpLlxuRWRpdCB0aGUgZmlsZSBhZ2FpbiBpZiBuZWNlc3NhcnkuXG4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19fSwiZHJhZnRFeGNoYW5nZSI6eyJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJyaWNoX3RleHRfanNvbl9yZXByIjp7InR5cGUiOiJkb2MiLCJjb250ZW50IjpbeyJ0eXBlIjoicGFyYWdyYXBoIn1dfSwibWVudGlvbmVkX2l0ZW1zIjpbXSwic3RhdHVzIjoiZHJhZnQifSwicmVxdWVzdElkcyI6W10sImlzUGlubmVkIjpmYWxzZSwiaXNTaGFyZWFibGUiOnRydWUsImV4dHJhRGF0YSI6eyJpc0FnZW50Q29udmVyc2F0aW9uIjp0cnVlLCJoYXNBZ2VudE9uYm9hcmRlZCI6dHJ1ZSwiaGFzRGlydHlFZGl0cyI6dHJ1ZSwiYmFzZWxpbmVUaW1lc3RhbXAiOjE3NDcwOTkwNzE4MDB9LCJwZXJzb25hVHlwZSI6MCwiZHJhZnRBY3RpdmVDb250ZXh0SWRzIjpbIkU6L0hvY1RhcC8wMl9KQVZBLzAzX1Byb2plY3QvSW50ZXJuZXQgTWFuZ2VtZW50IFN5c3RlbS9zcmMvREFPL1N1YnNjcmliZXJEQU8uamF2YSIsIkU6L0hvY1RhcC8wMl9KQVZBLzAzX1Byb2plY3QvSW50ZXJuZXQgTWFuZ2VtZW50IFN5c3RlbWZhbHNlZmFsc2UiLCJ1c2VyR3VpZGVsaW5lcyIsImFnZW50TWVtb3JpZXMiXX0sIjlkODI3NzI2LWQyNjMtNGRiMy1hNmZjLTZhOGFlNDMzOGExMSI6eyJpZCI6IjlkODI3NzI2LWQyNjMtNGRiMy1hNmZjLTZhOGFlNDMzOGExMSIsImNyZWF0ZWRBdElzbyI6IjIwMjUtMDUtMTNUMDE6MTg6MDcuMjU2WiIsImxhc3RJbnRlcmFjdGVkQXRJc28iOiIyMDI1LTA1LTEzVDAxOjU0OjQ0LjMzNVoiLCJjaGF0SGlzdG9yeSI6W3sicmVxdWVzdF9pZCI6ImIyYjI1ZjcyLWZkMDktNDhmMi05YmNiLTljYWQ4ZTU3MTEwMCIsInV1aWQiOiI2ZTI4MDYyMC00ZjQxLTQzZjQtYmM3Ni1jNDE0YzllNmUzZGMiLCJjaGF0SXRlbVR5cGUiOiJhZ2VudGljLWNoZWNrcG9pbnQtZGVsaW1pdGVyIiwic3RhdHVzIjoic3VjY2VzcyIsImZyb21UaW1lc3RhbXAiOjAsInRvVGltZXN0YW1wIjoxNzQ3MDk5MDg3MjU4LCJzZWVuX3N0YXRlIjoic2VlbiJ9LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiJkNjE4NWYyOS0wNzg0LTQzNDAtYmJhYi1jZjBlMDdlNzE1ZmEiLCJyZXF1ZXN0X21lc3NhZ2UiOiJXcml0ZSBldmVudCBoYW5kbGluZyBmdW5jdGlvbiBpbiBGb3Jnb3RQYXNzd29yZDogTWFrZSBwb3B1cCwgbW9kYWwsIHNlYXJjaCBmb3IgcGhvbmUgbnVtYmVyLCBvbmx5IGFsbG93IG5ldyBwYXNzd29yZCBlbnRyeSBhbmQgcGFzc3dvcmQgY29uZmlybWF0aW9uIGFmdGVyIGNvcnJlY3QiLCJyaWNoX3RleHRfanNvbl9yZXByIjp7InR5cGUiOiJkb2MiLCJjb250ZW50IjpbeyJ0eXBlIjoicGFyYWdyYXBoIiwiY29udGVudCI6W3sidHlwZSI6InRleHQiLCJ0ZXh0IjoiV3JpdGUgZXZlbnQgaGFuZGxpbmcgZnVuY3Rpb24gaW4gRm9yZ290UGFzc3dvcmQ6IE1ha2UgcG9wdXAsIG1vZGFsLCBzZWFyY2ggZm9yIHBob25lIG51bWJlciwgb25seSBhbGxvdyBuZXcgcGFzc3dvcmQgZW50cnkgYW5kIHBhc3N3b3JkIGNvbmZpcm1hdGlvbiBhZnRlciBjb3JyZWN0In1dfV19LCJtZW50aW9uZWRfaXRlbXMiOltdLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1XzAxSmJUY3gxYkFVcDFrS2NMN01SV1c1TCIsInRvb2xfbmFtZSI6ImNvZGViYXNlLXJldHJpZXZhbCIsImlucHV0X2pzb24iOiJ7XCJpbmZvcm1hdGlvbl9yZXF1ZXN0XCI6IFwiRmluZCB0aGUgRm9yZ290UGFzc3dvcmQgY2xhc3Mgb3IgZmlsZS4gSSBuZWVkIHRvIHNlZSBpdHMgY3VycmVudCBzdHJ1Y3R1cmUsIG1ldGhvZHMsIGFuZCBVSSBjb21wb25lbnRzLlwifSIsIm1jcF9zZXJ2ZXJfbmFtZSI6IiIsIm1jcF90b29sX25hbWUiOiIifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IkknbGwgaGVscCB5b3UgaW1wbGVtZW50IHRoZSBldmVudCBoYW5kbGluZyBmdW5jdGlvbiBmb3IgdGhlIEZvcmdvdFBhc3N3b3JkIGZlYXR1cmUuIExldCBtZSBmaXJzdCBnYXRoZXIgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGV4aXN0aW5nIGNvZGViYXNlIHRvIHVuZGVyc3RhbmQgdGhlIHN0cnVjdHVyZSBhbmQgcmVxdWlyZW1lbnRzIGJldHRlci5cbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjAsInRleHRfbm9kZSI6eyJjb250ZW50IjoiV3JpdGUgZXZlbnQgaGFuZGxpbmcgZnVuY3Rpb24gaW4gRm9yZ290UGFzc3dvcmQ6IE1ha2UgcG9wdXAsIG1vZGFsLCBzZWFyY2ggZm9yIHBob25lIG51bWJlciwgb25seSBhbGxvdyBuZXcgcGFzc3dvcmQgZW50cnkgYW5kIHBhc3N3b3JkIGNvbmZpcm1hdGlvbiBhZnRlciBjb3JyZWN0In19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiRTovSG9jVGFwLzAyX0pBVkEvMDNfUHJvamVjdC9JbnRlcm5ldCBNYW5nZW1lbnQgU3lzdGVtIiwiZm9sZGVyUm9vdCI6IkU6L0hvY1RhcC8wMl9KQVZBLzAzX1Byb2plY3QvSW50ZXJuZXQgTWFuZ2VtZW50IFN5c3RlbSJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInRpbWVzdGFtcCI6IjIwMjUtMDUtMTNUMDE6MTk6MzEuMjUxWiIsInJlc3BvbnNlX3RleHQiOiJJJ2xsIGhlbHAgeW91IGltcGxlbWVudCB0aGUgZXZlbnQgaGFuZGxpbmcgZnVuY3Rpb24gZm9yIHRoZSBGb3Jnb3RQYXNzd29yZCBmZWF0dXJlLiBMZXQgbWUgZmlyc3QgZ2F0aGVyIGluZm9ybWF0aW9uIGFib3V0IHRoZSBleGlzdGluZyBjb2RlYmFzZSB0byB1bmRlcnN0YW5kIHRoZSBzdHJ1Y3R1cmUgYW5kIHJlcXVpcmVtZW50cyBiZXR0ZXIuXG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiYTdlZThlZDUtMmM1MC00OTVjLWI5OWMtMTIyNWU5YWY4YTEzIiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV8wMTlBM1REQjZnYUJWQTJnaTNvSGlxUEsiLCJ0b29sX25hbWUiOiJjb2RlYmFzZS1yZXRyaWV2YWwiLCJpbnB1dF9qc29uIjoie1wiaW5mb3JtYXRpb25fcmVxdWVzdFwiOiBcIkZpbmQgYW55IGRhdGFiYXNlIGNvbm5lY3Rpb24gb3IgdXNlciBtYW5hZ2VtZW50IGNsYXNzZXMgdGhhdCB3b3VsZCBoYW5kbGUgdXNlciBkYXRhLCBlc3BlY2lhbGx5IGNoZWNraW5nIHBob25lIG51bWJlcnMgYW5kIHVwZGF0aW5nIHBhc3N3b3Jkcy5cIn0iLCJtY3Bfc2VydmVyX25hbWUiOiIiLCJtY3BfdG9vbF9uYW1lIjoiIn19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiJOb3cgSSBuZWVkIHRvIHVuZGVyc3RhbmQgaG93IHRoZSB1c2VyIGRhdGEgaXMgc3RvcmVkIGFuZCBob3cgdG8gY2hlY2sgaWYgYSBwaG9uZSBudW1iZXIgZXhpc3RzIGluIHRoZSBzeXN0ZW0uXG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJUaGUgZm9sbG93aW5nIGNvZGUgc2VjdGlvbnMgd2VyZSByZXRyaWV2ZWQ6XG5QYXRoOiBzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9Gb3Jnb3RQYXNzd29yZC5qYXZhXG4vKlxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9MaWNlbnNlcy9saWNlbnNlLWRlZmF1bHQudHh0IHRvIGNoYW5nZSB0aGlzIGxpY2Vuc2VcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvR1VJRm9ybXMvSkZyYW1lLmphdmEgdG8gZWRpdCB0aGlzIHRlbXBsYXRlXG4gKi9cbnBhY2thZ2UgaW50ZXJuZXQubWFuZ2VtZW50LnN5c3RlbTtcblxuaW1wb3J0IGphdmF4LnN3aW5nLkpPcHRpb25QYW5lO1xuXG4vKipcbiAqXG4gKiBAYXV0aG9yIE5nb2MgVGhhb1xuICovXG5wdWJsaWMgY2xhc3MgRm9yZ290UGFzc3dvcmQgZXh0ZW5kcyBqYXZheC5zd2luZy5KRnJhbWUge1xuICAgIHB1YmxpYyBTdHJpbmcgcGhvbmVQYXR0ZXJuID0gXCJeWzAtOV0qJFwiO1xuICAgIFxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgbmV3IGZvcm0gRm9yZ290UGFzc3dvcmRcbiAgICAgKi9cbiAgICBwdWJsaWMgRm9yZ290UGFzc3dvcmQoKSB7XG4gICAgICAgIGluaXRDb21wb25lbnRzKCk7XG4gICAgICAgIFxuICAgICAgICBidG5FeGl0LnNldFZpc2libGUoZmFsc2UpO1xuICAgICAgICBidG5DaGFuZ2Uuc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgICAgIGxiTmV3UGFzc3dvcmQuc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgICAgIGxiQ29uZmlybVBhc3N3b3JkLnNldFZpc2libGUoZmFsc2UpO1xuICAgICAgICB0eHRQYXNzd29yZC5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICAgICAgdHh0Q29uZmlybVBhc3N3b3JkLnNldFZpc2libGUoZmFsc2UpO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIGNsZWFyKCl7XG4gICAgICAgIHR4dFBhc3N3b3JkLnNldFRleHQoXCJcIik7XG4gICAgICAgIHR4dFBob25lLnNldFRleHQoXCJcIik7XG4gICAgICAgIHR4dENvbmZpcm1QYXNzd29yZC5zZXRUZXh0KFwiXCIpO1xuICAgICAgICBcbiAgICAgICAgYnRuRXhpdC5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICAgICAgYnRuQ2hhbmdlLnNldFZpc2libGUoZmFsc2UpO1xuICAgICAgICBsYk5ld1Bhc3N3b3JkLnNldFZpc2libGUoZmFsc2UpO1xuICAgICAgICBsYkNvbmZpcm1QYXNzd29yZC5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICAgICAgdHh0UGFzc3dvcmQuc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgICAgIHR4dENvbmZpcm1QYXNzd29yZC5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIGJvb2xlYW4gdmFsaWRhdGVQaG9uZSgpe1xuICAgICAgICBTdHJpbmcgcGhvbmUgPSB0eHRQaG9uZS5nZXRUZXh0KCk7XG4gICAgICAgIGlmKHBob25lLmxlbmd0aCgpICE9IDEwIHx8ICFwaG9uZS5tYXRjaGVzKHBob25lUGF0dGVybikpIHtcbiAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwiVnVpIGzDsm5nIG5o4bqtcCDEkcO6bmcgxJHhu4tuaCBk4bqhbmcgc+G7kSDEkWnhu4duIHRob+G6oWkhXCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyBib29sZWFuIHZhbGlkYXRlRmllbGRzKCl7XG4gICAgICAgIFN0cmluZyBwYXNzd29yZCA9IHR4dFBhc3N3b3JkLmdldFRleHQoKTtcbiAgICAgICAgU3RyaW5nIGNvbmZpcm1QYXNzd29yZCA9IHR4dENvbmZpcm1QYXNzd29yZC5nZXRUZXh0KCk7XG5cbiAgICAgICAgaWYocGFzc3dvcmQuaXNFbXB0eSgpIHx8IGNvbmZpcm1QYXNzd29yZC5pc0VtcHR5KCkpe1xuICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXCJWdWkgbMOybmcga2jDtG5nIGLhu48gdHLhu5FuZyFcIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgaXMgY2FsbGVkIGZyb20gd2l0aGluIHRoZSBjb25zdHJ1Y3RvciB0byBpbml0aWFsaXplIHRoZSBmb3JtLlxuICAgICAqIFdBUk5JTkc6IERvIE5PVCBtb2RpZnkgdGhpcyBjb2RlLiBUaGUgY29udGVudCBvZiB0aGlzIG1ldGhvZCBpcyBhbHdheXNcbiAgICAgKiByZWdlbmVyYXRlZCBieSB0aGUgRm9ybSBFZGl0b3IuXG4gICAgICovXG4gICAgQFN1cHByZXNzV2FybmluZ3MoXCJ1bmNoZWNrZWRcIilcbiAgICAvLyA8ZWRpdG9yLWZvbGQgZGVmYXVsdHN0YXRlPVwiY29sbGFwc2VkXCIgZGVzYz1cIkdlbmVyYXRlZCBDb2RlXCI+Ly9HRU4tQkVHSU46aW5pdENvbXBvbmVudHNcbiAgICBwcml2YXRlIHZvaWQgaW5pdENvbXBvbmVudHMoKSB7XG5cbiAgICAgICAgakxhYmVsMSA9IG5ldyBqYXZheC5zd2luZy5KTGFiZWwoKTtcbiAgICAgICAgakxhYmVsMiA9IG5ldyBqYXZheC5zd2luZy5KTGFiZWwoKTtcbiAgICAgICAgbGJOZXdQYXNzd29yZCA9IG5ldyBqYXZheC5zd2luZy5KTGFiZWwoKTtcbiAgICAgICAgbGJDb25maXJtUGFzc3dvcmQgPSBuZXcgamF2YXguc3dpbmcuSkxhYmVsKCk7XG4gICAgICAgIGpTZXBhcmF0b3IxID0gbmV3IGphdmF4LnN3aW5nLkpTZXBhcmF0b3IoKTtcbiAgICAgICAgdHh0UGhvbmUgPSBuZXcgamF2YXguc3dpbmcuSlRleHRGaWVsZCgpO1xuICAgICAgICBidG5DaGVjayA9IG5ldyBqYXZheC5zd2luZy5KQnV0dG9uKCk7XG4gICAgICAgIHR4dFBhc3N3b3JkID0gbmV3IGphdmF4LnN3aW5nLkpQYXNzd29yZEZpZWxkKCk7XG4gICAgICAgIHR4dENvbmZpcm1QYXNzd29yZCA9IG5ldyBqYXZheC5zd2luZy5KUGFzc3dvcmRGaWVsZCgpO1xuICAgICAgICBidG5DaGFuZ2UgPSBuZXcgamF2YXguc3dpbmcuSkJ1dHRvbigpO1xuICAgICAgICBidG5FeGl0ID0gbmV3IGphdmF4LnN3aW5nLkpCdXR0b24oKTtcblxuICAgICAgICBzZXREZWZhdWx0Q2xvc2VPcGVyYXRpb24oamF2YXguc3dpbmcuV2luZG93Q29uc3RhbnRzLkVYSVRfT05fQ0xPU0UpO1xuXG4gICAgICAgIGpMYWJlbDEuc2V0Rm9udChuZXcgamF2YS5hd3QuRm9udChcIkFyaWFsXCIsIDEsIDM2KSk7IC8vIE5PSTE4TlxuICAgICAgICBqTGFiZWwxLnNldEZvcmVncm91bmQoamF2YXguc3dpbmcuVUlNYW5hZ2VyLmdldERlZmF1bHRzKCkuZ2V0Q29sb3IoXCJBY3Rpb25zLlllbGxvd1wiKSk7XG4gICAgICAgIGpMYWJlbDEuc2V0VGV4dChcIsSQ4buUSSBN4bqsVCBLSOG6qFVcIik7XG5cbiAgICAgICAgakxhYmVsMi5zZXRGb250KG5ldyBqYXZhLmF3dC5Gb250KFwiQXJpYWxcIiwgMSwgMTQpKTsgLy8gTk9JMThOXG4gICAgICAgIGpMYWJlbDIuc2V0VGV4dChcIlPhu5EgxJFp4buHbiB0aG/huqFpOiBcIik7XG5cbiAgICAgICAgbGJOZXdQYXNzd29yZC5zZXRGb250KG5ldyBqYXZhLmF3dC5Gb250KFwiQXJpYWxcIiwgMSwgMTQpKTsgLy8gTk9JMThOXG4gICAgICAgIGxiTmV3UGFzc3dvcmQuc2V0VGV4dChcIk3huq10IGto4bqpdSBt4bubaTpcIik7XG5cbiAgICAgICAgbGJDb25maXJtUGFzc3dvcmQuc2V0Rm9udChuZXcgamF2YS5hd3QuRm9udChcIkFyaWFsXCIsIDEsIDE0KSk7IC8vIE5PSTE4TlxuICAgICAgICBsYkNvbmZpcm1QYXNzd29yZC5zZXRUZXh0KFwiWMOhYyBuaOG6rW4gbeG6rXQga2jhuql1OlwiKTtcblxuICAgICAgICBidG5DaGVjay5zZXRGb250KG5ldyBqYXZhLmF3dC5Gb250KFwiQXJpYWxcIiwgMSwgMTQpKTsgLy8gTk9JMThOXG4gICAgICAgIGJ0bkNoZWNrLnNldEljb24obmV3IGphdmF4LnN3aW5nLkltYWdlSWNvbihnZXRDbGFzcygpLmdldFJlc291cmNlKFwiL0ltYWdlcy9zZWFyY2gucG5nXCIpKSk7IC8vIE5PSTE4TlxuICAgICAgICBidG5DaGVjay5zZXRUZXh0KFwiS2nhu4NtIHRyYVwiKTtcbiAgICAgICAgYnRuQ2hlY2suc2V0Q3Vyc29yKG5ldyBqYXZhLmF3dC5DdXJzb3IoamF2YS5hd3QuQ3Vyc29yLkhBTkRfQ1VSU09SKSk7XG5cbiAgICAgICAgYnRuQ2hhbmdlLnNldEZvbnQobmV3IGphdmEuYXd0LkZvbnQoXCJBcmlhbFwiLCAxLCAxNCkpOyAvLyBOT0kxOE5cbiAgICAgICAgYnRuQ2hhbmdlLnNldEljb24obmV3IGphdmF4LnN3aW5nLkltYWdlSWNvbihnZXRDbGFzcygpLmdldFJlc291cmNlKFwiL0ltYWdlcy9yZXNldC1wYXNzd29yZC5wbmdcIikpKTsgLy8gTk9JMThOXG4gICAgICAgIGJ0bkNoYW5nZS5zZXRUZXh0KFwixJDhu5VpIG3huq10IGto4bqpdVwiKTtcbiAgICAgICAgYnRuQ2hhbmdlLnNldEN1cnNvcihuZXcgamF2YS5hd3QuQ3Vyc29yKGphdmEuYXd0LkN1cnNvci5IQU5EX0NVUlNPUikpO1xuXG4gICAgICAgIGJ0bkV4aXQuc2V0Rm9udChuZXcgamF2YS5hd3QuRm9udChcIkFyaWFsXCIsIDEsIDE0KSk7IC8vIE5PSTE4TlxuICAgICAgICBidG5FeGl0LnNldEljb24obmV3IGphdmF4LnN3aW5nLkltYWdlSWNvbihnZXRDbGFzcygpLmdldFJlc291cmNlKFwiL0ltYWdlcy9sb2dvdXQucG5nXCIpKSk7IC8vIE5PSTE4TlxuICAgICAgICBidG5FeGl0LnNldFRleHQoXCJUaG/DoXRcIik7XG4gICAgICAgIGJ0bkV4aXQuc2V0Q3Vyc29yKG5ldyBqYXZhLmF3dC5DdXJzb3IoamF2YS5hd3QuQ3Vyc29yLkhBTkRfQ1VSU09SKSk7XG4gICAgICAgIGJ0bkV4aXQuYWRkQWN0aW9uTGlzdGVuZXIobmV3IGphdmEuYXd0LmV2ZW50LkFjdGlvbkxpc3RlbmVyKCkge1xuICAgICAgICAgICAgcHVibGljIHZvaWQgYWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkge1xuICAgICAgICAgICAgICAgIGJ0bkV4aXRBY3Rpb25QZXJmb3JtZWQoZXZ0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQgbGF5b3V0ID0gbmV3IGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0KGdldENvbnRlbnRQYW5lKCkpO1xuICAgICAgICBnZXRDb250ZW50UGFuZSgpLnNldExheW91dChsYXlvdXQpO1xuICAgICAgICBsYXlvdXQuc2V0SG9yaXpvbnRhbEdyb3VwKFxuICAgICAgICAgICAgbGF5b3V0LmNyZWF0ZVBhcmFsbGVsR3JvdXAoamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuQWxpZ25tZW50LkxFQURJTkcpXG4gICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVNlcXVlbnRpYWxHcm91cCgpXG4gICAgICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVQYXJhbGxlbEdyb3VwKGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LkFsaWdubWVudC5MRUFESU5HKVxuICAgICAgICAgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVNlcXVlbnRpYWxHcm91cCgpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkR2FwKDExMCwgMTEwLCAxMTApXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGpMYWJlbDEpKVxuICAgICAgICAgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVNlcXVlbnRpYWxHcm91cCgpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkR2FwKDYxLCA2MSwgNjEpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGpTZXBhcmF0b3IxLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSwgMzcwLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSkpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlU2VxdWVudGlhbEdyb3VwKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRHYXAoNjEsIDYxLCA2MSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQoakxhYmVsMilcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRHYXAoNTYsIDU2LCA1NilcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQodHh0UGhvbmUsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFLCAyMTAsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFKSlcbiAgICAgICAgICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVTZXF1ZW50aWFsR3JvdXAoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZEdhcCg2MSwgNjEsIDYxKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChsYk5ld1Bhc3N3b3JkKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZEdhcCg1NywgNTcsIDU3KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVQYXJhbGxlbEdyb3VwKGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LkFsaWdubWVudC5MRUFESU5HKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQodHh0UGFzc3dvcmQsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFLCAyMTAsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlU2VxdWVudGlhbEdyb3VwKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFkZEdhcCgxMDIsIDEwMiwgMTAyKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGJ0bkNoZWNrKSkpKVxuICAgICAgICAgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVBhcmFsbGVsR3JvdXAoamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuQWxpZ25tZW50LlRSQUlMSU5HLCBmYWxzZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlU2VxdWVudGlhbEdyb3VwKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYWRkR2FwKDYwLCA2MCwgNjApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChidG5FeGl0KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRQcmVmZXJyZWRHYXAoamF2YXguc3dpbmcuTGF5b3V0U3R5bGUuQ29tcG9uZW50UGxhY2VtZW50LlJFTEFURUQsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LkRFRkFVTFRfU0laRSwgU2hvcnQuTUFYX1ZBTFVFKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQoYnRuQ2hhbmdlKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlU2VxdWVudGlhbEdyb3VwKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYWRkR2FwKDYxLCA2MSwgNjEpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChsYkNvbmZpcm1QYXNzd29yZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYWRkR2FwKDE4LCAxOCwgMTgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudCh0eHRDb25maXJtUGFzc3dvcmQsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFLCAyMTEsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFKSkpKVxuICAgICAgICAgICAgICAgIC5hZGRHYXAoNjksIDY5LCA2OSkpXG4gICAgICAgICk7XG4gICAgICAgIGxheW91dC5zZXRWZXJ0aWNhbEdyb3VwKFxuICAgICAgICAgICAgbGF5b3V0LmNyZWF0ZVBhcmFsbGVsR3JvdXAoamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuQWxpZ25tZW50LkxFQURJTkcpXG4gICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVNlcXVlbnRpYWxHcm91cCgpXG4gICAgICAgICAgICAgICAgLmFkZEdhcCg0MCwgNDAsIDQwKVxuICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQoakxhYmVsMSlcbiAgICAgICAgICAgICAgICAuYWRkR2FwKDE0LCAxNCwgMTQpXG4gICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChqU2VwYXJhdG9yMSwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUsIDEwLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSlcbiAgICAgICAgICAgICAgICAuYWRkR2FwKDEyLCAxMiwgMTIpXG4gICAgICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVQYXJhbGxlbEdyb3VwKGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LkFsaWdubWVudC5MRUFESU5HKVxuICAgICAgICAgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVNlcXVlbnRpYWxHcm91cCgpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkR2FwKDMsIDMsIDMpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGpMYWJlbDIpKVxuICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KHR4dFBob25lLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuREVGQVVMVF9TSVpFLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSkpXG4gICAgICAgICAgICAgICAgLmFkZEdhcCgxOCwgMTgsIDE4KVxuICAgICAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlUGFyYWxsZWxHcm91cChqYXZheC5zd2luZy5Hcm91cExheW91dC5BbGlnbm1lbnQuTEVBRElORylcbiAgICAgICAgICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVTZXF1ZW50aWFsR3JvdXAoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZEdhcCgzLCAzLCAzKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChsYk5ld1Bhc3N3b3JkKSlcbiAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudCh0eHRQYXNzd29yZCwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LkRFRkFVTFRfU0laRSwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlU2VxdWVudGlhbEdyb3VwKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRHYXAoMiwgMiwgMilcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQoYnRuQ2hlY2ssIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFLCAzMCwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUpKSlcbiAgICAgICAgICAgICAgICAuYWRkR2FwKDgsIDgsIDgpXG4gICAgICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVQYXJhbGxlbEdyb3VwKGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LkFsaWdubWVudC5MRUFESU5HKVxuICAgICAgICAgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVNlcXVlbnRpYWxHcm91cCgpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkR2FwKDMsIDMsIDMpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGxiQ29uZmlybVBhc3N3b3JkKSlcbiAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudCh0eHRDb25maXJtUGFzc3dvcmQsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5ERUZBVUxUX1NJWkUsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFKSlcbiAgICAgICAgICAgICAgICAuYWRkR2FwKDMwLCAzMCwgMzApXG4gICAgICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVQYXJhbGxlbEdyb3VwKGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LkFsaWdubWVudC5CQVNFTElORSlcbiAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChidG5FeGl0LCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSwgMzAsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFKVxuICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGJ0bkNoYW5nZSwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUsIDMwLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSkpKVxuICAgICAgICApO1xuXG4gICAgICAgIHBhY2soKTtcbiAgICB9Ly8gPC9lZGl0b3ItZm9sZD4vL0dFTi1FTkQ6aW5pdENvbXBvbmVudHNcblxuICAgIHByaXZhdGUgdm9pZCBidG5FeGl0QWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkV4aXRBY3Rpb25QZXJmb3JtZWRcbiAgICAgICAgLy8gVE9ETyBhZGQgeW91ciBoYW5kbGluZyBjb2RlIGhlcmU6XG4gICAgICAgIGludCByZXN1bHQgPSBKT3B0aW9uUGFuZS5zaG93Q29uZmlybURpYWxvZyhudWxsLCBcIkLhuqFuIGPDsyBjaOG6r2MgY2jhuq9uIG114buRbiB0aG/DoXQga2jDtG5nP1wiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLllFU19OT19PUFRJT04sIEpPcHRpb25QYW5lLlFVRVNUSU9OX01FU1NBR0UpO1xuICAgIFxuICAgICAgICBpZiAocmVzdWx0ID09IEpPcHRpb25QYW5lLllFU19PUFRJT04pIHtcbiAgICAgICAgICAgIFN5c3RlbS5leGl0KDApO1xuICAgICAgICB9XG4gICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuRXhpdEFjdGlvblBlcmZvcm1lZFxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIGFyZ3MgdGhlIGNvbW1hbmQgbGluZSBhcmd1bWVudHNcbiAgICAgKi9cbiAgICBwdWJsaWMgc3RhdGljIHZvaWQgbWFpbihTdHJpbmcgYXJnc1tdKSB7XG4gICAgICAgIC8qIFNldCB0aGUgTmltYnVzIGxvb2sgYW5kIGZlZWwgKi9cbiAgICAgICAgLy88ZWRpdG9yLWZvbGQgZGVmYXVsdHN0YXRlPVwiY29sbGFwc2VkXCIgZGVzYz1cIiBMb29rIGFuZCBmZWVsIHNldHRpbmcgY29kZSAob3B0aW9uYWwpIFwiPlxuICAgICAgICAvKiBJZiBOaW1idXMgKGludHJvZHVjZWQgaW4gSmF2YSBTRSA2KSBpcyBub3QgYXZhaWxhYmxlLCBzdGF5IHdpdGggdGhlIGRlZmF1bHQgbG9vayBhbmQgZmVlbC5cbiAgICAgICAgICogRm9yIGRldGFpbHMgc2VlIGh0dHA6Ly9kb3dubG9hZC5vcmFjbGUuY29tL2phdmFzZS90dXRvcmlhbC91aXN3aW5nL2xvb2thbmRmZWVsL3BsYWYuaHRtbCBcbiAgICAgICAgICovXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBmb3IgKGphdmF4LnN3aW5nLlVJTWFuYWdlci5Mb29rQW5kRmVlbEluZm8gaW5mbyA6IGphdmF4LnN3aW5nLlVJTWFuYWdlci5nZXRJbnN0YWxsZWRMb29rQW5kRmVlbHMoKSkge1xuICAgICAgICAgICAgICAgIGlmIChcIk5pbWJ1c1wiLmVxdWFscyhpbmZvLmdldE5hbWUoKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgamF2YXguc3dpbmcuVUlNYW5hZ2VyLnNldExvb2tBbmRGZWVsKGluZm8uZ2V0Q2xhc3NOYW1lKCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKENsYXNzTm90Rm91bmRFeGNlcHRpb24gZXgpIHtcbiAgICAgICAgICAgIGphdmEudXRpbC5sb2dnaW5nLkxvZ2dlci5nZXRMb2dnZXIoRm9yZ290UGFzc3dvcmQuY2xhc3MuZ2V0TmFtZSgpKS5sb2coamF2YS51dGlsLmxvZ2dpbmcuTGV2ZWwuU0VWRVJFLCBudWxsLCBleCk7XG4gICAgICAgIH0gY2F0Y2ggKEluc3RhbnRpYXRpb25FeGNlcHRpb24gZXgpIHtcbiAgICAgICAgICAgIGphdmEudXRpbC5sb2dnaW5nLkxvZ2dlci5nZXRMb2dnZXIoRm9yZ290UGFzc3dvcmQuY2xhc3MuZ2V0TmFtZSgpKS5sb2coamF2YS51dGlsLmxvZ2dpbmcuTGV2ZWwuU0VWRVJFLCBudWxsLCBleCk7XG4gICAgICAgIH0gY2F0Y2ggKElsbGVnYWxBY2Nlc3NFeGNlcHRpb24gZXgpIHtcbiAgICAgICAgICAgIGphdmEudXRpbC5sb2dnaW5nLkxvZ2dlci5nZXRMb2dnZXIoRm9yZ290UGFzc3dvcmQuY2xhc3MuZ2V0TmFtZSgpKS5sb2coamF2YS51dGlsLmxvZ2dpbmcuTGV2ZWwuU0VWRVJFLCBudWxsLCBleCk7XG4gICAgICAgIH0gY2F0Y2ggKGphdmF4LnN3aW5nLlVuc3VwcG9ydGVkTG9va0FuZEZlZWxFeGNlcHRpb24gZXgpIHtcbiAgICAgICAgICAgIGphdmEudXRpbC5sb2dnaW5nLkxvZ2dlci5nZXRMb2dnZXIoRm9yZ290UGFzc3dvcmQuY2xhc3MuZ2V0TmFtZSgpKS5sb2coamF2YS51dGlsLmxvZ2dpbmcuTGV2ZWwuU0VWRVJFLCBudWxsLCBleCk7XG4gICAgICAgIH1cbiAgICAgICAgLy88L2VkaXRvci1mb2xkPlxuXG4gICAgICAgIC8qIENyZWF0ZSBhbmQgZGlzcGxheSB0aGUgZm9ybSAqL1xuICAgICAgICBqYXZhLmF3dC5FdmVudFF1ZXVlLmludm9rZUxhdGVyKG5ldyBSdW5uYWJsZSgpIHtcbiAgICAgICAgICAgIHB1YmxpYyB2b2lkIHJ1bigpIHtcbiAgICAgICAgICAgICAgICBuZXcgRm9yZ290UGFzc3dvcmQoKS5zZXRWaXNpYmxlKHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBWYXJpYWJsZXMgZGVjbGFyYXRpb24gLSBkbyBub3QgbW9kaWZ5Ly9HRU4tQkVHSU46dmFyaWFibGVzXG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KQnV0dG9uIGJ0bkNoYW5nZTtcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpCdXR0b24gYnRuQ2hlY2s7XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KQnV0dG9uIGJ0bkV4aXQ7XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KTGFiZWwgakxhYmVsMTtcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpMYWJlbCBqTGFiZWwyO1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSlNlcGFyYXRvciBqU2VwYXJhdG9yMTtcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpMYWJlbCBsYkNvbmZpcm1QYXNzd29yZDtcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpMYWJlbCBsYk5ld1Bhc3N3b3JkO1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSlBhc3N3b3JkRmllbGQgdHh0Q29uZmlybVBhc3N3b3JkO1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSlBhc3N3b3JkRmllbGQgdHh0UGFzc3dvcmQ7XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KVGV4dEZpZWxkIHR4dFBob25lO1xuICAgIC8vIEVuZCBvZiB2YXJpYWJsZXMgZGVjbGFyYXRpb24vL0dFTi1FTkQ6dmFyaWFibGVzXG59XG4uLi5cblBhdGg6IHNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL0ZvcmdvdFBhc3N3b3JkLmZvcm1cbjw/eG1sIHZlcnNpb249XCIxLjBcIiBlbmNvZGluZz1cIlVURi04XCIgPz5cblxuPEZvcm0gdmVyc2lvbj1cIjEuM1wiIG1heFZlcnNpb249XCIxLjlcIiB0eXBlPVwib3JnLm5ldGJlYW5zLm1vZHVsZXMuZm9ybS5mb3JtaW5mby5KRnJhbWVGb3JtSW5mb1wiPlxuICA8UHJvcGVydGllcz5cbiAgICA8UHJvcGVydHkgbmFtZT1cImRlZmF1bHRDbG9zZU9wZXJhdGlvblwiIHR5cGU9XCJpbnRcIiB2YWx1ZT1cIjNcIi8+XG4gIDwvUHJvcGVydGllcz5cbiAgPFN5bnRoZXRpY1Byb3BlcnRpZXM+XG4gICAgPFN5bnRoZXRpY1Byb3BlcnR5IG5hbWU9XCJmb3JtU2l6ZVBvbGljeVwiIHR5cGU9XCJpbnRcIiB2YWx1ZT1cIjFcIi8+XG4gICAgPFN5bnRoZXRpY1Byb3BlcnR5IG5hbWU9XCJnZW5lcmF0ZUNlbnRlclwiIHR5cGU9XCJib29sZWFuXCIgdmFsdWU9XCJmYWxzZVwiLz5cbiAgPC9TeW50aGV0aWNQcm9wZXJ0aWVzPlxuICA8QXV4VmFsdWVzPlxuICAgIDxBdXhWYWx1ZSBuYW1lPVwiRm9ybVNldHRpbmdzX2F1dG9SZXNvdXJjaW5nXCIgdHlwZT1cImphdmEubGFuZy5JbnRlZ2VyXCIgdmFsdWU9XCIwXCIvPlxuICAgIDxBdXhWYWx1ZSBuYW1lPVwiRm9ybVNldHRpbmdzX2F1dG9TZXRDb21wb25lbnROYW1lXCIgdHlwZT1cImphdmEubGFuZy5Cb29sZWFuXCIgdmFsdWU9XCJmYWxzZVwiLz5cbiAgICA8QXV4VmFsdWUgbmFtZT1cIkZvcm1TZXR0aW5nc19nZW5lcmF0ZUZRTlwiIHR5cGU9XCJqYXZhLmxhbmcuQm9vbGVhblwiIHZhbHVlPVwidHJ1ZVwiLz5cbiAgICA8QXV4VmFsdWUgbmFtZT1cIkZvcm1TZXR0aW5nc19nZW5lcmF0ZU1uZW1vbmljc0NvZGVcIiB0eXBlPVwiamF2YS5sYW5nLkJvb2xlYW5cIiB2YWx1ZT1cImZhbHNlXCIvPlxuLi4uXG5cbiAgPExheW91dD5cbiAgICA8RGltZW5zaW9uTGF5b3V0IGRpbT1cIjBcIj5cbiAgICAgIDxHcm91cCB0eXBlPVwiMTAzXCIgZ3JvdXBBbGlnbm1lbnQ9XCIwXCIgYXR0cmlidXRlcz1cIjBcIj5cbiAgICAgICAgICA8R3JvdXAgdHlwZT1cIjEwMlwiIGF0dHJpYnV0ZXM9XCIwXCI+XG4gICAgICAgICAgICAgIDxHcm91cCB0eXBlPVwiMTAzXCIgZ3JvdXBBbGlnbm1lbnQ9XCIwXCIgYXR0cmlidXRlcz1cIjBcIj5cbiAgICAgICAgICAgICAgICAgIDxHcm91cCB0eXBlPVwiMTAyXCIgYXR0cmlidXRlcz1cIjBcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8RW1wdHlTcGFjZSBtaW49XCIxMTBcIiBwcmVmPVwiMTEwXCIgbWF4PVwiLTJcIiBhdHRyaWJ1dGVzPVwiMFwiLz5cbiAgICAgICAgICAgICAgICAgICAgICA8Q29tcG9uZW50IGlkPVwiakxhYmVsMVwiIG1pbj1cIi0yXCIgbWF4PVwiLTJcIiBhdHRyaWJ1dGVzPVwiMFwiLz5cbiAgICAgICAgICAgICAgICAgIDwvR3JvdXA+XG4gICAgICAgICAgICAgICAgICA8R3JvdXAgdHlwZT1cIjEwMlwiIGF0dHJpYnV0ZXM9XCIwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPEVtcHR5U3BhY2UgbWluPVwiNjFcIiBwcmVmPVwiNjFcIiBtYXg9XCItMlwiIGF0dHJpYnV0ZXM9XCIwXCIvPlxuICAgICAgICAgICAgICAgICAgICAgIDxDb21wb25lbnQgaWQ9XCJqU2VwYXJhdG9yMVwiIG1pbj1cIi0yXCIgcHJlZj1cIjM3MFwiIG1heD1cIi0yXCIgYXR0cmlidXRlcz1cIjBcIi8+XG4gICAgICAgICAgICAgICAgICA8L0dyb3VwPlxuICAgICAgICAgICAgICAgICAgPEdyb3VwIHR5cGU9XCIxMDJcIiBhdHRyaWJ1dGVzPVwiMFwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxFbXB0eVNwYWNlIG1pbj1cIjYxXCIgcHJlZj1cIjYxXCIgbWF4PVwiLTJcIiBhdHRyaWJ1dGVzPVwiMFwiLz5cbiAgICAgICAgICAgICAgICAgICAgICA8Q29tcG9uZW50IGlkPVwiakxhYmVsMlwiIG1pbj1cIi0yXCIgbWF4PVwiLTJcIiBhdHRyaWJ1dGVzPVwiMFwiLz5cbiAgICAgICAgICAgICAgICAgICAgICA8RW1wdHlTcGFjZSBtaW49XCI1NlwiIHByZWY9XCI1NlwiIG1heD1cIi0yXCIgYXR0cmlidXRlcz1cIjBcIi8+XG4uLi5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPENvbXBvbmVudCBpZD1cImJ0bkV4aXRcIiBtaW49XCItMlwiIG1heD1cIi0yXCIgYXR0cmlidXRlcz1cIjBcIi8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxFbXB0eVNwYWNlIG1heD1cIjMyNzY3XCIgYXR0cmlidXRlcz1cIjBcIi8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxDb21wb25lbnQgaWQ9XCJidG5DaGFuZ2VcIiBtaW49XCItMlwiIG1heD1cIi0yXCIgYXR0cmlidXRlcz1cIjBcIi8+XG4gICAgICAgICAgICAgICAgICAgICAgPC9Hcm91cD5cbiAgICAgICAgICAgICAgICAgICAgICA8R3JvdXAgdHlwZT1cIjEwMlwiIGF0dHJpYnV0ZXM9XCIwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxFbXB0eVNwYWNlIG1pbj1cIjYxXCIgcHJlZj1cIjYxXCIgbWF4PVwiLTJcIiBhdHRyaWJ1dGVzPVwiMFwiLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPENvbXBvbmVudCBpZD1cImxiQ29uZmlybVBhc3N3b3JkXCIgbWluPVwiLTJcIiBtYXg9XCItMlwiIGF0dHJpYnV0ZXM9XCIwXCIvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8RW1wdHlTcGFjZSBtaW49XCIxOFwiIHByZWY9XCIxOFwiIG1heD1cIi0yXCIgYXR0cmlidXRlcz1cIjBcIi8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxDb21wb25lbnQgaWQ9XCJ0eHRDb25maXJtUGFzc3dvcmRcIiBtaW49XCItMlwiIHByZWY9XCIyMTFcIiBtYXg9XCItMlwiIGF0dHJpYnV0ZXM9XCIwXCIvPlxuICAgICAgICAgICAgICAgICAgICAgIDwvR3JvdXA+XG4gICAgICAgICAgICAgICAgICA8L0dyb3VwPlxuICAgICAgICAgICAgICA8L0dyb3VwPlxuICAgICAgICAgICAgICA8RW1wdHlTcGFjZSBtaW49XCItMlwiIHByZWY9XCI2OVwiIG1heD1cIi0yXCIgYXR0cmlidXRlcz1cIjBcIi8+XG4gICAgICAgICAgPC9Hcm91cD5cbiAgICAgIDwvR3JvdXA+XG4gICAgPC9EaW1lbnNpb25MYXlvdXQ+XG4gICAgPERpbWVuc2lvbkxheW91dCBkaW09XCIxXCI+XG4gICAgICA8R3JvdXAgdHlwZT1cIjEwM1wiIGdyb3VwQWxpZ25tZW50PVwiMFwiIGF0dHJpYnV0ZXM9XCIwXCI+XG4gICAgICAgICAgPEdyb3VwIHR5cGU9XCIxMDJcIiBhdHRyaWJ1dGVzPVwiMFwiPlxuICAgICAgICAgICAgICA8RW1wdHlTcGFjZSBtaW49XCI0MFwiIHByZWY9XCI0MFwiIG1heD1cIi0yXCIgYXR0cmlidXRlcz1cIjBcIi8+XG4uLi5cbiAgICAgICAgICAgICAgPEdyb3VwIHR5cGU9XCIxMDNcIiBncm91cEFsaWdubWVudD1cIjNcIiBhdHRyaWJ1dGVzPVwiMFwiPlxuICAgICAgICAgICAgICAgICAgPENvbXBvbmVudCBpZD1cImJ0bkV4aXRcIiBhbGlnbm1lbnQ9XCIzXCIgbWluPVwiLTJcIiBwcmVmPVwiMzBcIiBtYXg9XCItMlwiIGF0dHJpYnV0ZXM9XCIwXCIvPlxuICAgICAgICAgICAgICAgICAgPENvbXBvbmVudCBpZD1cImJ0bkNoYW5nZVwiIGFsaWdubWVudD1cIjNcIiBtaW49XCItMlwiIHByZWY9XCIzMFwiIG1heD1cIi0yXCIgYXR0cmlidXRlcz1cIjBcIi8+XG4gICAgICAgICAgICAgIDwvR3JvdXA+XG4gICAgICAgICAgPC9Hcm91cD5cbiAgICAgIDwvR3JvdXA+XG4gICAgPC9EaW1lbnNpb25MYXlvdXQ+XG4gIDwvTGF5b3V0PlxuICA8U3ViQ29tcG9uZW50cz5cbiAgICA8Q29tcG9uZW50IGNsYXNzPVwiamF2YXguc3dpbmcuSkxhYmVsXCIgbmFtZT1cImpMYWJlbDFcIj5cbiAgICAgIDxQcm9wZXJ0aWVzPlxuICAgICAgICA8UHJvcGVydHkgbmFtZT1cImZvbnRcIiB0eXBlPVwiamF2YS5hd3QuRm9udFwiIGVkaXRvcj1cIm9yZy5uZXRiZWFucy5iZWFuaW5mby5lZGl0b3JzLkZvbnRFZGl0b3JcIj5cbiAgICAgICAgICA8Rm9udCBuYW1lPVwiQXJpYWxcIiBzaXplPVwiMzZcIiBzdHlsZT1cIjFcIi8+XG4gICAgICAgIDwvUHJvcGVydHk+XG4gICAgICAgIDxQcm9wZXJ0eSBuYW1lPVwiZm9yZWdyb3VuZFwiIHR5cGU9XCJqYXZhLmF3dC5Db2xvclwiIGVkaXRvcj1cIm9yZy5uZXRiZWFucy5iZWFuaW5mby5lZGl0b3JzLkNvbG9yRWRpdG9yXCI+XG4gICAgICAgICAgPENvbG9yIGJsdWU9XCIwXCIgZ3JlZW49XCJhMlwiIGlkPVwiQWN0aW9ucy5ZZWxsb3dcIiBwYWxldHRlPVwiM1wiIHJlZD1cImVkXCIgdHlwZT1cInBhbGV0dGVcIi8+XG4gICAgICAgIDwvUHJvcGVydHk+XG4uLi5cbiAgICAgICAgPFByb3BlcnR5IG5hbWU9XCJ0ZXh0XCIgdHlwZT1cImphdmEubGFuZy5TdHJpbmdcIiB2YWx1ZT1cIk0mI3gxZWFkO3Qga2gmI3gxZWE5O3UgbSYjeDFlZGI7aTpcIi8+XG4gICAgICA8L1Byb3BlcnRpZXM+XG4gICAgPC9Db21wb25lbnQ+XG4gICAgPENvbXBvbmVudCBjbGFzcz1cImphdmF4LnN3aW5nLkpMYWJlbFwiIG5hbWU9XCJsYkNvbmZpcm1QYXNzd29yZFwiPlxuICAgICAgPFByb3BlcnRpZXM+XG4gICAgICAgIDxQcm9wZXJ0eSBuYW1lPVwiZm9udFwiIHR5cGU9XCJqYXZhLmF3dC5Gb250XCIgZWRpdG9yPVwib3JnLm5ldGJlYW5zLmJlYW5pbmZvLmVkaXRvcnMuRm9udEVkaXRvclwiPlxuICAgICAgICAgIDxGb250IG5hbWU9XCJBcmlhbFwiIHNpemU9XCIxNFwiIHN0eWxlPVwiMVwiLz5cbiAgICAgICAgPC9Qcm9wZXJ0eT5cbiAgICAgICAgPFByb3BlcnR5IG5hbWU9XCJ0ZXh0XCIgdHlwZT1cImphdmEubGFuZy5TdHJpbmdcIiB2YWx1ZT1cIlgmI3hlMTtjIG5oJiN4MWVhZDtuIG0mI3gxZWFkO3Qga2gmI3gxZWE5O3U6XCIvPlxuICAgICAgPC9Qcm9wZXJ0aWVzPlxuICAgIDwvQ29tcG9uZW50PlxuICAgIDxDb21wb25lbnQgY2xhc3M9XCJqYXZheC5zd2luZy5KU2VwYXJhdG9yXCIgbmFtZT1cImpTZXBhcmF0b3IxXCI+XG4gICAgPC9Db21wb25lbnQ+XG4gICAgPENvbXBvbmVudCBjbGFzcz1cImphdmF4LnN3aW5nLkpUZXh0RmllbGRcIiBuYW1lPVwidHh0UGhvbmVcIj5cbiAgICA8L0NvbXBvbmVudD5cbiAgICA8Q29tcG9uZW50IGNsYXNzPVwiamF2YXguc3dpbmcuSkJ1dHRvblwiIG5hbWU9XCJidG5DaGVja1wiPlxuICAgICAgPFByb3BlcnRpZXM+XG4gICAgICAgIDxQcm9wZXJ0eSBuYW1lPVwiZm9udFwiIHR5cGU9XCJqYXZhLmF3dC5Gb250XCIgZWRpdG9yPVwib3JnLm5ldGJlYW5zLmJlYW5pbmZvLmVkaXRvcnMuRm9udEVkaXRvclwiPlxuICAgICAgICAgIDxGb250IG5hbWU9XCJBcmlhbFwiIHNpemU9XCIxNFwiIHN0eWxlPVwiMVwiLz5cbiAgICAgICAgPC9Qcm9wZXJ0eT5cbiAgICAgICAgPFByb3BlcnR5IG5hbWU9XCJpY29uXCIgdHlwZT1cImphdmF4LnN3aW5nLkljb25cIiBlZGl0b3I9XCJvcmcubmV0YmVhbnMubW9kdWxlcy5mb3JtLmVkaXRvcnMyLkljb25FZGl0b3JcIj5cbiAgICAgICAgICA8SW1hZ2UgaWNvblR5cGU9XCIzXCIgbmFtZT1cIi9JbWFnZXMvc2VhcmNoLnBuZ1wiLz5cbiAgICAgICAgPC9Qcm9wZXJ0eT5cbiAgICAgICAgPFByb3BlcnR5IG5hbWU9XCJ0ZXh0XCIgdHlwZT1cImphdmEubGFuZy5TdHJpbmdcIiB2YWx1ZT1cIktpJiN4MWVjMzttIHRyYVwiLz5cbiAgICAgICAgPFByb3BlcnR5IG5hbWU9XCJjdXJzb3JcIiB0eXBlPVwiamF2YS5hd3QuQ3Vyc29yXCIgZWRpdG9yPVwib3JnLm5ldGJlYW5zLm1vZHVsZXMuZm9ybS5lZGl0b3JzMi5DdXJzb3JFZGl0b3JcIj5cbiAgICAgICAgICA8Q29sb3IgaWQ9XCJIYW5kIEN1cnNvclwiLz5cbiAgICAgICAgPC9Qcm9wZXJ0eT5cbiAgICAgIDwvUHJvcGVydGllcz5cbiAgICA8L0NvbXBvbmVudD5cbiAgICA8Q29tcG9uZW50IGNsYXNzPVwiamF2YXguc3dpbmcuSlBhc3N3b3JkRmllbGRcIiBuYW1lPVwidHh0UGFzc3dvcmRcIj5cbiAgICA8L0NvbXBvbmVudD5cbiAgICA8Q29tcG9uZW50IGNsYXNzPVwiamF2YXguc3dpbmcuSlBhc3N3b3JkRmllbGRcIiBuYW1lPVwidHh0Q29uZmlybVBhc3N3b3JkXCI+XG4gICAgPC9Db21wb25lbnQ+XG4gICAgPENvbXBvbmVudCBjbGFzcz1cImphdmF4LnN3aW5nLkpCdXR0b25cIiBuYW1lPVwiYnRuQ2hhbmdlXCI+XG4gICAgICA8UHJvcGVydGllcz5cbiAgICAgICAgPFByb3BlcnR5IG5hbWU9XCJmb250XCIgdHlwZT1cImphdmEuYXd0LkZvbnRcIiBlZGl0b3I9XCJvcmcubmV0YmVhbnMuYmVhbmluZm8uZWRpdG9ycy5Gb250RWRpdG9yXCI+XG4gICAgICAgICAgPEZvbnQgbmFtZT1cIkFyaWFsXCIgc2l6ZT1cIjE0XCIgc3R5bGU9XCIxXCIvPlxuICAgICAgICA8L1Byb3BlcnR5PlxuICAgICAgICA8UHJvcGVydHkgbmFtZT1cImljb25cIiB0eXBlPVwiamF2YXguc3dpbmcuSWNvblwiIGVkaXRvcj1cIm9yZy5uZXRiZWFucy5tb2R1bGVzLmZvcm0uZWRpdG9yczIuSWNvbkVkaXRvclwiPlxuICAgICAgICAgIDxJbWFnZSBpY29uVHlwZT1cIjNcIiBuYW1lPVwiL0ltYWdlcy9yZXNldC1wYXNzd29yZC5wbmdcIi8+XG4gICAgICAgIDwvUHJvcGVydHk+XG4gICAgICAgIDxQcm9wZXJ0eSBuYW1lPVwidGV4dFwiIHR5cGU9XCJqYXZhLmxhbmcuU3RyaW5nXCIgdmFsdWU9XCImI3gxMTA7JiN4MWVkNTtpIG0mI3gxZWFkO3Qga2gmI3gxZWE5O3VcIi8+XG4gICAgICAgIDxQcm9wZXJ0eSBuYW1lPVwiY3Vyc29yXCIgdHlwZT1cImphdmEuYXd0LkN1cnNvclwiIGVkaXRvcj1cIm9yZy5uZXRiZWFucy5tb2R1bGVzLmZvcm0uZWRpdG9yczIuQ3Vyc29yRWRpdG9yXCI+XG4gICAgICAgICAgPENvbG9yIGlkPVwiSGFuZCBDdXJzb3JcIi8+XG4gICAgICAgIDwvUHJvcGVydHk+XG4gICAgICA8L1Byb3BlcnRpZXM+XG4gICAgPC9Db21wb25lbnQ+XG4gICAgPENvbXBvbmVudCBjbGFzcz1cImphdmF4LnN3aW5nLkpCdXR0b25cIiBuYW1lPVwiYnRuRXhpdFwiPlxuICAgICAgPFByb3BlcnRpZXM+XG4gICAgICAgIDxQcm9wZXJ0eSBuYW1lPVwiZm9udFwiIHR5cGU9XCJqYXZhLmF3dC5Gb250XCIgZWRpdG9yPVwib3JnLm5ldGJlYW5zLmJlYW5pbmZvLmVkaXRvcnMuRm9udEVkaXRvclwiPlxuICAgICAgICAgIDxGb250IG5hbWU9XCJBcmlhbFwiIHNpemU9XCIxNFwiIHN0eWxlPVwiMVwiLz5cbiAgICAgICAgPC9Qcm9wZXJ0eT5cbiAgICAgICAgPFByb3BlcnR5IG5hbWU9XCJpY29uXCIgdHlwZT1cImphdmF4LnN3aW5nLkljb25cIiBlZGl0b3I9XCJvcmcubmV0YmVhbnMubW9kdWxlcy5mb3JtLmVkaXRvcnMyLkljb25FZGl0b3JcIj5cbiAgICAgICAgICA8SW1hZ2UgaWNvblR5cGU9XCIzXCIgbmFtZT1cIi9JbWFnZXMvbG9nb3V0LnBuZ1wiLz5cbiAgICAgICAgPC9Qcm9wZXJ0eT5cbiAgICAgICAgPFByb3BlcnR5IG5hbWU9XCJ0ZXh0XCIgdHlwZT1cImphdmEubGFuZy5TdHJpbmdcIiB2YWx1ZT1cIlRobyYjeGUxO3RcIi8+XG4gICAgICAgIDxQcm9wZXJ0eSBuYW1lPVwiY3Vyc29yXCIgdHlwZT1cImphdmEuYXd0LkN1cnNvclwiIGVkaXRvcj1cIm9yZy5uZXRiZWFucy5tb2R1bGVzLmZvcm0uZWRpdG9yczIuQ3Vyc29yRWRpdG9yXCI+XG4gICAgICAgICAgPENvbG9yIGlkPVwiSGFuZCBDdXJzb3JcIi8+XG4gICAgICAgIDwvUHJvcGVydHk+XG4gICAgICA8L1Byb3BlcnRpZXM+XG4gICAgICA8RXZlbnRzPlxuICAgICAgICA8RXZlbnRIYW5kbGVyIGV2ZW50PVwiYWN0aW9uUGVyZm9ybWVkXCIgbGlzdGVuZXI9XCJqYXZhLmF3dC5ldmVudC5BY3Rpb25MaXN0ZW5lclwiIHBhcmFtZXRlcnM9XCJqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudFwiIGhhbmRsZXI9XCJidG5FeGl0QWN0aW9uUGVyZm9ybWVkXCIvPlxuICAgICAgPC9FdmVudHM+XG4gICAgPC9Db21wb25lbnQ+XG4gIDwvU3ViQ29tcG9uZW50cz5cbjwvRm9ybT5cbi4uLlxuIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV8wMUpiVGN4MWJBVXAxa0tjTDdNUldXNUwifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJFOi9Ib2NUYXAvMDJfSkFWQS8wM19Qcm9qZWN0L0ludGVybmV0IE1hbmdlbWVudCBTeXN0ZW0iLCJmb2xkZXJSb290IjoiRTovSG9jVGFwLzAyX0pBVkEvMDNfUHJvamVjdC9JbnRlcm5ldCBNYW5nZW1lbnQgU3lzdGVtIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwidGltZXN0YW1wIjoiMjAyNS0wNS0xM1QwMToxOTozNy44MDFaIiwicmVzcG9uc2VfdGV4dCI6Ik5vdyBJIG5lZWQgdG8gdW5kZXJzdGFuZCBob3cgdGhlIHVzZXIgZGF0YSBpcyBzdG9yZWQgYW5kIGhvdyB0byBjaGVjayBpZiBhIHBob25lIG51bWJlciBleGlzdHMgaW4gdGhlIHN5c3RlbS5cbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiI2YjFjNjZiMi04YmEwLTQ3OWMtOGE2OS0zNjI2ZTExNGZhNTEiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1XzAxSGFNVjVoZnVUemkxOW9xb29WdGc3dSIsInRvb2xfbmFtZSI6ImNvZGViYXNlLXJldHJpZXZhbCIsImlucHV0X2pzb24iOiJ7XCJpbmZvcm1hdGlvbl9yZXF1ZXN0XCI6IFwiRmluZCBhbnkgbWV0aG9kcyBpbiBEQU8gY2xhc3NlcyB0aGF0IGNhbiBzZWFyY2ggZm9yIGEgdXNlciBieSBwaG9uZSBudW1iZXIgb3IgdXBkYXRlIGEgdXNlcidzIHBhc3N3b3JkLlwifSIsIm1jcF9zZXJ2ZXJfbmFtZSI6IiIsIm1jcF90b29sX25hbWUiOiIifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6Ik5vdyBJIG5lZWQgdG8gY2hlY2sgaWYgdGhlcmUncyBhbnkgZXhpc3RpbmcgbWV0aG9kIHRvIGZpbmQgYSB1c2VyIGJ5IHBob25lIG51bWJlciBhbmQgdXBkYXRlIHRoZWlyIHBhc3N3b3JkLlxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiVGhlIGZvbGxvd2luZyBjb2RlIHNlY3Rpb25zIHdlcmUgcmV0cmlldmVkOlxuUGF0aDogc3JjL0RBTy9Vc2VyREFPLmphdmFcbi8qXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0xpY2Vuc2VzL2xpY2Vuc2UtZGVmYXVsdC50eHQgdG8gY2hhbmdlIHRoaXMgbGljZW5zZVxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NsYXNzLmphdmEgdG8gZWRpdCB0aGlzIHRlbXBsYXRlXG4gKi9cbnBhY2thZ2UgREFPO1xuXG5pbXBvcnQgTW9kZWwuVXNlcjtcbmltcG9ydCBqYXZhLnV0aWwuTGlzdDtcbmltcG9ydCBqYXZhLnNxbC5QcmVwYXJlZFN0YXRlbWVudDtcbmltcG9ydCBqYXZhLnNxbC5UaW1lc3RhbXA7XG5pbXBvcnQgREFPLkRiT3BlcmF0aW9ucy5TcWxPcGVyYXRpb247XG5pbXBvcnQgamF2YS5zcWwuUmVzdWx0U2V0O1xuLyoqXG4gKlxuICogQGF1dGhvciBOZ29jIFRoYW9cbiAqL1xucHVibGljIGNsYXNzIFVzZXJEQU97XG5cbiAgICBwdWJsaWMgc3RhdGljIHZvaWQgaW5zZXJ0KGZpbmFsIFVzZXIgb2JqKSB7XG4gICAgICAgIGZpbmFsIGludCB1c2VySWQgPSBEYk9wZXJhdGlvbnMuZ2V0TmV4dElkKFwiVVNFUlwiLCBcInVzZXJfaWRcIik7XG4gICAgICAgIFxuICAgICAgICBvYmouc2V0VXNlcl9pZCh1c2VySWQpO1xuICAgICAgICBcbiAgICAgICAgU3FsT3BlcmF0aW9uW10gb3BlcmF0aW9ucyA9IG5ldyBTcWxPcGVyYXRpb25bXSB7XG4gICAgICAgICAgICBuZXcgU3FsT3BlcmF0aW9uKCkge1xuICAgICAgICAgICAgICAgIEBPdmVycmlkZVxuICAgICAgICAgICAgICAgIHB1YmxpYyBTdHJpbmcgZ2V0U3FsKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJJTlNFUlQgSU5UTyBVU0VSKHVzZXJfaWQsIHVzZXJuYW1lLCBwYXNzd29yZCwgcm9sZSwgY3JlYXRlZF9hdCkgVkFMVUVTICg/LCA/LCA/LCA/LCA/KVwiO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIEBPdmVycmlkZVxuICAgICAgICAgICAgICAgIHB1YmxpYyB2b2lkIHNldFBhcmFtZXRlcnMoUHJlcGFyZWRTdGF0ZW1lbnQgcHMpIHRocm93cyBFeGNlcHRpb24ge1xuICAgICAgICAgICAgICAgICAgICBwcy5zZXRJbnQoMSwgdXNlcklkKTtcbiAgICAgICAgICAgICAgICAgICAgcHMuc2V0U3RyaW5nKDIsIG9iai5nZXRVc2VybmFtZSgpKTtcbiAgICAgICAgICAgICAgICAgICAgcHMuc2V0U3RyaW5nKDMsIG9iai5nZXRQYXNzd29yZCgpKTtcbiAgICAgICAgICAgICAgICAgICAgcHMuc2V0U3RyaW5nKDQsIG9iai5nZXRSb2xlKCkpO1xuICAgICAgICAgICAgICAgICAgICBwcy5zZXRUaW1lc3RhbXAoNSwgVGltZXN0YW1wLnZhbHVlT2Yob2JqLmdldENyZWF0ZV9hdCgpKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgRGJPcGVyYXRpb25zLmV4ZWN1dGVUcmFuc2FjdGlvbihvcGVyYXRpb25zLCBcIlRow6ptIHTDoGkga2hv4bqjbiB0aMOgbmggY8O0bmchXCIpO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgc3RhdGljIGJvb2xlYW4gbG9naW4oZmluYWwgU3RyaW5nIHVzZXJOYW1lLCBmaW5hbCBTdHJpbmcgcGFzc3dvcmQpIHtcbiAgICAgICAgVXNlciB1c2VyID0gbnVsbDtcbiAgICAgICAgYm9vbGVhbiBpc1ZhbGlkID0gZmFsc2U7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBSZXN1bHRTZXQgcnMgPSBEYk9wZXJhdGlvbnMuZ2V0RGF0YShcIlNFTEVDVCAqIEZST00gVVNFUiBXSEVSRSB1c2VybmFtZSA9ICdcIiArIHVzZXJOYW1lICsgXCInIGFuZCBwYXNzd29yZCA9ICdcIiArIHBhc3N3b3JkICtcIidcIik7XG4gICAgICAgICAgICB3aGlsZSAocnMubmV4dCgpKSB7XG4gICAgICAgICAgICAgICAgYm9vbGVhbiBpc0FjdGl2ZSA9IHJzLmdldEJvb2xlYW4oXCJpc0FjdGl2ZVwiKTtcbiAgICAgICAgICAgICAgICBpZiAoaXNBY3RpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgaXNWYWxpZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBleCkge1xuICAgICAgICAgICAgZXgucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgIH0gXG5cbiAgICAgICAgcmV0dXJuIGlzVmFsaWQ7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyB2b2lkIHVwZGF0ZShVc2VyIG9iaikge1xuICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oXCJOb3Qgc3VwcG9ydGVkIHlldC5cIik7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyB2b2lkIGRlbGV0ZShpbnQgaWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgVXNlciBnZXRCeUlkKGludCBpZCkge1xuICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oXCJOb3Qgc3VwcG9ydGVkIHlldC5cIik7XG4gICAgfVxuLi4uXG5QYXRoOiBzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9TaWduVXAuamF2YVxuLypcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvTGljZW5zZXMvbGljZW5zZS1kZWZhdWx0LnR4dCB0byBjaGFuZ2UgdGhpcyBsaWNlbnNlXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0dVSUZvcm1zL0pGcmFtZS5qYXZhIHRvIGVkaXQgdGhpcyB0ZW1wbGF0ZVxuICovXG5wYWNrYWdlIGludGVybmV0Lm1hbmdlbWVudC5zeXN0ZW07XG5cbmltcG9ydCBEQU8uU3Vic2NyaWJlckRBTztcbmltcG9ydCBNb2RlbC5TdWJzY3JpYmVyO1xuaW1wb3J0IGphdmEudGltZS5Mb2NhbERhdGVUaW1lO1xuaW1wb3J0IGphdmF4LnN3aW5nLkpPcHRpb25QYW5lO1xuXG4vKipcbiAqXG4gKiBAYXV0aG9yIE5nb2MgVGhhb1xuICovXG5wdWJsaWMgY2xhc3MgU2lnblVwIGV4dGVuZHMgamF2YXguc3dpbmcuSkZyYW1lIHtcblxuICAgIHB1YmxpYyBTdHJpbmcgcGhvbmVQYXR0ZXJuID0gXCJeWzAtOV0qJFwiO1xuICAgIHByaXZhdGUgU3RyaW5nIERFRkFVTFRfUk9MRSA9IFwidXNlclwiO1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgbmV3IGZvcm0gU2lnbkluXG4gICAgICovXG4gICAgcHVibGljIFNpZ25VcCgpIHtcbiAgICAgICAgaW5pdENvbXBvbmVudHMoKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBjbGVhcigpe1xuICAgICAgICB0eHROYW1lLnNldFRleHQoXCJcIik7XG4gICAgICAgIHR4dFVzZXJOYW1lLnNldFRleHQoXCJcIik7XG4gICAgICAgIHR4dFBhc3N3b3JkLnNldFRleHQoXCJcIik7XG4gICAgICAgIHR4dEFkZHJlc3Muc2V0VGV4dChcIlwiKTtcbiAgICAgICAgdHh0UGhvbmUuc2V0VGV4dChcIlwiKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYm9vbGVhbiB2YWxpZGF0ZUZpZWxkcygpe1xuICAgICAgICBTdHJpbmcgbmFtZSA9IHR4dE5hbWUuZ2V0VGV4dCgpO1xuICAgICAgICBTdHJpbmcgdXNlck5hbWUgPSB0eHRVc2VyTmFtZS5nZXRUZXh0KCk7XG4gICAgICAgIFN0cmluZyBwYXNzd29yZCA9IHR4dFBhc3N3b3JkLmdldFRleHQoKTtcbiAgICAgICAgU3RyaW5nIGFkZHJlc3MgPSB0eHRBZGRyZXNzLmdldFRleHQoKTtcbiAgICAgICAgU3RyaW5nIHBob25lID0gdHh0UGhvbmUuZ2V0VGV4dCgpO1xuXG4gICAgICAgIGlmKG5hbWUuaXNFbXB0eSgpIHx8IHVzZXJOYW1lLmlzRW1wdHkoKSB8fCBwYXNzd29yZC5pc0VtcHR5KCkgfHwgYWRkcmVzcy5pc0VtcHR5KCkgfHwgcGhvbmUuaXNFbXB0eSgpKXtcbiAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwiVnVpIGzDsm5nIGtow7RuZyBi4buPIHRy4buRbmchXCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZihwaG9uZS5sZW5ndGgoKSAhPSAxMCB8fCAhcGhvbmUubWF0Y2hlcyhwaG9uZVBhdHRlcm4pKSB7XG4gICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcIlZ1aSBsw7JuZyBuaOG6rXAgxJHDum5nIMSR4buLbmggZOG6oW5nIHPhu5EgxJFp4buHbiB0aG/huqFpIVwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbi4uLlxuXG4gICAgcHJpdmF0ZSB2b2lkIGJ0blNpZ251cEFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5TaWdudXBBY3Rpb25QZXJmb3JtZWRcbiAgICAgICAgLy8gVE9ETyBhZGQgeW91ciBoYW5kbGluZyBjb2RlIGhlcmU6XG4gICAgICAgIGlmICh2YWxpZGF0ZUZpZWxkcygpKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIFN1YnNjcmliZXIgc3ViID0gbmV3IFN1YnNjcmliZXIoKTtcbiAgICAgICAgICAgICAgICBzdWIuc2V0RnVsbE5hbWUodHh0TmFtZS5nZXRUZXh0KCkpO1xuICAgICAgICAgICAgICAgIHN1Yi5zZXRVc2VybmFtZSh0eHRVc2VyTmFtZS5nZXRUZXh0KCkpO1xuICAgICAgICAgICAgICAgIHN1Yi5zZXRQYXNzd29yZCh0eHRQYXNzd29yZC5nZXRUZXh0KCkpO1xuICAgICAgICAgICAgICAgIHN1Yi5zZXRSb2xlKERFRkFVTFRfUk9MRSk7XG4gICAgICAgICAgICAgICAgc3ViLnNldEFkZHJlc3ModHh0QWRkcmVzcy5nZXRUZXh0KCkpO1xuICAgICAgICAgICAgICAgIHN1Yi5zZXRQaG9uZSh0eHRQaG9uZS5nZXRUZXh0KCkpO1xuICAgICAgICAgICAgICAgIHN1Yi5zZXRDcmVhdGVfYXQoTG9jYWxEYXRlVGltZS5ub3coKSk7XG4gICAgICAgICAgICAgICAgU3Vic2NyaWJlckRBTy5pbnNlcnQoc3ViKTtcbiAgICAgICAgICAgICAgICBjbGVhcigpO1xuICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGV4KSB7XG4gICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXCJM4buXaTogXCIgKyBleC5nZXRNZXNzYWdlKCksIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5TaWdudXBBY3Rpb25QZXJmb3JtZWRcbi4uLlxuUGF0aDogc3JjL0RBTy9TdWJzY3JpYmVyREFPLmphdmFcbi8qXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0xpY2Vuc2VzL2xpY2Vuc2UtZGVmYXVsdC50eHQgdG8gY2hhbmdlIHRoaXMgbGljZW5zZVxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NsYXNzLmphdmEgdG8gZWRpdCB0aGlzIHRlbXBsYXRlXG4gKi9cbnBhY2thZ2UgREFPO1xuXG5pbXBvcnQgTW9kZWwuU3Vic2NyaWJlcjtcbmltcG9ydCBqYXZhLnV0aWwuTGlzdDtcbmltcG9ydCBqYXZhLnNxbC5QcmVwYXJlZFN0YXRlbWVudDtcbmltcG9ydCBqYXZhLnNxbC5UaW1lc3RhbXA7XG5pbXBvcnQgREFPLkRiT3BlcmF0aW9ucy5TcWxPcGVyYXRpb247XG5cbi8qKlxuICpcbiAqIEBhdXRob3IgTmdvYyBUaGFvXG4gKi9cbnB1YmxpYyBjbGFzcyBTdWJzY3JpYmVyREFPe1xuXG4gICAgcHVibGljIHN0YXRpYyB2b2lkIGluc2VydChmaW5hbCBTdWJzY3JpYmVyIG9iaikge1xuICAgICAgICBmaW5hbCBpbnQgdXNlcklkID0gRGJPcGVyYXRpb25zLmdldE5leHRJZChcIlVTRVJcIiwgXCJ1c2VyX2lkXCIpO1xuICAgICAgICBmaW5hbCBpbnQgc3Vic2NyaWJlcklkID0gRGJPcGVyYXRpb25zLmdldE5leHRJZChcIlNVQlNDUklCRVJcIiwgXCJzdWJzY3JpYmVyX2lkXCIpO1xuXG4gICAgICAgIG9iai5zZXRVc2VyX2lkKHVzZXJJZCk7XG4gICAgICAgIG9iai5zZXRTdWJzY3JpYmVyX2lkKHN1YnNjcmliZXJJZCk7XG5cbiAgICAgICAgU3FsT3BlcmF0aW9uW10gb3BlcmF0aW9ucyA9IG5ldyBTcWxPcGVyYXRpb25bXSB7XG4gICAgICAgICAgICBuZXcgU3FsT3BlcmF0aW9uKCkge1xuICAgICAgICAgICAgICAgIEBPdmVycmlkZVxuICAgICAgICAgICAgICAgIHB1YmxpYyBTdHJpbmcgZ2V0U3FsKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJJTlNFUlQgSU5UTyBVU0VSKHVzZXJfaWQsIHVzZXJuYW1lLCBwYXNzd29yZCwgcm9sZSwgY3JlYXRlZF9hdCwgaXNBY3RpdmUpIFZBTFVFUyAoPywgPywgPywgPywgPywgPylcIjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBAT3ZlcnJpZGVcbiAgICAgICAgICAgICAgICBwdWJsaWMgdm9pZCBzZXRQYXJhbWV0ZXJzKFByZXBhcmVkU3RhdGVtZW50IHBzKSB0aHJvd3MgRXhjZXB0aW9uIHtcbiAgICAgICAgICAgICAgICAgICAgcHMuc2V0SW50KDEsIHVzZXJJZCk7XG4gICAgICAgICAgICAgICAgICAgIHBzLnNldFN0cmluZygyLCBvYmouZ2V0VXNlcm5hbWUoKSk7XG4gICAgICAgICAgICAgICAgICAgIHBzLnNldFN0cmluZygzLCBvYmouZ2V0UGFzc3dvcmQoKSk7XG4gICAgICAgICAgICAgICAgICAgIHBzLnNldFN0cmluZyg0LCBvYmouZ2V0Um9sZSgpKTtcbiAgICAgICAgICAgICAgICAgICAgcHMuc2V0VGltZXN0YW1wKDUsIFRpbWVzdGFtcC52YWx1ZU9mKG9iai5nZXRDcmVhdGVfYXQoKSkpO1xuICAgICAgICAgICAgICAgICAgICBwcy5zZXRCb29sZWFuKDYsIHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIG5ldyBTcWxPcGVyYXRpb24oKSB7XG4gICAgICAgICAgICAgICAgQE92ZXJyaWRlXG4gICAgICAgICAgICAgICAgcHVibGljIFN0cmluZyBnZXRTcWwoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIklOU0VSVCBJTlRPIFNVQlNDUklCRVIgKHN1YnNjcmliZXJfaWQsIG5hbWUsIGFkZHJlc3MsIHBob25lLCB1c2VyX2lkKSBWQUxVRVMgKD8sID8sID8sID8sID8pXCI7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgQE92ZXJyaWRlXG4gICAgICAgICAgICAgICAgcHVibGljIHZvaWQgc2V0UGFyYW1ldGVycyhQcmVwYXJlZFN0YXRlbWVudCBwcykgdGhyb3dzIEV4Y2VwdGlvbiB7XG4gICAgICAgICAgICAgICAgICAgIHBzLnNldEludCgxLCBzdWJzY3JpYmVySWQpO1xuICAgICAgICAgICAgICAgICAgICBwcy5zZXRTdHJpbmcoMiwgb2JqLmdldEZ1bGxOYW1lKCkpO1xuICAgICAgICAgICAgICAgICAgICBwcy5zZXRTdHJpbmcoMywgb2JqLmdldEFkZHJlc3MoKSk7XG4gICAgICAgICAgICAgICAgICAgIHBzLnNldFN0cmluZyg0LCBvYmouZ2V0UGhvbmUoKSk7XG4gICAgICAgICAgICAgICAgICAgIHBzLnNldEludCg1LCB1c2VySWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBEYk9wZXJhdGlvbnMuZXhlY3V0ZVRyYW5zYWN0aW9uKG9wZXJhdGlvbnMsIFwixJDEg25nIGvDvSB0aMOgbmggY8O0bmchXCIpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgdm9pZCB1cGRhdGUoU3Vic2NyaWJlciBvYmopIHtcbiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpOyAvLyBHZW5lcmF0ZWQgZnJvbSBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ29kZS9HZW5lcmF0ZWRNZXRob2RCb2R5XG4gICAgfVxuLi4uXG5QYXRoOiBzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9Gb3Jnb3RQYXNzd29yZC5qYXZhXG4vKlxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9MaWNlbnNlcy9saWNlbnNlLWRlZmF1bHQudHh0IHRvIGNoYW5nZSB0aGlzIGxpY2Vuc2VcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvR1VJRm9ybXMvSkZyYW1lLmphdmEgdG8gZWRpdCB0aGlzIHRlbXBsYXRlXG4gKi9cbnBhY2thZ2UgaW50ZXJuZXQubWFuZ2VtZW50LnN5c3RlbTtcblxuaW1wb3J0IGphdmF4LnN3aW5nLkpPcHRpb25QYW5lO1xuXG4vKipcbiAqXG4gKiBAYXV0aG9yIE5nb2MgVGhhb1xuICovXG5wdWJsaWMgY2xhc3MgRm9yZ290UGFzc3dvcmQgZXh0ZW5kcyBqYXZheC5zd2luZy5KRnJhbWUge1xuICAgIHB1YmxpYyBTdHJpbmcgcGhvbmVQYXR0ZXJuID0gXCJeWzAtOV0qJFwiO1xuICAgIFxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgbmV3IGZvcm0gRm9yZ290UGFzc3dvcmRcbiAgICAgKi9cbiAgICBwdWJsaWMgRm9yZ290UGFzc3dvcmQoKSB7XG4gICAgICAgIGluaXRDb21wb25lbnRzKCk7XG4gICAgICAgIFxuICAgICAgICBidG5FeGl0LnNldFZpc2libGUoZmFsc2UpO1xuICAgICAgICBidG5DaGFuZ2Uuc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgICAgIGxiTmV3UGFzc3dvcmQuc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgICAgIGxiQ29uZmlybVBhc3N3b3JkLnNldFZpc2libGUoZmFsc2UpO1xuICAgICAgICB0eHRQYXNzd29yZC5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICAgICAgdHh0Q29uZmlybVBhc3N3b3JkLnNldFZpc2libGUoZmFsc2UpO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIGNsZWFyKCl7XG4gICAgICAgIHR4dFBhc3N3b3JkLnNldFRleHQoXCJcIik7XG4gICAgICAgIHR4dFBob25lLnNldFRleHQoXCJcIik7XG4gICAgICAgIHR4dENvbmZpcm1QYXNzd29yZC5zZXRUZXh0KFwiXCIpO1xuICAgICAgICBcbiAgICAgICAgYnRuRXhpdC5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICAgICAgYnRuQ2hhbmdlLnNldFZpc2libGUoZmFsc2UpO1xuICAgICAgICBsYk5ld1Bhc3N3b3JkLnNldFZpc2libGUoZmFsc2UpO1xuICAgICAgICBsYkNvbmZpcm1QYXNzd29yZC5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICAgICAgdHh0UGFzc3dvcmQuc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgICAgIHR4dENvbmZpcm1QYXNzd29yZC5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIGJvb2xlYW4gdmFsaWRhdGVQaG9uZSgpe1xuICAgICAgICBTdHJpbmcgcGhvbmUgPSB0eHRQaG9uZS5nZXRUZXh0KCk7XG4gICAgICAgIGlmKHBob25lLmxlbmd0aCgpICE9IDEwIHx8ICFwaG9uZS5tYXRjaGVzKHBob25lUGF0dGVybikpIHtcbiAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwiVnVpIGzDsm5nIG5o4bqtcCDEkcO6bmcgxJHhu4tuaCBk4bqhbmcgc+G7kSDEkWnhu4duIHRob+G6oWkhXCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyBib29sZWFuIHZhbGlkYXRlRmllbGRzKCl7XG4gICAgICAgIFN0cmluZyBwYXNzd29yZCA9IHR4dFBhc3N3b3JkLmdldFRleHQoKTtcbiAgICAgICAgU3RyaW5nIGNvbmZpcm1QYXNzd29yZCA9IHR4dENvbmZpcm1QYXNzd29yZC5nZXRUZXh0KCk7XG5cbiAgICAgICAgaWYocGFzc3dvcmQuaXNFbXB0eSgpIHx8IGNvbmZpcm1QYXNzd29yZC5pc0VtcHR5KCkpe1xuICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXCJWdWkgbMOybmcga2jDtG5nIGLhu48gdHLhu5FuZyFcIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgaXMgY2FsbGVkIGZyb20gd2l0aGluIHRoZSBjb25zdHJ1Y3RvciB0byBpbml0aWFsaXplIHRoZSBmb3JtLlxuICAgICAqIFdBUk5JTkc6IERvIE5PVCBtb2RpZnkgdGhpcyBjb2RlLiBUaGUgY29udGVudCBvZiB0aGlzIG1ldGhvZCBpcyBhbHdheXNcbiAgICAgKiByZWdlbmVyYXRlZCBieSB0aGUgRm9ybSBFZGl0b3IuXG4gICAgICovXG4gICAgQFN1cHByZXNzV2FybmluZ3MoXCJ1bmNoZWNrZWRcIilcbiAgICAvLyA8ZWRpdG9yLWZvbGQgZGVmYXVsdHN0YXRlPVwiY29sbGFwc2VkXCIgZGVzYz1cIkdlbmVyYXRlZCBDb2RlXCI+Ly9HRU4tQkVHSU46aW5pdENvbXBvbmVudHNcbiAgICBwcml2YXRlIHZvaWQgaW5pdENvbXBvbmVudHMoKSB7XG5cbiAgICAgICAgakxhYmVsMSA9IG5ldyBqYXZheC5zd2luZy5KTGFiZWwoKTtcbiAgICAgICAgakxhYmVsMiA9IG5ldyBqYXZheC5zd2luZy5KTGFiZWwoKTtcbiAgICAgICAgbGJOZXdQYXNzd29yZCA9IG5ldyBqYXZheC5zd2luZy5KTGFiZWwoKTtcbiAgICAgICAgbGJDb25maXJtUGFzc3dvcmQgPSBuZXcgamF2YXguc3dpbmcuSkxhYmVsKCk7XG4gICAgICAgIGpTZXBhcmF0b3IxID0gbmV3IGphdmF4LnN3aW5nLkpTZXBhcmF0b3IoKTtcbiAgICAgICAgdHh0UGhvbmUgPSBuZXcgamF2YXguc3dpbmcuSlRleHRGaWVsZCgpO1xuICAgICAgICBidG5DaGVjayA9IG5ldyBqYXZheC5zd2luZy5KQnV0dG9uKCk7XG4gICAgICAgIHR4dFBhc3N3b3JkID0gbmV3IGphdmF4LnN3aW5nLkpQYXNzd29yZEZpZWxkKCk7XG4gICAgICAgIHR4dENvbmZpcm1QYXNzd29yZCA9IG5ldyBqYXZheC5zd2luZy5KUGFzc3dvcmRGaWVsZCgpO1xuICAgICAgICBidG5DaGFuZ2UgPSBuZXcgamF2YXguc3dpbmcuSkJ1dHRvbigpO1xuICAgICAgICBidG5FeGl0ID0gbmV3IGphdmF4LnN3aW5nLkpCdXR0b24oKTtcblxuICAgICAgICBzZXREZWZhdWx0Q2xvc2VPcGVyYXRpb24oamF2YXguc3dpbmcuV2luZG93Q29uc3RhbnRzLkVYSVRfT05fQ0xPU0UpO1xuXG4gICAgICAgIGpMYWJlbDEuc2V0Rm9udChuZXcgamF2YS5hd3QuRm9udChcIkFyaWFsXCIsIDEsIDM2KSk7IC8vIE5PSTE4TlxuICAgICAgICBqTGFiZWwxLnNldEZvcmVncm91bmQoamF2YXguc3dpbmcuVUlNYW5hZ2VyLmdldERlZmF1bHRzKCkuZ2V0Q29sb3IoXCJBY3Rpb25zLlllbGxvd1wiKSk7XG4gICAgICAgIGpMYWJlbDEuc2V0VGV4dChcIsSQ4buUSSBN4bqsVCBLSOG6qFVcIik7XG4uLi5cblxuICAgICAgICBidG5DaGFuZ2Uuc2V0Rm9udChuZXcgamF2YS5hd3QuRm9udChcIkFyaWFsXCIsIDEsIDE0KSk7IC8vIE5PSTE4TlxuICAgICAgICBidG5DaGFuZ2Uuc2V0SWNvbihuZXcgamF2YXguc3dpbmcuSW1hZ2VJY29uKGdldENsYXNzKCkuZ2V0UmVzb3VyY2UoXCIvSW1hZ2VzL3Jlc2V0LXBhc3N3b3JkLnBuZ1wiKSkpOyAvLyBOT0kxOE5cbiAgICAgICAgYnRuQ2hhbmdlLnNldFRleHQoXCLEkOG7lWkgbeG6rXQga2jhuql1XCIpO1xuICAgICAgICBidG5DaGFuZ2Uuc2V0Q3Vyc29yKG5ldyBqYXZhLmF3dC5DdXJzb3IoamF2YS5hd3QuQ3Vyc29yLkhBTkRfQ1VSU09SKSk7XG5cbiAgICAgICAgYnRuRXhpdC5zZXRGb250KG5ldyBqYXZhLmF3dC5Gb250KFwiQXJpYWxcIiwgMSwgMTQpKTsgLy8gTk9JMThOXG4gICAgICAgIGJ0bkV4aXQuc2V0SWNvbihuZXcgamF2YXguc3dpbmcuSW1hZ2VJY29uKGdldENsYXNzKCkuZ2V0UmVzb3VyY2UoXCIvSW1hZ2VzL2xvZ291dC5wbmdcIikpKTsgLy8gTk9JMThOXG4gICAgICAgIGJ0bkV4aXQuc2V0VGV4dChcIlRob8OhdFwiKTtcbiAgICAgICAgYnRuRXhpdC5zZXRDdXJzb3IobmV3IGphdmEuYXd0LkN1cnNvcihqYXZhLmF3dC5DdXJzb3IuSEFORF9DVVJTT1IpKTtcbiAgICAgICAgYnRuRXhpdC5hZGRBY3Rpb25MaXN0ZW5lcihuZXcgamF2YS5hd3QuZXZlbnQuQWN0aW9uTGlzdGVuZXIoKSB7XG4gICAgICAgICAgICBwdWJsaWMgdm9pZCBhY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7XG4gICAgICAgICAgICAgICAgYnRuRXhpdEFjdGlvblBlcmZvcm1lZChldnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbi4uLlxuICAgICAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlUGFyYWxsZWxHcm91cChqYXZheC5zd2luZy5Hcm91cExheW91dC5BbGlnbm1lbnQuQkFTRUxJTkUpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQoYnRuRXhpdCwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUsIDMwLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSlcbiAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChidG5DaGFuZ2UsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFLCAzMCwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUpKSlcbiAgICAgICAgKTtcblxuICAgICAgICBwYWNrKCk7XG4gICAgfS8vIDwvZWRpdG9yLWZvbGQ+Ly9HRU4tRU5EOmluaXRDb21wb25lbnRzXG5cbiAgICBwcml2YXRlIHZvaWQgYnRuRXhpdEFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5FeGl0QWN0aW9uUGVyZm9ybWVkXG4gICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxuICAgICAgICBpbnQgcmVzdWx0ID0gSk9wdGlvblBhbmUuc2hvd0NvbmZpcm1EaWFsb2cobnVsbCwgXCJC4bqhbiBjw7MgY2jhuq9jIGNo4bqvbiBtdeG7kW4gdGhvw6F0IGtow7RuZz9cIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5ZRVNfTk9fT1BUSU9OLCBKT3B0aW9uUGFuZS5RVUVTVElPTl9NRVNTQUdFKTtcbiAgICBcbiAgICAgICAgaWYgKHJlc3VsdCA9PSBKT3B0aW9uUGFuZS5ZRVNfT1BUSU9OKSB7XG4gICAgICAgICAgICBTeXN0ZW0uZXhpdCgwKTtcbiAgICAgICAgfVxuICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0bkV4aXRBY3Rpb25QZXJmb3JtZWRcbi4uLlxuICAgICAgICAvLzwvZWRpdG9yLWZvbGQ+XG5cbiAgICAgICAgLyogQ3JlYXRlIGFuZCBkaXNwbGF5IHRoZSBmb3JtICovXG4gICAgICAgIGphdmEuYXd0LkV2ZW50UXVldWUuaW52b2tlTGF0ZXIobmV3IFJ1bm5hYmxlKCkge1xuICAgICAgICAgICAgcHVibGljIHZvaWQgcnVuKCkge1xuICAgICAgICAgICAgICAgIG5ldyBGb3Jnb3RQYXNzd29yZCgpLnNldFZpc2libGUodHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFZhcmlhYmxlcyBkZWNsYXJhdGlvbiAtIGRvIG5vdCBtb2RpZnkvL0dFTi1CRUdJTjp2YXJpYWJsZXNcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpCdXR0b24gYnRuQ2hhbmdlO1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkJ1dHRvbiBidG5DaGVjaztcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpCdXR0b24gYnRuRXhpdDtcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpMYWJlbCBqTGFiZWwxO1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkxhYmVsIGpMYWJlbDI7XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KU2VwYXJhdG9yIGpTZXBhcmF0b3IxO1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkxhYmVsIGxiQ29uZmlybVBhc3N3b3JkO1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkxhYmVsIGxiTmV3UGFzc3dvcmQ7XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KUGFzc3dvcmRGaWVsZCB0eHRDb25maXJtUGFzc3dvcmQ7XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KUGFzc3dvcmRGaWVsZCB0eHRQYXNzd29yZDtcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpUZXh0RmllbGQgdHh0UGhvbmU7XG4gICAgLy8gRW5kIG9mIHZhcmlhYmxlcyBkZWNsYXJhdGlvbi8vR0VOLUVORDp2YXJpYWJsZXNcbn1cbi4uLlxuUGF0aDogc3JjL0RBTy9Db25uZWN0aW9uUHJvdmlkZXIuamF2YVxuLi4uXG5cbi8qKlxuICpcbiAqIEBhdXRob3IgTmdvYyBUaGFvXG4gKi9cbnB1YmxpYyBjbGFzcyBDb25uZWN0aW9uUHJvdmlkZXIge1xuICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmluZyBVUkwgPSBcImpkYmM6bXlzcWw6Ly8xMjUuMjEyLjIzMS4xODQ6Njk2OS9JbnRlcm5ldERCXCI7XG4gICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nIFVTRVIgPSBcIm1pbnRvcmkwOVwiO1xuICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmluZyBQQVNTV09SRCA9IFwiTWludG9yeTA5QDk2XCI7XG4gICAgXG4gICAgcHVibGljIHN0YXRpYyBDb25uZWN0aW9uIGdldENvbm4oKXtcbiAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgQ2xhc3MuZm9yTmFtZShcImNvbS5teXNxbC5jai5qZGJjLkRyaXZlclwiKTtcbiAgICAgICAgICAgIGNvbm4gPSBEcml2ZXJNYW5hZ2VyLmdldENvbm5lY3Rpb24oVVJMLCBVU0VSLCBQQVNTV09SRCk7XG4gICAgICAgIH0gY2F0Y2ggKENsYXNzTm90Rm91bmRFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgU3lzdGVtLmVyci5wcmludGxuKFwiTXlTUUwgSkRCQyBEcml2ZXIgbm90IGZvdW5kLlwiKTtcbiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBTeXN0ZW0uZXJyLnByaW50bG4oXCJDb25uZWN0aW9uIGZhaWxlZC5cIik7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb25uO1xuICAgIH1cbi4uLlxuUGF0aDogc3JjL0RBTy9EYk9wZXJhdGlvbnMuamF2YVxucGFja2FnZSBEQU87XG5cbmltcG9ydCBqYXZhLnNxbC5Db25uZWN0aW9uO1xuaW1wb3J0IGphdmEuc3FsLlByZXBhcmVkU3RhdGVtZW50O1xuaW1wb3J0IGphdmEuc3FsLlJlc3VsdFNldDtcbmltcG9ydCBqYXZhLnNxbC5TdGF0ZW1lbnQ7XG5pbXBvcnQgamF2YXguc3dpbmcuSk9wdGlvblBhbmU7XG5cbnB1YmxpYyBjbGFzcyBEYk9wZXJhdGlvbnMge1xuICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBzZXREYXRhT3JEZWxldGUoU3RyaW5nIHF1ZXJ5LCBTdHJpbmcgbXNnKSB7XG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgICAgIFN0YXRlbWVudCBzdCA9IG51bGw7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25uID0gQ29ubmVjdGlvblByb3ZpZGVyLmdldENvbm4oKTtcbiAgICAgICAgICAgIHN0ID0gY29ubi5jcmVhdGVTdGF0ZW1lbnQoKTtcbiAgICAgICAgICAgIHN0LmV4ZWN1dGVVcGRhdGUocXVlcnkpO1xuXG4gICAgICAgICAgICBpZighbXNnLmVxdWFscyhcIlwiKSkge1xuICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIG1zZywgXCJNZXNzYWdlXCIsIEpPcHRpb25QYW5lLklORk9STUFUSU9OX01FU1NBR0UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZXgpIHtcbiAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIGV4LCBcIk1lc3NhZ2VcIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmIChzdCAhPSBudWxsKSBzdC5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIGlmIChjb25uICE9IG51bGwpIGNvbm4uY2xvc2UoKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbi4uLlxuUGF0aDogc3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vTG9naW4uamF2YVxuLypcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvTGljZW5zZXMvbGljZW5zZS1kZWZhdWx0LnR4dCB0byBjaGFuZ2UgdGhpcyBsaWNlbnNlXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0dVSUZvcm1zL0pGcmFtZS5qYXZhIHRvIGVkaXQgdGhpcyB0ZW1wbGF0ZVxuICovXG5wYWNrYWdlIGludGVybmV0Lm1hbmdlbWVudC5zeXN0ZW07XG5cbmltcG9ydCBEQU8uVXNlckRBTztcbmltcG9ydCBNb2RlbC5Vc2VyO1xuaW1wb3J0IGphdmF4LnN3aW5nLkpPcHRpb25QYW5lO1xuLi4uXG5QYXRoOiBzcmMvTW9kZWwvVXNlci5qYXZhXG4vKlxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9MaWNlbnNlcy9saWNlbnNlLWRlZmF1bHQudHh0IHRvIGNoYW5nZSB0aGlzIGxpY2Vuc2VcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9DbGFzcy5qYXZhIHRvIGVkaXQgdGhpcyB0ZW1wbGF0ZVxuICovXG5wYWNrYWdlIE1vZGVsO1xuXG5pbXBvcnQgamF2YS50aW1lLkxvY2FsRGF0ZVRpbWU7XG4vKipcbiAqXG4gKiBAYXV0aG9yIE5nb2MgVGhhb1xuICovXG5wdWJsaWMgY2xhc3MgVXNlciB7XG4gICAgcHJpdmF0ZSBpbnQgdXNlcl9pZDtcbiAgICBwcml2YXRlIFN0cmluZyB1c2VybmFtZTtcbiAgICBwcml2YXRlIFN0cmluZyBwYXNzd29yZDtcbiAgICBwcml2YXRlIFN0cmluZyByb2xlO1xuICAgIHByaXZhdGUgTG9jYWxEYXRlVGltZSBjcmVhdGVfYXQ7XG4gICAgcHJpdmF0ZSBib29sZWFuIGlzQWN0aXZlO1xuXG4gICAgcHVibGljIFVzZXIoKSB7XG4gICAgfVxuXG4gICAgcHVibGljIFVzZXIoaW50IHVzZXJfaWQsIFN0cmluZyB1c2VybmFtZSwgU3RyaW5nIHBhc3N3b3JkLCBTdHJpbmcgcm9sZSwgTG9jYWxEYXRlVGltZSBjcmVhdGVfYXQsIGJvb2xlYW4gaXNBY3RpdmUpIHtcbiAgICAgICAgdGhpcy51c2VyX2lkID0gdXNlcl9pZDtcbiAgICAgICAgdGhpcy51c2VybmFtZSA9IHVzZXJuYW1lO1xuICAgICAgICB0aGlzLnBhc3N3b3JkID0gcGFzc3dvcmQ7XG4gICAgICAgIHRoaXMucm9sZSA9IHJvbGU7XG4gICAgICAgIHRoaXMuY3JlYXRlX2F0ID0gY3JlYXRlX2F0O1xuICAgICAgICB0aGlzLmlzQWN0aXZlID0gaXNBY3RpdmU7XG4gICAgfVxuXG4gICAgcHVibGljIGludCBnZXRVc2VyX2lkKCkge1xuICAgICAgICByZXR1cm4gdXNlcl9pZDtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXRVc2VyX2lkKGludCB1c2VyX2lkKSB7XG4gICAgICAgIHRoaXMudXNlcl9pZCA9IHVzZXJfaWQ7XG4gICAgfVxuXG4gICAgcHVibGljIFN0cmluZyBnZXRVc2VybmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHVzZXJuYW1lO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHNldFVzZXJuYW1lKFN0cmluZyB1c2VybmFtZSkge1xuICAgICAgICB0aGlzLnVzZXJuYW1lID0gdXNlcm5hbWU7XG4gICAgfVxuXG4gICAgcHVibGljIFN0cmluZyBnZXRQYXNzd29yZCgpIHtcbiAgICAgICAgcmV0dXJuIHBhc3N3b3JkO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHNldFBhc3N3b3JkKFN0cmluZyBwYXNzd29yZCkge1xuICAgICAgICB0aGlzLnBhc3N3b3JkID0gcGFzc3dvcmQ7XG4gICAgfVxuXG4gICAgcHVibGljIFN0cmluZyBnZXRSb2xlKCkge1xuICAgICAgICByZXR1cm4gcm9sZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXRSb2xlKFN0cmluZyByb2xlKSB7XG4gICAgICAgIHRoaXMucm9sZSA9IHJvbGU7XG4gICAgfVxuXG4gICAgcHVibGljIExvY2FsRGF0ZVRpbWUgZ2V0Q3JlYXRlX2F0KCkge1xuICAgICAgICByZXR1cm4gY3JlYXRlX2F0O1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHNldENyZWF0ZV9hdChMb2NhbERhdGVUaW1lIGNyZWF0ZV9hdCkge1xuICAgICAgICB0aGlzLmNyZWF0ZV9hdCA9IGNyZWF0ZV9hdDtcbiAgICB9XG5cbiAgICBwdWJsaWMgYm9vbGVhbiBpc0lzQWN0aXZlKCkge1xuICAgICAgICByZXR1cm4gaXNBY3RpdmU7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgc2V0SXNBY3RpdmUoYm9vbGVhbiBpc0FjdGl2ZSkge1xuICAgICAgICB0aGlzLmlzQWN0aXZlID0gaXNBY3RpdmU7XG4gICAgfVxuICAgIFxufVxuLi4uXG5QYXRoOiBzcmMvTW9kZWwvU3Vic2NyaWJlci5qYXZhXG4vKlxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9MaWNlbnNlcy9saWNlbnNlLWRlZmF1bHQudHh0IHRvIGNoYW5nZSB0aGlzIGxpY2Vuc2VcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9DbGFzcy5qYXZhIHRvIGVkaXQgdGhpcyB0ZW1wbGF0ZVxuICovXG5wYWNrYWdlIE1vZGVsO1xuXG5pbXBvcnQgamF2YS50aW1lLkxvY2FsRGF0ZVRpbWU7XG5cbi8qKlxuICpcbiAqIEBhdXRob3IgTmdvYyBUaGFvXG4gKi9cbnB1YmxpYyBjbGFzcyBTdWJzY3JpYmVyIGV4dGVuZHMgVXNlciB7XG4gICAgcHJpdmF0ZSBpbnQgc3Vic2NyaWJlcl9pZDtcbiAgICBwcml2YXRlIFN0cmluZyBmdWxsTmFtZTtcbiAgICBwcml2YXRlIFN0cmluZyBhZGRyZXNzO1xuICAgIHByaXZhdGUgU3RyaW5nIHBob25lO1xuICAgIFxuICAgIHB1YmxpYyBTdWJzY3JpYmVyKCkge1xuICAgIH1cblxuICAgIHB1YmxpYyBTdWJzY3JpYmVyKGludCBzdWJzY3JpYmVyX2lkLCBTdHJpbmcgZnVsbE5hbWUsIFN0cmluZyBhZGRyZXNzLCBTdHJpbmcgcGhvbmUpIHtcbiAgICAgICAgdGhpcy5zdWJzY3JpYmVyX2lkID0gc3Vic2NyaWJlcl9pZDtcbiAgICAgICAgdGhpcy5mdWxsTmFtZSA9IGZ1bGxOYW1lO1xuICAgICAgICB0aGlzLmFkZHJlc3MgPSBhZGRyZXNzO1xuICAgICAgICB0aGlzLnBob25lID0gcGhvbmU7XG4gICAgfVxuXG4gICAgcHVibGljIFN1YnNjcmliZXIoaW50IHN1YnNjcmliZXJfaWQsIFN0cmluZyBmdWxsTmFtZSwgU3RyaW5nIGFkZHJlc3MsIFN0cmluZyBwaG9uZSwgaW50IHVzZXJfaWQsIFN0cmluZyB1c2VybmFtZSwgU3RyaW5nIHBhc3N3b3JkLCBTdHJpbmcgcm9sZSwgTG9jYWxEYXRlVGltZSBjcmVhdGVfYXQsIGJvb2xlYW4gaXNBY3RpdmUpIHtcbiAgICAgICAgc3VwZXIodXNlcl9pZCwgdXNlcm5hbWUsIHBhc3N3b3JkLCByb2xlLCBjcmVhdGVfYXQsIGlzQWN0aXZlKTtcbiAgICAgICAgdGhpcy5zdWJzY3JpYmVyX2lkID0gc3Vic2NyaWJlcl9pZDtcbiAgICAgICAgdGhpcy5mdWxsTmFtZSA9IGZ1bGxOYW1lO1xuICAgICAgICB0aGlzLmFkZHJlc3MgPSBhZGRyZXNzO1xuICAgICAgICB0aGlzLnBob25lID0gcGhvbmU7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyBpbnQgZ2V0U3Vic2NyaWJlcl9pZCgpIHtcbiAgICAgICAgcmV0dXJuIHN1YnNjcmliZXJfaWQ7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgc2V0U3Vic2NyaWJlcl9pZChpbnQgc3Vic2NyaWJlcl9pZCkge1xuICAgICAgICB0aGlzLnN1YnNjcmliZXJfaWQgPSBzdWJzY3JpYmVyX2lkO1xuICAgIH1cblxuICAgIHB1YmxpYyBTdHJpbmcgZ2V0RnVsbE5hbWUoKSB7XG4gICAgICAgIHJldHVybiBmdWxsTmFtZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXRGdWxsTmFtZShTdHJpbmcgZnVsbE5hbWUpIHtcbiAgICAgICAgdGhpcy5mdWxsTmFtZSA9IGZ1bGxOYW1lO1xuICAgIH1cblxuICAgIHB1YmxpYyBTdHJpbmcgZ2V0QWRkcmVzcygpIHtcbiAgICAgICAgcmV0dXJuIGFkZHJlc3M7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgc2V0QWRkcmVzcyhTdHJpbmcgYWRkcmVzcykge1xuICAgICAgICB0aGlzLmFkZHJlc3MgPSBhZGRyZXNzO1xuICAgIH1cblxuICAgIHB1YmxpYyBTdHJpbmcgZ2V0UGhvbmUoKSB7XG4gICAgICAgIHJldHVybiBwaG9uZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXRQaG9uZShTdHJpbmcgcGhvbmUpIHtcbiAgICAgICAgdGhpcy5waG9uZSA9IHBob25lO1xuICAgIH1cbiAgICBcbiAgICBcbn1cbi4uLlxuUGF0aDogc3JjL01vZGVsL1BsYW4uamF2YVxuLi4uXG5cbi8qKlxuICpcbiAqIEBhdXRob3IgTmdvYyBUaGFvXG4gKi9cbnB1YmxpYyBjbGFzcyBQbGFuIHtcbiAgICBwcml2YXRlIGludCBwbGFuX2lkO1xuICAgIHByaXZhdGUgU3RyaW5nIG5hbWU7XG4gICAgcHJpdmF0ZSBsb25nIHByaWNlO1xuICAgIHByaXZhdGUgaW50IG1heF9zcGVlZF9kb21lc3RpYztcbiAgICBwcml2YXRlIGludCBtYXhfc3BlZWRfaW50ZXJuYXRpb25hbDtcbiAgICBwcml2YXRlIGludCBtaW5fc3BlZWRfZG9tZXN0aWM7XG4gICAgcHJpdmF0ZSBpbnQgbWluX3NwZWVkX2ludGVybmF0aW9uYWw7XG5cbiAgICBwdWJsaWMgUGxhbigpIHtcbiAgICB9XG5cbiAgICBwdWJsaWMgUGxhbihpbnQgcGxhbl9pZCwgU3RyaW5nIG5hbWUsIGxvbmcgcHJpY2UsIGludCBtYXhfc3BlZWRfZG9tZXN0aWMsIGludCBtYXhfc3BlZWRfaW50ZXJuYXRpb25hbCwgaW50IG1pbl9zcGVlZF9kb21lc3RpYywgaW50IG1pbl9zcGVlZF9pbnRlcm5hdGlvbmFsKSB7XG4gICAgICAgIHRoaXMucGxhbl9pZCA9IHBsYW5faWQ7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMucHJpY2UgPSBwcmljZTtcbiAgICAgICAgdGhpcy5tYXhfc3BlZWRfZG9tZXN0aWMgPSBtYXhfc3BlZWRfZG9tZXN0aWM7XG4gICAgICAgIHRoaXMubWF4X3NwZWVkX2ludGVybmF0aW9uYWwgPSBtYXhfc3BlZWRfaW50ZXJuYXRpb25hbDtcbiAgICAgICAgdGhpcy5taW5fc3BlZWRfZG9tZXN0aWMgPSBtaW5fc3BlZWRfZG9tZXN0aWM7XG4gICAgICAgIHRoaXMubWluX3NwZWVkX2ludGVybmF0aW9uYWwgPSBtaW5fc3BlZWRfaW50ZXJuYXRpb25hbDtcbiAgICB9XG5cbiAgICBwdWJsaWMgaW50IGdldFBsYW5faWQoKSB7XG4gICAgICAgIHJldHVybiBwbGFuX2lkO1xuICAgIH1cbi4uLlxuIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV8wMTlBM1REQjZnYUJWQTJnaTNvSGlxUEsifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJFOi9Ib2NUYXAvMDJfSkFWQS8wM19Qcm9qZWN0L0ludGVybmV0IE1hbmdlbWVudCBTeXN0ZW0iLCJmb2xkZXJSb290IjoiRTovSG9jVGFwLzAyX0pBVkEvMDNfUHJvamVjdC9JbnRlcm5ldCBNYW5nZW1lbnQgU3lzdGVtIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwidGltZXN0YW1wIjoiMjAyNS0wNS0xM1QwMToxOTo0Ni42MjJaIiwicmVzcG9uc2VfdGV4dCI6Ik5vdyBJIG5lZWQgdG8gY2hlY2sgaWYgdGhlcmUncyBhbnkgZXhpc3RpbmcgbWV0aG9kIHRvIGZpbmQgYSB1c2VyIGJ5IHBob25lIG51bWJlciBhbmQgdXBkYXRlIHRoZWlyIHBhc3N3b3JkLlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6Ijk0MTcyMjNhLTRkZmUtNDQ0YS1iZDZkLTMyOTFiNWQxZmI5MSIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfMDFMZXpvSHJVWGhMZ3ZDWUFheHptaGZIIiwidG9vbF9uYW1lIjoiY29kZWJhc2UtcmV0cmlldmFsIiwiaW5wdXRfanNvbiI6IntcImluZm9ybWF0aW9uX3JlcXVlc3RcIjogXCJHZXQgdGhlIGZ1bGwgRm9yZ290UGFzc3dvcmQuamF2YSBmaWxlIHRvIHNlZSBhbGwgZXhpc3RpbmcgbWV0aG9kcyBhbmQgc3RydWN0dXJlIGJlZm9yZSBtYWtpbmcgY2hhbmdlcy5cIn0iLCJtY3Bfc2VydmVyX25hbWUiOiIiLCJtY3BfdG9vbF9uYW1lIjoiIn19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiJCYXNlZCBvbiB0aGUgaW5mb3JtYXRpb24gZ2F0aGVyZWQsIEkgbm93IGhhdmUgYSBnb29kIHVuZGVyc3RhbmRpbmcgb2YgdGhlIGNvZGViYXNlIHN0cnVjdHVyZS4gSSBuZWVkIHRvIGltcGxlbWVudCB0aGUgZXZlbnQgaGFuZGxpbmcgZnVuY3Rpb25zIGZvciB0aGUgRm9yZ290UGFzc3dvcmQgZm9ybS4gTGV0IG1lIGNyZWF0ZSBhIGRldGFpbGVkIHBsYW4gZm9yIHRoaXMgdGFzay5cblxuIyMgRGV0YWlsZWQgUGxhblxuXG4xLiAqKkltcGxlbWVudCBidG5DaGVjayBBY3Rpb25MaXN0ZW5lcioqOlxuICAgLSBWYWxpZGF0ZSB0aGUgcGhvbmUgbnVtYmVyIGlucHV0XG4gICAtIFNlYXJjaCBmb3IgYSB1c2VyIHdpdGggdGhlIHByb3ZpZGVkIHBob25lIG51bWJlciBpbiB0aGUgZGF0YWJhc2VcbiAgIC0gSWYgZm91bmQsIHNob3cgdGhlIHBhc3N3b3JkIGZpZWxkcyBhbmQgY2hhbmdlIGJ1dHRvblxuICAgLSBJZiBub3QgZm91bmQsIHNob3cgYW4gZXJyb3IgbWVzc2FnZVxuXG4yLiAqKkltcGxlbWVudCBidG5DaGFuZ2UgQWN0aW9uTGlzdGVuZXIqKjpcbiAgIC0gVmFsaWRhdGUgdGhlIG5ldyBwYXNzd29yZCBhbmQgY29uZmlybSBwYXNzd29yZCBmaWVsZHNcbiAgIC0gQ2hlY2sgaWYgcGFzc3dvcmRzIG1hdGNoXG4gICAtIFVwZGF0ZSB0aGUgdXNlcidzIHBhc3N3b3JkIGluIHRoZSBkYXRhYmFzZVxuICAgLSBTaG93IHN1Y2Nlc3MgbWVzc2FnZSBhbmQgcmVkaXJlY3QgdG8gbG9naW4gcGFnZVxuXG4zLiAqKkNyZWF0ZSBoZWxwZXIgbWV0aG9kcyoqOlxuICAgLSBNZXRob2QgdG8gZmluZCBhIHVzZXIgYnkgcGhvbmUgbnVtYmVyXG4gICAtIE1ldGhvZCB0byB1cGRhdGUgYSB1c2VyJ3MgcGFzc3dvcmRcblxuTGV0IG1lIHN0YXJ0IGltcGxlbWVudGluZyB0aGVzZSBjaGFuZ2VzOlxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiVGhlIGZvbGxvd2luZyBjb2RlIHNlY3Rpb25zIHdlcmUgcmV0cmlldmVkOlxuUGF0aDogc3JjL0RBTy9Vc2VyREFPLmphdmFcbi8qXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0xpY2Vuc2VzL2xpY2Vuc2UtZGVmYXVsdC50eHQgdG8gY2hhbmdlIHRoaXMgbGljZW5zZVxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NsYXNzLmphdmEgdG8gZWRpdCB0aGlzIHRlbXBsYXRlXG4gKi9cbnBhY2thZ2UgREFPO1xuXG5pbXBvcnQgTW9kZWwuVXNlcjtcbmltcG9ydCBqYXZhLnV0aWwuTGlzdDtcbmltcG9ydCBqYXZhLnNxbC5QcmVwYXJlZFN0YXRlbWVudDtcbmltcG9ydCBqYXZhLnNxbC5UaW1lc3RhbXA7XG5pbXBvcnQgREFPLkRiT3BlcmF0aW9ucy5TcWxPcGVyYXRpb247XG5pbXBvcnQgamF2YS5zcWwuUmVzdWx0U2V0O1xuLyoqXG4gKlxuICogQGF1dGhvciBOZ29jIFRoYW9cbiAqL1xucHVibGljIGNsYXNzIFVzZXJEQU97XG5cbiAgICBwdWJsaWMgc3RhdGljIHZvaWQgaW5zZXJ0KGZpbmFsIFVzZXIgb2JqKSB7XG4gICAgICAgIGZpbmFsIGludCB1c2VySWQgPSBEYk9wZXJhdGlvbnMuZ2V0TmV4dElkKFwiVVNFUlwiLCBcInVzZXJfaWRcIik7XG4gICAgICAgIFxuICAgICAgICBvYmouc2V0VXNlcl9pZCh1c2VySWQpO1xuICAgICAgICBcbiAgICAgICAgU3FsT3BlcmF0aW9uW10gb3BlcmF0aW9ucyA9IG5ldyBTcWxPcGVyYXRpb25bXSB7XG4gICAgICAgICAgICBuZXcgU3FsT3BlcmF0aW9uKCkge1xuICAgICAgICAgICAgICAgIEBPdmVycmlkZVxuICAgICAgICAgICAgICAgIHB1YmxpYyBTdHJpbmcgZ2V0U3FsKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJJTlNFUlQgSU5UTyBVU0VSKHVzZXJfaWQsIHVzZXJuYW1lLCBwYXNzd29yZCwgcm9sZSwgY3JlYXRlZF9hdCkgVkFMVUVTICg/LCA/LCA/LCA/LCA/KVwiO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIEBPdmVycmlkZVxuICAgICAgICAgICAgICAgIHB1YmxpYyB2b2lkIHNldFBhcmFtZXRlcnMoUHJlcGFyZWRTdGF0ZW1lbnQgcHMpIHRocm93cyBFeGNlcHRpb24ge1xuICAgICAgICAgICAgICAgICAgICBwcy5zZXRJbnQoMSwgdXNlcklkKTtcbiAgICAgICAgICAgICAgICAgICAgcHMuc2V0U3RyaW5nKDIsIG9iai5nZXRVc2VybmFtZSgpKTtcbiAgICAgICAgICAgICAgICAgICAgcHMuc2V0U3RyaW5nKDMsIG9iai5nZXRQYXNzd29yZCgpKTtcbiAgICAgICAgICAgICAgICAgICAgcHMuc2V0U3RyaW5nKDQsIG9iai5nZXRSb2xlKCkpO1xuICAgICAgICAgICAgICAgICAgICBwcy5zZXRUaW1lc3RhbXAoNSwgVGltZXN0YW1wLnZhbHVlT2Yob2JqLmdldENyZWF0ZV9hdCgpKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgRGJPcGVyYXRpb25zLmV4ZWN1dGVUcmFuc2FjdGlvbihvcGVyYXRpb25zLCBcIlRow6ptIHTDoGkga2hv4bqjbiB0aMOgbmggY8O0bmchXCIpO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgc3RhdGljIGJvb2xlYW4gbG9naW4oZmluYWwgU3RyaW5nIHVzZXJOYW1lLCBmaW5hbCBTdHJpbmcgcGFzc3dvcmQpIHtcbiAgICAgICAgVXNlciB1c2VyID0gbnVsbDtcbiAgICAgICAgYm9vbGVhbiBpc1ZhbGlkID0gZmFsc2U7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBSZXN1bHRTZXQgcnMgPSBEYk9wZXJhdGlvbnMuZ2V0RGF0YShcIlNFTEVDVCAqIEZST00gVVNFUiBXSEVSRSB1c2VybmFtZSA9ICdcIiArIHVzZXJOYW1lICsgXCInIGFuZCBwYXNzd29yZCA9ICdcIiArIHBhc3N3b3JkICtcIidcIik7XG4gICAgICAgICAgICB3aGlsZSAocnMubmV4dCgpKSB7XG4gICAgICAgICAgICAgICAgYm9vbGVhbiBpc0FjdGl2ZSA9IHJzLmdldEJvb2xlYW4oXCJpc0FjdGl2ZVwiKTtcbiAgICAgICAgICAgICAgICBpZiAoaXNBY3RpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgaXNWYWxpZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBleCkge1xuICAgICAgICAgICAgZXgucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgIH0gXG5cbiAgICAgICAgcmV0dXJuIGlzVmFsaWQ7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyB2b2lkIHVwZGF0ZShVc2VyIG9iaikge1xuICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oXCJOb3Qgc3VwcG9ydGVkIHlldC5cIik7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyB2b2lkIGRlbGV0ZShpbnQgaWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgVXNlciBnZXRCeUlkKGludCBpZCkge1xuICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oXCJOb3Qgc3VwcG9ydGVkIHlldC5cIik7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBMaXN0PFVzZXI+IGdldEFsbCgpIHtcbiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpO1xuICAgIH1cbiAgICBcbn1cbi4uLlxuUGF0aDogc3JjL0RBTy9TdWJzY3JpYmVyREFPLmphdmFcbi8qXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0xpY2Vuc2VzL2xpY2Vuc2UtZGVmYXVsdC50eHQgdG8gY2hhbmdlIHRoaXMgbGljZW5zZVxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NsYXNzLmphdmEgdG8gZWRpdCB0aGlzIHRlbXBsYXRlXG4gKi9cbnBhY2thZ2UgREFPO1xuXG5pbXBvcnQgTW9kZWwuU3Vic2NyaWJlcjtcbmltcG9ydCBqYXZhLnV0aWwuTGlzdDtcbmltcG9ydCBqYXZhLnNxbC5QcmVwYXJlZFN0YXRlbWVudDtcbmltcG9ydCBqYXZhLnNxbC5UaW1lc3RhbXA7XG5pbXBvcnQgREFPLkRiT3BlcmF0aW9ucy5TcWxPcGVyYXRpb247XG5cbi8qKlxuICpcbiAqIEBhdXRob3IgTmdvYyBUaGFvXG4gKi9cbnB1YmxpYyBjbGFzcyBTdWJzY3JpYmVyREFPe1xuXG4gICAgcHVibGljIHN0YXRpYyB2b2lkIGluc2VydChmaW5hbCBTdWJzY3JpYmVyIG9iaikge1xuICAgICAgICBmaW5hbCBpbnQgdXNlcklkID0gRGJPcGVyYXRpb25zLmdldE5leHRJZChcIlVTRVJcIiwgXCJ1c2VyX2lkXCIpO1xuICAgICAgICBmaW5hbCBpbnQgc3Vic2NyaWJlcklkID0gRGJPcGVyYXRpb25zLmdldE5leHRJZChcIlNVQlNDUklCRVJcIiwgXCJzdWJzY3JpYmVyX2lkXCIpO1xuXG4gICAgICAgIG9iai5zZXRVc2VyX2lkKHVzZXJJZCk7XG4gICAgICAgIG9iai5zZXRTdWJzY3JpYmVyX2lkKHN1YnNjcmliZXJJZCk7XG5cbiAgICAgICAgU3FsT3BlcmF0aW9uW10gb3BlcmF0aW9ucyA9IG5ldyBTcWxPcGVyYXRpb25bXSB7XG4gICAgICAgICAgICBuZXcgU3FsT3BlcmF0aW9uKCkge1xuICAgICAgICAgICAgICAgIEBPdmVycmlkZVxuICAgICAgICAgICAgICAgIHB1YmxpYyBTdHJpbmcgZ2V0U3FsKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJJTlNFUlQgSU5UTyBVU0VSKHVzZXJfaWQsIHVzZXJuYW1lLCBwYXNzd29yZCwgcm9sZSwgY3JlYXRlZF9hdCwgaXNBY3RpdmUpIFZBTFVFUyAoPywgPywgPywgPywgPywgPylcIjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBAT3ZlcnJpZGVcbiAgICAgICAgICAgICAgICBwdWJsaWMgdm9pZCBzZXRQYXJhbWV0ZXJzKFByZXBhcmVkU3RhdGVtZW50IHBzKSB0aHJvd3MgRXhjZXB0aW9uIHtcbiAgICAgICAgICAgICAgICAgICAgcHMuc2V0SW50KDEsIHVzZXJJZCk7XG4gICAgICAgICAgICAgICAgICAgIHBzLnNldFN0cmluZygyLCBvYmouZ2V0VXNlcm5hbWUoKSk7XG4gICAgICAgICAgICAgICAgICAgIHBzLnNldFN0cmluZygzLCBvYmouZ2V0UGFzc3dvcmQoKSk7XG4gICAgICAgICAgICAgICAgICAgIHBzLnNldFN0cmluZyg0LCBvYmouZ2V0Um9sZSgpKTtcbiAgICAgICAgICAgICAgICAgICAgcHMuc2V0VGltZXN0YW1wKDUsIFRpbWVzdGFtcC52YWx1ZU9mKG9iai5nZXRDcmVhdGVfYXQoKSkpO1xuICAgICAgICAgICAgICAgICAgICBwcy5zZXRCb29sZWFuKDYsIHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIG5ldyBTcWxPcGVyYXRpb24oKSB7XG4gICAgICAgICAgICAgICAgQE92ZXJyaWRlXG4gICAgICAgICAgICAgICAgcHVibGljIFN0cmluZyBnZXRTcWwoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIklOU0VSVCBJTlRPIFNVQlNDUklCRVIgKHN1YnNjcmliZXJfaWQsIG5hbWUsIGFkZHJlc3MsIHBob25lLCB1c2VyX2lkKSBWQUxVRVMgKD8sID8sID8sID8sID8pXCI7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgQE92ZXJyaWRlXG4gICAgICAgICAgICAgICAgcHVibGljIHZvaWQgc2V0UGFyYW1ldGVycyhQcmVwYXJlZFN0YXRlbWVudCBwcykgdGhyb3dzIEV4Y2VwdGlvbiB7XG4gICAgICAgICAgICAgICAgICAgIHBzLnNldEludCgxLCBzdWJzY3JpYmVySWQpO1xuICAgICAgICAgICAgICAgICAgICBwcy5zZXRTdHJpbmcoMiwgb2JqLmdldEZ1bGxOYW1lKCkpO1xuICAgICAgICAgICAgICAgICAgICBwcy5zZXRTdHJpbmcoMywgb2JqLmdldEFkZHJlc3MoKSk7XG4gICAgICAgICAgICAgICAgICAgIHBzLnNldFN0cmluZyg0LCBvYmouZ2V0UGhvbmUoKSk7XG4gICAgICAgICAgICAgICAgICAgIHBzLnNldEludCg1LCB1c2VySWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBEYk9wZXJhdGlvbnMuZXhlY3V0ZVRyYW5zYWN0aW9uKG9wZXJhdGlvbnMsIFwixJDEg25nIGvDvSB0aMOgbmggY8O0bmchXCIpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgdm9pZCB1cGRhdGUoU3Vic2NyaWJlciBvYmopIHtcbiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpOyAvLyBHZW5lcmF0ZWQgZnJvbSBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ29kZS9HZW5lcmF0ZWRNZXRob2RCb2R5XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyB2b2lkIGRlbGV0ZShpbnQgaWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpOyAvLyBHZW5lcmF0ZWQgZnJvbSBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ29kZS9HZW5lcmF0ZWRNZXRob2RCb2R5XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBTdWJzY3JpYmVyIGdldEJ5SWQoaW50IGlkKSB7XG4gICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbihcIk5vdCBzdXBwb3J0ZWQgeWV0LlwiKTsgLy8gR2VuZXJhdGVkIGZyb20gbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NvZGUvR2VuZXJhdGVkTWV0aG9kQm9keVxuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxTdWJzY3JpYmVyPiBnZXRBbGwoKSB7XG4gICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbihcIk5vdCBzdXBwb3J0ZWQgeWV0LlwiKTsgLy8gR2VuZXJhdGVkIGZyb20gbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NvZGUvR2VuZXJhdGVkTWV0aG9kQm9keVxuICAgIH1cblxuXG59XG4uLi5cblBhdGg6IHNyYy9EQU8vRGJPcGVyYXRpb25zLmphdmFcbnBhY2thZ2UgREFPO1xuXG5pbXBvcnQgamF2YS5zcWwuQ29ubmVjdGlvbjtcbmltcG9ydCBqYXZhLnNxbC5QcmVwYXJlZFN0YXRlbWVudDtcbmltcG9ydCBqYXZhLnNxbC5SZXN1bHRTZXQ7XG5pbXBvcnQgamF2YS5zcWwuU3RhdGVtZW50O1xuaW1wb3J0IGphdmF4LnN3aW5nLkpPcHRpb25QYW5lO1xuXG5wdWJsaWMgY2xhc3MgRGJPcGVyYXRpb25zIHtcbiAgICBwdWJsaWMgc3RhdGljIHZvaWQgc2V0RGF0YU9yRGVsZXRlKFN0cmluZyBxdWVyeSwgU3RyaW5nIG1zZykge1xuICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgICAgICBTdGF0ZW1lbnQgc3QgPSBudWxsO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29ubiA9IENvbm5lY3Rpb25Qcm92aWRlci5nZXRDb25uKCk7XG4gICAgICAgICAgICBzdCA9IGNvbm4uY3JlYXRlU3RhdGVtZW50KCk7XG4gICAgICAgICAgICBzdC5leGVjdXRlVXBkYXRlKHF1ZXJ5KTtcblxuICAgICAgICAgICAgaWYoIW1zZy5lcXVhbHMoXCJcIikpIHtcbiAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBtc2csIFwiTWVzc2FnZVwiLCBKT3B0aW9uUGFuZS5JTkZPUk1BVElPTl9NRVNTQUdFKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGV4KSB7XG4gICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBleCwgXCJNZXNzYWdlXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAoc3QgIT0gbnVsbCkgc3QuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICBpZiAoY29ubiAhPSBudWxsKSBjb25uLmNsb3NlKCk7XG4gICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcHVibGljIHN0YXRpYyBSZXN1bHRTZXQgZ2V0RGF0YShTdHJpbmcgcXVlcnkpe1xuICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgICAgICBTdGF0ZW1lbnQgc3QgPSBudWxsO1xuICAgICAgICBSZXN1bHRTZXQgcnMgPSBudWxsO1xuICAgICAgICBcbiAgICAgICAgdHJ5e1xuICAgICAgICAgICAgY29ubiA9IENvbm5lY3Rpb25Qcm92aWRlci5nZXRDb25uKCk7XG4gICAgICAgICAgICBzdCA9IGNvbm4uY3JlYXRlU3RhdGVtZW50KCk7XG4gICAgICAgICAgICBycyA9IHN0LmV4ZWN1dGVRdWVyeShxdWVyeSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJldHVybiBycztcbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGV4KXtcbiAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIGV4LCBcIk1lc3NhZ2VcIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfSBcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGludCBnZXROZXh0SWQoU3RyaW5nIHRhYmxlTmFtZSwgU3RyaW5nIGlkQ29sdW1uTmFtZSkge1xuICAgICAgICBpbnQgbmV4dElkID0gMTtcbiAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcbiAgICAgICAgU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuICAgICAgICBSZXN1bHRTZXQgcnMgPSBudWxsO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25uID0gQ29ubmVjdGlvblByb3ZpZGVyLmdldENvbm4oKTtcbiAgICAgICAgICAgIHN0bXQgPSBjb25uLmNyZWF0ZVN0YXRlbWVudCgpO1xuICAgICAgICAgICAgU3RyaW5nIHF1ZXJ5ID0gXCJTRUxFQ1QgTUFYKFwiICsgaWRDb2x1bW5OYW1lICsgXCIpIEFTIG1heF9pZCBGUk9NIFwiICsgdGFibGVOYW1lO1xuICAgICAgICAgICAgcnMgPSBzdG10LmV4ZWN1dGVRdWVyeShxdWVyeSk7XG5cbiAgICAgICAgICAgIGlmIChycy5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICBpbnQgbWF4SWQgPSBycy5nZXRJbnQoXCJtYXhfaWRcIik7XG4gICAgICAgICAgICAgICAgbmV4dElkID0gbWF4SWQgKyAxO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgZSwgXCJFcnJvclwiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKHJzICE9IG51bGwpIHJzLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgaWYgKHN0bXQgIT0gbnVsbCkgc3RtdC5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIGlmIChjb25uICE9IG51bGwpIGNvbm4uY2xvc2UoKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBuZXh0SWQ7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBib29sZWFuIGV4ZWN1dGVUcmFuc2FjdGlvbihTcWxPcGVyYXRpb25bXSBvcGVyYXRpb25zLCBTdHJpbmcgc3VjY2Vzc01zZykge1xuICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgICAgICBib29sZWFuIHN1Y2Nlc3MgPSBmYWxzZTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29ubiA9IENvbm5lY3Rpb25Qcm92aWRlci5nZXRDb25uKCk7XG4gICAgICAgICAgICBjb25uLnNldEF1dG9Db21taXQoZmFsc2UpO1xuXG4gICAgICAgICAgICBmb3IgKFNxbE9wZXJhdGlvbiBvcGVyYXRpb24gOiBvcGVyYXRpb25zKSB7XG4gICAgICAgICAgICAgICAgUHJlcGFyZWRTdGF0ZW1lbnQgcHMgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQob3BlcmF0aW9uLmdldFNxbCgpKTtcbiAgICAgICAgICAgICAgICBvcGVyYXRpb24uc2V0UGFyYW1ldGVycyhwcyk7XG4gICAgICAgICAgICAgICAgcHMuZXhlY3V0ZVVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgIHBzLmNsb3NlKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbm4uY29tbWl0KCk7XG4gICAgICAgICAgICBzdWNjZXNzID0gdHJ1ZTtcblxuICAgICAgICAgICAgaWYgKHN1Y2Nlc3NNc2cgIT0gbnVsbCAmJiAhc3VjY2Vzc01zZy5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBzdWNjZXNzTXNnLCBcIlRow6BuaCBjw7RuZ1wiLCBKT3B0aW9uUGFuZS5JTkZPUk1BVElPTl9NRVNTQUdFKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbm4gIT0gbnVsbCkgY29ubi5yb2xsYmFjaygpO1xuICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIHJvbGxiYWNrRXgpIHtcbiAgICAgICAgICAgICAgICByb2xsYmFja0V4LnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcIkVycm9yOiBcIiArIGUuZ2V0TWVzc2FnZSgpLCBcIkzhu5dpXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbm4gIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBjb25uLnNldEF1dG9Db21taXQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbm4uY2xvc2UoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc3VjY2VzcztcbiAgICB9XG5cbiAgICBwdWJsaWMgaW50ZXJmYWNlIFNxbE9wZXJhdGlvbiB7XG4gICAgICAgIFN0cmluZyBnZXRTcWwoKTtcbiAgICAgICAgdm9pZCBzZXRQYXJhbWV0ZXJzKFByZXBhcmVkU3RhdGVtZW50IHBzKSB0aHJvd3MgRXhjZXB0aW9uO1xuICAgIH1cbn1cbi4uLlxuUGF0aDogc3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vRm9yZ290UGFzc3dvcmQuamF2YVxuLi4uXG4gICAgXG4gICAgcHVibGljIGJvb2xlYW4gdmFsaWRhdGVQaG9uZSgpe1xuICAgICAgICBTdHJpbmcgcGhvbmUgPSB0eHRQaG9uZS5nZXRUZXh0KCk7XG4gICAgICAgIGlmKHBob25lLmxlbmd0aCgpICE9IDEwIHx8ICFwaG9uZS5tYXRjaGVzKHBob25lUGF0dGVybikpIHtcbiAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwiVnVpIGzDsm5nIG5o4bqtcCDEkcO6bmcgxJHhu4tuaCBk4bqhbmcgc+G7kSDEkWnhu4duIHRob+G6oWkhXCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyBib29sZWFuIHZhbGlkYXRlRmllbGRzKCl7XG4gICAgICAgIFN0cmluZyBwYXNzd29yZCA9IHR4dFBhc3N3b3JkLmdldFRleHQoKTtcbiAgICAgICAgU3RyaW5nIGNvbmZpcm1QYXNzd29yZCA9IHR4dENvbmZpcm1QYXNzd29yZC5nZXRUZXh0KCk7XG5cbiAgICAgICAgaWYocGFzc3dvcmQuaXNFbXB0eSgpIHx8IGNvbmZpcm1QYXNzd29yZC5pc0VtcHR5KCkpe1xuICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXCJWdWkgbMOybmcga2jDtG5nIGLhu48gdHLhu5FuZyFcIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4uLi5cblxuICAgICAgICBidG5DaGFuZ2Uuc2V0Rm9udChuZXcgamF2YS5hd3QuRm9udChcIkFyaWFsXCIsIDEsIDE0KSk7IC8vIE5PSTE4TlxuICAgICAgICBidG5DaGFuZ2Uuc2V0SWNvbihuZXcgamF2YXguc3dpbmcuSW1hZ2VJY29uKGdldENsYXNzKCkuZ2V0UmVzb3VyY2UoXCIvSW1hZ2VzL3Jlc2V0LXBhc3N3b3JkLnBuZ1wiKSkpOyAvLyBOT0kxOE5cbiAgICAgICAgYnRuQ2hhbmdlLnNldFRleHQoXCLEkOG7lWkgbeG6rXQga2jhuql1XCIpO1xuICAgICAgICBidG5DaGFuZ2Uuc2V0Q3Vyc29yKG5ldyBqYXZhLmF3dC5DdXJzb3IoamF2YS5hd3QuQ3Vyc29yLkhBTkRfQ1VSU09SKSk7XG5cbiAgICAgICAgYnRuRXhpdC5zZXRGb250KG5ldyBqYXZhLmF3dC5Gb250KFwiQXJpYWxcIiwgMSwgMTQpKTsgLy8gTk9JMThOXG4gICAgICAgIGJ0bkV4aXQuc2V0SWNvbihuZXcgamF2YXguc3dpbmcuSW1hZ2VJY29uKGdldENsYXNzKCkuZ2V0UmVzb3VyY2UoXCIvSW1hZ2VzL2xvZ291dC5wbmdcIikpKTsgLy8gTk9JMThOXG4gICAgICAgIGJ0bkV4aXQuc2V0VGV4dChcIlRob8OhdFwiKTtcbiAgICAgICAgYnRuRXhpdC5zZXRDdXJzb3IobmV3IGphdmEuYXd0LkN1cnNvcihqYXZhLmF3dC5DdXJzb3IuSEFORF9DVVJTT1IpKTtcbiAgICAgICAgYnRuRXhpdC5hZGRBY3Rpb25MaXN0ZW5lcihuZXcgamF2YS5hd3QuZXZlbnQuQWN0aW9uTGlzdGVuZXIoKSB7XG4gICAgICAgICAgICBwdWJsaWMgdm9pZCBhY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7XG4gICAgICAgICAgICAgICAgYnRuRXhpdEFjdGlvblBlcmZvcm1lZChldnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbi4uLlxuUGF0aDogc3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vTG9naW4uamF2YVxuLypcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvTGljZW5zZXMvbGljZW5zZS1kZWZhdWx0LnR4dCB0byBjaGFuZ2UgdGhpcyBsaWNlbnNlXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0dVSUZvcm1zL0pGcmFtZS5qYXZhIHRvIGVkaXQgdGhpcyB0ZW1wbGF0ZVxuICovXG5wYWNrYWdlIGludGVybmV0Lm1hbmdlbWVudC5zeXN0ZW07XG5cbmltcG9ydCBEQU8uVXNlckRBTztcbmltcG9ydCBNb2RlbC5Vc2VyO1xuaW1wb3J0IGphdmF4LnN3aW5nLkpPcHRpb25QYW5lO1xuXG4vKipcbiAqXG4gKiBAYXV0aG9yIE5nb2MgVGhhb1xuICovXG5wdWJsaWMgY2xhc3MgTG9naW4gZXh0ZW5kcyBqYXZheC5zd2luZy5KRnJhbWUge1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBuZXcgZm9ybSBMb2dpblxuICAgICAqL1xuICAgIHB1YmxpYyBMb2dpbigpIHtcbiAgICAgICAgaW5pdENvbXBvbmVudHMoKTtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIHZvaWQgY2xlYXIoKXtcbiAgICAgICAgdHh0VXNlck5hbWUuc2V0VGV4dChcIlwiKTtcbiAgICAgICAgdHh0UGFzc3dvcmQuc2V0VGV4dChcIlwiKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYm9vbGVhbiB2YWxpZGF0ZUZpZWxkcygpe1xuICAgICAgICBTdHJpbmcgdXNlck5hbWUgPSB0eHRVc2VyTmFtZS5nZXRUZXh0KCk7XG4gICAgICAgIFN0cmluZyBwYXNzd29yZCA9IHR4dFBhc3N3b3JkLmdldFRleHQoKTtcblxuICAgICAgICBpZih1c2VyTmFtZS5pc0VtcHR5KCkgfHwgcGFzc3dvcmQuaXNFbXB0eSgpKXtcbiAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwiVnVpIGzDsm5nIGtow7RuZyBi4buPIHRy4buRbmchXCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuLi4uXG5cbiAgICAgICAgYnRuRm9yZ290UGFzc3dvcmQuc2V0Rm9udChuZXcgamF2YS5hd3QuRm9udChcIkFyaWFsXCIsIDEsIDE0KSk7IC8vIE5PSTE4TlxuICAgICAgICBidG5Gb3Jnb3RQYXNzd29yZC5zZXRJY29uKG5ldyBqYXZheC5zd2luZy5JbWFnZUljb24oZ2V0Q2xhc3MoKS5nZXRSZXNvdXJjZShcIi9JbWFnZXMvcmVzZXQtcGFzc3dvcmQucG5nXCIpKSk7IC8vIE5PSTE4TlxuICAgICAgICBidG5Gb3Jnb3RQYXNzd29yZC5zZXRUZXh0KFwiUXXDqm4gbeG6rXQga2jhuql1P1wiKTtcbiAgICAgICAgYnRuRm9yZ290UGFzc3dvcmQuc2V0Q3Vyc29yKG5ldyBqYXZhLmF3dC5DdXJzb3IoamF2YS5hd3QuQ3Vyc29yLkhBTkRfQ1VSU09SKSk7XG4gICAgICAgIGJ0bkZvcmdvdFBhc3N3b3JkLnNldEhvcml6b250YWxBbGlnbm1lbnQoamF2YXguc3dpbmcuU3dpbmdDb25zdGFudHMuTEVGVCk7XG4gICAgICAgIGJ0bkZvcmdvdFBhc3N3b3JkLmFkZEFjdGlvbkxpc3RlbmVyKG5ldyBqYXZhLmF3dC5ldmVudC5BY3Rpb25MaXN0ZW5lcigpIHtcbiAgICAgICAgICAgIHB1YmxpYyB2b2lkIGFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHtcbiAgICAgICAgICAgICAgICBidG5Gb3Jnb3RQYXNzd29yZEFjdGlvblBlcmZvcm1lZChldnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbi4uLlxuXG4gICAgcHJpdmF0ZSB2b2lkIGJ0bkxvZ2luQWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkxvZ2luQWN0aW9uUGVyZm9ybWVkXG4gICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxuICAgICAgICBpZih2YWxpZGF0ZUZpZWxkcygpKSB7XG4gICAgICAgICAgICB0cnl7XG4gICAgICAgICAgICAgICAgU3RyaW5nIHVzZXJuYW1lID0gdHh0VXNlck5hbWUuZ2V0VGV4dCgpLnRyaW0oKTtcbiAgICAgICAgICAgICAgICBTdHJpbmcgcGFzc3dvcmQgPSB0eHRQYXNzd29yZC5nZXRUZXh0KCkudHJpbSgpO1xuICAgICAgICBcbiAgICAgICAgICAgICAgICBVc2VyIHVzZXIgPSBudWxsO1xuICAgICAgICAgICAgICAgIGJvb2xlYW4gaXNTdWNjZXNzID0gVXNlckRBTy5sb2dpbih1c2VybmFtZSwgcGFzc3dvcmQpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmKGlzU3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyh0aGlzLCBcIsSQxINuZyBuaOG6rXAgdGjDoG5oIGPDtG5nIVwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLklORk9STUFUSU9OX01FU1NBR0UpO1xuLy8gICAgICAgICAgICAgICAgICAgIG5ldyBNYWluRnJhbWUoKS5zZXRWaXNpYmxlKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyh0aGlzLCBcIlNhaSB0w6puIMSRxINuZyBuaOG6rXAgaG/hurdjIG3huq10IGto4bqpdS5cIiwgXCJM4buXaVwiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgICAgICAgICAgICAgICB9XG4uLi5cblBhdGg6IHNyYy9Nb2RlbC9Vc2VyLmphdmFcbi4uLlxuXG5pbXBvcnQgamF2YS50aW1lLkxvY2FsRGF0ZVRpbWU7XG4vKipcbiAqXG4gKiBAYXV0aG9yIE5nb2MgVGhhb1xuICovXG5wdWJsaWMgY2xhc3MgVXNlciB7XG4gICAgcHJpdmF0ZSBpbnQgdXNlcl9pZDtcbiAgICBwcml2YXRlIFN0cmluZyB1c2VybmFtZTtcbiAgICBwcml2YXRlIFN0cmluZyBwYXNzd29yZDtcbiAgICBwcml2YXRlIFN0cmluZyByb2xlO1xuICAgIHByaXZhdGUgTG9jYWxEYXRlVGltZSBjcmVhdGVfYXQ7XG4gICAgcHJpdmF0ZSBib29sZWFuIGlzQWN0aXZlO1xuXG4gICAgcHVibGljIFVzZXIoKSB7XG4gICAgfVxuXG4gICAgcHVibGljIFVzZXIoaW50IHVzZXJfaWQsIFN0cmluZyB1c2VybmFtZSwgU3RyaW5nIHBhc3N3b3JkLCBTdHJpbmcgcm9sZSwgTG9jYWxEYXRlVGltZSBjcmVhdGVfYXQsIGJvb2xlYW4gaXNBY3RpdmUpIHtcbiAgICAgICAgdGhpcy51c2VyX2lkID0gdXNlcl9pZDtcbiAgICAgICAgdGhpcy51c2VybmFtZSA9IHVzZXJuYW1lO1xuICAgICAgICB0aGlzLnBhc3N3b3JkID0gcGFzc3dvcmQ7XG4gICAgICAgIHRoaXMucm9sZSA9IHJvbGU7XG4gICAgICAgIHRoaXMuY3JlYXRlX2F0ID0gY3JlYXRlX2F0O1xuICAgICAgICB0aGlzLmlzQWN0aXZlID0gaXNBY3RpdmU7XG4gICAgfVxuXG4gICAgcHVibGljIGludCBnZXRVc2VyX2lkKCkge1xuICAgICAgICByZXR1cm4gdXNlcl9pZDtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXRVc2VyX2lkKGludCB1c2VyX2lkKSB7XG4gICAgICAgIHRoaXMudXNlcl9pZCA9IHVzZXJfaWQ7XG4gICAgfVxuXG4gICAgcHVibGljIFN0cmluZyBnZXRVc2VybmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHVzZXJuYW1lO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHNldFVzZXJuYW1lKFN0cmluZyB1c2VybmFtZSkge1xuICAgICAgICB0aGlzLnVzZXJuYW1lID0gdXNlcm5hbWU7XG4gICAgfVxuXG4gICAgcHVibGljIFN0cmluZyBnZXRQYXNzd29yZCgpIHtcbiAgICAgICAgcmV0dXJuIHBhc3N3b3JkO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHNldFBhc3N3b3JkKFN0cmluZyBwYXNzd29yZCkge1xuICAgICAgICB0aGlzLnBhc3N3b3JkID0gcGFzc3dvcmQ7XG4gICAgfVxuXG4gICAgcHVibGljIFN0cmluZyBnZXRSb2xlKCkge1xuICAgICAgICByZXR1cm4gcm9sZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXRSb2xlKFN0cmluZyByb2xlKSB7XG4gICAgICAgIHRoaXMucm9sZSA9IHJvbGU7XG4gICAgfVxuXG4gICAgcHVibGljIExvY2FsRGF0ZVRpbWUgZ2V0Q3JlYXRlX2F0KCkge1xuICAgICAgICByZXR1cm4gY3JlYXRlX2F0O1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHNldENyZWF0ZV9hdChMb2NhbERhdGVUaW1lIGNyZWF0ZV9hdCkge1xuICAgICAgICB0aGlzLmNyZWF0ZV9hdCA9IGNyZWF0ZV9hdDtcbiAgICB9XG5cbiAgICBwdWJsaWMgYm9vbGVhbiBpc0lzQWN0aXZlKCkge1xuICAgICAgICByZXR1cm4gaXNBY3RpdmU7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgc2V0SXNBY3RpdmUoYm9vbGVhbiBpc0FjdGl2ZSkge1xuICAgICAgICB0aGlzLmlzQWN0aXZlID0gaXNBY3RpdmU7XG4gICAgfVxuICAgIFxufVxuLi4uXG5QYXRoOiBzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9TaWduVXAuamF2YVxuLypcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvTGljZW5zZXMvbGljZW5zZS1kZWZhdWx0LnR4dCB0byBjaGFuZ2UgdGhpcyBsaWNlbnNlXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0dVSUZvcm1zL0pGcmFtZS5qYXZhIHRvIGVkaXQgdGhpcyB0ZW1wbGF0ZVxuICovXG5wYWNrYWdlIGludGVybmV0Lm1hbmdlbWVudC5zeXN0ZW07XG5cbmltcG9ydCBEQU8uU3Vic2NyaWJlckRBTztcbmltcG9ydCBNb2RlbC5TdWJzY3JpYmVyO1xuaW1wb3J0IGphdmEudGltZS5Mb2NhbERhdGVUaW1lO1xuaW1wb3J0IGphdmF4LnN3aW5nLkpPcHRpb25QYW5lO1xuXG4vKipcbiAqXG4gKiBAYXV0aG9yIE5nb2MgVGhhb1xuICovXG5wdWJsaWMgY2xhc3MgU2lnblVwIGV4dGVuZHMgamF2YXguc3dpbmcuSkZyYW1lIHtcblxuICAgIHB1YmxpYyBTdHJpbmcgcGhvbmVQYXR0ZXJuID0gXCJeWzAtOV0qJFwiO1xuICAgIHByaXZhdGUgU3RyaW5nIERFRkFVTFRfUk9MRSA9IFwidXNlclwiO1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgbmV3IGZvcm0gU2lnbkluXG4gICAgICovXG4gICAgcHVibGljIFNpZ25VcCgpIHtcbiAgICAgICAgaW5pdENvbXBvbmVudHMoKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBjbGVhcigpe1xuICAgICAgICB0eHROYW1lLnNldFRleHQoXCJcIik7XG4gICAgICAgIHR4dFVzZXJOYW1lLnNldFRleHQoXCJcIik7XG4gICAgICAgIHR4dFBhc3N3b3JkLnNldFRleHQoXCJcIik7XG4gICAgICAgIHR4dEFkZHJlc3Muc2V0VGV4dChcIlwiKTtcbiAgICAgICAgdHh0UGhvbmUuc2V0VGV4dChcIlwiKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYm9vbGVhbiB2YWxpZGF0ZUZpZWxkcygpe1xuICAgICAgICBTdHJpbmcgbmFtZSA9IHR4dE5hbWUuZ2V0VGV4dCgpO1xuICAgICAgICBTdHJpbmcgdXNlck5hbWUgPSB0eHRVc2VyTmFtZS5nZXRUZXh0KCk7XG4gICAgICAgIFN0cmluZyBwYXNzd29yZCA9IHR4dFBhc3N3b3JkLmdldFRleHQoKTtcbiAgICAgICAgU3RyaW5nIGFkZHJlc3MgPSB0eHRBZGRyZXNzLmdldFRleHQoKTtcbiAgICAgICAgU3RyaW5nIHBob25lID0gdHh0UGhvbmUuZ2V0VGV4dCgpO1xuXG4gICAgICAgIGlmKG5hbWUuaXNFbXB0eSgpIHx8IHVzZXJOYW1lLmlzRW1wdHkoKSB8fCBwYXNzd29yZC5pc0VtcHR5KCkgfHwgYWRkcmVzcy5pc0VtcHR5KCkgfHwgcGhvbmUuaXNFbXB0eSgpKXtcbiAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwiVnVpIGzDsm5nIGtow7RuZyBi4buPIHRy4buRbmchXCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZihwaG9uZS5sZW5ndGgoKSAhPSAxMCB8fCAhcGhvbmUubWF0Y2hlcyhwaG9uZVBhdHRlcm4pKSB7XG4gICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcIlZ1aSBsw7JuZyBuaOG6rXAgxJHDum5nIMSR4buLbmggZOG6oW5nIHPhu5EgxJFp4buHbiB0aG/huqFpIVwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbi4uLlxuUGF0aDogc3JjL01vZGVsL1N1YnNjcmliZXIuamF2YVxuLi4uXG5cbi8qKlxuICpcbiAqIEBhdXRob3IgTmdvYyBUaGFvXG4gKi9cbnB1YmxpYyBjbGFzcyBTdWJzY3JpYmVyIGV4dGVuZHMgVXNlciB7XG4gICAgcHJpdmF0ZSBpbnQgc3Vic2NyaWJlcl9pZDtcbiAgICBwcml2YXRlIFN0cmluZyBmdWxsTmFtZTtcbiAgICBwcml2YXRlIFN0cmluZyBhZGRyZXNzO1xuICAgIHByaXZhdGUgU3RyaW5nIHBob25lO1xuICAgIFxuICAgIHB1YmxpYyBTdWJzY3JpYmVyKCkge1xuICAgIH1cblxuICAgIHB1YmxpYyBTdWJzY3JpYmVyKGludCBzdWJzY3JpYmVyX2lkLCBTdHJpbmcgZnVsbE5hbWUsIFN0cmluZyBhZGRyZXNzLCBTdHJpbmcgcGhvbmUpIHtcbiAgICAgICAgdGhpcy5zdWJzY3JpYmVyX2lkID0gc3Vic2NyaWJlcl9pZDtcbiAgICAgICAgdGhpcy5mdWxsTmFtZSA9IGZ1bGxOYW1lO1xuICAgICAgICB0aGlzLmFkZHJlc3MgPSBhZGRyZXNzO1xuICAgICAgICB0aGlzLnBob25lID0gcGhvbmU7XG4gICAgfVxuXG4gICAgcHVibGljIFN1YnNjcmliZXIoaW50IHN1YnNjcmliZXJfaWQsIFN0cmluZyBmdWxsTmFtZSwgU3RyaW5nIGFkZHJlc3MsIFN0cmluZyBwaG9uZSwgaW50IHVzZXJfaWQsIFN0cmluZyB1c2VybmFtZSwgU3RyaW5nIHBhc3N3b3JkLCBTdHJpbmcgcm9sZSwgTG9jYWxEYXRlVGltZSBjcmVhdGVfYXQsIGJvb2xlYW4gaXNBY3RpdmUpIHtcbiAgICAgICAgc3VwZXIodXNlcl9pZCwgdXNlcm5hbWUsIHBhc3N3b3JkLCByb2xlLCBjcmVhdGVfYXQsIGlzQWN0aXZlKTtcbiAgICAgICAgdGhpcy5zdWJzY3JpYmVyX2lkID0gc3Vic2NyaWJlcl9pZDtcbiAgICAgICAgdGhpcy5mdWxsTmFtZSA9IGZ1bGxOYW1lO1xuICAgICAgICB0aGlzLmFkZHJlc3MgPSBhZGRyZXNzO1xuICAgICAgICB0aGlzLnBob25lID0gcGhvbmU7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyBpbnQgZ2V0U3Vic2NyaWJlcl9pZCgpIHtcbiAgICAgICAgcmV0dXJuIHN1YnNjcmliZXJfaWQ7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgc2V0U3Vic2NyaWJlcl9pZChpbnQgc3Vic2NyaWJlcl9pZCkge1xuICAgICAgICB0aGlzLnN1YnNjcmliZXJfaWQgPSBzdWJzY3JpYmVyX2lkO1xuICAgIH1cblxuICAgIHB1YmxpYyBTdHJpbmcgZ2V0RnVsbE5hbWUoKSB7XG4gICAgICAgIHJldHVybiBmdWxsTmFtZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXRGdWxsTmFtZShTdHJpbmcgZnVsbE5hbWUpIHtcbiAgICAgICAgdGhpcy5mdWxsTmFtZSA9IGZ1bGxOYW1lO1xuICAgIH1cblxuICAgIHB1YmxpYyBTdHJpbmcgZ2V0QWRkcmVzcygpIHtcbiAgICAgICAgcmV0dXJuIGFkZHJlc3M7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgc2V0QWRkcmVzcyhTdHJpbmcgYWRkcmVzcykge1xuICAgICAgICB0aGlzLmFkZHJlc3MgPSBhZGRyZXNzO1xuICAgIH1cblxuICAgIHB1YmxpYyBTdHJpbmcgZ2V0UGhvbmUoKSB7XG4gICAgICAgIHJldHVybiBwaG9uZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXRQaG9uZShTdHJpbmcgcGhvbmUpIHtcbiAgICAgICAgdGhpcy5waG9uZSA9IHBob25lO1xuICAgIH1cbiAgICBcbiAgICBcbn1cbi4uLlxuUGF0aDogc3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vRm9yZ290UGFzc3dvcmQuZm9ybVxuLi4uXG4gICAgPENvbXBvbmVudCBjbGFzcz1cImphdmF4LnN3aW5nLkpCdXR0b25cIiBuYW1lPVwiYnRuQ2hhbmdlXCI+XG4gICAgICA8UHJvcGVydGllcz5cbiAgICAgICAgPFByb3BlcnR5IG5hbWU9XCJmb250XCIgdHlwZT1cImphdmEuYXd0LkZvbnRcIiBlZGl0b3I9XCJvcmcubmV0YmVhbnMuYmVhbmluZm8uZWRpdG9ycy5Gb250RWRpdG9yXCI+XG4gICAgICAgICAgPEZvbnQgbmFtZT1cIkFyaWFsXCIgc2l6ZT1cIjE0XCIgc3R5bGU9XCIxXCIvPlxuICAgICAgICA8L1Byb3BlcnR5PlxuICAgICAgICA8UHJvcGVydHkgbmFtZT1cImljb25cIiB0eXBlPVwiamF2YXguc3dpbmcuSWNvblwiIGVkaXRvcj1cIm9yZy5uZXRiZWFucy5tb2R1bGVzLmZvcm0uZWRpdG9yczIuSWNvbkVkaXRvclwiPlxuICAgICAgICAgIDxJbWFnZSBpY29uVHlwZT1cIjNcIiBuYW1lPVwiL0ltYWdlcy9yZXNldC1wYXNzd29yZC5wbmdcIi8+XG4gICAgICAgIDwvUHJvcGVydHk+XG4gICAgICAgIDxQcm9wZXJ0eSBuYW1lPVwidGV4dFwiIHR5cGU9XCJqYXZhLmxhbmcuU3RyaW5nXCIgdmFsdWU9XCImI3gxMTA7JiN4MWVkNTtpIG0mI3gxZWFkO3Qga2gmI3gxZWE5O3VcIi8+XG4gICAgICAgIDxQcm9wZXJ0eSBuYW1lPVwiY3Vyc29yXCIgdHlwZT1cImphdmEuYXd0LkN1cnNvclwiIGVkaXRvcj1cIm9yZy5uZXRiZWFucy5tb2R1bGVzLmZvcm0uZWRpdG9yczIuQ3Vyc29yRWRpdG9yXCI+XG4gICAgICAgICAgPENvbG9yIGlkPVwiSGFuZCBDdXJzb3JcIi8+XG4gICAgICAgIDwvUHJvcGVydHk+XG4gICAgICA8L1Byb3BlcnRpZXM+XG4gICAgPC9Db21wb25lbnQ+XG4gICAgPENvbXBvbmVudCBjbGFzcz1cImphdmF4LnN3aW5nLkpCdXR0b25cIiBuYW1lPVwiYnRuRXhpdFwiPlxuICAgICAgPFByb3BlcnRpZXM+XG4uLi5cblBhdGg6IHNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL0xvZ2luLmZvcm1cbi4uLlxuICAgICAgPFByb3BlcnRpZXM+XG4gICAgICAgIDxQcm9wZXJ0eSBuYW1lPVwiZm9udFwiIHR5cGU9XCJqYXZhLmF3dC5Gb250XCIgZWRpdG9yPVwib3JnLm5ldGJlYW5zLmJlYW5pbmZvLmVkaXRvcnMuRm9udEVkaXRvclwiPlxuICAgICAgICAgIDxGb250IG5hbWU9XCJBcmlhbFwiIHNpemU9XCIxNFwiIHN0eWxlPVwiMVwiLz5cbiAgICAgICAgPC9Qcm9wZXJ0eT5cbiAgICAgICAgPFByb3BlcnR5IG5hbWU9XCJpY29uXCIgdHlwZT1cImphdmF4LnN3aW5nLkljb25cIiBlZGl0b3I9XCJvcmcubmV0YmVhbnMubW9kdWxlcy5mb3JtLmVkaXQuLi4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1XzAxSGFNVjVoZnVUemkxOW9xb29WdGc3dSJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkU6L0hvY1RhcC8wMl9KQVZBLzAzX1Byb2plY3QvSW50ZXJuZXQgTWFuZ2VtZW50IFN5c3RlbSIsImZvbGRlclJvb3QiOiJFOi9Ib2NUYXAvMDJfSkFWQS8wM19Qcm9qZWN0L0ludGVybmV0IE1hbmdlbWVudCBTeXN0ZW0ifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJ0aW1lc3RhbXAiOiIyMDI1LTA1LTEzVDAxOjE5OjU0LjQyNloiLCJyZXNwb25zZV90ZXh0IjoiQmFzZWQgb24gdGhlIGluZm9ybWF0aW9uIGdhdGhlcmVkLCBJIG5vdyBoYXZlIGEgZ29vZCB1bmRlcnN0YW5kaW5nIG9mIHRoZSBjb2RlYmFzZSBzdHJ1Y3R1cmUuIEkgbmVlZCB0byBpbXBsZW1lbnQgdGhlIGV2ZW50IGhhbmRsaW5nIGZ1bmN0aW9ucyBmb3IgdGhlIEZvcmdvdFBhc3N3b3JkIGZvcm0uIExldCBtZSBjcmVhdGUgYSBkZXRhaWxlZCBwbGFuIGZvciB0aGlzIHRhc2suXG5cbiMjIERldGFpbGVkIFBsYW5cblxuMS4gKipJbXBsZW1lbnQgYnRuQ2hlY2sgQWN0aW9uTGlzdGVuZXIqKjpcbiAgIC0gVmFsaWRhdGUgdGhlIHBob25lIG51bWJlciBpbnB1dFxuICAgLSBTZWFyY2ggZm9yIGEgdXNlciB3aXRoIHRoZSBwcm92aWRlZCBwaG9uZSBudW1iZXIgaW4gdGhlIGRhdGFiYXNlXG4gICAtIElmIGZvdW5kLCBzaG93IHRoZSBwYXNzd29yZCBmaWVsZHMgYW5kIGNoYW5nZSBidXR0b25cbiAgIC0gSWYgbm90IGZvdW5kLCBzaG93IGFuIGVycm9yIG1lc3NhZ2VcblxuMi4gKipJbXBsZW1lbnQgYnRuQ2hhbmdlIEFjdGlvbkxpc3RlbmVyKio6XG4gICAtIFZhbGlkYXRlIHRoZSBuZXcgcGFzc3dvcmQgYW5kIGNvbmZpcm0gcGFzc3dvcmQgZmllbGRzXG4gICAtIENoZWNrIGlmIHBhc3N3b3JkcyBtYXRjaFxuICAgLSBVcGRhdGUgdGhlIHVzZXIncyBwYXNzd29yZCBpbiB0aGUgZGF0YWJhc2VcbiAgIC0gU2hvdyBzdWNjZXNzIG1lc3NhZ2UgYW5kIHJlZGlyZWN0IHRvIGxvZ2luIHBhZ2VcblxuMy4gKipDcmVhdGUgaGVscGVyIG1ldGhvZHMqKjpcbiAgIC0gTWV0aG9kIHRvIGZpbmQgYSB1c2VyIGJ5IHBob25lIG51bWJlclxuICAgLSBNZXRob2QgdG8gdXBkYXRlIGEgdXNlcidzIHBhc3N3b3JkXG5cbkxldCBtZSBzdGFydCBpbXBsZW1lbnRpbmcgdGhlc2UgY2hhbmdlczpcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiJmYzNjMWFkOC00ZjkzLTRjMGYtOWNmZi1jNzExYjczOTQxNzgiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1XzAxNzFzU0xtb1loZ2h3Mm5SMnhKNUZmRCIsInRvb2xfbmFtZSI6InN0ci1yZXBsYWNlLWVkaXRvciIsImlucHV0X2pzb24iOiJ7XCJjb21tYW5kXCI6IFwidmlld1wiLCBcInBhdGhcIjogXCJzcmMvREFPL1N1YnNjcmliZXJEQU8uamF2YVwifSIsIm1jcF9zZXJ2ZXJfbmFtZSI6IiIsIm1jcF90b29sX25hbWUiOiIifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6Ik5vdyBJIG5lZWQgdG8gY3JlYXRlIGEgbWV0aG9kIHRvIGZpbmQgYSB1c2VyIGJ5IHBob25lIG51bWJlciBhbmQgdXBkYXRlIGEgdXNlcidzIHBhc3N3b3JkLiBMZXQgbWUgaW1wbGVtZW50IHRoZXNlIG1ldGhvZHMgaW4gdGhlIGFwcHJvcHJpYXRlIERBTyBjbGFzczpcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IlRoZSBmb2xsb3dpbmcgY29kZSBzZWN0aW9ucyB3ZXJlIHJldHJpZXZlZDpcblBhdGg6IHNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL0ZvcmdvdFBhc3N3b3JkLmphdmFcbi8qXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0xpY2Vuc2VzL2xpY2Vuc2UtZGVmYXVsdC50eHQgdG8gY2hhbmdlIHRoaXMgbGljZW5zZVxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9HVUlGb3Jtcy9KRnJhbWUuamF2YSB0byBlZGl0IHRoaXMgdGVtcGxhdGVcbiAqL1xucGFja2FnZSBpbnRlcm5ldC5tYW5nZW1lbnQuc3lzdGVtO1xuXG5pbXBvcnQgamF2YXguc3dpbmcuSk9wdGlvblBhbmU7XG5cbi8qKlxuICpcbiAqIEBhdXRob3IgTmdvYyBUaGFvXG4gKi9cbnB1YmxpYyBjbGFzcyBGb3Jnb3RQYXNzd29yZCBleHRlbmRzIGphdmF4LnN3aW5nLkpGcmFtZSB7XG4gICAgcHVibGljIFN0cmluZyBwaG9uZVBhdHRlcm4gPSBcIl5bMC05XSokXCI7XG4gICAgXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBuZXcgZm9ybSBGb3Jnb3RQYXNzd29yZFxuICAgICAqL1xuICAgIHB1YmxpYyBGb3Jnb3RQYXNzd29yZCgpIHtcbiAgICAgICAgaW5pdENvbXBvbmVudHMoKTtcbiAgICAgICAgXG4gICAgICAgIGJ0bkV4aXQuc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgICAgIGJ0bkNoYW5nZS5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICAgICAgbGJOZXdQYXNzd29yZC5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICAgICAgbGJDb25maXJtUGFzc3dvcmQuc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgICAgIHR4dFBhc3N3b3JkLnNldFZpc2libGUoZmFsc2UpO1xuICAgICAgICB0eHRDb25maXJtUGFzc3dvcmQuc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgY2xlYXIoKXtcbiAgICAgICAgdHh0UGFzc3dvcmQuc2V0VGV4dChcIlwiKTtcbiAgICAgICAgdHh0UGhvbmUuc2V0VGV4dChcIlwiKTtcbiAgICAgICAgdHh0Q29uZmlybVBhc3N3b3JkLnNldFRleHQoXCJcIik7XG4gICAgICAgIFxuICAgICAgICBidG5FeGl0LnNldFZpc2libGUoZmFsc2UpO1xuICAgICAgICBidG5DaGFuZ2Uuc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgICAgIGxiTmV3UGFzc3dvcmQuc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgICAgIGxiQ29uZmlybVBhc3N3b3JkLnNldFZpc2libGUoZmFsc2UpO1xuICAgICAgICB0eHRQYXNzd29yZC5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICAgICAgdHh0Q29uZmlybVBhc3N3b3JkLnNldFZpc2libGUoZmFsc2UpO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgYm9vbGVhbiB2YWxpZGF0ZVBob25lKCl7XG4gICAgICAgIFN0cmluZyBwaG9uZSA9IHR4dFBob25lLmdldFRleHQoKTtcbiAgICAgICAgaWYocGhvbmUubGVuZ3RoKCkgIT0gMTAgfHwgIXBob25lLm1hdGNoZXMocGhvbmVQYXR0ZXJuKSkge1xuICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXCJWdWkgbMOybmcgbmjhuq1wIMSRw7puZyDEkeG7i25oIGThuqFuZyBz4buRIMSRaeG7h24gdGhv4bqhaSFcIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIGJvb2xlYW4gdmFsaWRhdGVGaWVsZHMoKXtcbiAgICAgICAgU3RyaW5nIHBhc3N3b3JkID0gdHh0UGFzc3dvcmQuZ2V0VGV4dCgpO1xuICAgICAgICBTdHJpbmcgY29uZmlybVBhc3N3b3JkID0gdHh0Q29uZmlybVBhc3N3b3JkLmdldFRleHQoKTtcblxuICAgICAgICBpZihwYXNzd29yZC5pc0VtcHR5KCkgfHwgY29uZmlybVBhc3N3b3JkLmlzRW1wdHkoKSl7XG4gICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcIlZ1aSBsw7JuZyBraMO0bmcgYuG7jyB0cuG7kW5nIVwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBjYWxsZWQgZnJvbSB3aXRoaW4gdGhlIGNvbnN0cnVjdG9yIHRvIGluaXRpYWxpemUgdGhlIGZvcm0uXG4gICAgICogV0FSTklORzogRG8gTk9UIG1vZGlmeSB0aGlzIGNvZGUuIFRoZSBjb250ZW50IG9mIHRoaXMgbWV0aG9kIGlzIGFsd2F5c1xuICAgICAqIHJlZ2VuZXJhdGVkIGJ5IHRoZSBGb3JtIEVkaXRvci5cbiAgICAgKi9cbiAgICBAU3VwcHJlc3NXYXJuaW5ncyhcInVuY2hlY2tlZFwiKVxuICAgIC8vIDxlZGl0b3ItZm9sZCBkZWZhdWx0c3RhdGU9XCJjb2xsYXBzZWRcIiBkZXNjPVwiR2VuZXJhdGVkIENvZGVcIj4vL0dFTi1CRUdJTjppbml0Q29tcG9uZW50c1xuICAgIHByaXZhdGUgdm9pZCBpbml0Q29tcG9uZW50cygpIHtcblxuICAgICAgICBqTGFiZWwxID0gbmV3IGphdmF4LnN3aW5nLkpMYWJlbCgpO1xuICAgICAgICBqTGFiZWwyID0gbmV3IGphdmF4LnN3aW5nLkpMYWJlbCgpO1xuICAgICAgICBsYk5ld1Bhc3N3b3JkID0gbmV3IGphdmF4LnN3aW5nLkpMYWJlbCgpO1xuICAgICAgICBsYkNvbmZpcm1QYXNzd29yZCA9IG5ldyBqYXZheC5zd2luZy5KTGFiZWwoKTtcbiAgICAgICAgalNlcGFyYXRvcjEgPSBuZXcgamF2YXguc3dpbmcuSlNlcGFyYXRvcigpO1xuICAgICAgICB0eHRQaG9uZSA9IG5ldyBqYXZheC5zd2luZy5KVGV4dEZpZWxkKCk7XG4gICAgICAgIGJ0bkNoZWNrID0gbmV3IGphdmF4LnN3aW5nLkpCdXR0b24oKTtcbiAgICAgICAgdHh0UGFzc3dvcmQgPSBuZXcgamF2YXguc3dpbmcuSlBhc3N3b3JkRmllbGQoKTtcbiAgICAgICAgdHh0Q29uZmlybVBhc3N3b3JkID0gbmV3IGphdmF4LnN3aW5nLkpQYXNzd29yZEZpZWxkKCk7XG4gICAgICAgIGJ0bkNoYW5nZSA9IG5ldyBqYXZheC5zd2luZy5KQnV0dG9uKCk7XG4gICAgICAgIGJ0bkV4aXQgPSBuZXcgamF2YXguc3dpbmcuSkJ1dHRvbigpO1xuXG4gICAgICAgIHNldERlZmF1bHRDbG9zZU9wZXJhdGlvbihqYXZheC5zd2luZy5XaW5kb3dDb25zdGFudHMuRVhJVF9PTl9DTE9TRSk7XG5cbiAgICAgICAgakxhYmVsMS5zZXRGb250KG5ldyBqYXZhLmF3dC5Gb250KFwiQXJpYWxcIiwgMSwgMzYpKTsgLy8gTk9JMThOXG4gICAgICAgIGpMYWJlbDEuc2V0Rm9yZWdyb3VuZChqYXZheC5zd2luZy5VSU1hbmFnZXIuZ2V0RGVmYXVsdHMoKS5nZXRDb2xvcihcIkFjdGlvbnMuWWVsbG93XCIpKTtcbiAgICAgICAgakxhYmVsMS5zZXRUZXh0KFwixJDhu5RJIE3huqxUIEtI4bqoVVwiKTtcblxuICAgICAgICBqTGFiZWwyLnNldEZvbnQobmV3IGphdmEuYXd0LkZvbnQoXCJBcmlhbFwiLCAxLCAxNCkpOyAvLyBOT0kxOE5cbiAgICAgICAgakxhYmVsMi5zZXRUZXh0KFwiU+G7kSDEkWnhu4duIHRob+G6oWk6IFwiKTtcblxuICAgICAgICBsYk5ld1Bhc3N3b3JkLnNldEZvbnQobmV3IGphdmEuYXd0LkZvbnQoXCJBcmlhbFwiLCAxLCAxNCkpOyAvLyBOT0kxOE5cbiAgICAgICAgbGJOZXdQYXNzd29yZC5zZXRUZXh0KFwiTeG6rXQga2jhuql1IG3hu5tpOlwiKTtcblxuICAgICAgICBsYkNvbmZpcm1QYXNzd29yZC5zZXRGb250KG5ldyBqYXZhLmF3dC5Gb250KFwiQXJpYWxcIiwgMSwgMTQpKTsgLy8gTk9JMThOXG4gICAgICAgIGxiQ29uZmlybVBhc3N3b3JkLnNldFRleHQoXCJYw6FjIG5o4bqtbiBt4bqtdCBraOG6qXU6XCIpO1xuXG4gICAgICAgIGJ0bkNoZWNrLnNldEZvbnQobmV3IGphdmEuYXd0LkZvbnQoXCJBcmlhbFwiLCAxLCAxNCkpOyAvLyBOT0kxOE5cbiAgICAgICAgYnRuQ2hlY2suc2V0SWNvbihuZXcgamF2YXguc3dpbmcuSW1hZ2VJY29uKGdldENsYXNzKCkuZ2V0UmVzb3VyY2UoXCIvSW1hZ2VzL3NlYXJjaC5wbmdcIikpKTsgLy8gTk9JMThOXG4gICAgICAgIGJ0bkNoZWNrLnNldFRleHQoXCJLaeG7g20gdHJhXCIpO1xuICAgICAgICBidG5DaGVjay5zZXRDdXJzb3IobmV3IGphdmEuYXd0LkN1cnNvcihqYXZhLmF3dC5DdXJzb3IuSEFORF9DVVJTT1IpKTtcblxuICAgICAgICBidG5DaGFuZ2Uuc2V0Rm9udChuZXcgamF2YS5hd3QuRm9udChcIkFyaWFsXCIsIDEsIDE0KSk7IC8vIE5PSTE4TlxuICAgICAgICBidG5DaGFuZ2Uuc2V0SWNvbihuZXcgamF2YXguc3dpbmcuSW1hZ2VJY29uKGdldENsYXNzKCkuZ2V0UmVzb3VyY2UoXCIvSW1hZ2VzL3Jlc2V0LXBhc3N3b3JkLnBuZ1wiKSkpOyAvLyBOT0kxOE5cbiAgICAgICAgYnRuQ2hhbmdlLnNldFRleHQoXCLEkOG7lWkgbeG6rXQga2jhuql1XCIpO1xuICAgICAgICBidG5DaGFuZ2Uuc2V0Q3Vyc29yKG5ldyBqYXZhLmF3dC5DdXJzb3IoamF2YS5hd3QuQ3Vyc29yLkhBTkRfQ1VSU09SKSk7XG5cbiAgICAgICAgYnRuRXhpdC5zZXRGb250KG5ldyBqYXZhLmF3dC5Gb250KFwiQXJpYWxcIiwgMSwgMTQpKTsgLy8gTk9JMThOXG4gICAgICAgIGJ0bkV4aXQuc2V0SWNvbihuZXcgamF2YXguc3dpbmcuSW1hZ2VJY29uKGdldENsYXNzKCkuZ2V0UmVzb3VyY2UoXCIvSW1hZ2VzL2xvZ291dC5wbmdcIikpKTsgLy8gTk9JMThOXG4gICAgICAgIGJ0bkV4aXQuc2V0VGV4dChcIlRob8OhdFwiKTtcbiAgICAgICAgYnRuRXhpdC5zZXRDdXJzb3IobmV3IGphdmEuYXd0LkN1cnNvcihqYXZhLmF3dC5DdXJzb3IuSEFORF9DVVJTT1IpKTtcbiAgICAgICAgYnRuRXhpdC5hZGRBY3Rpb25MaXN0ZW5lcihuZXcgamF2YS5hd3QuZXZlbnQuQWN0aW9uTGlzdGVuZXIoKSB7XG4gICAgICAgICAgICBwdWJsaWMgdm9pZCBhY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7XG4gICAgICAgICAgICAgICAgYnRuRXhpdEFjdGlvblBlcmZvcm1lZChldnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBqYXZheC5zd2luZy5Hcm91cExheW91dCBsYXlvdXQgPSBuZXcgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQoZ2V0Q29udGVudFBhbmUoKSk7XG4gICAgICAgIGdldENvbnRlbnRQYW5lKCkuc2V0TGF5b3V0KGxheW91dCk7XG4gICAgICAgIGxheW91dC5zZXRIb3Jpem9udGFsR3JvdXAoXG4gICAgICAgICAgICBsYXlvdXQuY3JlYXRlUGFyYWxsZWxHcm91cChqYXZheC5zd2luZy5Hcm91cExheW91dC5BbGlnbm1lbnQuTEVBRElORylcbiAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlU2VxdWVudGlhbEdyb3VwKClcbiAgICAgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVBhcmFsbGVsR3JvdXAoamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuQWxpZ25tZW50LkxFQURJTkcpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlU2VxdWVudGlhbEdyb3VwKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRHYXAoMTEwLCAxMTAsIDExMClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQoakxhYmVsMSkpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlU2VxdWVudGlhbEdyb3VwKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRHYXAoNjEsIDYxLCA2MSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQoalNlcGFyYXRvcjEsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFLCAzNzAsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFKSlcbiAgICAgICAgICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVTZXF1ZW50aWFsR3JvdXAoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZEdhcCg2MSwgNjEsIDYxKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChqTGFiZWwyKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZEdhcCg1NiwgNTYsIDU2KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudCh0eHRQaG9uZSwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUsIDIxMCwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUpKVxuICAgICAgICAgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVNlcXVlbnRpYWxHcm91cCgpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkR2FwKDYxLCA2MSwgNjEpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGxiTmV3UGFzc3dvcmQpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkR2FwKDU3LCA1NywgNTcpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVBhcmFsbGVsR3JvdXAoamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuQWxpZ25tZW50LkxFQURJTkcpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudCh0eHRQYXNzd29yZCwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUsIDIxMCwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVTZXF1ZW50aWFsR3JvdXAoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYWRkR2FwKDEwMiwgMTAyLCAxMDIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQoYnRuQ2hlY2spKSkpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlUGFyYWxsZWxHcm91cChqYXZheC5zd2luZy5Hcm91cExheW91dC5BbGlnbm1lbnQuVFJBSUxJTkcsIGZhbHNlKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVTZXF1ZW50aWFsR3JvdXAoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRHYXAoNjAsIDYwLCA2MClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGJ0bkV4aXQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFkZFByZWZlcnJlZEdhcChqYXZheC5zd2luZy5MYXlvdXRTdHlsZS5Db21wb25lbnRQbGFjZW1lbnQuUkVMQVRFRCwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuREVGQVVMVF9TSVpFLCBTaG9ydC5NQVhfVkFMVUUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChidG5DaGFuZ2UpKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVTZXF1ZW50aWFsR3JvdXAoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRHYXAoNjEsIDYxLCA2MSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGxiQ29uZmlybVBhc3N3b3JkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRHYXAoMTgsIDE4LCAxOClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KHR4dENvbmZpcm1QYXNzd29yZCwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUsIDIxMSwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUpKSkpXG4gICAgICAgICAgICAgICAgLmFkZEdhcCg2OSwgNjksIDY5KSlcbiAgICAgICAgKTtcbiAgICAgICAgbGF5b3V0LnNldFZlcnRpY2FsR3JvdXAoXG4gICAgICAgICAgICBsYXlvdXQuY3JlYXRlUGFyYWxsZWxHcm91cChqYXZheC5zd2luZy5Hcm91cExheW91dC5BbGlnbm1lbnQuTEVBRElORylcbiAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlU2VxdWVudGlhbEdyb3VwKClcbiAgICAgICAgICAgICAgICAuYWRkR2FwKDQwLCA0MCwgNDApXG4gICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChqTGFiZWwxKVxuICAgICAgICAgICAgICAgIC5hZGRHYXAoMTQsIDE0LCAxNClcbiAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGpTZXBhcmF0b3IxLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSwgMTAsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFKVxuICAgICAgICAgICAgICAgIC5hZGRHYXAoMTIsIDEyLCAxMilcbiAgICAgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVBhcmFsbGVsR3JvdXAoamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuQWxpZ25tZW50LkxFQURJTkcpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlU2VxdWVudGlhbEdyb3VwKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRHYXAoMywgMywgMylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQoakxhYmVsMikpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQodHh0UGhvbmUsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5ERUZBVUxUX1NJWkUsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFKSlcbiAgICAgICAgICAgICAgICAuYWRkR2FwKDE4LCAxOCwgMTgpXG4gICAgICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVQYXJhbGxlbEdyb3VwKGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LkFsaWdubWVudC5MRUFESU5HKVxuICAgICAgICAgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVNlcXVlbnRpYWxHcm91cCgpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkR2FwKDMsIDMsIDMpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGxiTmV3UGFzc3dvcmQpKVxuICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KHR4dFBhc3N3b3JkLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuREVGQVVMVF9TSVpFLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSlcbiAgICAgICAgICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVTZXF1ZW50aWFsR3JvdXAoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZEdhcCgyLCAyLCAyKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChidG5DaGVjaywgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUsIDMwLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSkpKVxuICAgICAgICAgICAgICAgIC5hZGRHYXAoOCwgOCwgOClcbiAgICAgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVBhcmFsbGVsR3JvdXAoamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuQWxpZ25tZW50LkxFQURJTkcpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlU2VxdWVudGlhbEdyb3VwKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRHYXAoMywgMywgMylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQobGJDb25maXJtUGFzc3dvcmQpKVxuICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KHR4dENvbmZpcm1QYXNzd29yZCwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LkRFRkFVTFRfU0laRSwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUpKVxuICAgICAgICAgICAgICAgIC5hZGRHYXAoMzAsIDMwLCAzMClcbiAgICAgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVBhcmFsbGVsR3JvdXAoamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuQWxpZ25tZW50LkJBU0VMSU5FKVxuICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGJ0bkV4aXQsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFLCAzMCwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQoYnRuQ2hhbmdlLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSwgMzAsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFKSkpXG4gICAgICAgICk7XG5cbiAgICAgICAgcGFjaygpO1xuICAgIH0vLyA8L2VkaXRvci1mb2xkPi8vR0VOLUVORDppbml0Q29tcG9uZW50c1xuXG4gICAgcHJpdmF0ZSB2b2lkIGJ0bkV4aXRBY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuRXhpdEFjdGlvblBlcmZvcm1lZFxuICAgICAgICAvLyBUT0RPIGFkZCB5b3VyIGhhbmRsaW5nIGNvZGUgaGVyZTpcbiAgICAgICAgaW50IHJlc3VsdCA9IEpPcHRpb25QYW5lLnNob3dDb25maXJtRGlhbG9nKG51bGwsIFwiQuG6oW4gY8OzIGNo4bqvYyBjaOG6r24gbXXhu5FuIHRob8OhdCBraMO0bmc/XCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuWUVTX05PX09QVElPTiwgSk9wdGlvblBhbmUuUVVFU1RJT05fTUVTU0FHRSk7XG4gICAgXG4gICAgICAgIGlmIChyZXN1bHQgPT0gSk9wdGlvblBhbmUuWUVTX09QVElPTikge1xuICAgICAgICAgICAgU3lzdGVtLmV4aXQoMCk7XG4gICAgICAgIH1cbiAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5FeGl0QWN0aW9uUGVyZm9ybWVkXG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gYXJncyB0aGUgY29tbWFuZCBsaW5lIGFyZ3VtZW50c1xuICAgICAqL1xuICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBtYWluKFN0cmluZyBhcmdzW10pIHtcbiAgICAgICAgLyogU2V0IHRoZSBOaW1idXMgbG9vayBhbmQgZmVlbCAqL1xuICAgICAgICAvLzxlZGl0b3ItZm9sZCBkZWZhdWx0c3RhdGU9XCJjb2xsYXBzZWRcIiBkZXNjPVwiIExvb2sgYW5kIGZlZWwgc2V0dGluZyBjb2RlIChvcHRpb25hbCkgXCI+XG4gICAgICAgIC8qIElmIE5pbWJ1cyAoaW50cm9kdWNlZCBpbiBKYXZhIFNFIDYpIGlzIG5vdCBhdmFpbGFibGUsIHN0YXkgd2l0aCB0aGUgZGVmYXVsdCBsb29rIGFuZCBmZWVsLlxuICAgICAgICAgKiBGb3IgZGV0YWlscyBzZWUgaHR0cDovL2Rvd25sb2FkLm9yYWNsZS5jb20vamF2YXNlL3R1dG9yaWFsL3Vpc3dpbmcvbG9va2FuZGZlZWwvcGxhZi5odG1sIFxuICAgICAgICAgKi9cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGZvciAoamF2YXguc3dpbmcuVUlNYW5hZ2VyLkxvb2tBbmRGZWVsSW5mbyBpbmZvIDogamF2YXguc3dpbmcuVUlNYW5hZ2VyLmdldEluc3RhbGxlZExvb2tBbmRGZWVscygpKSB7XG4gICAgICAgICAgICAgICAgaWYgKFwiTmltYnVzXCIuZXF1YWxzKGluZm8uZ2V0TmFtZSgpKSkge1xuICAgICAgICAgICAgICAgICAgICBqYXZheC5zd2luZy5VSU1hbmFnZXIuc2V0TG9va0FuZEZlZWwoaW5mby5nZXRDbGFzc05hbWUoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoQ2xhc3NOb3RGb3VuZEV4Y2VwdGlvbiBleCkge1xuICAgICAgICAgICAgamF2YS51dGlsLmxvZ2dpbmcuTG9nZ2VyLmdldExvZ2dlcihGb3Jnb3RQYXNzd29yZC5jbGFzcy5nZXROYW1lKCkpLmxvZyhqYXZhLnV0aWwubG9nZ2luZy5MZXZlbC5TRVZFUkUsIG51bGwsIGV4KTtcbiAgICAgICAgfSBjYXRjaCAoSW5zdGFudGlhdGlvbkV4Y2VwdGlvbiBleCkge1xuICAgICAgICAgICAgamF2YS51dGlsLmxvZ2dpbmcuTG9nZ2VyLmdldExvZ2dlcihGb3Jnb3RQYXNzd29yZC5jbGFzcy5nZXROYW1lKCkpLmxvZyhqYXZhLnV0aWwubG9nZ2luZy5MZXZlbC5TRVZFUkUsIG51bGwsIGV4KTtcbiAgICAgICAgfSBjYXRjaCAoSWxsZWdhbEFjY2Vzc0V4Y2VwdGlvbiBleCkge1xuICAgICAgICAgICAgamF2YS51dGlsLmxvZ2dpbmcuTG9nZ2VyLmdldExvZ2dlcihGb3Jnb3RQYXNzd29yZC5jbGFzcy5nZXROYW1lKCkpLmxvZyhqYXZhLnV0aWwubG9nZ2luZy5MZXZlbC5TRVZFUkUsIG51bGwsIGV4KTtcbiAgICAgICAgfSBjYXRjaCAoamF2YXguc3dpbmcuVW5zdXBwb3J0ZWRMb29rQW5kRmVlbEV4Y2VwdGlvbiBleCkge1xuICAgICAgICAgICAgamF2YS51dGlsLmxvZ2dpbmcuTG9nZ2VyLmdldExvZ2dlcihGb3Jnb3RQYXNzd29yZC5jbGFzcy5nZXROYW1lKCkpLmxvZyhqYXZhLnV0aWwubG9nZ2luZy5MZXZlbC5TRVZFUkUsIG51bGwsIGV4KTtcbiAgICAgICAgfVxuICAgICAgICAvLzwvZWRpdG9yLWZvbGQ+XG5cbiAgICAgICAgLyogQ3JlYXRlIGFuZCBkaXNwbGF5IHRoZSBmb3JtICovXG4gICAgICAgIGphdmEuYXd0LkV2ZW50UXVldWUuaW52b2tlTGF0ZXIobmV3IFJ1bm5hYmxlKCkge1xuICAgICAgICAgICAgcHVibGljIHZvaWQgcnVuKCkge1xuICAgICAgICAgICAgICAgIG5ldyBGb3Jnb3RQYXNzd29yZCgpLnNldFZpc2libGUodHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFZhcmlhYmxlcyBkZWNsYXJhdGlvbiAtIGRvIG5vdCBtb2RpZnkvL0dFTi1CRUdJTjp2YXJpYWJsZXNcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpCdXR0b24gYnRuQ2hhbmdlO1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkJ1dHRvbiBidG5DaGVjaztcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpCdXR0b24gYnRuRXhpdDtcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpMYWJlbCBqTGFiZWwxO1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkxhYmVsIGpMYWJlbDI7XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KU2VwYXJhdG9yIGpTZXBhcmF0b3IxO1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkxhYmVsIGxiQ29uZmlybVBhc3N3b3JkO1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkxhYmVsIGxiTmV3UGFzc3dvcmQ7XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KUGFzc3dvcmRGaWVsZCB0eHRDb25maXJtUGFzc3dvcmQ7XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KUGFzc3dvcmRGaWVsZCB0eHRQYXNzd29yZDtcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpUZXh0RmllbGQgdHh0UGhvbmU7XG4gICAgLy8gRW5kIG9mIHZhcmlhYmxlcyBkZWNsYXJhdGlvbi8vR0VOLUVORDp2YXJpYWJsZXNcbn1cbi4uLlxuUGF0aDogc3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vRm9yZ290UGFzc3dvcmQuZm9ybVxuPD94bWwgdmVyc2lvbj1cIjEuMFwiIGVuY29kaW5nPVwiVVRGLThcIiA/PlxuXG48Rm9ybSB2ZXJzaW9uPVwiMS4zXCIgbWF4VmVyc2lvbj1cIjEuOVwiIHR5cGU9XCJvcmcubmV0YmVhbnMubW9kdWxlcy5mb3JtLmZvcm1pbmZvLkpGcmFtZUZvcm1JbmZvXCI+XG4gIDxQcm9wZXJ0aWVzPlxuICAgIDxQcm9wZXJ0eSBuYW1lPVwiZGVmYXVsdENsb3NlT3BlcmF0aW9uXCIgdHlwZT1cImludFwiIHZhbHVlPVwiM1wiLz5cbiAgPC9Qcm9wZXJ0aWVzPlxuICA8U3ludGhldGljUHJvcGVydGllcz5cbiAgICA8U3ludGhldGljUHJvcGVydHkgbmFtZT1cImZvcm1TaXplUG9saWN5XCIgdHlwZT1cImludFwiIHZhbHVlPVwiMVwiLz5cbiAgICA8U3ludGhldGljUHJvcGVydHkgbmFtZT1cImdlbmVyYXRlQ2VudGVyXCIgdHlwZT1cImJvb2xlYW5cIiB2YWx1ZT1cImZhbHNlXCIvPlxuICA8L1N5bnRoZXRpY1Byb3BlcnRpZXM+XG4gIDxBdXhWYWx1ZXM+XG4gICAgPEF1eFZhbHVlIG5hbWU9XCJGb3JtU2V0dGluZ3NfYXV0b1Jlc291cmNpbmdcIiB0eXBlPVwiamF2YS5sYW5nLkludGVnZXJcIiB2YWx1ZT1cIjBcIi8+XG4gICAgPEF1eFZhbHVlIG5hbWU9XCJGb3JtU2V0dGluZ3NfYXV0b1NldENvbXBvbmVudE5hbWVcIiB0eXBlPVwiamF2YS5sYW5nLkJvb2xlYW5cIiB2YWx1ZT1cImZhbHNlXCIvPlxuICAgIDxBdXhWYWx1ZSBuYW1lPVwiRm9ybVNldHRpbmdzX2dlbmVyYXRlRlFOXCIgdHlwZT1cImphdmEubGFuZy5Cb29sZWFuXCIgdmFsdWU9XCJ0cnVlXCIvPlxuICAgIDxBdXhWYWx1ZSBuYW1lPVwiRm9ybVNldHRpbmdzX2dlbmVyYXRlTW5lbW9uaWNzQ29kZVwiIHR5cGU9XCJqYXZhLmxhbmcuQm9vbGVhblwiIHZhbHVlPVwiZmFsc2VcIi8+XG4uLi5cblxuICA8TGF5b3V0PlxuICAgIDxEaW1lbnNpb25MYXlvdXQgZGltPVwiMFwiPlxuICAgICAgPEdyb3VwIHR5cGU9XCIxMDNcIiBncm91cEFsaWdubWVudD1cIjBcIiBhdHRyaWJ1dGVzPVwiMFwiPlxuICAgICAgICAgIDxHcm91cCB0eXBlPVwiMTAyXCIgYXR0cmlidXRlcz1cIjBcIj5cbiAgICAgICAgICAgICAgPEdyb3VwIHR5cGU9XCIxMDNcIiBncm91cEFsaWdubWVudD1cIjBcIiBhdHRyaWJ1dGVzPVwiMFwiPlxuICAgICAgICAgICAgICAgICAgPEdyb3VwIHR5cGU9XCIxMDJcIiBhdHRyaWJ1dGVzPVwiMFwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxFbXB0eVNwYWNlIG1pbj1cIjExMFwiIHByZWY9XCIxMTBcIiBtYXg9XCItMlwiIGF0dHJpYnV0ZXM9XCIwXCIvPlxuICAgICAgICAgICAgICAgICAgICAgIDxDb21wb25lbnQgaWQ9XCJqTGFiZWwxXCIgbWluPVwiLTJcIiBtYXg9XCItMlwiIGF0dHJpYnV0ZXM9XCIwXCIvPlxuICAgICAgICAgICAgICAgICAgPC9Hcm91cD5cbiAgICAgICAgICAgICAgICAgIDxHcm91cCB0eXBlPVwiMTAyXCIgYXR0cmlidXRlcz1cIjBcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8RW1wdHlTcGFjZSBtaW49XCI2MVwiIHByZWY9XCI2MVwiIG1heD1cIi0yXCIgYXR0cmlidXRlcz1cIjBcIi8+XG4gICAgICAgICAgICAgICAgICAgICAgPENvbXBvbmVudCBpZD1cImpTZXBhcmF0b3IxXCIgbWluPVwiLTJcIiBwcmVmPVwiMzcwXCIgbWF4PVwiLTJcIiBhdHRyaWJ1dGVzPVwiMFwiLz5cbiAgICAgICAgICAgICAgICAgIDwvR3JvdXA+XG4gICAgICAgICAgICAgICAgICA8R3JvdXAgdHlwZT1cIjEwMlwiIGF0dHJpYnV0ZXM9XCIwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPEVtcHR5U3BhY2UgbWluPVwiNjFcIiBwcmVmPVwiNjFcIiBtYXg9XCItMlwiIGF0dHJpYnV0ZXM9XCIwXCIvPlxuICAgICAgICAgICAgICAgICAgICAgIDxDb21wb25lbnQgaWQ9XCJqTGFiZWwyXCIgbWluPVwiLTJcIiBtYXg9XCItMlwiIGF0dHJpYnV0ZXM9XCIwXCIvPlxuICAgICAgICAgICAgICAgICAgICAgIDxFbXB0eVNwYWNlIG1pbj1cIjU2XCIgcHJlZj1cIjU2XCIgbWF4PVwiLTJcIiBhdHRyaWJ1dGVzPVwiMFwiLz5cbi4uLlxuICAgICAgICAgICAgICA8R3JvdXAgdHlwZT1cIjEwM1wiIGdyb3VwQWxpZ25tZW50PVwiM1wiIGF0dHJpYnV0ZXM9XCIwXCI+XG4gICAgICAgICAgICAgICAgICA8Q29tcG9uZW50IGlkPVwiYnRuRXhpdFwiIGFsaWdubWVudD1cIjNcIiBtaW49XCItMlwiIHByZWY9XCIzMFwiIG1heD1cIi0yXCIgYXR0cmlidXRlcz1cIjBcIi8+XG4gICAgICAgICAgICAgICAgICA8Q29tcG9uZW50IGlkPVwiYnRuQ2hhbmdlXCIgYWxpZ25tZW50PVwiM1wiIG1pbj1cIi0yXCIgcHJlZj1cIjMwXCIgbWF4PVwiLTJcIiBhdHRyaWJ1dGVzPVwiMFwiLz5cbiAgICAgICAgICAgICAgPC9Hcm91cD5cbiAgICAgICAgICA8L0dyb3VwPlxuICAgICAgPC9Hcm91cD5cbiAgICA8L0RpbWVuc2lvbkxheW91dD5cbiAgPC9MYXlvdXQ+XG4gIDxTdWJDb21wb25lbnRzPlxuICAgIDxDb21wb25lbnQgY2xhc3M9XCJqYXZheC5zd2luZy5KTGFiZWxcIiBuYW1lPVwiakxhYmVsMVwiPlxuICAgICAgPFByb3BlcnRpZXM+XG4gICAgICAgIDxQcm9wZXJ0eSBuYW1lPVwiZm9udFwiIHR5cGU9XCJqYXZhLmF3dC5Gb250XCIgZWRpdG9yPVwib3JnLm5ldGJlYW5zLmJlYW5pbmZvLmVkaXRvcnMuRm9udEVkaXRvclwiPlxuICAgICAgICAgIDxGb250IG5hbWU9XCJBcmlhbFwiIHNpemU9XCIzNlwiIHN0eWxlPVwiMVwiLz5cbiAgICAgICAgPC9Qcm9wZXJ0eT5cbiAgICAgICAgPFByb3BlcnR5IG5hbWU9XCJmb3JlZ3JvdW5kXCIgdHlwZT1cImphdmEuYXd0LkNvbG9yXCIgZWRpdG9yPVwib3JnLm5ldGJlYW5zLmJlYW5pbmZvLmVkaXRvcnMuQ29sb3JFZGl0b3JcIj5cbiAgICAgICAgICA8Q29sb3IgYmx1ZT1cIjBcIiBncmVlbj1cImEyXCIgaWQ9XCJBY3Rpb25zLlllbGxvd1wiIHBhbGV0dGU9XCIzXCIgcmVkPVwiZWRcIiB0eXBlPVwicGFsZXR0ZVwiLz5cbiAgICAgICAgPC9Qcm9wZXJ0eT5cbiAgICAgICAgPFByb3BlcnR5IG5hbWU9XCJ0ZXh0XCIgdHlwZT1cImphdmEubGFuZy5TdHJpbmdcIiB2YWx1ZT1cIiYjeDExMDsmI3gxZWQ0O0kgTSYjeDFlYWM7VCBLSCYjeDFlYTg7VVwiLz5cbiAgICAgIDwvUHJvcGVydGllcz5cbiAgICA8L0NvbXBvbmVudD5cbiAgICA8Q29tcG9uZW50IGNsYXNzPVwiamF2YXguc3dpbmcuSkxhYmVsXCIgbmFtZT1cImpMYWJlbDJcIj5cbiAgICAgIDxQcm9wZXJ0aWVzPlxuICAgICAgICA8UHJvcGVydHkgbmFtZT1cImZvbnRcIiB0eXBlPVwiamF2YS5hd3QuRm9udFwiIGVkaXRvcj1cIm9yZy5uZXRiZWFucy5iZWFuaW5mby5lZGl0b3JzLkZvbnRFZGl0b3JcIj5cbiAgICAgICAgICA8Rm9udCBuYW1lPVwiQXJpYWxcIiBzaXplPVwiMTRcIiBzdHlsZT1cIjFcIi8+XG4gICAgICAgIDwvUHJvcGVydHk+XG4gICAgICAgIDxQcm9wZXJ0eSBuYW1lPVwidGV4dFwiIHR5cGU9XCJqYXZhLmxhbmcuU3RyaW5nXCIgdmFsdWU9XCJTJiN4MWVkMTsgJiN4MTExO2kmI3gxZWM3O24gdGhvJiN4MWVhMTtpOiBcIi8+XG4gICAgICA8L1Byb3BlcnRpZXM+XG4gICAgPC9Db21wb25lbnQ+XG4gICAgPENvbXBvbmVudCBjbGFzcz1cImphdmF4LnN3aW5nLkpMYWJlbFwiIG5hbWU9XCJsYk5ld1Bhc3N3b3JkXCI+XG4gICAgICA8UHJvcGVydGllcz5cbiAgICAgICAgPFByb3BlcnR5IG5hbWU9XCJmb250XCIgdHlwZT1cImphdmEuYXd0LkZvbnRcIiBlZGl0b3I9XCJvcmcubmV0YmVhbnMuYmVhbmluZm8uZWRpdG9ycy5Gb250RWRpdG9yXCI+XG4gICAgICAgICAgPEZvbnQgbmFtZT1cIkFyaWFsXCIgc2l6ZT1cIjE0XCIgc3R5bGU9XCIxXCIvPlxuICAgICAgICA8L1Byb3BlcnR5PlxuICAgICAgICA8UHJvcGVydHkgbmFtZT1cInRleHRcIiB0eXBlPVwiamF2YS5sYW5nLlN0cmluZ1wiIHZhbHVlPVwiTSYjeDFlYWQ7dCBraCYjeDFlYTk7dSBtJiN4MWVkYjtpOlwiLz5cbiAgICAgIDwvUHJvcGVydGllcz5cbiAgICA8L0NvbXBvbmVudD5cbiAgICA8Q29tcG9uZW50IGNsYXNzPVwiamF2YXguc3dpbmcuSkxhYmVsXCIgbmFtZT1cImxiQ29uZmlybVBhc3N3b3JkXCI+XG4gICAgICA8UHJvcGVydGllcz5cbiAgICAgICAgPFByb3BlcnR5IG5hbWU9XCJmb250XCIgdHlwZT1cImphdmEuYXd0LkZvbnRcIiBlZGl0b3I9XCJvcmcubmV0YmVhbnMuYmVhbmluZm8uZWRpdG9ycy5Gb250RWRpdG9yXCI+XG4gICAgICAgICAgPEZvbnQgbmFtZT1cIkFyaWFsXCIgc2l6ZT1cIjE0XCIgc3R5bGU9XCIxXCIvPlxuICAgICAgICA8L1Byb3BlcnR5PlxuICAgICAgICA8UHJvcGVydHkgbmFtZT1cInRleHRcIiB0eXBlPVwiamF2YS5sYW5nLlN0cmluZ1wiIHZhbHVlPVwiWCYjeGUxO2MgbmgmI3gxZWFkO24gbSYjeDFlYWQ7dCBraCYjeDFlYTk7dTpcIi8+XG4gICAgICA8L1Byb3BlcnRpZXM+XG4gICAgPC9Db21wb25lbnQ+XG4gICAgPENvbXBvbmVudCBjbGFzcz1cImphdmF4LnN3aW5nLkpTZXBhcmF0b3JcIiBuYW1lPVwialNlcGFyYXRvcjFcIj5cbiAgICA8L0NvbXBvbmVudD5cbiAgICA8Q29tcG9uZW50IGNsYXNzPVwiamF2YXguc3dpbmcuSlRleHRGaWVsZFwiIG5hbWU9XCJ0eHRQaG9uZVwiPlxuICAgIDwvQ29tcG9uZW50PlxuICAgIDxDb21wb25lbnQgY2xhc3M9XCJqYXZheC5zd2luZy5KQnV0dG9uXCIgbmFtZT1cImJ0bkNoZWNrXCI+XG4gICAgICA8UHJvcGVydGllcz5cbiAgICAgICAgPFByb3BlcnR5IG5hbWU9XCJmb250XCIgdHlwZT1cImphdmEuYXd0LkZvbnRcIiBlZGl0b3I9XCJvcmcubmV0YmVhbnMuYmVhbmluZm8uZWRpdG9ycy5Gb250RWRpdG9yXCI+XG4gICAgICAgICAgPEZvbnQgbmFtZT1cIkFyaWFsXCIgc2l6ZT1cIjE0XCIgc3R5bGU9XCIxXCIvPlxuICAgICAgICA8L1Byb3BlcnR5PlxuICAgICAgICA8UHJvcGVydHkgbmFtZT1cImljb25cIiB0eXBlPVwiamF2YXguc3dpbmcuSWNvblwiIGVkaXRvcj1cIm9yZy5uZXRiZWFucy5tb2R1bGVzLmZvcm0uZWRpdG9yczIuSWNvbkVkaXRvclwiPlxuICAgICAgICAgIDxJbWFnZSBpY29uVHlwZT1cIjNcIiBuYW1lPVwiL0ltYWdlcy9zZWFyY2gucG5nXCIvPlxuICAgICAgICA8L1Byb3BlcnR5PlxuICAgICAgICA8UHJvcGVydHkgbmFtZT1cInRleHRcIiB0eXBlPVwiamF2YS5sYW5nLlN0cmluZ1wiIHZhbHVlPVwiS2kmI3gxZWMzO20gdHJhXCIvPlxuICAgICAgICA8UHJvcGVydHkgbmFtZT1cImN1cnNvclwiIHR5cGU9XCJqYXZhLmF3dC5DdXJzb3JcIiBlZGl0b3I9XCJvcmcubmV0YmVhbnMubW9kdWxlcy5mb3JtLmVkaXRvcnMyLkN1cnNvckVkaXRvclwiPlxuICAgICAgICAgIDxDb2xvciBpZD1cIkhhbmQgQ3Vyc29yXCIvPlxuICAgICAgICA8L1Byb3BlcnR5PlxuICAgICAgPC9Qcm9wZXJ0aWVzPlxuICAgIDwvQ29tcG9uZW50PlxuICAgIDxDb21wb25lbnQgY2xhc3M9XCJqYXZheC5zd2luZy5KUGFzc3dvcmRGaWVsZFwiIG5hbWU9XCJ0eHRQYXNzd29yZFwiPlxuICAgIDwvQ29tcG9uZW50PlxuICAgIDxDb21wb25lbnQgY2xhc3M9XCJqYXZheC5zd2luZy5KUGFzc3dvcmRGaWVsZFwiIG5hbWU9XCJ0eHRDb25maXJtUGFzc3dvcmRcIj5cbiAgICA8L0NvbXBvbmVudD5cbi4uLlxuICAgICAgICA8UHJvcGVydHkgbmFtZT1cImZvbnRcIiB0eXBlPVwiamF2YS5hd3QuRm9udFwiIGVkaXRvcj1cIm9yZy5uZXRiZWFucy5iZWFuaW5mby5lZGl0b3JzLkZvbnRFZGl0b3JcIj5cbiAgICAgICAgICA8Rm9udCBuYW1lPVwiQXJpYWxcIiBzaXplPVwiMTRcIiBzdHlsZT1cIjFcIi8+XG4gICAgICAgIDwvUHJvcGVydHk+XG4gICAgICAgIDxQcm9wZXJ0eSBuYW1lPVwiaWNvblwiIHR5cGU9XCJqYXZheC5zd2luZy5JY29uXCIgZWRpdG9yPVwib3JnLm5ldGJlYW5zLm1vZHVsZXMuZm9ybS5lZGl0b3JzMi5JY29uRWRpdG9yXCI+XG4gICAgICAgICAgPEltYWdlIGljb25UeXBlPVwiM1wiIG5hbWU9XCIvSW1hZ2VzL2xvZ291dC5wbmdcIi8+XG4gICAgICAgIDwvUHJvcGVydHk+XG4gICAgICAgIDxQcm9wZXJ0eSBuYW1lPVwidGV4dFwiIHR5cGU9XCJqYXZhLmxhbmcuU3RyaW5nXCIgdmFsdWU9XCJUaG8mI3hlMTt0XCIvPlxuICAgICAgICA8UHJvcGVydHkgbmFtZT1cImN1cnNvclwiIHR5cGU9XCJqYXZhLmF3dC5DdXJzb3JcIiBlZGl0b3I9XCJvcmcubmV0YmVhbnMubW9kdWxlcy5mb3JtLmVkaXRvcnMyLkN1cnNvckVkaXRvclwiPlxuICAgICAgICAgIDxDb2xvciBpZD1cIkhhbmQgQ3Vyc29yXCIvPlxuICAgICAgICA8L1Byb3BlcnR5PlxuICAgICAgPC9Qcm9wZXJ0aWVzPlxuICAgICAgPEV2ZW50cz5cbiAgICAgICAgPEV2ZW50SGFuZGxlciBldmVudD1cImFjdGlvblBlcmZvcm1lZFwiIGxpc3RlbmVyPVwiamF2YS5hd3QuZXZlbnQuQWN0aW9uTGlzdGVuZXJcIiBwYXJhbWV0ZXJzPVwiamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnRcIiBoYW5kbGVyPVwiYnRuRXhpdEFjdGlvblBlcmZvcm1lZFwiLz5cbiAgICAgIDwvRXZlbnRzPlxuICAgIDwvQ29tcG9uZW50PlxuICA8L1N1YkNvbXBvbmVudHM+XG48L0Zvcm0+XG4uLi5cblBhdGg6IHNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL1NpZ25VcC5qYXZhXG4vKlxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9MaWNlbnNlcy9saWNlbnNlLWRlZmF1bHQudHh0IHRvIGNoYW5nZSB0aGlzIGxpY2Vuc2VcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvR1VJRm9ybXMvSkZyYW1lLmphdmEgdG8gZWRpdCB0aGlzIHRlbXBsYXRlXG4gKi9cbnBhY2thZ2UgaW50ZXJuZXQubWFuZ2VtZW50LnN5c3RlbTtcblxuaW1wb3J0IERBTy5TdWJzY3JpYmVyREFPO1xuaW1wb3J0IE1vZGVsLlN1YnNjcmliZXI7XG5pbXBvcnQgamF2YS50aW1lLkxvY2FsRGF0ZVRpbWU7XG5pbXBvcnQgamF2YXguc3dpbmcuSk9wdGlvblBhbmU7XG5cbi8qKlxuICpcbiAqIEBhdXRob3IgTmdvYyBUaGFvXG4gKi9cbnB1YmxpYyBjbGFzcyBTaWduVXAgZXh0ZW5kcyBqYXZheC5zd2luZy5KRnJhbWUge1xuXG4gICAgcHVibGljIFN0cmluZyBwaG9uZVBhdHRlcm4gPSBcIl5bMC05XSokXCI7XG4gICAgcHJpdmF0ZSBTdHJpbmcgREVGQVVMVF9ST0xFID0gXCJ1c2VyXCI7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBuZXcgZm9ybSBTaWduSW5cbiAgICAgKi9cbiAgICBwdWJsaWMgU2lnblVwKCkge1xuICAgICAgICBpbml0Q29tcG9uZW50cygpO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIGNsZWFyKCl7XG4gICAgICAgIHR4dE5hbWUuc2V0VGV4dChcIlwiKTtcbiAgICAgICAgdHh0VXNlck5hbWUuc2V0VGV4dChcIlwiKTtcbiAgICAgICAgdHh0UGFzc3dvcmQuc2V0VGV4dChcIlwiKTtcbiAgICAgICAgdHh0QWRkcmVzcy5zZXRUZXh0KFwiXCIpO1xuICAgICAgICB0eHRQaG9uZS5zZXRUZXh0KFwiXCIpO1xuICAgIH1cbi4uLlxuIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV8wMUxlem9IclVYaExndkNZQWF4em1oZkgifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJFOi9Ib2NUYXAvMDJfSkFWQS8wM19Qcm9qZWN0L0ludGVybmV0IE1hbmdlbWVudCBTeXN0ZW0iLCJmb2xkZXJSb290IjoiRTovSG9jVGFwLzAyX0pBVkEvMDNfUHJvamVjdC9JbnRlcm5ldCBNYW5nZW1lbnQgU3lzdGVtIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwidGltZXN0YW1wIjoiMjAyNS0wNS0xM1QwMToyMDowNC40NDRaIiwicmVzcG9uc2VfdGV4dCI6Ik5vdyBJIG5lZWQgdG8gY3JlYXRlIGEgbWV0aG9kIHRvIGZpbmQgYSB1c2VyIGJ5IHBob25lIG51bWJlciBhbmQgdXBkYXRlIGEgdXNlcidzIHBhc3N3b3JkLiBMZXQgbWUgaW1wbGVtZW50IHRoZXNlIG1ldGhvZHMgaW4gdGhlIGFwcHJvcHJpYXRlIERBTyBjbGFzczpcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiI3ZTcyYWIwMi0xNzQyLTRmZTYtOWI4My1kYWQ0NWI3MmIyYTUiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1XzAxNldhNjhWWjFueWhTb2c3UWpyRVhacCIsInRvb2xfbmFtZSI6InN0ci1yZXBsYWNlLWVkaXRvciIsImlucHV0X2pzb24iOiJ7XCJjb21tYW5kXCI6IFwic3RyX3JlcGxhY2VcIiwgXCJwYXRoXCI6IFwic3JjL0RBTy9TdWJzY3JpYmVyREFPLmphdmFcIiwgXCJzdHJfcmVwbGFjZV9lbnRyaWVzXCI6IFt7XCJvbGRfc3RyXCI6IFwiaW1wb3J0IE1vZGVsLlN1YnNjcmliZXI7XFxuaW1wb3J0IGphdmEudXRpbC5MaXN0O1xcbmltcG9ydCBqYXZhLnNxbC5QcmVwYXJlZFN0YXRlbWVudDtcXG5pbXBvcnQgamF2YS5zcWwuVGltZXN0YW1wO1xcbmltcG9ydCBEQU8uRGJPcGVyYXRpb25zLlNxbE9wZXJhdGlvbjtcIiwgXCJuZXdfc3RyXCI6IFwiaW1wb3J0IE1vZGVsLlN1YnNjcmliZXI7XFxuaW1wb3J0IGphdmEudXRpbC5MaXN0O1xcbmltcG9ydCBqYXZhLnNxbC5QcmVwYXJlZFN0YXRlbWVudDtcXG5pbXBvcnQgamF2YS5zcWwuUmVzdWx0U2V0O1xcbmltcG9ydCBqYXZhLnNxbC5UaW1lc3RhbXA7XFxuaW1wb3J0IERBTy5EYk9wZXJhdGlvbnMuU3FsT3BlcmF0aW9uO1wiLCBcIm9sZF9zdHJfc3RhcnRfbGluZV9udW1iZXJcIjogNywgXCJvbGRfc3RyX2VuZF9saW5lX251bWJlclwiOiAxMX0sIHtcIm9sZF9zdHJcIjogXCIgICAgcHVibGljIHN0YXRpYyBMaXN0PFN1YnNjcmliZXI+IGdldEFsbCgpIHtcXG4gICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbihcXFwiTm90IHN1cHBvcnRlZCB5ZXQuXFxcIik7IC8vIEdlbmVyYXRlZCBmcm9tIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9Db2RlL0dlbmVyYXRlZE1ldGhvZEJvZHlcXG4gICAgfVxcblxcblxcbn1cIiwgXCJuZXdfc3RyXCI6IFwiICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxTdWJzY3JpYmVyPiBnZXRBbGwoKSB7XFxuICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oXFxcIk5vdCBzdXBwb3J0ZWQgeWV0LlxcXCIpOyAvLyBHZW5lcmF0ZWQgZnJvbSBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ29kZS9HZW5lcmF0ZWRNZXRob2RCb2R5XFxuICAgIH1cXG4gICAgXFxuICAgIHB1YmxpYyBzdGF0aWMgU3Vic2NyaWJlciBnZXRCeVBob25lKFN0cmluZyBwaG9uZSkge1xcbiAgICAgICAgU3Vic2NyaWJlciBzdWJzY3JpYmVyID0gbnVsbDtcXG4gICAgICAgIHRyeSB7XFxuICAgICAgICAgICAgUmVzdWx0U2V0IHJzID0gRGJPcGVyYXRpb25zLmdldERhdGEoXFxcIlNFTEVDVCBzLiosIHUuKiBGUk9NIFNVQlNDUklCRVIgcyBKT0lOIFVTRVIgdSBPTiBzLnVzZXJfaWQgPSB1LnVzZXJfaWQgV0hFUkUgcy5waG9uZSA9ICdcXFwiICsgcGhvbmUgKyBcXFwiJ1xcXCIpO1xcbiAgICAgICAgICAgIGlmIChycy5uZXh0KCkpIHtcXG4gICAgICAgICAgICAgICAgc3Vic2NyaWJlciA9IG5ldyBTdWJzY3JpYmVyKCk7XFxuICAgICAgICAgICAgICAgIHN1YnNjcmliZXIuc2V0U3Vic2NyaWJlcl9pZChycy5nZXRJbnQoXFxcInN1YnNjcmliZXJfaWRcXFwiKSk7XFxuICAgICAgICAgICAgICAgIHN1YnNjcmliZXIuc2V0RnVsbE5hbWUocnMuZ2V0U3RyaW5nKFxcXCJuYW1lXFxcIikpO1xcbiAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLnNldEFkZHJlc3MocnMuZ2V0U3RyaW5nKFxcXCJhZGRyZXNzXFxcIikpO1xcbiAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLnNldFBob25lKHJzLmdldFN0cmluZyhcXFwicGhvbmVcXFwiKSk7XFxuICAgICAgICAgICAgICAgIHN1YnNjcmliZXIuc2V0VXNlcl9pZChycy5nZXRJbnQoXFxcInVzZXJfaWRcXFwiKSk7XFxuICAgICAgICAgICAgICAgIHN1YnNjcmliZXIuc2V0VXNlcm5hbWUocnMuZ2V0U3RyaW5nKFxcXCJ1c2VybmFtZVxcXCIpKTtcXG4gICAgICAgICAgICAgICAgc3Vic2NyaWJlci5zZXRQYXNzd29yZChycy5nZXRTdHJpbmcoXFxcInBhc3N3b3JkXFxcIikpO1xcbiAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLnNldFJvbGUocnMuZ2V0U3RyaW5nKFxcXCJyb2xlXFxcIikpO1xcbiAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLnNldElzQWN0aXZlKHJzLmdldEJvb2xlYW4oXFxcImlzQWN0aXZlXFxcIikpO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBleCkge1xcbiAgICAgICAgICAgIGV4LnByaW50U3RhY2tUcmFjZSgpO1xcbiAgICAgICAgfVxcbiAgICAgICAgcmV0dXJuIHN1YnNjcmliZXI7XFxuICAgIH1cXG4gICAgXFxuICAgIHB1YmxpYyBzdGF0aWMgYm9vbGVhbiB1cGRhdGVQYXNzd29yZChpbnQgdXNlcklkLCBTdHJpbmcgbmV3UGFzc3dvcmQpIHtcXG4gICAgICAgIHRyeSB7XFxuICAgICAgICAgICAgU3RyaW5nIHF1ZXJ5ID0gXFxcIlVQREFURSBVU0VSIFNFVCBwYXNzd29yZCA9ICdcXFwiICsgbmV3UGFzc3dvcmQgKyBcXFwiJyBXSEVSRSB1c2VyX2lkID0gXFxcIiArIHVzZXJJZDtcXG4gICAgICAgICAgICBEYk9wZXJhdGlvbnMuc2V0RGF0YU9yRGVsZXRlKHF1ZXJ5LCBcXFwiQ1xcdTFlYWRwIG5oXFx1MWVhZHQgbVxcdTFlYWR0IGtoXFx1MWVhOXUgdGhcXHUwMGUwbmggY1xcdTAwZjRuZyFcXFwiKTtcXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcXG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBleCkge1xcbiAgICAgICAgICAgIGV4LnByaW50U3RhY2tUcmFjZSgpO1xcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcXG4gICAgICAgIH1cXG4gICAgfVxcbn1cIiwgXCJvbGRfc3RyX3N0YXJ0X2xpbmVfbnVtYmVyXCI6IDc2LCBcIm9sZF9zdHJfZW5kX2xpbmVfbnVtYmVyXCI6IDgxfV19IiwibWNwX3NlcnZlcl9uYW1lIjoiIiwibWNwX3Rvb2xfbmFtZSI6IiJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiTm93IEknbGwgYWRkIHRoZSBtZXRob2RzIHRvIGZpbmQgYSBzdWJzY3JpYmVyIGJ5IHBob25lIG51bWJlciBhbmQgdXBkYXRlIGEgdXNlcidzIHBhc3N3b3JkOlxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiSGVyZSdzIHRoZSByZXN1bHQgb2YgcnVubmluZyBgY2F0IC1uYCBvbiBzcmMvREFPL1N1YnNjcmliZXJEQU8uamF2YTpcbiAgICAgMVx0LypcbiAgICAgMlx0ICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9MaWNlbnNlcy9saWNlbnNlLWRlZmF1bHQudHh0IHRvIGNoYW5nZSB0aGlzIGxpY2Vuc2VcbiAgICAgM1x0ICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NsYXNzLmphdmEgdG8gZWRpdCB0aGlzIHRlbXBsYXRlXG4gICAgIDRcdCAqL1xuICAgICA1XHRwYWNrYWdlIERBTztcbiAgICAgNlx0XG4gICAgIDdcdGltcG9ydCBNb2RlbC5TdWJzY3JpYmVyO1xuICAgICA4XHRpbXBvcnQgamF2YS51dGlsLkxpc3Q7XG4gICAgIDlcdGltcG9ydCBqYXZhLnNxbC5QcmVwYXJlZFN0YXRlbWVudDtcbiAgICAxMFx0aW1wb3J0IGphdmEuc3FsLlRpbWVzdGFtcDtcbiAgICAxMVx0aW1wb3J0IERBTy5EYk9wZXJhdGlvbnMuU3FsT3BlcmF0aW9uO1xuICAgIDEyXHRcbiAgICAxM1x0LyoqXG4gICAgMTRcdCAqXG4gICAgMTVcdCAqIEBhdXRob3IgTmdvYyBUaGFvXG4gICAgMTZcdCAqL1xuICAgIDE3XHRwdWJsaWMgY2xhc3MgU3Vic2NyaWJlckRBT3tcbiAgICAxOFx0XG4gICAgMTlcdCAgICBwdWJsaWMgc3RhdGljIHZvaWQgaW5zZXJ0KGZpbmFsIFN1YnNjcmliZXIgb2JqKSB7XG4gICAgMjBcdCAgICAgICAgZmluYWwgaW50IHVzZXJJZCA9IERiT3BlcmF0aW9ucy5nZXROZXh0SWQoXCJVU0VSXCIsIFwidXNlcl9pZFwiKTtcbiAgICAyMVx0ICAgICAgICBmaW5hbCBpbnQgc3Vic2NyaWJlcklkID0gRGJPcGVyYXRpb25zLmdldE5leHRJZChcIlNVQlNDUklCRVJcIiwgXCJzdWJzY3JpYmVyX2lkXCIpO1xuICAgIDIyXHRcbiAgICAyM1x0ICAgICAgICBvYmouc2V0VXNlcl9pZCh1c2VySWQpO1xuICAgIDI0XHQgICAgICAgIG9iai5zZXRTdWJzY3JpYmVyX2lkKHN1YnNjcmliZXJJZCk7XG4gICAgMjVcdFxuICAgIDI2XHQgICAgICAgIFNxbE9wZXJhdGlvbltdIG9wZXJhdGlvbnMgPSBuZXcgU3FsT3BlcmF0aW9uW10ge1xuICAgIDI3XHQgICAgICAgICAgICBuZXcgU3FsT3BlcmF0aW9uKCkge1xuICAgIDI4XHQgICAgICAgICAgICAgICAgQE92ZXJyaWRlXG4gICAgMjlcdCAgICAgICAgICAgICAgICBwdWJsaWMgU3RyaW5nIGdldFNxbCgpIHtcbiAgICAzMFx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJJTlNFUlQgSU5UTyBVU0VSKHVzZXJfaWQsIHVzZXJuYW1lLCBwYXNzd29yZCwgcm9sZSwgY3JlYXRlZF9hdCwgaXNBY3RpdmUpIFZBTFVFUyAoPywgPywgPywgPywgPywgPylcIjtcbiAgICAzMVx0ICAgICAgICAgICAgICAgIH1cbiAgICAzMlx0XG4gICAgMzNcdCAgICAgICAgICAgICAgICBAT3ZlcnJpZGVcbiAgICAzNFx0ICAgICAgICAgICAgICAgIHB1YmxpYyB2b2lkIHNldFBhcmFtZXRlcnMoUHJlcGFyZWRTdGF0ZW1lbnQgcHMpIHRocm93cyBFeGNlcHRpb24ge1xuICAgIDM1XHQgICAgICAgICAgICAgICAgICAgIHBzLnNldEludCgxLCB1c2VySWQpO1xuICAgIDM2XHQgICAgICAgICAgICAgICAgICAgIHBzLnNldFN0cmluZygyLCBvYmouZ2V0VXNlcm5hbWUoKSk7XG4gICAgMzdcdCAgICAgICAgICAgICAgICAgICAgcHMuc2V0U3RyaW5nKDMsIG9iai5nZXRQYXNzd29yZCgpKTtcbiAgICAzOFx0ICAgICAgICAgICAgICAgICAgICBwcy5zZXRTdHJpbmcoNCwgb2JqLmdldFJvbGUoKSk7XG4gICAgMzlcdCAgICAgICAgICAgICAgICAgICAgcHMuc2V0VGltZXN0YW1wKDUsIFRpbWVzdGFtcC52YWx1ZU9mKG9iai5nZXRDcmVhdGVfYXQoKSkpO1xuICAgIDQwXHQgICAgICAgICAgICAgICAgICAgIHBzLnNldEJvb2xlYW4oNiwgdHJ1ZSk7XG4gICAgNDFcdCAgICAgICAgICAgICAgICB9XG4gICAgNDJcdCAgICAgICAgICAgIH0sXG4gICAgNDNcdFxuICAgIDQ0XHQgICAgICAgICAgICBuZXcgU3FsT3BlcmF0aW9uKCkge1xuICAgIDQ1XHQgICAgICAgICAgICAgICAgQE92ZXJyaWRlXG4gICAgNDZcdCAgICAgICAgICAgICAgICBwdWJsaWMgU3RyaW5nIGdldFNxbCgpIHtcbiAgICA0N1x0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJJTlNFUlQgSU5UTyBTVUJTQ1JJQkVSIChzdWJzY3JpYmVyX2lkLCBuYW1lLCBhZGRyZXNzLCBwaG9uZSwgdXNlcl9pZCkgVkFMVUVTICg/LCA/LCA/LCA/LCA/KVwiO1xuICAgIDQ4XHQgICAgICAgICAgICAgICAgfVxuICAgIDQ5XHRcbiAgICA1MFx0ICAgICAgICAgICAgICAgIEBPdmVycmlkZVxuICAgIDUxXHQgICAgICAgICAgICAgICAgcHVibGljIHZvaWQgc2V0UGFyYW1ldGVycyhQcmVwYXJlZFN0YXRlbWVudCBwcykgdGhyb3dzIEV4Y2VwdGlvbiB7XG4gICAgNTJcdCAgICAgICAgICAgICAgICAgICAgcHMuc2V0SW50KDEsIHN1YnNjcmliZXJJZCk7XG4gICAgNTNcdCAgICAgICAgICAgICAgICAgICAgcHMuc2V0U3RyaW5nKDIsIG9iai5nZXRGdWxsTmFtZSgpKTtcbiAgICA1NFx0ICAgICAgICAgICAgICAgICAgICBwcy5zZXRTdHJpbmcoMywgb2JqLmdldEFkZHJlc3MoKSk7XG4gICAgNTVcdCAgICAgICAgICAgICAgICAgICAgcHMuc2V0U3RyaW5nKDQsIG9iai5nZXRQaG9uZSgpKTtcbiAgICA1Nlx0ICAgICAgICAgICAgICAgICAgICBwcy5zZXRJbnQoNSwgdXNlcklkKTtcbiAgICA1N1x0ICAgICAgICAgICAgICAgIH1cbiAgICA1OFx0ICAgICAgICAgICAgfVxuICAgIDU5XHQgICAgICAgIH07XG4gICAgNjBcdFxuICAgIDYxXHQgICAgICAgIERiT3BlcmF0aW9ucy5leGVjdXRlVHJhbnNhY3Rpb24ob3BlcmF0aW9ucywgXCLEkMSDbmcga8O9IHRow6BuaCBjw7RuZyFcIik7XG4gICAgNjJcdCAgICB9XG4gICAgNjNcdFxuICAgIDY0XHQgICAgcHVibGljIHN0YXRpYyB2b2lkIHVwZGF0ZShTdWJzY3JpYmVyIG9iaikge1xuICAgIDY1XHQgICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbihcIk5vdCBzdXBwb3J0ZWQgeWV0LlwiKTsgLy8gR2VuZXJhdGVkIGZyb20gbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NvZGUvR2VuZXJhdGVkTWV0aG9kQm9keVxuICAgIDY2XHQgICAgfVxuICAgIDY3XHRcbiAgICA2OFx0ICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBkZWxldGUoaW50IGlkKSB7XG4gICAgNjlcdCAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpOyAvLyBHZW5lcmF0ZWQgZnJvbSBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ29kZS9HZW5lcmF0ZWRNZXRob2RCb2R5XG4gICAgNzBcdCAgICB9XG4gICAgNzFcdFxuICAgIDcyXHQgICAgcHVibGljIHN0YXRpYyBTdWJzY3JpYmVyIGdldEJ5SWQoaW50IGlkKSB7XG4gICAgNzNcdCAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpOyAvLyBHZW5lcmF0ZWQgZnJvbSBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ29kZS9HZW5lcmF0ZWRNZXRob2RCb2R5XG4gICAgNzRcdCAgICB9XG4gICAgNzVcdFxuICAgIDc2XHQgICAgcHVibGljIHN0YXRpYyBMaXN0PFN1YnNjcmliZXI+IGdldEFsbCgpIHtcbiAgICA3N1x0ICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oXCJOb3Qgc3VwcG9ydGVkIHlldC5cIik7IC8vIEdlbmVyYXRlZCBmcm9tIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9Db2RlL0dlbmVyYXRlZE1ldGhvZEJvZHlcbiAgICA3OFx0ICAgIH1cbiAgICA3OVx0XG4gICAgODBcdFxuICAgIDgxXHR9XG4gICAgODJcdFxuVG90YWwgbGluZXMgaW4gZmlsZTogODJcbiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfMDE3MXNTTG1vWWhnaHcyblIyeEo1RmZEIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiRTovSG9jVGFwLzAyX0pBVkEvMDNfUHJvamVjdC9JbnRlcm5ldCBNYW5nZW1lbnQgU3lzdGVtIiwiZm9sZGVyUm9vdCI6IkU6L0hvY1RhcC8wMl9KQVZBLzAzX1Byb2plY3QvSW50ZXJuZXQgTWFuZ2VtZW50IFN5c3RlbSJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInRpbWVzdGFtcCI6IjIwMjUtMDUtMTNUMDE6MjA6MDguNTg0WiIsInJlc3BvbnNlX3RleHQiOiJOb3cgSSdsbCBhZGQgdGhlIG1ldGhvZHMgdG8gZmluZCBhIHN1YnNjcmliZXIgYnkgcGhvbmUgbnVtYmVyIGFuZCB1cGRhdGUgYSB1c2VyJ3MgcGFzc3dvcmQ6XG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiODA3YzdiNTYtZjg0MS00YTc3LWI1N2EtMTkzZmI1OTg3M2M2IiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV8wMUEyRjY5eWt0RFdhYWdUV1BHd0doZmEiLCJ0b29sX25hbWUiOiJzdHItcmVwbGFjZS1lZGl0b3IiLCJpbnB1dF9qc29uIjoie1wiY29tbWFuZFwiOiBcInN0cl9yZXBsYWNlXCIsIFwicGF0aFwiOiBcInNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL0ZvcmdvdFBhc3N3b3JkLmphdmFcIiwgXCJzdHJfcmVwbGFjZV9lbnRyaWVzXCI6IFt7XCJvbGRfc3RyXCI6IFwicGFja2FnZSBpbnRlcm5ldC5tYW5nZW1lbnQuc3lzdGVtO1xcblxcbmltcG9ydCBqYXZheC5zd2luZy5KT3B0aW9uUGFuZTtcIiwgXCJuZXdfc3RyXCI6IFwicGFja2FnZSBpbnRlcm5ldC5tYW5nZW1lbnQuc3lzdGVtO1xcblxcbmltcG9ydCBEQU8uU3Vic2NyaWJlckRBTztcXG5pbXBvcnQgTW9kZWwuU3Vic2NyaWJlcjtcXG5pbXBvcnQgamF2YXguc3dpbmcuSk9wdGlvblBhbmU7XCIsIFwib2xkX3N0cl9zdGFydF9saW5lX251bWJlclwiOiA1LCBcIm9sZF9zdHJfZW5kX2xpbmVfbnVtYmVyXCI6IDd9LCB7XCJvbGRfc3RyXCI6IFwicHVibGljIGNsYXNzIEZvcmdvdFBhc3N3b3JkIGV4dGVuZHMgamF2YXguc3dpbmcuSkZyYW1lIHtcIiwgXCJuZXdfc3RyXCI6IFwicHVibGljIGNsYXNzIEZvcmdvdFBhc3N3b3JkIGV4dGVuZHMgamF2YXguc3dpbmcuSkZyYW1lIHtcXG4gICAgcHJpdmF0ZSBTdWJzY3JpYmVyIGN1cnJlbnRTdWJzY3JpYmVyID0gbnVsbDtcIiwgXCJvbGRfc3RyX3N0YXJ0X2xpbmVfbnVtYmVyXCI6IDEzLCBcIm9sZF9zdHJfZW5kX2xpbmVfbnVtYmVyXCI6IDEzfSwge1wib2xkX3N0clwiOiBcIiAgICBwdWJsaWMgYm9vbGVhbiB2YWxpZGF0ZUZpZWxkcygpe1xcbiAgICAgICAgU3RyaW5nIHBhc3N3b3JkID0gdHh0UGFzc3dvcmQuZ2V0VGV4dCgpO1xcbiAgICAgICAgU3RyaW5nIGNvbmZpcm1QYXNzd29yZCA9IHR4dENvbmZpcm1QYXNzd29yZC5nZXRUZXh0KCk7XFxuXFxuICAgICAgICBpZihwYXNzd29yZC5pc0VtcHR5KCkgfHwgY29uZmlybVBhc3N3b3JkLmlzRW1wdHkoKSl7XFxuICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXFxcIlZ1aSBsXFx1MDBmMm5nIGtoXFx1MDBmNG5nIGJcXHUxZWNmIHRyXFx1MWVkMW5nIVxcXCIsIFxcXCJUaFxcdTAwZjRuZyBiXFx1MDBlMW9cXFwiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XFxuICAgICAgICB9XFxuICAgICAgICByZXR1cm4gdHJ1ZTtcXG4gICAgfVwiLCBcIm5ld19zdHJcIjogXCIgICAgcHVibGljIGJvb2xlYW4gdmFsaWRhdGVGaWVsZHMoKXtcXG4gICAgICAgIFN0cmluZyBwYXNzd29yZCA9IHR4dFBhc3N3b3JkLmdldFRleHQoKTtcXG4gICAgICAgIFN0cmluZyBjb25maXJtUGFzc3dvcmQgPSB0eHRDb25maXJtUGFzc3dvcmQuZ2V0VGV4dCgpO1xcblxcbiAgICAgICAgaWYocGFzc3dvcmQuaXNFbXB0eSgpIHx8IGNvbmZpcm1QYXNzd29yZC5pc0VtcHR5KCkpe1xcbiAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFxcXCJWdWkgbFxcdTAwZjJuZyBraFxcdTAwZjRuZyBiXFx1MWVjZiB0clxcdTFlZDFuZyFcXFwiLCBcXFwiVGhcXHUwMGY0bmcgYlxcdTAwZTFvXFxcIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XFxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xcbiAgICAgICAgfVxcbiAgICAgICAgXFxuICAgICAgICBpZighcGFzc3dvcmQuZXF1YWxzKGNvbmZpcm1QYXNzd29yZCkpe1xcbiAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFxcXCJNXFx1MWVhZHQga2hcXHUxZWE5dSB4XFx1MDBlMWMgbmhcXHUxZWFkbiBraFxcdTAwZjRuZyBraFxcdTFlZGJwIVxcXCIsIFxcXCJUaFxcdTAwZjRuZyBiXFx1MDBlMW9cXFwiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XFxuICAgICAgICB9XFxuICAgICAgICBcXG4gICAgICAgIHJldHVybiB0cnVlO1xcbiAgICB9XCIsIFwib2xkX3N0cl9zdGFydF9saW5lX251bWJlclwiOiA0NywgXCJvbGRfc3RyX2VuZF9saW5lX251bWJlclwiOiA1Nn0sIHtcIm9sZF9zdHJcIjogXCIgICAgICAgIGJ0bkNoZWNrLnNldEZvbnQobmV3IGphdmEuYXd0LkZvbnQoXFxcIkFyaWFsXFxcIiwgMSwgMTQpKTsgLy8gTk9JMThOXFxuICAgICAgICBidG5DaGVjay5zZXRJY29uKG5ldyBqYXZheC5zd2luZy5JbWFnZUljb24oZ2V0Q2xhc3MoKS5nZXRSZXNvdXJjZShcXFwiL0ltYWdlcy9zZWFyY2gucG5nXFxcIikpKTsgLy8gTk9JMThOXFxuICAgICAgICBidG5DaGVjay5zZXRUZXh0KFxcXCJLaVxcdTFlYzNtIHRyYVxcXCIpO1xcbiAgICAgICAgYnRuQ2hlY2suc2V0Q3Vyc29yKG5ldyBqYXZhLmF3dC5DdXJzb3IoamF2YS5hd3QuQ3Vyc29yLkhBTkRfQ1VSU09SKSk7XCIsIFwibmV3X3N0clwiOiBcIiAgICAgICAgYnRuQ2hlY2suc2V0Rm9udChuZXcgamF2YS5hd3QuRm9udChcXFwiQXJpYWxcXFwiLCAxLCAxNCkpOyAvLyBOT0kxOE5cXG4gICAgICAgIGJ0bkNoZWNrLnNldEljb24obmV3IGphdmF4LnN3aW5nLkltYWdlSWNvbihnZXRDbGFzcygpLmdldFJlc291cmNlKFxcXCIvSW1hZ2VzL3NlYXJjaC5wbmdcXFwiKSkpOyAvLyBOT0kxOE5cXG4gICAgICAgIGJ0bkNoZWNrLnNldFRleHQoXFxcIktpXFx1MWVjM20gdHJhXFxcIik7XFxuICAgICAgICBidG5DaGVjay5zZXRDdXJzb3IobmV3IGphdmEuYXd0LkN1cnNvcihqYXZhLmF3dC5DdXJzb3IuSEFORF9DVVJTT1IpKTtcXG4gICAgICAgIGJ0bkNoZWNrLmFkZEFjdGlvbkxpc3RlbmVyKG5ldyBqYXZhLmF3dC5ldmVudC5BY3Rpb25MaXN0ZW5lcigpIHtcXG4gICAgICAgICAgICBwdWJsaWMgdm9pZCBhY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7XFxuICAgICAgICAgICAgICAgIGJ0bkNoZWNrQWN0aW9uUGVyZm9ybWVkKGV2dCk7XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgfSk7XCIsIFwib2xkX3N0cl9zdGFydF9saW5lX251bWJlclwiOiA5NSwgXCJvbGRfc3RyX2VuZF9saW5lX251bWJlclwiOiA5OH0sIHtcIm9sZF9zdHJcIjogXCIgICAgICAgIGJ0bkNoYW5nZS5zZXRGb250KG5ldyBqYXZhLmF3dC5Gb250KFxcXCJBcmlhbFxcXCIsIDEsIDE0KSk7IC8vIE5PSTE4TlxcbiAgICAgICAgYnRuQ2hhbmdlLnNldEljb24obmV3IGphdmF4LnN3aW5nLkltYWdlSWNvbihnZXRDbGFzcygpLmdldFJlc291cmNlKFxcXCIvSW1hZ2VzL3Jlc2V0LXBhc3N3b3JkLnBuZ1xcXCIpKSk7IC8vIE5PSTE4TlxcbiAgICAgICAgYnRuQ2hhbmdlLnNldFRleHQoXFxcIlxcdTAxMTBcXHUxZWQ1aSBtXFx1MWVhZHQga2hcXHUxZWE5dVxcXCIpO1xcbiAgICAgICAgYnRuQ2hhbmdlLnNldEN1cnNvcihuZXcgamF2YS5hd3QuQ3Vyc29yKGphdmEuYXd0LkN1cnNvci5IQU5EX0NVUlNPUikpO1wiLCBcIm5ld19zdHJcIjogXCIgICAgICAgIGJ0bkNoYW5nZS5zZXRGb250KG5ldyBqYXZhLmF3dC5Gb250KFxcXCJBcmlhbFxcXCIsIDEsIDE0KSk7IC8vIE5PSTE4TlxcbiAgICAgICAgYnRuQ2hhbmdlLnNldEljb24obmV3IGphdmF4LnN3aW5nLkltYWdlSWNvbihnZXRDbGFzcygpLmdldFJlc291cmNlKFxcXCIvSW1hZ2VzL3Jlc2V0LXBhc3N3b3JkLnBuZ1xcXCIpKSk7IC8vIE5PSTE4TlxcbiAgICAgICAgYnRuQ2hhbmdlLnNldFRleHQoXFxcIlxcdTAxMTBcXHUxZWQ1aSBtXFx1MWVhZHQga2hcXHUxZWE5dVxcXCIpO1xcbiAgICAgICAgYnRuQ2hhbmdlLnNldEN1cnNvcihuZXcgamF2YS5hd3QuQ3Vyc29yKGphdmEuYXd0LkN1cnNvci5IQU5EX0NVUlNPUikpO1xcbiAgICAgICAgYnRuQ2hhbmdlLmFkZEFjdGlvbkxpc3RlbmVyKG5ldyBqYXZhLmF3dC5ldmVudC5BY3Rpb25MaXN0ZW5lcigpIHtcXG4gICAgICAgICAgICBwdWJsaWMgdm9pZCBhY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7XFxuICAgICAgICAgICAgICAgIGJ0bkNoYW5nZUFjdGlvblBlcmZvcm1lZChldnQpO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgIH0pO1wiLCBcIm9sZF9zdHJfc3RhcnRfbGluZV9udW1iZXJcIjogMTAwLCBcIm9sZF9zdHJfZW5kX2xpbmVfbnVtYmVyXCI6IDEwM30sIHtcIm9sZF9zdHJcIjogXCIgICAgcHJpdmF0ZSB2b2lkIGJ0bkV4aXRBY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuRXhpdEFjdGlvblBlcmZvcm1lZFxcbiAgICAgICAgLy8gVE9ETyBhZGQgeW91ciBoYW5kbGluZyBjb2RlIGhlcmU6XFxuICAgICAgICBpbnQgcmVzdWx0ID0gSk9wdGlvblBhbmUuc2hvd0NvbmZpcm1EaWFsb2cobnVsbCwgXFxcIkJcXHUxZWExbiBjXFx1MDBmMyBjaFxcdTFlYWZjIGNoXFx1MWVhZm4gbXVcXHUxZWQxbiB0aG9cXHUwMGUxdCBraFxcdTAwZjRuZz9cXFwiLCBcXFwiVGhcXHUwMGY0bmcgYlxcdTAwZTFvXFxcIiwgSk9wdGlvblBhbmUuWUVTX05PX09QVElPTiwgSk9wdGlvblBhbmUuUVVFU1RJT05fTUVTU0FHRSk7XFxuICAgIFxcbiAgICAgICAgaWYgKHJlc3VsdCA9PSBKT3B0aW9uUGFuZS5ZRVNfT1BUSU9OKSB7XFxuICAgICAgICAgICAgU3lzdGVtLmV4aXQoMCk7XFxuICAgICAgICB9XFxuICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0bkV4aXRBY3Rpb25QZXJmb3JtZWRcIiwgXCJuZXdfc3RyXCI6IFwiICAgIHByaXZhdGUgdm9pZCBidG5FeGl0QWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkV4aXRBY3Rpb25QZXJmb3JtZWRcXG4gICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxcbiAgICAgICAgaW50IHJlc3VsdCA9IEpPcHRpb25QYW5lLnNob3dDb25maXJtRGlhbG9nKG51bGwsIFxcXCJCXFx1MWVhMW4gY1xcdTAwZjMgY2hcXHUxZWFmYyBjaFxcdTFlYWZuIG11XFx1MWVkMW4gdGhvXFx1MDBlMXQga2hcXHUwMGY0bmc/XFxcIiwgXFxcIlRoXFx1MDBmNG5nIGJcXHUwMGUxb1xcXCIsIEpPcHRpb25QYW5lLllFU19OT19PUFRJT04sIEpPcHRpb25QYW5lLlFVRVNUSU9OX01FU1NBR0UpO1xcbiAgICBcXG4gICAgICAgIGlmIChyZXN1bHQgPT0gSk9wdGlvblBhbmUuWUVTX09QVElPTikge1xcbiAgICAgICAgICAgIG5ldyBMb2dpbigpLnNldFZpc2libGUodHJ1ZSk7XFxuICAgICAgICAgICAgdGhpcy5kaXNwb3NlKCk7XFxuICAgICAgICB9XFxuICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0bkV4aXRBY3Rpb25QZXJmb3JtZWRcXG4gICAgXFxuICAgIHByaXZhdGUgdm9pZCBidG5DaGVja0FjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5DaGVja0FjdGlvblBlcmZvcm1lZFxcbiAgICAgICAgaWYgKHZhbGlkYXRlUGhvbmUoKSkge1xcbiAgICAgICAgICAgIFN0cmluZyBwaG9uZSA9IHR4dFBob25lLmdldFRleHQoKTtcXG4gICAgICAgICAgICBjdXJyZW50U3Vic2NyaWJlciA9IFN1YnNjcmliZXJEQU8uZ2V0QnlQaG9uZShwaG9uZSk7XFxuICAgICAgICAgICAgXFxuICAgICAgICAgICAgaWYgKGN1cnJlbnRTdWJzY3JpYmVyICE9IG51bGwpIHtcXG4gICAgICAgICAgICAgICAgLy8gUGhvbmUgbnVtYmVyIGZvdW5kLCBzaG93IHBhc3N3b3JkIGZpZWxkc1xcbiAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcXFwiVFxcdTAwZWNtIHRoXFx1MWVhNXkgdFxcdTAwZTBpIGtob1xcdTFlYTNuIHZcXHUxZWRiaSBzXFx1MWVkMSBcXHUwMTExaVxcdTFlYzduIHRob1xcdTFlYTFpIG5cXHUwMGUweSFcXFwiLCBcXFwiVGhcXHUwMGY0bmcgYlxcdTAwZTFvXFxcIiwgSk9wdGlvblBhbmUuSU5GT1JNQVRJT05fTUVTU0FHRSk7XFxuICAgICAgICAgICAgICAgIFxcbiAgICAgICAgICAgICAgICBidG5FeGl0LnNldFZpc2libGUodHJ1ZSk7XFxuICAgICAgICAgICAgICAgIGJ0bkNoYW5nZS5zZXRWaXNpYmxlKHRydWUpO1xcbiAgICAgICAgICAgICAgICBsYk5ld1Bhc3N3b3JkLnNldFZpc2libGUodHJ1ZSk7XFxuICAgICAgICAgICAgICAgIGxiQ29uZmlybVBhc3N3b3JkLnNldFZpc2libGUodHJ1ZSk7XFxuICAgICAgICAgICAgICAgIHR4dFBhc3N3b3JkLnNldFZpc2libGUodHJ1ZSk7XFxuICAgICAgICAgICAgICAgIHR4dENvbmZpcm1QYXNzd29yZC5zZXRWaXNpYmxlKHRydWUpO1xcbiAgICAgICAgICAgICAgICBcXG4gICAgICAgICAgICAgICAgLy8gRGlzYWJsZSBwaG9uZSBmaWVsZCBhbmQgY2hlY2sgYnV0dG9uXFxuICAgICAgICAgICAgICAgIHR4dFBob25lLnNldEVkaXRhYmxlKGZhbHNlKTtcXG4gICAgICAgICAgICAgICAgYnRuQ2hlY2suc2V0RW5hYmxlZChmYWxzZSk7XFxuICAgICAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXFxcIktoXFx1MDBmNG5nIHRcXHUwMGVjbSB0aFxcdTFlYTV5IHRcXHUwMGUwaSBraG9cXHUxZWEzbiB2XFx1MWVkYmkgc1xcdTFlZDEgXFx1MDExMWlcXHUxZWM3biB0aG9cXHUxZWExaSBuXFx1MDBlMHkhXFxcIiwgXFxcIlRoXFx1MDBmNG5nIGJcXHUwMGUxb1xcXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgIH1cXG4gICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuQ2hlY2tBY3Rpb25QZXJmb3JtZWRcXG5cXG4gICAgcHJpdmF0ZSB2b2lkIGJ0bkNoYW5nZUFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5DaGFuZ2VBY3Rpb25QZXJmb3JtZWRcXG4gICAgICAgIGlmICh2YWxpZGF0ZUZpZWxkcygpICYmIGN1cnJlbnRTdWJzY3JpYmVyICE9IG51bGwpIHtcXG4gICAgICAgICAgICBTdHJpbmcgbmV3UGFzc3dvcmQgPSB0eHRQYXNzd29yZC5nZXRUZXh0KCk7XFxuICAgICAgICAgICAgXFxuICAgICAgICAgICAgYm9vbGVhbiBzdWNjZXNzID0gU3Vic2NyaWJlckRBTy51cGRhdGVQYXNzd29yZChjdXJyZW50U3Vic2NyaWJlci5nZXRVc2VyX2lkKCksIG5ld1Bhc3N3b3JkKTtcXG4gICAgICAgICAgICBcXG4gICAgICAgICAgICBpZiAoc3VjY2Vzcykge1xcbiAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcXFwiXFx1MDExMFxcdTFlZDVpIG1cXHUxZWFkdCBraFxcdTFlYTl1IHRoXFx1MDBlMG5oIGNcXHUwMGY0bmchIFZ1aSBsXFx1MDBmMm5nIFxcdTAxMTFcXHUwMTAzbmcgbmhcXHUxZWFkcCBsXFx1MWVhMWkuXFxcIiwgXFxcIlRoXFx1MDBmNG5nIGJcXHUwMGUxb1xcXCIsIEpPcHRpb25QYW5lLklORk9STUFUSU9OX01FU1NBR0UpO1xcbiAgICAgICAgICAgICAgICBuZXcgTG9naW4oKS5zZXRWaXNpYmxlKHRydWUpO1xcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3Bvc2UoKTtcXG4gICAgICAgICAgICB9IGVsc2Uge1xcbiAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcXFwiXFx1MDExMFxcdTFlZDVpIG1cXHUxZWFkdCBraFxcdTFlYTl1IHRoXFx1MWVhNXQgYlxcdTFlYTFpISBWdWkgbFxcdTAwZjJuZyB0aFxcdTFlZWQgbFxcdTFlYTFpIHNhdS5cXFwiLCBcXFwiVGhcXHUwMGY0bmcgYlxcdTAwZTFvXFxcIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgfVxcbiAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5DaGFuZ2VBY3Rpb25QZXJmb3JtZWRcIiwgXCJvbGRfc3RyX3N0YXJ0X2xpbmVfbnVtYmVyXCI6IDIwNCwgXCJvbGRfc3RyX2VuZF9saW5lX251bWJlclwiOiAyMTF9XX0iLCJtY3Bfc2VydmVyX25hbWUiOiIiLCJtY3BfdG9vbF9uYW1lIjoiIn19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiJOb3cgSSdsbCBpbXBsZW1lbnQgdGhlIGV2ZW50IGhhbmRsaW5nIGZ1bmN0aW9ucyBmb3IgdGhlIEZvcmdvdFBhc3N3b3JkIGZvcm06XG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJTdWNjZXNzZnVsbHkgZWRpdGVkIHRoZSBmaWxlIHNyYy9EQU8vU3Vic2NyaWJlckRBTy5qYXZhLlxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZSBmb3IgZW50cnkgd2l0aCBpbmRleCBbMF06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgICAgM1x0ICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NsYXNzLmphdmEgdG8gZWRpdCB0aGlzIHRlbXBsYXRlXG4gICAgIDRcdCAqL1xuICAgICA1XHRwYWNrYWdlIERBTztcbiAgICAgNlx0XG4gICAgIDdcdGltcG9ydCBNb2RlbC5TdWJzY3JpYmVyO1xuICAgICA4XHRpbXBvcnQgamF2YS51dGlsLkxpc3Q7XG4gICAgIDlcdGltcG9ydCBqYXZhLnNxbC5QcmVwYXJlZFN0YXRlbWVudDtcbiAgICAxMFx0aW1wb3J0IGphdmEuc3FsLlJlc3VsdFNldDtcbiAgICAxMVx0aW1wb3J0IGphdmEuc3FsLlRpbWVzdGFtcDtcbiAgICAxMlx0aW1wb3J0IERBTy5EYk9wZXJhdGlvbnMuU3FsT3BlcmF0aW9uO1xuICAgIDEzXHRcbiAgICAxNFx0LyoqXG4gICAgMTVcdCAqXG4gICAgMTZcdCAqIEBhdXRob3IgTmdvYyBUaGFvXG5cblJlc3VsdCBmb3Igc3RyX3JlcGxhY2UgZm9yIGVudHJ5IHdpdGggaW5kZXggWzFdOlxuUmVwbGFjZW1lbnQgc3VjY2Vzc2Z1bC5cbkVkaXRlZCBzZWN0aW9uIGFmdGVyIElERSBhdXRvLWZvcm1hdHRpbmcgd2FzIGFwcGxpZWQ6XG4gICAgNzNcdCAgICBwdWJsaWMgc3RhdGljIFN1YnNjcmliZXIgZ2V0QnlJZChpbnQgaWQpIHtcbiAgICA3NFx0ICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oXCJOb3Qgc3VwcG9ydGVkIHlldC5cIik7IC8vIEdlbmVyYXRlZCBmcm9tIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9Db2RlL0dlbmVyYXRlZE1ldGhvZEJvZHlcbiAgICA3NVx0ICAgIH1cbiAgICA3Nlx0XG4gICAgNzdcdCAgICBwdWJsaWMgc3RhdGljIExpc3Q8U3Vic2NyaWJlcj4gZ2V0QWxsKCkge1xuICAgIDc4XHQgICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbihcIk5vdCBzdXBwb3J0ZWQgeWV0LlwiKTsgLy8gR2VuZXJhdGVkIGZyb20gbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NvZGUvR2VuZXJhdGVkTWV0aG9kQm9keVxuICAgIDc5XHQgICAgfVxuICAgIDgwXHRcbiAgICA4MVx0ICAgIHB1YmxpYyBzdGF0aWMgU3Vic2NyaWJlciBnZXRCeVBob25lKFN0cmluZyBwaG9uZSkge1xuICAgIDgyXHQgICAgICAgIFN1YnNjcmliZXIgc3Vic2NyaWJlciA9IG51bGw7XG4gICAgODNcdCAgICAgICAgdHJ5IHtcbiAgICA4NFx0ICAgICAgICAgICAgUmVzdWx0U2V0IHJzID0gRGJPcGVyYXRpb25zLmdldERhdGEoXCJTRUxFQ1Qgcy4qLCB1LiogRlJPTSBTVUJTQ1JJQkVSIHMgSk9JTiBVU0VSIHUgT04gcy51c2VyX2lkID0gdS51c2VyX2lkIFdIRVJFIHMucGhvbmUgPSAnXCIgKyBwaG9uZSArIFwiJ1wiKTtcbiAgICA4NVx0ICAgICAgICAgICAgaWYgKHJzLm5leHQoKSkge1xuICAgIDg2XHQgICAgICAgICAgICAgICAgc3Vic2NyaWJlciA9IG5ldyBTdWJzY3JpYmVyKCk7XG4gICAgODdcdCAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLnNldFN1YnNjcmliZXJfaWQocnMuZ2V0SW50KFwic3Vic2NyaWJlcl9pZFwiKSk7XG4gICAgODhcdCAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLnNldEZ1bGxOYW1lKHJzLmdldFN0cmluZyhcIm5hbWVcIikpO1xuICAgIDg5XHQgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5zZXRBZGRyZXNzKHJzLmdldFN0cmluZyhcImFkZHJlc3NcIikpO1xuICAgIDkwXHQgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5zZXRQaG9uZShycy5nZXRTdHJpbmcoXCJwaG9uZVwiKSk7XG4gICAgOTFcdCAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLnNldFVzZXJfaWQocnMuZ2V0SW50KFwidXNlcl9pZFwiKSk7XG4gICAgOTJcdCAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLnNldFVzZXJuYW1lKHJzLmdldFN0cmluZyhcInVzZXJuYW1lXCIpKTtcbiAgICA5M1x0ICAgICAgICAgICAgICAgIHN1YnNjcmliZXIuc2V0UGFzc3dvcmQocnMuZ2V0U3RyaW5nKFwicGFzc3dvcmRcIikpO1xuICAgIDk0XHQgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5zZXRSb2xlKHJzLmdldFN0cmluZyhcInJvbGVcIikpO1xuICAgIDk1XHQgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5zZXRJc0FjdGl2ZShycy5nZXRCb29sZWFuKFwiaXNBY3RpdmVcIikpO1xuICAgIDk2XHQgICAgICAgICAgICB9XG4gICAgOTdcdCAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGV4KSB7XG4gICAgOThcdCAgICAgICAgICAgIGV4LnByaW50U3RhY2tUcmFjZSgpO1xuICAgIDk5XHQgICAgICAgIH1cbiAgIDEwMFx0ICAgICAgICByZXR1cm4gc3Vic2NyaWJlcjtcbiAgIDEwMVx0ICAgIH1cbiAgIDEwMlx0XG4gICAxMDNcdCAgICBwdWJsaWMgc3RhdGljIGJvb2xlYW4gdXBkYXRlUGFzc3dvcmQoaW50IHVzZXJJZCwgU3RyaW5nIG5ld1Bhc3N3b3JkKSB7XG4gICAxMDRcdCAgICAgICAgdHJ5IHtcbiAgIDEwNVx0ICAgICAgICAgICAgU3RyaW5nIHF1ZXJ5ID0gXCJVUERBVEUgVVNFUiBTRVQgcGFzc3dvcmQgPSAnXCIgKyBuZXdQYXNzd29yZCArIFwiJyBXSEVSRSB1c2VyX2lkID0gXCIgKyB1c2VySWQ7XG4gICAxMDZcdCAgICAgICAgICAgIERiT3BlcmF0aW9ucy5zZXREYXRhT3JEZWxldGUocXVlcnksIFwiQ+G6rXAgbmjhuq10IG3huq10IGto4bqpdSB0aMOgbmggY8O0bmchXCIpO1xuICAgMTA3XHQgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgIDEwOFx0ICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZXgpIHtcbiAgIDEwOVx0ICAgICAgICAgICAgZXgucHJpbnRTdGFja1RyYWNlKCk7XG4gICAxMTBcdCAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgIDExMVx0ICAgICAgICB9XG4gICAxMTJcdCAgICB9XG4gICAxMTNcdH1cbiAgIDExNFx0XG5cblJldmlldyB0aGUgY2hhbmdlcyBhbmQgbWFrZSBzdXJlIHRoZXkgYXJlIGFzIGV4cGVjdGVkIChjb3JyZWN0IGluZGVudGF0aW9uLCBubyBkdXBsaWNhdGUgbGluZXMsIGV0YykuXG5FZGl0IHRoZSBmaWxlIGFnYWluIGlmIG5lY2Vzc2FyeS5cbiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfMDE2V2E2OFZaMW55aFNvZzdRanJFWFpwIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiRTovSG9jVGFwLzAyX0pBVkEvMDNfUHJvamVjdC9JbnRlcm5ldCBNYW5nZW1lbnQgU3lzdGVtIiwiZm9sZGVyUm9vdCI6IkU6L0hvY1RhcC8wMl9KQVZBLzAzX1Byb2plY3QvSW50ZXJuZXQgTWFuZ2VtZW50IFN5c3RlbSJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInRpbWVzdGFtcCI6IjIwMjUtMDUtMTNUMDE6MjA6MjEuOTAzWiIsInJlc3BvbnNlX3RleHQiOiJOb3cgSSdsbCBpbXBsZW1lbnQgdGhlIGV2ZW50IGhhbmRsaW5nIGZ1bmN0aW9ucyBmb3IgdGhlIEZvcmdvdFBhc3N3b3JkIGZvcm06XG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiOTdjOWY0MjEtMmEyNi00MDc2LWFhZmEtOWMwNGM3OWQ0MjIwIiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiTm93IGxldCdzIHRlc3QgdGhlIGltcGxlbWVudGF0aW9uIHRvIG1ha2Ugc3VyZSBldmVyeXRoaW5nIHdvcmtzIGNvcnJlY3RseS4gTGV0J3MgcnVuIHRoZSBhcHBsaWNhdGlvbiBhbmQgdGVzdCB0aGUgRm9yZ290UGFzc3dvcmQgZnVuY3Rpb25hbGl0eS5cblxuIyMgU3VtbWFyeSBvZiBDaGFuZ2VzXG5cbkkndmUgaW1wbGVtZW50ZWQgdGhlIGV2ZW50IGhhbmRsaW5nIGZ1bmN0aW9ucyBmb3IgdGhlIEZvcmdvdFBhc3N3b3JkIGZvcm0gd2l0aCB0aGUgZm9sbG93aW5nIGZlYXR1cmVzOlxuXG4xLiAqKkFkZGVkIG5ldyBtZXRob2RzIHRvIFN1YnNjcmliZXJEQU86KipcbiAgIC0gYGdldEJ5UGhvbmUoU3RyaW5nIHBob25lKWA6IEZpbmRzIGEgc3Vic2NyaWJlciBieSBwaG9uZSBudW1iZXJcbiAgIC0gYHVwZGF0ZVBhc3N3b3JkKGludCB1c2VySWQsIFN0cmluZyBuZXdQYXNzd29yZClgOiBVcGRhdGVzIGEgdXNlcidzIHBhc3N3b3JkXG5cbjIuICoqSW1wbGVtZW50ZWQgZXZlbnQgaGFuZGxlcnMgaW4gRm9yZ290UGFzc3dvcmQ6KipcbiAgIC0gYGJ0bkNoZWNrQWN0aW9uUGVyZm9ybWVkYDogVmFsaWRhdGVzIHBob25lIG51bWJlciwgc2VhcmNoZXMgZm9yIHVzZXIsIGFuZCBzaG93cyBwYXNzd29yZCBmaWVsZHMgaWYgZm91bmRcbiAgIC0gYGJ0bkNoYW5nZUFjdGlvblBlcmZvcm1lZGA6IFZhbGlkYXRlcyBuZXcgcGFzc3dvcmQsIGNvbmZpcm1zIGl0IG1hdGNoZXMsIGFuZCB1cGRhdGVzIHRoZSB1c2VyJ3MgcGFzc3dvcmRcblxuMy4gKipFbmhhbmNlZCB2YWxpZGF0aW9uOioqXG4gICAtIEFkZGVkIHBhc3N3b3JkIG1hdGNoaW5nIHZhbGlkYXRpb25cbiAgIC0gSW1wcm92ZWQgZXJyb3IgbWVzc2FnZXNcbiAgIC0gQWRkZWQgc3VjY2VzcyBtZXNzYWdlc1xuXG40LiAqKkltcHJvdmVkIFVJIGZsb3c6KipcbiAgIC0gRGlzYWJsZWQgcGhvbmUgZmllbGQgYW5kIGNoZWNrIGJ1dHRvbiBhZnRlciBzdWNjZXNzZnVsIHBob25lIHZlcmlmaWNhdGlvblxuICAgLSBBZGRlZCBuYXZpZ2F0aW9uIHRvIExvZ2luIHNjcmVlbiBhZnRlciBwYXNzd29yZCBjaGFuZ2VcbiAgIC0gTW9kaWZpZWQgRXhpdCBidXR0b24gdG8gcmV0dXJuIHRvIExvZ2luIHNjcmVlbiBpbnN0ZWFkIG9mIGNsb3NpbmcgdGhlIGFwcGxpY2F0aW9uXG5cblRoZSBpbXBsZW1lbnRhdGlvbiBmb2xsb3dzIHRoZSByZXF1aXJlbWVudHM6XG4tIEl0IHZhbGlkYXRlcyB0aGUgcGhvbmUgbnVtYmVyIGZpcnN0XG4tIE9ubHkgYWxsb3dzIG5ldyBwYXNzd29yZCBlbnRyeSBhZnRlciBhIGNvcnJlY3QgcGhvbmUgbnVtYmVyIGlzIGZvdW5kXG4tIFNob3dzIGFwcHJvcHJpYXRlIGVycm9yIGFuZCBzdWNjZXNzIG1lc3NhZ2VzXG4tIEVuc3VyZXMgcGFzc3dvcmQgY29uZmlybWF0aW9uIG1hdGNoZXMgdGhlIG5ldyBwYXNzd29yZFxuXG5UbyB0ZXN0IHRoaXMgaW1wbGVtZW50YXRpb246XG4xLiBSdW4gdGhlIGFwcGxpY2F0aW9uXG4yLiBOYXZpZ2F0ZSB0byB0aGUgRm9yZ290UGFzc3dvcmQgc2NyZWVuXG4zLiBFbnRlciBhIHZhbGlkIHBob25lIG51bWJlciBhbmQgY2xpY2sgXCJLaeG7g20gdHJhXCJcbjQuIElmIHRoZSBwaG9uZSBudW1iZXIgZXhpc3RzLCBlbnRlciBhIG5ldyBwYXNzd29yZCBhbmQgY29uZmlybSBpdFxuNS4gQ2xpY2sgXCLEkOG7lWkgbeG6rXQga2jhuql1XCIgdG8gdXBkYXRlIHRoZSBwYXNzd29yZFxuNi4gVmVyaWZ5IHlvdSBjYW4gbG9nIGluIHdpdGggdGhlIG5ldyBwYXNzd29yZFxuXG5Xb3VsZCB5b3UgbGlrZSBtZSB0byBtYWtlIGFueSBhZGRpdGlvbmFsIGNoYW5nZXMgb3IgaW1wcm92ZW1lbnRzIHRvIHRoZSBpbXBsZW1lbnRhdGlvbj9cbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IlN1Y2Nlc3NmdWxseSBlZGl0ZWQgdGhlIGZpbGUgc3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vRm9yZ290UGFzc3dvcmQuamF2YS5cblJlc3VsdCBmb3Igc3RyX3JlcGxhY2UgZm9yIGVudHJ5IHdpdGggaW5kZXggWzBdOlxuUmVwbGFjZW1lbnQgc3VjY2Vzc2Z1bC5cbkVkaXRlZCBzZWN0aW9uIGFmdGVyIElERSBhdXRvLWZvcm1hdHRpbmcgd2FzIGFwcGxpZWQ6XG4gICAgIDFcdC8qXG4gICAgIDJcdCAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvTGljZW5zZXMvbGljZW5zZS1kZWZhdWx0LnR4dCB0byBjaGFuZ2UgdGhpcyBsaWNlbnNlXG4gICAgIDNcdCAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvR1VJRm9ybXMvSkZyYW1lLmphdmEgdG8gZWRpdCB0aGlzIHRlbXBsYXRlXG4gICAgIDRcdCAqL1xuICAgICA1XHRwYWNrYWdlIGludGVybmV0Lm1hbmdlbWVudC5zeXN0ZW07XG4gICAgIDZcdFxuICAgICA3XHRpbXBvcnQgREFPLlN1YnNjcmliZXJEQU87XG4gICAgIDhcdGltcG9ydCBNb2RlbC5TdWJzY3JpYmVyO1xuICAgICA5XHRpbXBvcnQgamF2YXguc3dpbmcuSk9wdGlvblBhbmU7XG4gICAgMTBcdFxuICAgIDExXHQvKipcbiAgICAxMlx0ICpcbiAgICAxM1x0ICogQGF1dGhvciBOZ29jIFRoYW9cblxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZSBmb3IgZW50cnkgd2l0aCBpbmRleCBbMV06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgICAxMVx0LyoqXG4gICAgMTJcdCAqXG4gICAgMTNcdCAqIEBhdXRob3IgTmdvYyBUaGFvXG4gICAgMTRcdCAqL1xuICAgIDE1XHRwdWJsaWMgY2xhc3MgRm9yZ290UGFzc3dvcmQgZXh0ZW5kcyBqYXZheC5zd2luZy5KRnJhbWUge1xuICAgIDE2XHQgICAgcHJpdmF0ZSBTdWJzY3JpYmVyIGN1cnJlbnRTdWJzY3JpYmVyID0gbnVsbDtcbiAgICAxN1x0ICAgIHB1YmxpYyBTdHJpbmcgcGhvbmVQYXR0ZXJuID0gXCJeWzAtOV0qJFwiO1xuICAgIDE4XHRcbiAgICAxOVx0ICAgIC8qKlxuICAgIDIwXHQgICAgICogQ3JlYXRlcyBuZXcgZm9ybSBGb3Jnb3RQYXNzd29yZFxuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlIGZvciBlbnRyeSB3aXRoIGluZGV4IFsyXTpcblJlcGxhY2VtZW50IHN1Y2Nlc3NmdWwuXG5FZGl0ZWQgc2VjdGlvbiBhZnRlciBJREUgYXV0by1mb3JtYXR0aW5nIHdhcyBhcHBsaWVkOlxuICAgIDUxXHQgICAgICAgIH1cbiAgICA1Mlx0ICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICA1M1x0ICAgIH1cbiAgICA1NFx0XG4gICAgNTVcdCAgICBwdWJsaWMgYm9vbGVhbiB2YWxpZGF0ZUZpZWxkcygpe1xuICAgIDU2XHQgICAgICAgIFN0cmluZyBwYXNzd29yZCA9IHR4dFBhc3N3b3JkLmdldFRleHQoKTtcbiAgICA1N1x0ICAgICAgICBTdHJpbmcgY29uZmlybVBhc3N3b3JkID0gdHh0Q29uZmlybVBhc3N3b3JkLmdldFRleHQoKTtcbiAgICA1OFx0XG4gICAgNTlcdCAgICAgICAgaWYocGFzc3dvcmQuaXNFbXB0eSgpIHx8IGNvbmZpcm1QYXNzd29yZC5pc0VtcHR5KCkpe1xuICAgIDYwXHQgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcIlZ1aSBsw7JuZyBraMO0bmcgYuG7jyB0cuG7kW5nIVwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgIDYxXHQgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgNjJcdCAgICAgICAgfVxuICAgIDYzXHRcbiAgICA2NFx0ICAgICAgICBpZighcGFzc3dvcmQuZXF1YWxzKGNvbmZpcm1QYXNzd29yZCkpe1xuICAgIDY1XHQgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcIk3huq10IGto4bqpdSB4w6FjIG5o4bqtbiBraMO0bmcga2jhu5twIVwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgIDY2XHQgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgNjdcdCAgICAgICAgfVxuICAgIDY4XHRcbiAgICA2OVx0ICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICA3MFx0ICAgIH1cbiAgICA3MVx0XG4gICAgNzJcdCAgICAvKipcbiAgICA3M1x0ICAgICAqIFRoaXMgbWV0aG9kIGlzIGNhbGxlZCBmcm9tIHdpdGhpbiB0aGUgY29uc3RydWN0b3IgdG8gaW5pdGlhbGl6ZSB0aGUgZm9ybS5cbiAgICA3NFx0ICAgICAqIFdBUk5JTkc6IERvIE5PVCBtb2RpZnkgdGhpcyBjb2RlLiBUaGUgY29udGVudCBvZiB0aGlzIG1ldGhvZCBpcyBhbHdheXNcblxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZSBmb3IgZW50cnkgd2l0aCBpbmRleCBbM106XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgIDEwNFx0XG4gICAxMDVcdCAgICAgICAgbGJDb25maXJtUGFzc3dvcmQuc2V0Rm9udChuZXcgamF2YS5hd3QuRm9udChcIkFyaWFsXCIsIDEsIDE0KSk7IC8vIE5PSTE4TlxuICAgMTA2XHQgICAgICAgIGxiQ29uZmlybVBhc3N3b3JkLnNldFRleHQoXCJYw6FjIG5o4bqtbiBt4bqtdCBraOG6qXU6XCIpO1xuICAgMTA3XHRcbiAgIDEwOFx0ICAgICAgICBidG5DaGVjay5zZXRGb250KG5ldyBqYXZhLmF3dC5Gb250KFwiQXJpYWxcIiwgMSwgMTQpKTsgLy8gTk9JMThOXG4gICAxMDlcdCAgICAgICAgYnRuQ2hlY2suc2V0SWNvbihuZXcgamF2YXguc3dpbmcuSW1hZ2VJY29uKGdldENsYXNzKCkuZ2V0UmVzb3VyY2UoXCIvSW1hZ2VzL3NlYXJjaC5wbmdcIikpKTsgLy8gTk9JMThOXG4gICAxMTBcdCAgICAgICAgYnRuQ2hlY2suc2V0VGV4dChcIktp4buDbSB0cmFcIik7XG4gICAxMTFcdCAgICAgICAgYnRuQ2hlY2suc2V0Q3Vyc29yKG5ldyBqYXZhLmF3dC5DdXJzb3IoamF2YS5hd3QuQ3Vyc29yLkhBTkRfQ1VSU09SKSk7XG4gICAxMTJcdCAgICAgICAgYnRuQ2hlY2suYWRkQWN0aW9uTGlzdGVuZXIobmV3IGphdmEuYXd0LmV2ZW50LkFjdGlvbkxpc3RlbmVyKCkge1xuICAgMTEzXHQgICAgICAgICAgICBwdWJsaWMgdm9pZCBhY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7XG4gICAxMTRcdCAgICAgICAgICAgICAgICBidG5DaGVja0FjdGlvblBlcmZvcm1lZChldnQpO1xuICAgMTE1XHQgICAgICAgICAgICB9XG4gICAxMTZcdCAgICAgICAgfSk7XG4gICAxMTdcdFxuICAgMTE4XHQgICAgICAgIGJ0bkNoYW5nZS5zZXRGb250KG5ldyBqYXZhLmF3dC5Gb250KFwiQXJpYWxcIiwgMSwgMTQpKTsgLy8gTk9JMThOXG4gICAxMTlcdCAgICAgICAgYnRuQ2hhbmdlLnNldEljb24obmV3IGphdmF4LnN3aW5nLkltYWdlSWNvbihnZXRDbGFzcygpLmdldFJlc291cmNlKFwiL0ltYWdlcy9yZXNldC1wYXNzd29yZC5wbmdcIikpKTsgLy8gTk9JMThOXG4gICAxMjBcdCAgICAgICAgYnRuQ2hhbmdlLnNldFRleHQoXCLEkOG7lWkgbeG6rXQga2jhuql1XCIpO1xuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlIGZvciBlbnRyeSB3aXRoIGluZGV4IFs0XTpcblJlcGxhY2VtZW50IHN1Y2Nlc3NmdWwuXG5FZGl0ZWQgc2VjdGlvbiBhZnRlciBJREUgYXV0by1mb3JtYXR0aW5nIHdhcyBhcHBsaWVkOlxuICAgMTE0XHQgICAgICAgICAgICAgICAgYnRuQ2hlY2tBY3Rpb25QZXJmb3JtZWQoZXZ0KTtcbiAgIDExNVx0ICAgICAgICAgICAgfVxuICAgMTE2XHQgICAgICAgIH0pO1xuICAgMTE3XHRcbiAgIDExOFx0ICAgICAgICBidG5DaGFuZ2Uuc2V0Rm9udChuZXcgamF2YS5hd3QuRm9udChcIkFyaWFsXCIsIDEsIDE0KSk7IC8vIE5PSTE4TlxuICAgMTE5XHQgICAgICAgIGJ0bkNoYW5nZS5zZXRJY29uKG5ldyBqYXZheC5zd2luZy5JbWFnZUljb24oZ2V0Q2xhc3MoKS5nZXRSZXNvdXJjZShcIi9JbWFnZXMvcmVzZXQtcGFzc3dvcmQucG5nXCIpKSk7IC8vIE5PSTE4TlxuICAgMTIwXHQgICAgICAgIGJ0bkNoYW5nZS5zZXRUZXh0KFwixJDhu5VpIG3huq10IGto4bqpdVwiKTtcbiAgIDEyMVx0ICAgICAgICBidG5DaGFuZ2Uuc2V0Q3Vyc29yKG5ldyBqYXZhLmF3dC5DdXJzb3IoamF2YS5hd3QuQ3Vyc29yLkhBTkRfQ1VSU09SKSk7XG4gICAxMjJcdCAgICAgICAgYnRuQ2hhbmdlLmFkZEFjdGlvbkxpc3RlbmVyKG5ldyBqYXZhLmF3dC5ldmVudC5BY3Rpb25MaXN0ZW5lcigpIHtcbiAgIDEyM1x0ICAgICAgICAgICAgcHVibGljIHZvaWQgYWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkge1xuICAgMTI0XHQgICAgICAgICAgICAgICAgYnRuQ2hhbmdlQWN0aW9uUGVyZm9ybWVkKGV2dCk7XG4gICAxMjVcdCAgICAgICAgICAgIH1cbiAgIDEyNlx0ICAgICAgICB9KTtcbiAgIDEyN1x0XG4gICAxMjhcdCAgICAgICAgYnRuRXhpdC5zZXRGb250KG5ldyBqYXZhLmF3dC5Gb250KFwiQXJpYWxcIiwgMSwgMTQpKTsgLy8gTk9JMThOXG4gICAxMjlcdCAgICAgICAgYnRuRXhpdC5zZXRJY29uKG5ldyBqYXZheC5zd2luZy5JbWFnZUljb24oZ2V0Q2xhc3MoKS5nZXRSZXNvdXJjZShcIi9JbWFnZXMvbG9nb3V0LnBuZ1wiKSkpOyAvLyBOT0kxOE5cbiAgIDEzMFx0ICAgICAgICBidG5FeGl0LnNldFRleHQoXCJUaG/DoXRcIik7XG5cblJlc3VsdCBmb3Igc3RyX3JlcGxhY2UgZm9yIGVudHJ5IHdpdGggaW5kZXggWzVdOlxuUmVwbGFjZW1lbnQgc3VjY2Vzc2Z1bC5cbkVkaXRlZCBzZWN0aW9uIGFmdGVyIElERSBhdXRvLWZvcm1hdHRpbmcgd2FzIGFwcGxpZWQ6XG4gICAyMTBcdFxuICAgMjExXHQgICAgICAgIHBhY2soKTtcbiAgIDIxMlx0ICAgIH0vLyA8L2VkaXRvci1mb2xkPi8vR0VOLUVORDppbml0Q29tcG9uZW50c1xuICAgMjEzXHRcbiAgIDIxNFx0ICAgIHByaXZhdGUgdm9pZCBidG5FeGl0QWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkV4aXRBY3Rpb25QZXJmb3JtZWRcbiAgIDIxNVx0ICAgICAgICAvLyBUT0RPIGFkZCB5b3VyIGhhbmRsaW5nIGNvZGUgaGVyZTpcbiAgIDIxNlx0ICAgICAgICBpbnQgcmVzdWx0ID0gSk9wdGlvblBhbmUuc2hvd0NvbmZpcm1EaWFsb2cobnVsbCwgXCJC4bqhbiBjw7MgY2jhuq9jIGNo4bqvbiBtdeG7kW4gdGhvw6F0IGtow7RuZz9cIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5ZRVNfTk9fT1BUSU9OLCBKT3B0aW9uUGFuZS5RVUVTVElPTl9NRVNTQUdFKTtcbiAgIDIxN1x0XG4gICAyMThcdCAgICAgICAgaWYgKHJlc3VsdCA9PSBKT3B0aW9uUGFuZS5ZRVNfT1BUSU9OKSB7XG4gICAyMTlcdCAgICAgICAgICAgIG5ldyBMb2dpbigpLnNldFZpc2libGUodHJ1ZSk7XG4gICAyMjBcdCAgICAgICAgICAgIHRoaXMuZGlzcG9zZSgpO1xuICAgMjIxXHQgICAgICAgIH1cbiAgIDIyMlx0ICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0bkV4aXRBY3Rpb25QZXJmb3JtZWRcbiAgIDIyM1x0XG4gICAyMjRcdCAgICBwcml2YXRlIHZvaWQgYnRuQ2hlY2tBY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuQ2hlY2tBY3Rpb25QZXJmb3JtZWRcbiAgIDIyNVx0ICAgICAgICBpZiAodmFsaWRhdGVQaG9uZSgpKSB7XG4gICAyMjZcdCAgICAgICAgICAgIFN0cmluZyBwaG9uZSA9IHR4dFBob25lLmdldFRleHQoKTtcbiAgIDIyN1x0ICAgICAgICAgICAgY3VycmVudFN1YnNjcmliZXIgPSBTdWJzY3JpYmVyREFPLmdldEJ5UGhvbmUocGhvbmUpO1xuICAgMjI4XHRcbiAgIDIyOVx0ICAgICAgICAgICAgaWYgKGN1cnJlbnRTdWJzY3JpYmVyICE9IG51bGwpIHtcbiAgIDIzMFx0ICAgICAgICAgICAgICAgIC8vIFBob25lIG51bWJlciBmb3VuZCwgc2hvdyBwYXNzd29yZCBmaWVsZHNcbiAgIDIzMVx0ICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwiVMOsbSB0aOG6pXkgdMOgaSBraG/huqNuIHbhu5tpIHPhu5EgxJFp4buHbiB0aG/huqFpIG7DoHkhXCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuSU5GT1JNQVRJT05fTUVTU0FHRSk7XG4gICAyMzJcdFxuICAgMjMzXHQgICAgICAgICAgICAgICAgYnRuRXhpdC5zZXRWaXNpYmxlKHRydWUpO1xuICAgMjM0XHQgICAgICAgICAgICAgICAgYnRuQ2hhbmdlLnNldFZpc2libGUodHJ1ZSk7XG4gICAyMzVcdCAgICAgICAgICAgICAgICBsYk5ld1Bhc3N3b3JkLnNldFZpc2libGUodHJ1ZSk7XG4gICAyMzZcdCAgICAgICAgICAgICAgICBsYkNvbmZpcm1QYXNzd29yZC5zZXRWaXNpYmxlKHRydWUpO1xuICAgMjM3XHQgICAgICAgICAgICAgICAgdHh0UGFzc3dvcmQuc2V0VmlzaWJsZSh0cnVlKTtcbiAgIDIzOFx0ICAgICAgICAgICAgICAgIHR4dENvbmZpcm1QYXNzd29yZC5zZXRWaXNpYmxlKHRydWUpO1xuICAgMjM5XHRcbiAgIDI0MFx0ICAgICAgICAgICAgICAgIC8vIERpc2FibGUgcGhvbmUgZmllbGQgYW5kIGNoZWNrIGJ1dHRvblxuICAgMjQxXHQgICAgICAgICAgICAgICAgdHh0UGhvbmUuc2V0RWRpdGFibGUoZmFsc2UpO1xuICAgMjQyXHQgICAgICAgICAgICAgICAgYnRuQ2hlY2suc2V0RW5hYmxlZChmYWxzZSk7XG4gICAyNDNcdCAgICAgICAgICAgIH0gZWxzZSB7XG4gICAyNDRcdCAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcIktow7RuZyB0w6xtIHRo4bqleSB0w6BpIGtob+G6o24gduG7m2kgc+G7kSDEkWnhu4duIHRob+G6oWkgbsOgeSFcIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgIDI0NVx0ICAgICAgICAgICAgfVxuICAgMjQ2XHQgICAgICAgIH1cbiAgIDI0N1x0ICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0bkNoZWNrQWN0aW9uUGVyZm9ybWVkXG4gICAyNDhcdFxuICAgMjQ5XHQgICAgcHJpdmF0ZSB2b2lkIGJ0bkNoYW5nZUFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5DaGFuZ2VBY3Rpb25QZXJmb3JtZWRcbiAgIDI1MFx0ICAgICAgICBpZiAodmFsaWRhdGVGaWVsZHMoKSAmJiBjdXJyZW50U3Vic2NyaWJlciAhPSBudWxsKSB7XG4gICAyNTFcdCAgICAgICAgICAgIFN0cmluZyBuZXdQYXNzd29yZCA9IHR4dFBhc3N3b3JkLmdldFRleHQoKTtcbiAgIDI1Mlx0XG4gICAyNTNcdCAgICAgICAgICAgIGJvb2xlYW4gc3VjY2VzcyA9IFN1YnNjcmliZXJEQU8udXBkYXRlUGFzc3dvcmQoY3VycmVudFN1YnNjcmliZXIuZ2V0VXNlcl9pZCgpLCBuZXdQYXNzd29yZCk7XG4gICAyNTRcdFxuICAgMjU1XHQgICAgICAgICAgICBpZiAoc3VjY2Vzcykge1xuICAgMjU2XHQgICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXCLEkOG7lWkgbeG6rXQga2jhuql1IHRow6BuaCBjw7RuZyEgVnVpIGzDsm5nIMSRxINuZyBuaOG6rXAgbOG6oWkuXCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuSU5GT1JNQVRJT05fTUVTU0FHRSk7XG4gICAyNTdcdCAgICAgICAgICAgICAgICBuZXcgTG9naW4oKS5zZXRWaXNpYmxlKHRydWUpO1xuICAgMjU4XHQgICAgICAgICAgICAgICAgdGhpcy5kaXNwb3NlKCk7XG4gICAyNTlcdCAgICAgICAgICAgIH0gZWxzZSB7XG4gICAyNjBcdCAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcIsSQ4buVaSBt4bqtdCBraOG6qXUgdGjhuqV0IGLhuqFpISBWdWkgbMOybmcgdGjhu60gbOG6oWkgc2F1LlwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgMjYxXHQgICAgICAgICAgICB9XG4gICAyNjJcdCAgICAgICAgfVxuICAgMjYzXHQgICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuQ2hhbmdlQWN0aW9uUGVyZm9ybWVkXG4gICAyNjRcdFxuICAgMjY1XHQgICAgLyoqXG4gICAyNjZcdCAgICAgKiBAcGFyYW0gYXJncyB0aGUgY29tbWFuZCBsaW5lIGFyZ3VtZW50c1xuICAgMjY3XHQgICAgICovXG5cblJldmlldyB0aGUgY2hhbmdlcyBhbmQgbWFrZSBzdXJlIHRoZXkgYXJlIGFzIGV4cGVjdGVkIChjb3JyZWN0IGluZGVudGF0aW9uLCBubyBkdXBsaWNhdGUgbGluZXMsIGV0YykuXG5FZGl0IHRoZSBmaWxlIGFnYWluIGlmIG5lY2Vzc2FyeS5cbiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfMDFBMkY2OXlrdERXYWFnVFdQR3dHaGZhIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiRTovSG9jVGFwLzAyX0pBVkEvMDNfUHJvamVjdC9JbnRlcm5ldCBNYW5nZW1lbnQgU3lzdGVtIiwiZm9sZGVyUm9vdCI6IkU6L0hvY1RhcC8wMl9KQVZBLzAzX1Byb2plY3QvSW50ZXJuZXQgTWFuZ2VtZW50IFN5c3RlbSJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInRpbWVzdGFtcCI6IjIwMjUtMDUtMTNUMDE6MjA6NTEuNTYxWiIsInJlc3BvbnNlX3RleHQiOiJOb3cgbGV0J3MgdGVzdCB0aGUgaW1wbGVtZW50YXRpb24gdG8gbWFrZSBzdXJlIGV2ZXJ5dGhpbmcgd29ya3MgY29ycmVjdGx5LiBMZXQncyBydW4gdGhlIGFwcGxpY2F0aW9uIGFuZCB0ZXN0IHRoZSBGb3Jnb3RQYXNzd29yZCBmdW5jdGlvbmFsaXR5LlxuXG4jIyBTdW1tYXJ5IG9mIENoYW5nZXNcblxuSSd2ZSBpbXBsZW1lbnRlZCB0aGUgZXZlbnQgaGFuZGxpbmcgZnVuY3Rpb25zIGZvciB0aGUgRm9yZ290UGFzc3dvcmQgZm9ybSB3aXRoIHRoZSBmb2xsb3dpbmcgZmVhdHVyZXM6XG5cbjEuICoqQWRkZWQgbmV3IG1ldGhvZHMgdG8gU3Vic2NyaWJlckRBTzoqKlxuICAgLSBgZ2V0QnlQaG9uZShTdHJpbmcgcGhvbmUpYDogRmluZHMgYSBzdWJzY3JpYmVyIGJ5IHBob25lIG51bWJlclxuICAgLSBgdXBkYXRlUGFzc3dvcmQoaW50IHVzZXJJZCwgU3RyaW5nIG5ld1Bhc3N3b3JkKWA6IFVwZGF0ZXMgYSB1c2VyJ3MgcGFzc3dvcmRcblxuMi4gKipJbXBsZW1lbnRlZCBldmVudCBoYW5kbGVycyBpbiBGb3Jnb3RQYXNzd29yZDoqKlxuICAgLSBgYnRuQ2hlY2tBY3Rpb25QZXJmb3JtZWRgOiBWYWxpZGF0ZXMgcGhvbmUgbnVtYmVyLCBzZWFyY2hlcyBmb3IgdXNlciwgYW5kIHNob3dzIHBhc3N3b3JkIGZpZWxkcyBpZiBmb3VuZFxuICAgLSBgYnRuQ2hhbmdlQWN0aW9uUGVyZm9ybWVkYDogVmFsaWRhdGVzIG5ldyBwYXNzd29yZCwgY29uZmlybXMgaXQgbWF0Y2hlcywgYW5kIHVwZGF0ZXMgdGhlIHVzZXIncyBwYXNzd29yZFxuXG4zLiAqKkVuaGFuY2VkIHZhbGlkYXRpb246KipcbiAgIC0gQWRkZWQgcGFzc3dvcmQgbWF0Y2hpbmcgdmFsaWRhdGlvblxuICAgLSBJbXByb3ZlZCBlcnJvciBtZXNzYWdlc1xuICAgLSBBZGRlZCBzdWNjZXNzIG1lc3NhZ2VzXG5cbjQuICoqSW1wcm92ZWQgVUkgZmxvdzoqKlxuICAgLSBEaXNhYmxlZCBwaG9uZSBmaWVsZCBhbmQgY2hlY2sgYnV0dG9uIGFmdGVyIHN1Y2Nlc3NmdWwgcGhvbmUgdmVyaWZpY2F0aW9uXG4gICAtIEFkZGVkIG5hdmlnYXRpb24gdG8gTG9naW4gc2NyZWVuIGFmdGVyIHBhc3N3b3JkIGNoYW5nZVxuICAgLSBNb2RpZmllZCBFeGl0IGJ1dHRvbiB0byByZXR1cm4gdG8gTG9naW4gc2NyZWVuIGluc3RlYWQgb2YgY2xvc2luZyB0aGUgYXBwbGljYXRpb25cblxuVGhlIGltcGxlbWVudGF0aW9uIGZvbGxvd3MgdGhlIHJlcXVpcmVtZW50czpcbi0gSXQgdmFsaWRhdGVzIHRoZSBwaG9uZSBudW1iZXIgZmlyc3Rcbi0gT25seSBhbGxvd3MgbmV3IHBhc3N3b3JkIGVudHJ5IGFmdGVyIGEgY29ycmVjdCBwaG9uZSBudW1iZXIgaXMgZm91bmRcbi0gU2hvd3MgYXBwcm9wcmlhdGUgZXJyb3IgYW5kIHN1Y2Nlc3MgbWVzc2FnZXNcbi0gRW5zdXJlcyBwYXNzd29yZCBjb25maXJtYXRpb24gbWF0Y2hlcyB0aGUgbmV3IHBhc3N3b3JkXG5cblRvIHRlc3QgdGhpcyBpbXBsZW1lbnRhdGlvbjpcbjEuIFJ1biB0aGUgYXBwbGljYXRpb25cbjIuIE5hdmlnYXRlIHRvIHRoZSBGb3Jnb3RQYXNzd29yZCBzY3JlZW5cbjMuIEVudGVyIGEgdmFsaWQgcGhvbmUgbnVtYmVyIGFuZCBjbGljayBcIktp4buDbSB0cmFcIlxuNC4gSWYgdGhlIHBob25lIG51bWJlciBleGlzdHMsIGVudGVyIGEgbmV3IHBhc3N3b3JkIGFuZCBjb25maXJtIGl0XG41LiBDbGljayBcIsSQ4buVaSBt4bqtdCBraOG6qXVcIiB0byB1cGRhdGUgdGhlIHBhc3N3b3JkXG42LiBWZXJpZnkgeW91IGNhbiBsb2cgaW4gd2l0aCB0aGUgbmV3IHBhc3N3b3JkXG5cbldvdWxkIHlvdSBsaWtlIG1lIHRvIG1ha2UgYW55IGFkZGl0aW9uYWwgY2hhbmdlcyBvciBpbXByb3ZlbWVudHMgdG8gdGhlIGltcGxlbWVudGF0aW9uP1xuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJyZXF1ZXN0X2lkIjoiYzA2YjA2Y2YtMjY3MS00MGUwLTg4ODYtODA3MGEzMDQyNjk5IiwidXVpZCI6IjExNjQzODgyLTE1MGQtNGYwNC05MmU1LTk0MWQ5OTQ4NDY0OSIsImNoYXRJdGVtVHlwZSI6ImFnZW50aWMtY2hlY2twb2ludC1kZWxpbWl0ZXIiLCJzdGF0dXMiOiJzdWNjZXNzIiwiZnJvbVRpbWVzdGFtcCI6MTc0NzA5OTA4NzI1OCwidG9UaW1lc3RhbXAiOjE3NDcwOTkyNjExODgsInNlZW5fc3RhdGUiOiJzZWVuIn0seyJyZXF1ZXN0X2lkIjoiNWFkN2NiNWQtNDQ3My00ZDJlLWE5ODEtMmY0M2FmMjI1YTJjIiwic3RhdHVzIjoiY2FuY2VsbGVkIiwiY2hhdEl0ZW1UeXBlIjoiYWdlbnRpYy10dXJuLWRlbGltaXRlciJ9LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiIwYjk0YjM0MS0wZTZkLTRiNmYtYTgyZS1kNjkwYzQ1ZmJmZjQiLCJyZXF1ZXN0X21lc3NhZ2UiOiJUaGUgYnV0dG9ucyBkb24ndCBzZWVtIHRvIGJlIHdvcmtpbmc/IiwicmljaF90ZXh0X2pzb25fcmVwciI6eyJ0eXBlIjoiZG9jIiwiY29udGVudCI6W3sidHlwZSI6InBhcmFncmFwaCIsImNvbnRlbnQiOlt7InR5cGUiOiJ0ZXh0IiwidGV4dCI6IlRoZSBidXR0b25zIGRvbid0IHNlZW0gdG8gYmUgd29ya2luZz8ifV19XX0sIm1lbnRpb25lZF9pdGVtcyI6W10sInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfMDFKWlMzYW5NNUN6UTQ1N0tudWZwQmp0IiwidG9vbF9uYW1lIjoic3RyLXJlcGxhY2UtZWRpdG9yIiwiaW5wdXRfanNvbiI6IntcImNvbW1hbmRcIjogXCJ2aWV3XCIsIFwicGF0aFwiOiBcInNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL0ZvcmdvdFBhc3N3b3JkLmZvcm1cIn0iLCJtY3Bfc2VydmVyX25hbWUiOiIiLCJtY3BfdG9vbF9uYW1lIjoiIn19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiJJJ2xsIGhlbHAgeW91IGZpeCB0aGUgaXNzdWUgd2l0aCB0aGUgYnV0dG9ucyBub3Qgd29ya2luZy4gTGV0J3MgY2hlY2sgdGhlIGZvcm0gZmlsZSB0byBzZWUgaWYgdGhlIGV2ZW50IGhhbmRsZXJzIGFyZSBwcm9wZXJseSBjb25uZWN0ZWQgdG8gdGhlIGJ1dHRvbnMuXG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjowLCJ0ZXh0X25vZGUiOnsiY29udGVudCI6IlRoZSBidXR0b25zIGRvbid0IHNlZW0gdG8gYmUgd29ya2luZz8ifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJFOi9Ib2NUYXAvMDJfSkFWQS8wM19Qcm9qZWN0L0ludGVybmV0IE1hbmdlbWVudCBTeXN0ZW0iLCJmb2xkZXJSb290IjoiRTovSG9jVGFwLzAyX0pBVkEvMDNfUHJvamVjdC9JbnRlcm5ldCBNYW5nZW1lbnQgU3lzdGVtIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwidGltZXN0YW1wIjoiMjAyNS0wNS0xM1QwMToyNzoxOS4xNjBaIiwicmVzcG9uc2VfdGV4dCI6IkknbGwgaGVscCB5b3UgZml4IHRoZSBpc3N1ZSB3aXRoIHRoZSBidXR0b25zIG5vdCB3b3JraW5nLiBMZXQncyBjaGVjayB0aGUgZm9ybSBmaWxlIHRvIHNlZSBpZiB0aGUgZXZlbnQgaGFuZGxlcnMgYXJlIHByb3Blcmx5IGNvbm5lY3RlZCB0byB0aGUgYnV0dG9ucy5cbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiJkZDE5NGYwNC1lZmNmLTQzZjctOTRjZi01NWIzMDhkZmE5ZmMiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1XzAxVHFmVUs3UnR2WXlmcTlzQkNFN2gxcSIsInRvb2xfbmFtZSI6InN0ci1yZXBsYWNlLWVkaXRvciIsImlucHV0X2pzb24iOiJ7XCJjb21tYW5kXCI6IFwic3RyX3JlcGxhY2VcIiwgXCJwYXRoXCI6IFwic3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vRm9yZ290UGFzc3dvcmQuZm9ybVwiLCBcInN0cl9yZXBsYWNlX2VudHJpZXNcIjogW3tcIm9sZF9zdHJcIjogXCIgICAgICA8UHJvcGVydGllcz5cXG4gICAgICAgIDxQcm9wZXJ0eSBuYW1lPVxcXCJmb250XFxcIiB0eXBlPVxcXCJqYXZhLmF3dC5Gb250XFxcIiBlZGl0b3I9XFxcIm9yZy5uZXRiZWFucy5iZWFuaW5mby5lZGl0b3JzLkZvbnRFZGl0b3JcXFwiPlxcbiAgICAgICAgICA8Rm9udCBuYW1lPVxcXCJBcmlhbFxcXCIgc2l6ZT1cXFwiMTRcXFwiIHN0eWxlPVxcXCIxXFxcIi8+XFxuICAgICAgICA8L1Byb3BlcnR5PlxcbiAgICAgICAgPFByb3BlcnR5IG5hbWU9XFxcImljb25cXFwiIHR5cGU9XFxcImphdmF4LnN3aW5nLkljb25cXFwiIGVkaXRvcj1cXFwib3JnLm5ldGJlYW5zLm1vZHVsZXMuZm9ybS5lZGl0b3JzMi5JY29uRWRpdG9yXFxcIj5cXG4gICAgICAgICAgPEltYWdlIGljb25UeXBlPVxcXCIzXFxcIiBuYW1lPVxcXCIvSW1hZ2VzL3NlYXJjaC5wbmdcXFwiLz5cXG4gICAgICAgIDwvUHJvcGVydHk+XFxuICAgICAgICA8UHJvcGVydHkgbmFtZT1cXFwidGV4dFxcXCIgdHlwZT1cXFwiamF2YS5sYW5nLlN0cmluZ1xcXCIgdmFsdWU9XFxcIktpJiN4MWVjMzttIHRyYVxcXCIvPlxcbiAgICAgICAgPFByb3BlcnR5IG5hbWU9XFxcImN1cnNvclxcXCIgdHlwZT1cXFwiamF2YS5hd3QuQ3Vyc29yXFxcIiBlZGl0b3I9XFxcIm9yZy5uZXRiZWFucy5tb2R1bGVzLmZvcm0uZWRpdG9yczIuQ3Vyc29yRWRpdG9yXFxcIj5cXG4gICAgICAgICAgPENvbG9yIGlkPVxcXCJIYW5kIEN1cnNvclxcXCIvPlxcbiAgICAgICAgPC9Qcm9wZXJ0eT5cXG4gICAgICA8L1Byb3BlcnRpZXM+XCIsIFwibmV3X3N0clwiOiBcIiAgICAgIDxQcm9wZXJ0aWVzPlxcbiAgICAgICAgPFByb3BlcnR5IG5hbWU9XFxcImZvbnRcXFwiIHR5cGU9XFxcImphdmEuYXd0LkZvbnRcXFwiIGVkaXRvcj1cXFwib3JnLm5ldGJlYW5zLmJlYW5pbmZvLmVkaXRvcnMuRm9udEVkaXRvclxcXCI+XFxuICAgICAgICAgIDxGb250IG5hbWU9XFxcIkFyaWFsXFxcIiBzaXplPVxcXCIxNFxcXCIgc3R5bGU9XFxcIjFcXFwiLz5cXG4gICAgICAgIDwvUHJvcGVydHk+XFxuICAgICAgICA8UHJvcGVydHkgbmFtZT1cXFwiaWNvblxcXCIgdHlwZT1cXFwiamF2YXguc3dpbmcuSWNvblxcXCIgZWRpdG9yPVxcXCJvcmcubmV0YmVhbnMubW9kdWxlcy5mb3JtLmVkaXRvcnMyLkljb25FZGl0b3JcXFwiPlxcbiAgICAgICAgICA8SW1hZ2UgaWNvblR5cGU9XFxcIjNcXFwiIG5hbWU9XFxcIi9JbWFnZXMvc2VhcmNoLnBuZ1xcXCIvPlxcbiAgICAgICAgPC9Qcm9wZXJ0eT5cXG4gICAgICAgIDxQcm9wZXJ0eSBuYW1lPVxcXCJ0ZXh0XFxcIiB0eXBlPVxcXCJqYXZhLmxhbmcuU3RyaW5nXFxcIiB2YWx1ZT1cXFwiS2kmI3gxZWMzO20gdHJhXFxcIi8+XFxuICAgICAgICA8UHJvcGVydHkgbmFtZT1cXFwiY3Vyc29yXFxcIiB0eXBlPVxcXCJqYXZhLmF3dC5DdXJzb3JcXFwiIGVkaXRvcj1cXFwib3JnLm5ldGJlYW5zLm1vZHVsZXMuZm9ybS5lZGl0b3JzMi5DdXJzb3JFZGl0b3JcXFwiPlxcbiAgICAgICAgICA8Q29sb3IgaWQ9XFxcIkhhbmQgQ3Vyc29yXFxcIi8+XFxuICAgICAgICA8L1Byb3BlcnR5PlxcbiAgICAgIDwvUHJvcGVydGllcz5cXG4gICAgICA8RXZlbnRzPlxcbiAgICAgICAgPEV2ZW50SGFuZGxlciBldmVudD1cXFwiYWN0aW9uUGVyZm9ybWVkXFxcIiBsaXN0ZW5lcj1cXFwiamF2YS5hd3QuZXZlbnQuQWN0aW9uTGlzdGVuZXJcXFwiIHBhcmFtZXRlcnM9XFxcImphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50XFxcIiBoYW5kbGVyPVxcXCJidG5DaGVja0FjdGlvblBlcmZvcm1lZFxcXCIvPlxcbiAgICAgIDwvRXZlbnRzPlwiLCBcIm9sZF9zdHJfc3RhcnRfbGluZV9udW1iZXJcIjogMTU5LCBcIm9sZF9zdHJfZW5kX2xpbmVfbnVtYmVyXCI6IDE3MH0sIHtcIm9sZF9zdHJcIjogXCIgICAgICA8UHJvcGVydGllcz5cXG4gICAgICAgIDxQcm9wZXJ0eSBuYW1lPVxcXCJmb250XFxcIiB0eXBlPVxcXCJqYXZhLmF3dC5Gb250XFxcIiBlZGl0b3I9XFxcIm9yZy5uZXRiZWFucy5iZWFuaW5mby5lZGl0b3JzLkZvbnRFZGl0b3JcXFwiPlxcbiAgICAgICAgICA8Rm9udCBuYW1lPVxcXCJBcmlhbFxcXCIgc2l6ZT1cXFwiMTRcXFwiIHN0eWxlPVxcXCIxXFxcIi8+XFxuICAgICAgICA8L1Byb3BlcnR5PlxcbiAgICAgICAgPFByb3BlcnR5IG5hbWU9XFxcImljb25cXFwiIHR5cGU9XFxcImphdmF4LnN3aW5nLkljb25cXFwiIGVkaXRvcj1cXFwib3JnLm5ldGJlYW5zLm1vZHVsZXMuZm9ybS5lZGl0b3JzMi5JY29uRWRpdG9yXFxcIj5cXG4gICAgICAgICAgPEltYWdlIGljb25UeXBlPVxcXCIzXFxcIiBuYW1lPVxcXCIvSW1hZ2VzL3Jlc2V0LXBhc3N3b3JkLnBuZ1xcXCIvPlxcbiAgICAgICAgPC9Qcm9wZXJ0eT5cXG4gICAgICAgIDxQcm9wZXJ0eSBuYW1lPVxcXCJ0ZXh0XFxcIiB0eXBlPVxcXCJqYXZhLmxhbmcuU3RyaW5nXFxcIiB2YWx1ZT1cXFwiJiN4MTEwOyYjeDFlZDU7aSBtJiN4MWVhZDt0IGtoJiN4MWVhOTt1XFxcIi8+XFxuICAgICAgICA8UHJvcGVydHkgbmFtZT1cXFwiY3Vyc29yXFxcIiB0eXBlPVxcXCJqYXZhLmF3dC5DdXJzb3JcXFwiIGVkaXRvcj1cXFwib3JnLm5ldGJlYW5zLm1vZHVsZXMuZm9ybS5lZGl0b3JzMi5DdXJzb3JFZGl0b3JcXFwiPlxcbiAgICAgICAgICA8Q29sb3IgaWQ9XFxcIkhhbmQgQ3Vyc29yXFxcIi8+XFxuICAgICAgICA8L1Byb3BlcnR5PlxcbiAgICAgIDwvUHJvcGVydGllcz5cIiwgXCJuZXdfc3RyXCI6IFwiICAgICAgPFByb3BlcnRpZXM+XFxuICAgICAgICA8UHJvcGVydHkgbmFtZT1cXFwiZm9udFxcXCIgdHlwZT1cXFwiamF2YS5hd3QuRm9udFxcXCIgZWRpdG9yPVxcXCJvcmcubmV0YmVhbnMuYmVhbmluZm8uZWRpdG9ycy5Gb250RWRpdG9yXFxcIj5cXG4gICAgICAgICAgPEZvbnQgbmFtZT1cXFwiQXJpYWxcXFwiIHNpemU9XFxcIjE0XFxcIiBzdHlsZT1cXFwiMVxcXCIvPlxcbiAgICAgICAgPC9Qcm9wZXJ0eT5cXG4gICAgICAgIDxQcm9wZXJ0eSBuYW1lPVxcXCJpY29uXFxcIiB0eXBlPVxcXCJqYXZheC5zd2luZy5JY29uXFxcIiBlZGl0b3I9XFxcIm9yZy5uZXRiZWFucy5tb2R1bGVzLmZvcm0uZWRpdG9yczIuSWNvbkVkaXRvclxcXCI+XFxuICAgICAgICAgIDxJbWFnZSBpY29uVHlwZT1cXFwiM1xcXCIgbmFtZT1cXFwiL0ltYWdlcy9yZXNldC1wYXNzd29yZC5wbmdcXFwiLz5cXG4gICAgICAgIDwvUHJvcGVydHk+XFxuICAgICAgICA8UHJvcGVydHkgbmFtZT1cXFwidGV4dFxcXCIgdHlwZT1cXFwiamF2YS5sYW5nLlN0cmluZ1xcXCIgdmFsdWU9XFxcIiYjeDExMDsmI3gxZWQ1O2kgbSYjeDFlYWQ7dCBraCYjeDFlYTk7dVxcXCIvPlxcbiAgICAgICAgPFByb3BlcnR5IG5hbWU9XFxcImN1cnNvclxcXCIgdHlwZT1cXFwiamF2YS5hd3QuQ3Vyc29yXFxcIiBlZGl0b3I9XFxcIm9yZy5uZXRiZWFucy5tb2R1bGVzLmZvcm0uZWRpdG9yczIuQ3Vyc29yRWRpdG9yXFxcIj5cXG4gICAgICAgICAgPENvbG9yIGlkPVxcXCJIYW5kIEN1cnNvclxcXCIvPlxcbiAgICAgICAgPC9Qcm9wZXJ0eT5cXG4gICAgICA8L1Byb3BlcnRpZXM+XFxuICAgICAgPEV2ZW50cz5cXG4gICAgICAgIDxFdmVudEhhbmRsZXIgZXZlbnQ9XFxcImFjdGlvblBlcmZvcm1lZFxcXCIgbGlzdGVuZXI9XFxcImphdmEuYXd0LmV2ZW50LkFjdGlvbkxpc3RlbmVyXFxcIiBwYXJhbWV0ZXJzPVxcXCJqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudFxcXCIgaGFuZGxlcj1cXFwiYnRuQ2hhbmdlQWN0aW9uUGVyZm9ybWVkXFxcIi8+XFxuICAgICAgPC9FdmVudHM+XCIsIFwib2xkX3N0cl9zdGFydF9saW5lX251bWJlclwiOiAxNzcsIFwib2xkX3N0cl9lbmRfbGluZV9udW1iZXJcIjogMTg4fV19IiwibWNwX3NlcnZlcl9uYW1lIjoiIiwibWNwX3Rvb2xfbmFtZSI6IiJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiSSBzZWUgdGhlIGlzc3VlLiBUaGUgZm9ybSBmaWxlIGRvZXNuJ3QgaGF2ZSB0aGUgZXZlbnQgaGFuZGxlcnMgZm9yIHRoZSBDaGVjayBhbmQgQ2hhbmdlIGJ1dHRvbnMuIFdlIG5lZWQgdG8gdXBkYXRlIHRoZSBmb3JtIGZpbGUgdG8gaW5jbHVkZSB0aGVzZSBldmVudCBoYW5kbGVycy4gTGV0J3MgbW9kaWZ5IHRoZSBmb3JtIGZpbGU6XG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJIZXJlJ3MgdGhlIHJlc3VsdCBvZiBydW5uaW5nIGBjYXQgLW5gIG9uIHNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL0ZvcmdvdFBhc3N3b3JkLmZvcm06XG4gICAgIDFcdDw/eG1sIHZlcnNpb249XCIxLjBcIiBlbmNvZGluZz1cIlVURi04XCIgPz5cbiAgICAgMlx0XG4gICAgIDNcdDxGb3JtIHZlcnNpb249XCIxLjNcIiBtYXhWZXJzaW9uPVwiMS45XCIgdHlwZT1cIm9yZy5uZXRiZWFucy5tb2R1bGVzLmZvcm0uZm9ybWluZm8uSkZyYW1lRm9ybUluZm9cIj5cbiAgICAgNFx0ICA8UHJvcGVydGllcz5cbiAgICAgNVx0ICAgIDxQcm9wZXJ0eSBuYW1lPVwiZGVmYXVsdENsb3NlT3BlcmF0aW9uXCIgdHlwZT1cImludFwiIHZhbHVlPVwiM1wiLz5cbiAgICAgNlx0ICA8L1Byb3BlcnRpZXM+XG4gICAgIDdcdCAgPFN5bnRoZXRpY1Byb3BlcnRpZXM+XG4gICAgIDhcdCAgICA8U3ludGhldGljUHJvcGVydHkgbmFtZT1cImZvcm1TaXplUG9saWN5XCIgdHlwZT1cImludFwiIHZhbHVlPVwiMVwiLz5cbiAgICAgOVx0ICAgIDxTeW50aGV0aWNQcm9wZXJ0eSBuYW1lPVwiZ2VuZXJhdGVDZW50ZXJcIiB0eXBlPVwiYm9vbGVhblwiIHZhbHVlPVwiZmFsc2VcIi8+XG4gICAgMTBcdCAgPC9TeW50aGV0aWNQcm9wZXJ0aWVzPlxuICAgIDExXHQgIDxBdXhWYWx1ZXM+XG4gICAgMTJcdCAgICA8QXV4VmFsdWUgbmFtZT1cIkZvcm1TZXR0aW5nc19hdXRvUmVzb3VyY2luZ1wiIHR5cGU9XCJqYXZhLmxhbmcuSW50ZWdlclwiIHZhbHVlPVwiMFwiLz5cbiAgICAxM1x0ICAgIDxBdXhWYWx1ZSBuYW1lPVwiRm9ybVNldHRpbmdzX2F1dG9TZXRDb21wb25lbnROYW1lXCIgdHlwZT1cImphdmEubGFuZy5Cb29sZWFuXCIgdmFsdWU9XCJmYWxzZVwiLz5cbiAgICAxNFx0ICAgIDxBdXhWYWx1ZSBuYW1lPVwiRm9ybVNldHRpbmdzX2dlbmVyYXRlRlFOXCIgdHlwZT1cImphdmEubGFuZy5Cb29sZWFuXCIgdmFsdWU9XCJ0cnVlXCIvPlxuICAgIDE1XHQgICAgPEF1eFZhbHVlIG5hbWU9XCJGb3JtU2V0dGluZ3NfZ2VuZXJhdGVNbmVtb25pY3NDb2RlXCIgdHlwZT1cImphdmEubGFuZy5Cb29sZWFuXCIgdmFsdWU9XCJmYWxzZVwiLz5cbiAgICAxNlx0ICAgIDxBdXhWYWx1ZSBuYW1lPVwiRm9ybVNldHRpbmdzX2kxOG5BdXRvTW9kZVwiIHR5cGU9XCJqYXZhLmxhbmcuQm9vbGVhblwiIHZhbHVlPVwiZmFsc2VcIi8+XG4gICAgMTdcdCAgICA8QXV4VmFsdWUgbmFtZT1cIkZvcm1TZXR0aW5nc19sYXlvdXRDb2RlVGFyZ2V0XCIgdHlwZT1cImphdmEubGFuZy5JbnRlZ2VyXCIgdmFsdWU9XCIxXCIvPlxuICAgIDE4XHQgICAgPEF1eFZhbHVlIG5hbWU9XCJGb3JtU2V0dGluZ3NfbGlzdGVuZXJHZW5lcmF0aW9uU3R5bGVcIiB0eXBlPVwiamF2YS5sYW5nLkludGVnZXJcIiB2YWx1ZT1cIjBcIi8+XG4gICAgMTlcdCAgICA8QXV4VmFsdWUgbmFtZT1cIkZvcm1TZXR0aW5nc192YXJpYWJsZXNMb2NhbFwiIHR5cGU9XCJqYXZhLmxhbmcuQm9vbGVhblwiIHZhbHVlPVwiZmFsc2VcIi8+XG4gICAgMjBcdCAgICA8QXV4VmFsdWUgbmFtZT1cIkZvcm1TZXR0aW5nc192YXJpYWJsZXNNb2RpZmllclwiIHR5cGU9XCJqYXZhLmxhbmcuSW50ZWdlclwiIHZhbHVlPVwiMlwiLz5cbiAgICAyMVx0ICA8L0F1eFZhbHVlcz5cbiAgICAyMlx0XG4gICAgMjNcdCAgPExheW91dD5cbiAgICAyNFx0ICAgIDxEaW1lbnNpb25MYXlvdXQgZGltPVwiMFwiPlxuICAgIDI1XHQgICAgICA8R3JvdXAgdHlwZT1cIjEwM1wiIGdyb3VwQWxpZ25tZW50PVwiMFwiIGF0dHJpYnV0ZXM9XCIwXCI+XG4gICAgMjZcdCAgICAgICAgICA8R3JvdXAgdHlwZT1cIjEwMlwiIGF0dHJpYnV0ZXM9XCIwXCI+XG4gICAgMjdcdCAgICAgICAgICAgICAgPEdyb3VwIHR5cGU9XCIxMDNcIiBncm91cEFsaWdubWVudD1cIjBcIiBhdHRyaWJ1dGVzPVwiMFwiPlxuICAgIDI4XHQgICAgICAgICAgICAgICAgICA8R3JvdXAgdHlwZT1cIjEwMlwiIGF0dHJpYnV0ZXM9XCIwXCI+XG4gICAgMjlcdCAgICAgICAgICAgICAgICAgICAgICA8RW1wdHlTcGFjZSBtaW49XCIxMTBcIiBwcmVmPVwiMTEwXCIgbWF4PVwiLTJcIiBhdHRyaWJ1dGVzPVwiMFwiLz5cbiAgICAzMFx0ICAgICAgICAgICAgICAgICAgICAgIDxDb21wb25lbnQgaWQ9XCJqTGFiZWwxXCIgbWluPVwiLTJcIiBtYXg9XCItMlwiIGF0dHJpYnV0ZXM9XCIwXCIvPlxuICAgIDMxXHQgICAgICAgICAgICAgICAgICA8L0dyb3VwPlxuICAgIDMyXHQgICAgICAgICAgICAgICAgICA8R3JvdXAgdHlwZT1cIjEwMlwiIGF0dHJpYnV0ZXM9XCIwXCI+XG4gICAgMzNcdCAgICAgICAgICAgICAgICAgICAgICA8RW1wdHlTcGFjZSBtaW49XCI2MVwiIHByZWY9XCI2MVwiIG1heD1cIi0yXCIgYXR0cmlidXRlcz1cIjBcIi8+XG4gICAgMzRcdCAgICAgICAgICAgICAgICAgICAgICA8Q29tcG9uZW50IGlkPVwialNlcGFyYXRvcjFcIiBtaW49XCItMlwiIHByZWY9XCIzNzBcIiBtYXg9XCItMlwiIGF0dHJpYnV0ZXM9XCIwXCIvPlxuICAgIDM1XHQgICAgICAgICAgICAgICAgICA8L0dyb3VwPlxuICAgIDM2XHQgICAgICAgICAgICAgICAgICA8R3JvdXAgdHlwZT1cIjEwMlwiIGF0dHJpYnV0ZXM9XCIwXCI+XG4gICAgMzdcdCAgICAgICAgICAgICAgICAgICAgICA8RW1wdHlTcGFjZSBtaW49XCI2MVwiIHByZWY9XCI2MVwiIG1heD1cIi0yXCIgYXR0cmlidXRlcz1cIjBcIi8+XG4gICAgMzhcdCAgICAgICAgICAgICAgICAgICAgICA8Q29tcG9uZW50IGlkPVwiakxhYmVsMlwiIG1pbj1cIi0yXCIgbWF4PVwiLTJcIiBhdHRyaWJ1dGVzPVwiMFwiLz5cbiAgICAzOVx0ICAgICAgICAgICAgICAgICAgICAgIDxFbXB0eVNwYWNlIG1pbj1cIjU2XCIgcHJlZj1cIjU2XCIgbWF4PVwiLTJcIiBhdHRyaWJ1dGVzPVwiMFwiLz5cbiAgICA0MFx0ICAgICAgICAgICAgICAgICAgICAgIDxDb21wb25lbnQgaWQ9XCJ0eHRQaG9uZVwiIG1pbj1cIi0yXCIgcHJlZj1cIjIxMFwiIG1heD1cIi0yXCIgYXR0cmlidXRlcz1cIjBcIi8+XG4gICAgNDFcdCAgICAgICAgICAgICAgICAgIDwvR3JvdXA+XG4gICAgNDJcdCAgICAgICAgICAgICAgICAgIDxHcm91cCB0eXBlPVwiMTAyXCIgYXR0cmlidXRlcz1cIjBcIj5cbiAgICA0M1x0ICAgICAgICAgICAgICAgICAgICAgIDxFbXB0eVNwYWNlIG1pbj1cIjYxXCIgcHJlZj1cIjYxXCIgbWF4PVwiLTJcIiBhdHRyaWJ1dGVzPVwiMFwiLz5cbiAgICA0NFx0ICAgICAgICAgICAgICAgICAgICAgIDxDb21wb25lbnQgaWQ9XCJsYk5ld1Bhc3N3b3JkXCIgbWluPVwiLTJcIiBtYXg9XCItMlwiIGF0dHJpYnV0ZXM9XCIwXCIvPlxuICAgIDQ1XHQgICAgICAgICAgICAgICAgICAgICAgPEVtcHR5U3BhY2UgbWluPVwiNTdcIiBwcmVmPVwiNTdcIiBtYXg9XCItMlwiIGF0dHJpYnV0ZXM9XCIwXCIvPlxuICAgIDQ2XHQgICAgICAgICAgICAgICAgICAgICAgPEdyb3VwIHR5cGU9XCIxMDNcIiBncm91cEFsaWdubWVudD1cIjBcIiBhdHRyaWJ1dGVzPVwiMFwiPlxuICAgIDQ3XHQgICAgICAgICAgICAgICAgICAgICAgICAgIDxDb21wb25lbnQgaWQ9XCJ0eHRQYXNzd29yZFwiIG1pbj1cIi0yXCIgcHJlZj1cIjIxMFwiIG1heD1cIi0yXCIgYXR0cmlidXRlcz1cIjBcIi8+XG4gICAgNDhcdCAgICAgICAgICAgICAgICAgICAgICAgICAgPEdyb3VwIHR5cGU9XCIxMDJcIiBhdHRyaWJ1dGVzPVwiMFwiPlxuICAgIDQ5XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8RW1wdHlTcGFjZSBtaW49XCIxMDJcIiBwcmVmPVwiMTAyXCIgbWF4PVwiLTJcIiBhdHRyaWJ1dGVzPVwiMFwiLz5cbiAgICA1MFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENvbXBvbmVudCBpZD1cImJ0bkNoZWNrXCIgbWluPVwiLTJcIiBtYXg9XCItMlwiIGF0dHJpYnV0ZXM9XCIwXCIvPlxuICAgIDUxXHQgICAgICAgICAgICAgICAgICAgICAgICAgIDwvR3JvdXA+XG4gICAgNTJcdCAgICAgICAgICAgICAgICAgICAgICA8L0dyb3VwPlxuICAgIDUzXHQgICAgICAgICAgICAgICAgICA8L0dyb3VwPlxuICAgIDU0XHQgICAgICAgICAgICAgICAgICA8R3JvdXAgdHlwZT1cIjEwM1wiIGFsaWdubWVudD1cIjBcIiBncm91cEFsaWdubWVudD1cIjFcIiBtYXg9XCItMlwiIGF0dHJpYnV0ZXM9XCIwXCI+XG4gICAgNTVcdCAgICAgICAgICAgICAgICAgICAgICA8R3JvdXAgdHlwZT1cIjEwMlwiIGF0dHJpYnV0ZXM9XCIwXCI+XG4gICAgNTZcdCAgICAgICAgICAgICAgICAgICAgICAgICAgPEVtcHR5U3BhY2UgbWluPVwiNjBcIiBwcmVmPVwiNjBcIiBtYXg9XCItMlwiIGF0dHJpYnV0ZXM9XCIwXCIvPlxuICAgIDU3XHQgICAgICAgICAgICAgICAgICAgICAgICAgIDxDb21wb25lbnQgaWQ9XCJidG5FeGl0XCIgbWluPVwiLTJcIiBtYXg9XCItMlwiIGF0dHJpYnV0ZXM9XCIwXCIvPlxuICAgIDU4XHQgICAgICAgICAgICAgICAgICAgICAgICAgIDxFbXB0eVNwYWNlIG1heD1cIjMyNzY3XCIgYXR0cmlidXRlcz1cIjBcIi8+XG4gICAgNTlcdCAgICAgICAgICAgICAgICAgICAgICAgICAgPENvbXBvbmVudCBpZD1cImJ0bkNoYW5nZVwiIG1pbj1cIi0yXCIgbWF4PVwiLTJcIiBhdHRyaWJ1dGVzPVwiMFwiLz5cbiAgICA2MFx0ICAgICAgICAgICAgICAgICAgICAgIDwvR3JvdXA+XG4gICAgNjFcdCAgICAgICAgICAgICAgICAgICAgICA8R3JvdXAgdHlwZT1cIjEwMlwiIGF0dHJpYnV0ZXM9XCIwXCI+XG4gICAgNjJcdCAgICAgICAgICAgICAgICAgICAgICAgICAgPEVtcHR5U3BhY2UgbWluPVwiNjFcIiBwcmVmPVwiNjFcIiBtYXg9XCItMlwiIGF0dHJpYnV0ZXM9XCIwXCIvPlxuICAgIDYzXHQgICAgICAgICAgICAgICAgICAgICAgICAgIDxDb21wb25lbnQgaWQ9XCJsYkNvbmZpcm1QYXNzd29yZFwiIG1pbj1cIi0yXCIgbWF4PVwiLTJcIiBhdHRyaWJ1dGVzPVwiMFwiLz5cbiAgICA2NFx0ICAgICAgICAgICAgICAgICAgICAgICAgICA8RW1wdHlTcGFjZSBtaW49XCIxOFwiIHByZWY9XCIxOFwiIG1heD1cIi0yXCIgYXR0cmlidXRlcz1cIjBcIi8+XG4gICAgNjVcdCAgICAgICAgICAgICAgICAgICAgICAgICAgPENvbXBvbmVudCBpZD1cInR4dENvbmZpcm1QYXNzd29yZFwiIG1pbj1cIi0yXCIgcHJlZj1cIjIxMVwiIG1heD1cIi0yXCIgYXR0cmlidXRlcz1cIjBcIi8+XG4gICAgNjZcdCAgICAgICAgICAgICAgICAgICAgICA8L0dyb3VwPlxuICAgIDY3XHQgICAgICAgICAgICAgICAgICA8L0dyb3VwPlxuICAgIDY4XHQgICAgICAgICAgICAgIDwvR3JvdXA+XG4gICAgNjlcdCAgICAgICAgICAgICAgPEVtcHR5U3BhY2UgbWluPVwiLTJcIiBwcmVmPVwiNjlcIiBtYXg9XCItMlwiIGF0dHJpYnV0ZXM9XCIwXCIvPlxuICAgIDcwXHQgICAgICAgICAgPC9Hcm91cD5cbiAgICA3MVx0ICAgICAgPC9Hcm91cD5cbiAgICA3Mlx0ICAgIDwvRGltZW5zaW9uTGF5b3V0PlxuICAgIDczXHQgICAgPERpbWVuc2lvbkxheW91dCBkaW09XCIxXCI+XG4gICAgNzRcdCAgICAgIDxHcm91cCB0eXBlPVwiMTAzXCIgZ3JvdXBBbGlnbm1lbnQ9XCIwXCIgYXR0cmlidXRlcz1cIjBcIj5cbiAgICA3NVx0ICAgICAgICAgIDxHcm91cCB0eXBlPVwiMTAyXCIgYXR0cmlidXRlcz1cIjBcIj5cbiAgICA3Nlx0ICAgICAgICAgICAgICA8RW1wdHlTcGFjZSBtaW49XCI0MFwiIHByZWY9XCI0MFwiIG1heD1cIi0yXCIgYXR0cmlidXRlcz1cIjBcIi8+XG4gICAgNzdcdCAgICAgICAgICAgICAgPENvbXBvbmVudCBpZD1cImpMYWJlbDFcIiBtaW49XCItMlwiIG1heD1cIi0yXCIgYXR0cmlidXRlcz1cIjBcIi8+XG4gICAgNzhcdCAgICAgICAgICAgICAgPEVtcHR5U3BhY2UgbWluPVwiMTRcIiBwcmVmPVwiMTRcIiBtYXg9XCItMlwiIGF0dHJpYnV0ZXM9XCIwXCIvPlxuICAgIDc5XHQgICAgICAgICAgICAgIDxDb21wb25lbnQgaWQ9XCJqU2VwYXJhdG9yMVwiIG1pbj1cIi0yXCIgcHJlZj1cIjEwXCIgbWF4PVwiLTJcIiBhdHRyaWJ1dGVzPVwiMFwiLz5cbiAgICA4MFx0ICAgICAgICAgICAgICA8RW1wdHlTcGFjZSBtaW49XCIxMlwiIHByZWY9XCIxMlwiIG1heD1cIi0yXCIgYXR0cmlidXRlcz1cIjBcIi8+XG4gICAgODFcdCAgICAgICAgICAgICAgPEdyb3VwIHR5cGU9XCIxMDNcIiBncm91cEFsaWdubWVudD1cIjBcIiBhdHRyaWJ1dGVzPVwiMFwiPlxuICAgIDgyXHQgICAgICAgICAgICAgICAgICA8R3JvdXAgdHlwZT1cIjEwMlwiIGF0dHJpYnV0ZXM9XCIwXCI+XG4gICAgODNcdCAgICAgICAgICAgICAgICAgICAgICA8RW1wdHlTcGFjZSBtaW49XCIzXCIgcHJlZj1cIjNcIiBtYXg9XCItMlwiIGF0dHJpYnV0ZXM9XCIwXCIvPlxuICAgIDg0XHQgICAgICAgICAgICAgICAgICAgICAgPENvbXBvbmVudCBpZD1cImpMYWJlbDJcIiBtaW49XCItMlwiIG1heD1cIi0yXCIgYXR0cmlidXRlcz1cIjBcIi8+XG4gICAgODVcdCAgICAgICAgICAgICAgICAgIDwvR3JvdXA+XG4gICAgODZcdCAgICAgICAgICAgICAgICAgIDxDb21wb25lbnQgaWQ9XCJ0eHRQaG9uZVwiIG1pbj1cIi0yXCIgbWF4PVwiLTJcIiBhdHRyaWJ1dGVzPVwiMFwiLz5cbiAgICA4N1x0ICAgICAgICAgICAgICA8L0dyb3VwPlxuICAgIDg4XHQgICAgICAgICAgICAgIDxFbXB0eVNwYWNlIG1pbj1cIjE4XCIgcHJlZj1cIjE4XCIgbWF4PVwiLTJcIiBhdHRyaWJ1dGVzPVwiMFwiLz5cbiAgICA4OVx0ICAgICAgICAgICAgICA8R3JvdXAgdHlwZT1cIjEwM1wiIGdyb3VwQWxpZ25tZW50PVwiMFwiIGF0dHJpYnV0ZXM9XCIwXCI+XG4gICAgOTBcdCAgICAgICAgICAgICAgICAgIDxHcm91cCB0eXBlPVwiMTAyXCIgYXR0cmlidXRlcz1cIjBcIj5cbiAgICA5MVx0ICAgICAgICAgICAgICAgICAgICAgIDxFbXB0eVNwYWNlIG1pbj1cIjNcIiBwcmVmPVwiM1wiIG1heD1cIi0yXCIgYXR0cmlidXRlcz1cIjBcIi8+XG4gICAgOTJcdCAgICAgICAgICAgICAgICAgICAgICA8Q29tcG9uZW50IGlkPVwibGJOZXdQYXNzd29yZFwiIG1pbj1cIi0yXCIgbWF4PVwiLTJcIiBhdHRyaWJ1dGVzPVwiMFwiLz5cbiAgICA5M1x0ICAgICAgICAgICAgICAgICAgPC9Hcm91cD5cbiAgICA5NFx0ICAgICAgICAgICAgICAgICAgPENvbXBvbmVudCBpZD1cInR4dFBhc3N3b3JkXCIgbWluPVwiLTJcIiBtYXg9XCItMlwiIGF0dHJpYnV0ZXM9XCIwXCIvPlxuICAgIDk1XHQgICAgICAgICAgICAgICAgICA8R3JvdXAgdHlwZT1cIjEwMlwiIGF0dHJpYnV0ZXM9XCIwXCI+XG4gICAgOTZcdCAgICAgICAgICAgICAgICAgICAgICA8RW1wdHlTcGFjZSBtaW49XCIyXCIgcHJlZj1cIjJcIiBtYXg9XCItMlwiIGF0dHJpYnV0ZXM9XCIwXCIvPlxuICAgIDk3XHQgICAgICAgICAgICAgICAgICAgICAgPENvbXBvbmVudCBpZD1cImJ0bkNoZWNrXCIgbWluPVwiLTJcIiBwcmVmPVwiMzBcIiBtYXg9XCItMlwiIGF0dHJpYnV0ZXM9XCIwXCIvPlxuICAgIDk4XHQgICAgICAgICAgICAgICAgICA8L0dyb3VwPlxuICAgIDk5XHQgICAgICAgICAgICAgIDwvR3JvdXA+XG4gICAxMDBcdCAgICAgICAgICAgICAgPEVtcHR5U3BhY2UgbWluPVwiOFwiIHByZWY9XCI4XCIgbWF4PVwiLTJcIiBhdHRyaWJ1dGVzPVwiMFwiLz5cbiAgIDEwMVx0ICAgICAgICAgICAgICA8R3JvdXAgdHlwZT1cIjEwM1wiIGdyb3VwQWxpZ25tZW50PVwiMFwiIGF0dHJpYnV0ZXM9XCIwXCI+XG4gICAxMDJcdCAgICAgICAgICAgICAgICAgIDxHcm91cCB0eXBlPVwiMTAyXCIgYXR0cmlidXRlcz1cIjBcIj5cbiAgIDEwM1x0ICAgICAgICAgICAgICAgICAgICAgIDxFbXB0eVNwYWNlIG1pbj1cIjNcIiBwcmVmPVwiM1wiIG1heD1cIi0yXCIgYXR0cmlidXRlcz1cIjBcIi8+XG4gICAxMDRcdCAgICAgICAgICAgICAgICAgICAgICA8Q29tcG9uZW50IGlkPVwibGJDb25maXJtUGFzc3dvcmRcIiBtaW49XCItMlwiIG1heD1cIi0yXCIgYXR0cmlidXRlcz1cIjBcIi8+XG4gICAxMDVcdCAgICAgICAgICAgICAgICAgIDwvR3JvdXA+XG4gICAxMDZcdCAgICAgICAgICAgICAgICAgIDxDb21wb25lbnQgaWQ9XCJ0eHRDb25maXJtUGFzc3dvcmRcIiBtaW49XCItMlwiIG1heD1cIi0yXCIgYXR0cmlidXRlcz1cIjBcIi8+XG4gICAxMDdcdCAgICAgICAgICAgICAgPC9Hcm91cD5cbiAgIDEwOFx0ICAgICAgICAgICAgICA8RW1wdHlTcGFjZSBtaW49XCIzMFwiIHByZWY9XCIzMFwiIG1heD1cIi0yXCIgYXR0cmlidXRlcz1cIjBcIi8+XG4gICAxMDlcdCAgICAgICAgICAgICAgPEdyb3VwIHR5cGU9XCIxMDNcIiBncm91cEFsaWdubWVudD1cIjNcIiBhdHRyaWJ1dGVzPVwiMFwiPlxuICAgMTEwXHQgICAgICAgICAgICAgICAgICA8Q29tcG9uZW50IGlkPVwiYnRuRXhpdFwiIGFsaWdubWVudD1cIjNcIiBtaW49XCItMlwiIHByZWY9XCIzMFwiIG1heD1cIi0yXCIgYXR0cmlidXRlcz1cIjBcIi8+XG4gICAxMTFcdCAgICAgICAgICAgICAgICAgIDxDb21wb25lbnQgaWQ9XCJidG5DaGFuZ2VcIiBhbGlnbm1lbnQ9XCIzXCIgbWluPVwiLTJcIiBwcmVmPVwiMzBcIiBtYXg9XCItMlwiIGF0dHJpYnV0ZXM9XCIwXCIvPlxuICAgMTEyXHQgICAgICAgICAgICAgIDwvR3JvdXA+XG4gICAxMTNcdCAgICAgICAgICAgICAgPEVtcHR5U3BhY2UgcHJlZj1cIjQwXCIgbWF4PVwiMzI3NjdcIiBhdHRyaWJ1dGVzPVwiMFwiLz5cbiAgIDExNFx0ICAgICAgICAgIDwvR3JvdXA+XG4gICAxMTVcdCAgICAgIDwvR3JvdXA+XG4gICAxMTZcdCAgICA8L0RpbWVuc2lvbkxheW91dD5cbiAgIDExN1x0ICA8L0xheW91dD5cbiAgIDExOFx0ICA8U3ViQ29tcG9uZW50cz5cbiAgIDExOVx0ICAgIDxDb21wb25lbnQgY2xhc3M9XCJqYXZheC5zd2luZy5KTGFiZWxcIiBuYW1lPVwiakxhYmVsMVwiPlxuICAgMTIwXHQgICAgICA8UHJvcGVydGllcz5cbiAgIDEyMVx0ICAgICAgICA8UHJvcGVydHkgbmFtZT1cImZvbnRcIiB0eXBlPVwiamF2YS5hd3QuRm9udFwiIGVkaXRvcj1cIm9yZy5uZXRiZWFucy5iZWFuaW5mby5lZGl0b3JzLkZvbnRFZGl0b3JcIj5cbiAgIDEyMlx0ICAgICAgICAgIDxGb250IG5hbWU9XCJBcmlhbFwiIHNpemU9XCIzNlwiIHN0eWxlPVwiMVwiLz5cbiAgIDEyM1x0ICAgICAgICA8L1Byb3BlcnR5PlxuICAgMTI0XHQgICAgICAgIDxQcm9wZXJ0eSBuYW1lPVwiZm9yZWdyb3VuZFwiIHR5cGU9XCJqYXZhLmF3dC5Db2xvclwiIGVkaXRvcj1cIm9yZy5uZXRiZWFucy5iZWFuaW5mby5lZGl0b3JzLkNvbG9yRWRpdG9yXCI+XG4gICAxMjVcdCAgICAgICAgICA8Q29sb3IgYmx1ZT1cIjBcIiBncmVlbj1cImEyXCIgaWQ9XCJBY3Rpb25zLlllbGxvd1wiIHBhbGV0dGU9XCIzXCIgcmVkPVwiZWRcIiB0eXBlPVwicGFsZXR0ZVwiLz5cbiAgIDEyNlx0ICAgICAgICA8L1Byb3BlcnR5PlxuICAgMTI3XHQgICAgICAgIDxQcm9wZXJ0eSBuYW1lPVwidGV4dFwiIHR5cGU9XCJqYXZhLmxhbmcuU3RyaW5nXCIgdmFsdWU9XCImI3gxMTA7JiN4MWVkNDtJIE0mI3gxZWFjO1QgS0gmI3gxZWE4O1VcIi8+XG4gICAxMjhcdCAgICAgIDwvUHJvcGVydGllcz5cbiAgIDEyOVx0ICAgIDwvQ29tcG9uZW50PlxuICAgMTMwXHQgICAgPENvbXBvbmVudCBjbGFzcz1cImphdmF4LnN3aW5nLkpMYWJlbFwiIG5hbWU9XCJqTGFiZWwyXCI+XG4gICAxMzFcdCAgICAgIDxQcm9wZXJ0aWVzPlxuICAgMTMyXHQgICAgICAgIDxQcm9wZXJ0eSBuYW1lPVwiZm9udFwiIHR5cGU9XCJqYXZhLmF3dC5Gb250XCIgZWRpdG9yPVwib3JnLm5ldGJlYW5zLmJlYW5pbmZvLmVkaXRvcnMuRm9udEVkaXRvclwiPlxuICAgMTMzXHQgICAgICAgICAgPEZvbnQgbmFtZT1cIkFyaWFsXCIgc2l6ZT1cIjE0XCIgc3R5bGU9XCIxXCIvPlxuICAgMTM0XHQgICAgICAgIDwvUHJvcGVydHk+XG4gICAxMzVcdCAgICAgICAgPFByb3BlcnR5IG5hbWU9XCJ0ZXh0XCIgdHlwZT1cImphdmEubGFuZy5TdHJpbmdcIiB2YWx1ZT1cIlMmI3gxZWQxOyAmI3gxMTE7aSYjeDFlYzc7biB0aG8mI3gxZWExO2k6IFwiLz5cbiAgIDEzNlx0ICAgICAgPC9Qcm9wZXJ0aWVzPlxuICAgMTM3XHQgICAgPC9Db21wb25lbnQ+XG4gICAxMzhcdCAgICA8Q29tcG9uZW50IGNsYXNzPVwiamF2YXguc3dpbmcuSkxhYmVsXCIgbmFtZT1cImxiTmV3UGFzc3dvcmRcIj5cbiAgIDEzOVx0ICAgICAgPFByb3BlcnRpZXM+XG4gICAxNDBcdCAgICAgICAgPFByb3BlcnR5IG5hbWU9XCJmb250XCIgdHlwZT1cImphdmEuYXd0LkZvbnRcIiBlZGl0b3I9XCJvcmcubmV0YmVhbnMuYmVhbmluZm8uZWRpdG9ycy5Gb250RWRpdG9yXCI+XG4gICAxNDFcdCAgICAgICAgICA8Rm9udCBuYW1lPVwiQXJpYWxcIiBzaXplPVwiMTRcIiBzdHlsZT1cIjFcIi8+XG4gICAxNDJcdCAgICAgICAgPC9Qcm9wZXJ0eT5cbiAgIDE0M1x0ICAgICAgICA8UHJvcGVydHkgbmFtZT1cInRleHRcIiB0eXBlPVwiamF2YS5sYW5nLlN0cmluZ1wiIHZhbHVlPVwiTSYjeDFlYWQ7dCBraCYjeDFlYTk7dSBtJiN4MWVkYjtpOlwiLz5cbiAgIDE0NFx0ICAgICAgPC9Qcm9wZXJ0aWVzPlxuICAgMTQ1XHQgICAgPC9Db21wb25lbnQ+XG4gICAxNDZcdCAgICA8Q29tcG9uZW50IGNsYXNzPVwiamF2YXguc3dpbmcuSkxhYmVsXCIgbmFtZT1cImxiQ29uZmlybVBhc3N3b3JkXCI+XG4gICAxNDdcdCAgICAgIDxQcm9wZXJ0aWVzPlxuICAgMTQ4XHQgICAgICAgIDxQcm9wZXJ0eSBuYW1lPVwiZm9udFwiIHR5cGU9XCJqYXZhLmF3dC5Gb250XCIgZWRpdG9yPVwib3JnLm5ldGJlYW5zLmJlYW5pbmZvLmVkaXRvcnMuRm9udEVkaXRvclwiPlxuICAgMTQ5XHQgICAgICAgICAgPEZvbnQgbmFtZT1cIkFyaWFsXCIgc2l6ZT1cIjE0XCIgc3R5bGU9XCIxXCIvPlxuICAgMTUwXHQgICAgICAgIDwvUHJvcGVydHk+XG4gICAxNTFcdCAgICAgICAgPFByb3BlcnR5IG5hbWU9XCJ0ZXh0XCIgdHlwZT1cImphdmEubGFuZy5TdHJpbmdcIiB2YWx1ZT1cIlgmI3hlMTtjIG5oJiN4MWVhZDtuIG0mI3gxZWFkO3Qga2gmI3gxZWE5O3U6XCIvPlxuICAgMTUyXHQgICAgICA8L1Byb3BlcnRpZXM+XG4gICAxNTNcdCAgICA8L0NvbXBvbmVudD5cbiAgIDE1NFx0ICAgIDxDb21wb25lbnQgY2xhc3M9XCJqYXZheC5zd2luZy5KU2VwYXJhdG9yXCIgbmFtZT1cImpTZXBhcmF0b3IxXCI+XG4gICAxNTVcdCAgICA8L0NvbXBvbmVudD5cbiAgIDE1Nlx0ICAgIDxDb21wb25lbnQgY2xhc3M9XCJqYXZheC5zd2luZy5KVGV4dEZpZWxkXCIgbmFtZT1cInR4dFBob25lXCI+XG4gICAxNTdcdCAgICA8L0NvbXBvbmVudD5cbiAgIDE1OFx0ICAgIDxDb21wb25lbnQgY2xhc3M9XCJqYXZheC5zd2luZy5KQnV0dG9uXCIgbmFtZT1cImJ0bkNoZWNrXCI+XG4gICAxNTlcdCAgICAgIDxQcm9wZXJ0aWVzPlxuICAgMTYwXHQgICAgICAgIDxQcm9wZXJ0eSBuYW1lPVwiZm9udFwiIHR5cGU9XCJqYXZhLmF3dC5Gb250XCIgZWRpdG9yPVwib3JnLm5ldGJlYW5zLmJlYW5pbmZvLmVkaXRvcnMuRm9udEVkaXRvclwiPlxuICAgMTYxXHQgICAgICAgICAgPEZvbnQgbmFtZT1cIkFyaWFsXCIgc2l6ZT1cIjE0XCIgc3R5bGU9XCIxXCIvPlxuICAgMTYyXHQgICAgICAgIDwvUHJvcGVydHk+XG4gICAxNjNcdCAgICAgICAgPFByb3BlcnR5IG5hbWU9XCJpY29uXCIgdHlwZT1cImphdmF4LnN3aW5nLkljb25cIiBlZGl0b3I9XCJvcmcubmV0YmVhbnMubW9kdWxlcy5mb3JtLmVkaXRvcnMyLkljb25FZGl0b3JcIj5cbiAgIDE2NFx0ICAgICAgICAgIDxJbWFnZSBpY29uVHlwZT1cIjNcIiBuYW1lPVwiL0ltYWdlcy9zZWFyY2gucG5nXCIvPlxuICAgMTY1XHQgICAgICAgIDwvUHJvcGVydHk+XG4gICAxNjZcdCAgICAgICAgPFByb3BlcnR5IG5hbWU9XCJ0ZXh0XCIgdHlwZT1cImphdmEubGFuZy5TdHJpbmdcIiB2YWx1ZT1cIktpJiN4MWVjMzttIHRyYVwiLz5cbiAgIDE2N1x0ICAgICAgICA8UHJvcGVydHkgbmFtZT1cImN1cnNvclwiIHR5cGU9XCJqYXZhLmF3dC5DdXJzb3JcIiBlZGl0b3I9XCJvcmcubmV0YmVhbnMubW9kdWxlcy5mb3JtLmVkaXRvcnMyLkN1cnNvckVkaXRvclwiPlxuICAgMTY4XHQgICAgICAgICAgPENvbG9yIGlkPVwiSGFuZCBDdXJzb3JcIi8+XG4gICAxNjlcdCAgICAgICAgPC9Qcm9wZXJ0eT5cbiAgIDE3MFx0ICAgICAgPC9Qcm9wZXJ0aWVzPlxuICAgMTcxXHQgICAgPC9Db21wb25lbnQ+XG4gICAxNzJcdCAgICA8Q29tcG9uZW50IGNsYXNzPVwiamF2YXguc3dpbmcuSlBhc3N3b3JkRmllbGRcIiBuYW1lPVwidHh0UGFzc3dvcmRcIj5cbiAgIDE3M1x0ICAgIDwvQ29tcG9uZW50PlxuICAgMTc0XHQgICAgPENvbXBvbmVudCBjbGFzcz1cImphdmF4LnN3aW5nLkpQYXNzd29yZEZpZWxkXCIgbmFtZT1cInR4dENvbmZpcm1QYXNzd29yZFwiPlxuICAgMTc1XHQgICAgPC9Db21wb25lbnQ+XG4gICAxNzZcdCAgICA8Q29tcG9uZW50IGNsYXNzPVwiamF2YXguc3dpbmcuSkJ1dHRvblwiIG5hbWU9XCJidG5DaGFuZ2VcIj5cbiAgIDE3N1x0ICAgICAgPFByb3BlcnRpZXM+XG4gICAxNzhcdCAgICAgICAgPFByb3BlcnR5IG5hbWU9XCJmb250XCIgdHlwZT1cImphdmEuYXd0LkZvbnRcIiBlZGl0b3I9XCJvcmcubmV0YmVhbnMuYmVhbmluZm8uZWRpdG9ycy5Gb250RWRpdG9yXCI+XG4gICAxNzlcdCAgICAgICAgICA8Rm9udCBuYW1lPVwiQXJpYWxcIiBzaXplPVwiMTRcIiBzdHlsZT1cIjFcIi8+XG4gICAxODBcdCAgICAgICAgPC9Qcm9wZXJ0eT5cbiAgIDE4MVx0ICAgICAgICA8UHJvcGVydHkgbmFtZT1cImljb25cIiB0eXBlPVwiamF2YXguc3dpbmcuSWNvblwiIGVkaXRvcj1cIm9yZy5uZXRiZWFucy5tb2R1bGVzLmZvcm0uZWRpdG9yczIuSWNvbkVkaXRvclwiPlxuICAgMTgyXHQgICAgICAgICAgPEltYWdlIGljb25UeXBlPVwiM1wiIG5hbWU9XCIvSW1hZ2VzL3Jlc2V0LXBhc3N3b3JkLnBuZ1wiLz5cbiAgIDE4M1x0ICAgICAgICA8L1Byb3BlcnR5PlxuICAgMTg0XHQgICAgICAgIDxQcm9wZXJ0eSBuYW1lPVwidGV4dFwiIHR5cGU9XCJqYXZhLmxhbmcuU3RyaW5nXCIgdmFsdWU9XCImI3gxMTA7JiN4MWVkNTtpIG0mI3gxZWFkO3Qga2gmI3gxZWE5O3VcIi8+XG4gICAxODVcdCAgICAgICAgPFByb3BlcnR5IG5hbWU9XCJjdXJzb3JcIiB0eXBlPVwiamF2YS5hd3QuQ3Vyc29yXCIgZWRpdG9yPVwib3JnLm5ldGJlYW5zLm1vZHVsZXMuZm9ybS5lZGl0b3JzMi5DdXJzb3JFZGl0b3JcIj5cbiAgIDE4Nlx0ICAgICAgICAgIDxDb2xvciBpZD1cIkhhbmQgQ3Vyc29yXCIvPlxuICAgMTg3XHQgICAgICAgIDwvUHJvcGVydHk+XG4gICAxODhcdCAgICAgIDwvUHJvcGVydGllcz5cbiAgIDE4OVx0ICAgIDwvQ29tcG9uZW50PlxuICAgMTkwXHQgICAgPENvbXBvbmVudCBjbGFzcz1cImphdmF4LnN3aW5nLkpCdXR0b25cIiBuYW1lPVwiYnRuRXhpdFwiPlxuICAgMTkxXHQgICAgICA8UHJvcGVydGllcz5cbiAgIDE5Mlx0ICAgICAgICA8UHJvcGVydHkgbmFtZT1cImZvbnRcIiB0eXBlPVwiamF2YS5hd3QuRm9udFwiIGVkaXRvcj1cIm9yZy5uZXRiZWFucy5iZWFuaW5mby5lZGl0b3JzLkZvbnRFZGl0b3JcIj5cbiAgIDE5M1x0ICAgICAgICAgIDxGb250IG5hbWU9XCJBcmlhbFwiIHNpemU9XCIxNFwiIHN0eWxlPVwiMVwiLz5cbiAgIDE5NFx0ICAgICAgICA8L1Byb3BlcnR5PlxuICAgMTk1XHQgICAgICAgIDxQcm9wZXJ0eSBuYW1lPVwiaWNvblwiIHR5cGU9XCJqYXZheC5zd2luZy5JY29uXCIgZWRpdG9yPVwib3JnLm5ldGJlYW5zLm1vZHVsZXMuZm9ybS5lZGl0b3JzMi5JY29uRWRpdG9yXCI+XG4gICAxOTZcdCAgICAgICAgICA8SW1hZ2UgaWNvblR5cGU9XCIzXCIgbmFtZT1cIi9JbWFnZXMvbG9nb3V0LnBuZ1wiLz5cbiAgIDE5N1x0ICAgICAgICA8L1Byb3BlcnR5PlxuICAgMTk4XHQgICAgICAgIDxQcm9wZXJ0eSBuYW1lPVwidGV4dFwiIHR5cGU9XCJqYXZhLmxhbmcuU3RyaW5nXCIgdmFsdWU9XCJUaG8mI3hlMTt0XCIvPlxuICAgMTk5XHQgICAgICAgIDxQcm9wZXJ0eSBuYW1lPVwiY3Vyc29yXCIgdHlwZT1cImphdmEuYXd0LkN1cnNvclwiIGVkaXRvcj1cIm9yZy5uZXRiZWFucy5tb2R1bGVzLmZvcm0uZWRpdG9yczIuQ3Vyc29yRWRpdG9yXCI+XG4gICAyMDBcdCAgICAgICAgICA8Q29sb3IgaWQ9XCJIYW5kIEN1cnNvclwiLz5cbiAgIDIwMVx0ICAgICAgICA8L1Byb3BlcnR5PlxuICAgMjAyXHQgICAgICA8L1Byb3BlcnRpZXM+XG4gICAyMDNcdCAgICAgIDxFdmVudHM+XG4gICAyMDRcdCAgICAgICAgPEV2ZW50SGFuZGxlciBldmVudD1cImFjdGlvblBlcmZvcm1lZFwiIGxpc3RlbmVyPVwiamF2YS5hd3QuZXZlbnQuQWN0aW9uTGlzdGVuZXJcIiBwYXJhbWV0ZXJzPVwiamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnRcIiBoYW5kbGVyPVwiYnRuRXhpdEFjdGlvblBlcmZvcm1lZFwiLz5cbiAgIDIwNVx0ICAgICAgPC9FdmVudHM+XG4gICAyMDZcdCAgICA8L0NvbXBvbmVudD5cbiAgIDIwN1x0ICA8L1N1YkNvbXBvbmVudHM+XG4gICAyMDhcdDwvRm9ybT5cbiAgIDIwOVx0XG5Ub3RhbCBsaW5lcyBpbiBmaWxlOiAyMDlcbiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfMDFKWlMzYW5NNUN6UTQ1N0tudWZwQmp0In19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiRTovSG9jVGFwLzAyX0pBVkEvMDNfUHJvamVjdC9JbnRlcm5ldCBNYW5nZW1lbnQgU3lzdGVtIiwiZm9sZGVyUm9vdCI6IkU6L0hvY1RhcC8wMl9KQVZBLzAzX1Byb2plY3QvSW50ZXJuZXQgTWFuZ2VtZW50IFN5c3RlbSJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInRpbWVzdGFtcCI6IjIwMjUtMDUtMTNUMDE6Mjc6MjYuMzIxWiIsInJlc3BvbnNlX3RleHQiOiJJIHNlZSB0aGUgaXNzdWUuIFRoZSBmb3JtIGZpbGUgZG9lc24ndCBoYXZlIHRoZSBldmVudCBoYW5kbGVycyBmb3IgdGhlIENoZWNrIGFuZCBDaGFuZ2UgYnV0dG9ucy4gV2UgbmVlZCB0byB1cGRhdGUgdGhlIGZvcm0gZmlsZSB0byBpbmNsdWRlIHRoZXNlIGV2ZW50IGhhbmRsZXJzLiBMZXQncyBtb2RpZnkgdGhlIGZvcm0gZmlsZTpcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiIwMzFhZWNjMy02ZjUyLTQyYzMtYTkzOS1mMjA4ZDNjMTZlODYiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1XzAxWVN5b1Q2MTRaQUhjbWdicms4Vk5OViIsInRvb2xfbmFtZSI6InN0ci1yZXBsYWNlLWVkaXRvciIsImlucHV0X2pzb24iOiJ7XCJjb21tYW5kXCI6IFwic3RyX3JlcGxhY2VcIiwgXCJwYXRoXCI6IFwic3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vRm9yZ290UGFzc3dvcmQuamF2YVwiLCBcInN0cl9yZXBsYWNlX2VudHJpZXNcIjogW3tcIm9sZF9zdHJcIjogXCJpbXBvcnQgREFPLlN1YnNjcmliZXJEQU87XFxuaW1wb3J0IE1vZGVsLlN1YnNjcmliZXI7XFxuaW1wb3J0IGphdmF4LnN3aW5nLkpPcHRpb25QYW5lO1wiLCBcIm5ld19zdHJcIjogXCJpbXBvcnQgREFPLlN1YnNjcmliZXJEQU87XFxuaW1wb3J0IE1vZGVsLlN1YnNjcmliZXI7XFxuaW1wb3J0IGphdmF4LnN3aW5nLkpPcHRpb25QYW5lO1wiLCBcIm9sZF9zdHJfc3RhcnRfbGluZV9udW1iZXJcIjogNywgXCJvbGRfc3RyX2VuZF9saW5lX251bWJlclwiOiA5fV19IiwibWNwX3NlcnZlcl9uYW1lIjoiIiwibWNwX3Rvb2xfbmFtZSI6IiJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiTm93IHdlIG5lZWQgdG8gbWFrZSBzdXJlIHRoZSBMb2dpbiBjbGFzcyBpcyBwcm9wZXJseSBpbXBvcnRlZCBpbiB0aGUgRm9yZ290UGFzc3dvcmQgY2xhc3M6XG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJTdWNjZXNzZnVsbHkgZWRpdGVkIHRoZSBmaWxlIHNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL0ZvcmdvdFBhc3N3b3JkLmZvcm0uXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlIGZvciBlbnRyeSB3aXRoIGluZGV4IFswXTpcblJlcGxhY2VtZW50IHN1Y2Nlc3NmdWwuXG5FZGl0ZWQgc2VjdGlvbiBhZnRlciBJREUgYXV0by1mb3JtYXR0aW5nIHdhcyBhcHBsaWVkOlxuICAgMTU1XHQgICAgPC9Db21wb25lbnQ+XG4gICAxNTZcdCAgICA8Q29tcG9uZW50IGNsYXNzPVwiamF2YXguc3dpbmcuSlRleHRGaWVsZFwiIG5hbWU9XCJ0eHRQaG9uZVwiPlxuICAgMTU3XHQgICAgPC9Db21wb25lbnQ+XG4gICAxNThcdCAgICA8Q29tcG9uZW50IGNsYXNzPVwiamF2YXguc3dpbmcuSkJ1dHRvblwiIG5hbWU9XCJidG5DaGVja1wiPlxuICAgMTU5XHQgICAgICA8UHJvcGVydGllcz5cbiAgIDE2MFx0ICAgICAgICA8UHJvcGVydHkgbmFtZT1cImZvbnRcIiB0eXBlPVwiamF2YS5hd3QuRm9udFwiIGVkaXRvcj1cIm9yZy5uZXRiZWFucy5iZWFuaW5mby5lZGl0b3JzLkZvbnRFZGl0b3JcIj5cbiAgIDE2MVx0ICAgICAgICAgIDxGb250IG5hbWU9XCJBcmlhbFwiIHNpemU9XCIxNFwiIHN0eWxlPVwiMVwiLz5cbiAgIDE2Mlx0ICAgICAgICA8L1Byb3BlcnR5PlxuICAgMTYzXHQgICAgICAgIDxQcm9wZXJ0eSBuYW1lPVwiaWNvblwiIHR5cGU9XCJqYXZheC5zd2luZy5JY29uXCIgZWRpdG9yPVwib3JnLm5ldGJlYW5zLm1vZHVsZXMuZm9ybS5lZGl0b3JzMi5JY29uRWRpdG9yXCI+XG4gICAxNjRcdCAgICAgICAgICA8SW1hZ2UgaWNvblR5cGU9XCIzXCIgbmFtZT1cIi9JbWFnZXMvc2VhcmNoLnBuZ1wiLz5cbiAgIDE2NVx0ICAgICAgICA8L1Byb3BlcnR5PlxuICAgMTY2XHQgICAgICAgIDxQcm9wZXJ0eSBuYW1lPVwidGV4dFwiIHR5cGU9XCJqYXZhLmxhbmcuU3RyaW5nXCIgdmFsdWU9XCJLaSYjeDFlYzM7bSB0cmFcIi8+XG4gICAxNjdcdCAgICAgICAgPFByb3BlcnR5IG5hbWU9XCJjdXJzb3JcIiB0eXBlPVwiamF2YS5hd3QuQ3Vyc29yXCIgZWRpdG9yPVwib3JnLm5ldGJlYW5zLm1vZHVsZXMuZm9ybS5lZGl0b3JzMi5DdXJzb3JFZGl0b3JcIj5cbiAgIDE2OFx0ICAgICAgICAgIDxDb2xvciBpZD1cIkhhbmQgQ3Vyc29yXCIvPlxuICAgMTY5XHQgICAgICAgIDwvUHJvcGVydHk+XG4gICAxNzBcdCAgICAgIDwvUHJvcGVydGllcz5cbiAgIDE3MVx0ICAgICAgPEV2ZW50cz5cbiAgIDE3Mlx0ICAgICAgICA8RXZlbnRIYW5kbGVyIGV2ZW50PVwiYWN0aW9uUGVyZm9ybWVkXCIgbGlzdGVuZXI9XCJqYXZhLmF3dC5ldmVudC5BY3Rpb25MaXN0ZW5lclwiIHBhcmFtZXRlcnM9XCJqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudFwiIGhhbmRsZXI9XCJidG5DaGVja0FjdGlvblBlcmZvcm1lZFwiLz5cbiAgIDE3M1x0ICAgICAgPC9FdmVudHM+XG4gICAxNzRcdCAgICA8L0NvbXBvbmVudD5cbiAgIDE3NVx0ICAgIDxDb21wb25lbnQgY2xhc3M9XCJqYXZheC5zd2luZy5KUGFzc3dvcmRGaWVsZFwiIG5hbWU9XCJ0eHRQYXNzd29yZFwiPlxuICAgMTc2XHQgICAgPC9Db21wb25lbnQ+XG4gICAxNzdcdCAgICA8Q29tcG9uZW50IGNsYXNzPVwiamF2YXguc3dpbmcuSlBhc3N3b3JkRmllbGRcIiBuYW1lPVwidHh0Q29uZmlybVBhc3N3b3JkXCI+XG5cblJlc3VsdCBmb3Igc3RyX3JlcGxhY2UgZm9yIGVudHJ5IHdpdGggaW5kZXggWzFdOlxuUmVwbGFjZW1lbnQgc3VjY2Vzc2Z1bC5cbkVkaXRlZCBzZWN0aW9uIGFmdGVyIElERSBhdXRvLWZvcm1hdHRpbmcgd2FzIGFwcGxpZWQ6XG4gICAxNzZcdCAgICA8L0NvbXBvbmVudD5cbiAgIDE3N1x0ICAgIDxDb21wb25lbnQgY2xhc3M9XCJqYXZheC5zd2luZy5KUGFzc3dvcmRGaWVsZFwiIG5hbWU9XCJ0eHRDb25maXJtUGFzc3dvcmRcIj5cbiAgIDE3OFx0ICAgIDwvQ29tcG9uZW50PlxuICAgMTc5XHQgICAgPENvbXBvbmVudCBjbGFzcz1cImphdmF4LnN3aW5nLkpCdXR0b25cIiBuYW1lPVwiYnRuQ2hhbmdlXCI+XG4gICAxODBcdCAgICAgIDxQcm9wZXJ0aWVzPlxuICAgMTgxXHQgICAgICAgIDxQcm9wZXJ0eSBuYW1lPVwiZm9udFwiIHR5cGU9XCJqYXZhLmF3dC5Gb250XCIgZWRpdG9yPVwib3JnLm5ldGJlYW5zLmJlYW5pbmZvLmVkaXRvcnMuRm9udEVkaXRvclwiPlxuICAgMTgyXHQgICAgICAgICAgPEZvbnQgbmFtZT1cIkFyaWFsXCIgc2l6ZT1cIjE0XCIgc3R5bGU9XCIxXCIvPlxuICAgMTgzXHQgICAgICAgIDwvUHJvcGVydHk+XG4gICAxODRcdCAgICAgICAgPFByb3BlcnR5IG5hbWU9XCJpY29uXCIgdHlwZT1cImphdmF4LnN3aW5nLkljb25cIiBlZGl0b3I9XCJvcmcubmV0YmVhbnMubW9kdWxlcy5mb3JtLmVkaXRvcnMyLkljb25FZGl0b3JcIj5cbiAgIDE4NVx0ICAgICAgICAgIDxJbWFnZSBpY29uVHlwZT1cIjNcIiBuYW1lPVwiL0ltYWdlcy9yZXNldC1wYXNzd29yZC5wbmdcIi8+XG4gICAxODZcdCAgICAgICAgPC9Qcm9wZXJ0eT5cbiAgIDE4N1x0ICAgICAgICA8UHJvcGVydHkgbmFtZT1cInRleHRcIiB0eXBlPVwiamF2YS5sYW5nLlN0cmluZ1wiIHZhbHVlPVwiJiN4MTEwOyYjeDFlZDU7aSBtJiN4MWVhZDt0IGtoJiN4MWVhOTt1XCIvPlxuICAgMTg4XHQgICAgICAgIDxQcm9wZXJ0eSBuYW1lPVwiY3Vyc29yXCIgdHlwZT1cImphdmEuYXd0LkN1cnNvclwiIGVkaXRvcj1cIm9yZy5uZXRiZWFucy5tb2R1bGVzLmZvcm0uZWRpdG9yczIuQ3Vyc29yRWRpdG9yXCI+XG4gICAxODlcdCAgICAgICAgICA8Q29sb3IgaWQ9XCJIYW5kIEN1cnNvclwiLz5cbiAgIDE5MFx0ICAgICAgICA8L1Byb3BlcnR5PlxuICAgMTkxXHQgICAgICA8L1Byb3BlcnRpZXM+XG4gICAxOTJcdCAgICAgIDxFdmVudHM+XG4gICAxOTNcdCAgICAgICAgPEV2ZW50SGFuZGxlciBldmVudD1cImFjdGlvblBlcmZvcm1lZFwiIGxpc3RlbmVyPVwiamF2YS5hd3QuZXZlbnQuQWN0aW9uTGlzdGVuZXJcIiBwYXJhbWV0ZXJzPVwiamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnRcIiBoYW5kbGVyPVwiYnRuQ2hhbmdlQWN0aW9uUGVyZm9ybWVkXCIvPlxuICAgMTk0XHQgICAgICA8L0V2ZW50cz5cbiAgIDE5NVx0ICAgIDwvQ29tcG9uZW50PlxuICAgMTk2XHQgICAgPENvbXBvbmVudCBjbGFzcz1cImphdmF4LnN3aW5nLkpCdXR0b25cIiBuYW1lPVwiYnRuRXhpdFwiPlxuICAgMTk3XHQgICAgICA8UHJvcGVydGllcz5cbiAgIDE5OFx0ICAgICAgICA8UHJvcGVydHkgbmFtZT1cImZvbnRcIiB0eXBlPVwiamF2YS5hd3QuRm9udFwiIGVkaXRvcj1cIm9yZy5uZXRiZWFucy5iZWFuaW5mby5lZGl0b3JzLkZvbnRFZGl0b3JcIj5cblxuUmV2aWV3IHRoZSBjaGFuZ2VzIGFuZCBtYWtlIHN1cmUgdGhleSBhcmUgYXMgZXhwZWN0ZWQgKGNvcnJlY3QgaW5kZW50YXRpb24sIG5vIGR1cGxpY2F0ZSBsaW5lcywgZXRjKS5cbkVkaXQgdGhlIGZpbGUgYWdhaW4gaWYgbmVjZXNzYXJ5LlxuIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV8wMVRxZlVLN1J0dll5ZnE5c0JDRTdoMXEifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJFOi9Ib2NUYXAvMDJfSkFWQS8wM19Qcm9qZWN0L0ludGVybmV0IE1hbmdlbWVudCBTeXN0ZW0iLCJmb2xkZXJSb290IjoiRTovSG9jVGFwLzAyX0pBVkEvMDNfUHJvamVjdC9JbnRlcm5ldCBNYW5nZW1lbnQgU3lzdGVtIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwidGltZXN0YW1wIjoiMjAyNS0wNS0xM1QwMToyNzo0Mi43NDZaIiwicmVzcG9uc2VfdGV4dCI6Ik5vdyB3ZSBuZWVkIHRvIG1ha2Ugc3VyZSB0aGUgTG9naW4gY2xhc3MgaXMgcHJvcGVybHkgaW1wb3J0ZWQgaW4gdGhlIEZvcmdvdFBhc3N3b3JkIGNsYXNzOlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6IjEwMmQ2YTczLTVlNDktNGZiNS05ODE3LTIwNmI4ODFiMmQwOSIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfMDFQcFdpMTlQakVuOU4xZzNIZllHbzhLIiwidG9vbF9uYW1lIjoic3RyLXJlcGxhY2UtZWRpdG9yIiwiaW5wdXRfanNvbiI6IntcImNvbW1hbmRcIjogXCJ2aWV3XCIsIFwicGF0aFwiOiBcInNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL0ZvcmdvdFBhc3N3b3JkLmphdmFcIiwgXCJ2aWV3X3JhbmdlXCI6IFsxLCAyMF19IiwibWNwX3NlcnZlcl9uYW1lIjoiIiwibWNwX3Rvb2xfbmFtZSI6IiJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiTGV0IG1lIGNoZWNrIGlmIHRoZSBMb2dpbiBjbGFzcyBpcyBwcm9wZXJseSBpbXBvcnRlZDpcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IlN1Y2Nlc3NmdWxseSBlZGl0ZWQgdGhlIGZpbGUgc3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vRm9yZ290UGFzc3dvcmQuamF2YS5cblJlc3VsdCBmb3Igc3RyX3JlcGxhY2UgZm9yIGVudHJ5IHdpdGggaW5kZXggWzBdOlxuUmVwbGFjZW1lbnQgc3VjY2Vzc2Z1bC5cbkVkaXRlZCBzZWN0aW9uIGFmdGVyIElERSBhdXRvLWZvcm1hdHRpbmcgd2FzIGFwcGxpZWQ6XG4gICAgIDNcdCAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvR1VJRm9ybXMvSkZyYW1lLmphdmEgdG8gZWRpdCB0aGlzIHRlbXBsYXRlXG4gICAgIDRcdCAqL1xuICAgICA1XHRwYWNrYWdlIGludGVybmV0Lm1hbmdlbWVudC5zeXN0ZW07XG4gICAgIDZcdFxuICAgICA3XHRpbXBvcnQgREFPLlN1YnNjcmliZXJEQU87XG4gICAgIDhcdGltcG9ydCBNb2RlbC5TdWJzY3JpYmVyO1xuICAgICA5XHRpbXBvcnQgamF2YXguc3dpbmcuSk9wdGlvblBhbmU7XG4gICAgMTBcdFxuICAgIDExXHQvKipcbiAgICAxMlx0ICpcbiAgICAxM1x0ICogQGF1dGhvciBOZ29jIFRoYW9cblxuUmV2aWV3IHRoZSBjaGFuZ2VzIGFuZCBtYWtlIHN1cmUgdGhleSBhcmUgYXMgZXhwZWN0ZWQgKGNvcnJlY3QgaW5kZW50YXRpb24sIG5vIGR1cGxpY2F0ZSBsaW5lcywgZXRjKS5cbkVkaXQgdGhlIGZpbGUgYWdhaW4gaWYgbmVjZXNzYXJ5LlxuIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV8wMVlTeW9UNjE0WkFIY21nYnJrOFZOTlYifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJFOi9Ib2NUYXAvMDJfSkFWQS8wM19Qcm9qZWN0L0ludGVybmV0IE1hbmdlbWVudCBTeXN0ZW0iLCJmb2xkZXJSb290IjoiRTovSG9jVGFwLzAyX0pBVkEvMDNfUHJvamVjdC9JbnRlcm5ldCBNYW5nZW1lbnQgU3lzdGVtIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwidGltZXN0YW1wIjoiMjAyNS0wNS0xM1QwMToyNzo0OS4wMTRaIiwicmVzcG9uc2VfdGV4dCI6IkxldCBtZSBjaGVjayBpZiB0aGUgTG9naW4gY2xhc3MgaXMgcHJvcGVybHkgaW1wb3J0ZWQ6XG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiN2M4ODQxOGMtY2U4Ni00NzlhLTllMjQtY2FjMzcwMTkxZDAzIiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV8wMU1pZlhydmJzNXhRZHVjTWhSOVdKc1ciLCJ0b29sX25hbWUiOiJzdHItcmVwbGFjZS1lZGl0b3IiLCJpbnB1dF9qc29uIjoie1wiY29tbWFuZFwiOiBcInN0cl9yZXBsYWNlXCIsIFwicGF0aFwiOiBcInNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL0ZvcmdvdFBhc3N3b3JkLmphdmFcIiwgXCJzdHJfcmVwbGFjZV9lbnRyaWVzXCI6IFt7XCJvbGRfc3RyXCI6IFwiaW1wb3J0IERBTy5TdWJzY3JpYmVyREFPO1xcbmltcG9ydCBNb2RlbC5TdWJzY3JpYmVyO1xcbmltcG9ydCBqYXZheC5zd2luZy5KT3B0aW9uUGFuZTtcIiwgXCJuZXdfc3RyXCI6IFwiaW1wb3J0IERBTy5TdWJzY3JpYmVyREFPO1xcbmltcG9ydCBNb2RlbC5TdWJzY3JpYmVyO1xcbmltcG9ydCBqYXZheC5zd2luZy5KT3B0aW9uUGFuZTtcXG5pbXBvcnQgaW50ZXJuZXQubWFuZ2VtZW50LnN5c3RlbS5Mb2dpbjtcIiwgXCJvbGRfc3RyX3N0YXJ0X2xpbmVfbnVtYmVyXCI6IDcsIFwib2xkX3N0cl9lbmRfbGluZV9udW1iZXJcIjogOX1dfSIsIm1jcF9zZXJ2ZXJfbmFtZSI6IiIsIm1jcF90b29sX25hbWUiOiIifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IldlIG5lZWQgdG8gYWRkIHRoZSBMb2dpbiBjbGFzcyBpbXBvcnQ6XG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJIZXJlJ3MgdGhlIHJlc3VsdCBvZiBydW5uaW5nIGBjYXQgLW5gIG9uIHNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL0ZvcmdvdFBhc3N3b3JkLmphdmE6XG4gICAgIDFcdC8qXG4gICAgIDJcdCAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvTGljZW5zZXMvbGljZW5zZS1kZWZhdWx0LnR4dCB0byBjaGFuZ2UgdGhpcyBsaWNlbnNlXG4gICAgIDNcdCAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvR1VJRm9ybXMvSkZyYW1lLmphdmEgdG8gZWRpdCB0aGlzIHRlbXBsYXRlXG4gICAgIDRcdCAqL1xuICAgICA1XHRwYWNrYWdlIGludGVybmV0Lm1hbmdlbWVudC5zeXN0ZW07XG4gICAgIDZcdFxuICAgICA3XHRpbXBvcnQgREFPLlN1YnNjcmliZXJEQU87XG4gICAgIDhcdGltcG9ydCBNb2RlbC5TdWJzY3JpYmVyO1xuICAgICA5XHRpbXBvcnQgamF2YXguc3dpbmcuSk9wdGlvblBhbmU7XG4gICAgMTBcdFxuICAgIDExXHQvKipcbiAgICAxMlx0ICpcbiAgICAxM1x0ICogQGF1dGhvciBOZ29jIFRoYW9cbiAgICAxNFx0ICovXG4gICAgMTVcdHB1YmxpYyBjbGFzcyBGb3Jnb3RQYXNzd29yZCBleHRlbmRzIGphdmF4LnN3aW5nLkpGcmFtZSB7XG4gICAgMTZcdCAgICBwcml2YXRlIFN1YnNjcmliZXIgY3VycmVudFN1YnNjcmliZXIgPSBudWxsO1xuICAgIDE3XHQgICAgcHVibGljIFN0cmluZyBwaG9uZVBhdHRlcm4gPSBcIl5bMC05XSokXCI7XG4gICAgMThcdFxuICAgIDE5XHQgICAgLyoqXG4gICAgMjBcdCAgICAgKiBDcmVhdGVzIG5ldyBmb3JtIEZvcmdvdFBhc3N3b3JkXG5Ub3RhbCBsaW5lcyBpbiBmaWxlOiAzMDVcbiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfMDFQcFdpMTlQakVuOU4xZzNIZllHbzhLIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiRTovSG9jVGFwLzAyX0pBVkEvMDNfUHJvamVjdC9JbnRlcm5ldCBNYW5nZW1lbnQgU3lzdGVtIiwiZm9sZGVyUm9vdCI6IkU6L0hvY1RhcC8wMl9KQVZBLzAzX1Byb2plY3QvSW50ZXJuZXQgTWFuZ2VtZW50IFN5c3RlbSJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInRpbWVzdGFtcCI6IjIwMjUtMDUtMTNUMDE6Mjc6NTIuMzI5WiIsInJlc3BvbnNlX3RleHQiOiJXZSBuZWVkIHRvIGFkZCB0aGUgTG9naW4gY2xhc3MgaW1wb3J0OlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6ImMyZjY1ZTNkLWUwNjMtNDFiNS1iNjAwLTg4Y2FmNzRkN2E1MiIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfMDExb0NHUldvYVF1TWNBd0NaN0tIUnZCIiwidG9vbF9uYW1lIjoic3RyLXJlcGxhY2UtZWRpdG9yIiwiaW5wdXRfanNvbiI6IntcImNvbW1hbmRcIjogXCJ2aWV3XCIsIFwicGF0aFwiOiBcInNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL0ZvcmdvdFBhc3N3b3JkLmphdmFcIiwgXCJ2aWV3X3JhbmdlXCI6IFsyMjAsIDI2MF19IiwibWNwX3NlcnZlcl9uYW1lIjoiIiwibWNwX3Rvb2xfbmFtZSI6IiJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiTm93IGxldCdzIGNoZWNrIGlmIHRoZXJlIGFyZSBhbnkgb3RoZXIgaXNzdWVzIHdpdGggdGhlIGltcGxlbWVudGF0aW9uOlxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiU3VjY2Vzc2Z1bGx5IGVkaXRlZCB0aGUgZmlsZSBzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9Gb3Jnb3RQYXNzd29yZC5qYXZhLlxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZSBmb3IgZW50cnkgd2l0aCBpbmRleCBbMF06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgICAgM1x0ICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9HVUlGb3Jtcy9KRnJhbWUuamF2YSB0byBlZGl0IHRoaXMgdGVtcGxhdGVcbiAgICAgNFx0ICovXG4gICAgIDVcdHBhY2thZ2UgaW50ZXJuZXQubWFuZ2VtZW50LnN5c3RlbTtcbiAgICAgNlx0XG4gICAgIDdcdGltcG9ydCBEQU8uU3Vic2NyaWJlckRBTztcbiAgICAgOFx0aW1wb3J0IE1vZGVsLlN1YnNjcmliZXI7XG4gICAgIDlcdGltcG9ydCBqYXZheC5zd2luZy5KT3B0aW9uUGFuZTtcbiAgICAxMFx0aW1wb3J0IGludGVybmV0Lm1hbmdlbWVudC5zeXN0ZW0uTG9naW47XG4gICAgMTFcdFxuICAgIDEyXHQvKipcbiAgICAxM1x0ICpcbiAgICAxNFx0ICogQGF1dGhvciBOZ29jIFRoYW9cblxuUmV2aWV3IHRoZSBjaGFuZ2VzIGFuZCBtYWtlIHN1cmUgdGhleSBhcmUgYXMgZXhwZWN0ZWQgKGNvcnJlY3QgaW5kZW50YXRpb24sIG5vIGR1cGxpY2F0ZSBsaW5lcywgZXRjKS5cbkVkaXQgdGhlIGZpbGUgYWdhaW4gaWYgbmVjZXNzYXJ5LlxuIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV8wMU1pZlhydmJzNXhRZHVjTWhSOVdKc1cifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJFOi9Ib2NUYXAvMDJfSkFWQS8wM19Qcm9qZWN0L0ludGVybmV0IE1hbmdlbWVudCBTeXN0ZW0iLCJmb2xkZXJSb290IjoiRTovSG9jVGFwLzAyX0pBVkEvMDNfUHJvamVjdC9JbnRlcm5ldCBNYW5nZW1lbnQgU3lzdGVtIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwidGltZXN0YW1wIjoiMjAyNS0wNS0xM1QwMToyNzo1Ny44MTdaIiwicmVzcG9uc2VfdGV4dCI6Ik5vdyBsZXQncyBjaGVjayBpZiB0aGVyZSBhcmUgYW55IG90aGVyIGlzc3VlcyB3aXRoIHRoZSBpbXBsZW1lbnRhdGlvbjpcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiI1MmI0ZDkxNy1iOGRkLTQ3NGUtOWI0ZC05YmY5NDJjOTk3MjYiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1XzAxV3JuTEMzTUVleTJiOXZlOXJDQUVKdyIsInRvb2xfbmFtZSI6InN0ci1yZXBsYWNlLWVkaXRvciIsImlucHV0X2pzb24iOiJ7XCJjb21tYW5kXCI6IFwic3RyX3JlcGxhY2VcIiwgXCJwYXRoXCI6IFwic3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vRm9yZ290UGFzc3dvcmQuamF2YVwiLCBcInN0cl9yZXBsYWNlX2VudHJpZXNcIjogW3tcIm9sZF9zdHJcIjogXCIgICAgcHJpdmF0ZSB2b2lkIGJ0bkNoZWNrQWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkNoZWNrQWN0aW9uUGVyZm9ybWVkXFxuICAgICAgICBpZiAodmFsaWRhdGVQaG9uZSgpKSB7XFxuICAgICAgICAgICAgU3RyaW5nIHBob25lID0gdHh0UGhvbmUuZ2V0VGV4dCgpO1xcbiAgICAgICAgICAgIGN1cnJlbnRTdWJzY3JpYmVyID0gU3Vic2NyaWJlckRBTy5nZXRCeVBob25lKHBob25lKTtcXG4gICAgICAgICAgICBcXG4gICAgICAgICAgICBpZiAoY3VycmVudFN1YnNjcmliZXIgIT0gbnVsbCkge1xcbiAgICAgICAgICAgICAgICAvLyBQaG9uZSBudW1iZXIgZm91bmQsIHNob3cgcGFzc3dvcmQgZmllbGRzXFxuICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFxcXCJUXFx1MDBlY20gdGhcXHUxZWE1eSB0XFx1MDBlMGkga2hvXFx1MWVhM24gdlxcdTFlZGJpIHNcXHUxZWQxIFxcdTAxMTFpXFx1MWVjN24gdGhvXFx1MWVhMWkgblxcdTAwZTB5IVxcXCIsIFxcXCJUaFxcdTAwZjRuZyBiXFx1MDBlMW9cXFwiLCBKT3B0aW9uUGFuZS5JTkZPUk1BVElPTl9NRVNTQUdFKTtcXG4gICAgICAgICAgICAgICAgXFxuICAgICAgICAgICAgICAgIGJ0bkV4aXQuc2V0VmlzaWJsZSh0cnVlKTtcXG4gICAgICAgICAgICAgICAgYnRuQ2hhbmdlLnNldFZpc2libGUodHJ1ZSk7XFxuICAgICAgICAgICAgICAgIGxiTmV3UGFzc3dvcmQuc2V0VmlzaWJsZSh0cnVlKTtcXG4gICAgICAgICAgICAgICAgbGJDb25maXJtUGFzc3dvcmQuc2V0VmlzaWJsZSh0cnVlKTtcXG4gICAgICAgICAgICAgICAgdHh0UGFzc3dvcmQuc2V0VmlzaWJsZSh0cnVlKTtcXG4gICAgICAgICAgICAgICAgdHh0Q29uZmlybVBhc3N3b3JkLnNldFZpc2libGUodHJ1ZSk7XFxuICAgICAgICAgICAgICAgIFxcbiAgICAgICAgICAgICAgICAvLyBEaXNhYmxlIHBob25lIGZpZWxkIGFuZCBjaGVjayBidXR0b25cXG4gICAgICAgICAgICAgICAgdHh0UGhvbmUuc2V0RWRpdGFibGUoZmFsc2UpO1xcbiAgICAgICAgICAgICAgICBidG5DaGVjay5zZXRFbmFibGVkKGZhbHNlKTtcXG4gICAgICAgICAgICB9IGVsc2Uge1xcbiAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcXFwiS2hcXHUwMGY0bmcgdFxcdTAwZWNtIHRoXFx1MWVhNXkgdFxcdTAwZTBpIGtob1xcdTFlYTNuIHZcXHUxZWRiaSBzXFx1MWVkMSBcXHUwMTExaVxcdTFlYzduIHRob1xcdTFlYTFpIG5cXHUwMGUweSFcXFwiLCBcXFwiVGhcXHUwMGY0bmcgYlxcdTAwZTFvXFxcIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgfVxcbiAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5DaGVja0FjdGlvblBlcmZvcm1lZFwiLCBcIm5ld19zdHJcIjogXCIgICAgcHJpdmF0ZSB2b2lkIGJ0bkNoZWNrQWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkNoZWNrQWN0aW9uUGVyZm9ybWVkXFxuICAgICAgICBpZiAodmFsaWRhdGVQaG9uZSgpKSB7XFxuICAgICAgICAgICAgU3RyaW5nIHBob25lID0gdHh0UGhvbmUuZ2V0VGV4dCgpO1xcbiAgICAgICAgICAgIGN1cnJlbnRTdWJzY3JpYmVyID0gU3Vic2NyaWJlckRBTy5nZXRCeVBob25lKHBob25lKTtcXG4gICAgICAgICAgICBcXG4gICAgICAgICAgICBpZiAoY3VycmVudFN1YnNjcmliZXIgIT0gbnVsbCkge1xcbiAgICAgICAgICAgICAgICAvLyBQaG9uZSBudW1iZXIgZm91bmQsIHNob3cgcGFzc3dvcmQgZmllbGRzXFxuICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFxcXCJUXFx1MDBlY20gdGhcXHUxZWE1eSB0XFx1MDBlMGkga2hvXFx1MWVhM24gdlxcdTFlZGJpIHNcXHUxZWQxIFxcdTAxMTFpXFx1MWVjN24gdGhvXFx1MWVhMWkgblxcdTAwZTB5IVxcXCIsIFxcXCJUaFxcdTAwZjRuZyBiXFx1MDBlMW9cXFwiLCBKT3B0aW9uUGFuZS5JTkZPUk1BVElPTl9NRVNTQUdFKTtcXG4gICAgICAgICAgICAgICAgXFxuICAgICAgICAgICAgICAgIGJ0bkV4aXQuc2V0VmlzaWJsZSh0cnVlKTtcXG4gICAgICAgICAgICAgICAgYnRuQ2hhbmdlLnNldFZpc2libGUodHJ1ZSk7XFxuICAgICAgICAgICAgICAgIGxiTmV3UGFzc3dvcmQuc2V0VmlzaWJsZSh0cnVlKTtcXG4gICAgICAgICAgICAgICAgbGJDb25maXJtUGFzc3dvcmQuc2V0VmlzaWJsZSh0cnVlKTtcXG4gICAgICAgICAgICAgICAgdHh0UGFzc3dvcmQuc2V0VmlzaWJsZSh0cnVlKTtcXG4gICAgICAgICAgICAgICAgdHh0Q29uZmlybVBhc3N3b3JkLnNldFZpc2libGUodHJ1ZSk7XFxuICAgICAgICAgICAgICAgIFxcbiAgICAgICAgICAgICAgICAvLyBEaXNhYmxlIHBob25lIGZpZWxkIGFuZCBjaGVjayBidXR0b25cXG4gICAgICAgICAgICAgICAgdHh0UGhvbmUuc2V0RWRpdGFibGUoZmFsc2UpO1xcbiAgICAgICAgICAgICAgICBidG5DaGVjay5zZXRFbmFibGVkKGZhbHNlKTtcXG4gICAgICAgICAgICAgICAgYnRuQ2hlY2suc2V0VmlzaWJsZShmYWxzZSk7XFxuICAgICAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXFxcIktoXFx1MDBmNG5nIHRcXHUwMGVjbSB0aFxcdTFlYTV5IHRcXHUwMGUwaSBraG9cXHUxZWEzbiB2XFx1MWVkYmkgc1xcdTFlZDEgXFx1MDExMWlcXHUxZWM3biB0aG9cXHUxZWExaSBuXFx1MDBlMHkhXFxcIiwgXFxcIlRoXFx1MDBmNG5nIGJcXHUwMGUxb1xcXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgIH1cXG4gICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuQ2hlY2tBY3Rpb25QZXJmb3JtZWRcIiwgXCJvbGRfc3RyX3N0YXJ0X2xpbmVfbnVtYmVyXCI6IDIyNCwgXCJvbGRfc3RyX2VuZF9saW5lX251bWJlclwiOiAyNDV9XX0iLCJtY3Bfc2VydmVyX25hbWUiOiIiLCJtY3BfdG9vbF9uYW1lIjoiIn19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiJUaGUgaW1wbGVtZW50YXRpb24gbG9va3MgZ29vZC4gTGV0J3MgbWFrZSBvbmUgbW9yZSBpbXByb3ZlbWVudCB0byB0aGUgbGF5b3V0IHRvIGVuc3VyZSB0aGUgYnV0dG9ucyBhcmUgcHJvcGVybHkgcG9zaXRpb25lZDpcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IkhlcmUncyB0aGUgcmVzdWx0IG9mIHJ1bm5pbmcgYGNhdCAtbmAgb24gc3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vRm9yZ290UGFzc3dvcmQuamF2YTpcbiAgIDIyMFx0XG4gICAyMjFcdCAgICAgICAgICAgIGlmIChjdXJyZW50U3Vic2NyaWJlciAhPSBudWxsKSB7XG4gICAyMjJcdCAgICAgICAgICAgICAgICAvLyBQaG9uZSBudW1iZXIgZm91bmQsIHNob3cgcGFzc3dvcmQgZmllbGRzXG4gICAyMjNcdCAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcIlTDrG0gdGjhuqV5IHTDoGkga2hv4bqjbiB24bubaSBz4buRIMSRaeG7h24gdGhv4bqhaSBuw6B5IVwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLklORk9STUFUSU9OX01FU1NBR0UpO1xuICAgMjI0XHRcbiAgIDIyNVx0ICAgICAgICAgICAgICAgIGJ0bkV4aXQuc2V0VmlzaWJsZSh0cnVlKTtcbiAgIDIyNlx0ICAgICAgICAgICAgICAgIGJ0bkNoYW5nZS5zZXRWaXNpYmxlKHRydWUpO1xuICAgMjI3XHQgICAgICAgICAgICAgICAgbGJOZXdQYXNzd29yZC5zZXRWaXNpYmxlKHRydWUpO1xuICAgMjI4XHQgICAgICAgICAgICAgICAgbGJDb25maXJtUGFzc3dvcmQuc2V0VmlzaWJsZSh0cnVlKTtcbiAgIDIyOVx0ICAgICAgICAgICAgICAgIHR4dFBhc3N3b3JkLnNldFZpc2libGUodHJ1ZSk7XG4gICAyMzBcdCAgICAgICAgICAgICAgICB0eHRDb25maXJtUGFzc3dvcmQuc2V0VmlzaWJsZSh0cnVlKTtcbiAgIDIzMVx0XG4gICAyMzJcdCAgICAgICAgICAgICAgICAvLyBEaXNhYmxlIHBob25lIGZpZWxkIGFuZCBjaGVjayBidXR0b25cbiAgIDIzM1x0ICAgICAgICAgICAgICAgIHR4dFBob25lLnNldEVkaXRhYmxlKGZhbHNlKTtcbiAgIDIzNFx0ICAgICAgICAgICAgICAgIGJ0bkNoZWNrLnNldEVuYWJsZWQoZmFsc2UpO1xuICAgMjM1XHQgICAgICAgICAgICB9IGVsc2Uge1xuICAgMjM2XHQgICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXCJLaMO0bmcgdMOsbSB0aOG6pXkgdMOgaSBraG/huqNuIHbhu5tpIHPhu5EgxJFp4buHbiB0aG/huqFpIG7DoHkhXCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAyMzdcdCAgICAgICAgICAgIH1cbiAgIDIzOFx0ICAgICAgICB9XG4gICAyMzlcdCAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5DaGVja0FjdGlvblBlcmZvcm1lZFxuICAgMjQwXHRcbiAgIDI0MVx0ICAgIHByaXZhdGUgdm9pZCBidG5DaGFuZ2VBY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuQ2hhbmdlQWN0aW9uUGVyZm9ybWVkXG4gICAyNDJcdCAgICAgICAgaWYgKHZhbGlkYXRlRmllbGRzKCkgJiYgY3VycmVudFN1YnNjcmliZXIgIT0gbnVsbCkge1xuICAgMjQzXHQgICAgICAgICAgICBTdHJpbmcgbmV3UGFzc3dvcmQgPSB0eHRQYXNzd29yZC5nZXRUZXh0KCk7XG4gICAyNDRcdFxuICAgMjQ1XHQgICAgICAgICAgICBib29sZWFuIHN1Y2Nlc3MgPSBTdWJzY3JpYmVyREFPLnVwZGF0ZVBhc3N3b3JkKGN1cnJlbnRTdWJzY3JpYmVyLmdldFVzZXJfaWQoKSwgbmV3UGFzc3dvcmQpO1xuICAgMjQ2XHRcbiAgIDI0N1x0ICAgICAgICAgICAgaWYgKHN1Y2Nlc3MpIHtcbiAgIDI0OFx0ICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwixJDhu5VpIG3huq10IGto4bqpdSB0aMOgbmggY8O0bmchIFZ1aSBsw7JuZyDEkcSDbmcgbmjhuq1wIGzhuqFpLlwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLklORk9STUFUSU9OX01FU1NBR0UpO1xuICAgMjQ5XHQgICAgICAgICAgICAgICAgbmV3IExvZ2luKCkuc2V0VmlzaWJsZSh0cnVlKTtcbiAgIDI1MFx0ICAgICAgICAgICAgICAgIHRoaXMuZGlzcG9zZSgpO1xuICAgMjUxXHQgICAgICAgICAgICB9IGVsc2Uge1xuICAgMjUyXHQgICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXCLEkOG7lWkgbeG6rXQga2jhuql1IHRo4bqldCBi4bqhaSEgVnVpIGzDsm5nIHRo4butIGzhuqFpIHNhdS5cIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgIDI1M1x0ICAgICAgICAgICAgfVxuICAgMjU0XHQgICAgICAgIH1cbiAgIDI1NVx0ICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0bkNoYW5nZUFjdGlvblBlcmZvcm1lZFxuICAgMjU2XHRcbiAgIDI1N1x0ICAgIC8qKlxuICAgMjU4XHQgICAgICogQHBhcmFtIGFyZ3MgdGhlIGNvbW1hbmQgbGluZSBhcmd1bWVudHNcbiAgIDI1OVx0ICAgICAqL1xuICAgMjYwXHQgICAgcHVibGljIHN0YXRpYyB2b2lkIG1haW4oU3RyaW5nIGFyZ3NbXSkge1xuVG90YWwgbGluZXMgaW4gZmlsZTogMzA2XG4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1XzAxMW9DR1JXb2FRdU1jQXdDWjdLSFJ2QiJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkU6L0hvY1RhcC8wMl9KQVZBLzAzX1Byb2plY3QvSW50ZXJuZXQgTWFuZ2VtZW50IFN5c3RlbSIsImZvbGRlclJvb3QiOiJFOi9Ib2NUYXAvMDJfSkFWQS8wM19Qcm9qZWN0L0ludGVybmV0IE1hbmdlbWVudCBTeXN0ZW0ifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJ0aW1lc3RhbXAiOiIyMDI1LTA1LTEzVDAxOjI4OjAxLjQ1MFoiLCJyZXNwb25zZV90ZXh0IjoiVGhlIGltcGxlbWVudGF0aW9uIGxvb2tzIGdvb2QuIExldCdzIG1ha2Ugb25lIG1vcmUgaW1wcm92ZW1lbnQgdG8gdGhlIGxheW91dCB0byBlbnN1cmUgdGhlIGJ1dHRvbnMgYXJlIHByb3Blcmx5IHBvc2l0aW9uZWQ6XG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiYzEwMWI0Y2UtMjhlMi00M2FiLWI3NGQtNTEwMjhjMWRmYjA5IiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiTm93IHRoZSBpbXBsZW1lbnRhdGlvbiBzaG91bGQgd29yayBjb3JyZWN0bHkuIExldCdzIHN1bW1hcml6ZSB0aGUgY2hhbmdlcyB3ZSd2ZSBtYWRlOlxuXG4xLiAqKkFkZGVkIG1ldGhvZHMgdG8gU3Vic2NyaWJlckRBTzoqKlxuICAgLSBgZ2V0QnlQaG9uZShTdHJpbmcgcGhvbmUpYDogRmluZHMgYSBzdWJzY3JpYmVyIGJ5IHBob25lIG51bWJlclxuICAgLSBgdXBkYXRlUGFzc3dvcmQoaW50IHVzZXJJZCwgU3RyaW5nIG5ld1Bhc3N3b3JkKWA6IFVwZGF0ZXMgYSB1c2VyJ3MgcGFzc3dvcmRcblxuMi4gKipJbXBsZW1lbnRlZCBldmVudCBoYW5kbGVycyBpbiBGb3Jnb3RQYXNzd29yZDoqKlxuICAgLSBgYnRuQ2hlY2tBY3Rpb25QZXJmb3JtZWRgOiBWYWxpZGF0ZXMgcGhvbmUgbnVtYmVyLCBzZWFyY2hlcyBmb3IgdXNlciwgYW5kIHNob3dzIHBhc3N3b3JkIGZpZWxkcyBpZiBmb3VuZFxuICAgLSBgYnRuQ2hhbmdlQWN0aW9uUGVyZm9ybWVkYDogVmFsaWRhdGVzIG5ldyBwYXNzd29yZCwgY29uZmlybXMgaXQgbWF0Y2hlcywgYW5kIHVwZGF0ZXMgdGhlIHVzZXIncyBwYXNzd29yZFxuXG4zLiAqKkVuaGFuY2VkIHZhbGlkYXRpb246KipcbiAgIC0gQWRkZWQgcGFzc3dvcmQgbWF0Y2hpbmcgdmFsaWRhdGlvblxuICAgLSBJbXByb3ZlZCBlcnJvciBtZXNzYWdlc1xuICAgLSBBZGRlZCBzdWNjZXNzIG1lc3NhZ2VzXG5cbjQuICoqSW1wcm92ZWQgVUkgZmxvdzoqKlxuICAgLSBEaXNhYmxlZCBhbmQgaGlkIHBob25lIGZpZWxkIGFuZCBjaGVjayBidXR0b24gYWZ0ZXIgc3VjY2Vzc2Z1bCBwaG9uZSB2ZXJpZmljYXRpb25cbiAgIC0gQWRkZWQgbmF2aWdhdGlvbiB0byBMb2dpbiBzY3JlZW4gYWZ0ZXIgcGFzc3dvcmQgY2hhbmdlXG4gICAtIE1vZGlmaWVkIEV4aXQgYnV0dG9uIHRvIHJldHVybiB0byBMb2dpbiBzY3JlZW4gaW5zdGVhZCBvZiBjbG9zaW5nIHRoZSBhcHBsaWNhdGlvblxuXG41LiAqKkZpeGVkIGZvcm0gZmlsZToqKlxuICAgLSBBZGRlZCBldmVudCBoYW5kbGVycyBmb3IgdGhlIENoZWNrIGFuZCBDaGFuZ2UgYnV0dG9ucyBpbiB0aGUgZm9ybSBmaWxlXG4gICAtIEFkZGVkIHByb3BlciBpbXBvcnQgZm9yIHRoZSBMb2dpbiBjbGFzc1xuXG5UaGUgaW1wbGVtZW50YXRpb24gbm93IGZvbGxvd3MgdGhlIHJlcXVpcmVtZW50czpcbi0gSXQgdmFsaWRhdGVzIHRoZSBwaG9uZSBudW1iZXIgZmlyc3Rcbi0gT25seSBhbGxvd3MgbmV3IHBhc3N3b3JkIGVudHJ5IGFmdGVyIGEgY29ycmVjdCBwaG9uZSBudW1iZXIgaXMgZm91bmRcbi0gU2hvd3MgYXBwcm9wcmlhdGUgZXJyb3IgYW5kIHN1Y2Nlc3MgbWVzc2FnZXNcbi0gRW5zdXJlcyBwYXNzd29yZCBjb25maXJtYXRpb24gbWF0Y2hlcyB0aGUgbmV3IHBhc3N3b3JkXG5cblRvIHRlc3QgdGhpcyBpbXBsZW1lbnRhdGlvbjpcbjEuIFJ1biB0aGUgYXBwbGljYXRpb25cbjIuIE5hdmlnYXRlIHRvIHRoZSBGb3Jnb3RQYXNzd29yZCBzY3JlZW5cbjMuIEVudGVyIGEgdmFsaWQgcGhvbmUgbnVtYmVyIGFuZCBjbGljayBcIktp4buDbSB0cmFcIlxuNC4gSWYgdGhlIHBob25lIG51bWJlciBleGlzdHMsIGVudGVyIGEgbmV3IHBhc3N3b3JkIGFuZCBjb25maXJtIGl0XG41LiBDbGljayBcIsSQ4buVaSBt4bqtdCBraOG6qXVcIiB0byB1cGRhdGUgdGhlIHBhc3N3b3JkXG42LiBWZXJpZnkgeW91IGNhbiBsb2cgaW4gd2l0aCB0aGUgbmV3IHBhc3N3b3JkXG5cblRoZSBidXR0b25zIHNob3VsZCBub3cgd29yayBjb3JyZWN0bHkuIElmIHlvdSBlbmNvdW50ZXIgYW55IG90aGVyIGlzc3VlcywgcGxlYXNlIGxldCBtZSBrbm93IVxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiU3VjY2Vzc2Z1bGx5IGVkaXRlZCB0aGUgZmlsZSBzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9Gb3Jnb3RQYXNzd29yZC5qYXZhLlxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZSBmb3IgZW50cnkgd2l0aCBpbmRleCBbMF06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgIDIxMlx0ICAgICAgICAgICAgdGhpcy5kaXNwb3NlKCk7XG4gICAyMTNcdCAgICAgICAgfVxuICAgMjE0XHQgICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuRXhpdEFjdGlvblBlcmZvcm1lZFxuICAgMjE1XHRcbiAgIDIxNlx0ICAgIHByaXZhdGUgdm9pZCBidG5DaGVja0FjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5DaGVja0FjdGlvblBlcmZvcm1lZFxuICAgMjE3XHQgICAgICAgIGlmICh2YWxpZGF0ZVBob25lKCkpIHtcbiAgIDIxOFx0ICAgICAgICAgICAgU3RyaW5nIHBob25lID0gdHh0UGhvbmUuZ2V0VGV4dCgpO1xuICAgMjE5XHQgICAgICAgICAgICBjdXJyZW50U3Vic2NyaWJlciA9IFN1YnNjcmliZXJEQU8uZ2V0QnlQaG9uZShwaG9uZSk7XG4gICAyMjBcdFxuICAgMjIxXHQgICAgICAgICAgICBpZiAoY3VycmVudFN1YnNjcmliZXIgIT0gbnVsbCkge1xuICAgMjIyXHQgICAgICAgICAgICAgICAgLy8gUGhvbmUgbnVtYmVyIGZvdW5kLCBzaG93IHBhc3N3b3JkIGZpZWxkc1xuICAgMjIzXHQgICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXCJUw6xtIHRo4bqleSB0w6BpIGtob+G6o24gduG7m2kgc+G7kSDEkWnhu4duIHRob+G6oWkgbsOgeSFcIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5JTkZPUk1BVElPTl9NRVNTQUdFKTtcbiAgIDIyNFx0XG4gICAyMjVcdCAgICAgICAgICAgICAgICBidG5FeGl0LnNldFZpc2libGUodHJ1ZSk7XG4gICAyMjZcdCAgICAgICAgICAgICAgICBidG5DaGFuZ2Uuc2V0VmlzaWJsZSh0cnVlKTtcbiAgIDIyN1x0ICAgICAgICAgICAgICAgIGxiTmV3UGFzc3dvcmQuc2V0VmlzaWJsZSh0cnVlKTtcbiAgIDIyOFx0ICAgICAgICAgICAgICAgIGxiQ29uZmlybVBhc3N3b3JkLnNldFZpc2libGUodHJ1ZSk7XG4gICAyMjlcdCAgICAgICAgICAgICAgICB0eHRQYXNzd29yZC5zZXRWaXNpYmxlKHRydWUpO1xuICAgMjMwXHQgICAgICAgICAgICAgICAgdHh0Q29uZmlybVBhc3N3b3JkLnNldFZpc2libGUodHJ1ZSk7XG4gICAyMzFcdFxuICAgMjMyXHQgICAgICAgICAgICAgICAgLy8gRGlzYWJsZSBwaG9uZSBmaWVsZCBhbmQgY2hlY2sgYnV0dG9uXG4gICAyMzNcdCAgICAgICAgICAgICAgICB0eHRQaG9uZS5zZXRFZGl0YWJsZShmYWxzZSk7XG4gICAyMzRcdCAgICAgICAgICAgICAgICBidG5DaGVjay5zZXRFbmFibGVkKGZhbHNlKTtcbiAgIDIzNVx0ICAgICAgICAgICAgICAgIGJ0bkNoZWNrLnNldFZpc2libGUoZmFsc2UpO1xuICAgMjM2XHQgICAgICAgICAgICB9IGVsc2Uge1xuICAgMjM3XHQgICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXCJLaMO0bmcgdMOsbSB0aOG6pXkgdMOgaSBraG/huqNuIHbhu5tpIHPhu5EgxJFp4buHbiB0aG/huqFpIG7DoHkhXCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAyMzhcdCAgICAgICAgICAgIH1cbiAgIDIzOVx0ICAgICAgICB9XG4gICAyNDBcdCAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5DaGVja0FjdGlvblBlcmZvcm1lZFxuICAgMjQxXHRcbiAgIDI0Mlx0ICAgIHByaXZhdGUgdm9pZCBidG5DaGFuZ2VBY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuQ2hhbmdlQWN0aW9uUGVyZm9ybWVkXG4gICAyNDNcdCAgICAgICAgaWYgKHZhbGlkYXRlRmllbGRzKCkgJiYgY3VycmVudFN1YnNjcmliZXIgIT0gbnVsbCkge1xuICAgMjQ0XHQgICAgICAgICAgICBTdHJpbmcgbmV3UGFzc3dvcmQgPSB0eHRQYXNzd29yZC5nZXRUZXh0KCk7XG5cblJldmlldyB0aGUgY2hhbmdlcyBhbmQgbWFrZSBzdXJlIHRoZXkgYXJlIGFzIGV4cGVjdGVkIChjb3JyZWN0IGluZGVudGF0aW9uLCBubyBkdXBsaWNhdGUgbGluZXMsIGV0YykuXG5FZGl0IHRoZSBmaWxlIGFnYWluIGlmIG5lY2Vzc2FyeS5cbiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfMDFXcm5MQzNNRWV5MmI5dmU5ckNBRUp3In19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiRTovSG9jVGFwLzAyX0pBVkEvMDNfUHJvamVjdC9JbnRlcm5ldCBNYW5nZW1lbnQgU3lzdGVtIiwiZm9sZGVyUm9vdCI6IkU6L0hvY1RhcC8wMl9KQVZBLzAzX1Byb2plY3QvSW50ZXJuZXQgTWFuZ2VtZW50IFN5c3RlbSJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInRpbWVzdGFtcCI6IjIwMjUtMDUtMTNUMDE6Mjg6MTcuODYwWiIsInJlc3BvbnNlX3RleHQiOiJOb3cgdGhlIGltcGxlbWVudGF0aW9uIHNob3VsZCB3b3JrIGNvcnJlY3RseS4gTGV0J3Mgc3VtbWFyaXplIHRoZSBjaGFuZ2VzIHdlJ3ZlIG1hZGU6XG5cbjEuICoqQWRkZWQgbWV0aG9kcyB0byBTdWJzY3JpYmVyREFPOioqXG4gICAtIGBnZXRCeVBob25lKFN0cmluZyBwaG9uZSlgOiBGaW5kcyBhIHN1YnNjcmliZXIgYnkgcGhvbmUgbnVtYmVyXG4gICAtIGB1cGRhdGVQYXNzd29yZChpbnQgdXNlcklkLCBTdHJpbmcgbmV3UGFzc3dvcmQpYDogVXBkYXRlcyBhIHVzZXIncyBwYXNzd29yZFxuXG4yLiAqKkltcGxlbWVudGVkIGV2ZW50IGhhbmRsZXJzIGluIEZvcmdvdFBhc3N3b3JkOioqXG4gICAtIGBidG5DaGVja0FjdGlvblBlcmZvcm1lZGA6IFZhbGlkYXRlcyBwaG9uZSBudW1iZXIsIHNlYXJjaGVzIGZvciB1c2VyLCBhbmQgc2hvd3MgcGFzc3dvcmQgZmllbGRzIGlmIGZvdW5kXG4gICAtIGBidG5DaGFuZ2VBY3Rpb25QZXJmb3JtZWRgOiBWYWxpZGF0ZXMgbmV3IHBhc3N3b3JkLCBjb25maXJtcyBpdCBtYXRjaGVzLCBhbmQgdXBkYXRlcyB0aGUgdXNlcidzIHBhc3N3b3JkXG5cbjMuICoqRW5oYW5jZWQgdmFsaWRhdGlvbjoqKlxuICAgLSBBZGRlZCBwYXNzd29yZCBtYXRjaGluZyB2YWxpZGF0aW9uXG4gICAtIEltcHJvdmVkIGVycm9yIG1lc3NhZ2VzXG4gICAtIEFkZGVkIHN1Y2Nlc3MgbWVzc2FnZXNcblxuNC4gKipJbXByb3ZlZCBVSSBmbG93OioqXG4gICAtIERpc2FibGVkIGFuZCBoaWQgcGhvbmUgZmllbGQgYW5kIGNoZWNrIGJ1dHRvbiBhZnRlciBzdWNjZXNzZnVsIHBob25lIHZlcmlmaWNhdGlvblxuICAgLSBBZGRlZCBuYXZpZ2F0aW9uIHRvIExvZ2luIHNjcmVlbiBhZnRlciBwYXNzd29yZCBjaGFuZ2VcbiAgIC0gTW9kaWZpZWQgRXhpdCBidXR0b24gdG8gcmV0dXJuIHRvIExvZ2luIHNjcmVlbiBpbnN0ZWFkIG9mIGNsb3NpbmcgdGhlIGFwcGxpY2F0aW9uXG5cbjUuICoqRml4ZWQgZm9ybSBmaWxlOioqXG4gICAtIEFkZGVkIGV2ZW50IGhhbmRsZXJzIGZvciB0aGUgQ2hlY2sgYW5kIENoYW5nZSBidXR0b25zIGluIHRoZSBmb3JtIGZpbGVcbiAgIC0gQWRkZWQgcHJvcGVyIGltcG9ydCBmb3IgdGhlIExvZ2luIGNsYXNzXG5cblRoZSBpbXBsZW1lbnRhdGlvbiBub3cgZm9sbG93cyB0aGUgcmVxdWlyZW1lbnRzOlxuLSBJdCB2YWxpZGF0ZXMgdGhlIHBob25lIG51bWJlciBmaXJzdFxuLSBPbmx5IGFsbG93cyBuZXcgcGFzc3dvcmQgZW50cnkgYWZ0ZXIgYSBjb3JyZWN0IHBob25lIG51bWJlciBpcyBmb3VuZFxuLSBTaG93cyBhcHByb3ByaWF0ZSBlcnJvciBhbmQgc3VjY2VzcyBtZXNzYWdlc1xuLSBFbnN1cmVzIHBhc3N3b3JkIGNvbmZpcm1hdGlvbiBtYXRjaGVzIHRoZSBuZXcgcGFzc3dvcmRcblxuVG8gdGVzdCB0aGlzIGltcGxlbWVudGF0aW9uOlxuMS4gUnVuIHRoZSBhcHBsaWNhdGlvblxuMi4gTmF2aWdhdGUgdG8gdGhlIEZvcmdvdFBhc3N3b3JkIHNjcmVlblxuMy4gRW50ZXIgYSB2YWxpZCBwaG9uZSBudW1iZXIgYW5kIGNsaWNrIFwiS2nhu4NtIHRyYVwiXG40LiBJZiB0aGUgcGhvbmUgbnVtYmVyIGV4aXN0cywgZW50ZXIgYSBuZXcgcGFzc3dvcmQgYW5kIGNvbmZpcm0gaXRcbjUuIENsaWNrIFwixJDhu5VpIG3huq10IGto4bqpdVwiIHRvIHVwZGF0ZSB0aGUgcGFzc3dvcmRcbjYuIFZlcmlmeSB5b3UgY2FuIGxvZyBpbiB3aXRoIHRoZSBuZXcgcGFzc3dvcmRcblxuVGhlIGJ1dHRvbnMgc2hvdWxkIG5vdyB3b3JrIGNvcnJlY3RseS4gSWYgeW91IGVuY291bnRlciBhbnkgb3RoZXIgaXNzdWVzLCBwbGVhc2UgbGV0IG1lIGtub3chXG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InJlcXVlc3RfaWQiOiI5NmY2ODZmZC1kMTEwLTRkYmUtYmI0OS0zNmMyNjVmYjcwYzUiLCJ1dWlkIjoiMWJkNjAzODktZGY5OC00MjVhLThhYzMtMTYyNzhlYWQ1NmJmIiwiY2hhdEl0ZW1UeXBlIjoiYWdlbnRpYy1jaGVja3BvaW50LWRlbGltaXRlciIsInN0YXR1cyI6InN1Y2Nlc3MiLCJmcm9tVGltZXN0YW1wIjoxNzQ3MDk5MjYxMTg4LCJ0b1RpbWVzdGFtcCI6MTc0NzA5OTcwNzQ4Niwic2Vlbl9zdGF0ZSI6InNlZW4ifSx7InJlcXVlc3RfaWQiOiIzMzI1MWM5Yi00N2E3LTQ4YWYtODkzMy05NmJiZmFjNzZjYzciLCJzdGF0dXMiOiJjYW5jZWxsZWQiLCJjaGF0SXRlbVR5cGUiOiJhZ2VudGljLXR1cm4tZGVsaW1pdGVyIn0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6IjJkZDEyZDA1LWY3ZmItNDAwNC1hM2ZkLTRmZjJlYzg1MDlmOCIsInJlcXVlc3RfbWVzc2FnZSI6IndoZW4gaSBwcmVzcyB0aGUgY2hlY2sgYnV0dG9uIGl0IHNob3dzIG5vdGhpbmcgZXZlbiBpZiBpIGVudGVyIG5vdGhpbmciLCJyaWNoX3RleHRfanNvbl9yZXByIjp7InR5cGUiOiJkb2MiLCJjb250ZW50IjpbeyJ0eXBlIjoicGFyYWdyYXBoIiwiY29udGVudCI6W3sidHlwZSI6InRleHQiLCJ0ZXh0Ijoid2hlbiBpIHByZXNzIHRoZSBjaGVjayBidXR0b24gaXQgc2hvd3Mgbm90aGluZyBldmVuIGlmIGkgZW50ZXIgbm90aGluZyJ9XX1dfSwibWVudGlvbmVkX2l0ZW1zIjpbXSwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV8wMUYyemdmekJvN3NjYWRxekgyUFFteTYiLCJ0b29sX25hbWUiOiJzdHItcmVwbGFjZS1lZGl0b3IiLCJpbnB1dF9qc29uIjoie1wiY29tbWFuZFwiOiBcInN0cl9yZXBsYWNlXCIsIFwicGF0aFwiOiBcInNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL0ZvcmdvdFBhc3N3b3JkLmphdmFcIiwgXCJzdHJfcmVwbGFjZV9lbnRyaWVzXCI6IFt7XCJvbGRfc3RyXCI6IFwiICAgIHByaXZhdGUgdm9pZCBidG5DaGVja0FjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5DaGVja0FjdGlvblBlcmZvcm1lZFxcbiAgICAgICAgaWYgKHZhbGlkYXRlUGhvbmUoKSkge1xcbiAgICAgICAgICAgIFN0cmluZyBwaG9uZSA9IHR4dFBob25lLmdldFRleHQoKTtcXG4gICAgICAgICAgICBjdXJyZW50U3Vic2NyaWJlciA9IFN1YnNjcmliZXJEQU8uZ2V0QnlQaG9uZShwaG9uZSk7XFxuICAgICAgICAgICAgXFxuICAgICAgICAgICAgaWYgKGN1cnJlbnRTdWJzY3JpYmVyICE9IG51bGwpIHtcXG4gICAgICAgICAgICAgICAgLy8gUGhvbmUgbnVtYmVyIGZvdW5kLCBzaG93IHBhc3N3b3JkIGZpZWxkc1xcbiAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcXFwiVFxcdTAwZWNtIHRoXFx1MWVhNXkgdFxcdTAwZTBpIGtob1xcdTFlYTNuIHZcXHUxZWRiaSBzXFx1MWVkMSBcXHUwMTExaVxcdTFlYzduIHRob1xcdTFlYTFpIG5cXHUwMGUweSFcXFwiLCBcXFwiVGhcXHUwMGY0bmcgYlxcdTAwZTFvXFxcIiwgSk9wdGlvblBhbmUuSU5GT1JNQVRJT05fTUVTU0FHRSk7XFxuICAgICAgICAgICAgICAgIFxcbiAgICAgICAgICAgICAgICBidG5FeGl0LnNldFZpc2libGUodHJ1ZSk7XFxuICAgICAgICAgICAgICAgIGJ0bkNoYW5nZS5zZXRWaXNpYmxlKHRydWUpO1xcbiAgICAgICAgICAgICAgICBsYk5ld1Bhc3N3b3JkLnNldFZpc2libGUodHJ1ZSk7XFxuICAgICAgICAgICAgICAgIGxiQ29uZmlybVBhc3N3b3JkLnNldFZpc2libGUodHJ1ZSk7XFxuICAgICAgICAgICAgICAgIHR4dFBhc3N3b3JkLnNldFZpc2libGUodHJ1ZSk7XFxuICAgICAgICAgICAgICAgIHR4dENvbmZpcm1QYXNzd29yZC5zZXRWaXNpYmxlKHRydWUpO1xcbiAgICAgICAgICAgICAgICBcXG4gICAgICAgICAgICAgICAgLy8gRGlzYWJsZSBwaG9uZSBmaWVsZCBhbmQgY2hlY2sgYnV0dG9uXFxuICAgICAgICAgICAgICAgIHR4dFBob25lLnNldEVkaXRhYmxlKGZhbHNlKTtcXG4gICAgICAgICAgICAgICAgYnRuQ2hlY2suc2V0RW5hYmxlZChmYWxzZSk7XFxuICAgICAgICAgICAgICAgIGJ0bkNoZWNrLnNldFZpc2libGUoZmFsc2UpO1xcbiAgICAgICAgICAgIH0gZWxzZSB7XFxuICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFxcXCJLaFxcdTAwZjRuZyB0XFx1MDBlY20gdGhcXHUxZWE1eSB0XFx1MDBlMGkga2hvXFx1MWVhM24gdlxcdTFlZGJpIHNcXHUxZWQxIFxcdTAxMTFpXFx1MWVjN24gdGhvXFx1MWVhMWkgblxcdTAwZTB5IVxcXCIsIFxcXCJUaFxcdTAwZjRuZyBiXFx1MDBlMW9cXFwiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcXG4gICAgICAgICAgICB9XFxuICAgICAgICB9XFxuICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0bkNoZWNrQWN0aW9uUGVyZm9ybWVkXCIsIFwibmV3X3N0clwiOiBcIiAgICBwcml2YXRlIHZvaWQgYnRuQ2hlY2tBY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuQ2hlY2tBY3Rpb25QZXJmb3JtZWRcXG4gICAgICAgIC8vIERlYnVnIG1lc3NhZ2UgdG8gY29uZmlybSBidXR0b24gY2xpY2sgaXMgcmVnaXN0ZXJlZFxcbiAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFxcXCJDaGVjayBidXR0b24gY2xpY2tlZCFcXFwiKTtcXG4gICAgICAgIFxcbiAgICAgICAgLy8gQ2hlY2sgaWYgcGhvbmUgZmllbGQgaXMgZW1wdHlcXG4gICAgICAgIFN0cmluZyBwaG9uZSA9IHR4dFBob25lLmdldFRleHQoKS50cmltKCk7XFxuICAgICAgICBpZiAocGhvbmUuaXNFbXB0eSgpKSB7XFxuICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXFxcIlZ1aSBsXFx1MDBmMm5nIG5oXFx1MWVhZHAgc1xcdTFlZDEgXFx1MDExMWlcXHUxZWM3biB0aG9cXHUxZWExaSFcXFwiLCBcXFwiVGhcXHUwMGY0bmcgYlxcdTAwZTFvXFxcIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XFxuICAgICAgICAgICAgcmV0dXJuO1xcbiAgICAgICAgfVxcbiAgICAgICAgXFxuICAgICAgICBpZiAodmFsaWRhdGVQaG9uZSgpKSB7XFxuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFxcXCJQaG9uZSB2YWxpZGF0aW9uIHBhc3NlZDogXFxcIiArIHBob25lKTtcXG4gICAgICAgICAgICB0cnkge1xcbiAgICAgICAgICAgICAgICBjdXJyZW50U3Vic2NyaWJlciA9IFN1YnNjcmliZXJEQU8uZ2V0QnlQaG9uZShwaG9uZSk7XFxuICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcXFwiRGF0YWJhc2UgcXVlcnkgY29tcGxldGVkLiBSZXN1bHQ6IFxcXCIgKyAoY3VycmVudFN1YnNjcmliZXIgIT0gbnVsbCA/IFxcXCJGb3VuZFxcXCIgOiBcXFwiTm90IGZvdW5kXFxcIikpO1xcbiAgICAgICAgICAgICAgICBcXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTdWJzY3JpYmVyICE9IG51bGwpIHtcXG4gICAgICAgICAgICAgICAgICAgIC8vIFBob25lIG51bWJlciBmb3VuZCwgc2hvdyBwYXNzd29yZCBmaWVsZHNcXG4gICAgICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFxcXCJUXFx1MDBlY20gdGhcXHUxZWE1eSB0XFx1MDBlMGkga2hvXFx1MWVhM24gdlxcdTFlZGJpIHNcXHUxZWQxIFxcdTAxMTFpXFx1MWVjN24gdGhvXFx1MWVhMWkgblxcdTAwZTB5IVxcXCIsIFxcXCJUaFxcdTAwZjRuZyBiXFx1MDBlMW9cXFwiLCBKT3B0aW9uUGFuZS5JTkZPUk1BVElPTl9NRVNTQUdFKTtcXG4gICAgICAgICAgICAgICAgICAgIFxcbiAgICAgICAgICAgICAgICAgICAgYnRuRXhpdC5zZXRWaXNpYmxlKHRydWUpO1xcbiAgICAgICAgICAgICAgICAgICAgYnRuQ2hhbmdlLnNldFZpc2libGUodHJ1ZSk7XFxuICAgICAgICAgICAgICAgICAgICBsYk5ld1Bhc3N3b3JkLnNldFZpc2libGUodHJ1ZSk7XFxuICAgICAgICAgICAgICAgICAgICBsYkNvbmZpcm1QYXNzd29yZC5zZXRWaXNpYmxlKHRydWUpO1xcbiAgICAgICAgICAgICAgICAgICAgdHh0UGFzc3dvcmQuc2V0VmlzaWJsZSh0cnVlKTtcXG4gICAgICAgICAgICAgICAgICAgIHR4dENvbmZpcm1QYXNzd29yZC5zZXRWaXNpYmxlKHRydWUpO1xcbiAgICAgICAgICAgICAgICAgICAgXFxuICAgICAgICAgICAgICAgICAgICAvLyBEaXNhYmxlIHBob25lIGZpZWxkIGFuZCBjaGVjayBidXR0b25cXG4gICAgICAgICAgICAgICAgICAgIHR4dFBob25lLnNldEVkaXRhYmxlKGZhbHNlKTtcXG4gICAgICAgICAgICAgICAgICAgIGJ0bkNoZWNrLnNldEVuYWJsZWQoZmFsc2UpO1xcbiAgICAgICAgICAgICAgICAgICAgYnRuQ2hlY2suc2V0VmlzaWJsZShmYWxzZSk7XFxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XFxuICAgICAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcXFwiS2hcXHUwMGY0bmcgdFxcdTAwZWNtIHRoXFx1MWVhNXkgdFxcdTAwZTBpIGtob1xcdTFlYTNuIHZcXHUxZWRiaSBzXFx1MWVkMSBcXHUwMTExaVxcdTFlYzduIHRob1xcdTFlYTFpIG5cXHUwMGUweSFcXFwiLCBcXFwiVGhcXHUwMGY0bmcgYlxcdTAwZTFvXFxcIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XFxuICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZXgpIHtcXG4gICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFxcXCJFeGNlcHRpb24gb2NjdXJyZWQ6IFxcXCIgKyBleC5nZXRNZXNzYWdlKCkpO1xcbiAgICAgICAgICAgICAgICBleC5wcmludFN0YWNrVHJhY2UoKTtcXG4gICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXFxcIkxcXHUxZWQ3aSBraGkgdFxcdTAwZWNtIGtpXFx1MWViZm06IFxcXCIgKyBleC5nZXRNZXNzYWdlKCksIFxcXCJMXFx1MWVkN2lcXFwiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcXG4gICAgICAgICAgICB9XFxuICAgICAgICB9XFxuICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0bkNoZWNrQWN0aW9uUGVyZm9ybWVkXCIsIFwib2xkX3N0cl9zdGFydF9saW5lX251bWJlclwiOiAyMTYsIFwib2xkX3N0cl9lbmRfbGluZV9udW1iZXJcIjogMjQwfV19IiwibWNwX3NlcnZlcl9uYW1lIjoiIiwibWNwX3Rvb2xfbmFtZSI6IiJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiTGV0J3MgZml4IHRoZSBpc3N1ZSB3aXRoIHRoZSBDaGVjayBidXR0b24gbm90IHNob3dpbmcgYW55IHJlc3BvbnNlLiBUaGUgcHJvYmxlbSBtaWdodCBiZSB0aGF0IHRoZSBldmVudCBoYW5kbGVyIGlzbid0IGJlaW5nIHRyaWdnZXJlZCBvciB0aGVyZSdzIGFuIGVycm9yIGluIHRoZSB2YWxpZGF0aW9uIGxvZ2ljLiBMZXQncyBkZWJ1ZyB0aGlzIHN0ZXAgYnkgc3RlcC5cblxuRmlyc3QsIGxldCdzIGFkZCBhIHNpbXBsZSBtZXNzYWdlIHRvIGNvbmZpcm0gdGhlIGJ1dHRvbiBjbGljayBpcyBiZWluZyByZWdpc3RlcmVkOlxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MCwidGV4dF9ub2RlIjp7ImNvbnRlbnQiOiJ3aGVuIGkgcHJlc3MgdGhlIGNoZWNrIGJ1dHRvbiBpdCBzaG93cyBub3RoaW5nIGV2ZW4gaWYgaSBlbnRlciBub3RoaW5nIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiRTovSG9jVGFwLzAyX0pBVkEvMDNfUHJvamVjdC9JbnRlcm5ldCBNYW5nZW1lbnQgU3lzdGVtIiwiZm9sZGVyUm9vdCI6IkU6L0hvY1RhcC8wMl9KQVZBLzAzX1Byb2plY3QvSW50ZXJuZXQgTWFuZ2VtZW50IFN5c3RlbSJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInRpbWVzdGFtcCI6IjIwMjUtMDUtMTNUMDE6MzA6NDguNzk3WiIsInJlc3BvbnNlX3RleHQiOiJMZXQncyBmaXggdGhlIGlzc3VlIHdpdGggdGhlIENoZWNrIGJ1dHRvbiBub3Qgc2hvd2luZyBhbnkgcmVzcG9uc2UuIFRoZSBwcm9ibGVtIG1pZ2h0IGJlIHRoYXQgdGhlIGV2ZW50IGhhbmRsZXIgaXNuJ3QgYmVpbmcgdHJpZ2dlcmVkIG9yIHRoZXJlJ3MgYW4gZXJyb3IgaW4gdGhlIHZhbGlkYXRpb24gbG9naWMuIExldCdzIGRlYnVnIHRoaXMgc3RlcCBieSBzdGVwLlxuXG5GaXJzdCwgbGV0J3MgYWRkIGEgc2ltcGxlIG1lc3NhZ2UgdG8gY29uZmlybSB0aGUgYnV0dG9uIGNsaWNrIGlzIGJlaW5nIHJlZ2lzdGVyZWQ6XG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiZGYxMjk4NGItYWIzMS00ZTE4LWE2MmEtMjhkZTEwOTA0YmIzIiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV8wMVJTYWZvdFBkUEdwZ0JGeHRHckNtd1ciLCJ0b29sX25hbWUiOiJzdHItcmVwbGFjZS1lZGl0b3IiLCJpbnB1dF9qc29uIjoie1wiY29tbWFuZFwiOiBcInZpZXdcIiwgXCJwYXRoXCI6IFwic3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vRm9yZ290UGFzc3dvcmQuamF2YVwiLCBcInZpZXdfcmFuZ2VcIjogWzIxNSwgMjQwXX0iLCJtY3Bfc2VydmVyX25hbWUiOiIiLCJtY3BfdG9vbF9uYW1lIjoiIn19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiJJIHNlZSB0aGUgaXNzdWUuIFRoZXJlJ3MgYW4gaW5kZW50YXRpb24gZGlmZmVyZW5jZSBpbiB0aGUgY29kZS4gTGV0J3MgdHJ5IGFnYWluIHdpdGggdGhlIGNvcnJlY3QgaW5kZW50YXRpb246XG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJGYWlsZWQgdG8gZWRpdCB0aGUgZmlsZSBzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9Gb3Jnb3RQYXNzd29yZC5qYXZhLiBTZWUgYmVsb3cgZm9yIGRldGFpbHMuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlIGZvciBlbnRyeSB3aXRoIGluZGV4IFswXTpcbk5vIHJlcGxhY2VtZW50IHdhcyBwZXJmb3JtZWQsIG9sZFN0ciBkaWQgbm90IGFwcGVhciB2ZXJiYXRpbSBpbiBzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9Gb3Jnb3RQYXNzd29yZC5qYXZhLlxuVGhlIGNvbnRlbnQgaW4gdGhlIHNwZWNpZmllZCByZWdpb24gaXM6XG4gICAyMTJcdCAgICAgICAgICAgIHRoaXMuZGlzcG9zZSgpO1xuICAgMjEzXHQgICAgICAgIH1cbiAgIDIxNFx0ICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0bkV4aXRBY3Rpb25QZXJmb3JtZWRcbiAgIDIxNVx0XG4gICAyMTZcdCAgICBwcml2YXRlIHZvaWQgYnRuQ2hlY2tBY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuQ2hlY2tBY3Rpb25QZXJmb3JtZWRcbiAgIDIxN1x0ICAgICAgICAgICAgaWYgKHZhbGlkYXRlUGhvbmUoKSkge1xuICAgMjE4XHQgICAgICAgICAgICBTdHJpbmcgcGhvbmUgPSB0eHRQaG9uZS5nZXRUZXh0KCk7XG4gICAyMTlcdCAgICAgICAgICAgIGN1cnJlbnRTdWJzY3JpYmVyID0gU3Vic2NyaWJlckRBTy5nZXRCeVBob25lKHBob25lKTtcbiAgIDIyMFx0XG4gICAyMjFcdCAgICAgICAgICAgIGlmIChjdXJyZW50U3Vic2NyaWJlciAhPSBudWxsKSB7XG4gICAyMjJcdCAgICAgICAgICAgICAgICAvLyBQaG9uZSBudW1iZXIgZm91bmQsIHNob3cgcGFzc3dvcmQgZmllbGRzXG4gICAyMjNcdCAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcIlTDrG0gdGjhuqV5IHTDoGkga2hv4bqjbiB24bubaSBz4buRIMSRaeG7h24gdGhv4bqhaSBuw6B5IVwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLklORk9STUFUSU9OX01FU1NBR0UpO1xuICAgMjI0XHRcbiAgIDIyNVx0ICAgICAgICAgICAgICAgIGJ0bkV4aXQuc2V0VmlzaWJsZSh0cnVlKTtcbiAgIDIyNlx0ICAgICAgICAgICAgICAgIGJ0bkNoYW5nZS5zZXRWaXNpYmxlKHRydWUpO1xuICAgMjI3XHQgICAgICAgICAgICAgICAgbGJOZXdQYXNzd29yZC5zZXRWaXNpYmxlKHRydWUpO1xuICAgMjI4XHQgICAgICAgICAgICAgICAgbGJDb25maXJtUGFzc3dvcmQuc2V0VmlzaWJsZSh0cnVlKTtcbiAgIDIyOVx0ICAgICAgICAgICAgICAgIHR4dFBhc3N3b3JkLnNldFZpc2libGUodHJ1ZSk7XG4gICAyMzBcdCAgICAgICAgICAgICAgICB0eHRDb25maXJtUGFzc3dvcmQuc2V0VmlzaWJsZSh0cnVlKTtcbiAgIDIzMVx0XG4gICAyMzJcdCAgICAgICAgICAgICAgICAvLyBEaXNhYmxlIHBob25lIGZpZWxkIGFuZCBjaGVjayBidXR0b25cbiAgIDIzM1x0ICAgICAgICAgICAgICAgIHR4dFBob25lLnNldEVkaXRhYmxlKGZhbHNlKTtcbiAgIDIzNFx0ICAgICAgICAgICAgICAgIGJ0bkNoZWNrLnNldEVuYWJsZWQoZmFsc2UpO1xuICAgMjM1XHQgICAgICAgICAgICAgICAgYnRuQ2hlY2suc2V0VmlzaWJsZShmYWxzZSk7XG4gICAyMzZcdCAgICAgICAgICAgIH0gZWxzZSB7XG4gICAyMzdcdCAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcIktow7RuZyB0w6xtIHRo4bqleSB0w6BpIGtob+G6o24gduG7m2kgc+G7kSDEkWnhu4duIHRob+G6oWkgbsOgeSFcIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgIDIzOFx0ICAgICAgICAgICAgfVxuICAgMjM5XHQgICAgICAgIH1cbiAgIDI0MFx0ICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0bkNoZWNrQWN0aW9uUGVyZm9ybWVkXG4gICAyNDFcdFxuICAgMjQyXHQgICAgcHJpdmF0ZSB2b2lkIGJ0bkNoYW5nZUFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5DaGFuZ2VBY3Rpb25QZXJmb3JtZWRcbiAgIDI0M1x0ICAgICAgICBpZiAodmFsaWRhdGVGaWVsZHMoKSAmJiBjdXJyZW50U3Vic2NyaWJlciAhPSBudWxsKSB7XG4gICAyNDRcdCAgICAgICAgICAgIFN0cmluZyBuZXdQYXNzd29yZCA9IHR4dFBhc3N3b3JkLmdldFRleHQoKTtcblxuRGlmZiBiZXR3ZWVuIG9sZFN0ciBhbmQgdGhlIHNwZWNpZmllZCByZWdpb24gaXM6XG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4tLS0gb2xkU3RyXG4rKysgcmVnaW9uQ29udGVudFxuQEAgLTEsNSArMSw1IEBAXG4gICAgIHByaXZhdGUgdm9pZCBidG5DaGVja0FjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5DaGVja0FjdGlvblBlcmZvcm1lZFxuLSAgICAgICAgaWYgKHZhbGlkYXRlUGhvbmUoKSkge1xuKyAgICAgICAgICAgIGlmICh2YWxpZGF0ZVBob25lKCkpIHtcbiAgICAgICAgICAgICBTdHJpbmcgcGhvbmUgPSB0eHRQaG9uZS5nZXRUZXh0KCk7XG4gICAgICAgICAgICAgY3VycmVudFN1YnNjcmliZXIgPSBTdWJzY3JpYmVyREFPLmdldEJ5UGhvbmUocGhvbmUpO1xuIFxuXG5cbkZpeCBmYWlsZWQgc3RyX3JlcGxhY2UgZW50cmllcyBhY2NvcmRpbmdseSBhbmQgdHJ5IGFnYWluLlxuIiwiaXNfZXJyb3IiOnRydWUsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1XzAxRjJ6Z2Z6Qm83c2NhZHF6SDJQUW15NiJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkU6L0hvY1RhcC8wMl9KQVZBLzAzX1Byb2plY3QvSW50ZXJuZXQgTWFuZ2VtZW50IFN5c3RlbSIsImZvbGRlclJvb3QiOiJFOi9Ib2NUYXAvMDJfSkFWQS8wM19Qcm9qZWN0L0ludGVybmV0IE1hbmdlbWVudCBTeXN0ZW0ifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJ0aW1lc3RhbXAiOiIyMDI1LTA1LTEzVDAxOjMxOjA3LjQxNFoiLCJyZXNwb25zZV90ZXh0IjoiSSBzZWUgdGhlIGlzc3VlLiBUaGVyZSdzIGFuIGluZGVudGF0aW9uIGRpZmZlcmVuY2UgaW4gdGhlIGNvZGUuIExldCdzIHRyeSBhZ2FpbiB3aXRoIHRoZSBjb3JyZWN0IGluZGVudGF0aW9uOlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6IjRmNjg3ZjM0LTBiZDctNDBmNC05YjU3LTU1OTlmYWQ5ODhmNyIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfMDE0Rk5HTWpFeWRVNEVXQTZQUmJHWk1RIiwidG9vbF9uYW1lIjoic3RyLXJlcGxhY2UtZWRpdG9yIiwiaW5wdXRfanNvbiI6IntcImNvbW1hbmRcIjogXCJzdHJfcmVwbGFjZVwiLCBcInBhdGhcIjogXCJzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9Gb3Jnb3RQYXNzd29yZC5qYXZhXCIsIFwic3RyX3JlcGxhY2VfZW50cmllc1wiOiBbe1wib2xkX3N0clwiOiBcIiAgICBwcml2YXRlIHZvaWQgYnRuQ2hlY2tBY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuQ2hlY2tBY3Rpb25QZXJmb3JtZWRcXG4gICAgICAgICAgICBpZiAodmFsaWRhdGVQaG9uZSgpKSB7XFxuICAgICAgICAgICAgU3RyaW5nIHBob25lID0gdHh0UGhvbmUuZ2V0VGV4dCgpO1xcbiAgICAgICAgICAgIGN1cnJlbnRTdWJzY3JpYmVyID0gU3Vic2NyaWJlckRBTy5nZXRCeVBob25lKHBob25lKTtcXG5cXG4gICAgICAgICAgICBpZiAoY3VycmVudFN1YnNjcmliZXIgIT0gbnVsbCkge1xcbiAgICAgICAgICAgICAgICAvLyBQaG9uZSBudW1iZXIgZm91bmQsIHNob3cgcGFzc3dvcmQgZmllbGRzXFxuICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFxcXCJUXFx1MDBlY20gdGhcXHUxZWE1eSB0XFx1MDBlMGkga2hvXFx1MWVhM24gdlxcdTFlZGJpIHNcXHUxZWQxIFxcdTAxMTFpXFx1MWVjN24gdGhvXFx1MWVhMWkgblxcdTAwZTB5IVxcXCIsIFxcXCJUaFxcdTAwZjRuZyBiXFx1MDBlMW9cXFwiLCBKT3B0aW9uUGFuZS5JTkZPUk1BVElPTl9NRVNTQUdFKTtcXG5cXG4gICAgICAgICAgICAgICAgYnRuRXhpdC5zZXRWaXNpYmxlKHRydWUpO1xcbiAgICAgICAgICAgICAgICBidG5DaGFuZ2Uuc2V0VmlzaWJsZSh0cnVlKTtcXG4gICAgICAgICAgICAgICAgbGJOZXdQYXNzd29yZC5zZXRWaXNpYmxlKHRydWUpO1xcbiAgICAgICAgICAgICAgICBsYkNvbmZpcm1QYXNzd29yZC5zZXRWaXNpYmxlKHRydWUpO1xcbiAgICAgICAgICAgICAgICB0eHRQYXNzd29yZC5zZXRWaXNpYmxlKHRydWUpO1xcbiAgICAgICAgICAgICAgICB0eHRDb25maXJtUGFzc3dvcmQuc2V0VmlzaWJsZSh0cnVlKTtcXG5cXG4gICAgICAgICAgICAgICAgLy8gRGlzYWJsZSBwaG9uZSBmaWVsZCBhbmQgY2hlY2sgYnV0dG9uXFxuICAgICAgICAgICAgICAgIHR4dFBob25lLnNldEVkaXRhYmxlKGZhbHNlKTtcXG4gICAgICAgICAgICAgICAgYnRuQ2hlY2suc2V0RW5hYmxlZChmYWxzZSk7XFxuICAgICAgICAgICAgICAgIGJ0bkNoZWNrLnNldFZpc2libGUoZmFsc2UpO1xcbiAgICAgICAgICAgIH0gZWxzZSB7XFxuICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFxcXCJLaFxcdTAwZjRuZyB0XFx1MDBlY20gdGhcXHUxZWE1eSB0XFx1MDBlMGkga2hvXFx1MWVhM24gdlxcdTFlZGJpIHNcXHUxZWQxIFxcdTAxMTFpXFx1MWVjN24gdGhvXFx1MWVhMWkgblxcdTAwZTB5IVxcXCIsIFxcXCJUaFxcdTAwZjRuZyBiXFx1MDBlMW9cXFwiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcXG4gICAgICAgICAgICB9XFxuICAgICAgICB9XFxuICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0bkNoZWNrQWN0aW9uUGVyZm9ybWVkXCIsIFwibmV3X3N0clwiOiBcIiAgICBwcml2YXRlIHZvaWQgYnRuQ2hlY2tBY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuQ2hlY2tBY3Rpb25QZXJmb3JtZWRcXG4gICAgICAgIC8vIERlYnVnIG1lc3NhZ2UgdG8gY29uZmlybSBidXR0b24gY2xpY2sgaXMgcmVnaXN0ZXJlZFxcbiAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFxcXCJDaGVjayBidXR0b24gY2xpY2tlZCFcXFwiKTtcXG4gICAgICAgIFxcbiAgICAgICAgLy8gQ2hlY2sgaWYgcGhvbmUgZmllbGQgaXMgZW1wdHlcXG4gICAgICAgIFN0cmluZyBwaG9uZSA9IHR4dFBob25lLmdldFRleHQoKS50cmltKCk7XFxuICAgICAgICBpZiAocGhvbmUuaXNFbXB0eSgpKSB7XFxuICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXFxcIlZ1aSBsXFx1MDBmMm5nIG5oXFx1MWVhZHAgc1xcdTFlZDEgXFx1MDExMWlcXHUxZWM3biB0aG9cXHUxZWExaSFcXFwiLCBcXFwiVGhcXHUwMGY0bmcgYlxcdTAwZTFvXFxcIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XFxuICAgICAgICAgICAgcmV0dXJuO1xcbiAgICAgICAgfVxcbiAgICAgICAgXFxuICAgICAgICBpZiAodmFsaWRhdGVQaG9uZSgpKSB7XFxuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFxcXCJQaG9uZSB2YWxpZGF0aW9uIHBhc3NlZDogXFxcIiArIHBob25lKTtcXG4gICAgICAgICAgICB0cnkge1xcbiAgICAgICAgICAgICAgICBjdXJyZW50U3Vic2NyaWJlciA9IFN1YnNjcmliZXJEQU8uZ2V0QnlQaG9uZShwaG9uZSk7XFxuICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcXFwiRGF0YWJhc2UgcXVlcnkgY29tcGxldGVkLiBSZXN1bHQ6IFxcXCIgKyAoY3VycmVudFN1YnNjcmliZXIgIT0gbnVsbCA/IFxcXCJGb3VuZFxcXCIgOiBcXFwiTm90IGZvdW5kXFxcIikpO1xcbiAgICAgICAgICAgICAgICBcXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTdWJzY3JpYmVyICE9IG51bGwpIHtcXG4gICAgICAgICAgICAgICAgICAgIC8vIFBob25lIG51bWJlciBmb3VuZCwgc2hvdyBwYXNzd29yZCBmaWVsZHNcXG4gICAgICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFxcXCJUXFx1MDBlY20gdGhcXHUxZWE1eSB0XFx1MDBlMGkga2hvXFx1MWVhM24gdlxcdTFlZGJpIHNcXHUxZWQxIFxcdTAxMTFpXFx1MWVjN24gdGhvXFx1MWVhMWkgblxcdTAwZTB5IVxcXCIsIFxcXCJUaFxcdTAwZjRuZyBiXFx1MDBlMW9cXFwiLCBKT3B0aW9uUGFuZS5JTkZPUk1BVElPTl9NRVNTQUdFKTtcXG4gICAgICAgICAgICAgICAgICAgIFxcbiAgICAgICAgICAgICAgICAgICAgYnRuRXhpdC5zZXRWaXNpYmxlKHRydWUpO1xcbiAgICAgICAgICAgICAgICAgICAgYnRuQ2hhbmdlLnNldFZpc2libGUodHJ1ZSk7XFxuICAgICAgICAgICAgICAgICAgICBsYk5ld1Bhc3N3b3JkLnNldFZpc2libGUodHJ1ZSk7XFxuICAgICAgICAgICAgICAgICAgICBsYkNvbmZpcm1QYXNzd29yZC5zZXRWaXNpYmxlKHRydWUpO1xcbiAgICAgICAgICAgICAgICAgICAgdHh0UGFzc3dvcmQuc2V0VmlzaWJsZSh0cnVlKTtcXG4gICAgICAgICAgICAgICAgICAgIHR4dENvbmZpcm1QYXNzd29yZC5zZXRWaXNpYmxlKHRydWUpO1xcbiAgICAgICAgICAgICAgICAgICAgXFxuICAgICAgICAgICAgICAgICAgICAvLyBEaXNhYmxlIHBob25lIGZpZWxkIGFuZCBjaGVjayBidXR0b25cXG4gICAgICAgICAgICAgICAgICAgIHR4dFBob25lLnNldEVkaXRhYmxlKGZhbHNlKTtcXG4gICAgICAgICAgICAgICAgICAgIGJ0bkNoZWNrLnNldEVuYWJsZWQoZmFsc2UpO1xcbiAgICAgICAgICAgICAgICAgICAgYnRuQ2hlY2suc2V0VmlzaWJsZShmYWxzZSk7XFxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XFxuICAgICAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcXFwiS2hcXHUwMGY0bmcgdFxcdTAwZWNtIHRoXFx1MWVhNXkgdFxcdTAwZTBpIGtob1xcdTFlYTNuIHZcXHUxZWRiaSBzXFx1MWVkMSBcXHUwMTExaVxcdTFlYzduIHRob1xcdTFlYTFpIG5cXHUwMGUweSFcXFwiLCBcXFwiVGhcXHUwMGY0bmcgYlxcdTAwZTFvXFxcIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XFxuICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZXgpIHtcXG4gICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFxcXCJFeGNlcHRpb24gb2NjdXJyZWQ6IFxcXCIgKyBleC5nZXRNZXNzYWdlKCkpO1xcbiAgICAgICAgICAgICAgICBleC5wcmludFN0YWNrVHJhY2UoKTtcXG4gICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXFxcIkxcXHUxZWQ3aSBraGkgdFxcdTAwZWNtIGtpXFx1MWViZm06IFxcXCIgKyBleC5nZXRNZXNzYWdlKCksIFxcXCJMXFx1MWVkN2lcXFwiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcXG4gICAgICAgICAgICB9XFxuICAgICAgICB9XFxuICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0bkNoZWNrQWN0aW9uUGVyZm9ybWVkXCIsIFwib2xkX3N0cl9zdGFydF9saW5lX251bWJlclwiOiAyMTYsIFwib2xkX3N0cl9lbmRfbGluZV9udW1iZXJcIjogMjQwfV19IiwibWNwX3NlcnZlcl9uYW1lIjoiIiwibWNwX3Rvb2xfbmFtZSI6IiJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiTm93IEknbGwgZml4IHRoZSBpbmRlbnRhdGlvbiBpc3N1ZSBhbmQgYWRkIHRoZSBkZWJ1Z2dpbmcgY29kZTpcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IkhlcmUncyB0aGUgcmVzdWx0IG9mIHJ1bm5pbmcgYGNhdCAtbmAgb24gc3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vRm9yZ290UGFzc3dvcmQuamF2YTpcbiAgIDIxNVx0XG4gICAyMTZcdCAgICBwcml2YXRlIHZvaWQgYnRuQ2hlY2tBY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuQ2hlY2tBY3Rpb25QZXJmb3JtZWRcbiAgIDIxN1x0ICAgICAgICAgICAgaWYgKHZhbGlkYXRlUGhvbmUoKSkge1xuICAgMjE4XHQgICAgICAgICAgICBTdHJpbmcgcGhvbmUgPSB0eHRQaG9uZS5nZXRUZXh0KCk7XG4gICAyMTlcdCAgICAgICAgICAgIGN1cnJlbnRTdWJzY3JpYmVyID0gU3Vic2NyaWJlckRBTy5nZXRCeVBob25lKHBob25lKTtcbiAgIDIyMFx0XG4gICAyMjFcdCAgICAgICAgICAgIGlmIChjdXJyZW50U3Vic2NyaWJlciAhPSBudWxsKSB7XG4gICAyMjJcdCAgICAgICAgICAgICAgICAvLyBQaG9uZSBudW1iZXIgZm91bmQsIHNob3cgcGFzc3dvcmQgZmllbGRzXG4gICAyMjNcdCAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcIlTDrG0gdGjhuqV5IHTDoGkga2hv4bqjbiB24bubaSBz4buRIMSRaeG7h24gdGhv4bqhaSBuw6B5IVwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLklORk9STUFUSU9OX01FU1NBR0UpO1xuICAgMjI0XHRcbiAgIDIyNVx0ICAgICAgICAgICAgICAgIGJ0bkV4aXQuc2V0VmlzaWJsZSh0cnVlKTtcbiAgIDIyNlx0ICAgICAgICAgICAgICAgIGJ0bkNoYW5nZS5zZXRWaXNpYmxlKHRydWUpO1xuICAgMjI3XHQgICAgICAgICAgICAgICAgbGJOZXdQYXNzd29yZC5zZXRWaXNpYmxlKHRydWUpO1xuICAgMjI4XHQgICAgICAgICAgICAgICAgbGJDb25maXJtUGFzc3dvcmQuc2V0VmlzaWJsZSh0cnVlKTtcbiAgIDIyOVx0ICAgICAgICAgICAgICAgIHR4dFBhc3N3b3JkLnNldFZpc2libGUodHJ1ZSk7XG4gICAyMzBcdCAgICAgICAgICAgICAgICB0eHRDb25maXJtUGFzc3dvcmQuc2V0VmlzaWJsZSh0cnVlKTtcbiAgIDIzMVx0XG4gICAyMzJcdCAgICAgICAgICAgICAgICAvLyBEaXNhYmxlIHBob25lIGZpZWxkIGFuZCBjaGVjayBidXR0b25cbiAgIDIzM1x0ICAgICAgICAgICAgICAgIHR4dFBob25lLnNldEVkaXRhYmxlKGZhbHNlKTtcbiAgIDIzNFx0ICAgICAgICAgICAgICAgIGJ0bkNoZWNrLnNldEVuYWJsZWQoZmFsc2UpO1xuICAgMjM1XHQgICAgICAgICAgICAgICAgYnRuQ2hlY2suc2V0VmlzaWJsZShmYWxzZSk7XG4gICAyMzZcdCAgICAgICAgICAgIH0gZWxzZSB7XG4gICAyMzdcdCAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcIktow7RuZyB0w6xtIHRo4bqleSB0w6BpIGtob+G6o24gduG7m2kgc+G7kSDEkWnhu4duIHRob+G6oWkgbsOgeSFcIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgIDIzOFx0ICAgICAgICAgICAgfVxuICAgMjM5XHQgICAgICAgIH1cbiAgIDI0MFx0ICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0bkNoZWNrQWN0aW9uUGVyZm9ybWVkXG5Ub3RhbCBsaW5lcyBpbiBmaWxlOiAzMDdcbiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfMDFSU2Fmb3RQZFBHcGdCRnh0R3JDbXdXIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiRTovSG9jVGFwLzAyX0pBVkEvMDNfUHJvamVjdC9JbnRlcm5ldCBNYW5nZW1lbnQgU3lzdGVtIiwiZm9sZGVyUm9vdCI6IkU6L0hvY1RhcC8wMl9KQVZBLzAzX1Byb2plY3QvSW50ZXJuZXQgTWFuZ2VtZW50IFN5c3RlbSJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInRpbWVzdGFtcCI6IjIwMjUtMDUtMTNUMDE6MzE6MTEuNzUzWiIsInJlc3BvbnNlX3RleHQiOiJOb3cgSSdsbCBmaXggdGhlIGluZGVudGF0aW9uIGlzc3VlIGFuZCBhZGQgdGhlIGRlYnVnZ2luZyBjb2RlOlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6IjAxMWQ3ZjQzLWE2MzgtNDIwMi05YjRiLTljY2I1Nzc3ZTBkNSIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfMDE3M2YxUlN6WFJnWDRqaHc3azJiYUxVIiwidG9vbF9uYW1lIjoic3RyLXJlcGxhY2UtZWRpdG9yIiwiaW5wdXRfanNvbiI6IntcImNvbW1hbmRcIjogXCJ2aWV3XCIsIFwicGF0aFwiOiBcInNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL0ZvcmdvdFBhc3N3b3JkLmphdmFcIiwgXCJ2aWV3X3JhbmdlXCI6IFs0NSwgNTVdfSIsIm1jcF9zZXJ2ZXJfbmFtZSI6IiIsIm1jcF90b29sX25hbWUiOiIifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6Ik5vdyBsZXQncyBhbHNvIGNoZWNrIHRoZSB2YWxpZGF0ZVBob25lIG1ldGhvZCB0byBtYWtlIHN1cmUgaXQncyB3b3JraW5nIGNvcnJlY3RseTpcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IlN1Y2Nlc3NmdWxseSBlZGl0ZWQgdGhlIGZpbGUgc3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vRm9yZ290UGFzc3dvcmQuamF2YS5cblJlc3VsdCBmb3Igc3RyX3JlcGxhY2UgZm9yIGVudHJ5IHdpdGggaW5kZXggWzBdOlxuUmVwbGFjZW1lbnQgc3VjY2Vzc2Z1bC5cbkVkaXRlZCBzZWN0aW9uIGFmdGVyIElERSBhdXRvLWZvcm1hdHRpbmcgd2FzIGFwcGxpZWQ6XG4gICAyMTJcdCAgICAgICAgICAgIHRoaXMuZGlzcG9zZSgpO1xuICAgMjEzXHQgICAgICAgIH1cbiAgIDIxNFx0ICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0bkV4aXRBY3Rpb25QZXJmb3JtZWRcbiAgIDIxNVx0XG4gICAyMTZcdCAgICBwcml2YXRlIHZvaWQgYnRuQ2hlY2tBY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuQ2hlY2tBY3Rpb25QZXJmb3JtZWRcbiAgIDIxN1x0ICAgICAgICAvLyBEZWJ1ZyBtZXNzYWdlIHRvIGNvbmZpcm0gYnV0dG9uIGNsaWNrIGlzIHJlZ2lzdGVyZWRcbiAgIDIxOFx0ICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJDaGVjayBidXR0b24gY2xpY2tlZCFcIik7XG4gICAyMTlcdFxuICAgMjIwXHQgICAgICAgIC8vIENoZWNrIGlmIHBob25lIGZpZWxkIGlzIGVtcHR5XG4gICAyMjFcdCAgICAgICAgU3RyaW5nIHBob25lID0gdHh0UGhvbmUuZ2V0VGV4dCgpLnRyaW0oKTtcbiAgIDIyMlx0ICAgICAgICBpZiAocGhvbmUuaXNFbXB0eSgpKSB7XG4gICAyMjNcdCAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwiVnVpIGzDsm5nIG5o4bqtcCBz4buRIMSRaeG7h24gdGhv4bqhaSFcIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgIDIyNFx0ICAgICAgICAgICAgcmV0dXJuO1xuICAgMjI1XHQgICAgICAgIH1cbiAgIDIyNlx0XG4gICAyMjdcdCAgICAgICAgaWYgKHZhbGlkYXRlUGhvbmUoKSkge1xuICAgMjI4XHQgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJQaG9uZSB2YWxpZGF0aW9uIHBhc3NlZDogXCIgKyBwaG9uZSk7XG4gICAyMjlcdCAgICAgICAgICAgIHRyeSB7XG4gICAyMzBcdCAgICAgICAgICAgICAgICBjdXJyZW50U3Vic2NyaWJlciA9IFN1YnNjcmliZXJEQU8uZ2V0QnlQaG9uZShwaG9uZSk7XG4gICAyMzFcdCAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJEYXRhYmFzZSBxdWVyeSBjb21wbGV0ZWQuIFJlc3VsdDogXCIgKyAoY3VycmVudFN1YnNjcmliZXIgIT0gbnVsbCA/IFwiRm91bmRcIiA6IFwiTm90IGZvdW5kXCIpKTtcbiAgIDIzMlx0XG4gICAyMzNcdCAgICAgICAgICAgICAgICBpZiAoY3VycmVudFN1YnNjcmliZXIgIT0gbnVsbCkge1xuICAgMjM0XHQgICAgICAgICAgICAgICAgICAgIC8vIFBob25lIG51bWJlciBmb3VuZCwgc2hvdyBwYXNzd29yZCBmaWVsZHNcbiAgIDIzNVx0ICAgICAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcIlTDrG0gdGjhuqV5IHTDoGkga2hv4bqjbiB24bubaSBz4buRIMSRaeG7h24gdGhv4bqhaSBuw6B5IVwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLklORk9STUFUSU9OX01FU1NBR0UpO1xuICAgMjM2XHRcbiAgIDIzN1x0ICAgICAgICAgICAgICAgICAgICBidG5FeGl0LnNldFZpc2libGUodHJ1ZSk7XG4gICAyMzhcdCAgICAgICAgICAgICAgICAgICAgYnRuQ2hhbmdlLnNldFZpc2libGUodHJ1ZSk7XG4gICAyMzlcdCAgICAgICAgICAgICAgICAgICAgbGJOZXdQYXNzd29yZC5zZXRWaXNpYmxlKHRydWUpO1xuICAgMjQwXHQgICAgICAgICAgICAgICAgICAgIGxiQ29uZmlybVBhc3N3b3JkLnNldFZpc2libGUodHJ1ZSk7XG4gICAyNDFcdCAgICAgICAgICAgICAgICAgICAgdHh0UGFzc3dvcmQuc2V0VmlzaWJsZSh0cnVlKTtcbiAgIDI0Mlx0ICAgICAgICAgICAgICAgICAgICB0eHRDb25maXJtUGFzc3dvcmQuc2V0VmlzaWJsZSh0cnVlKTtcbiAgIDI0M1x0XG4gICAyNDRcdCAgICAgICAgICAgICAgICAgICAgLy8gRGlzYWJsZSBwaG9uZSBmaWVsZCBhbmQgY2hlY2sgYnV0dG9uXG4gICAyNDVcdCAgICAgICAgICAgICAgICAgICAgdHh0UGhvbmUuc2V0RWRpdGFibGUoZmFsc2UpO1xuICAgMjQ2XHQgICAgICAgICAgICAgICAgICAgIGJ0bkNoZWNrLnNldEVuYWJsZWQoZmFsc2UpO1xuICAgMjQ3XHQgICAgICAgICAgICAgICAgICAgIGJ0bkNoZWNrLnNldFZpc2libGUoZmFsc2UpO1xuICAgMjQ4XHQgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgIDI0OVx0ICAgICAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcIktow7RuZyB0w6xtIHRo4bqleSB0w6BpIGtob+G6o24gduG7m2kgc+G7kSDEkWnhu4duIHRob+G6oWkgbsOgeSFcIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgIDI1MFx0ICAgICAgICAgICAgICAgIH1cbiAgIDI1MVx0ICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGV4KSB7XG4gICAyNTJcdCAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJFeGNlcHRpb24gb2NjdXJyZWQ6IFwiICsgZXguZ2V0TWVzc2FnZSgpKTtcbiAgIDI1M1x0ICAgICAgICAgICAgICAgIGV4LnByaW50U3RhY2tUcmFjZSgpO1xuICAgMjU0XHQgICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXCJM4buXaSBraGkgdMOsbSBraeG6v206IFwiICsgZXguZ2V0TWVzc2FnZSgpLCBcIkzhu5dpXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgMjU1XHQgICAgICAgICAgICB9XG4gICAyNTZcdCAgICAgICAgfVxuICAgMjU3XHQgICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuQ2hlY2tBY3Rpb25QZXJmb3JtZWRcbiAgIDI1OFx0XG4gICAyNTlcdCAgICBwcml2YXRlIHZvaWQgYnRuQ2hhbmdlQWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkNoYW5nZUFjdGlvblBlcmZvcm1lZFxuICAgMjYwXHQgICAgICAgIGlmICh2YWxpZGF0ZUZpZWxkcygpICYmIGN1cnJlbnRTdWJzY3JpYmVyICE9IG51bGwpIHtcbiAgIDI2MVx0ICAgICAgICAgICAgU3RyaW5nIG5ld1Bhc3N3b3JkID0gdHh0UGFzc3dvcmQuZ2V0VGV4dCgpO1xuXG5SZXZpZXcgdGhlIGNoYW5nZXMgYW5kIG1ha2Ugc3VyZSB0aGV5IGFyZSBhcyBleHBlY3RlZCAoY29ycmVjdCBpbmRlbnRhdGlvbiwgbm8gZHVwbGljYXRlIGxpbmVzLCBldGMpLlxuRWRpdCB0aGUgZmlsZSBhZ2FpbiBpZiBuZWNlc3NhcnkuXG4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1XzAxNEZOR01qRXlkVTRFV0E2UFJiR1pNUSJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkU6L0hvY1RhcC8wMl9KQVZBLzAzX1Byb2plY3QvSW50ZXJuZXQgTWFuZ2VtZW50IFN5c3RlbSIsImZvbGRlclJvb3QiOiJFOi9Ib2NUYXAvMDJfSkFWQS8wM19Qcm9qZWN0L0ludGVybmV0IE1hbmdlbWVudCBTeXN0ZW0ifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJ0aW1lc3RhbXAiOiIyMDI1LTA1LTEzVDAxOjMxOjMwLjk4MFoiLCJyZXNwb25zZV90ZXh0IjoiTm93IGxldCdzIGFsc28gY2hlY2sgdGhlIHZhbGlkYXRlUGhvbmUgbWV0aG9kIHRvIG1ha2Ugc3VyZSBpdCdzIHdvcmtpbmcgY29ycmVjdGx5OlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6IjJjZmFkMTI4LWNkMjYtNGJmNS1iMmFhLTc1NjQ5ZjY0M2Q0MSIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfMDEzQjF6b0NxQndvU3d4NDlBanlEZmFZIiwidG9vbF9uYW1lIjoic3RyLXJlcGxhY2UtZWRpdG9yIiwiaW5wdXRfanNvbiI6IntcImNvbW1hbmRcIjogXCJzdHJfcmVwbGFjZVwiLCBcInBhdGhcIjogXCJzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9Gb3Jnb3RQYXNzd29yZC5qYXZhXCIsIFwic3RyX3JlcGxhY2VfZW50cmllc1wiOiBbe1wib2xkX3N0clwiOiBcIiAgICBwdWJsaWMgYm9vbGVhbiB2YWxpZGF0ZVBob25lKCl7XFxuICAgICAgICBTdHJpbmcgcGhvbmUgPSB0eHRQaG9uZS5nZXRUZXh0KCk7XFxuICAgICAgICBpZihwaG9uZS5sZW5ndGgoKSAhPSAxMCB8fCAhcGhvbmUubWF0Y2hlcyhwaG9uZVBhdHRlcm4pKSB7XFxuICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXFxcIlZ1aSBsXFx1MDBmMm5nIG5oXFx1MWVhZHAgXFx1MDExMVxcdTAwZmFuZyBcXHUwMTExXFx1MWVjYm5oIGRcXHUxZWExbmcgc1xcdTFlZDEgXFx1MDExMWlcXHUxZWM3biB0aG9cXHUxZWExaSFcXFwiLCBcXFwiVGhcXHUwMGY0bmcgYlxcdTAwZTFvXFxcIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XFxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xcbiAgICAgICAgfVxcbiAgICAgICAgcmV0dXJuIHRydWU7XFxuICAgIH1cIiwgXCJuZXdfc3RyXCI6IFwiICAgIHB1YmxpYyBib29sZWFuIHZhbGlkYXRlUGhvbmUoKXtcXG4gICAgICAgIFN0cmluZyBwaG9uZSA9IHR4dFBob25lLmdldFRleHQoKS50cmltKCk7XFxuICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXFxcIlZhbGlkYXRpbmcgcGhvbmU6IFxcXCIgKyBwaG9uZSk7XFxuICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXFxcIlBob25lIGxlbmd0aDogXFxcIiArIHBob25lLmxlbmd0aCgpKTtcXG4gICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcXFwiTWF0Y2hlcyBwYXR0ZXJuOiBcXFwiICsgcGhvbmUubWF0Y2hlcyhwaG9uZVBhdHRlcm4pKTtcXG4gICAgICAgIFxcbiAgICAgICAgaWYocGhvbmUubGVuZ3RoKCkgIT0gMTAgfHwgIXBob25lLm1hdGNoZXMocGhvbmVQYXR0ZXJuKSkge1xcbiAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFxcXCJWdWkgbFxcdTAwZjJuZyBuaFxcdTFlYWRwIFxcdTAxMTFcXHUwMGZhbmcgXFx1MDExMVxcdTFlY2JuaCBkXFx1MWVhMW5nIHNcXHUxZWQxIFxcdTAxMTFpXFx1MWVjN24gdGhvXFx1MWVhMWkhXFxcIiwgXFxcIlRoXFx1MDBmNG5nIGJcXHUwMGUxb1xcXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcXG4gICAgICAgIH1cXG4gICAgICAgIHJldHVybiB0cnVlO1xcbiAgICB9XCIsIFwib2xkX3N0cl9zdGFydF9saW5lX251bWJlclwiOiA0NywgXCJvbGRfc3RyX2VuZF9saW5lX251bWJlclwiOiA1NH1dfSIsIm1jcF9zZXJ2ZXJfbmFtZSI6IiIsIm1jcF90b29sX25hbWUiOiIifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IkxldCdzIHVwZGF0ZSB0aGUgdmFsaWRhdGVQaG9uZSBtZXRob2QgdG8gYWRkIG1vcmUgZGVidWdnaW5nIGluZm9ybWF0aW9uOlxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiSGVyZSdzIHRoZSByZXN1bHQgb2YgcnVubmluZyBgY2F0IC1uYCBvbiBzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9Gb3Jnb3RQYXNzd29yZC5qYXZhOlxuICAgIDQ1XHQgICAgfVxuICAgIDQ2XHRcbiAgICA0N1x0ICAgIHB1YmxpYyBib29sZWFuIHZhbGlkYXRlUGhvbmUoKXtcbiAgICA0OFx0ICAgICAgICBTdHJpbmcgcGhvbmUgPSB0eHRQaG9uZS5nZXRUZXh0KCk7XG4gICAgNDlcdCAgICAgICAgaWYocGhvbmUubGVuZ3RoKCkgIT0gMTAgfHwgIXBob25lLm1hdGNoZXMocGhvbmVQYXR0ZXJuKSkge1xuICAgIDUwXHQgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcIlZ1aSBsw7JuZyBuaOG6rXAgxJHDum5nIMSR4buLbmggZOG6oW5nIHPhu5EgxJFp4buHbiB0aG/huqFpIVwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgIDUxXHQgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgNTJcdCAgICAgICAgfVxuICAgIDUzXHQgICAgICAgIHJldHVybiB0cnVlO1xuICAgIDU0XHQgICAgfVxuICAgIDU1XHRcblRvdGFsIGxpbmVzIGluIGZpbGU6IDMyNFxuIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV8wMTczZjFSU3pYUmdYNGpodzdrMmJhTFUifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJFOi9Ib2NUYXAvMDJfSkFWQS8wM19Qcm9qZWN0L0ludGVybmV0IE1hbmdlbWVudCBTeXN0ZW0iLCJmb2xkZXJSb290IjoiRTovSG9jVGFwLzAyX0pBVkEvMDNfUHJvamVjdC9JbnRlcm5ldCBNYW5nZW1lbnQgU3lzdGVtIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwidGltZXN0YW1wIjoiMjAyNS0wNS0xM1QwMTozMTozNS4yOTNaIiwicmVzcG9uc2VfdGV4dCI6IkxldCdzIHVwZGF0ZSB0aGUgdmFsaWRhdGVQaG9uZSBtZXRob2QgdG8gYWRkIG1vcmUgZGVidWdnaW5nIGluZm9ybWF0aW9uOlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6Ijk3Yjg4MzFiLTlhY2UtNGE1Yi05YjM5LWMwNTBiMmMxMzMzMSIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfMDFWZDg2d1pmTnZIaEdlRXlQdnlxYk03IiwidG9vbF9uYW1lIjoic3RyLXJlcGxhY2UtZWRpdG9yIiwiaW5wdXRfanNvbiI6IntcImNvbW1hbmRcIjogXCJ2aWV3XCIsIFwicGF0aFwiOiBcInNyYy9EQU8vU3Vic2NyaWJlckRBTy5qYXZhXCIsIFwidmlld19yYW5nZVwiOiBbODAsIDEwMF19IiwibWNwX3NlcnZlcl9uYW1lIjoiIiwibWNwX3Rvb2xfbmFtZSI6IiJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiTm93IGxldCdzIGFsc28gY2hlY2sgdGhlIGRhdGFiYXNlIGNvbm5lY3Rpb24gYW5kIHRoZSBTdWJzY3JpYmVyREFPLmdldEJ5UGhvbmUgbWV0aG9kIHRvIG1ha2Ugc3VyZSBpdCdzIHdvcmtpbmcgY29ycmVjdGx5OlxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiU3VjY2Vzc2Z1bGx5IGVkaXRlZCB0aGUgZmlsZSBzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9Gb3Jnb3RQYXNzd29yZC5qYXZhLlxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZSBmb3IgZW50cnkgd2l0aCBpbmRleCBbMF06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgICA0M1x0ICAgICAgICB0eHRQYXNzd29yZC5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICA0NFx0ICAgICAgICB0eHRDb25maXJtUGFzc3dvcmQuc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgNDVcdCAgICB9XG4gICAgNDZcdFxuICAgIDQ3XHQgICAgcHVibGljIGJvb2xlYW4gdmFsaWRhdGVQaG9uZSgpe1xuICAgIDQ4XHQgICAgICAgIFN0cmluZyBwaG9uZSA9IHR4dFBob25lLmdldFRleHQoKS50cmltKCk7XG4gICAgNDlcdCAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiVmFsaWRhdGluZyBwaG9uZTogXCIgKyBwaG9uZSk7XG4gICAgNTBcdCAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiUGhvbmUgbGVuZ3RoOiBcIiArIHBob25lLmxlbmd0aCgpKTtcbiAgICA1MVx0ICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJNYXRjaGVzIHBhdHRlcm46IFwiICsgcGhvbmUubWF0Y2hlcyhwaG9uZVBhdHRlcm4pKTtcbiAgICA1Mlx0XG4gICAgNTNcdCAgICAgICAgaWYocGhvbmUubGVuZ3RoKCkgIT0gMTAgfHwgIXBob25lLm1hdGNoZXMocGhvbmVQYXR0ZXJuKSkge1xuICAgIDU0XHQgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcIlZ1aSBsw7JuZyBuaOG6rXAgxJHDum5nIMSR4buLbmggZOG6oW5nIHPhu5EgxJFp4buHbiB0aG/huqFpIVwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgIDU1XHQgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgNTZcdCAgICAgICAgfVxuICAgIDU3XHQgICAgICAgIHJldHVybiB0cnVlO1xuICAgIDU4XHQgICAgfVxuICAgIDU5XHRcbiAgICA2MFx0ICAgIHB1YmxpYyBib29sZWFuIHZhbGlkYXRlRmllbGRzKCl7XG4gICAgNjFcdCAgICAgICAgU3RyaW5nIHBhc3N3b3JkID0gdHh0UGFzc3dvcmQuZ2V0VGV4dCgpO1xuICAgIDYyXHQgICAgICAgIFN0cmluZyBjb25maXJtUGFzc3dvcmQgPSB0eHRDb25maXJtUGFzc3dvcmQuZ2V0VGV4dCgpO1xuXG5SZXZpZXcgdGhlIGNoYW5nZXMgYW5kIG1ha2Ugc3VyZSB0aGV5IGFyZSBhcyBleHBlY3RlZCAoY29ycmVjdCBpbmRlbnRhdGlvbiwgbm8gZHVwbGljYXRlIGxpbmVzLCBldGMpLlxuRWRpdCB0aGUgZmlsZSBhZ2FpbiBpZiBuZWNlc3NhcnkuXG4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1XzAxM0Ixem9DcUJ3b1N3eDQ5QWp5RGZhWSJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkU6L0hvY1RhcC8wMl9KQVZBLzAzX1Byb2plY3QvSW50ZXJuZXQgTWFuZ2VtZW50IFN5c3RlbSIsImZvbGRlclJvb3QiOiJFOi9Ib2NUYXAvMDJfSkFWQS8wM19Qcm9qZWN0L0ludGVybmV0IE1hbmdlbWVudCBTeXN0ZW0ifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJ0aW1lc3RhbXAiOiIyMDI1LTA1LTEzVDAxOjMxOjQ2Ljg1NloiLCJyZXNwb25zZV90ZXh0IjoiTm93IGxldCdzIGFsc28gY2hlY2sgdGhlIGRhdGFiYXNlIGNvbm5lY3Rpb24gYW5kIHRoZSBTdWJzY3JpYmVyREFPLmdldEJ5UGhvbmUgbWV0aG9kIHRvIG1ha2Ugc3VyZSBpdCdzIHdvcmtpbmcgY29ycmVjdGx5OlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6ImRiMDQ5NjczLTRhYmYtNDZiZS1hN2Q2LWM4YTgwOWU4MWFhMiIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfMDEzOTZubTg4TnNlV1JtUE55OXk3MjF1IiwidG9vbF9uYW1lIjoic3RyLXJlcGxhY2UtZWRpdG9yIiwiaW5wdXRfanNvbiI6IntcImNvbW1hbmRcIjogXCJzdHJfcmVwbGFjZVwiLCBcInBhdGhcIjogXCJzcmMvREFPL1N1YnNjcmliZXJEQU8uamF2YVwiLCBcInN0cl9yZXBsYWNlX2VudHJpZXNcIjogW3tcIm9sZF9zdHJcIjogXCIgICAgcHVibGljIHN0YXRpYyBTdWJzY3JpYmVyIGdldEJ5UGhvbmUoU3RyaW5nIHBob25lKSB7XFxuICAgICAgICBTdWJzY3JpYmVyIHN1YnNjcmliZXIgPSBudWxsO1xcbiAgICAgICAgdHJ5IHtcXG4gICAgICAgICAgICBSZXN1bHRTZXQgcnMgPSBEYk9wZXJhdGlvbnMuZ2V0RGF0YShcXFwiU0VMRUNUIHMuKiwgdS4qIEZST00gU1VCU0NSSUJFUiBzIEpPSU4gVVNFUiB1IE9OIHMudXNlcl9pZCA9IHUudXNlcl9pZCBXSEVSRSBzLnBob25lID0gJ1xcXCIgKyBwaG9uZSArIFxcXCInXFxcIik7XFxuICAgICAgICAgICAgaWYgKHJzLm5leHQoKSkge1xcbiAgICAgICAgICAgICAgICBzdWJzY3JpYmVyID0gbmV3IFN1YnNjcmliZXIoKTtcXG4gICAgICAgICAgICAgICAgc3Vic2NyaWJlci5zZXRTdWJzY3JpYmVyX2lkKHJzLmdldEludChcXFwic3Vic2NyaWJlcl9pZFxcXCIpKTtcXG4gICAgICAgICAgICAgICAgc3Vic2NyaWJlci5zZXRGdWxsTmFtZShycy5nZXRTdHJpbmcoXFxcIm5hbWVcXFwiKSk7XFxuICAgICAgICAgICAgICAgIHN1YnNjcmliZXIuc2V0QWRkcmVzcyhycy5nZXRTdHJpbmcoXFxcImFkZHJlc3NcXFwiKSk7XFxuICAgICAgICAgICAgICAgIHN1YnNjcmliZXIuc2V0UGhvbmUocnMuZ2V0U3RyaW5nKFxcXCJwaG9uZVxcXCIpKTtcXG4gICAgICAgICAgICAgICAgc3Vic2NyaWJlci5zZXRVc2VyX2lkKHJzLmdldEludChcXFwidXNlcl9pZFxcXCIpKTtcXG4gICAgICAgICAgICAgICAgc3Vic2NyaWJlci5zZXRVc2VybmFtZShycy5nZXRTdHJpbmcoXFxcInVzZXJuYW1lXFxcIikpO1xcbiAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLnNldFBhc3N3b3JkKHJzLmdldFN0cmluZyhcXFwicGFzc3dvcmRcXFwiKSk7XFxuICAgICAgICAgICAgICAgIHN1YnNjcmliZXIuc2V0Um9sZShycy5nZXRTdHJpbmcoXFxcInJvbGVcXFwiKSk7XFxuICAgICAgICAgICAgICAgIHN1YnNjcmliZXIuc2V0SXNBY3RpdmUocnMuZ2V0Qm9vbGVhbihcXFwiaXNBY3RpdmVcXFwiKSk7XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGV4KSB7XFxuICAgICAgICAgICAgZXgucHJpbnRTdGFja1RyYWNlKCk7XFxuICAgICAgICB9XFxuICAgICAgICByZXR1cm4gc3Vic2NyaWJlcjtcXG4gICAgfVwiLCBcIm5ld19zdHJcIjogXCIgICAgcHVibGljIHN0YXRpYyBTdWJzY3JpYmVyIGdldEJ5UGhvbmUoU3RyaW5nIHBob25lKSB7XFxuICAgICAgICBTdWJzY3JpYmVyIHN1YnNjcmliZXIgPSBudWxsO1xcbiAgICAgICAgdHJ5IHtcXG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXFxcIlNlYXJjaGluZyBmb3IgcGhvbmU6IFxcXCIgKyBwaG9uZSk7XFxuICAgICAgICAgICAgU3RyaW5nIHF1ZXJ5ID0gXFxcIlNFTEVDVCBzLiosIHUuKiBGUk9NIFNVQlNDUklCRVIgcyBKT0lOIFVTRVIgdSBPTiBzLnVzZXJfaWQgPSB1LnVzZXJfaWQgV0hFUkUgcy5waG9uZSA9ICdcXFwiICsgcGhvbmUgKyBcXFwiJ1xcXCI7XFxuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFxcXCJTUUwgUXVlcnk6IFxcXCIgKyBxdWVyeSk7XFxuICAgICAgICAgICAgXFxuICAgICAgICAgICAgUmVzdWx0U2V0IHJzID0gRGJPcGVyYXRpb25zLmdldERhdGEocXVlcnkpO1xcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcXFwiUXVlcnkgZXhlY3V0ZWQsIGNoZWNraW5nIHJlc3VsdHMuLi5cXFwiKTtcXG4gICAgICAgICAgICBcXG4gICAgICAgICAgICBpZiAocnMubmV4dCgpKSB7XFxuICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcXFwiU3Vic2NyaWJlciBmb3VuZCFcXFwiKTtcXG4gICAgICAgICAgICAgICAgc3Vic2NyaWJlciA9IG5ldyBTdWJzY3JpYmVyKCk7XFxuICAgICAgICAgICAgICAgIHN1YnNjcmliZXIuc2V0U3Vic2NyaWJlcl9pZChycy5nZXRJbnQoXFxcInN1YnNjcmliZXJfaWRcXFwiKSk7XFxuICAgICAgICAgICAgICAgIHN1YnNjcmliZXIuc2V0RnVsbE5hbWUocnMuZ2V0U3RyaW5nKFxcXCJuYW1lXFxcIikpO1xcbiAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLnNldEFkZHJlc3MocnMuZ2V0U3RyaW5nKFxcXCJhZGRyZXNzXFxcIikpO1xcbiAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLnNldFBob25lKHJzLmdldFN0cmluZyhcXFwicGhvbmVcXFwiKSk7XFxuICAgICAgICAgICAgICAgIHN1YnNjcmliZXIuc2V0VXNlcl9pZChycy5nZXRJbnQoXFxcInVzZXJfaWRcXFwiKSk7XFxuICAgICAgICAgICAgICAgIHN1YnNjcmliZXIuc2V0VXNlcm5hbWUocnMuZ2V0U3RyaW5nKFxcXCJ1c2VybmFtZVxcXCIpKTtcXG4gICAgICAgICAgICAgICAgc3Vic2NyaWJlci5zZXRQYXNzd29yZChycy5nZXRTdHJpbmcoXFxcInBhc3N3b3JkXFxcIikpO1xcbiAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLnNldFJvbGUocnMuZ2V0U3RyaW5nKFxcXCJyb2xlXFxcIikpO1xcbiAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLnNldElzQWN0aXZlKHJzLmdldEJvb2xlYW4oXFxcImlzQWN0aXZlXFxcIikpO1xcbiAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXFxcIlN1YnNjcmliZXIgZGF0YSBsb2FkZWQ6IFxcXCIgKyBzdWJzY3JpYmVyLmdldEZ1bGxOYW1lKCkpO1xcbiAgICAgICAgICAgIH0gZWxzZSB7XFxuICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcXFwiTm8gc3Vic2NyaWJlciBmb3VuZCB3aXRoIHBob25lOiBcXFwiICsgcGhvbmUpO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBleCkge1xcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcXFwiRXhjZXB0aW9uIGluIGdldEJ5UGhvbmU6IFxcXCIgKyBleC5nZXRNZXNzYWdlKCkpO1xcbiAgICAgICAgICAgIGV4LnByaW50U3RhY2tUcmFjZSgpO1xcbiAgICAgICAgfVxcbiAgICAgICAgcmV0dXJuIHN1YnNjcmliZXI7XFxuICAgIH1cIiwgXCJvbGRfc3RyX3N0YXJ0X2xpbmVfbnVtYmVyXCI6IDgxLCBcIm9sZF9zdHJfZW5kX2xpbmVfbnVtYmVyXCI6IDEwMX1dfSIsIm1jcF9zZXJ2ZXJfbmFtZSI6IiIsIm1jcF90b29sX25hbWUiOiIifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IkxldCdzIGFkZCBtb3JlIGRlYnVnZ2luZyB0byB0aGUgZ2V0QnlQaG9uZSBtZXRob2Q6XG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJIZXJlJ3MgdGhlIHJlc3VsdCBvZiBydW5uaW5nIGBjYXQgLW5gIG9uIHNyYy9EQU8vU3Vic2NyaWJlckRBTy5qYXZhOlxuICAgIDgwXHRcbiAgICA4MVx0ICAgIHB1YmxpYyBzdGF0aWMgU3Vic2NyaWJlciBnZXRCeVBob25lKFN0cmluZyBwaG9uZSkge1xuICAgIDgyXHQgICAgICAgIFN1YnNjcmliZXIgc3Vic2NyaWJlciA9IG51bGw7XG4gICAgODNcdCAgICAgICAgdHJ5IHtcbiAgICA4NFx0ICAgICAgICAgICAgUmVzdWx0U2V0IHJzID0gRGJPcGVyYXRpb25zLmdldERhdGEoXCJTRUxFQ1Qgcy4qLCB1LiogRlJPTSBTVUJTQ1JJQkVSIHMgSk9JTiBVU0VSIHUgT04gcy51c2VyX2lkID0gdS51c2VyX2lkIFdIRVJFIHMucGhvbmUgPSAnXCIgKyBwaG9uZSArIFwiJ1wiKTtcbiAgICA4NVx0ICAgICAgICAgICAgaWYgKHJzLm5leHQoKSkge1xuICAgIDg2XHQgICAgICAgICAgICAgICAgc3Vic2NyaWJlciA9IG5ldyBTdWJzY3JpYmVyKCk7XG4gICAgODdcdCAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLnNldFN1YnNjcmliZXJfaWQocnMuZ2V0SW50KFwic3Vic2NyaWJlcl9pZFwiKSk7XG4gICAgODhcdCAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLnNldEZ1bGxOYW1lKHJzLmdldFN0cmluZyhcIm5hbWVcIikpO1xuICAgIDg5XHQgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5zZXRBZGRyZXNzKHJzLmdldFN0cmluZyhcImFkZHJlc3NcIikpO1xuICAgIDkwXHQgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5zZXRQaG9uZShycy5nZXRTdHJpbmcoXCJwaG9uZVwiKSk7XG4gICAgOTFcdCAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLnNldFVzZXJfaWQocnMuZ2V0SW50KFwidXNlcl9pZFwiKSk7XG4gICAgOTJcdCAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLnNldFVzZXJuYW1lKHJzLmdldFN0cmluZyhcInVzZXJuYW1lXCIpKTtcbiAgICA5M1x0ICAgICAgICAgICAgICAgIHN1YnNjcmliZXIuc2V0UGFzc3dvcmQocnMuZ2V0U3RyaW5nKFwicGFzc3dvcmRcIikpO1xuICAgIDk0XHQgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5zZXRSb2xlKHJzLmdldFN0cmluZyhcInJvbGVcIikpO1xuICAgIDk1XHQgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5zZXRJc0FjdGl2ZShycy5nZXRCb29sZWFuKFwiaXNBY3RpdmVcIikpO1xuICAgIDk2XHQgICAgICAgICAgICB9XG4gICAgOTdcdCAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGV4KSB7XG4gICAgOThcdCAgICAgICAgICAgIGV4LnByaW50U3RhY2tUcmFjZSgpO1xuICAgIDk5XHQgICAgICAgIH1cbiAgIDEwMFx0ICAgICAgICByZXR1cm4gc3Vic2NyaWJlcjtcblRvdGFsIGxpbmVzIGluIGZpbGU6IDExNFxuIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV8wMVZkODZ3WmZOdkhoR2VFeVB2eXFiTTcifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJFOi9Ib2NUYXAvMDJfSkFWQS8wM19Qcm9qZWN0L0ludGVybmV0IE1hbmdlbWVudCBTeXN0ZW0iLCJmb2xkZXJSb290IjoiRTovSG9jVGFwLzAyX0pBVkEvMDNfUHJvamVjdC9JbnRlcm5ldCBNYW5nZW1lbnQgU3lzdGVtIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwidGltZXN0YW1wIjoiMjAyNS0wNS0xM1QwMTozMTo1Mi43ODhaIiwicmVzcG9uc2VfdGV4dCI6IkxldCdzIGFkZCBtb3JlIGRlYnVnZ2luZyB0byB0aGUgZ2V0QnlQaG9uZSBtZXRob2Q6XG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiN2Y4YWM4NjgtYTVhNS00YmM5LTg4MzQtY2M5OGE0YjIzNzJkIiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV8wMVlMRnQ2eFZxWEdZaFR1VlZ1bmhBQ0YiLCJ0b29sX25hbWUiOiJzdHItcmVwbGFjZS1lZGl0b3IiLCJpbnB1dF9qc29uIjoie1wiY29tbWFuZFwiOiBcInZpZXdcIiwgXCJwYXRoXCI6IFwic3JjL0RBTy9Db25uZWN0aW9uUHJvdmlkZXIuamF2YVwifSIsIm1jcF9zZXJ2ZXJfbmFtZSI6IiIsIm1jcF90b29sX25hbWUiOiIifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IkxldCdzIGFsc28gY2hlY2sgdGhlIGRhdGFiYXNlIGNvbm5lY3Rpb246XG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJTdWNjZXNzZnVsbHkgZWRpdGVkIHRoZSBmaWxlIHNyYy9EQU8vU3Vic2NyaWJlckRBTy5qYXZhLlxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZSBmb3IgZW50cnkgd2l0aCBpbmRleCBbMF06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgICA3N1x0ICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxTdWJzY3JpYmVyPiBnZXRBbGwoKSB7XG4gICAgNzhcdCAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpOyAvLyBHZW5lcmF0ZWQgZnJvbSBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ29kZS9HZW5lcmF0ZWRNZXRob2RCb2R5XG4gICAgNzlcdCAgICB9XG4gICAgODBcdFxuICAgIDgxXHQgICAgcHVibGljIHN0YXRpYyBTdWJzY3JpYmVyIGdldEJ5UGhvbmUoU3RyaW5nIHBob25lKSB7XG4gICAgODJcdCAgICAgICAgU3Vic2NyaWJlciBzdWJzY3JpYmVyID0gbnVsbDtcbiAgICA4M1x0ICAgICAgICB0cnkge1xuICAgIDg0XHQgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJTZWFyY2hpbmcgZm9yIHBob25lOiBcIiArIHBob25lKTtcbiAgICA4NVx0ICAgICAgICAgICAgU3RyaW5nIHF1ZXJ5ID0gXCJTRUxFQ1Qgcy4qLCB1LiogRlJPTSBTVUJTQ1JJQkVSIHMgSk9JTiBVU0VSIHUgT04gcy51c2VyX2lkID0gdS51c2VyX2lkIFdIRVJFIHMucGhvbmUgPSAnXCIgKyBwaG9uZSArIFwiJ1wiO1xuICAgIDg2XHQgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJTUUwgUXVlcnk6IFwiICsgcXVlcnkpO1xuICAgIDg3XHRcbiAgICA4OFx0ICAgICAgICAgICAgUmVzdWx0U2V0IHJzID0gRGJPcGVyYXRpb25zLmdldERhdGEocXVlcnkpO1xuICAgIDg5XHQgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJRdWVyeSBleGVjdXRlZCwgY2hlY2tpbmcgcmVzdWx0cy4uLlwiKTtcbiAgICA5MFx0XG4gICAgOTFcdCAgICAgICAgICAgIGlmIChycy5uZXh0KCkpIHtcbiAgICA5Mlx0ICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlN1YnNjcmliZXIgZm91bmQhXCIpO1xuICAgIDkzXHQgICAgICAgICAgICAgICAgc3Vic2NyaWJlciA9IG5ldyBTdWJzY3JpYmVyKCk7XG4gICAgOTRcdCAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLnNldFN1YnNjcmliZXJfaWQocnMuZ2V0SW50KFwic3Vic2NyaWJlcl9pZFwiKSk7XG4gICAgOTVcdCAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLnNldEZ1bGxOYW1lKHJzLmdldFN0cmluZyhcIm5hbWVcIikpO1xuICAgIDk2XHQgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5zZXRBZGRyZXNzKHJzLmdldFN0cmluZyhcImFkZHJlc3NcIikpO1xuICAgIDk3XHQgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5zZXRQaG9uZShycy5nZXRTdHJpbmcoXCJwaG9uZVwiKSk7XG4gICAgOThcdCAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLnNldFVzZXJfaWQocnMuZ2V0SW50KFwidXNlcl9pZFwiKSk7XG4gICAgOTlcdCAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLnNldFVzZXJuYW1lKHJzLmdldFN0cmluZyhcInVzZXJuYW1lXCIpKTtcbiAgIDEwMFx0ICAgICAgICAgICAgICAgIHN1YnNjcmliZXIuc2V0UGFzc3dvcmQocnMuZ2V0U3RyaW5nKFwicGFzc3dvcmRcIikpO1xuICAgMTAxXHQgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5zZXRSb2xlKHJzLmdldFN0cmluZyhcInJvbGVcIikpO1xuICAgMTAyXHQgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5zZXRJc0FjdGl2ZShycy5nZXRCb29sZWFuKFwiaXNBY3RpdmVcIikpO1xuICAgMTAzXHQgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiU3Vic2NyaWJlciBkYXRhIGxvYWRlZDogXCIgKyBzdWJzY3JpYmVyLmdldEZ1bGxOYW1lKCkpO1xuICAgMTA0XHQgICAgICAgICAgICB9IGVsc2Uge1xuICAgMTA1XHQgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiTm8gc3Vic2NyaWJlciBmb3VuZCB3aXRoIHBob25lOiBcIiArIHBob25lKTtcbiAgIDEwNlx0ICAgICAgICAgICAgfVxuICAgMTA3XHQgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBleCkge1xuICAgMTA4XHQgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJFeGNlcHRpb24gaW4gZ2V0QnlQaG9uZTogXCIgKyBleC5nZXRNZXNzYWdlKCkpO1xuICAgMTA5XHQgICAgICAgICAgICBleC5wcmludFN0YWNrVHJhY2UoKTtcbiAgIDExMFx0ICAgICAgICB9XG4gICAxMTFcdCAgICAgICAgcmV0dXJuIHN1YnNjcmliZXI7XG4gICAxMTJcdCAgICB9XG4gICAxMTNcdFxuICAgMTE0XHQgICAgcHVibGljIHN0YXRpYyBib29sZWFuIHVwZGF0ZVBhc3N3b3JkKGludCB1c2VySWQsIFN0cmluZyBuZXdQYXNzd29yZCkge1xuICAgMTE1XHQgICAgICAgIHRyeSB7XG4gICAxMTZcdCAgICAgICAgICAgIFN0cmluZyBxdWVyeSA9IFwiVVBEQVRFIFVTRVIgU0VUIHBhc3N3b3JkID0gJ1wiICsgbmV3UGFzc3dvcmQgKyBcIicgV0hFUkUgdXNlcl9pZCA9IFwiICsgdXNlcklkO1xuXG5SZXZpZXcgdGhlIGNoYW5nZXMgYW5kIG1ha2Ugc3VyZSB0aGV5IGFyZSBhcyBleHBlY3RlZCAoY29ycmVjdCBpbmRlbnRhdGlvbiwgbm8gZHVwbGljYXRlIGxpbmVzLCBldGMpLlxuRWRpdCB0aGUgZmlsZSBhZ2FpbiBpZiBuZWNlc3NhcnkuXG4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1XzAxMzk2bm04OE5zZVdSbVBOeTl5NzIxdSJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkU6L0hvY1RhcC8wMl9KQVZBLzAzX1Byb2plY3QvSW50ZXJuZXQgTWFuZ2VtZW50IFN5c3RlbSIsImZvbGRlclJvb3QiOiJFOi9Ib2NUYXAvMDJfSkFWQS8wM19Qcm9qZWN0L0ludGVybmV0IE1hbmdlbWVudCBTeXN0ZW0ifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJ0aW1lc3RhbXAiOiIyMDI1LTA1LTEzVDAxOjMyOjA1Ljc2N1oiLCJyZXNwb25zZV90ZXh0IjoiTGV0J3MgYWxzbyBjaGVjayB0aGUgZGF0YWJhc2UgY29ubmVjdGlvbjpcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiJhNjY0MTNjZS1hM2Y5LTQ1YmMtYmM2Ni03YzYyNWU0MDljOTYiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1XzAxUjFoNGV0VkQySG9WOUxFenQzNTFMRCIsInRvb2xfbmFtZSI6InN0ci1yZXBsYWNlLWVkaXRvciIsImlucHV0X2pzb24iOiJ7XCJjb21tYW5kXCI6IFwic3RyX3JlcGxhY2VcIiwgXCJwYXRoXCI6IFwic3JjL0RBTy9Db25uZWN0aW9uUHJvdmlkZXIuamF2YVwiLCBcInN0cl9yZXBsYWNlX2VudHJpZXNcIjogW3tcIm9sZF9zdHJcIjogXCIgICAgcHVibGljIHN0YXRpYyBDb25uZWN0aW9uIGdldENvbm4oKXtcXG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XFxuXFxuICAgICAgICB0cnkge1xcbiAgICAgICAgICAgIENsYXNzLmZvck5hbWUoXFxcImNvbS5teXNxbC5jai5qZGJjLkRyaXZlclxcXCIpO1xcbiAgICAgICAgICAgIGNvbm4gPSBEcml2ZXJNYW5hZ2VyLmdldENvbm5lY3Rpb24oVVJMLCBVU0VSLCBQQVNTV09SRCk7XFxuICAgICAgICB9IGNhdGNoIChDbGFzc05vdEZvdW5kRXhjZXB0aW9uIGUpIHtcXG4gICAgICAgICAgICBTeXN0ZW0uZXJyLnByaW50bG4oXFxcIk15U1FMIEpEQkMgRHJpdmVyIG5vdCBmb3VuZC5cXFwiKTtcXG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xcbiAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcXG4gICAgICAgICAgICBTeXN0ZW0uZXJyLnByaW50bG4oXFxcIkNvbm5lY3Rpb24gZmFpbGVkLlxcXCIpO1xcbiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XFxuICAgICAgICB9XFxuICAgICAgICByZXR1cm4gY29ubjtcXG4gICAgfVwiLCBcIm5ld19zdHJcIjogXCIgICAgcHVibGljIHN0YXRpYyBDb25uZWN0aW9uIGdldENvbm4oKXtcXG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XFxuXFxuICAgICAgICB0cnkge1xcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcXFwiQXR0ZW1wdGluZyB0byBjb25uZWN0IHRvIGRhdGFiYXNlLi4uXFxcIik7XFxuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFxcXCJVUkw6IFxcXCIgKyBVUkwpO1xcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcXFwiVXNlcjogXFxcIiArIFVTRVIpO1xcbiAgICAgICAgICAgIFxcbiAgICAgICAgICAgIENsYXNzLmZvck5hbWUoXFxcImNvbS5teXNxbC5jai5qZGJjLkRyaXZlclxcXCIpO1xcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcXFwiRHJpdmVyIGxvYWRlZCBzdWNjZXNzZnVsbHlcXFwiKTtcXG4gICAgICAgICAgICBcXG4gICAgICAgICAgICBjb25uID0gRHJpdmVyTWFuYWdlci5nZXRDb25uZWN0aW9uKFVSTCwgVVNFUiwgUEFTU1dPUkQpO1xcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcXFwiQ29ubmVjdGlvbiBlc3RhYmxpc2hlZDogXFxcIiArIChjb25uICE9IG51bGwpKTtcXG4gICAgICAgICAgICBcXG4gICAgICAgIH0gY2F0Y2ggKENsYXNzTm90Rm91bmRFeGNlcHRpb24gZSkge1xcbiAgICAgICAgICAgIFN5c3RlbS5lcnIucHJpbnRsbihcXFwiTXlTUUwgSkRCQyBEcml2ZXIgbm90IGZvdW5kLlxcXCIpO1xcbiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XFxuICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xcbiAgICAgICAgICAgIFN5c3RlbS5lcnIucHJpbnRsbihcXFwiQ29ubmVjdGlvbiBmYWlsZWQ6IFxcXCIgKyBlLmdldE1lc3NhZ2UoKSk7XFxuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcXG4gICAgICAgIH1cXG4gICAgICAgIHJldHVybiBjb25uO1xcbiAgICB9XCIsIFwib2xkX3N0cl9zdGFydF9saW5lX251bWJlclwiOiAxOCwgXCJvbGRfc3RyX2VuZF9saW5lX251bWJlclwiOiAzMn1dfSIsIm1jcF9zZXJ2ZXJfbmFtZSI6IiIsIm1jcF90b29sX25hbWUiOiIifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IkxldCdzIGFkZCBtb3JlIGRlYnVnZ2luZyB0byB0aGUgQ29ubmVjdGlvblByb3ZpZGVyOlxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiSGVyZSdzIHRoZSByZXN1bHQgb2YgcnVubmluZyBgY2F0IC1uYCBvbiBzcmMvREFPL0Nvbm5lY3Rpb25Qcm92aWRlci5qYXZhOlxuICAgICAxXHQvKlxuICAgICAyXHQgKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0xpY2Vuc2VzL2xpY2Vuc2UtZGVmYXVsdC50eHQgdG8gY2hhbmdlIHRoaXMgbGljZW5zZVxuICAgICAzXHQgKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ2xhc3MuamF2YSB0byBlZGl0IHRoaXMgdGVtcGxhdGVcbiAgICAgNFx0ICovXG4gICAgIDVcdHBhY2thZ2UgREFPO1xuICAgICA2XHRcbiAgICAgN1x0aW1wb3J0IGphdmEuc3FsLio7XG4gICAgIDhcdFxuICAgICA5XHQvKipcbiAgICAxMFx0ICpcbiAgICAxMVx0ICogQGF1dGhvciBOZ29jIFRoYW9cbiAgICAxMlx0ICovXG4gICAgMTNcdHB1YmxpYyBjbGFzcyBDb25uZWN0aW9uUHJvdmlkZXIge1xuICAgIDE0XHQgICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nIFVSTCA9IFwiamRiYzpteXNxbDovLzEyNS4yMTIuMjMxLjE4NDo2OTY5L0ludGVybmV0REJcIjtcbiAgICAxNVx0ICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmluZyBVU0VSID0gXCJtaW50b3JpMDlcIjtcbiAgICAxNlx0ICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmluZyBQQVNTV09SRCA9IFwiTWludG9yeTA5QDk2XCI7XG4gICAgMTdcdCAgICBcbiAgICAxOFx0ICAgIHB1YmxpYyBzdGF0aWMgQ29ubmVjdGlvbiBnZXRDb25uKCl7XG4gICAgMTlcdCAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcbiAgICAyMFx0XG4gICAgMjFcdCAgICAgICAgdHJ5IHtcbiAgICAyMlx0ICAgICAgICAgICAgQ2xhc3MuZm9yTmFtZShcImNvbS5teXNxbC5jai5qZGJjLkRyaXZlclwiKTtcbiAgICAyM1x0ICAgICAgICAgICAgY29ubiA9IERyaXZlck1hbmFnZXIuZ2V0Q29ubmVjdGlvbihVUkwsIFVTRVIsIFBBU1NXT1JEKTtcbiAgICAyNFx0ICAgICAgICB9IGNhdGNoIChDbGFzc05vdEZvdW5kRXhjZXB0aW9uIGUpIHtcbiAgICAyNVx0ICAgICAgICAgICAgU3lzdGVtLmVyci5wcmludGxuKFwiTXlTUUwgSkRCQyBEcml2ZXIgbm90IGZvdW5kLlwiKTtcbiAgICAyNlx0ICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAyN1x0ICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgIDI4XHQgICAgICAgICAgICBTeXN0ZW0uZXJyLnByaW50bG4oXCJDb25uZWN0aW9uIGZhaWxlZC5cIik7XG4gICAgMjlcdCAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgMzBcdCAgICAgICAgfVxuICAgIDMxXHQgICAgICAgIHJldHVybiBjb25uO1xuICAgIDMyXHQgICAgfVxuICAgIDMzXHQgICAgXG4gICAgMzRcdCAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIG1haW4oU3RyaW5nW10gYXJncykge1xuICAgIDM1XHQgICAgICAgIENvbm5lY3Rpb24gY29ubmVjdGlvbiA9IGdldENvbm4oKTtcbiAgICAzNlx0XG4gICAgMzdcdCAgICAgICAgaWYgKGNvbm5lY3Rpb24gIT0gbnVsbCkge1xuICAgIDM4XHQgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJL4bq/dCBu4buRaSB0aMOgbmggY8O0bmchXCIpO1xuICAgIDM5XHQgICAgICAgIH0gZWxzZSB7XG4gICAgNDBcdCAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkvhur90IG7hu5FpIHRo4bqldCBi4bqhaSFcIik7XG4gICAgNDFcdCAgICAgICAgfVxuICAgIDQyXHQgICAgfVxuICAgIDQzXHQgICAgXG4gICAgNDRcdH1cbiAgICA0NVx0XG5Ub3RhbCBsaW5lcyBpbiBmaWxlOiA0NVxuIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV8wMVlMRnQ2eFZxWEdZaFR1VlZ1bmhBQ0YifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJFOi9Ib2NUYXAvMDJfSkFWQS8wM19Qcm9qZWN0L0ludGVybmV0IE1hbmdlbWVudCBTeXN0ZW0iLCJmb2xkZXJSb290IjoiRTovSG9jVGFwLzAyX0pBVkEvMDNfUHJvamVjdC9JbnRlcm5ldCBNYW5nZW1lbnQgU3lzdGVtIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwidGltZXN0YW1wIjoiMjAyNS0wNS0xM1QwMTozMjowOS4xMjNaIiwicmVzcG9uc2VfdGV4dCI6IkxldCdzIGFkZCBtb3JlIGRlYnVnZ2luZyB0byB0aGUgQ29ubmVjdGlvblByb3ZpZGVyOlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6ImIxNTcxYjYzLTAxYzMtNGIyMS1hMjdjLTJkNzBmZjZhNjQzNCIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfMDFNVnlaMmNNV05CaDJRZUJtZE5IWXBZIiwidG9vbF9uYW1lIjoic3RyLXJlcGxhY2UtZWRpdG9yIiwiaW5wdXRfanNvbiI6IntcImNvbW1hbmRcIjogXCJ2aWV3XCIsIFwicGF0aFwiOiBcInNyYy9EQU8vRGJPcGVyYXRpb25zLmphdmFcIiwgXCJ2aWV3X3JhbmdlXCI6IFszMCwgNTBdfSIsIm1jcF9zZXJ2ZXJfbmFtZSI6IiIsIm1jcF90b29sX25hbWUiOiIifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6Ik5vdyBsZXQncyBhbHNvIGNoZWNrIHRoZSBEYk9wZXJhdGlvbnMuZ2V0RGF0YSBtZXRob2Q6XG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJTdWNjZXNzZnVsbHkgZWRpdGVkIHRoZSBmaWxlIHNyYy9EQU8vQ29ubmVjdGlvblByb3ZpZGVyLmphdmEuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlIGZvciBlbnRyeSB3aXRoIGluZGV4IFswXTpcblJlcGxhY2VtZW50IHN1Y2Nlc3NmdWwuXG5FZGl0ZWQgc2VjdGlvbiBhZnRlciBJREUgYXV0by1mb3JtYXR0aW5nIHdhcyBhcHBsaWVkOlxuICAgIDE0XHQgICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nIFVSTCA9IFwiamRiYzpteXNxbDovLzEyNS4yMTIuMjMxLjE4NDo2OTY5L0ludGVybmV0REJcIjtcbiAgICAxNVx0ICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmluZyBVU0VSID0gXCJtaW50b3JpMDlcIjtcbiAgICAxNlx0ICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmluZyBQQVNTV09SRCA9IFwiTWludG9yeTA5QDk2XCI7XG4gICAgMTdcdFxuICAgIDE4XHQgICAgcHVibGljIHN0YXRpYyBDb25uZWN0aW9uIGdldENvbm4oKXtcbiAgICAxOVx0ICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgIDIwXHRcbiAgICAyMVx0ICAgICAgICB0cnkge1xuICAgIDIyXHQgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJBdHRlbXB0aW5nIHRvIGNvbm5lY3QgdG8gZGF0YWJhc2UuLi5cIik7XG4gICAgMjNcdCAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlVSTDogXCIgKyBVUkwpO1xuICAgIDI0XHQgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJVc2VyOiBcIiArIFVTRVIpO1xuICAgIDI1XHRcbiAgICAyNlx0ICAgICAgICAgICAgQ2xhc3MuZm9yTmFtZShcImNvbS5teXNxbC5jai5qZGJjLkRyaXZlclwiKTtcbiAgICAyN1x0ICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRHJpdmVyIGxvYWRlZCBzdWNjZXNzZnVsbHlcIik7XG4gICAgMjhcdFxuICAgIDI5XHQgICAgICAgICAgICBjb25uID0gRHJpdmVyTWFuYWdlci5nZXRDb25uZWN0aW9uKFVSTCwgVVNFUiwgUEFTU1dPUkQpO1xuICAgIDMwXHQgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJDb25uZWN0aW9uIGVzdGFibGlzaGVkOiBcIiArIChjb25uICE9IG51bGwpKTtcbiAgICAzMVx0XG4gICAgMzJcdCAgICAgICAgfSBjYXRjaCAoQ2xhc3NOb3RGb3VuZEV4Y2VwdGlvbiBlKSB7XG4gICAgMzNcdCAgICAgICAgICAgIFN5c3RlbS5lcnIucHJpbnRsbihcIk15U1FMIEpEQkMgRHJpdmVyIG5vdCBmb3VuZC5cIik7XG4gICAgMzRcdCAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgMzVcdCAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcbiAgICAzNlx0ICAgICAgICAgICAgU3lzdGVtLmVyci5wcmludGxuKFwiQ29ubmVjdGlvbiBmYWlsZWQ6IFwiICsgZS5nZXRNZXNzYWdlKCkpO1xuICAgIDM3XHQgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgIDM4XHQgICAgICAgIH1cbiAgICAzOVx0ICAgICAgICByZXR1cm4gY29ubjtcbiAgICA0MFx0ICAgIH1cbiAgICA0MVx0XG4gICAgNDJcdCAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIG1haW4oU3RyaW5nW10gYXJncykge1xuICAgIDQzXHQgICAgICAgIENvbm5lY3Rpb24gY29ubmVjdGlvbiA9IGdldENvbm4oKTtcbiAgICA0NFx0XG5cblJldmlldyB0aGUgY2hhbmdlcyBhbmQgbWFrZSBzdXJlIHRoZXkgYXJlIGFzIGV4cGVjdGVkIChjb3JyZWN0IGluZGVudGF0aW9uLCBubyBkdXBsaWNhdGUgbGluZXMsIGV0YykuXG5FZGl0IHRoZSBmaWxlIGFnYWluIGlmIG5lY2Vzc2FyeS5cbiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfMDFSMWg0ZXRWRDJIb1Y5TEV6dDM1MUxEIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiRTovSG9jVGFwLzAyX0pBVkEvMDNfUHJvamVjdC9JbnRlcm5ldCBNYW5nZW1lbnQgU3lzdGVtIiwiZm9sZGVyUm9vdCI6IkU6L0hvY1RhcC8wMl9KQVZBLzAzX1Byb2plY3QvSW50ZXJuZXQgTWFuZ2VtZW50IFN5c3RlbSJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInRpbWVzdGFtcCI6IjIwMjUtMDUtMTNUMDE6MzI6MTguNzE4WiIsInJlc3BvbnNlX3RleHQiOiJOb3cgbGV0J3MgYWxzbyBjaGVjayB0aGUgRGJPcGVyYXRpb25zLmdldERhdGEgbWV0aG9kOlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6IjVjNDI5ODMxLWI2ODMtNDgxYy05MzhiLWZkNTQ0ZGFjZmIzNCIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfMDFQc2czRG44dkZZZTQ5Z1JlWm1MUVM1IiwidG9vbF9uYW1lIjoic3RyLXJlcGxhY2UtZWRpdG9yIiwiaW5wdXRfanNvbiI6IntcImNvbW1hbmRcIjogXCJzdHJfcmVwbGFjZVwiLCBcInBhdGhcIjogXCJzcmMvREFPL0RiT3BlcmF0aW9ucy5qYXZhXCIsIFwic3RyX3JlcGxhY2VfZW50cmllc1wiOiBbe1wib2xkX3N0clwiOiBcIiAgICBwdWJsaWMgc3RhdGljIFJlc3VsdFNldCBnZXREYXRhKFN0cmluZyBxdWVyeSl7XFxuICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xcbiAgICAgICAgU3RhdGVtZW50IHN0ID0gbnVsbDtcXG4gICAgICAgIFJlc3VsdFNldCBycyA9IG51bGw7XFxuICAgICAgICBcXG4gICAgICAgIHRyeXtcXG4gICAgICAgICAgICBjb25uID0gQ29ubmVjdGlvblByb3ZpZGVyLmdldENvbm4oKTtcXG4gICAgICAgICAgICBzdCA9IGNvbm4uY3JlYXRlU3RhdGVtZW50KCk7XFxuICAgICAgICAgICAgcnMgPSBzdC5leGVjdXRlUXVlcnkocXVlcnkpO1xcbiAgICAgICAgICAgIFxcbiAgICAgICAgICAgIHJldHVybiBycztcXG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBleCl7XFxuICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgZXgsIFxcXCJNZXNzYWdlXFxcIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XFxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XFxuICAgICAgICB9IFxcbiAgICB9XCIsIFwibmV3X3N0clwiOiBcIiAgICBwdWJsaWMgc3RhdGljIFJlc3VsdFNldCBnZXREYXRhKFN0cmluZyBxdWVyeSl7XFxuICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xcbiAgICAgICAgU3RhdGVtZW50IHN0ID0gbnVsbDtcXG4gICAgICAgIFJlc3VsdFNldCBycyA9IG51bGw7XFxuICAgICAgICBcXG4gICAgICAgIHRyeXtcXG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXFxcIkRiT3BlcmF0aW9ucy5nZXREYXRhIC0gRXhlY3V0aW5nIHF1ZXJ5OiBcXFwiICsgcXVlcnkpO1xcbiAgICAgICAgICAgIGNvbm4gPSBDb25uZWN0aW9uUHJvdmlkZXIuZ2V0Q29ubigpO1xcbiAgICAgICAgICAgIFxcbiAgICAgICAgICAgIGlmIChjb25uID09IG51bGwpIHtcXG4gICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFxcXCJEYk9wZXJhdGlvbnMuZ2V0RGF0YSAtIENvbm5lY3Rpb24gaXMgbnVsbCFcXFwiKTtcXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgICAgIFxcbiAgICAgICAgICAgIHN0ID0gY29ubi5jcmVhdGVTdGF0ZW1lbnQoKTtcXG4gICAgICAgICAgICBycyA9IHN0LmV4ZWN1dGVRdWVyeShxdWVyeSk7XFxuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFxcXCJEYk9wZXJhdGlvbnMuZ2V0RGF0YSAtIFF1ZXJ5IGV4ZWN1dGVkIHN1Y2Nlc3NmdWxseVxcXCIpO1xcbiAgICAgICAgICAgIFxcbiAgICAgICAgICAgIHJldHVybiBycztcXG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBleCl7XFxuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFxcXCJEYk9wZXJhdGlvbnMuZ2V0RGF0YSAtIEV4Y2VwdGlvbjogXFxcIiArIGV4LmdldE1lc3NhZ2UoKSk7XFxuICAgICAgICAgICAgZXgucHJpbnRTdGFja1RyYWNlKCk7XFxuICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgZXgsIFxcXCJNZXNzYWdlXFxcIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XFxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XFxuICAgICAgICB9IFxcbiAgICB9XCIsIFwib2xkX3N0cl9zdGFydF9saW5lX251bWJlclwiOiAzMywgXCJvbGRfc3RyX2VuZF9saW5lX251bWJlclwiOiA0OH1dfSIsIm1jcF9zZXJ2ZXJfbmFtZSI6IiIsIm1jcF90b29sX25hbWUiOiIifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IkxldCdzIGFkZCBkZWJ1Z2dpbmcgdG8gdGhlIGdldERhdGEgbWV0aG9kOlxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiSGVyZSdzIHRoZSByZXN1bHQgb2YgcnVubmluZyBgY2F0IC1uYCBvbiBzcmMvREFPL0RiT3BlcmF0aW9ucy5qYXZhOlxuICAgIDMwXHQgICAgICAgIH1cbiAgICAzMVx0ICAgIH1cbiAgICAzMlx0ICAgIFxuICAgIDMzXHQgICAgcHVibGljIHN0YXRpYyBSZXN1bHRTZXQgZ2V0RGF0YShTdHJpbmcgcXVlcnkpe1xuICAgIDM0XHQgICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgMzVcdCAgICAgICAgU3RhdGVtZW50IHN0ID0gbnVsbDtcbiAgICAzNlx0ICAgICAgICBSZXN1bHRTZXQgcnMgPSBudWxsO1xuICAgIDM3XHQgICAgICAgIFxuICAgIDM4XHQgICAgICAgIHRyeXtcbiAgICAzOVx0ICAgICAgICAgICAgY29ubiA9IENvbm5lY3Rpb25Qcm92aWRlci5nZXRDb25uKCk7XG4gICAgNDBcdCAgICAgICAgICAgIHN0ID0gY29ubi5jcmVhdGVTdGF0ZW1lbnQoKTtcbiAgICA0MVx0ICAgICAgICAgICAgcnMgPSBzdC5leGVjdXRlUXVlcnkocXVlcnkpO1xuICAgIDQyXHQgICAgICAgICAgICBcbiAgICA0M1x0ICAgICAgICAgICAgcmV0dXJuIHJzO1xuICAgIDQ0XHQgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBleCl7XG4gICAgNDVcdCAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIGV4LCBcIk1lc3NhZ2VcIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAgNDZcdCAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgIDQ3XHQgICAgICAgIH0gXG4gICAgNDhcdCAgICB9XG4gICAgNDlcdFxuICAgIDUwXHQgICAgcHVibGljIHN0YXRpYyBpbnQgZ2V0TmV4dElkKFN0cmluZyB0YWJsZU5hbWUsIFN0cmluZyBpZENvbHVtbk5hbWUpIHtcblRvdGFsIGxpbmVzIGluIGZpbGU6IDEzMFxuIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV8wMU1WeVoyY01XTkJoMlFlQm1kTkhZcFkifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJFOi9Ib2NUYXAvMDJfSkFWQS8wM19Qcm9qZWN0L0ludGVybmV0IE1hbmdlbWVudCBTeXN0ZW0iLCJmb2xkZXJSb290IjoiRTovSG9jVGFwLzAyX0pBVkEvMDNfUHJvamVjdC9JbnRlcm5ldCBNYW5nZW1lbnQgU3lzdGVtIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwidGltZXN0YW1wIjoiMjAyNS0wNS0xM1QwMTozMjoyMi44NTVaIiwicmVzcG9uc2VfdGV4dCI6IkxldCdzIGFkZCBkZWJ1Z2dpbmcgdG8gdGhlIGdldERhdGEgbWV0aG9kOlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6ImFiMWUzMjY5LTU0YWItNGE5NS1iZGM4LWMxOGY1NDdkMzgwMyIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6Ik5vdyBsZXQncyBydW4gdGhlIGFwcGxpY2F0aW9uIGFuZCBzZWUgaWYgd2UgY2FuIGlkZW50aWZ5IHRoZSBpc3N1ZSB3aXRoIHRoZSBkZWJ1Z2dpbmcgaW5mb3JtYXRpb24gd2UndmUgYWRkZWQuIFRoZSBjaGFuZ2VzIHdlJ3ZlIG1hZGUgc2hvdWxkIGhlbHAgdXMgdW5kZXJzdGFuZCB3aGF0J3MgaGFwcGVuaW5nIHdoZW4gdGhlIENoZWNrIGJ1dHRvbiBpcyBjbGlja2VkLlxuXG5IZXJlJ3MgYSBzdW1tYXJ5IG9mIHRoZSBjaGFuZ2VzIHdlJ3ZlIG1hZGU6XG5cbjEuIEFkZGVkIGRlYnVnZ2luZyB0byB0aGUgYnRuQ2hlY2tBY3Rpb25QZXJmb3JtZWQgbWV0aG9kOlxuICAgLSBBZGRlZCBjb25zb2xlIG91dHB1dCB0byBjb25maXJtIHRoZSBidXR0b24gY2xpY2sgaXMgcmVnaXN0ZXJlZFxuICAgLSBBZGRlZCB2YWxpZGF0aW9uIGZvciBlbXB0eSBwaG9uZSBmaWVsZFxuICAgLSBBZGRlZCB0cnktY2F0Y2ggYmxvY2sgdG8gY2F0Y2ggYW5kIGRpc3BsYXkgYW55IGV4Y2VwdGlvbnNcbiAgIC0gQWRkZWQgbW9yZSBkZXRhaWxlZCBjb25zb2xlIG91dHB1dCBhdCBlYWNoIHN0ZXBcblxuMi4gRW5oYW5jZWQgdGhlIHZhbGlkYXRlUGhvbmUgbWV0aG9kOlxuICAgLSBBZGRlZCBjb25zb2xlIG91dHB1dCB0byBzaG93IHRoZSBwaG9uZSBudW1iZXIgYmVpbmcgdmFsaWRhdGVkXG4gICAtIEFkZGVkIGNvbnNvbGUgb3V0cHV0IHRvIHNob3cgdGhlIHZhbGlkYXRpb24gcmVzdWx0c1xuXG4zLiBBZGRlZCBkZWJ1Z2dpbmcgdG8gdGhlIFN1YnNjcmliZXJEQU8uZ2V0QnlQaG9uZSBtZXRob2Q6XG4gICAtIEFkZGVkIGNvbnNvbGUgb3V0cHV0IHRvIHNob3cgdGhlIFNRTCBxdWVyeSBiZWluZyBleGVjdXRlZFxuICAgLSBBZGRlZCBjb25zb2xlIG91dHB1dCB0byBzaG93IHRoZSByZXN1bHRzIG9mIHRoZSBxdWVyeVxuICAgLSBBZGRlZCBtb3JlIGRldGFpbGVkIGV4Y2VwdGlvbiBoYW5kbGluZ1xuXG40LiBBZGRlZCBkZWJ1Z2dpbmcgdG8gdGhlIENvbm5lY3Rpb25Qcm92aWRlci5nZXRDb25uIG1ldGhvZDpcbiAgIC0gQWRkZWQgY29uc29sZSBvdXRwdXQgdG8gc2hvdyB0aGUgY29ubmVjdGlvbiBkZXRhaWxzXG4gICAtIEFkZGVkIGNvbnNvbGUgb3V0cHV0IHRvIGNvbmZpcm0gd2hlbiB0aGUgY29ubmVjdGlvbiBpcyBlc3RhYmxpc2hlZFxuXG41LiBBZGRlZCBkZWJ1Z2dpbmcgdG8gdGhlIERiT3BlcmF0aW9ucy5nZXREYXRhIG1ldGhvZDpcbiAgIC0gQWRkZWQgY29uc29sZSBvdXRwdXQgdG8gc2hvdyB0aGUgcXVlcnkgYmVpbmcgZXhlY3V0ZWRcbiAgIC0gQWRkZWQgY29uc29sZSBvdXRwdXQgdG8gY29uZmlybSB3aGVuIHRoZSBxdWVyeSBpcyBleGVjdXRlZCBzdWNjZXNzZnVsbHlcbiAgIC0gQWRkZWQgbW9yZSBkZXRhaWxlZCBleGNlcHRpb24gaGFuZGxpbmdcblxuVGhlc2UgY2hhbmdlcyBzaG91bGQgaGVscCB1cyBpZGVudGlmeSB3aGVyZSB0aGUgaXNzdWUgaXMgb2NjdXJyaW5nLiBXaGVuIHlvdSBydW4gdGhlIGFwcGxpY2F0aW9uIGFuZCBjbGljayB0aGUgQ2hlY2sgYnV0dG9uLCBjaGVjayB0aGUgY29uc29sZSBvdXRwdXQgdG8gc2VlIHdoYXQncyBoYXBwZW5pbmcuIFRoZSBpc3N1ZSBjb3VsZCBiZTpcblxuMS4gVGhlIGJ1dHRvbiBjbGljayBldmVudCBpcyBub3QgYmVpbmcgdHJpZ2dlcmVkXG4yLiBUaGUgcGhvbmUgdmFsaWRhdGlvbiBpcyBmYWlsaW5nXG4zLiBUaGUgZGF0YWJhc2UgY29ubmVjdGlvbiBpcyBmYWlsaW5nXG40LiBUaGUgU1FMIHF1ZXJ5IGlzIG5vdCByZXR1cm5pbmcgYW55IHJlc3VsdHNcblxuQmFzZWQgb24gdGhlIGNvbnNvbGUgb3V0cHV0LCB3ZSBjYW4gZGV0ZXJtaW5lIHRoZSBleGFjdCBpc3N1ZSBhbmQgZml4IGl0LlxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiU3VjY2Vzc2Z1bGx5IGVkaXRlZCB0aGUgZmlsZSBzcmMvREFPL0RiT3BlcmF0aW9ucy5qYXZhLlxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZSBmb3IgZW50cnkgd2l0aCBpbmRleCBbMF06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgICAyOVx0ICAgICAgICAgICAgfVxuICAgIDMwXHQgICAgICAgIH1cbiAgICAzMVx0ICAgIH1cbiAgICAzMlx0XG4gICAgMzNcdCAgICBwdWJsaWMgc3RhdGljIFJlc3VsdFNldCBnZXREYXRhKFN0cmluZyBxdWVyeSl7XG4gICAgMzRcdCAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcbiAgICAzNVx0ICAgICAgICBTdGF0ZW1lbnQgc3QgPSBudWxsO1xuICAgIDM2XHQgICAgICAgIFJlc3VsdFNldCBycyA9IG51bGw7XG4gICAgMzdcdFxuICAgIDM4XHQgICAgICAgIHRyeXtcbiAgICAzOVx0ICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRGJPcGVyYXRpb25zLmdldERhdGEgLSBFeGVjdXRpbmcgcXVlcnk6IFwiICsgcXVlcnkpO1xuICAgIDQwXHQgICAgICAgICAgICBjb25uID0gQ29ubmVjdGlvblByb3ZpZGVyLmdldENvbm4oKTtcbiAgICA0MVx0XG4gICAgNDJcdCAgICAgICAgICAgIGlmIChjb25uID09IG51bGwpIHtcbiAgICA0M1x0ICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkRiT3BlcmF0aW9ucy5nZXREYXRhIC0gQ29ubmVjdGlvbiBpcyBudWxsIVwiKTtcbiAgICA0NFx0ICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgIDQ1XHQgICAgICAgICAgICB9XG4gICAgNDZcdFxuICAgIDQ3XHQgICAgICAgICAgICBzdCA9IGNvbm4uY3JlYXRlU3RhdGVtZW50KCk7XG4gICAgNDhcdCAgICAgICAgICAgIHJzID0gc3QuZXhlY3V0ZVF1ZXJ5KHF1ZXJ5KTtcbiAgICA0OVx0ICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRGJPcGVyYXRpb25zLmdldERhdGEgLSBRdWVyeSBleGVjdXRlZCBzdWNjZXNzZnVsbHlcIik7XG4gICAgNTBcdFxuICAgIDUxXHQgICAgICAgICAgICByZXR1cm4gcnM7XG4gICAgNTJcdCAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGV4KXtcbiAgICA1M1x0ICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRGJPcGVyYXRpb25zLmdldERhdGEgLSBFeGNlcHRpb246IFwiICsgZXguZ2V0TWVzc2FnZSgpKTtcbiAgICA1NFx0ICAgICAgICAgICAgZXgucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgNTVcdCAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIGV4LCBcIk1lc3NhZ2VcIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAgNTZcdCAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgIDU3XHQgICAgICAgIH1cbiAgICA1OFx0ICAgIH1cbiAgICA1OVx0XG4gICAgNjBcdCAgICBwdWJsaWMgc3RhdGljIGludCBnZXROZXh0SWQoU3RyaW5nIHRhYmxlTmFtZSwgU3RyaW5nIGlkQ29sdW1uTmFtZSkge1xuICAgIDYxXHQgICAgICAgIGludCBuZXh0SWQgPSAxO1xuICAgIDYyXHQgICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG5cblJldmlldyB0aGUgY2hhbmdlcyBhbmQgbWFrZSBzdXJlIHRoZXkgYXJlIGFzIGV4cGVjdGVkIChjb3JyZWN0IGluZGVudGF0aW9uLCBubyBkdXBsaWNhdGUgbGluZXMsIGV0YykuXG5FZGl0IHRoZSBmaWxlIGFnYWluIGlmIG5lY2Vzc2FyeS5cbiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfMDFQc2czRG44dkZZZTQ5Z1JlWm1MUVM1In19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiRTovSG9jVGFwLzAyX0pBVkEvMDNfUHJvamVjdC9JbnRlcm5ldCBNYW5nZW1lbnQgU3lzdGVtIiwiZm9sZGVyUm9vdCI6IkU6L0hvY1RhcC8wMl9KQVZBLzAzX1Byb2plY3QvSW50ZXJuZXQgTWFuZ2VtZW50IFN5c3RlbSJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInRpbWVzdGFtcCI6IjIwMjUtMDUtMTNUMDE6MzI6MzIuMjk0WiIsInJlc3BvbnNlX3RleHQiOiJOb3cgbGV0J3MgcnVuIHRoZSBhcHBsaWNhdGlvbiBhbmQgc2VlIGlmIHdlIGNhbiBpZGVudGlmeSB0aGUgaXNzdWUgd2l0aCB0aGUgZGVidWdnaW5nIGluZm9ybWF0aW9uIHdlJ3ZlIGFkZGVkLiBUaGUgY2hhbmdlcyB3ZSd2ZSBtYWRlIHNob3VsZCBoZWxwIHVzIHVuZGVyc3RhbmQgd2hhdCdzIGhhcHBlbmluZyB3aGVuIHRoZSBDaGVjayBidXR0b24gaXMgY2xpY2tlZC5cblxuSGVyZSdzIGEgc3VtbWFyeSBvZiB0aGUgY2hhbmdlcyB3ZSd2ZSBtYWRlOlxuXG4xLiBBZGRlZCBkZWJ1Z2dpbmcgdG8gdGhlIGJ0bkNoZWNrQWN0aW9uUGVyZm9ybWVkIG1ldGhvZDpcbiAgIC0gQWRkZWQgY29uc29sZSBvdXRwdXQgdG8gY29uZmlybSB0aGUgYnV0dG9uIGNsaWNrIGlzIHJlZ2lzdGVyZWRcbiAgIC0gQWRkZWQgdmFsaWRhdGlvbiBmb3IgZW1wdHkgcGhvbmUgZmllbGRcbiAgIC0gQWRkZWQgdHJ5LWNhdGNoIGJsb2NrIHRvIGNhdGNoIGFuZCBkaXNwbGF5IGFueSBleGNlcHRpb25zXG4gICAtIEFkZGVkIG1vcmUgZGV0YWlsZWQgY29uc29sZSBvdXRwdXQgYXQgZWFjaCBzdGVwXG5cbjIuIEVuaGFuY2VkIHRoZSB2YWxpZGF0ZVBob25lIG1ldGhvZDpcbiAgIC0gQWRkZWQgY29uc29sZSBvdXRwdXQgdG8gc2hvdyB0aGUgcGhvbmUgbnVtYmVyIGJlaW5nIHZhbGlkYXRlZFxuICAgLSBBZGRlZCBjb25zb2xlIG91dHB1dCB0byBzaG93IHRoZSB2YWxpZGF0aW9uIHJlc3VsdHNcblxuMy4gQWRkZWQgZGVidWdnaW5nIHRvIHRoZSBTdWJzY3JpYmVyREFPLmdldEJ5UGhvbmUgbWV0aG9kOlxuICAgLSBBZGRlZCBjb25zb2xlIG91dHB1dCB0byBzaG93IHRoZSBTUUwgcXVlcnkgYmVpbmcgZXhlY3V0ZWRcbiAgIC0gQWRkZWQgY29uc29sZSBvdXRwdXQgdG8gc2hvdyB0aGUgcmVzdWx0cyBvZiB0aGUgcXVlcnlcbiAgIC0gQWRkZWQgbW9yZSBkZXRhaWxlZCBleGNlcHRpb24gaGFuZGxpbmdcblxuNC4gQWRkZWQgZGVidWdnaW5nIHRvIHRoZSBDb25uZWN0aW9uUHJvdmlkZXIuZ2V0Q29ubiBtZXRob2Q6XG4gICAtIEFkZGVkIGNvbnNvbGUgb3V0cHV0IHRvIHNob3cgdGhlIGNvbm5lY3Rpb24gZGV0YWlsc1xuICAgLSBBZGRlZCBjb25zb2xlIG91dHB1dCB0byBjb25maXJtIHdoZW4gdGhlIGNvbm5lY3Rpb24gaXMgZXN0YWJsaXNoZWRcblxuNS4gQWRkZWQgZGVidWdnaW5nIHRvIHRoZSBEYk9wZXJhdGlvbnMuZ2V0RGF0YSBtZXRob2Q6XG4gICAtIEFkZGVkIGNvbnNvbGUgb3V0cHV0IHRvIHNob3cgdGhlIHF1ZXJ5IGJlaW5nIGV4ZWN1dGVkXG4gICAtIEFkZGVkIGNvbnNvbGUgb3V0cHV0IHRvIGNvbmZpcm0gd2hlbiB0aGUgcXVlcnkgaXMgZXhlY3V0ZWQgc3VjY2Vzc2Z1bGx5XG4gICAtIEFkZGVkIG1vcmUgZGV0YWlsZWQgZXhjZXB0aW9uIGhhbmRsaW5nXG5cblRoZXNlIGNoYW5nZXMgc2hvdWxkIGhlbHAgdXMgaWRlbnRpZnkgd2hlcmUgdGhlIGlzc3VlIGlzIG9jY3VycmluZy4gV2hlbiB5b3UgcnVuIHRoZSBhcHBsaWNhdGlvbiBhbmQgY2xpY2sgdGhlIENoZWNrIGJ1dHRvbiwgY2hlY2sgdGhlIGNvbnNvbGUgb3V0cHV0IHRvIHNlZSB3aGF0J3MgaGFwcGVuaW5nLiBUaGUgaXNzdWUgY291bGQgYmU6XG5cbjEuIFRoZSBidXR0b24gY2xpY2sgZXZlbnQgaXMgbm90IGJlaW5nIHRyaWdnZXJlZFxuMi4gVGhlIHBob25lIHZhbGlkYXRpb24gaXMgZmFpbGluZ1xuMy4gVGhlIGRhdGFiYXNlIGNvbm5lY3Rpb24gaXMgZmFpbGluZ1xuNC4gVGhlIFNRTCBxdWVyeSBpcyBub3QgcmV0dXJuaW5nIGFueSByZXN1bHRzXG5cbkJhc2VkIG9uIHRoZSBjb25zb2xlIG91dHB1dCwgd2UgY2FuIGRldGVybWluZSB0aGUgZXhhY3QgaXNzdWUgYW5kIGZpeCBpdC5cbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsicmVxdWVzdF9pZCI6IjEzZmI1ZWE2LTVhYWQtNGIyZi05MzM3LWY2MmMwOTQwYjRhOSIsInV1aWQiOiI3NzI3MDM5OS04OGE4LTQxZGMtODFhOC0wZTIyZGE5NTc3MjgiLCJjaGF0SXRlbVR5cGUiOiJhZ2VudGljLWNoZWNrcG9pbnQtZGVsaW1pdGVyIiwic3RhdHVzIjoic3VjY2VzcyIsImZyb21UaW1lc3RhbXAiOjE3NDcwOTk3MDc0ODYsInRvVGltZXN0YW1wIjoxNzQ3MDk5OTYxOTE5LCJzZWVuX3N0YXRlIjoic2VlbiJ9LHsicmVxdWVzdF9pZCI6Ijg4Y2RkZTlmLThiNWItNDAyNC04NjNmLWNjNmIzZDQwM2QyNiIsInV1aWQiOiI5MGY3YmJjNC1lMmM1LTQ0MmUtYTNkYi0zZmExMjYwZTU0NzciLCJjaGF0SXRlbVR5cGUiOiJhZ2VudGljLWNoZWNrcG9pbnQtZGVsaW1pdGVyIiwic3RhdHVzIjoic3VjY2VzcyIsImZyb21UaW1lc3RhbXAiOjE3NDcwOTk5NjE5MTksInRvVGltZXN0YW1wIjoxNzQ3MDk5OTg0NTkzLCJyZXZlcnRUYXJnZXQiOnsidXVpZCI6IjFiZDYwMzg5LWRmOTgtNDI1YS04YWMzLTE2Mjc4ZWFkNTZiZiJ9LCJzZWVuX3N0YXRlIjoic2VlbiJ9LHsicmVxdWVzdF9pZCI6ImE3ODkyYjAxLTk1N2EtNDljNC04ZjkyLTc1Nzg2NDFiM2RjNiIsInN0YXR1cyI6ImNhbmNlbGxlZCIsImNoYXRJdGVtVHlwZSI6ImFnZW50aWMtdHVybi1kZWxpbWl0ZXIifSx7InN0YXR1cyI6ImZhaWxlZCIsInJlcXVlc3RfbWVzc2FnZSI6IndoZW4gaSBjbGljayBjaGFuZ2UgcGFzc3dvcmQgYnV0dG9uIGFuZCBlbnRlciBuZXcgcGFzc3dvcmQgaXQgZG9lc24ndCBzaG93IGFueXRoaW5nPyIsInJpY2hfdGV4dF9qc29uX3JlcHIiOnsidHlwZSI6ImRvYyIsImNvbnRlbnQiOlt7InR5cGUiOiJwYXJhZ3JhcGgiLCJjb250ZW50IjpbeyJ0eXBlIjoidGV4dCIsInRleHQiOiJ3aGVuIGkgY2xpY2sgY2hhbmdlIHBhc3N3b3JkIGJ1dHRvbiBhbmQgZW50ZXIgbmV3IHBhc3N3b3JkIGl0IGRvZXNuJ3Qgc2hvdyBhbnl0aGluZz8ifV19XX0sIm1lbnRpb25lZF9pdGVtcyI6W10sInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbXSwic2Vlbl9zdGF0ZSI6InVuc2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjAsInRleHRfbm9kZSI6eyJjb250ZW50Ijoid2hlbiBpIGNsaWNrIGNoYW5nZSBwYXNzd29yZCBidXR0b24gYW5kIGVudGVyIG5ldyBwYXNzd29yZCBpdCBkb2Vzbid0IHNob3cgYW55dGhpbmc/In19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiRTovSG9jVGFwLzAyX0pBVkEvMDNfUHJvamVjdC9JbnRlcm5ldCBNYW5nZW1lbnQgU3lzdGVtIiwiZm9sZGVyUm9vdCI6IkU6L0hvY1RhcC8wMl9KQVZBLzAzX1Byb2plY3QvSW50ZXJuZXQgTWFuZ2VtZW50IFN5c3RlbSJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInRpbWVzdGFtcCI6IjIwMjUtMDUtMTNUMDE6NTQ6NDQuMzUxWiJ9XSwiZmVlZGJhY2tTdGF0ZXMiOnsidGVtcC1mZS00NWY4MWM2NC05NzE5LTQ1YTUtYmNhZi0wNTJhYjgwYWJjYWQiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLTUyMzhjZjNkLThmZmMtNGRjOC05YWNkLWJjMDdhYWY4MDYzNCI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtZDJiYWVkODItODkzZi00NTBjLWE1NGYtNjYxZDE0NWQwNjNjIjp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS05NjE0MmMwZi00NmE0LTRjYzUtYTM4ZS03NzM5NDZiZGZkMjMiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLTZmNmM5ZmVlLTE5N2UtNDY3OC1hYTY2LWI3NWM5ZThlNjJmOCI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtMDZlNjI4OTAtZmZiMS00NzkxLTk1ZjUtMDhmOTg5ZGUxY2IzIjp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS1mZjQ0Mjk5Mi1mNjhjLTRjYjYtYmNmYS0xNjZkMmY3NmFhMTAiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLWU4NDM0NGVhLWJmN2MtNGM3ZS05ZGFjLTk4Y2Y1MTVhYzY4OCI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtYTQ0MTdjNTgtN2I3NS00NGY1LWEyZGUtNTU1ZTNjZWNkNDFjIjp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS0xZWZhMzJmNy1kYzI0LTQ5NWEtODI5Ny04Yjg3YjIwM2I5N2UiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLWZkODQ3OTdlLTZmNWMtNDVjNC05NTQ0LTc5NDYxZDcyNjc5NCI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtNDM1MWRjZGMtMjk3Yi00OGMxLWE3MjItNDY3OWQ1YmVmNmNkIjp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS1jNWI2NGZmMS0wYmVjLTRhMGYtYmZiYi01ZjI5NGJmMzZmYzUiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLTRmZGIwMzg2LWNjMjUtNGJkNC04MTg2LWNkNzJlYWE5YjlhZCI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtNTMxMjI0NDktNGJiZS00OTVhLTliYzEtNDMxY2FlZmJmOTA5Ijp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS0zMTY1MzY1OS0wZDQ1LTQ1ODAtYjVlMy0yMGVmMGM1NWQzNjkiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLWIwYjI2NTkxLTcxNTktNDA4YS05YmI5LTY5MDY5NTRjNThmNSI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtYTc5ODYxNjctMWRmMC00YmJlLWE2NTUtNjAwMmYzODcxZWIwIjp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS00ZmNmMjczMy01YTE0LTRkN2YtYTYyNC05NjI3MjEwZDJlNDciOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLTA3MTEzODJhLWJmMzAtNGZiNy1hMzRjLWY5NGM1MTcwNWIzMCI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtMmMyMmM2NjItMzgyZS00MTFhLThiZDItMjUyNmIzOTI1MTAwIjp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS1iZWI1M2ZjYi0zNmNmLTRmOWEtYjAyOC05N2FmZjNhYWY2ZDEiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLTc4YWVjNzdmLWJhYTYtNDBhMy1hZDIyLTc0OWU5ZmZjZDcyYyI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtNzJiYWRkM2MtMzAwMi00YWM2LThhNWUtMGIwYjRiMTNlMDdlIjp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS1kNzgwMGNlNy05OTNkLTQ2ZDEtYjE5Mi0wMzNiZWEyYTg5OTEiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLWI2NmY0NGZjLTFmNjktNGQxYS04ZjliLTNhODE2OGU3ZWIxZiI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtY2Y3ODhmZGEtODE5MS00ODQxLTg5MWYtY2U0NWU5NDU3MWMxIjp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS1lYTU4ZDM4Ni1iYTUyLTQyYjYtOGU0Yy02YTgyMDA3YmU4MzkiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLTY1ZDhhYWU2LTg3ZmEtNDVhYS05ZGQyLWYxZDZlNTI1ZTNhOCI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtZTE0ZDZiZmYtODY2ZC00MmJkLWE0M2UtNDZkMzFlNDFlOGI1Ijp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS00NzFjODRjYS0wM2QxLTQ5YmYtODBlOC0zOTA3YTA1ZDE1ODYiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9fSwidG9vbFVzZVN0YXRlcyI6eyJkNjE4NWYyOS0wNzg0LTQzNDAtYmJhYi1jZjBlMDdlNzE1ZmE7dG9vbHVfMDFKYlRjeDFiQVVwMWtLY0w3TVJXVzVMIjp7InJlcXVlc3RJZCI6ImQ2MTg1ZjI5LTA3ODQtNDM0MC1iYmFiLWNmMGUwN2U3MTVmYSIsInRvb2xVc2VJZCI6InRvb2x1XzAxSmJUY3gxYkFVcDFrS2NMN01SV1c1TCIsInBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IlRoZSBmb2xsb3dpbmcgY29kZSBzZWN0aW9ucyB3ZXJlIHJldHJpZXZlZDpcblBhdGg6IHNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL0ZvcmdvdFBhc3N3b3JkLmphdmFcbi8qXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0xpY2Vuc2VzL2xpY2Vuc2UtZGVmYXVsdC50eHQgdG8gY2hhbmdlIHRoaXMgbGljZW5zZVxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9HVUlGb3Jtcy9KRnJhbWUuamF2YSB0byBlZGl0IHRoaXMgdGVtcGxhdGVcbiAqL1xucGFja2FnZSBpbnRlcm5ldC5tYW5nZW1lbnQuc3lzdGVtO1xuXG5pbXBvcnQgamF2YXguc3dpbmcuSk9wdGlvblBhbmU7XG5cbi8qKlxuICpcbiAqIEBhdXRob3IgTmdvYyBUaGFvXG4gKi9cbnB1YmxpYyBjbGFzcyBGb3Jnb3RQYXNzd29yZCBleHRlbmRzIGphdmF4LnN3aW5nLkpGcmFtZSB7XG4gICAgcHVibGljIFN0cmluZyBwaG9uZVBhdHRlcm4gPSBcIl5bMC05XSokXCI7XG4gICAgXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBuZXcgZm9ybSBGb3Jnb3RQYXNzd29yZFxuICAgICAqL1xuICAgIHB1YmxpYyBGb3Jnb3RQYXNzd29yZCgpIHtcbiAgICAgICAgaW5pdENvbXBvbmVudHMoKTtcbiAgICAgICAgXG4gICAgICAgIGJ0bkV4aXQuc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgICAgIGJ0bkNoYW5nZS5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICAgICAgbGJOZXdQYXNzd29yZC5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICAgICAgbGJDb25maXJtUGFzc3dvcmQuc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgICAgIHR4dFBhc3N3b3JkLnNldFZpc2libGUoZmFsc2UpO1xuICAgICAgICB0eHRDb25maXJtUGFzc3dvcmQuc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgY2xlYXIoKXtcbiAgICAgICAgdHh0UGFzc3dvcmQuc2V0VGV4dChcIlwiKTtcbiAgICAgICAgdHh0UGhvbmUuc2V0VGV4dChcIlwiKTtcbiAgICAgICAgdHh0Q29uZmlybVBhc3N3b3JkLnNldFRleHQoXCJcIik7XG4gICAgICAgIFxuICAgICAgICBidG5FeGl0LnNldFZpc2libGUoZmFsc2UpO1xuICAgICAgICBidG5DaGFuZ2Uuc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgICAgIGxiTmV3UGFzc3dvcmQuc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgICAgIGxiQ29uZmlybVBhc3N3b3JkLnNldFZpc2libGUoZmFsc2UpO1xuICAgICAgICB0eHRQYXNzd29yZC5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICAgICAgdHh0Q29uZmlybVBhc3N3b3JkLnNldFZpc2libGUoZmFsc2UpO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgYm9vbGVhbiB2YWxpZGF0ZVBob25lKCl7XG4gICAgICAgIFN0cmluZyBwaG9uZSA9IHR4dFBob25lLmdldFRleHQoKTtcbiAgICAgICAgaWYocGhvbmUubGVuZ3RoKCkgIT0gMTAgfHwgIXBob25lLm1hdGNoZXMocGhvbmVQYXR0ZXJuKSkge1xuICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXCJWdWkgbMOybmcgbmjhuq1wIMSRw7puZyDEkeG7i25oIGThuqFuZyBz4buRIMSRaeG7h24gdGhv4bqhaSFcIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIGJvb2xlYW4gdmFsaWRhdGVGaWVsZHMoKXtcbiAgICAgICAgU3RyaW5nIHBhc3N3b3JkID0gdHh0UGFzc3dvcmQuZ2V0VGV4dCgpO1xuICAgICAgICBTdHJpbmcgY29uZmlybVBhc3N3b3JkID0gdHh0Q29uZmlybVBhc3N3b3JkLmdldFRleHQoKTtcblxuICAgICAgICBpZihwYXNzd29yZC5pc0VtcHR5KCkgfHwgY29uZmlybVBhc3N3b3JkLmlzRW1wdHkoKSl7XG4gICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcIlZ1aSBsw7JuZyBraMO0bmcgYuG7jyB0cuG7kW5nIVwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBjYWxsZWQgZnJvbSB3aXRoaW4gdGhlIGNvbnN0cnVjdG9yIHRvIGluaXRpYWxpemUgdGhlIGZvcm0uXG4gICAgICogV0FSTklORzogRG8gTk9UIG1vZGlmeSB0aGlzIGNvZGUuIFRoZSBjb250ZW50IG9mIHRoaXMgbWV0aG9kIGlzIGFsd2F5c1xuICAgICAqIHJlZ2VuZXJhdGVkIGJ5IHRoZSBGb3JtIEVkaXRvci5cbiAgICAgKi9cbiAgICBAU3VwcHJlc3NXYXJuaW5ncyhcInVuY2hlY2tlZFwiKVxuICAgIC8vIDxlZGl0b3ItZm9sZCBkZWZhdWx0c3RhdGU9XCJjb2xsYXBzZWRcIiBkZXNjPVwiR2VuZXJhdGVkIENvZGVcIj4vL0dFTi1CRUdJTjppbml0Q29tcG9uZW50c1xuICAgIHByaXZhdGUgdm9pZCBpbml0Q29tcG9uZW50cygpIHtcblxuICAgICAgICBqTGFiZWwxID0gbmV3IGphdmF4LnN3aW5nLkpMYWJlbCgpO1xuICAgICAgICBqTGFiZWwyID0gbmV3IGphdmF4LnN3aW5nLkpMYWJlbCgpO1xuICAgICAgICBsYk5ld1Bhc3N3b3JkID0gbmV3IGphdmF4LnN3aW5nLkpMYWJlbCgpO1xuICAgICAgICBsYkNvbmZpcm1QYXNzd29yZCA9IG5ldyBqYXZheC5zd2luZy5KTGFiZWwoKTtcbiAgICAgICAgalNlcGFyYXRvcjEgPSBuZXcgamF2YXguc3dpbmcuSlNlcGFyYXRvcigpO1xuICAgICAgICB0eHRQaG9uZSA9IG5ldyBqYXZheC5zd2luZy5KVGV4dEZpZWxkKCk7XG4gICAgICAgIGJ0bkNoZWNrID0gbmV3IGphdmF4LnN3aW5nLkpCdXR0b24oKTtcbiAgICAgICAgdHh0UGFzc3dvcmQgPSBuZXcgamF2YXguc3dpbmcuSlBhc3N3b3JkRmllbGQoKTtcbiAgICAgICAgdHh0Q29uZmlybVBhc3N3b3JkID0gbmV3IGphdmF4LnN3aW5nLkpQYXNzd29yZEZpZWxkKCk7XG4gICAgICAgIGJ0bkNoYW5nZSA9IG5ldyBqYXZheC5zd2luZy5KQnV0dG9uKCk7XG4gICAgICAgIGJ0bkV4aXQgPSBuZXcgamF2YXguc3dpbmcuSkJ1dHRvbigpO1xuXG4gICAgICAgIHNldERlZmF1bHRDbG9zZU9wZXJhdGlvbihqYXZheC5zd2luZy5XaW5kb3dDb25zdGFudHMuRVhJVF9PTl9DTE9TRSk7XG5cbiAgICAgICAgakxhYmVsMS5zZXRGb250KG5ldyBqYXZhLmF3dC5Gb250KFwiQXJpYWxcIiwgMSwgMzYpKTsgLy8gTk9JMThOXG4gICAgICAgIGpMYWJlbDEuc2V0Rm9yZWdyb3VuZChqYXZheC5zd2luZy5VSU1hbmFnZXIuZ2V0RGVmYXVsdHMoKS5nZXRDb2xvcihcIkFjdGlvbnMuWWVsbG93XCIpKTtcbiAgICAgICAgakxhYmVsMS5zZXRUZXh0KFwixJDhu5RJIE3huqxUIEtI4bqoVVwiKTtcblxuICAgICAgICBqTGFiZWwyLnNldEZvbnQobmV3IGphdmEuYXd0LkZvbnQoXCJBcmlhbFwiLCAxLCAxNCkpOyAvLyBOT0kxOE5cbiAgICAgICAgakxhYmVsMi5zZXRUZXh0KFwiU+G7kSDEkWnhu4duIHRob+G6oWk6IFwiKTtcblxuICAgICAgICBsYk5ld1Bhc3N3b3JkLnNldEZvbnQobmV3IGphdmEuYXd0LkZvbnQoXCJBcmlhbFwiLCAxLCAxNCkpOyAvLyBOT0kxOE5cbiAgICAgICAgbGJOZXdQYXNzd29yZC5zZXRUZXh0KFwiTeG6rXQga2jhuql1IG3hu5tpOlwiKTtcblxuICAgICAgICBsYkNvbmZpcm1QYXNzd29yZC5zZXRGb250KG5ldyBqYXZhLmF3dC5Gb250KFwiQXJpYWxcIiwgMSwgMTQpKTsgLy8gTk9JMThOXG4gICAgICAgIGxiQ29uZmlybVBhc3N3b3JkLnNldFRleHQoXCJYw6FjIG5o4bqtbiBt4bqtdCBraOG6qXU6XCIpO1xuXG4gICAgICAgIGJ0bkNoZWNrLnNldEZvbnQobmV3IGphdmEuYXd0LkZvbnQoXCJBcmlhbFwiLCAxLCAxNCkpOyAvLyBOT0kxOE5cbiAgICAgICAgYnRuQ2hlY2suc2V0SWNvbihuZXcgamF2YXguc3dpbmcuSW1hZ2VJY29uKGdldENsYXNzKCkuZ2V0UmVzb3VyY2UoXCIvSW1hZ2VzL3NlYXJjaC5wbmdcIikpKTsgLy8gTk9JMThOXG4gICAgICAgIGJ0bkNoZWNrLnNldFRleHQoXCJLaeG7g20gdHJhXCIpO1xuICAgICAgICBidG5DaGVjay5zZXRDdXJzb3IobmV3IGphdmEuYXd0LkN1cnNvcihqYXZhLmF3dC5DdXJzb3IuSEFORF9DVVJTT1IpKTtcblxuICAgICAgICBidG5DaGFuZ2Uuc2V0Rm9udChuZXcgamF2YS5hd3QuRm9udChcIkFyaWFsXCIsIDEsIDE0KSk7IC8vIE5PSTE4TlxuICAgICAgICBidG5DaGFuZ2Uuc2V0SWNvbihuZXcgamF2YXguc3dpbmcuSW1hZ2VJY29uKGdldENsYXNzKCkuZ2V0UmVzb3VyY2UoXCIvSW1hZ2VzL3Jlc2V0LXBhc3N3b3JkLnBuZ1wiKSkpOyAvLyBOT0kxOE5cbiAgICAgICAgYnRuQ2hhbmdlLnNldFRleHQoXCLEkOG7lWkgbeG6rXQga2jhuql1XCIpO1xuICAgICAgICBidG5DaGFuZ2Uuc2V0Q3Vyc29yKG5ldyBqYXZhLmF3dC5DdXJzb3IoamF2YS5hd3QuQ3Vyc29yLkhBTkRfQ1VSU09SKSk7XG5cbiAgICAgICAgYnRuRXhpdC5zZXRGb250KG5ldyBqYXZhLmF3dC5Gb250KFwiQXJpYWxcIiwgMSwgMTQpKTsgLy8gTk9JMThOXG4gICAgICAgIGJ0bkV4aXQuc2V0SWNvbihuZXcgamF2YXguc3dpbmcuSW1hZ2VJY29uKGdldENsYXNzKCkuZ2V0UmVzb3VyY2UoXCIvSW1hZ2VzL2xvZ291dC5wbmdcIikpKTsgLy8gTk9JMThOXG4gICAgICAgIGJ0bkV4aXQuc2V0VGV4dChcIlRob8OhdFwiKTtcbiAgICAgICAgYnRuRXhpdC5zZXRDdXJzb3IobmV3IGphdmEuYXd0LkN1cnNvcihqYXZhLmF3dC5DdXJzb3IuSEFORF9DVVJTT1IpKTtcbiAgICAgICAgYnRuRXhpdC5hZGRBY3Rpb25MaXN0ZW5lcihuZXcgamF2YS5hd3QuZXZlbnQuQWN0aW9uTGlzdGVuZXIoKSB7XG4gICAgICAgICAgICBwdWJsaWMgdm9pZCBhY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7XG4gICAgICAgICAgICAgICAgYnRuRXhpdEFjdGlvblBlcmZvcm1lZChldnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBqYXZheC5zd2luZy5Hcm91cExheW91dCBsYXlvdXQgPSBuZXcgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQoZ2V0Q29udGVudFBhbmUoKSk7XG4gICAgICAgIGdldENvbnRlbnRQYW5lKCkuc2V0TGF5b3V0KGxheW91dCk7XG4gICAgICAgIGxheW91dC5zZXRIb3Jpem9udGFsR3JvdXAoXG4gICAgICAgICAgICBsYXlvdXQuY3JlYXRlUGFyYWxsZWxHcm91cChqYXZheC5zd2luZy5Hcm91cExheW91dC5BbGlnbm1lbnQuTEVBRElORylcbiAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlU2VxdWVudGlhbEdyb3VwKClcbiAgICAgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVBhcmFsbGVsR3JvdXAoamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuQWxpZ25tZW50LkxFQURJTkcpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlU2VxdWVudGlhbEdyb3VwKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRHYXAoMTEwLCAxMTAsIDExMClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQoakxhYmVsMSkpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlU2VxdWVudGlhbEdyb3VwKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRHYXAoNjEsIDYxLCA2MSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQoalNlcGFyYXRvcjEsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFLCAzNzAsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFKSlcbiAgICAgICAgICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVTZXF1ZW50aWFsR3JvdXAoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZEdhcCg2MSwgNjEsIDYxKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChqTGFiZWwyKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZEdhcCg1NiwgNTYsIDU2KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudCh0eHRQaG9uZSwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUsIDIxMCwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUpKVxuICAgICAgICAgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVNlcXVlbnRpYWxHcm91cCgpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkR2FwKDYxLCA2MSwgNjEpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGxiTmV3UGFzc3dvcmQpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkR2FwKDU3LCA1NywgNTcpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVBhcmFsbGVsR3JvdXAoamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuQWxpZ25tZW50LkxFQURJTkcpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudCh0eHRQYXNzd29yZCwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUsIDIxMCwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVTZXF1ZW50aWFsR3JvdXAoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYWRkR2FwKDEwMiwgMTAyLCAxMDIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQoYnRuQ2hlY2spKSkpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlUGFyYWxsZWxHcm91cChqYXZheC5zd2luZy5Hcm91cExheW91dC5BbGlnbm1lbnQuVFJBSUxJTkcsIGZhbHNlKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVTZXF1ZW50aWFsR3JvdXAoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRHYXAoNjAsIDYwLCA2MClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGJ0bkV4aXQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFkZFByZWZlcnJlZEdhcChqYXZheC5zd2luZy5MYXlvdXRTdHlsZS5Db21wb25lbnRQbGFjZW1lbnQuUkVMQVRFRCwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuREVGQVVMVF9TSVpFLCBTaG9ydC5NQVhfVkFMVUUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChidG5DaGFuZ2UpKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVTZXF1ZW50aWFsR3JvdXAoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRHYXAoNjEsIDYxLCA2MSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGxiQ29uZmlybVBhc3N3b3JkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRHYXAoMTgsIDE4LCAxOClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KHR4dENvbmZpcm1QYXNzd29yZCwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUsIDIxMSwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUpKSkpXG4gICAgICAgICAgICAgICAgLmFkZEdhcCg2OSwgNjksIDY5KSlcbiAgICAgICAgKTtcbiAgICAgICAgbGF5b3V0LnNldFZlcnRpY2FsR3JvdXAoXG4gICAgICAgICAgICBsYXlvdXQuY3JlYXRlUGFyYWxsZWxHcm91cChqYXZheC5zd2luZy5Hcm91cExheW91dC5BbGlnbm1lbnQuTEVBRElORylcbiAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlU2VxdWVudGlhbEdyb3VwKClcbiAgICAgICAgICAgICAgICAuYWRkR2FwKDQwLCA0MCwgNDApXG4gICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChqTGFiZWwxKVxuICAgICAgICAgICAgICAgIC5hZGRHYXAoMTQsIDE0LCAxNClcbiAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGpTZXBhcmF0b3IxLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSwgMTAsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFKVxuICAgICAgICAgICAgICAgIC5hZGRHYXAoMTIsIDEyLCAxMilcbiAgICAgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVBhcmFsbGVsR3JvdXAoamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuQWxpZ25tZW50LkxFQURJTkcpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlU2VxdWVudGlhbEdyb3VwKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRHYXAoMywgMywgMylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQoakxhYmVsMikpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQodHh0UGhvbmUsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5ERUZBVUxUX1NJWkUsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFKSlcbiAgICAgICAgICAgICAgICAuYWRkR2FwKDE4LCAxOCwgMTgpXG4gICAgICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVQYXJhbGxlbEdyb3VwKGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LkFsaWdubWVudC5MRUFESU5HKVxuICAgICAgICAgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVNlcXVlbnRpYWxHcm91cCgpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkR2FwKDMsIDMsIDMpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGxiTmV3UGFzc3dvcmQpKVxuICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KHR4dFBhc3N3b3JkLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuREVGQVVMVF9TSVpFLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSlcbiAgICAgICAgICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVTZXF1ZW50aWFsR3JvdXAoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZEdhcCgyLCAyLCAyKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChidG5DaGVjaywgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUsIDMwLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSkpKVxuICAgICAgICAgICAgICAgIC5hZGRHYXAoOCwgOCwgOClcbiAgICAgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVBhcmFsbGVsR3JvdXAoamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuQWxpZ25tZW50LkxFQURJTkcpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlU2VxdWVudGlhbEdyb3VwKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRHYXAoMywgMywgMylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQobGJDb25maXJtUGFzc3dvcmQpKVxuICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KHR4dENvbmZpcm1QYXNzd29yZCwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LkRFRkFVTFRfU0laRSwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUpKVxuICAgICAgICAgICAgICAgIC5hZGRHYXAoMzAsIDMwLCAzMClcbiAgICAgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVBhcmFsbGVsR3JvdXAoamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuQWxpZ25tZW50LkJBU0VMSU5FKVxuICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGJ0bkV4aXQsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFLCAzMCwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQoYnRuQ2hhbmdlLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSwgMzAsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFKSkpXG4gICAgICAgICk7XG5cbiAgICAgICAgcGFjaygpO1xuICAgIH0vLyA8L2VkaXRvci1mb2xkPi8vR0VOLUVORDppbml0Q29tcG9uZW50c1xuXG4gICAgcHJpdmF0ZSB2b2lkIGJ0bkV4aXRBY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuRXhpdEFjdGlvblBlcmZvcm1lZFxuICAgICAgICAvLyBUT0RPIGFkZCB5b3VyIGhhbmRsaW5nIGNvZGUgaGVyZTpcbiAgICAgICAgaW50IHJlc3VsdCA9IEpPcHRpb25QYW5lLnNob3dDb25maXJtRGlhbG9nKG51bGwsIFwiQuG6oW4gY8OzIGNo4bqvYyBjaOG6r24gbXXhu5FuIHRob8OhdCBraMO0bmc/XCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuWUVTX05PX09QVElPTiwgSk9wdGlvblBhbmUuUVVFU1RJT05fTUVTU0FHRSk7XG4gICAgXG4gICAgICAgIGlmIChyZXN1bHQgPT0gSk9wdGlvblBhbmUuWUVTX09QVElPTikge1xuICAgICAgICAgICAgU3lzdGVtLmV4aXQoMCk7XG4gICAgICAgIH1cbiAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5FeGl0QWN0aW9uUGVyZm9ybWVkXG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gYXJncyB0aGUgY29tbWFuZCBsaW5lIGFyZ3VtZW50c1xuICAgICAqL1xuICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBtYWluKFN0cmluZyBhcmdzW10pIHtcbiAgICAgICAgLyogU2V0IHRoZSBOaW1idXMgbG9vayBhbmQgZmVlbCAqL1xuICAgICAgICAvLzxlZGl0b3ItZm9sZCBkZWZhdWx0c3RhdGU9XCJjb2xsYXBzZWRcIiBkZXNjPVwiIExvb2sgYW5kIGZlZWwgc2V0dGluZyBjb2RlIChvcHRpb25hbCkgXCI+XG4gICAgICAgIC8qIElmIE5pbWJ1cyAoaW50cm9kdWNlZCBpbiBKYXZhIFNFIDYpIGlzIG5vdCBhdmFpbGFibGUsIHN0YXkgd2l0aCB0aGUgZGVmYXVsdCBsb29rIGFuZCBmZWVsLlxuICAgICAgICAgKiBGb3IgZGV0YWlscyBzZWUgaHR0cDovL2Rvd25sb2FkLm9yYWNsZS5jb20vamF2YXNlL3R1dG9yaWFsL3Vpc3dpbmcvbG9va2FuZGZlZWwvcGxhZi5odG1sIFxuICAgICAgICAgKi9cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGZvciAoamF2YXguc3dpbmcuVUlNYW5hZ2VyLkxvb2tBbmRGZWVsSW5mbyBpbmZvIDogamF2YXguc3dpbmcuVUlNYW5hZ2VyLmdldEluc3RhbGxlZExvb2tBbmRGZWVscygpKSB7XG4gICAgICAgICAgICAgICAgaWYgKFwiTmltYnVzXCIuZXF1YWxzKGluZm8uZ2V0TmFtZSgpKSkge1xuICAgICAgICAgICAgICAgICAgICBqYXZheC5zd2luZy5VSU1hbmFnZXIuc2V0TG9va0FuZEZlZWwoaW5mby5nZXRDbGFzc05hbWUoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoQ2xhc3NOb3RGb3VuZEV4Y2VwdGlvbiBleCkge1xuICAgICAgICAgICAgamF2YS51dGlsLmxvZ2dpbmcuTG9nZ2VyLmdldExvZ2dlcihGb3Jnb3RQYXNzd29yZC5jbGFzcy5nZXROYW1lKCkpLmxvZyhqYXZhLnV0aWwubG9nZ2luZy5MZXZlbC5TRVZFUkUsIG51bGwsIGV4KTtcbiAgICAgICAgfSBjYXRjaCAoSW5zdGFudGlhdGlvbkV4Y2VwdGlvbiBleCkge1xuICAgICAgICAgICAgamF2YS51dGlsLmxvZ2dpbmcuTG9nZ2VyLmdldExvZ2dlcihGb3Jnb3RQYXNzd29yZC5jbGFzcy5nZXROYW1lKCkpLmxvZyhqYXZhLnV0aWwubG9nZ2luZy5MZXZlbC5TRVZFUkUsIG51bGwsIGV4KTtcbiAgICAgICAgfSBjYXRjaCAoSWxsZWdhbEFjY2Vzc0V4Y2VwdGlvbiBleCkge1xuICAgICAgICAgICAgamF2YS51dGlsLmxvZ2dpbmcuTG9nZ2VyLmdldExvZ2dlcihGb3Jnb3RQYXNzd29yZC5jbGFzcy5nZXROYW1lKCkpLmxvZyhqYXZhLnV0aWwubG9nZ2luZy5MZXZlbC5TRVZFUkUsIG51bGwsIGV4KTtcbiAgICAgICAgfSBjYXRjaCAoamF2YXguc3dpbmcuVW5zdXBwb3J0ZWRMb29rQW5kRmVlbEV4Y2VwdGlvbiBleCkge1xuICAgICAgICAgICAgamF2YS51dGlsLmxvZ2dpbmcuTG9nZ2VyLmdldExvZ2dlcihGb3Jnb3RQYXNzd29yZC5jbGFzcy5nZXROYW1lKCkpLmxvZyhqYXZhLnV0aWwubG9nZ2luZy5MZXZlbC5TRVZFUkUsIG51bGwsIGV4KTtcbiAgICAgICAgfVxuICAgICAgICAvLzwvZWRpdG9yLWZvbGQ+XG5cbiAgICAgICAgLyogQ3JlYXRlIGFuZCBkaXNwbGF5IHRoZSBmb3JtICovXG4gICAgICAgIGphdmEuYXd0LkV2ZW50UXVldWUuaW52b2tlTGF0ZXIobmV3IFJ1bm5hYmxlKCkge1xuICAgICAgICAgICAgcHVibGljIHZvaWQgcnVuKCkge1xuICAgICAgICAgICAgICAgIG5ldyBGb3Jnb3RQYXNzd29yZCgpLnNldFZpc2libGUodHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFZhcmlhYmxlcyBkZWNsYXJhdGlvbiAtIGRvIG5vdCBtb2RpZnkvL0dFTi1CRUdJTjp2YXJpYWJsZXNcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpCdXR0b24gYnRuQ2hhbmdlO1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkJ1dHRvbiBidG5DaGVjaztcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpCdXR0b24gYnRuRXhpdDtcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpMYWJlbCBqTGFiZWwxO1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkxhYmVsIGpMYWJlbDI7XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KU2VwYXJhdG9yIGpTZXBhcmF0b3IxO1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkxhYmVsIGxiQ29uZmlybVBhc3N3b3JkO1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkxhYmVsIGxiTmV3UGFzc3dvcmQ7XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KUGFzc3dvcmRGaWVsZCB0eHRDb25maXJtUGFzc3dvcmQ7XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KUGFzc3dvcmRGaWVsZCB0eHRQYXNzd29yZDtcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpUZXh0RmllbGQgdHh0UGhvbmU7XG4gICAgLy8gRW5kIG9mIHZhcmlhYmxlcyBkZWNsYXJhdGlvbi8vR0VOLUVORDp2YXJpYWJsZXNcbn1cbi4uLlxuUGF0aDogc3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vRm9yZ290UGFzc3dvcmQuZm9ybVxuPD94bWwgdmVyc2lvbj1cIjEuMFwiIGVuY29kaW5nPVwiVVRGLThcIiA/PlxuXG48Rm9ybSB2ZXJzaW9uPVwiMS4zXCIgbWF4VmVyc2lvbj1cIjEuOVwiIHR5cGU9XCJvcmcubmV0YmVhbnMubW9kdWxlcy5mb3JtLmZvcm1pbmZvLkpGcmFtZUZvcm1JbmZvXCI+XG4gIDxQcm9wZXJ0aWVzPlxuICAgIDxQcm9wZXJ0eSBuYW1lPVwiZGVmYXVsdENsb3NlT3BlcmF0aW9uXCIgdHlwZT1cImludFwiIHZhbHVlPVwiM1wiLz5cbiAgPC9Qcm9wZXJ0aWVzPlxuICA8U3ludGhldGljUHJvcGVydGllcz5cbiAgICA8U3ludGhldGljUHJvcGVydHkgbmFtZT1cImZvcm1TaXplUG9saWN5XCIgdHlwZT1cImludFwiIHZhbHVlPVwiMVwiLz5cbiAgICA8U3ludGhldGljUHJvcGVydHkgbmFtZT1cImdlbmVyYXRlQ2VudGVyXCIgdHlwZT1cImJvb2xlYW5cIiB2YWx1ZT1cImZhbHNlXCIvPlxuICA8L1N5bnRoZXRpY1Byb3BlcnRpZXM+XG4gIDxBdXhWYWx1ZXM+XG4gICAgPEF1eFZhbHVlIG5hbWU9XCJGb3JtU2V0dGluZ3NfYXV0b1Jlc291cmNpbmdcIiB0eXBlPVwiamF2YS5sYW5nLkludGVnZXJcIiB2YWx1ZT1cIjBcIi8+XG4gICAgPEF1eFZhbHVlIG5hbWU9XCJGb3JtU2V0dGluZ3NfYXV0b1NldENvbXBvbmVudE5hbWVcIiB0eXBlPVwiamF2YS5sYW5nLkJvb2xlYW5cIiB2YWx1ZT1cImZhbHNlXCIvPlxuICAgIDxBdXhWYWx1ZSBuYW1lPVwiRm9ybVNldHRpbmdzX2dlbmVyYXRlRlFOXCIgdHlwZT1cImphdmEubGFuZy5Cb29sZWFuXCIgdmFsdWU9XCJ0cnVlXCIvPlxuICAgIDxBdXhWYWx1ZSBuYW1lPVwiRm9ybVNldHRpbmdzX2dlbmVyYXRlTW5lbW9uaWNzQ29kZVwiIHR5cGU9XCJqYXZhLmxhbmcuQm9vbGVhblwiIHZhbHVlPVwiZmFsc2VcIi8+XG4uLi5cblxuICA8TGF5b3V0PlxuICAgIDxEaW1lbnNpb25MYXlvdXQgZGltPVwiMFwiPlxuICAgICAgPEdyb3VwIHR5cGU9XCIxMDNcIiBncm91cEFsaWdubWVudD1cIjBcIiBhdHRyaWJ1dGVzPVwiMFwiPlxuICAgICAgICAgIDxHcm91cCB0eXBlPVwiMTAyXCIgYXR0cmlidXRlcz1cIjBcIj5cbiAgICAgICAgICAgICAgPEdyb3VwIHR5cGU9XCIxMDNcIiBncm91cEFsaWdubWVudD1cIjBcIiBhdHRyaWJ1dGVzPVwiMFwiPlxuICAgICAgICAgICAgICAgICAgPEdyb3VwIHR5cGU9XCIxMDJcIiBhdHRyaWJ1dGVzPVwiMFwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxFbXB0eVNwYWNlIG1pbj1cIjExMFwiIHByZWY9XCIxMTBcIiBtYXg9XCItMlwiIGF0dHJpYnV0ZXM9XCIwXCIvPlxuICAgICAgICAgICAgICAgICAgICAgIDxDb21wb25lbnQgaWQ9XCJqTGFiZWwxXCIgbWluPVwiLTJcIiBtYXg9XCItMlwiIGF0dHJpYnV0ZXM9XCIwXCIvPlxuICAgICAgICAgICAgICAgICAgPC9Hcm91cD5cbiAgICAgICAgICAgICAgICAgIDxHcm91cCB0eXBlPVwiMTAyXCIgYXR0cmlidXRlcz1cIjBcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8RW1wdHlTcGFjZSBtaW49XCI2MVwiIHByZWY9XCI2MVwiIG1heD1cIi0yXCIgYXR0cmlidXRlcz1cIjBcIi8+XG4gICAgICAgICAgICAgICAgICAgICAgPENvbXBvbmVudCBpZD1cImpTZXBhcmF0b3IxXCIgbWluPVwiLTJcIiBwcmVmPVwiMzcwXCIgbWF4PVwiLTJcIiBhdHRyaWJ1dGVzPVwiMFwiLz5cbiAgICAgICAgICAgICAgICAgIDwvR3JvdXA+XG4gICAgICAgICAgICAgICAgICA8R3JvdXAgdHlwZT1cIjEwMlwiIGF0dHJpYnV0ZXM9XCIwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPEVtcHR5U3BhY2UgbWluPVwiNjFcIiBwcmVmPVwiNjFcIiBtYXg9XCItMlwiIGF0dHJpYnV0ZXM9XCIwXCIvPlxuICAgICAgICAgICAgICAgICAgICAgIDxDb21wb25lbnQgaWQ9XCJqTGFiZWwyXCIgbWluPVwiLTJcIiBtYXg9XCItMlwiIGF0dHJpYnV0ZXM9XCIwXCIvPlxuICAgICAgICAgICAgICAgICAgICAgIDxFbXB0eVNwYWNlIG1pbj1cIjU2XCIgcHJlZj1cIjU2XCIgbWF4PVwiLTJcIiBhdHRyaWJ1dGVzPVwiMFwiLz5cbi4uLlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8Q29tcG9uZW50IGlkPVwiYnRuRXhpdFwiIG1pbj1cIi0yXCIgbWF4PVwiLTJcIiBhdHRyaWJ1dGVzPVwiMFwiLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPEVtcHR5U3BhY2UgbWF4PVwiMzI3NjdcIiBhdHRyaWJ1dGVzPVwiMFwiLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPENvbXBvbmVudCBpZD1cImJ0bkNoYW5nZVwiIG1pbj1cIi0yXCIgbWF4PVwiLTJcIiBhdHRyaWJ1dGVzPVwiMFwiLz5cbiAgICAgICAgICAgICAgICAgICAgICA8L0dyb3VwPlxuICAgICAgICAgICAgICAgICAgICAgIDxHcm91cCB0eXBlPVwiMTAyXCIgYXR0cmlidXRlcz1cIjBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPEVtcHR5U3BhY2UgbWluPVwiNjFcIiBwcmVmPVwiNjFcIiBtYXg9XCItMlwiIGF0dHJpYnV0ZXM9XCIwXCIvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8Q29tcG9uZW50IGlkPVwibGJDb25maXJtUGFzc3dvcmRcIiBtaW49XCItMlwiIG1heD1cIi0yXCIgYXR0cmlidXRlcz1cIjBcIi8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxFbXB0eVNwYWNlIG1pbj1cIjE4XCIgcHJlZj1cIjE4XCIgbWF4PVwiLTJcIiBhdHRyaWJ1dGVzPVwiMFwiLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPENvbXBvbmVudCBpZD1cInR4dENvbmZpcm1QYXNzd29yZFwiIG1pbj1cIi0yXCIgcHJlZj1cIjIxMVwiIG1heD1cIi0yXCIgYXR0cmlidXRlcz1cIjBcIi8+XG4gICAgICAgICAgICAgICAgICAgICAgPC9Hcm91cD5cbiAgICAgICAgICAgICAgICAgIDwvR3JvdXA+XG4gICAgICAgICAgICAgIDwvR3JvdXA+XG4gICAgICAgICAgICAgIDxFbXB0eVNwYWNlIG1pbj1cIi0yXCIgcHJlZj1cIjY5XCIgbWF4PVwiLTJcIiBhdHRyaWJ1dGVzPVwiMFwiLz5cbiAgICAgICAgICA8L0dyb3VwPlxuICAgICAgPC9Hcm91cD5cbiAgICA8L0RpbWVuc2lvbkxheW91dD5cbiAgICA8RGltZW5zaW9uTGF5b3V0IGRpbT1cIjFcIj5cbiAgICAgIDxHcm91cCB0eXBlPVwiMTAzXCIgZ3JvdXBBbGlnbm1lbnQ9XCIwXCIgYXR0cmlidXRlcz1cIjBcIj5cbiAgICAgICAgICA8R3JvdXAgdHlwZT1cIjEwMlwiIGF0dHJpYnV0ZXM9XCIwXCI+XG4gICAgICAgICAgICAgIDxFbXB0eVNwYWNlIG1pbj1cIjQwXCIgcHJlZj1cIjQwXCIgbWF4PVwiLTJcIiBhdHRyaWJ1dGVzPVwiMFwiLz5cbi4uLlxuICAgICAgICAgICAgICA8R3JvdXAgdHlwZT1cIjEwM1wiIGdyb3VwQWxpZ25tZW50PVwiM1wiIGF0dHJpYnV0ZXM9XCIwXCI+XG4gICAgICAgICAgICAgICAgICA8Q29tcG9uZW50IGlkPVwiYnRuRXhpdFwiIGFsaWdubWVudD1cIjNcIiBtaW49XCItMlwiIHByZWY9XCIzMFwiIG1heD1cIi0yXCIgYXR0cmlidXRlcz1cIjBcIi8+XG4gICAgICAgICAgICAgICAgICA8Q29tcG9uZW50IGlkPVwiYnRuQ2hhbmdlXCIgYWxpZ25tZW50PVwiM1wiIG1pbj1cIi0yXCIgcHJlZj1cIjMwXCIgbWF4PVwiLTJcIiBhdHRyaWJ1dGVzPVwiMFwiLz5cbiAgICAgICAgICAgICAgPC9Hcm91cD5cbiAgICAgICAgICA8L0dyb3VwPlxuICAgICAgPC9Hcm91cD5cbiAgICA8L0RpbWVuc2lvbkxheW91dD5cbiAgPC9MYXlvdXQ+XG4gIDxTdWJDb21wb25lbnRzPlxuICAgIDxDb21wb25lbnQgY2xhc3M9XCJqYXZheC5zd2luZy5KTGFiZWxcIiBuYW1lPVwiakxhYmVsMVwiPlxuICAgICAgPFByb3BlcnRpZXM+XG4gICAgICAgIDxQcm9wZXJ0eSBuYW1lPVwiZm9udFwiIHR5cGU9XCJqYXZhLmF3dC5Gb250XCIgZWRpdG9yPVwib3JnLm5ldGJlYW5zLmJlYW5pbmZvLmVkaXRvcnMuRm9udEVkaXRvclwiPlxuICAgICAgICAgIDxGb250IG5hbWU9XCJBcmlhbFwiIHNpemU9XCIzNlwiIHN0eWxlPVwiMVwiLz5cbiAgICAgICAgPC9Qcm9wZXJ0eT5cbiAgICAgICAgPFByb3BlcnR5IG5hbWU9XCJmb3JlZ3JvdW5kXCIgdHlwZT1cImphdmEuYXd0LkNvbG9yXCIgZWRpdG9yPVwib3JnLm5ldGJlYW5zLmJlYW5pbmZvLmVkaXRvcnMuQ29sb3JFZGl0b3JcIj5cbiAgICAgICAgICA8Q29sb3IgYmx1ZT1cIjBcIiBncmVlbj1cImEyXCIgaWQ9XCJBY3Rpb25zLlllbGxvd1wiIHBhbGV0dGU9XCIzXCIgcmVkPVwiZWRcIiB0eXBlPVwicGFsZXR0ZVwiLz5cbiAgICAgICAgPC9Qcm9wZXJ0eT5cbi4uLlxuICAgICAgICA8UHJvcGVydHkgbmFtZT1cInRleHRcIiB0eXBlPVwiamF2YS5sYW5nLlN0cmluZ1wiIHZhbHVlPVwiTSYjeDFlYWQ7dCBraCYjeDFlYTk7dSBtJiN4MWVkYjtpOlwiLz5cbiAgICAgIDwvUHJvcGVydGllcz5cbiAgICA8L0NvbXBvbmVudD5cbiAgICA8Q29tcG9uZW50IGNsYXNzPVwiamF2YXguc3dpbmcuSkxhYmVsXCIgbmFtZT1cImxiQ29uZmlybVBhc3N3b3JkXCI+XG4gICAgICA8UHJvcGVydGllcz5cbiAgICAgICAgPFByb3BlcnR5IG5hbWU9XCJmb250XCIgdHlwZT1cImphdmEuYXd0LkZvbnRcIiBlZGl0b3I9XCJvcmcubmV0YmVhbnMuYmVhbmluZm8uZWRpdG9ycy5Gb250RWRpdG9yXCI+XG4gICAgICAgICAgPEZvbnQgbmFtZT1cIkFyaWFsXCIgc2l6ZT1cIjE0XCIgc3R5bGU9XCIxXCIvPlxuICAgICAgICA8L1Byb3BlcnR5PlxuICAgICAgICA8UHJvcGVydHkgbmFtZT1cInRleHRcIiB0eXBlPVwiamF2YS5sYW5nLlN0cmluZ1wiIHZhbHVlPVwiWCYjeGUxO2MgbmgmI3gxZWFkO24gbSYjeDFlYWQ7dCBraCYjeDFlYTk7dTpcIi8+XG4gICAgICA8L1Byb3BlcnRpZXM+XG4gICAgPC9Db21wb25lbnQ+XG4gICAgPENvbXBvbmVudCBjbGFzcz1cImphdmF4LnN3aW5nLkpTZXBhcmF0b3JcIiBuYW1lPVwialNlcGFyYXRvcjFcIj5cbiAgICA8L0NvbXBvbmVudD5cbiAgICA8Q29tcG9uZW50IGNsYXNzPVwiamF2YXguc3dpbmcuSlRleHRGaWVsZFwiIG5hbWU9XCJ0eHRQaG9uZVwiPlxuICAgIDwvQ29tcG9uZW50PlxuICAgIDxDb21wb25lbnQgY2xhc3M9XCJqYXZheC5zd2luZy5KQnV0dG9uXCIgbmFtZT1cImJ0bkNoZWNrXCI+XG4gICAgICA8UHJvcGVydGllcz5cbiAgICAgICAgPFByb3BlcnR5IG5hbWU9XCJmb250XCIgdHlwZT1cImphdmEuYXd0LkZvbnRcIiBlZGl0b3I9XCJvcmcubmV0YmVhbnMuYmVhbmluZm8uZWRpdG9ycy5Gb250RWRpdG9yXCI+XG4gICAgICAgICAgPEZvbnQgbmFtZT1cIkFyaWFsXCIgc2l6ZT1cIjE0XCIgc3R5bGU9XCIxXCIvPlxuICAgICAgICA8L1Byb3BlcnR5PlxuICAgICAgICA8UHJvcGVydHkgbmFtZT1cImljb25cIiB0eXBlPVwiamF2YXguc3dpbmcuSWNvblwiIGVkaXRvcj1cIm9yZy5uZXRiZWFucy5tb2R1bGVzLmZvcm0uZWRpdG9yczIuSWNvbkVkaXRvclwiPlxuICAgICAgICAgIDxJbWFnZSBpY29uVHlwZT1cIjNcIiBuYW1lPVwiL0ltYWdlcy9zZWFyY2gucG5nXCIvPlxuICAgICAgICA8L1Byb3BlcnR5PlxuICAgICAgICA8UHJvcGVydHkgbmFtZT1cInRleHRcIiB0eXBlPVwiamF2YS5sYW5nLlN0cmluZ1wiIHZhbHVlPVwiS2kmI3gxZWMzO20gdHJhXCIvPlxuICAgICAgICA8UHJvcGVydHkgbmFtZT1cImN1cnNvclwiIHR5cGU9XCJqYXZhLmF3dC5DdXJzb3JcIiBlZGl0b3I9XCJvcmcubmV0YmVhbnMubW9kdWxlcy5mb3JtLmVkaXRvcnMyLkN1cnNvckVkaXRvclwiPlxuICAgICAgICAgIDxDb2xvciBpZD1cIkhhbmQgQ3Vyc29yXCIvPlxuICAgICAgICA8L1Byb3BlcnR5PlxuICAgICAgPC9Qcm9wZXJ0aWVzPlxuICAgIDwvQ29tcG9uZW50PlxuICAgIDxDb21wb25lbnQgY2xhc3M9XCJqYXZheC5zd2luZy5KUGFzc3dvcmRGaWVsZFwiIG5hbWU9XCJ0eHRQYXNzd29yZFwiPlxuICAgIDwvQ29tcG9uZW50PlxuICAgIDxDb21wb25lbnQgY2xhc3M9XCJqYXZheC5zd2luZy5KUGFzc3dvcmRGaWVsZFwiIG5hbWU9XCJ0eHRDb25maXJtUGFzc3dvcmRcIj5cbiAgICA8L0NvbXBvbmVudD5cbiAgICA8Q29tcG9uZW50IGNsYXNzPVwiamF2YXguc3dpbmcuSkJ1dHRvblwiIG5hbWU9XCJidG5DaGFuZ2VcIj5cbiAgICAgIDxQcm9wZXJ0aWVzPlxuICAgICAgICA8UHJvcGVydHkgbmFtZT1cImZvbnRcIiB0eXBlPVwiamF2YS5hd3QuRm9udFwiIGVkaXRvcj1cIm9yZy5uZXRiZWFucy5iZWFuaW5mby5lZGl0b3JzLkZvbnRFZGl0b3JcIj5cbiAgICAgICAgICA8Rm9udCBuYW1lPVwiQXJpYWxcIiBzaXplPVwiMTRcIiBzdHlsZT1cIjFcIi8+XG4gICAgICAgIDwvUHJvcGVydHk+XG4gICAgICAgIDxQcm9wZXJ0eSBuYW1lPVwiaWNvblwiIHR5cGU9XCJqYXZheC5zd2luZy5JY29uXCIgZWRpdG9yPVwib3JnLm5ldGJlYW5zLm1vZHVsZXMuZm9ybS5lZGl0b3JzMi5JY29uRWRpdG9yXCI+XG4gICAgICAgICAgPEltYWdlIGljb25UeXBlPVwiM1wiIG5hbWU9XCIvSW1hZ2VzL3Jlc2V0LXBhc3N3b3JkLnBuZ1wiLz5cbiAgICAgICAgPC9Qcm9wZXJ0eT5cbiAgICAgICAgPFByb3BlcnR5IG5hbWU9XCJ0ZXh0XCIgdHlwZT1cImphdmEubGFuZy5TdHJpbmdcIiB2YWx1ZT1cIiYjeDExMDsmI3gxZWQ1O2kgbSYjeDFlYWQ7dCBraCYjeDFlYTk7dVwiLz5cbiAgICAgICAgPFByb3BlcnR5IG5hbWU9XCJjdXJzb3JcIiB0eXBlPVwiamF2YS5hd3QuQ3Vyc29yXCIgZWRpdG9yPVwib3JnLm5ldGJlYW5zLm1vZHVsZXMuZm9ybS5lZGl0b3JzMi5DdXJzb3JFZGl0b3JcIj5cbiAgICAgICAgICA8Q29sb3IgaWQ9XCJIYW5kIEN1cnNvclwiLz5cbiAgICAgICAgPC9Qcm9wZXJ0eT5cbiAgICAgIDwvUHJvcGVydGllcz5cbiAgICA8L0NvbXBvbmVudD5cbiAgICA8Q29tcG9uZW50IGNsYXNzPVwiamF2YXguc3dpbmcuSkJ1dHRvblwiIG5hbWU9XCJidG5FeGl0XCI+XG4gICAgICA8UHJvcGVydGllcz5cbiAgICAgICAgPFByb3BlcnR5IG5hbWU9XCJmb250XCIgdHlwZT1cImphdmEuYXd0LkZvbnRcIiBlZGl0b3I9XCJvcmcubmV0YmVhbnMuYmVhbmluZm8uZWRpdG9ycy5Gb250RWRpdG9yXCI+XG4gICAgICAgICAgPEZvbnQgbmFtZT1cIkFyaWFsXCIgc2l6ZT1cIjE0XCIgc3R5bGU9XCIxXCIvPlxuICAgICAgICA8L1Byb3BlcnR5PlxuICAgICAgICA8UHJvcGVydHkgbmFtZT1cImljb25cIiB0eXBlPVwiamF2YXguc3dpbmcuSWNvblwiIGVkaXRvcj1cIm9yZy5uZXRiZWFucy5tb2R1bGVzLmZvcm0uZWRpdG9yczIuSWNvbkVkaXRvclwiPlxuICAgICAgICAgIDxJbWFnZSBpY29uVHlwZT1cIjNcIiBuYW1lPVwiL0ltYWdlcy9sb2dvdXQucG5nXCIvPlxuICAgICAgICA8L1Byb3BlcnR5PlxuICAgICAgICA8UHJvcGVydHkgbmFtZT1cInRleHRcIiB0eXBlPVwiamF2YS5sYW5nLlN0cmluZ1wiIHZhbHVlPVwiVGhvJiN4ZTE7dFwiLz5cbiAgICAgICAgPFByb3BlcnR5IG5hbWU9XCJjdXJzb3JcIiB0eXBlPVwiamF2YS5hd3QuQ3Vyc29yXCIgZWRpdG9yPVwib3JnLm5ldGJlYW5zLm1vZHVsZXMuZm9ybS5lZGl0b3JzMi5DdXJzb3JFZGl0b3JcIj5cbiAgICAgICAgICA8Q29sb3IgaWQ9XCJIYW5kIEN1cnNvclwiLz5cbiAgICAgICAgPC9Qcm9wZXJ0eT5cbiAgICAgIDwvUHJvcGVydGllcz5cbiAgICAgIDxFdmVudHM+XG4gICAgICAgIDxFdmVudEhhbmRsZXIgZXZlbnQ9XCJhY3Rpb25QZXJmb3JtZWRcIiBsaXN0ZW5lcj1cImphdmEuYXd0LmV2ZW50LkFjdGlvbkxpc3RlbmVyXCIgcGFyYW1ldGVycz1cImphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50XCIgaGFuZGxlcj1cImJ0bkV4aXRBY3Rpb25QZXJmb3JtZWRcIi8+XG4gICAgICA8L0V2ZW50cz5cbiAgICA8L0NvbXBvbmVudD5cbiAgPC9TdWJDb21wb25lbnRzPlxuPC9Gb3JtPlxuLi4uXG4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCJhN2VlOGVkNS0yYzUwLTQ5NWMtYjk5Yy0xMjI1ZTlhZjhhMTM7dG9vbHVfMDE5QTNUREI2Z2FCVkEyZ2kzb0hpcVBLIjp7InJlcXVlc3RJZCI6ImE3ZWU4ZWQ1LTJjNTAtNDk1Yy1iOTljLTEyMjVlOWFmOGExMyIsInRvb2xVc2VJZCI6InRvb2x1XzAxOUEzVERCNmdhQlZBMmdpM29IaXFQSyIsInBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IlRoZSBmb2xsb3dpbmcgY29kZSBzZWN0aW9ucyB3ZXJlIHJldHJpZXZlZDpcblBhdGg6IHNyYy9EQU8vVXNlckRBTy5qYXZhXG4vKlxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9MaWNlbnNlcy9saWNlbnNlLWRlZmF1bHQudHh0IHRvIGNoYW5nZSB0aGlzIGxpY2Vuc2VcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9DbGFzcy5qYXZhIHRvIGVkaXQgdGhpcyB0ZW1wbGF0ZVxuICovXG5wYWNrYWdlIERBTztcblxuaW1wb3J0IE1vZGVsLlVzZXI7XG5pbXBvcnQgamF2YS51dGlsLkxpc3Q7XG5pbXBvcnQgamF2YS5zcWwuUHJlcGFyZWRTdGF0ZW1lbnQ7XG5pbXBvcnQgamF2YS5zcWwuVGltZXN0YW1wO1xuaW1wb3J0IERBTy5EYk9wZXJhdGlvbnMuU3FsT3BlcmF0aW9uO1xuaW1wb3J0IGphdmEuc3FsLlJlc3VsdFNldDtcbi8qKlxuICpcbiAqIEBhdXRob3IgTmdvYyBUaGFvXG4gKi9cbnB1YmxpYyBjbGFzcyBVc2VyREFPe1xuXG4gICAgcHVibGljIHN0YXRpYyB2b2lkIGluc2VydChmaW5hbCBVc2VyIG9iaikge1xuICAgICAgICBmaW5hbCBpbnQgdXNlcklkID0gRGJPcGVyYXRpb25zLmdldE5leHRJZChcIlVTRVJcIiwgXCJ1c2VyX2lkXCIpO1xuICAgICAgICBcbiAgICAgICAgb2JqLnNldFVzZXJfaWQodXNlcklkKTtcbiAgICAgICAgXG4gICAgICAgIFNxbE9wZXJhdGlvbltdIG9wZXJhdGlvbnMgPSBuZXcgU3FsT3BlcmF0aW9uW10ge1xuICAgICAgICAgICAgbmV3IFNxbE9wZXJhdGlvbigpIHtcbiAgICAgICAgICAgICAgICBAT3ZlcnJpZGVcbiAgICAgICAgICAgICAgICBwdWJsaWMgU3RyaW5nIGdldFNxbCgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiSU5TRVJUIElOVE8gVVNFUih1c2VyX2lkLCB1c2VybmFtZSwgcGFzc3dvcmQsIHJvbGUsIGNyZWF0ZWRfYXQpIFZBTFVFUyAoPywgPywgPywgPywgPylcIjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBAT3ZlcnJpZGVcbiAgICAgICAgICAgICAgICBwdWJsaWMgdm9pZCBzZXRQYXJhbWV0ZXJzKFByZXBhcmVkU3RhdGVtZW50IHBzKSB0aHJvd3MgRXhjZXB0aW9uIHtcbiAgICAgICAgICAgICAgICAgICAgcHMuc2V0SW50KDEsIHVzZXJJZCk7XG4gICAgICAgICAgICAgICAgICAgIHBzLnNldFN0cmluZygyLCBvYmouZ2V0VXNlcm5hbWUoKSk7XG4gICAgICAgICAgICAgICAgICAgIHBzLnNldFN0cmluZygzLCBvYmouZ2V0UGFzc3dvcmQoKSk7XG4gICAgICAgICAgICAgICAgICAgIHBzLnNldFN0cmluZyg0LCBvYmouZ2V0Um9sZSgpKTtcbiAgICAgICAgICAgICAgICAgICAgcHMuc2V0VGltZXN0YW1wKDUsIFRpbWVzdGFtcC52YWx1ZU9mKG9iai5nZXRDcmVhdGVfYXQoKSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIERiT3BlcmF0aW9ucy5leGVjdXRlVHJhbnNhY3Rpb24ob3BlcmF0aW9ucywgXCJUaMOqbSB0w6BpIGtob+G6o24gdGjDoG5oIGPDtG5nIVwiKTtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIHN0YXRpYyBib29sZWFuIGxvZ2luKGZpbmFsIFN0cmluZyB1c2VyTmFtZSwgZmluYWwgU3RyaW5nIHBhc3N3b3JkKSB7XG4gICAgICAgIFVzZXIgdXNlciA9IG51bGw7XG4gICAgICAgIGJvb2xlYW4gaXNWYWxpZCA9IGZhbHNlO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgUmVzdWx0U2V0IHJzID0gRGJPcGVyYXRpb25zLmdldERhdGEoXCJTRUxFQ1QgKiBGUk9NIFVTRVIgV0hFUkUgdXNlcm5hbWUgPSAnXCIgKyB1c2VyTmFtZSArIFwiJyBhbmQgcGFzc3dvcmQgPSAnXCIgKyBwYXNzd29yZCArXCInXCIpO1xuICAgICAgICAgICAgd2hpbGUgKHJzLm5leHQoKSkge1xuICAgICAgICAgICAgICAgIGJvb2xlYW4gaXNBY3RpdmUgPSBycy5nZXRCb29sZWFuKFwiaXNBY3RpdmVcIik7XG4gICAgICAgICAgICAgICAgaWYgKGlzQWN0aXZlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlzVmFsaWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZXgpIHtcbiAgICAgICAgICAgIGV4LnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICB9IFxuXG4gICAgICAgIHJldHVybiBpc1ZhbGlkO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgdm9pZCB1cGRhdGUoVXNlciBvYmopIHtcbiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBkZWxldGUoaW50IGlkKSB7XG4gICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbihcIk5vdCBzdXBwb3J0ZWQgeWV0LlwiKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIFVzZXIgZ2V0QnlJZChpbnQgaWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpO1xuICAgIH1cbi4uLlxuUGF0aDogc3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vU2lnblVwLmphdmFcbi8qXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0xpY2Vuc2VzL2xpY2Vuc2UtZGVmYXVsdC50eHQgdG8gY2hhbmdlIHRoaXMgbGljZW5zZVxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9HVUlGb3Jtcy9KRnJhbWUuamF2YSB0byBlZGl0IHRoaXMgdGVtcGxhdGVcbiAqL1xucGFja2FnZSBpbnRlcm5ldC5tYW5nZW1lbnQuc3lzdGVtO1xuXG5pbXBvcnQgREFPLlN1YnNjcmliZXJEQU87XG5pbXBvcnQgTW9kZWwuU3Vic2NyaWJlcjtcbmltcG9ydCBqYXZhLnRpbWUuTG9jYWxEYXRlVGltZTtcbmltcG9ydCBqYXZheC5zd2luZy5KT3B0aW9uUGFuZTtcblxuLyoqXG4gKlxuICogQGF1dGhvciBOZ29jIFRoYW9cbiAqL1xucHVibGljIGNsYXNzIFNpZ25VcCBleHRlbmRzIGphdmF4LnN3aW5nLkpGcmFtZSB7XG5cbiAgICBwdWJsaWMgU3RyaW5nIHBob25lUGF0dGVybiA9IFwiXlswLTldKiRcIjtcbiAgICBwcml2YXRlIFN0cmluZyBERUZBVUxUX1JPTEUgPSBcInVzZXJcIjtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIG5ldyBmb3JtIFNpZ25JblxuICAgICAqL1xuICAgIHB1YmxpYyBTaWduVXAoKSB7XG4gICAgICAgIGluaXRDb21wb25lbnRzKCk7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgY2xlYXIoKXtcbiAgICAgICAgdHh0TmFtZS5zZXRUZXh0KFwiXCIpO1xuICAgICAgICB0eHRVc2VyTmFtZS5zZXRUZXh0KFwiXCIpO1xuICAgICAgICB0eHRQYXNzd29yZC5zZXRUZXh0KFwiXCIpO1xuICAgICAgICB0eHRBZGRyZXNzLnNldFRleHQoXCJcIik7XG4gICAgICAgIHR4dFBob25lLnNldFRleHQoXCJcIik7XG4gICAgfVxuXG4gICAgcHVibGljIGJvb2xlYW4gdmFsaWRhdGVGaWVsZHMoKXtcbiAgICAgICAgU3RyaW5nIG5hbWUgPSB0eHROYW1lLmdldFRleHQoKTtcbiAgICAgICAgU3RyaW5nIHVzZXJOYW1lID0gdHh0VXNlck5hbWUuZ2V0VGV4dCgpO1xuICAgICAgICBTdHJpbmcgcGFzc3dvcmQgPSB0eHRQYXNzd29yZC5nZXRUZXh0KCk7XG4gICAgICAgIFN0cmluZyBhZGRyZXNzID0gdHh0QWRkcmVzcy5nZXRUZXh0KCk7XG4gICAgICAgIFN0cmluZyBwaG9uZSA9IHR4dFBob25lLmdldFRleHQoKTtcblxuICAgICAgICBpZihuYW1lLmlzRW1wdHkoKSB8fCB1c2VyTmFtZS5pc0VtcHR5KCkgfHwgcGFzc3dvcmQuaXNFbXB0eSgpIHx8IGFkZHJlc3MuaXNFbXB0eSgpIHx8IHBob25lLmlzRW1wdHkoKSl7XG4gICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcIlZ1aSBsw7JuZyBraMO0bmcgYuG7jyB0cuG7kW5nIVwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYocGhvbmUubGVuZ3RoKCkgIT0gMTAgfHwgIXBob25lLm1hdGNoZXMocGhvbmVQYXR0ZXJuKSkge1xuICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXCJWdWkgbMOybmcgbmjhuq1wIMSRw7puZyDEkeG7i25oIGThuqFuZyBz4buRIMSRaeG7h24gdGhv4bqhaSFcIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4uLi5cblxuICAgIHByaXZhdGUgdm9pZCBidG5TaWdudXBBY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuU2lnbnVwQWN0aW9uUGVyZm9ybWVkXG4gICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxuICAgICAgICBpZiAodmFsaWRhdGVGaWVsZHMoKSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBTdWJzY3JpYmVyIHN1YiA9IG5ldyBTdWJzY3JpYmVyKCk7XG4gICAgICAgICAgICAgICAgc3ViLnNldEZ1bGxOYW1lKHR4dE5hbWUuZ2V0VGV4dCgpKTtcbiAgICAgICAgICAgICAgICBzdWIuc2V0VXNlcm5hbWUodHh0VXNlck5hbWUuZ2V0VGV4dCgpKTtcbiAgICAgICAgICAgICAgICBzdWIuc2V0UGFzc3dvcmQodHh0UGFzc3dvcmQuZ2V0VGV4dCgpKTtcbiAgICAgICAgICAgICAgICBzdWIuc2V0Um9sZShERUZBVUxUX1JPTEUpO1xuICAgICAgICAgICAgICAgIHN1Yi5zZXRBZGRyZXNzKHR4dEFkZHJlc3MuZ2V0VGV4dCgpKTtcbiAgICAgICAgICAgICAgICBzdWIuc2V0UGhvbmUodHh0UGhvbmUuZ2V0VGV4dCgpKTtcbiAgICAgICAgICAgICAgICBzdWIuc2V0Q3JlYXRlX2F0KExvY2FsRGF0ZVRpbWUubm93KCkpO1xuICAgICAgICAgICAgICAgIFN1YnNjcmliZXJEQU8uaW5zZXJ0KHN1Yik7XG4gICAgICAgICAgICAgICAgY2xlYXIoKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBleCkge1xuICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwiTOG7l2k6IFwiICsgZXguZ2V0TWVzc2FnZSgpLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuU2lnbnVwQWN0aW9uUGVyZm9ybWVkXG4uLi5cblBhdGg6IHNyYy9EQU8vU3Vic2NyaWJlckRBTy5qYXZhXG4vKlxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9MaWNlbnNlcy9saWNlbnNlLWRlZmF1bHQudHh0IHRvIGNoYW5nZSB0aGlzIGxpY2Vuc2VcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9DbGFzcy5qYXZhIHRvIGVkaXQgdGhpcyB0ZW1wbGF0ZVxuICovXG5wYWNrYWdlIERBTztcblxuaW1wb3J0IE1vZGVsLlN1YnNjcmliZXI7XG5pbXBvcnQgamF2YS51dGlsLkxpc3Q7XG5pbXBvcnQgamF2YS5zcWwuUHJlcGFyZWRTdGF0ZW1lbnQ7XG5pbXBvcnQgamF2YS5zcWwuVGltZXN0YW1wO1xuaW1wb3J0IERBTy5EYk9wZXJhdGlvbnMuU3FsT3BlcmF0aW9uO1xuXG4vKipcbiAqXG4gKiBAYXV0aG9yIE5nb2MgVGhhb1xuICovXG5wdWJsaWMgY2xhc3MgU3Vic2NyaWJlckRBT3tcblxuICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBpbnNlcnQoZmluYWwgU3Vic2NyaWJlciBvYmopIHtcbiAgICAgICAgZmluYWwgaW50IHVzZXJJZCA9IERiT3BlcmF0aW9ucy5nZXROZXh0SWQoXCJVU0VSXCIsIFwidXNlcl9pZFwiKTtcbiAgICAgICAgZmluYWwgaW50IHN1YnNjcmliZXJJZCA9IERiT3BlcmF0aW9ucy5nZXROZXh0SWQoXCJTVUJTQ1JJQkVSXCIsIFwic3Vic2NyaWJlcl9pZFwiKTtcblxuICAgICAgICBvYmouc2V0VXNlcl9pZCh1c2VySWQpO1xuICAgICAgICBvYmouc2V0U3Vic2NyaWJlcl9pZChzdWJzY3JpYmVySWQpO1xuXG4gICAgICAgIFNxbE9wZXJhdGlvbltdIG9wZXJhdGlvbnMgPSBuZXcgU3FsT3BlcmF0aW9uW10ge1xuICAgICAgICAgICAgbmV3IFNxbE9wZXJhdGlvbigpIHtcbiAgICAgICAgICAgICAgICBAT3ZlcnJpZGVcbiAgICAgICAgICAgICAgICBwdWJsaWMgU3RyaW5nIGdldFNxbCgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiSU5TRVJUIElOVE8gVVNFUih1c2VyX2lkLCB1c2VybmFtZSwgcGFzc3dvcmQsIHJvbGUsIGNyZWF0ZWRfYXQsIGlzQWN0aXZlKSBWQUxVRVMgKD8sID8sID8sID8sID8sID8pXCI7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgQE92ZXJyaWRlXG4gICAgICAgICAgICAgICAgcHVibGljIHZvaWQgc2V0UGFyYW1ldGVycyhQcmVwYXJlZFN0YXRlbWVudCBwcykgdGhyb3dzIEV4Y2VwdGlvbiB7XG4gICAgICAgICAgICAgICAgICAgIHBzLnNldEludCgxLCB1c2VySWQpO1xuICAgICAgICAgICAgICAgICAgICBwcy5zZXRTdHJpbmcoMiwgb2JqLmdldFVzZXJuYW1lKCkpO1xuICAgICAgICAgICAgICAgICAgICBwcy5zZXRTdHJpbmcoMywgb2JqLmdldFBhc3N3b3JkKCkpO1xuICAgICAgICAgICAgICAgICAgICBwcy5zZXRTdHJpbmcoNCwgb2JqLmdldFJvbGUoKSk7XG4gICAgICAgICAgICAgICAgICAgIHBzLnNldFRpbWVzdGFtcCg1LCBUaW1lc3RhbXAudmFsdWVPZihvYmouZ2V0Q3JlYXRlX2F0KCkpKTtcbiAgICAgICAgICAgICAgICAgICAgcHMuc2V0Qm9vbGVhbig2LCB0cnVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBuZXcgU3FsT3BlcmF0aW9uKCkge1xuICAgICAgICAgICAgICAgIEBPdmVycmlkZVxuICAgICAgICAgICAgICAgIHB1YmxpYyBTdHJpbmcgZ2V0U3FsKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJJTlNFUlQgSU5UTyBTVUJTQ1JJQkVSIChzdWJzY3JpYmVyX2lkLCBuYW1lLCBhZGRyZXNzLCBwaG9uZSwgdXNlcl9pZCkgVkFMVUVTICg/LCA/LCA/LCA/LCA/KVwiO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIEBPdmVycmlkZVxuICAgICAgICAgICAgICAgIHB1YmxpYyB2b2lkIHNldFBhcmFtZXRlcnMoUHJlcGFyZWRTdGF0ZW1lbnQgcHMpIHRocm93cyBFeGNlcHRpb24ge1xuICAgICAgICAgICAgICAgICAgICBwcy5zZXRJbnQoMSwgc3Vic2NyaWJlcklkKTtcbiAgICAgICAgICAgICAgICAgICAgcHMuc2V0U3RyaW5nKDIsIG9iai5nZXRGdWxsTmFtZSgpKTtcbiAgICAgICAgICAgICAgICAgICAgcHMuc2V0U3RyaW5nKDMsIG9iai5nZXRBZGRyZXNzKCkpO1xuICAgICAgICAgICAgICAgICAgICBwcy5zZXRTdHJpbmcoNCwgb2JqLmdldFBob25lKCkpO1xuICAgICAgICAgICAgICAgICAgICBwcy5zZXRJbnQoNSwgdXNlcklkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgRGJPcGVyYXRpb25zLmV4ZWN1dGVUcmFuc2FjdGlvbihvcGVyYXRpb25zLCBcIsSQxINuZyBrw70gdGjDoG5oIGPDtG5nIVwiKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIHZvaWQgdXBkYXRlKFN1YnNjcmliZXIgb2JqKSB7XG4gICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbihcIk5vdCBzdXBwb3J0ZWQgeWV0LlwiKTsgLy8gR2VuZXJhdGVkIGZyb20gbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NvZGUvR2VuZXJhdGVkTWV0aG9kQm9keVxuICAgIH1cbi4uLlxuUGF0aDogc3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vRm9yZ290UGFzc3dvcmQuamF2YVxuLypcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvTGljZW5zZXMvbGljZW5zZS1kZWZhdWx0LnR4dCB0byBjaGFuZ2UgdGhpcyBsaWNlbnNlXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0dVSUZvcm1zL0pGcmFtZS5qYXZhIHRvIGVkaXQgdGhpcyB0ZW1wbGF0ZVxuICovXG5wYWNrYWdlIGludGVybmV0Lm1hbmdlbWVudC5zeXN0ZW07XG5cbmltcG9ydCBqYXZheC5zd2luZy5KT3B0aW9uUGFuZTtcblxuLyoqXG4gKlxuICogQGF1dGhvciBOZ29jIFRoYW9cbiAqL1xucHVibGljIGNsYXNzIEZvcmdvdFBhc3N3b3JkIGV4dGVuZHMgamF2YXguc3dpbmcuSkZyYW1lIHtcbiAgICBwdWJsaWMgU3RyaW5nIHBob25lUGF0dGVybiA9IFwiXlswLTldKiRcIjtcbiAgICBcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIG5ldyBmb3JtIEZvcmdvdFBhc3N3b3JkXG4gICAgICovXG4gICAgcHVibGljIEZvcmdvdFBhc3N3b3JkKCkge1xuICAgICAgICBpbml0Q29tcG9uZW50cygpO1xuICAgICAgICBcbiAgICAgICAgYnRuRXhpdC5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICAgICAgYnRuQ2hhbmdlLnNldFZpc2libGUoZmFsc2UpO1xuICAgICAgICBsYk5ld1Bhc3N3b3JkLnNldFZpc2libGUoZmFsc2UpO1xuICAgICAgICBsYkNvbmZpcm1QYXNzd29yZC5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICAgICAgdHh0UGFzc3dvcmQuc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgICAgIHR4dENvbmZpcm1QYXNzd29yZC5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBjbGVhcigpe1xuICAgICAgICB0eHRQYXNzd29yZC5zZXRUZXh0KFwiXCIpO1xuICAgICAgICB0eHRQaG9uZS5zZXRUZXh0KFwiXCIpO1xuICAgICAgICB0eHRDb25maXJtUGFzc3dvcmQuc2V0VGV4dChcIlwiKTtcbiAgICAgICAgXG4gICAgICAgIGJ0bkV4aXQuc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgICAgIGJ0bkNoYW5nZS5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICAgICAgbGJOZXdQYXNzd29yZC5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICAgICAgbGJDb25maXJtUGFzc3dvcmQuc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgICAgIHR4dFBhc3N3b3JkLnNldFZpc2libGUoZmFsc2UpO1xuICAgICAgICB0eHRDb25maXJtUGFzc3dvcmQuc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyBib29sZWFuIHZhbGlkYXRlUGhvbmUoKXtcbiAgICAgICAgU3RyaW5nIHBob25lID0gdHh0UGhvbmUuZ2V0VGV4dCgpO1xuICAgICAgICBpZihwaG9uZS5sZW5ndGgoKSAhPSAxMCB8fCAhcGhvbmUubWF0Y2hlcyhwaG9uZVBhdHRlcm4pKSB7XG4gICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcIlZ1aSBsw7JuZyBuaOG6rXAgxJHDum5nIMSR4buLbmggZOG6oW5nIHPhu5EgxJFp4buHbiB0aG/huqFpIVwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgYm9vbGVhbiB2YWxpZGF0ZUZpZWxkcygpe1xuICAgICAgICBTdHJpbmcgcGFzc3dvcmQgPSB0eHRQYXNzd29yZC5nZXRUZXh0KCk7XG4gICAgICAgIFN0cmluZyBjb25maXJtUGFzc3dvcmQgPSB0eHRDb25maXJtUGFzc3dvcmQuZ2V0VGV4dCgpO1xuXG4gICAgICAgIGlmKHBhc3N3b3JkLmlzRW1wdHkoKSB8fCBjb25maXJtUGFzc3dvcmQuaXNFbXB0eSgpKXtcbiAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwiVnVpIGzDsm5nIGtow7RuZyBi4buPIHRy4buRbmchXCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGNhbGxlZCBmcm9tIHdpdGhpbiB0aGUgY29uc3RydWN0b3IgdG8gaW5pdGlhbGl6ZSB0aGUgZm9ybS5cbiAgICAgKiBXQVJOSU5HOiBEbyBOT1QgbW9kaWZ5IHRoaXMgY29kZS4gVGhlIGNvbnRlbnQgb2YgdGhpcyBtZXRob2QgaXMgYWx3YXlzXG4gICAgICogcmVnZW5lcmF0ZWQgYnkgdGhlIEZvcm0gRWRpdG9yLlxuICAgICAqL1xuICAgIEBTdXBwcmVzc1dhcm5pbmdzKFwidW5jaGVja2VkXCIpXG4gICAgLy8gPGVkaXRvci1mb2xkIGRlZmF1bHRzdGF0ZT1cImNvbGxhcHNlZFwiIGRlc2M9XCJHZW5lcmF0ZWQgQ29kZVwiPi8vR0VOLUJFR0lOOmluaXRDb21wb25lbnRzXG4gICAgcHJpdmF0ZSB2b2lkIGluaXRDb21wb25lbnRzKCkge1xuXG4gICAgICAgIGpMYWJlbDEgPSBuZXcgamF2YXguc3dpbmcuSkxhYmVsKCk7XG4gICAgICAgIGpMYWJlbDIgPSBuZXcgamF2YXguc3dpbmcuSkxhYmVsKCk7XG4gICAgICAgIGxiTmV3UGFzc3dvcmQgPSBuZXcgamF2YXguc3dpbmcuSkxhYmVsKCk7XG4gICAgICAgIGxiQ29uZmlybVBhc3N3b3JkID0gbmV3IGphdmF4LnN3aW5nLkpMYWJlbCgpO1xuICAgICAgICBqU2VwYXJhdG9yMSA9IG5ldyBqYXZheC5zd2luZy5KU2VwYXJhdG9yKCk7XG4gICAgICAgIHR4dFBob25lID0gbmV3IGphdmF4LnN3aW5nLkpUZXh0RmllbGQoKTtcbiAgICAgICAgYnRuQ2hlY2sgPSBuZXcgamF2YXguc3dpbmcuSkJ1dHRvbigpO1xuICAgICAgICB0eHRQYXNzd29yZCA9IG5ldyBqYXZheC5zd2luZy5KUGFzc3dvcmRGaWVsZCgpO1xuICAgICAgICB0eHRDb25maXJtUGFzc3dvcmQgPSBuZXcgamF2YXguc3dpbmcuSlBhc3N3b3JkRmllbGQoKTtcbiAgICAgICAgYnRuQ2hhbmdlID0gbmV3IGphdmF4LnN3aW5nLkpCdXR0b24oKTtcbiAgICAgICAgYnRuRXhpdCA9IG5ldyBqYXZheC5zd2luZy5KQnV0dG9uKCk7XG5cbiAgICAgICAgc2V0RGVmYXVsdENsb3NlT3BlcmF0aW9uKGphdmF4LnN3aW5nLldpbmRvd0NvbnN0YW50cy5FWElUX09OX0NMT1NFKTtcblxuICAgICAgICBqTGFiZWwxLnNldEZvbnQobmV3IGphdmEuYXd0LkZvbnQoXCJBcmlhbFwiLCAxLCAzNikpOyAvLyBOT0kxOE5cbiAgICAgICAgakxhYmVsMS5zZXRGb3JlZ3JvdW5kKGphdmF4LnN3aW5nLlVJTWFuYWdlci5nZXREZWZhdWx0cygpLmdldENvbG9yKFwiQWN0aW9ucy5ZZWxsb3dcIikpO1xuICAgICAgICBqTGFiZWwxLnNldFRleHQoXCLEkOG7lEkgTeG6rFQgS0jhuqhVXCIpO1xuLi4uXG5cbiAgICAgICAgYnRuQ2hhbmdlLnNldEZvbnQobmV3IGphdmEuYXd0LkZvbnQoXCJBcmlhbFwiLCAxLCAxNCkpOyAvLyBOT0kxOE5cbiAgICAgICAgYnRuQ2hhbmdlLnNldEljb24obmV3IGphdmF4LnN3aW5nLkltYWdlSWNvbihnZXRDbGFzcygpLmdldFJlc291cmNlKFwiL0ltYWdlcy9yZXNldC1wYXNzd29yZC5wbmdcIikpKTsgLy8gTk9JMThOXG4gICAgICAgIGJ0bkNoYW5nZS5zZXRUZXh0KFwixJDhu5VpIG3huq10IGto4bqpdVwiKTtcbiAgICAgICAgYnRuQ2hhbmdlLnNldEN1cnNvcihuZXcgamF2YS5hd3QuQ3Vyc29yKGphdmEuYXd0LkN1cnNvci5IQU5EX0NVUlNPUikpO1xuXG4gICAgICAgIGJ0bkV4aXQuc2V0Rm9udChuZXcgamF2YS5hd3QuRm9udChcIkFyaWFsXCIsIDEsIDE0KSk7IC8vIE5PSTE4TlxuICAgICAgICBidG5FeGl0LnNldEljb24obmV3IGphdmF4LnN3aW5nLkltYWdlSWNvbihnZXRDbGFzcygpLmdldFJlc291cmNlKFwiL0ltYWdlcy9sb2dvdXQucG5nXCIpKSk7IC8vIE5PSTE4TlxuICAgICAgICBidG5FeGl0LnNldFRleHQoXCJUaG/DoXRcIik7XG4gICAgICAgIGJ0bkV4aXQuc2V0Q3Vyc29yKG5ldyBqYXZhLmF3dC5DdXJzb3IoamF2YS5hd3QuQ3Vyc29yLkhBTkRfQ1VSU09SKSk7XG4gICAgICAgIGJ0bkV4aXQuYWRkQWN0aW9uTGlzdGVuZXIobmV3IGphdmEuYXd0LmV2ZW50LkFjdGlvbkxpc3RlbmVyKCkge1xuICAgICAgICAgICAgcHVibGljIHZvaWQgYWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkge1xuICAgICAgICAgICAgICAgIGJ0bkV4aXRBY3Rpb25QZXJmb3JtZWQoZXZ0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4uLi5cbiAgICAgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVBhcmFsbGVsR3JvdXAoamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuQWxpZ25tZW50LkJBU0VMSU5FKVxuICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGJ0bkV4aXQsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFLCAzMCwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQoYnRuQ2hhbmdlLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSwgMzAsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFKSkpXG4gICAgICAgICk7XG5cbiAgICAgICAgcGFjaygpO1xuICAgIH0vLyA8L2VkaXRvci1mb2xkPi8vR0VOLUVORDppbml0Q29tcG9uZW50c1xuXG4gICAgcHJpdmF0ZSB2b2lkIGJ0bkV4aXRBY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuRXhpdEFjdGlvblBlcmZvcm1lZFxuICAgICAgICAvLyBUT0RPIGFkZCB5b3VyIGhhbmRsaW5nIGNvZGUgaGVyZTpcbiAgICAgICAgaW50IHJlc3VsdCA9IEpPcHRpb25QYW5lLnNob3dDb25maXJtRGlhbG9nKG51bGwsIFwiQuG6oW4gY8OzIGNo4bqvYyBjaOG6r24gbXXhu5FuIHRob8OhdCBraMO0bmc/XCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuWUVTX05PX09QVElPTiwgSk9wdGlvblBhbmUuUVVFU1RJT05fTUVTU0FHRSk7XG4gICAgXG4gICAgICAgIGlmIChyZXN1bHQgPT0gSk9wdGlvblBhbmUuWUVTX09QVElPTikge1xuICAgICAgICAgICAgU3lzdGVtLmV4aXQoMCk7XG4gICAgICAgIH1cbiAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5FeGl0QWN0aW9uUGVyZm9ybWVkXG4uLi5cbiAgICAgICAgLy88L2VkaXRvci1mb2xkPlxuXG4gICAgICAgIC8qIENyZWF0ZSBhbmQgZGlzcGxheSB0aGUgZm9ybSAqL1xuICAgICAgICBqYXZhLmF3dC5FdmVudFF1ZXVlLmludm9rZUxhdGVyKG5ldyBSdW5uYWJsZSgpIHtcbiAgICAgICAgICAgIHB1YmxpYyB2b2lkIHJ1bigpIHtcbiAgICAgICAgICAgICAgICBuZXcgRm9yZ290UGFzc3dvcmQoKS5zZXRWaXNpYmxlKHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBWYXJpYWJsZXMgZGVjbGFyYXRpb24gLSBkbyBub3QgbW9kaWZ5Ly9HRU4tQkVHSU46dmFyaWFibGVzXG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KQnV0dG9uIGJ0bkNoYW5nZTtcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpCdXR0b24gYnRuQ2hlY2s7XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KQnV0dG9uIGJ0bkV4aXQ7XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KTGFiZWwgakxhYmVsMTtcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpMYWJlbCBqTGFiZWwyO1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSlNlcGFyYXRvciBqU2VwYXJhdG9yMTtcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpMYWJlbCBsYkNvbmZpcm1QYXNzd29yZDtcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpMYWJlbCBsYk5ld1Bhc3N3b3JkO1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSlBhc3N3b3JkRmllbGQgdHh0Q29uZmlybVBhc3N3b3JkO1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSlBhc3N3b3JkRmllbGQgdHh0UGFzc3dvcmQ7XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KVGV4dEZpZWxkIHR4dFBob25lO1xuICAgIC8vIEVuZCBvZiB2YXJpYWJsZXMgZGVjbGFyYXRpb24vL0dFTi1FTkQ6dmFyaWFibGVzXG59XG4uLi5cblBhdGg6IHNyYy9EQU8vQ29ubmVjdGlvblByb3ZpZGVyLmphdmFcbi4uLlxuXG4vKipcbiAqXG4gKiBAYXV0aG9yIE5nb2MgVGhhb1xuICovXG5wdWJsaWMgY2xhc3MgQ29ubmVjdGlvblByb3ZpZGVyIHtcbiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBTdHJpbmcgVVJMID0gXCJqZGJjOm15c3FsOi8vMTI1LjIxMi4yMzEuMTg0OjY5NjkvSW50ZXJuZXREQlwiO1xuICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmluZyBVU0VSID0gXCJtaW50b3JpMDlcIjtcbiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBTdHJpbmcgUEFTU1dPUkQgPSBcIk1pbnRvcnkwOUA5NlwiO1xuICAgIFxuICAgIHB1YmxpYyBzdGF0aWMgQ29ubmVjdGlvbiBnZXRDb25uKCl7XG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIENsYXNzLmZvck5hbWUoXCJjb20ubXlzcWwuY2ouamRiYy5Ecml2ZXJcIik7XG4gICAgICAgICAgICBjb25uID0gRHJpdmVyTWFuYWdlci5nZXRDb25uZWN0aW9uKFVSTCwgVVNFUiwgUEFTU1dPUkQpO1xuICAgICAgICB9IGNhdGNoIChDbGFzc05vdEZvdW5kRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIFN5c3RlbS5lcnIucHJpbnRsbihcIk15U1FMIEpEQkMgRHJpdmVyIG5vdCBmb3VuZC5cIik7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgU3lzdGVtLmVyci5wcmludGxuKFwiQ29ubmVjdGlvbiBmYWlsZWQuXCIpO1xuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29ubjtcbiAgICB9XG4uLi5cblBhdGg6IHNyYy9EQU8vRGJPcGVyYXRpb25zLmphdmFcbnBhY2thZ2UgREFPO1xuXG5pbXBvcnQgamF2YS5zcWwuQ29ubmVjdGlvbjtcbmltcG9ydCBqYXZhLnNxbC5QcmVwYXJlZFN0YXRlbWVudDtcbmltcG9ydCBqYXZhLnNxbC5SZXN1bHRTZXQ7XG5pbXBvcnQgamF2YS5zcWwuU3RhdGVtZW50O1xuaW1wb3J0IGphdmF4LnN3aW5nLkpPcHRpb25QYW5lO1xuXG5wdWJsaWMgY2xhc3MgRGJPcGVyYXRpb25zIHtcbiAgICBwdWJsaWMgc3RhdGljIHZvaWQgc2V0RGF0YU9yRGVsZXRlKFN0cmluZyBxdWVyeSwgU3RyaW5nIG1zZykge1xuICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgICAgICBTdGF0ZW1lbnQgc3QgPSBudWxsO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29ubiA9IENvbm5lY3Rpb25Qcm92aWRlci5nZXRDb25uKCk7XG4gICAgICAgICAgICBzdCA9IGNvbm4uY3JlYXRlU3RhdGVtZW50KCk7XG4gICAgICAgICAgICBzdC5leGVjdXRlVXBkYXRlKHF1ZXJ5KTtcblxuICAgICAgICAgICAgaWYoIW1zZy5lcXVhbHMoXCJcIikpIHtcbiAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBtc2csIFwiTWVzc2FnZVwiLCBKT3B0aW9uUGFuZS5JTkZPUk1BVElPTl9NRVNTQUdFKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGV4KSB7XG4gICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBleCwgXCJNZXNzYWdlXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAoc3QgIT0gbnVsbCkgc3QuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICBpZiAoY29ubiAhPSBudWxsKSBjb25uLmNsb3NlKCk7XG4gICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4uLi5cblBhdGg6IHNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL0xvZ2luLmphdmFcbi8qXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0xpY2Vuc2VzL2xpY2Vuc2UtZGVmYXVsdC50eHQgdG8gY2hhbmdlIHRoaXMgbGljZW5zZVxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9HVUlGb3Jtcy9KRnJhbWUuamF2YSB0byBlZGl0IHRoaXMgdGVtcGxhdGVcbiAqL1xucGFja2FnZSBpbnRlcm5ldC5tYW5nZW1lbnQuc3lzdGVtO1xuXG5pbXBvcnQgREFPLlVzZXJEQU87XG5pbXBvcnQgTW9kZWwuVXNlcjtcbmltcG9ydCBqYXZheC5zd2luZy5KT3B0aW9uUGFuZTtcbi4uLlxuUGF0aDogc3JjL01vZGVsL1VzZXIuamF2YVxuLypcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvTGljZW5zZXMvbGljZW5zZS1kZWZhdWx0LnR4dCB0byBjaGFuZ2UgdGhpcyBsaWNlbnNlXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ2xhc3MuamF2YSB0byBlZGl0IHRoaXMgdGVtcGxhdGVcbiAqL1xucGFja2FnZSBNb2RlbDtcblxuaW1wb3J0IGphdmEudGltZS5Mb2NhbERhdGVUaW1lO1xuLyoqXG4gKlxuICogQGF1dGhvciBOZ29jIFRoYW9cbiAqL1xucHVibGljIGNsYXNzIFVzZXIge1xuICAgIHByaXZhdGUgaW50IHVzZXJfaWQ7XG4gICAgcHJpdmF0ZSBTdHJpbmcgdXNlcm5hbWU7XG4gICAgcHJpdmF0ZSBTdHJpbmcgcGFzc3dvcmQ7XG4gICAgcHJpdmF0ZSBTdHJpbmcgcm9sZTtcbiAgICBwcml2YXRlIExvY2FsRGF0ZVRpbWUgY3JlYXRlX2F0O1xuICAgIHByaXZhdGUgYm9vbGVhbiBpc0FjdGl2ZTtcblxuICAgIHB1YmxpYyBVc2VyKCkge1xuICAgIH1cblxuICAgIHB1YmxpYyBVc2VyKGludCB1c2VyX2lkLCBTdHJpbmcgdXNlcm5hbWUsIFN0cmluZyBwYXNzd29yZCwgU3RyaW5nIHJvbGUsIExvY2FsRGF0ZVRpbWUgY3JlYXRlX2F0LCBib29sZWFuIGlzQWN0aXZlKSB7XG4gICAgICAgIHRoaXMudXNlcl9pZCA9IHVzZXJfaWQ7XG4gICAgICAgIHRoaXMudXNlcm5hbWUgPSB1c2VybmFtZTtcbiAgICAgICAgdGhpcy5wYXNzd29yZCA9IHBhc3N3b3JkO1xuICAgICAgICB0aGlzLnJvbGUgPSByb2xlO1xuICAgICAgICB0aGlzLmNyZWF0ZV9hdCA9IGNyZWF0ZV9hdDtcbiAgICAgICAgdGhpcy5pc0FjdGl2ZSA9IGlzQWN0aXZlO1xuICAgIH1cblxuICAgIHB1YmxpYyBpbnQgZ2V0VXNlcl9pZCgpIHtcbiAgICAgICAgcmV0dXJuIHVzZXJfaWQ7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgc2V0VXNlcl9pZChpbnQgdXNlcl9pZCkge1xuICAgICAgICB0aGlzLnVzZXJfaWQgPSB1c2VyX2lkO1xuICAgIH1cblxuICAgIHB1YmxpYyBTdHJpbmcgZ2V0VXNlcm5hbWUoKSB7XG4gICAgICAgIHJldHVybiB1c2VybmFtZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXRVc2VybmFtZShTdHJpbmcgdXNlcm5hbWUpIHtcbiAgICAgICAgdGhpcy51c2VybmFtZSA9IHVzZXJuYW1lO1xuICAgIH1cblxuICAgIHB1YmxpYyBTdHJpbmcgZ2V0UGFzc3dvcmQoKSB7XG4gICAgICAgIHJldHVybiBwYXNzd29yZDtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXRQYXNzd29yZChTdHJpbmcgcGFzc3dvcmQpIHtcbiAgICAgICAgdGhpcy5wYXNzd29yZCA9IHBhc3N3b3JkO1xuICAgIH1cblxuICAgIHB1YmxpYyBTdHJpbmcgZ2V0Um9sZSgpIHtcbiAgICAgICAgcmV0dXJuIHJvbGU7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgc2V0Um9sZShTdHJpbmcgcm9sZSkge1xuICAgICAgICB0aGlzLnJvbGUgPSByb2xlO1xuICAgIH1cblxuICAgIHB1YmxpYyBMb2NhbERhdGVUaW1lIGdldENyZWF0ZV9hdCgpIHtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZV9hdDtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXRDcmVhdGVfYXQoTG9jYWxEYXRlVGltZSBjcmVhdGVfYXQpIHtcbiAgICAgICAgdGhpcy5jcmVhdGVfYXQgPSBjcmVhdGVfYXQ7XG4gICAgfVxuXG4gICAgcHVibGljIGJvb2xlYW4gaXNJc0FjdGl2ZSgpIHtcbiAgICAgICAgcmV0dXJuIGlzQWN0aXZlO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHNldElzQWN0aXZlKGJvb2xlYW4gaXNBY3RpdmUpIHtcbiAgICAgICAgdGhpcy5pc0FjdGl2ZSA9IGlzQWN0aXZlO1xuICAgIH1cbiAgICBcbn1cbi4uLlxuUGF0aDogc3JjL01vZGVsL1N1YnNjcmliZXIuamF2YVxuLypcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvTGljZW5zZXMvbGljZW5zZS1kZWZhdWx0LnR4dCB0byBjaGFuZ2UgdGhpcyBsaWNlbnNlXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ2xhc3MuamF2YSB0byBlZGl0IHRoaXMgdGVtcGxhdGVcbiAqL1xucGFja2FnZSBNb2RlbDtcblxuaW1wb3J0IGphdmEudGltZS5Mb2NhbERhdGVUaW1lO1xuXG4vKipcbiAqXG4gKiBAYXV0aG9yIE5nb2MgVGhhb1xuICovXG5wdWJsaWMgY2xhc3MgU3Vic2NyaWJlciBleHRlbmRzIFVzZXIge1xuICAgIHByaXZhdGUgaW50IHN1YnNjcmliZXJfaWQ7XG4gICAgcHJpdmF0ZSBTdHJpbmcgZnVsbE5hbWU7XG4gICAgcHJpdmF0ZSBTdHJpbmcgYWRkcmVzcztcbiAgICBwcml2YXRlIFN0cmluZyBwaG9uZTtcbiAgICBcbiAgICBwdWJsaWMgU3Vic2NyaWJlcigpIHtcbiAgICB9XG5cbiAgICBwdWJsaWMgU3Vic2NyaWJlcihpbnQgc3Vic2NyaWJlcl9pZCwgU3RyaW5nIGZ1bGxOYW1lLCBTdHJpbmcgYWRkcmVzcywgU3RyaW5nIHBob25lKSB7XG4gICAgICAgIHRoaXMuc3Vic2NyaWJlcl9pZCA9IHN1YnNjcmliZXJfaWQ7XG4gICAgICAgIHRoaXMuZnVsbE5hbWUgPSBmdWxsTmFtZTtcbiAgICAgICAgdGhpcy5hZGRyZXNzID0gYWRkcmVzcztcbiAgICAgICAgdGhpcy5waG9uZSA9IHBob25lO1xuICAgIH1cblxuICAgIHB1YmxpYyBTdWJzY3JpYmVyKGludCBzdWJzY3JpYmVyX2lkLCBTdHJpbmcgZnVsbE5hbWUsIFN0cmluZyBhZGRyZXNzLCBTdHJpbmcgcGhvbmUsIGludCB1c2VyX2lkLCBTdHJpbmcgdXNlcm5hbWUsIFN0cmluZyBwYXNzd29yZCwgU3RyaW5nIHJvbGUsIExvY2FsRGF0ZVRpbWUgY3JlYXRlX2F0LCBib29sZWFuIGlzQWN0aXZlKSB7XG4gICAgICAgIHN1cGVyKHVzZXJfaWQsIHVzZXJuYW1lLCBwYXNzd29yZCwgcm9sZSwgY3JlYXRlX2F0LCBpc0FjdGl2ZSk7XG4gICAgICAgIHRoaXMuc3Vic2NyaWJlcl9pZCA9IHN1YnNjcmliZXJfaWQ7XG4gICAgICAgIHRoaXMuZnVsbE5hbWUgPSBmdWxsTmFtZTtcbiAgICAgICAgdGhpcy5hZGRyZXNzID0gYWRkcmVzcztcbiAgICAgICAgdGhpcy5waG9uZSA9IHBob25lO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgaW50IGdldFN1YnNjcmliZXJfaWQoKSB7XG4gICAgICAgIHJldHVybiBzdWJzY3JpYmVyX2lkO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHNldFN1YnNjcmliZXJfaWQoaW50IHN1YnNjcmliZXJfaWQpIHtcbiAgICAgICAgdGhpcy5zdWJzY3JpYmVyX2lkID0gc3Vic2NyaWJlcl9pZDtcbiAgICB9XG5cbiAgICBwdWJsaWMgU3RyaW5nIGdldEZ1bGxOYW1lKCkge1xuICAgICAgICByZXR1cm4gZnVsbE5hbWU7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgc2V0RnVsbE5hbWUoU3RyaW5nIGZ1bGxOYW1lKSB7XG4gICAgICAgIHRoaXMuZnVsbE5hbWUgPSBmdWxsTmFtZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgU3RyaW5nIGdldEFkZHJlc3MoKSB7XG4gICAgICAgIHJldHVybiBhZGRyZXNzO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHNldEFkZHJlc3MoU3RyaW5nIGFkZHJlc3MpIHtcbiAgICAgICAgdGhpcy5hZGRyZXNzID0gYWRkcmVzcztcbiAgICB9XG5cbiAgICBwdWJsaWMgU3RyaW5nIGdldFBob25lKCkge1xuICAgICAgICByZXR1cm4gcGhvbmU7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgc2V0UGhvbmUoU3RyaW5nIHBob25lKSB7XG4gICAgICAgIHRoaXMucGhvbmUgPSBwaG9uZTtcbiAgICB9XG4gICAgXG4gICAgXG59XG4uLi5cblBhdGg6IHNyYy9Nb2RlbC9QbGFuLmphdmFcbi4uLlxuXG4vKipcbiAqXG4gKiBAYXV0aG9yIE5nb2MgVGhhb1xuICovXG5wdWJsaWMgY2xhc3MgUGxhbiB7XG4gICAgcHJpdmF0ZSBpbnQgcGxhbl9pZDtcbiAgICBwcml2YXRlIFN0cmluZyBuYW1lO1xuICAgIHByaXZhdGUgbG9uZyBwcmljZTtcbiAgICBwcml2YXRlIGludCBtYXhfc3BlZWRfZG9tZXN0aWM7XG4gICAgcHJpdmF0ZSBpbnQgbWF4X3NwZWVkX2ludGVybmF0aW9uYWw7XG4gICAgcHJpdmF0ZSBpbnQgbWluX3NwZWVkX2RvbWVzdGljO1xuICAgIHByaXZhdGUgaW50IG1pbl9zcGVlZF9pbnRlcm5hdGlvbmFsO1xuXG4gICAgcHVibGljIFBsYW4oKSB7XG4gICAgfVxuXG4gICAgcHVibGljIFBsYW4oaW50IHBsYW5faWQsIFN0cmluZyBuYW1lLCBsb25nIHByaWNlLCBpbnQgbWF4X3NwZWVkX2RvbWVzdGljLCBpbnQgbWF4X3NwZWVkX2ludGVybmF0aW9uYWwsIGludCBtaW5fc3BlZWRfZG9tZXN0aWMsIGludCBtaW5fc3BlZWRfaW50ZXJuYXRpb25hbCkge1xuICAgICAgICB0aGlzLnBsYW5faWQgPSBwbGFuX2lkO1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLnByaWNlID0gcHJpY2U7XG4gICAgICAgIHRoaXMubWF4X3NwZWVkX2RvbWVzdGljID0gbWF4X3NwZWVkX2RvbWVzdGljO1xuICAgICAgICB0aGlzLm1heF9zcGVlZF9pbnRlcm5hdGlvbmFsID0gbWF4X3NwZWVkX2ludGVybmF0aW9uYWw7XG4gICAgICAgIHRoaXMubWluX3NwZWVkX2RvbWVzdGljID0gbWluX3NwZWVkX2RvbWVzdGljO1xuICAgICAgICB0aGlzLm1pbl9zcGVlZF9pbnRlcm5hdGlvbmFsID0gbWluX3NwZWVkX2ludGVybmF0aW9uYWw7XG4gICAgfVxuXG4gICAgcHVibGljIGludCBnZXRQbGFuX2lkKCkge1xuICAgICAgICByZXR1cm4gcGxhbl9pZDtcbiAgICB9XG4uLi5cbiIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX0sIjZiMWM2NmIyLThiYTAtNDc5Yy04YTY5LTM2MjZlMTE0ZmE1MTt0b29sdV8wMUhhTVY1aGZ1VHppMTlvcW9vVnRnN3UiOnsicmVxdWVzdElkIjoiNmIxYzY2YjItOGJhMC00NzljLThhNjktMzYyNmUxMTRmYTUxIiwidG9vbFVzZUlkIjoidG9vbHVfMDFIYU1WNWhmdVR6aTE5b3Fvb1Z0Zzd1IiwicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiVGhlIGZvbGxvd2luZyBjb2RlIHNlY3Rpb25zIHdlcmUgcmV0cmlldmVkOlxuUGF0aDogc3JjL0RBTy9Vc2VyREFPLmphdmFcbi8qXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0xpY2Vuc2VzL2xpY2Vuc2UtZGVmYXVsdC50eHQgdG8gY2hhbmdlIHRoaXMgbGljZW5zZVxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NsYXNzLmphdmEgdG8gZWRpdCB0aGlzIHRlbXBsYXRlXG4gKi9cbnBhY2thZ2UgREFPO1xuXG5pbXBvcnQgTW9kZWwuVXNlcjtcbmltcG9ydCBqYXZhLnV0aWwuTGlzdDtcbmltcG9ydCBqYXZhLnNxbC5QcmVwYXJlZFN0YXRlbWVudDtcbmltcG9ydCBqYXZhLnNxbC5UaW1lc3RhbXA7XG5pbXBvcnQgREFPLkRiT3BlcmF0aW9ucy5TcWxPcGVyYXRpb247XG5pbXBvcnQgamF2YS5zcWwuUmVzdWx0U2V0O1xuLyoqXG4gKlxuICogQGF1dGhvciBOZ29jIFRoYW9cbiAqL1xucHVibGljIGNsYXNzIFVzZXJEQU97XG5cbiAgICBwdWJsaWMgc3RhdGljIHZvaWQgaW5zZXJ0KGZpbmFsIFVzZXIgb2JqKSB7XG4gICAgICAgIGZpbmFsIGludCB1c2VySWQgPSBEYk9wZXJhdGlvbnMuZ2V0TmV4dElkKFwiVVNFUlwiLCBcInVzZXJfaWRcIik7XG4gICAgICAgIFxuICAgICAgICBvYmouc2V0VXNlcl9pZCh1c2VySWQpO1xuICAgICAgICBcbiAgICAgICAgU3FsT3BlcmF0aW9uW10gb3BlcmF0aW9ucyA9IG5ldyBTcWxPcGVyYXRpb25bXSB7XG4gICAgICAgICAgICBuZXcgU3FsT3BlcmF0aW9uKCkge1xuICAgICAgICAgICAgICAgIEBPdmVycmlkZVxuICAgICAgICAgICAgICAgIHB1YmxpYyBTdHJpbmcgZ2V0U3FsKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJJTlNFUlQgSU5UTyBVU0VSKHVzZXJfaWQsIHVzZXJuYW1lLCBwYXNzd29yZCwgcm9sZSwgY3JlYXRlZF9hdCkgVkFMVUVTICg/LCA/LCA/LCA/LCA/KVwiO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIEBPdmVycmlkZVxuICAgICAgICAgICAgICAgIHB1YmxpYyB2b2lkIHNldFBhcmFtZXRlcnMoUHJlcGFyZWRTdGF0ZW1lbnQgcHMpIHRocm93cyBFeGNlcHRpb24ge1xuICAgICAgICAgICAgICAgICAgICBwcy5zZXRJbnQoMSwgdXNlcklkKTtcbiAgICAgICAgICAgICAgICAgICAgcHMuc2V0U3RyaW5nKDIsIG9iai5nZXRVc2VybmFtZSgpKTtcbiAgICAgICAgICAgICAgICAgICAgcHMuc2V0U3RyaW5nKDMsIG9iai5nZXRQYXNzd29yZCgpKTtcbiAgICAgICAgICAgICAgICAgICAgcHMuc2V0U3RyaW5nKDQsIG9iai5nZXRSb2xlKCkpO1xuICAgICAgICAgICAgICAgICAgICBwcy5zZXRUaW1lc3RhbXAoNSwgVGltZXN0YW1wLnZhbHVlT2Yob2JqLmdldENyZWF0ZV9hdCgpKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgRGJPcGVyYXRpb25zLmV4ZWN1dGVUcmFuc2FjdGlvbihvcGVyYXRpb25zLCBcIlRow6ptIHTDoGkga2hv4bqjbiB0aMOgbmggY8O0bmchXCIpO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgc3RhdGljIGJvb2xlYW4gbG9naW4oZmluYWwgU3RyaW5nIHVzZXJOYW1lLCBmaW5hbCBTdHJpbmcgcGFzc3dvcmQpIHtcbiAgICAgICAgVXNlciB1c2VyID0gbnVsbDtcbiAgICAgICAgYm9vbGVhbiBpc1ZhbGlkID0gZmFsc2U7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBSZXN1bHRTZXQgcnMgPSBEYk9wZXJhdGlvbnMuZ2V0RGF0YShcIlNFTEVDVCAqIEZST00gVVNFUiBXSEVSRSB1c2VybmFtZSA9ICdcIiArIHVzZXJOYW1lICsgXCInIGFuZCBwYXNzd29yZCA9ICdcIiArIHBhc3N3b3JkICtcIidcIik7XG4gICAgICAgICAgICB3aGlsZSAocnMubmV4dCgpKSB7XG4gICAgICAgICAgICAgICAgYm9vbGVhbiBpc0FjdGl2ZSA9IHJzLmdldEJvb2xlYW4oXCJpc0FjdGl2ZVwiKTtcbiAgICAgICAgICAgICAgICBpZiAoaXNBY3RpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgaXNWYWxpZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBleCkge1xuICAgICAgICAgICAgZXgucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgIH0gXG5cbiAgICAgICAgcmV0dXJuIGlzVmFsaWQ7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyB2b2lkIHVwZGF0ZShVc2VyIG9iaikge1xuICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oXCJOb3Qgc3VwcG9ydGVkIHlldC5cIik7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyB2b2lkIGRlbGV0ZShpbnQgaWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgVXNlciBnZXRCeUlkKGludCBpZCkge1xuICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oXCJOb3Qgc3VwcG9ydGVkIHlldC5cIik7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBMaXN0PFVzZXI+IGdldEFsbCgpIHtcbiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpO1xuICAgIH1cbiAgICBcbn1cbi4uLlxuUGF0aDogc3JjL0RBTy9TdWJzY3JpYmVyREFPLmphdmFcbi8qXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0xpY2Vuc2VzL2xpY2Vuc2UtZGVmYXVsdC50eHQgdG8gY2hhbmdlIHRoaXMgbGljZW5zZVxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NsYXNzLmphdmEgdG8gZWRpdCB0aGlzIHRlbXBsYXRlXG4gKi9cbnBhY2thZ2UgREFPO1xuXG5pbXBvcnQgTW9kZWwuU3Vic2NyaWJlcjtcbmltcG9ydCBqYXZhLnV0aWwuTGlzdDtcbmltcG9ydCBqYXZhLnNxbC5QcmVwYXJlZFN0YXRlbWVudDtcbmltcG9ydCBqYXZhLnNxbC5UaW1lc3RhbXA7XG5pbXBvcnQgREFPLkRiT3BlcmF0aW9ucy5TcWxPcGVyYXRpb247XG5cbi8qKlxuICpcbiAqIEBhdXRob3IgTmdvYyBUaGFvXG4gKi9cbnB1YmxpYyBjbGFzcyBTdWJzY3JpYmVyREFPe1xuXG4gICAgcHVibGljIHN0YXRpYyB2b2lkIGluc2VydChmaW5hbCBTdWJzY3JpYmVyIG9iaikge1xuICAgICAgICBmaW5hbCBpbnQgdXNlcklkID0gRGJPcGVyYXRpb25zLmdldE5leHRJZChcIlVTRVJcIiwgXCJ1c2VyX2lkXCIpO1xuICAgICAgICBmaW5hbCBpbnQgc3Vic2NyaWJlcklkID0gRGJPcGVyYXRpb25zLmdldE5leHRJZChcIlNVQlNDUklCRVJcIiwgXCJzdWJzY3JpYmVyX2lkXCIpO1xuXG4gICAgICAgIG9iai5zZXRVc2VyX2lkKHVzZXJJZCk7XG4gICAgICAgIG9iai5zZXRTdWJzY3JpYmVyX2lkKHN1YnNjcmliZXJJZCk7XG5cbiAgICAgICAgU3FsT3BlcmF0aW9uW10gb3BlcmF0aW9ucyA9IG5ldyBTcWxPcGVyYXRpb25bXSB7XG4gICAgICAgICAgICBuZXcgU3FsT3BlcmF0aW9uKCkge1xuICAgICAgICAgICAgICAgIEBPdmVycmlkZVxuICAgICAgICAgICAgICAgIHB1YmxpYyBTdHJpbmcgZ2V0U3FsKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJJTlNFUlQgSU5UTyBVU0VSKHVzZXJfaWQsIHVzZXJuYW1lLCBwYXNzd29yZCwgcm9sZSwgY3JlYXRlZF9hdCwgaXNBY3RpdmUpIFZBTFVFUyAoPywgPywgPywgPywgPywgPylcIjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBAT3ZlcnJpZGVcbiAgICAgICAgICAgICAgICBwdWJsaWMgdm9pZCBzZXRQYXJhbWV0ZXJzKFByZXBhcmVkU3RhdGVtZW50IHBzKSB0aHJvd3MgRXhjZXB0aW9uIHtcbiAgICAgICAgICAgICAgICAgICAgcHMuc2V0SW50KDEsIHVzZXJJZCk7XG4gICAgICAgICAgICAgICAgICAgIHBzLnNldFN0cmluZygyLCBvYmouZ2V0VXNlcm5hbWUoKSk7XG4gICAgICAgICAgICAgICAgICAgIHBzLnNldFN0cmluZygzLCBvYmouZ2V0UGFzc3dvcmQoKSk7XG4gICAgICAgICAgICAgICAgICAgIHBzLnNldFN0cmluZyg0LCBvYmouZ2V0Um9sZSgpKTtcbiAgICAgICAgICAgICAgICAgICAgcHMuc2V0VGltZXN0YW1wKDUsIFRpbWVzdGFtcC52YWx1ZU9mKG9iai5nZXRDcmVhdGVfYXQoKSkpO1xuICAgICAgICAgICAgICAgICAgICBwcy5zZXRCb29sZWFuKDYsIHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIG5ldyBTcWxPcGVyYXRpb24oKSB7XG4gICAgICAgICAgICAgICAgQE92ZXJyaWRlXG4gICAgICAgICAgICAgICAgcHVibGljIFN0cmluZyBnZXRTcWwoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIklOU0VSVCBJTlRPIFNVQlNDUklCRVIgKHN1YnNjcmliZXJfaWQsIG5hbWUsIGFkZHJlc3MsIHBob25lLCB1c2VyX2lkKSBWQUxVRVMgKD8sID8sID8sID8sID8pXCI7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgQE92ZXJyaWRlXG4gICAgICAgICAgICAgICAgcHVibGljIHZvaWQgc2V0UGFyYW1ldGVycyhQcmVwYXJlZFN0YXRlbWVudCBwcykgdGhyb3dzIEV4Y2VwdGlvbiB7XG4gICAgICAgICAgICAgICAgICAgIHBzLnNldEludCgxLCBzdWJzY3JpYmVySWQpO1xuICAgICAgICAgICAgICAgICAgICBwcy5zZXRTdHJpbmcoMiwgb2JqLmdldEZ1bGxOYW1lKCkpO1xuICAgICAgICAgICAgICAgICAgICBwcy5zZXRTdHJpbmcoMywgb2JqLmdldEFkZHJlc3MoKSk7XG4gICAgICAgICAgICAgICAgICAgIHBzLnNldFN0cmluZyg0LCBvYmouZ2V0UGhvbmUoKSk7XG4gICAgICAgICAgICAgICAgICAgIHBzLnNldEludCg1LCB1c2VySWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBEYk9wZXJhdGlvbnMuZXhlY3V0ZVRyYW5zYWN0aW9uKG9wZXJhdGlvbnMsIFwixJDEg25nIGvDvSB0aMOgbmggY8O0bmchXCIpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgdm9pZCB1cGRhdGUoU3Vic2NyaWJlciBvYmopIHtcbiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpOyAvLyBHZW5lcmF0ZWQgZnJvbSBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ29kZS9HZW5lcmF0ZWRNZXRob2RCb2R5XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyB2b2lkIGRlbGV0ZShpbnQgaWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpOyAvLyBHZW5lcmF0ZWQgZnJvbSBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ29kZS9HZW5lcmF0ZWRNZXRob2RCb2R5XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBTdWJzY3JpYmVyIGdldEJ5SWQoaW50IGlkKSB7XG4gICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbihcIk5vdCBzdXBwb3J0ZWQgeWV0LlwiKTsgLy8gR2VuZXJhdGVkIGZyb20gbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NvZGUvR2VuZXJhdGVkTWV0aG9kQm9keVxuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxTdWJzY3JpYmVyPiBnZXRBbGwoKSB7XG4gICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbihcIk5vdCBzdXBwb3J0ZWQgeWV0LlwiKTsgLy8gR2VuZXJhdGVkIGZyb20gbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NvZGUvR2VuZXJhdGVkTWV0aG9kQm9keVxuICAgIH1cblxuXG59XG4uLi5cblBhdGg6IHNyYy9EQU8vRGJPcGVyYXRpb25zLmphdmFcbnBhY2thZ2UgREFPO1xuXG5pbXBvcnQgamF2YS5zcWwuQ29ubmVjdGlvbjtcbmltcG9ydCBqYXZhLnNxbC5QcmVwYXJlZFN0YXRlbWVudDtcbmltcG9ydCBqYXZhLnNxbC5SZXN1bHRTZXQ7XG5pbXBvcnQgamF2YS5zcWwuU3RhdGVtZW50O1xuaW1wb3J0IGphdmF4LnN3aW5nLkpPcHRpb25QYW5lO1xuXG5wdWJsaWMgY2xhc3MgRGJPcGVyYXRpb25zIHtcbiAgICBwdWJsaWMgc3RhdGljIHZvaWQgc2V0RGF0YU9yRGVsZXRlKFN0cmluZyBxdWVyeSwgU3RyaW5nIG1zZykge1xuICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgICAgICBTdGF0ZW1lbnQgc3QgPSBudWxsO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29ubiA9IENvbm5lY3Rpb25Qcm92aWRlci5nZXRDb25uKCk7XG4gICAgICAgICAgICBzdCA9IGNvbm4uY3JlYXRlU3RhdGVtZW50KCk7XG4gICAgICAgICAgICBzdC5leGVjdXRlVXBkYXRlKHF1ZXJ5KTtcblxuICAgICAgICAgICAgaWYoIW1zZy5lcXVhbHMoXCJcIikpIHtcbiAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBtc2csIFwiTWVzc2FnZVwiLCBKT3B0aW9uUGFuZS5JTkZPUk1BVElPTl9NRVNTQUdFKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGV4KSB7XG4gICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBleCwgXCJNZXNzYWdlXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAoc3QgIT0gbnVsbCkgc3QuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICBpZiAoY29ubiAhPSBudWxsKSBjb25uLmNsb3NlKCk7XG4gICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcHVibGljIHN0YXRpYyBSZXN1bHRTZXQgZ2V0RGF0YShTdHJpbmcgcXVlcnkpe1xuICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgICAgICBTdGF0ZW1lbnQgc3QgPSBudWxsO1xuICAgICAgICBSZXN1bHRTZXQgcnMgPSBudWxsO1xuICAgICAgICBcbiAgICAgICAgdHJ5e1xuICAgICAgICAgICAgY29ubiA9IENvbm5lY3Rpb25Qcm92aWRlci5nZXRDb25uKCk7XG4gICAgICAgICAgICBzdCA9IGNvbm4uY3JlYXRlU3RhdGVtZW50KCk7XG4gICAgICAgICAgICBycyA9IHN0LmV4ZWN1dGVRdWVyeShxdWVyeSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJldHVybiBycztcbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGV4KXtcbiAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIGV4LCBcIk1lc3NhZ2VcIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfSBcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGludCBnZXROZXh0SWQoU3RyaW5nIHRhYmxlTmFtZSwgU3RyaW5nIGlkQ29sdW1uTmFtZSkge1xuICAgICAgICBpbnQgbmV4dElkID0gMTtcbiAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcbiAgICAgICAgU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuICAgICAgICBSZXN1bHRTZXQgcnMgPSBudWxsO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25uID0gQ29ubmVjdGlvblByb3ZpZGVyLmdldENvbm4oKTtcbiAgICAgICAgICAgIHN0bXQgPSBjb25uLmNyZWF0ZVN0YXRlbWVudCgpO1xuICAgICAgICAgICAgU3RyaW5nIHF1ZXJ5ID0gXCJTRUxFQ1QgTUFYKFwiICsgaWRDb2x1bW5OYW1lICsgXCIpIEFTIG1heF9pZCBGUk9NIFwiICsgdGFibGVOYW1lO1xuICAgICAgICAgICAgcnMgPSBzdG10LmV4ZWN1dGVRdWVyeShxdWVyeSk7XG5cbiAgICAgICAgICAgIGlmIChycy5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICBpbnQgbWF4SWQgPSBycy5nZXRJbnQoXCJtYXhfaWRcIik7XG4gICAgICAgICAgICAgICAgbmV4dElkID0gbWF4SWQgKyAxO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgZSwgXCJFcnJvclwiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKHJzICE9IG51bGwpIHJzLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgaWYgKHN0bXQgIT0gbnVsbCkgc3RtdC5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIGlmIChjb25uICE9IG51bGwpIGNvbm4uY2xvc2UoKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBuZXh0SWQ7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBib29sZWFuIGV4ZWN1dGVUcmFuc2FjdGlvbihTcWxPcGVyYXRpb25bXSBvcGVyYXRpb25zLCBTdHJpbmcgc3VjY2Vzc01zZykge1xuICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgICAgICBib29sZWFuIHN1Y2Nlc3MgPSBmYWxzZTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29ubiA9IENvbm5lY3Rpb25Qcm92aWRlci5nZXRDb25uKCk7XG4gICAgICAgICAgICBjb25uLnNldEF1dG9Db21taXQoZmFsc2UpO1xuXG4gICAgICAgICAgICBmb3IgKFNxbE9wZXJhdGlvbiBvcGVyYXRpb24gOiBvcGVyYXRpb25zKSB7XG4gICAgICAgICAgICAgICAgUHJlcGFyZWRTdGF0ZW1lbnQgcHMgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQob3BlcmF0aW9uLmdldFNxbCgpKTtcbiAgICAgICAgICAgICAgICBvcGVyYXRpb24uc2V0UGFyYW1ldGVycyhwcyk7XG4gICAgICAgICAgICAgICAgcHMuZXhlY3V0ZVVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgIHBzLmNsb3NlKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbm4uY29tbWl0KCk7XG4gICAgICAgICAgICBzdWNjZXNzID0gdHJ1ZTtcblxuICAgICAgICAgICAgaWYgKHN1Y2Nlc3NNc2cgIT0gbnVsbCAmJiAhc3VjY2Vzc01zZy5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBzdWNjZXNzTXNnLCBcIlRow6BuaCBjw7RuZ1wiLCBKT3B0aW9uUGFuZS5JTkZPUk1BVElPTl9NRVNTQUdFKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbm4gIT0gbnVsbCkgY29ubi5yb2xsYmFjaygpO1xuICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIHJvbGxiYWNrRXgpIHtcbiAgICAgICAgICAgICAgICByb2xsYmFja0V4LnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcIkVycm9yOiBcIiArIGUuZ2V0TWVzc2FnZSgpLCBcIkzhu5dpXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbm4gIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBjb25uLnNldEF1dG9Db21taXQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbm4uY2xvc2UoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc3VjY2VzcztcbiAgICB9XG5cbiAgICBwdWJsaWMgaW50ZXJmYWNlIFNxbE9wZXJhdGlvbiB7XG4gICAgICAgIFN0cmluZyBnZXRTcWwoKTtcbiAgICAgICAgdm9pZCBzZXRQYXJhbWV0ZXJzKFByZXBhcmVkU3RhdGVtZW50IHBzKSB0aHJvd3MgRXhjZXB0aW9uO1xuICAgIH1cbn1cbi4uLlxuUGF0aDogc3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vRm9yZ290UGFzc3dvcmQuamF2YVxuLi4uXG4gICAgXG4gICAgcHVibGljIGJvb2xlYW4gdmFsaWRhdGVQaG9uZSgpe1xuICAgICAgICBTdHJpbmcgcGhvbmUgPSB0eHRQaG9uZS5nZXRUZXh0KCk7XG4gICAgICAgIGlmKHBob25lLmxlbmd0aCgpICE9IDEwIHx8ICFwaG9uZS5tYXRjaGVzKHBob25lUGF0dGVybikpIHtcbiAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwiVnVpIGzDsm5nIG5o4bqtcCDEkcO6bmcgxJHhu4tuaCBk4bqhbmcgc+G7kSDEkWnhu4duIHRob+G6oWkhXCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyBib29sZWFuIHZhbGlkYXRlRmllbGRzKCl7XG4gICAgICAgIFN0cmluZyBwYXNzd29yZCA9IHR4dFBhc3N3b3JkLmdldFRleHQoKTtcbiAgICAgICAgU3RyaW5nIGNvbmZpcm1QYXNzd29yZCA9IHR4dENvbmZpcm1QYXNzd29yZC5nZXRUZXh0KCk7XG5cbiAgICAgICAgaWYocGFzc3dvcmQuaXNFbXB0eSgpIHx8IGNvbmZpcm1QYXNzd29yZC5pc0VtcHR5KCkpe1xuICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXCJWdWkgbMOybmcga2jDtG5nIGLhu48gdHLhu5FuZyFcIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4uLi5cblxuICAgICAgICBidG5DaGFuZ2Uuc2V0Rm9udChuZXcgamF2YS5hd3QuRm9udChcIkFyaWFsXCIsIDEsIDE0KSk7IC8vIE5PSTE4TlxuICAgICAgICBidG5DaGFuZ2Uuc2V0SWNvbihuZXcgamF2YXguc3dpbmcuSW1hZ2VJY29uKGdldENsYXNzKCkuZ2V0UmVzb3VyY2UoXCIvSW1hZ2VzL3Jlc2V0LXBhc3N3b3JkLnBuZ1wiKSkpOyAvLyBOT0kxOE5cbiAgICAgICAgYnRuQ2hhbmdlLnNldFRleHQoXCLEkOG7lWkgbeG6rXQga2jhuql1XCIpO1xuICAgICAgICBidG5DaGFuZ2Uuc2V0Q3Vyc29yKG5ldyBqYXZhLmF3dC5DdXJzb3IoamF2YS5hd3QuQ3Vyc29yLkhBTkRfQ1VSU09SKSk7XG5cbiAgICAgICAgYnRuRXhpdC5zZXRGb250KG5ldyBqYXZhLmF3dC5Gb250KFwiQXJpYWxcIiwgMSwgMTQpKTsgLy8gTk9JMThOXG4gICAgICAgIGJ0bkV4aXQuc2V0SWNvbihuZXcgamF2YXguc3dpbmcuSW1hZ2VJY29uKGdldENsYXNzKCkuZ2V0UmVzb3VyY2UoXCIvSW1hZ2VzL2xvZ291dC5wbmdcIikpKTsgLy8gTk9JMThOXG4gICAgICAgIGJ0bkV4aXQuc2V0VGV4dChcIlRob8OhdFwiKTtcbiAgICAgICAgYnRuRXhpdC5zZXRDdXJzb3IobmV3IGphdmEuYXd0LkN1cnNvcihqYXZhLmF3dC5DdXJzb3IuSEFORF9DVVJTT1IpKTtcbiAgICAgICAgYnRuRXhpdC5hZGRBY3Rpb25MaXN0ZW5lcihuZXcgamF2YS5hd3QuZXZlbnQuQWN0aW9uTGlzdGVuZXIoKSB7XG4gICAgICAgICAgICBwdWJsaWMgdm9pZCBhY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7XG4gICAgICAgICAgICAgICAgYnRuRXhpdEFjdGlvblBlcmZvcm1lZChldnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbi4uLlxuUGF0aDogc3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vTG9naW4uamF2YVxuLypcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvTGljZW5zZXMvbGljZW5zZS1kZWZhdWx0LnR4dCB0byBjaGFuZ2UgdGhpcyBsaWNlbnNlXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0dVSUZvcm1zL0pGcmFtZS5qYXZhIHRvIGVkaXQgdGhpcyB0ZW1wbGF0ZVxuICovXG5wYWNrYWdlIGludGVybmV0Lm1hbmdlbWVudC5zeXN0ZW07XG5cbmltcG9ydCBEQU8uVXNlckRBTztcbmltcG9ydCBNb2RlbC5Vc2VyO1xuaW1wb3J0IGphdmF4LnN3aW5nLkpPcHRpb25QYW5lO1xuXG4vKipcbiAqXG4gKiBAYXV0aG9yIE5nb2MgVGhhb1xuICovXG5wdWJsaWMgY2xhc3MgTG9naW4gZXh0ZW5kcyBqYXZheC5zd2luZy5KRnJhbWUge1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBuZXcgZm9ybSBMb2dpblxuICAgICAqL1xuICAgIHB1YmxpYyBMb2dpbigpIHtcbiAgICAgICAgaW5pdENvbXBvbmVudHMoKTtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIHZvaWQgY2xlYXIoKXtcbiAgICAgICAgdHh0VXNlck5hbWUuc2V0VGV4dChcIlwiKTtcbiAgICAgICAgdHh0UGFzc3dvcmQuc2V0VGV4dChcIlwiKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYm9vbGVhbiB2YWxpZGF0ZUZpZWxkcygpe1xuICAgICAgICBTdHJpbmcgdXNlck5hbWUgPSB0eHRVc2VyTmFtZS5nZXRUZXh0KCk7XG4gICAgICAgIFN0cmluZyBwYXNzd29yZCA9IHR4dFBhc3N3b3JkLmdldFRleHQoKTtcblxuICAgICAgICBpZih1c2VyTmFtZS5pc0VtcHR5KCkgfHwgcGFzc3dvcmQuaXNFbXB0eSgpKXtcbiAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwiVnVpIGzDsm5nIGtow7RuZyBi4buPIHRy4buRbmchXCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuLi4uXG5cbiAgICAgICAgYnRuRm9yZ290UGFzc3dvcmQuc2V0Rm9udChuZXcgamF2YS5hd3QuRm9udChcIkFyaWFsXCIsIDEsIDE0KSk7IC8vIE5PSTE4TlxuICAgICAgICBidG5Gb3Jnb3RQYXNzd29yZC5zZXRJY29uKG5ldyBqYXZheC5zd2luZy5JbWFnZUljb24oZ2V0Q2xhc3MoKS5nZXRSZXNvdXJjZShcIi9JbWFnZXMvcmVzZXQtcGFzc3dvcmQucG5nXCIpKSk7IC8vIE5PSTE4TlxuICAgICAgICBidG5Gb3Jnb3RQYXNzd29yZC5zZXRUZXh0KFwiUXXDqm4gbeG6rXQga2jhuql1P1wiKTtcbiAgICAgICAgYnRuRm9yZ290UGFzc3dvcmQuc2V0Q3Vyc29yKG5ldyBqYXZhLmF3dC5DdXJzb3IoamF2YS5hd3QuQ3Vyc29yLkhBTkRfQ1VSU09SKSk7XG4gICAgICAgIGJ0bkZvcmdvdFBhc3N3b3JkLnNldEhvcml6b250YWxBbGlnbm1lbnQoamF2YXguc3dpbmcuU3dpbmdDb25zdGFudHMuTEVGVCk7XG4gICAgICAgIGJ0bkZvcmdvdFBhc3N3b3JkLmFkZEFjdGlvbkxpc3RlbmVyKG5ldyBqYXZhLmF3dC5ldmVudC5BY3Rpb25MaXN0ZW5lcigpIHtcbiAgICAgICAgICAgIHB1YmxpYyB2b2lkIGFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHtcbiAgICAgICAgICAgICAgICBidG5Gb3Jnb3RQYXNzd29yZEFjdGlvblBlcmZvcm1lZChldnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbi4uLlxuXG4gICAgcHJpdmF0ZSB2b2lkIGJ0bkxvZ2luQWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkxvZ2luQWN0aW9uUGVyZm9ybWVkXG4gICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxuICAgICAgICBpZih2YWxpZGF0ZUZpZWxkcygpKSB7XG4gICAgICAgICAgICB0cnl7XG4gICAgICAgICAgICAgICAgU3RyaW5nIHVzZXJuYW1lID0gdHh0VXNlck5hbWUuZ2V0VGV4dCgpLnRyaW0oKTtcbiAgICAgICAgICAgICAgICBTdHJpbmcgcGFzc3dvcmQgPSB0eHRQYXNzd29yZC5nZXRUZXh0KCkudHJpbSgpO1xuICAgICAgICBcbiAgICAgICAgICAgICAgICBVc2VyIHVzZXIgPSBudWxsO1xuICAgICAgICAgICAgICAgIGJvb2xlYW4gaXNTdWNjZXNzID0gVXNlckRBTy5sb2dpbih1c2VybmFtZSwgcGFzc3dvcmQpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmKGlzU3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyh0aGlzLCBcIsSQxINuZyBuaOG6rXAgdGjDoG5oIGPDtG5nIVwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLklORk9STUFUSU9OX01FU1NBR0UpO1xuLy8gICAgICAgICAgICAgICAgICAgIG5ldyBNYWluRnJhbWUoKS5zZXRWaXNpYmxlKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyh0aGlzLCBcIlNhaSB0w6puIMSRxINuZyBuaOG6rXAgaG/hurdjIG3huq10IGto4bqpdS5cIiwgXCJM4buXaVwiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgICAgICAgICAgICAgICB9XG4uLi5cblBhdGg6IHNyYy9Nb2RlbC9Vc2VyLmphdmFcbi4uLlxuXG5pbXBvcnQgamF2YS50aW1lLkxvY2FsRGF0ZVRpbWU7XG4vKipcbiAqXG4gKiBAYXV0aG9yIE5nb2MgVGhhb1xuICovXG5wdWJsaWMgY2xhc3MgVXNlciB7XG4gICAgcHJpdmF0ZSBpbnQgdXNlcl9pZDtcbiAgICBwcml2YXRlIFN0cmluZyB1c2VybmFtZTtcbiAgICBwcml2YXRlIFN0cmluZyBwYXNzd29yZDtcbiAgICBwcml2YXRlIFN0cmluZyByb2xlO1xuICAgIHByaXZhdGUgTG9jYWxEYXRlVGltZSBjcmVhdGVfYXQ7XG4gICAgcHJpdmF0ZSBib29sZWFuIGlzQWN0aXZlO1xuXG4gICAgcHVibGljIFVzZXIoKSB7XG4gICAgfVxuXG4gICAgcHVibGljIFVzZXIoaW50IHVzZXJfaWQsIFN0cmluZyB1c2VybmFtZSwgU3RyaW5nIHBhc3N3b3JkLCBTdHJpbmcgcm9sZSwgTG9jYWxEYXRlVGltZSBjcmVhdGVfYXQsIGJvb2xlYW4gaXNBY3RpdmUpIHtcbiAgICAgICAgdGhpcy51c2VyX2lkID0gdXNlcl9pZDtcbiAgICAgICAgdGhpcy51c2VybmFtZSA9IHVzZXJuYW1lO1xuICAgICAgICB0aGlzLnBhc3N3b3JkID0gcGFzc3dvcmQ7XG4gICAgICAgIHRoaXMucm9sZSA9IHJvbGU7XG4gICAgICAgIHRoaXMuY3JlYXRlX2F0ID0gY3JlYXRlX2F0O1xuICAgICAgICB0aGlzLmlzQWN0aXZlID0gaXNBY3RpdmU7XG4gICAgfVxuXG4gICAgcHVibGljIGludCBnZXRVc2VyX2lkKCkge1xuICAgICAgICByZXR1cm4gdXNlcl9pZDtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXRVc2VyX2lkKGludCB1c2VyX2lkKSB7XG4gICAgICAgIHRoaXMudXNlcl9pZCA9IHVzZXJfaWQ7XG4gICAgfVxuXG4gICAgcHVibGljIFN0cmluZyBnZXRVc2VybmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHVzZXJuYW1lO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHNldFVzZXJuYW1lKFN0cmluZyB1c2VybmFtZSkge1xuICAgICAgICB0aGlzLnVzZXJuYW1lID0gdXNlcm5hbWU7XG4gICAgfVxuXG4gICAgcHVibGljIFN0cmluZyBnZXRQYXNzd29yZCgpIHtcbiAgICAgICAgcmV0dXJuIHBhc3N3b3JkO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHNldFBhc3N3b3JkKFN0cmluZyBwYXNzd29yZCkge1xuICAgICAgICB0aGlzLnBhc3N3b3JkID0gcGFzc3dvcmQ7XG4gICAgfVxuXG4gICAgcHVibGljIFN0cmluZyBnZXRSb2xlKCkge1xuICAgICAgICByZXR1cm4gcm9sZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXRSb2xlKFN0cmluZyByb2xlKSB7XG4gICAgICAgIHRoaXMucm9sZSA9IHJvbGU7XG4gICAgfVxuXG4gICAgcHVibGljIExvY2FsRGF0ZVRpbWUgZ2V0Q3JlYXRlX2F0KCkge1xuICAgICAgICByZXR1cm4gY3JlYXRlX2F0O1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHNldENyZWF0ZV9hdChMb2NhbERhdGVUaW1lIGNyZWF0ZV9hdCkge1xuICAgICAgICB0aGlzLmNyZWF0ZV9hdCA9IGNyZWF0ZV9hdDtcbiAgICB9XG5cbiAgICBwdWJsaWMgYm9vbGVhbiBpc0lzQWN0aXZlKCkge1xuICAgICAgICByZXR1cm4gaXNBY3RpdmU7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgc2V0SXNBY3RpdmUoYm9vbGVhbiBpc0FjdGl2ZSkge1xuICAgICAgICB0aGlzLmlzQWN0aXZlID0gaXNBY3RpdmU7XG4gICAgfVxuICAgIFxufVxuLi4uXG5QYXRoOiBzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9TaWduVXAuamF2YVxuLypcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvTGljZW5zZXMvbGljZW5zZS1kZWZhdWx0LnR4dCB0byBjaGFuZ2UgdGhpcyBsaWNlbnNlXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0dVSUZvcm1zL0pGcmFtZS5qYXZhIHRvIGVkaXQgdGhpcyB0ZW1wbGF0ZVxuICovXG5wYWNrYWdlIGludGVybmV0Lm1hbmdlbWVudC5zeXN0ZW07XG5cbmltcG9ydCBEQU8uU3Vic2NyaWJlckRBTztcbmltcG9ydCBNb2RlbC5TdWJzY3JpYmVyO1xuaW1wb3J0IGphdmEudGltZS5Mb2NhbERhdGVUaW1lO1xuaW1wb3J0IGphdmF4LnN3aW5nLkpPcHRpb25QYW5lO1xuXG4vKipcbiAqXG4gKiBAYXV0aG9yIE5nb2MgVGhhb1xuICovXG5wdWJsaWMgY2xhc3MgU2lnblVwIGV4dGVuZHMgamF2YXguc3dpbmcuSkZyYW1lIHtcblxuICAgIHB1YmxpYyBTdHJpbmcgcGhvbmVQYXR0ZXJuID0gXCJeWzAtOV0qJFwiO1xuICAgIHByaXZhdGUgU3RyaW5nIERFRkFVTFRfUk9MRSA9IFwidXNlclwiO1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgbmV3IGZvcm0gU2lnbkluXG4gICAgICovXG4gICAgcHVibGljIFNpZ25VcCgpIHtcbiAgICAgICAgaW5pdENvbXBvbmVudHMoKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBjbGVhcigpe1xuICAgICAgICB0eHROYW1lLnNldFRleHQoXCJcIik7XG4gICAgICAgIHR4dFVzZXJOYW1lLnNldFRleHQoXCJcIik7XG4gICAgICAgIHR4dFBhc3N3b3JkLnNldFRleHQoXCJcIik7XG4gICAgICAgIHR4dEFkZHJlc3Muc2V0VGV4dChcIlwiKTtcbiAgICAgICAgdHh0UGhvbmUuc2V0VGV4dChcIlwiKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYm9vbGVhbiB2YWxpZGF0ZUZpZWxkcygpe1xuICAgICAgICBTdHJpbmcgbmFtZSA9IHR4dE5hbWUuZ2V0VGV4dCgpO1xuICAgICAgICBTdHJpbmcgdXNlck5hbWUgPSB0eHRVc2VyTmFtZS5nZXRUZXh0KCk7XG4gICAgICAgIFN0cmluZyBwYXNzd29yZCA9IHR4dFBhc3N3b3JkLmdldFRleHQoKTtcbiAgICAgICAgU3RyaW5nIGFkZHJlc3MgPSB0eHRBZGRyZXNzLmdldFRleHQoKTtcbiAgICAgICAgU3RyaW5nIHBob25lID0gdHh0UGhvbmUuZ2V0VGV4dCgpO1xuXG4gICAgICAgIGlmKG5hbWUuaXNFbXB0eSgpIHx8IHVzZXJOYW1lLmlzRW1wdHkoKSB8fCBwYXNzd29yZC5pc0VtcHR5KCkgfHwgYWRkcmVzcy5pc0VtcHR5KCkgfHwgcGhvbmUuaXNFbXB0eSgpKXtcbiAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwiVnVpIGzDsm5nIGtow7RuZyBi4buPIHRy4buRbmchXCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZihwaG9uZS5sZW5ndGgoKSAhPSAxMCB8fCAhcGhvbmUubWF0Y2hlcyhwaG9uZVBhdHRlcm4pKSB7XG4gICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcIlZ1aSBsw7JuZyBuaOG6rXAgxJHDum5nIMSR4buLbmggZOG6oW5nIHPhu5EgxJFp4buHbiB0aG/huqFpIVwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbi4uLlxuUGF0aDogc3JjL01vZGVsL1N1YnNjcmliZXIuamF2YVxuLi4uXG5cbi8qKlxuICpcbiAqIEBhdXRob3IgTmdvYyBUaGFvXG4gKi9cbnB1YmxpYyBjbGFzcyBTdWJzY3JpYmVyIGV4dGVuZHMgVXNlciB7XG4gICAgcHJpdmF0ZSBpbnQgc3Vic2NyaWJlcl9pZDtcbiAgICBwcml2YXRlIFN0cmluZyBmdWxsTmFtZTtcbiAgICBwcml2YXRlIFN0cmluZyBhZGRyZXNzO1xuICAgIHByaXZhdGUgU3RyaW5nIHBob25lO1xuICAgIFxuICAgIHB1YmxpYyBTdWJzY3JpYmVyKCkge1xuICAgIH1cblxuICAgIHB1YmxpYyBTdWJzY3JpYmVyKGludCBzdWJzY3JpYmVyX2lkLCBTdHJpbmcgZnVsbE5hbWUsIFN0cmluZyBhZGRyZXNzLCBTdHJpbmcgcGhvbmUpIHtcbiAgICAgICAgdGhpcy5zdWJzY3JpYmVyX2lkID0gc3Vic2NyaWJlcl9pZDtcbiAgICAgICAgdGhpcy5mdWxsTmFtZSA9IGZ1bGxOYW1lO1xuICAgICAgICB0aGlzLmFkZHJlc3MgPSBhZGRyZXNzO1xuICAgICAgICB0aGlzLnBob25lID0gcGhvbmU7XG4gICAgfVxuXG4gICAgcHVibGljIFN1YnNjcmliZXIoaW50IHN1YnNjcmliZXJfaWQsIFN0cmluZyBmdWxsTmFtZSwgU3RyaW5nIGFkZHJlc3MsIFN0cmluZyBwaG9uZSwgaW50IHVzZXJfaWQsIFN0cmluZyB1c2VybmFtZSwgU3RyaW5nIHBhc3N3b3JkLCBTdHJpbmcgcm9sZSwgTG9jYWxEYXRlVGltZSBjcmVhdGVfYXQsIGJvb2xlYW4gaXNBY3RpdmUpIHtcbiAgICAgICAgc3VwZXIodXNlcl9pZCwgdXNlcm5hbWUsIHBhc3N3b3JkLCByb2xlLCBjcmVhdGVfYXQsIGlzQWN0aXZlKTtcbiAgICAgICAgdGhpcy5zdWJzY3JpYmVyX2lkID0gc3Vic2NyaWJlcl9pZDtcbiAgICAgICAgdGhpcy5mdWxsTmFtZSA9IGZ1bGxOYW1lO1xuICAgICAgICB0aGlzLmFkZHJlc3MgPSBhZGRyZXNzO1xuICAgICAgICB0aGlzLnBob25lID0gcGhvbmU7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyBpbnQgZ2V0U3Vic2NyaWJlcl9pZCgpIHtcbiAgICAgICAgcmV0dXJuIHN1YnNjcmliZXJfaWQ7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgc2V0U3Vic2NyaWJlcl9pZChpbnQgc3Vic2NyaWJlcl9pZCkge1xuICAgICAgICB0aGlzLnN1YnNjcmliZXJfaWQgPSBzdWJzY3JpYmVyX2lkO1xuICAgIH1cblxuICAgIHB1YmxpYyBTdHJpbmcgZ2V0RnVsbE5hbWUoKSB7XG4gICAgICAgIHJldHVybiBmdWxsTmFtZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXRGdWxsTmFtZShTdHJpbmcgZnVsbE5hbWUpIHtcbiAgICAgICAgdGhpcy5mdWxsTmFtZSA9IGZ1bGxOYW1lO1xuICAgIH1cblxuICAgIHB1YmxpYyBTdHJpbmcgZ2V0QWRkcmVzcygpIHtcbiAgICAgICAgcmV0dXJuIGFkZHJlc3M7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgc2V0QWRkcmVzcyhTdHJpbmcgYWRkcmVzcykge1xuICAgICAgICB0aGlzLmFkZHJlc3MgPSBhZGRyZXNzO1xuICAgIH1cblxuICAgIHB1YmxpYyBTdHJpbmcgZ2V0UGhvbmUoKSB7XG4gICAgICAgIHJldHVybiBwaG9uZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXRQaG9uZShTdHJpbmcgcGhvbmUpIHtcbiAgICAgICAgdGhpcy5waG9uZSA9IHBob25lO1xuICAgIH1cbiAgICBcbiAgICBcbn1cbi4uLlxuUGF0aDogc3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vRm9yZ290UGFzc3dvcmQuZm9ybVxuLi4uXG4gICAgPENvbXBvbmVudCBjbGFzcz1cImphdmF4LnN3aW5nLkpCdXR0b25cIiBuYW1lPVwiYnRuQ2hhbmdlXCI+XG4gICAgICA8UHJvcGVydGllcz5cbiAgICAgICAgPFByb3BlcnR5IG5hbWU9XCJmb250XCIgdHlwZT1cImphdmEuYXd0LkZvbnRcIiBlZGl0b3I9XCJvcmcubmV0YmVhbnMuYmVhbmluZm8uZWRpdG9ycy5Gb250RWRpdG9yXCI+XG4gICAgICAgICAgPEZvbnQgbmFtZT1cIkFyaWFsXCIgc2l6ZT1cIjE0XCIgc3R5bGU9XCIxXCIvPlxuICAgICAgICA8L1Byb3BlcnR5PlxuICAgICAgICA8UHJvcGVydHkgbmFtZT1cImljb25cIiB0eXBlPVwiamF2YXguc3dpbmcuSWNvblwiIGVkaXRvcj1cIm9yZy5uZXRiZWFucy5tb2R1bGVzLmZvcm0uZWRpdG9yczIuSWNvbkVkaXRvclwiPlxuICAgICAgICAgIDxJbWFnZSBpY29uVHlwZT1cIjNcIiBuYW1lPVwiL0ltYWdlcy9yZXNldC1wYXNzd29yZC5wbmdcIi8+XG4gICAgICAgIDwvUHJvcGVydHk+XG4gICAgICAgIDxQcm9wZXJ0eSBuYW1lPVwidGV4dFwiIHR5cGU9XCJqYXZhLmxhbmcuU3RyaW5nXCIgdmFsdWU9XCImI3gxMTA7JiN4MWVkNTtpIG0mI3gxZWFkO3Qga2gmI3gxZWE5O3VcIi8+XG4gICAgICAgIDxQcm9wZXJ0eSBuYW1lPVwiY3Vyc29yXCIgdHlwZT1cImphdmEuYXd0LkN1cnNvclwiIGVkaXRvcj1cIm9yZy5uZXRiZWFucy5tb2R1bGVzLmZvcm0uZWRpdG9yczIuQ3Vyc29yRWRpdG9yXCI+XG4gICAgICAgICAgPENvbG9yIGlkPVwiSGFuZCBDdXJzb3JcIi8+XG4gICAgICAgIDwvUHJvcGVydHk+XG4gICAgICA8L1Byb3BlcnRpZXM+XG4gICAgPC9Db21wb25lbnQ+XG4gICAgPENvbXBvbmVudCBjbGFzcz1cImphdmF4LnN3aW5nLkpCdXR0b25cIiBuYW1lPVwiYnRuRXhpdFwiPlxuICAgICAgPFByb3BlcnRpZXM+XG4uLi5cblBhdGg6IHNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL0xvZ2luLmZvcm1cbi4uLlxuICAgICAgPFByb3BlcnRpZXM+XG4gICAgICAgIDxQcm9wZXJ0eSBuYW1lPVwiZm9udFwiIHR5cGU9XCJqYXZhLmF3dC5Gb250XCIgZWRpdG9yPVwib3JnLm5ldGJlYW5zLmJlYW5pbmZvLmVkaXRvcnMuRm9udEVkaXRvclwiPlxuICAgICAgICAgIDxGb250IG5hbWU9XCJBcmlhbFwiIHNpemU9XCIxNFwiIHN0eWxlPVwiMVwiLz5cbiAgICAgICAgPC9Qcm9wZXJ0eT5cbiAgICAgICAgPFByb3BlcnR5IG5hbWU9XCJpY29uXCIgdHlwZT1cImphdmF4LnN3aW5nLkljb25cIiBlZGl0b3I9XCJvcmcubmV0YmVhbnMubW9kdWxlcy5mb3JtLmVkaXQuLi4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCI5NDE3MjIzYS00ZGZlLTQ0NGEtYmQ2ZC0zMjkxYjVkMWZiOTE7dG9vbHVfMDFMZXpvSHJVWGhMZ3ZDWUFheHptaGZIIjp7InJlcXVlc3RJZCI6Ijk0MTcyMjNhLTRkZmUtNDQ0YS1iZDZkLTMyOTFiNWQxZmI5MSIsInRvb2xVc2VJZCI6InRvb2x1XzAxTGV6b0hyVVhoTGd2Q1lBYXh6bWhmSCIsInBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IlRoZSBmb2xsb3dpbmcgY29kZSBzZWN0aW9ucyB3ZXJlIHJldHJpZXZlZDpcblBhdGg6IHNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL0ZvcmdvdFBhc3N3b3JkLmphdmFcbi8qXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0xpY2Vuc2VzL2xpY2Vuc2UtZGVmYXVsdC50eHQgdG8gY2hhbmdlIHRoaXMgbGljZW5zZVxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9HVUlGb3Jtcy9KRnJhbWUuamF2YSB0byBlZGl0IHRoaXMgdGVtcGxhdGVcbiAqL1xucGFja2FnZSBpbnRlcm5ldC5tYW5nZW1lbnQuc3lzdGVtO1xuXG5pbXBvcnQgamF2YXguc3dpbmcuSk9wdGlvblBhbmU7XG5cbi8qKlxuICpcbiAqIEBhdXRob3IgTmdvYyBUaGFvXG4gKi9cbnB1YmxpYyBjbGFzcyBGb3Jnb3RQYXNzd29yZCBleHRlbmRzIGphdmF4LnN3aW5nLkpGcmFtZSB7XG4gICAgcHVibGljIFN0cmluZyBwaG9uZVBhdHRlcm4gPSBcIl5bMC05XSokXCI7XG4gICAgXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBuZXcgZm9ybSBGb3Jnb3RQYXNzd29yZFxuICAgICAqL1xuICAgIHB1YmxpYyBGb3Jnb3RQYXNzd29yZCgpIHtcbiAgICAgICAgaW5pdENvbXBvbmVudHMoKTtcbiAgICAgICAgXG4gICAgICAgIGJ0bkV4aXQuc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgICAgIGJ0bkNoYW5nZS5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICAgICAgbGJOZXdQYXNzd29yZC5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICAgICAgbGJDb25maXJtUGFzc3dvcmQuc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgICAgIHR4dFBhc3N3b3JkLnNldFZpc2libGUoZmFsc2UpO1xuICAgICAgICB0eHRDb25maXJtUGFzc3dvcmQuc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgY2xlYXIoKXtcbiAgICAgICAgdHh0UGFzc3dvcmQuc2V0VGV4dChcIlwiKTtcbiAgICAgICAgdHh0UGhvbmUuc2V0VGV4dChcIlwiKTtcbiAgICAgICAgdHh0Q29uZmlybVBhc3N3b3JkLnNldFRleHQoXCJcIik7XG4gICAgICAgIFxuICAgICAgICBidG5FeGl0LnNldFZpc2libGUoZmFsc2UpO1xuICAgICAgICBidG5DaGFuZ2Uuc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgICAgIGxiTmV3UGFzc3dvcmQuc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgICAgIGxiQ29uZmlybVBhc3N3b3JkLnNldFZpc2libGUoZmFsc2UpO1xuICAgICAgICB0eHRQYXNzd29yZC5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICAgICAgdHh0Q29uZmlybVBhc3N3b3JkLnNldFZpc2libGUoZmFsc2UpO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgYm9vbGVhbiB2YWxpZGF0ZVBob25lKCl7XG4gICAgICAgIFN0cmluZyBwaG9uZSA9IHR4dFBob25lLmdldFRleHQoKTtcbiAgICAgICAgaWYocGhvbmUubGVuZ3RoKCkgIT0gMTAgfHwgIXBob25lLm1hdGNoZXMocGhvbmVQYXR0ZXJuKSkge1xuICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXCJWdWkgbMOybmcgbmjhuq1wIMSRw7puZyDEkeG7i25oIGThuqFuZyBz4buRIMSRaeG7h24gdGhv4bqhaSFcIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIGJvb2xlYW4gdmFsaWRhdGVGaWVsZHMoKXtcbiAgICAgICAgU3RyaW5nIHBhc3N3b3JkID0gdHh0UGFzc3dvcmQuZ2V0VGV4dCgpO1xuICAgICAgICBTdHJpbmcgY29uZmlybVBhc3N3b3JkID0gdHh0Q29uZmlybVBhc3N3b3JkLmdldFRleHQoKTtcblxuICAgICAgICBpZihwYXNzd29yZC5pc0VtcHR5KCkgfHwgY29uZmlybVBhc3N3b3JkLmlzRW1wdHkoKSl7XG4gICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcIlZ1aSBsw7JuZyBraMO0bmcgYuG7jyB0cuG7kW5nIVwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBjYWxsZWQgZnJvbSB3aXRoaW4gdGhlIGNvbnN0cnVjdG9yIHRvIGluaXRpYWxpemUgdGhlIGZvcm0uXG4gICAgICogV0FSTklORzogRG8gTk9UIG1vZGlmeSB0aGlzIGNvZGUuIFRoZSBjb250ZW50IG9mIHRoaXMgbWV0aG9kIGlzIGFsd2F5c1xuICAgICAqIHJlZ2VuZXJhdGVkIGJ5IHRoZSBGb3JtIEVkaXRvci5cbiAgICAgKi9cbiAgICBAU3VwcHJlc3NXYXJuaW5ncyhcInVuY2hlY2tlZFwiKVxuICAgIC8vIDxlZGl0b3ItZm9sZCBkZWZhdWx0c3RhdGU9XCJjb2xsYXBzZWRcIiBkZXNjPVwiR2VuZXJhdGVkIENvZGVcIj4vL0dFTi1CRUdJTjppbml0Q29tcG9uZW50c1xuICAgIHByaXZhdGUgdm9pZCBpbml0Q29tcG9uZW50cygpIHtcblxuICAgICAgICBqTGFiZWwxID0gbmV3IGphdmF4LnN3aW5nLkpMYWJlbCgpO1xuICAgICAgICBqTGFiZWwyID0gbmV3IGphdmF4LnN3aW5nLkpMYWJlbCgpO1xuICAgICAgICBsYk5ld1Bhc3N3b3JkID0gbmV3IGphdmF4LnN3aW5nLkpMYWJlbCgpO1xuICAgICAgICBsYkNvbmZpcm1QYXNzd29yZCA9IG5ldyBqYXZheC5zd2luZy5KTGFiZWwoKTtcbiAgICAgICAgalNlcGFyYXRvcjEgPSBuZXcgamF2YXguc3dpbmcuSlNlcGFyYXRvcigpO1xuICAgICAgICB0eHRQaG9uZSA9IG5ldyBqYXZheC5zd2luZy5KVGV4dEZpZWxkKCk7XG4gICAgICAgIGJ0bkNoZWNrID0gbmV3IGphdmF4LnN3aW5nLkpCdXR0b24oKTtcbiAgICAgICAgdHh0UGFzc3dvcmQgPSBuZXcgamF2YXguc3dpbmcuSlBhc3N3b3JkRmllbGQoKTtcbiAgICAgICAgdHh0Q29uZmlybVBhc3N3b3JkID0gbmV3IGphdmF4LnN3aW5nLkpQYXNzd29yZEZpZWxkKCk7XG4gICAgICAgIGJ0bkNoYW5nZSA9IG5ldyBqYXZheC5zd2luZy5KQnV0dG9uKCk7XG4gICAgICAgIGJ0bkV4aXQgPSBuZXcgamF2YXguc3dpbmcuSkJ1dHRvbigpO1xuXG4gICAgICAgIHNldERlZmF1bHRDbG9zZU9wZXJhdGlvbihqYXZheC5zd2luZy5XaW5kb3dDb25zdGFudHMuRVhJVF9PTl9DTE9TRSk7XG5cbiAgICAgICAgakxhYmVsMS5zZXRGb250KG5ldyBqYXZhLmF3dC5Gb250KFwiQXJpYWxcIiwgMSwgMzYpKTsgLy8gTk9JMThOXG4gICAgICAgIGpMYWJlbDEuc2V0Rm9yZWdyb3VuZChqYXZheC5zd2luZy5VSU1hbmFnZXIuZ2V0RGVmYXVsdHMoKS5nZXRDb2xvcihcIkFjdGlvbnMuWWVsbG93XCIpKTtcbiAgICAgICAgakxhYmVsMS5zZXRUZXh0KFwixJDhu5RJIE3huqxUIEtI4bqoVVwiKTtcblxuICAgICAgICBqTGFiZWwyLnNldEZvbnQobmV3IGphdmEuYXd0LkZvbnQoXCJBcmlhbFwiLCAxLCAxNCkpOyAvLyBOT0kxOE5cbiAgICAgICAgakxhYmVsMi5zZXRUZXh0KFwiU+G7kSDEkWnhu4duIHRob+G6oWk6IFwiKTtcblxuICAgICAgICBsYk5ld1Bhc3N3b3JkLnNldEZvbnQobmV3IGphdmEuYXd0LkZvbnQoXCJBcmlhbFwiLCAxLCAxNCkpOyAvLyBOT0kxOE5cbiAgICAgICAgbGJOZXdQYXNzd29yZC5zZXRUZXh0KFwiTeG6rXQga2jhuql1IG3hu5tpOlwiKTtcblxuICAgICAgICBsYkNvbmZpcm1QYXNzd29yZC5zZXRGb250KG5ldyBqYXZhLmF3dC5Gb250KFwiQXJpYWxcIiwgMSwgMTQpKTsgLy8gTk9JMThOXG4gICAgICAgIGxiQ29uZmlybVBhc3N3b3JkLnNldFRleHQoXCJYw6FjIG5o4bqtbiBt4bqtdCBraOG6qXU6XCIpO1xuXG4gICAgICAgIGJ0bkNoZWNrLnNldEZvbnQobmV3IGphdmEuYXd0LkZvbnQoXCJBcmlhbFwiLCAxLCAxNCkpOyAvLyBOT0kxOE5cbiAgICAgICAgYnRuQ2hlY2suc2V0SWNvbihuZXcgamF2YXguc3dpbmcuSW1hZ2VJY29uKGdldENsYXNzKCkuZ2V0UmVzb3VyY2UoXCIvSW1hZ2VzL3NlYXJjaC5wbmdcIikpKTsgLy8gTk9JMThOXG4gICAgICAgIGJ0bkNoZWNrLnNldFRleHQoXCJLaeG7g20gdHJhXCIpO1xuICAgICAgICBidG5DaGVjay5zZXRDdXJzb3IobmV3IGphdmEuYXd0LkN1cnNvcihqYXZhLmF3dC5DdXJzb3IuSEFORF9DVVJTT1IpKTtcblxuICAgICAgICBidG5DaGFuZ2Uuc2V0Rm9udChuZXcgamF2YS5hd3QuRm9udChcIkFyaWFsXCIsIDEsIDE0KSk7IC8vIE5PSTE4TlxuICAgICAgICBidG5DaGFuZ2Uuc2V0SWNvbihuZXcgamF2YXguc3dpbmcuSW1hZ2VJY29uKGdldENsYXNzKCkuZ2V0UmVzb3VyY2UoXCIvSW1hZ2VzL3Jlc2V0LXBhc3N3b3JkLnBuZ1wiKSkpOyAvLyBOT0kxOE5cbiAgICAgICAgYnRuQ2hhbmdlLnNldFRleHQoXCLEkOG7lWkgbeG6rXQga2jhuql1XCIpO1xuICAgICAgICBidG5DaGFuZ2Uuc2V0Q3Vyc29yKG5ldyBqYXZhLmF3dC5DdXJzb3IoamF2YS5hd3QuQ3Vyc29yLkhBTkRfQ1VSU09SKSk7XG5cbiAgICAgICAgYnRuRXhpdC5zZXRGb250KG5ldyBqYXZhLmF3dC5Gb250KFwiQXJpYWxcIiwgMSwgMTQpKTsgLy8gTk9JMThOXG4gICAgICAgIGJ0bkV4aXQuc2V0SWNvbihuZXcgamF2YXguc3dpbmcuSW1hZ2VJY29uKGdldENsYXNzKCkuZ2V0UmVzb3VyY2UoXCIvSW1hZ2VzL2xvZ291dC5wbmdcIikpKTsgLy8gTk9JMThOXG4gICAgICAgIGJ0bkV4aXQuc2V0VGV4dChcIlRob8OhdFwiKTtcbiAgICAgICAgYnRuRXhpdC5zZXRDdXJzb3IobmV3IGphdmEuYXd0LkN1cnNvcihqYXZhLmF3dC5DdXJzb3IuSEFORF9DVVJTT1IpKTtcbiAgICAgICAgYnRuRXhpdC5hZGRBY3Rpb25MaXN0ZW5lcihuZXcgamF2YS5hd3QuZXZlbnQuQWN0aW9uTGlzdGVuZXIoKSB7XG4gICAgICAgICAgICBwdWJsaWMgdm9pZCBhY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7XG4gICAgICAgICAgICAgICAgYnRuRXhpdEFjdGlvblBlcmZvcm1lZChldnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBqYXZheC5zd2luZy5Hcm91cExheW91dCBsYXlvdXQgPSBuZXcgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQoZ2V0Q29udGVudFBhbmUoKSk7XG4gICAgICAgIGdldENvbnRlbnRQYW5lKCkuc2V0TGF5b3V0KGxheW91dCk7XG4gICAgICAgIGxheW91dC5zZXRIb3Jpem9udGFsR3JvdXAoXG4gICAgICAgICAgICBsYXlvdXQuY3JlYXRlUGFyYWxsZWxHcm91cChqYXZheC5zd2luZy5Hcm91cExheW91dC5BbGlnbm1lbnQuTEVBRElORylcbiAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlU2VxdWVudGlhbEdyb3VwKClcbiAgICAgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVBhcmFsbGVsR3JvdXAoamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuQWxpZ25tZW50LkxFQURJTkcpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlU2VxdWVudGlhbEdyb3VwKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRHYXAoMTEwLCAxMTAsIDExMClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQoakxhYmVsMSkpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlU2VxdWVudGlhbEdyb3VwKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRHYXAoNjEsIDYxLCA2MSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQoalNlcGFyYXRvcjEsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFLCAzNzAsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFKSlcbiAgICAgICAgICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVTZXF1ZW50aWFsR3JvdXAoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZEdhcCg2MSwgNjEsIDYxKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChqTGFiZWwyKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZEdhcCg1NiwgNTYsIDU2KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudCh0eHRQaG9uZSwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUsIDIxMCwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUpKVxuICAgICAgICAgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVNlcXVlbnRpYWxHcm91cCgpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkR2FwKDYxLCA2MSwgNjEpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGxiTmV3UGFzc3dvcmQpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkR2FwKDU3LCA1NywgNTcpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVBhcmFsbGVsR3JvdXAoamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuQWxpZ25tZW50LkxFQURJTkcpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudCh0eHRQYXNzd29yZCwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUsIDIxMCwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVTZXF1ZW50aWFsR3JvdXAoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYWRkR2FwKDEwMiwgMTAyLCAxMDIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQoYnRuQ2hlY2spKSkpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlUGFyYWxsZWxHcm91cChqYXZheC5zd2luZy5Hcm91cExheW91dC5BbGlnbm1lbnQuVFJBSUxJTkcsIGZhbHNlKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVTZXF1ZW50aWFsR3JvdXAoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRHYXAoNjAsIDYwLCA2MClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGJ0bkV4aXQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFkZFByZWZlcnJlZEdhcChqYXZheC5zd2luZy5MYXlvdXRTdHlsZS5Db21wb25lbnRQbGFjZW1lbnQuUkVMQVRFRCwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuREVGQVVMVF9TSVpFLCBTaG9ydC5NQVhfVkFMVUUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChidG5DaGFuZ2UpKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVTZXF1ZW50aWFsR3JvdXAoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRHYXAoNjEsIDYxLCA2MSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGxiQ29uZmlybVBhc3N3b3JkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRHYXAoMTgsIDE4LCAxOClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KHR4dENvbmZpcm1QYXNzd29yZCwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUsIDIxMSwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUpKSkpXG4gICAgICAgICAgICAgICAgLmFkZEdhcCg2OSwgNjksIDY5KSlcbiAgICAgICAgKTtcbiAgICAgICAgbGF5b3V0LnNldFZlcnRpY2FsR3JvdXAoXG4gICAgICAgICAgICBsYXlvdXQuY3JlYXRlUGFyYWxsZWxHcm91cChqYXZheC5zd2luZy5Hcm91cExheW91dC5BbGlnbm1lbnQuTEVBRElORylcbiAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlU2VxdWVudGlhbEdyb3VwKClcbiAgICAgICAgICAgICAgICAuYWRkR2FwKDQwLCA0MCwgNDApXG4gICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChqTGFiZWwxKVxuICAgICAgICAgICAgICAgIC5hZGRHYXAoMTQsIDE0LCAxNClcbiAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGpTZXBhcmF0b3IxLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSwgMTAsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFKVxuICAgICAgICAgICAgICAgIC5hZGRHYXAoMTIsIDEyLCAxMilcbiAgICAgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVBhcmFsbGVsR3JvdXAoamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuQWxpZ25tZW50LkxFQURJTkcpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlU2VxdWVudGlhbEdyb3VwKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRHYXAoMywgMywgMylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQoakxhYmVsMikpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQodHh0UGhvbmUsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5ERUZBVUxUX1NJWkUsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFKSlcbiAgICAgICAgICAgICAgICAuYWRkR2FwKDE4LCAxOCwgMTgpXG4gICAgICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVQYXJhbGxlbEdyb3VwKGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LkFsaWdubWVudC5MRUFESU5HKVxuICAgICAgICAgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVNlcXVlbnRpYWxHcm91cCgpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkR2FwKDMsIDMsIDMpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGxiTmV3UGFzc3dvcmQpKVxuICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KHR4dFBhc3N3b3JkLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuREVGQVVMVF9TSVpFLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSlcbiAgICAgICAgICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVTZXF1ZW50aWFsR3JvdXAoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZEdhcCgyLCAyLCAyKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChidG5DaGVjaywgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUsIDMwLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSkpKVxuICAgICAgICAgICAgICAgIC5hZGRHYXAoOCwgOCwgOClcbiAgICAgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVBhcmFsbGVsR3JvdXAoamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuQWxpZ25tZW50LkxFQURJTkcpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlU2VxdWVudGlhbEdyb3VwKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRHYXAoMywgMywgMylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQobGJDb25maXJtUGFzc3dvcmQpKVxuICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KHR4dENvbmZpcm1QYXNzd29yZCwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LkRFRkFVTFRfU0laRSwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUpKVxuICAgICAgICAgICAgICAgIC5hZGRHYXAoMzAsIDMwLCAzMClcbiAgICAgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVBhcmFsbGVsR3JvdXAoamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuQWxpZ25tZW50LkJBU0VMSU5FKVxuICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGJ0bkV4aXQsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFLCAzMCwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQoYnRuQ2hhbmdlLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSwgMzAsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFKSkpXG4gICAgICAgICk7XG5cbiAgICAgICAgcGFjaygpO1xuICAgIH0vLyA8L2VkaXRvci1mb2xkPi8vR0VOLUVORDppbml0Q29tcG9uZW50c1xuXG4gICAgcHJpdmF0ZSB2b2lkIGJ0bkV4aXRBY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuRXhpdEFjdGlvblBlcmZvcm1lZFxuICAgICAgICAvLyBUT0RPIGFkZCB5b3VyIGhhbmRsaW5nIGNvZGUgaGVyZTpcbiAgICAgICAgaW50IHJlc3VsdCA9IEpPcHRpb25QYW5lLnNob3dDb25maXJtRGlhbG9nKG51bGwsIFwiQuG6oW4gY8OzIGNo4bqvYyBjaOG6r24gbXXhu5FuIHRob8OhdCBraMO0bmc/XCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuWUVTX05PX09QVElPTiwgSk9wdGlvblBhbmUuUVVFU1RJT05fTUVTU0FHRSk7XG4gICAgXG4gICAgICAgIGlmIChyZXN1bHQgPT0gSk9wdGlvblBhbmUuWUVTX09QVElPTikge1xuICAgICAgICAgICAgU3lzdGVtLmV4aXQoMCk7XG4gICAgICAgIH1cbiAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5FeGl0QWN0aW9uUGVyZm9ybWVkXG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gYXJncyB0aGUgY29tbWFuZCBsaW5lIGFyZ3VtZW50c1xuICAgICAqL1xuICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBtYWluKFN0cmluZyBhcmdzW10pIHtcbiAgICAgICAgLyogU2V0IHRoZSBOaW1idXMgbG9vayBhbmQgZmVlbCAqL1xuICAgICAgICAvLzxlZGl0b3ItZm9sZCBkZWZhdWx0c3RhdGU9XCJjb2xsYXBzZWRcIiBkZXNjPVwiIExvb2sgYW5kIGZlZWwgc2V0dGluZyBjb2RlIChvcHRpb25hbCkgXCI+XG4gICAgICAgIC8qIElmIE5pbWJ1cyAoaW50cm9kdWNlZCBpbiBKYXZhIFNFIDYpIGlzIG5vdCBhdmFpbGFibGUsIHN0YXkgd2l0aCB0aGUgZGVmYXVsdCBsb29rIGFuZCBmZWVsLlxuICAgICAgICAgKiBGb3IgZGV0YWlscyBzZWUgaHR0cDovL2Rvd25sb2FkLm9yYWNsZS5jb20vamF2YXNlL3R1dG9yaWFsL3Vpc3dpbmcvbG9va2FuZGZlZWwvcGxhZi5odG1sIFxuICAgICAgICAgKi9cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGZvciAoamF2YXguc3dpbmcuVUlNYW5hZ2VyLkxvb2tBbmRGZWVsSW5mbyBpbmZvIDogamF2YXguc3dpbmcuVUlNYW5hZ2VyLmdldEluc3RhbGxlZExvb2tBbmRGZWVscygpKSB7XG4gICAgICAgICAgICAgICAgaWYgKFwiTmltYnVzXCIuZXF1YWxzKGluZm8uZ2V0TmFtZSgpKSkge1xuICAgICAgICAgICAgICAgICAgICBqYXZheC5zd2luZy5VSU1hbmFnZXIuc2V0TG9va0FuZEZlZWwoaW5mby5nZXRDbGFzc05hbWUoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoQ2xhc3NOb3RGb3VuZEV4Y2VwdGlvbiBleCkge1xuICAgICAgICAgICAgamF2YS51dGlsLmxvZ2dpbmcuTG9nZ2VyLmdldExvZ2dlcihGb3Jnb3RQYXNzd29yZC5jbGFzcy5nZXROYW1lKCkpLmxvZyhqYXZhLnV0aWwubG9nZ2luZy5MZXZlbC5TRVZFUkUsIG51bGwsIGV4KTtcbiAgICAgICAgfSBjYXRjaCAoSW5zdGFudGlhdGlvbkV4Y2VwdGlvbiBleCkge1xuICAgICAgICAgICAgamF2YS51dGlsLmxvZ2dpbmcuTG9nZ2VyLmdldExvZ2dlcihGb3Jnb3RQYXNzd29yZC5jbGFzcy5nZXROYW1lKCkpLmxvZyhqYXZhLnV0aWwubG9nZ2luZy5MZXZlbC5TRVZFUkUsIG51bGwsIGV4KTtcbiAgICAgICAgfSBjYXRjaCAoSWxsZWdhbEFjY2Vzc0V4Y2VwdGlvbiBleCkge1xuICAgICAgICAgICAgamF2YS51dGlsLmxvZ2dpbmcuTG9nZ2VyLmdldExvZ2dlcihGb3Jnb3RQYXNzd29yZC5jbGFzcy5nZXROYW1lKCkpLmxvZyhqYXZhLnV0aWwubG9nZ2luZy5MZXZlbC5TRVZFUkUsIG51bGwsIGV4KTtcbiAgICAgICAgfSBjYXRjaCAoamF2YXguc3dpbmcuVW5zdXBwb3J0ZWRMb29rQW5kRmVlbEV4Y2VwdGlvbiBleCkge1xuICAgICAgICAgICAgamF2YS51dGlsLmxvZ2dpbmcuTG9nZ2VyLmdldExvZ2dlcihGb3Jnb3RQYXNzd29yZC5jbGFzcy5nZXROYW1lKCkpLmxvZyhqYXZhLnV0aWwubG9nZ2luZy5MZXZlbC5TRVZFUkUsIG51bGwsIGV4KTtcbiAgICAgICAgfVxuICAgICAgICAvLzwvZWRpdG9yLWZvbGQ+XG5cbiAgICAgICAgLyogQ3JlYXRlIGFuZCBkaXNwbGF5IHRoZSBmb3JtICovXG4gICAgICAgIGphdmEuYXd0LkV2ZW50UXVldWUuaW52b2tlTGF0ZXIobmV3IFJ1bm5hYmxlKCkge1xuICAgICAgICAgICAgcHVibGljIHZvaWQgcnVuKCkge1xuICAgICAgICAgICAgICAgIG5ldyBGb3Jnb3RQYXNzd29yZCgpLnNldFZpc2libGUodHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFZhcmlhYmxlcyBkZWNsYXJhdGlvbiAtIGRvIG5vdCBtb2RpZnkvL0dFTi1CRUdJTjp2YXJpYWJsZXNcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpCdXR0b24gYnRuQ2hhbmdlO1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkJ1dHRvbiBidG5DaGVjaztcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpCdXR0b24gYnRuRXhpdDtcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpMYWJlbCBqTGFiZWwxO1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkxhYmVsIGpMYWJlbDI7XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KU2VwYXJhdG9yIGpTZXBhcmF0b3IxO1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkxhYmVsIGxiQ29uZmlybVBhc3N3b3JkO1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkxhYmVsIGxiTmV3UGFzc3dvcmQ7XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KUGFzc3dvcmRGaWVsZCB0eHRDb25maXJtUGFzc3dvcmQ7XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KUGFzc3dvcmRGaWVsZCB0eHRQYXNzd29yZDtcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpUZXh0RmllbGQgdHh0UGhvbmU7XG4gICAgLy8gRW5kIG9mIHZhcmlhYmxlcyBkZWNsYXJhdGlvbi8vR0VOLUVORDp2YXJpYWJsZXNcbn1cbi4uLlxuUGF0aDogc3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vRm9yZ290UGFzc3dvcmQuZm9ybVxuPD94bWwgdmVyc2lvbj1cIjEuMFwiIGVuY29kaW5nPVwiVVRGLThcIiA/PlxuXG48Rm9ybSB2ZXJzaW9uPVwiMS4zXCIgbWF4VmVyc2lvbj1cIjEuOVwiIHR5cGU9XCJvcmcubmV0YmVhbnMubW9kdWxlcy5mb3JtLmZvcm1pbmZvLkpGcmFtZUZvcm1JbmZvXCI+XG4gIDxQcm9wZXJ0aWVzPlxuICAgIDxQcm9wZXJ0eSBuYW1lPVwiZGVmYXVsdENsb3NlT3BlcmF0aW9uXCIgdHlwZT1cImludFwiIHZhbHVlPVwiM1wiLz5cbiAgPC9Qcm9wZXJ0aWVzPlxuICA8U3ludGhldGljUHJvcGVydGllcz5cbiAgICA8U3ludGhldGljUHJvcGVydHkgbmFtZT1cImZvcm1TaXplUG9saWN5XCIgdHlwZT1cImludFwiIHZhbHVlPVwiMVwiLz5cbiAgICA8U3ludGhldGljUHJvcGVydHkgbmFtZT1cImdlbmVyYXRlQ2VudGVyXCIgdHlwZT1cImJvb2xlYW5cIiB2YWx1ZT1cImZhbHNlXCIvPlxuICA8L1N5bnRoZXRpY1Byb3BlcnRpZXM+XG4gIDxBdXhWYWx1ZXM+XG4gICAgPEF1eFZhbHVlIG5hbWU9XCJGb3JtU2V0dGluZ3NfYXV0b1Jlc291cmNpbmdcIiB0eXBlPVwiamF2YS5sYW5nLkludGVnZXJcIiB2YWx1ZT1cIjBcIi8+XG4gICAgPEF1eFZhbHVlIG5hbWU9XCJGb3JtU2V0dGluZ3NfYXV0b1NldENvbXBvbmVudE5hbWVcIiB0eXBlPVwiamF2YS5sYW5nLkJvb2xlYW5cIiB2YWx1ZT1cImZhbHNlXCIvPlxuICAgIDxBdXhWYWx1ZSBuYW1lPVwiRm9ybVNldHRpbmdzX2dlbmVyYXRlRlFOXCIgdHlwZT1cImphdmEubGFuZy5Cb29sZWFuXCIgdmFsdWU9XCJ0cnVlXCIvPlxuICAgIDxBdXhWYWx1ZSBuYW1lPVwiRm9ybVNldHRpbmdzX2dlbmVyYXRlTW5lbW9uaWNzQ29kZVwiIHR5cGU9XCJqYXZhLmxhbmcuQm9vbGVhblwiIHZhbHVlPVwiZmFsc2VcIi8+XG4uLi5cblxuICA8TGF5b3V0PlxuICAgIDxEaW1lbnNpb25MYXlvdXQgZGltPVwiMFwiPlxuICAgICAgPEdyb3VwIHR5cGU9XCIxMDNcIiBncm91cEFsaWdubWVudD1cIjBcIiBhdHRyaWJ1dGVzPVwiMFwiPlxuICAgICAgICAgIDxHcm91cCB0eXBlPVwiMTAyXCIgYXR0cmlidXRlcz1cIjBcIj5cbiAgICAgICAgICAgICAgPEdyb3VwIHR5cGU9XCIxMDNcIiBncm91cEFsaWdubWVudD1cIjBcIiBhdHRyaWJ1dGVzPVwiMFwiPlxuICAgICAgICAgICAgICAgICAgPEdyb3VwIHR5cGU9XCIxMDJcIiBhdHRyaWJ1dGVzPVwiMFwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxFbXB0eVNwYWNlIG1pbj1cIjExMFwiIHByZWY9XCIxMTBcIiBtYXg9XCItMlwiIGF0dHJpYnV0ZXM9XCIwXCIvPlxuICAgICAgICAgICAgICAgICAgICAgIDxDb21wb25lbnQgaWQ9XCJqTGFiZWwxXCIgbWluPVwiLTJcIiBtYXg9XCItMlwiIGF0dHJpYnV0ZXM9XCIwXCIvPlxuICAgICAgICAgICAgICAgICAgPC9Hcm91cD5cbiAgICAgICAgICAgICAgICAgIDxHcm91cCB0eXBlPVwiMTAyXCIgYXR0cmlidXRlcz1cIjBcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8RW1wdHlTcGFjZSBtaW49XCI2MVwiIHByZWY9XCI2MVwiIG1heD1cIi0yXCIgYXR0cmlidXRlcz1cIjBcIi8+XG4gICAgICAgICAgICAgICAgICAgICAgPENvbXBvbmVudCBpZD1cImpTZXBhcmF0b3IxXCIgbWluPVwiLTJcIiBwcmVmPVwiMzcwXCIgbWF4PVwiLTJcIiBhdHRyaWJ1dGVzPVwiMFwiLz5cbiAgICAgICAgICAgICAgICAgIDwvR3JvdXA+XG4gICAgICAgICAgICAgICAgICA8R3JvdXAgdHlwZT1cIjEwMlwiIGF0dHJpYnV0ZXM9XCIwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPEVtcHR5U3BhY2UgbWluPVwiNjFcIiBwcmVmPVwiNjFcIiBtYXg9XCItMlwiIGF0dHJpYnV0ZXM9XCIwXCIvPlxuICAgICAgICAgICAgICAgICAgICAgIDxDb21wb25lbnQgaWQ9XCJqTGFiZWwyXCIgbWluPVwiLTJcIiBtYXg9XCItMlwiIGF0dHJpYnV0ZXM9XCIwXCIvPlxuICAgICAgICAgICAgICAgICAgICAgIDxFbXB0eVNwYWNlIG1pbj1cIjU2XCIgcHJlZj1cIjU2XCIgbWF4PVwiLTJcIiBhdHRyaWJ1dGVzPVwiMFwiLz5cbi4uLlxuICAgICAgICAgICAgICA8R3JvdXAgdHlwZT1cIjEwM1wiIGdyb3VwQWxpZ25tZW50PVwiM1wiIGF0dHJpYnV0ZXM9XCIwXCI+XG4gICAgICAgICAgICAgICAgICA8Q29tcG9uZW50IGlkPVwiYnRuRXhpdFwiIGFsaWdubWVudD1cIjNcIiBtaW49XCItMlwiIHByZWY9XCIzMFwiIG1heD1cIi0yXCIgYXR0cmlidXRlcz1cIjBcIi8+XG4gICAgICAgICAgICAgICAgICA8Q29tcG9uZW50IGlkPVwiYnRuQ2hhbmdlXCIgYWxpZ25tZW50PVwiM1wiIG1pbj1cIi0yXCIgcHJlZj1cIjMwXCIgbWF4PVwiLTJcIiBhdHRyaWJ1dGVzPVwiMFwiLz5cbiAgICAgICAgICAgICAgPC9Hcm91cD5cbiAgICAgICAgICA8L0dyb3VwPlxuICAgICAgPC9Hcm91cD5cbiAgICA8L0RpbWVuc2lvbkxheW91dD5cbiAgPC9MYXlvdXQ+XG4gIDxTdWJDb21wb25lbnRzPlxuICAgIDxDb21wb25lbnQgY2xhc3M9XCJqYXZheC5zd2luZy5KTGFiZWxcIiBuYW1lPVwiakxhYmVsMVwiPlxuICAgICAgPFByb3BlcnRpZXM+XG4gICAgICAgIDxQcm9wZXJ0eSBuYW1lPVwiZm9udFwiIHR5cGU9XCJqYXZhLmF3dC5Gb250XCIgZWRpdG9yPVwib3JnLm5ldGJlYW5zLmJlYW5pbmZvLmVkaXRvcnMuRm9udEVkaXRvclwiPlxuICAgICAgICAgIDxGb250IG5hbWU9XCJBcmlhbFwiIHNpemU9XCIzNlwiIHN0eWxlPVwiMVwiLz5cbiAgICAgICAgPC9Qcm9wZXJ0eT5cbiAgICAgICAgPFByb3BlcnR5IG5hbWU9XCJmb3JlZ3JvdW5kXCIgdHlwZT1cImphdmEuYXd0LkNvbG9yXCIgZWRpdG9yPVwib3JnLm5ldGJlYW5zLmJlYW5pbmZvLmVkaXRvcnMuQ29sb3JFZGl0b3JcIj5cbiAgICAgICAgICA8Q29sb3IgYmx1ZT1cIjBcIiBncmVlbj1cImEyXCIgaWQ9XCJBY3Rpb25zLlllbGxvd1wiIHBhbGV0dGU9XCIzXCIgcmVkPVwiZWRcIiB0eXBlPVwicGFsZXR0ZVwiLz5cbiAgICAgICAgPC9Qcm9wZXJ0eT5cbiAgICAgICAgPFByb3BlcnR5IG5hbWU9XCJ0ZXh0XCIgdHlwZT1cImphdmEubGFuZy5TdHJpbmdcIiB2YWx1ZT1cIiYjeDExMDsmI3gxZWQ0O0kgTSYjeDFlYWM7VCBLSCYjeDFlYTg7VVwiLz5cbiAgICAgIDwvUHJvcGVydGllcz5cbiAgICA8L0NvbXBvbmVudD5cbiAgICA8Q29tcG9uZW50IGNsYXNzPVwiamF2YXguc3dpbmcuSkxhYmVsXCIgbmFtZT1cImpMYWJlbDJcIj5cbiAgICAgIDxQcm9wZXJ0aWVzPlxuICAgICAgICA8UHJvcGVydHkgbmFtZT1cImZvbnRcIiB0eXBlPVwiamF2YS5hd3QuRm9udFwiIGVkaXRvcj1cIm9yZy5uZXRiZWFucy5iZWFuaW5mby5lZGl0b3JzLkZvbnRFZGl0b3JcIj5cbiAgICAgICAgICA8Rm9udCBuYW1lPVwiQXJpYWxcIiBzaXplPVwiMTRcIiBzdHlsZT1cIjFcIi8+XG4gICAgICAgIDwvUHJvcGVydHk+XG4gICAgICAgIDxQcm9wZXJ0eSBuYW1lPVwidGV4dFwiIHR5cGU9XCJqYXZhLmxhbmcuU3RyaW5nXCIgdmFsdWU9XCJTJiN4MWVkMTsgJiN4MTExO2kmI3gxZWM3O24gdGhvJiN4MWVhMTtpOiBcIi8+XG4gICAgICA8L1Byb3BlcnRpZXM+XG4gICAgPC9Db21wb25lbnQ+XG4gICAgPENvbXBvbmVudCBjbGFzcz1cImphdmF4LnN3aW5nLkpMYWJlbFwiIG5hbWU9XCJsYk5ld1Bhc3N3b3JkXCI+XG4gICAgICA8UHJvcGVydGllcz5cbiAgICAgICAgPFByb3BlcnR5IG5hbWU9XCJmb250XCIgdHlwZT1cImphdmEuYXd0LkZvbnRcIiBlZGl0b3I9XCJvcmcubmV0YmVhbnMuYmVhbmluZm8uZWRpdG9ycy5Gb250RWRpdG9yXCI+XG4gICAgICAgICAgPEZvbnQgbmFtZT1cIkFyaWFsXCIgc2l6ZT1cIjE0XCIgc3R5bGU9XCIxXCIvPlxuICAgICAgICA8L1Byb3BlcnR5PlxuICAgICAgICA8UHJvcGVydHkgbmFtZT1cInRleHRcIiB0eXBlPVwiamF2YS5sYW5nLlN0cmluZ1wiIHZhbHVlPVwiTSYjeDFlYWQ7dCBraCYjeDFlYTk7dSBtJiN4MWVkYjtpOlwiLz5cbiAgICAgIDwvUHJvcGVydGllcz5cbiAgICA8L0NvbXBvbmVudD5cbiAgICA8Q29tcG9uZW50IGNsYXNzPVwiamF2YXguc3dpbmcuSkxhYmVsXCIgbmFtZT1cImxiQ29uZmlybVBhc3N3b3JkXCI+XG4gICAgICA8UHJvcGVydGllcz5cbiAgICAgICAgPFByb3BlcnR5IG5hbWU9XCJmb250XCIgdHlwZT1cImphdmEuYXd0LkZvbnRcIiBlZGl0b3I9XCJvcmcubmV0YmVhbnMuYmVhbmluZm8uZWRpdG9ycy5Gb250RWRpdG9yXCI+XG4gICAgICAgICAgPEZvbnQgbmFtZT1cIkFyaWFsXCIgc2l6ZT1cIjE0XCIgc3R5bGU9XCIxXCIvPlxuICAgICAgICA8L1Byb3BlcnR5PlxuICAgICAgICA8UHJvcGVydHkgbmFtZT1cInRleHRcIiB0eXBlPVwiamF2YS5sYW5nLlN0cmluZ1wiIHZhbHVlPVwiWCYjeGUxO2MgbmgmI3gxZWFkO24gbSYjeDFlYWQ7dCBraCYjeDFlYTk7dTpcIi8+XG4gICAgICA8L1Byb3BlcnRpZXM+XG4gICAgPC9Db21wb25lbnQ+XG4gICAgPENvbXBvbmVudCBjbGFzcz1cImphdmF4LnN3aW5nLkpTZXBhcmF0b3JcIiBuYW1lPVwialNlcGFyYXRvcjFcIj5cbiAgICA8L0NvbXBvbmVudD5cbiAgICA8Q29tcG9uZW50IGNsYXNzPVwiamF2YXguc3dpbmcuSlRleHRGaWVsZFwiIG5hbWU9XCJ0eHRQaG9uZVwiPlxuICAgIDwvQ29tcG9uZW50PlxuICAgIDxDb21wb25lbnQgY2xhc3M9XCJqYXZheC5zd2luZy5KQnV0dG9uXCIgbmFtZT1cImJ0bkNoZWNrXCI+XG4gICAgICA8UHJvcGVydGllcz5cbiAgICAgICAgPFByb3BlcnR5IG5hbWU9XCJmb250XCIgdHlwZT1cImphdmEuYXd0LkZvbnRcIiBlZGl0b3I9XCJvcmcubmV0YmVhbnMuYmVhbmluZm8uZWRpdG9ycy5Gb250RWRpdG9yXCI+XG4gICAgICAgICAgPEZvbnQgbmFtZT1cIkFyaWFsXCIgc2l6ZT1cIjE0XCIgc3R5bGU9XCIxXCIvPlxuICAgICAgICA8L1Byb3BlcnR5PlxuICAgICAgICA8UHJvcGVydHkgbmFtZT1cImljb25cIiB0eXBlPVwiamF2YXguc3dpbmcuSWNvblwiIGVkaXRvcj1cIm9yZy5uZXRiZWFucy5tb2R1bGVzLmZvcm0uZWRpdG9yczIuSWNvbkVkaXRvclwiPlxuICAgICAgICAgIDxJbWFnZSBpY29uVHlwZT1cIjNcIiBuYW1lPVwiL0ltYWdlcy9zZWFyY2gucG5nXCIvPlxuICAgICAgICA8L1Byb3BlcnR5PlxuICAgICAgICA8UHJvcGVydHkgbmFtZT1cInRleHRcIiB0eXBlPVwiamF2YS5sYW5nLlN0cmluZ1wiIHZhbHVlPVwiS2kmI3gxZWMzO20gdHJhXCIvPlxuICAgICAgICA8UHJvcGVydHkgbmFtZT1cImN1cnNvclwiIHR5cGU9XCJqYXZhLmF3dC5DdXJzb3JcIiBlZGl0b3I9XCJvcmcubmV0YmVhbnMubW9kdWxlcy5mb3JtLmVkaXRvcnMyLkN1cnNvckVkaXRvclwiPlxuICAgICAgICAgIDxDb2xvciBpZD1cIkhhbmQgQ3Vyc29yXCIvPlxuICAgICAgICA8L1Byb3BlcnR5PlxuICAgICAgPC9Qcm9wZXJ0aWVzPlxuICAgIDwvQ29tcG9uZW50PlxuICAgIDxDb21wb25lbnQgY2xhc3M9XCJqYXZheC5zd2luZy5KUGFzc3dvcmRGaWVsZFwiIG5hbWU9XCJ0eHRQYXNzd29yZFwiPlxuICAgIDwvQ29tcG9uZW50PlxuICAgIDxDb21wb25lbnQgY2xhc3M9XCJqYXZheC5zd2luZy5KUGFzc3dvcmRGaWVsZFwiIG5hbWU9XCJ0eHRDb25maXJtUGFzc3dvcmRcIj5cbiAgICA8L0NvbXBvbmVudD5cbi4uLlxuICAgICAgICA8UHJvcGVydHkgbmFtZT1cImZvbnRcIiB0eXBlPVwiamF2YS5hd3QuRm9udFwiIGVkaXRvcj1cIm9yZy5uZXRiZWFucy5iZWFuaW5mby5lZGl0b3JzLkZvbnRFZGl0b3JcIj5cbiAgICAgICAgICA8Rm9udCBuYW1lPVwiQXJpYWxcIiBzaXplPVwiMTRcIiBzdHlsZT1cIjFcIi8+XG4gICAgICAgIDwvUHJvcGVydHk+XG4gICAgICAgIDxQcm9wZXJ0eSBuYW1lPVwiaWNvblwiIHR5cGU9XCJqYXZheC5zd2luZy5JY29uXCIgZWRpdG9yPVwib3JnLm5ldGJlYW5zLm1vZHVsZXMuZm9ybS5lZGl0b3JzMi5JY29uRWRpdG9yXCI+XG4gICAgICAgICAgPEltYWdlIGljb25UeXBlPVwiM1wiIG5hbWU9XCIvSW1hZ2VzL2xvZ291dC5wbmdcIi8+XG4gICAgICAgIDwvUHJvcGVydHk+XG4gICAgICAgIDxQcm9wZXJ0eSBuYW1lPVwidGV4dFwiIHR5cGU9XCJqYXZhLmxhbmcuU3RyaW5nXCIgdmFsdWU9XCJUaG8mI3hlMTt0XCIvPlxuICAgICAgICA8UHJvcGVydHkgbmFtZT1cImN1cnNvclwiIHR5cGU9XCJqYXZhLmF3dC5DdXJzb3JcIiBlZGl0b3I9XCJvcmcubmV0YmVhbnMubW9kdWxlcy5mb3JtLmVkaXRvcnMyLkN1cnNvckVkaXRvclwiPlxuICAgICAgICAgIDxDb2xvciBpZD1cIkhhbmQgQ3Vyc29yXCIvPlxuICAgICAgICA8L1Byb3BlcnR5PlxuICAgICAgPC9Qcm9wZXJ0aWVzPlxuICAgICAgPEV2ZW50cz5cbiAgICAgICAgPEV2ZW50SGFuZGxlciBldmVudD1cImFjdGlvblBlcmZvcm1lZFwiIGxpc3RlbmVyPVwiamF2YS5hd3QuZXZlbnQuQWN0aW9uTGlzdGVuZXJcIiBwYXJhbWV0ZXJzPVwiamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnRcIiBoYW5kbGVyPVwiYnRuRXhpdEFjdGlvblBlcmZvcm1lZFwiLz5cbiAgICAgIDwvRXZlbnRzPlxuICAgIDwvQ29tcG9uZW50PlxuICA8L1N1YkNvbXBvbmVudHM+XG48L0Zvcm0+XG4uLi5cblBhdGg6IHNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL1NpZ25VcC5qYXZhXG4vKlxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9MaWNlbnNlcy9saWNlbnNlLWRlZmF1bHQudHh0IHRvIGNoYW5nZSB0aGlzIGxpY2Vuc2VcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvR1VJRm9ybXMvSkZyYW1lLmphdmEgdG8gZWRpdCB0aGlzIHRlbXBsYXRlXG4gKi9cbnBhY2thZ2UgaW50ZXJuZXQubWFuZ2VtZW50LnN5c3RlbTtcblxuaW1wb3J0IERBTy5TdWJzY3JpYmVyREFPO1xuaW1wb3J0IE1vZGVsLlN1YnNjcmliZXI7XG5pbXBvcnQgamF2YS50aW1lLkxvY2FsRGF0ZVRpbWU7XG5pbXBvcnQgamF2YXguc3dpbmcuSk9wdGlvblBhbmU7XG5cbi8qKlxuICpcbiAqIEBhdXRob3IgTmdvYyBUaGFvXG4gKi9cbnB1YmxpYyBjbGFzcyBTaWduVXAgZXh0ZW5kcyBqYXZheC5zd2luZy5KRnJhbWUge1xuXG4gICAgcHVibGljIFN0cmluZyBwaG9uZVBhdHRlcm4gPSBcIl5bMC05XSokXCI7XG4gICAgcHJpdmF0ZSBTdHJpbmcgREVGQVVMVF9ST0xFID0gXCJ1c2VyXCI7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBuZXcgZm9ybSBTaWduSW5cbiAgICAgKi9cbiAgICBwdWJsaWMgU2lnblVwKCkge1xuICAgICAgICBpbml0Q29tcG9uZW50cygpO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIGNsZWFyKCl7XG4gICAgICAgIHR4dE5hbWUuc2V0VGV4dChcIlwiKTtcbiAgICAgICAgdHh0VXNlck5hbWUuc2V0VGV4dChcIlwiKTtcbiAgICAgICAgdHh0UGFzc3dvcmQuc2V0VGV4dChcIlwiKTtcbiAgICAgICAgdHh0QWRkcmVzcy5zZXRUZXh0KFwiXCIpO1xuICAgICAgICB0eHRQaG9uZS5zZXRUZXh0KFwiXCIpO1xuICAgIH1cbi4uLlxuIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiZmMzYzFhZDgtNGY5My00YzBmLTljZmYtYzcxMWI3Mzk0MTc4O3Rvb2x1XzAxNzFzU0xtb1loZ2h3Mm5SMnhKNUZmRCI6eyJyZXF1ZXN0SWQiOiJmYzNjMWFkOC00ZjkzLTRjMGYtOWNmZi1jNzExYjczOTQxNzgiLCJ0b29sVXNlSWQiOiJ0b29sdV8wMTcxc1NMbW9ZaGdodzJuUjJ4SjVGZkQiLCJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJIZXJlJ3MgdGhlIHJlc3VsdCBvZiBydW5uaW5nIGBjYXQgLW5gIG9uIHNyYy9EQU8vU3Vic2NyaWJlckRBTy5qYXZhOlxuICAgICAxXHQvKlxuICAgICAyXHQgKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0xpY2Vuc2VzL2xpY2Vuc2UtZGVmYXVsdC50eHQgdG8gY2hhbmdlIHRoaXMgbGljZW5zZVxuICAgICAzXHQgKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ2xhc3MuamF2YSB0byBlZGl0IHRoaXMgdGVtcGxhdGVcbiAgICAgNFx0ICovXG4gICAgIDVcdHBhY2thZ2UgREFPO1xuICAgICA2XHRcbiAgICAgN1x0aW1wb3J0IE1vZGVsLlN1YnNjcmliZXI7XG4gICAgIDhcdGltcG9ydCBqYXZhLnV0aWwuTGlzdDtcbiAgICAgOVx0aW1wb3J0IGphdmEuc3FsLlByZXBhcmVkU3RhdGVtZW50O1xuICAgIDEwXHRpbXBvcnQgamF2YS5zcWwuVGltZXN0YW1wO1xuICAgIDExXHRpbXBvcnQgREFPLkRiT3BlcmF0aW9ucy5TcWxPcGVyYXRpb247XG4gICAgMTJcdFxuICAgIDEzXHQvKipcbiAgICAxNFx0ICpcbiAgICAxNVx0ICogQGF1dGhvciBOZ29jIFRoYW9cbiAgICAxNlx0ICovXG4gICAgMTdcdHB1YmxpYyBjbGFzcyBTdWJzY3JpYmVyREFPe1xuICAgIDE4XHRcbiAgICAxOVx0ICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBpbnNlcnQoZmluYWwgU3Vic2NyaWJlciBvYmopIHtcbiAgICAyMFx0ICAgICAgICBmaW5hbCBpbnQgdXNlcklkID0gRGJPcGVyYXRpb25zLmdldE5leHRJZChcIlVTRVJcIiwgXCJ1c2VyX2lkXCIpO1xuICAgIDIxXHQgICAgICAgIGZpbmFsIGludCBzdWJzY3JpYmVySWQgPSBEYk9wZXJhdGlvbnMuZ2V0TmV4dElkKFwiU1VCU0NSSUJFUlwiLCBcInN1YnNjcmliZXJfaWRcIik7XG4gICAgMjJcdFxuICAgIDIzXHQgICAgICAgIG9iai5zZXRVc2VyX2lkKHVzZXJJZCk7XG4gICAgMjRcdCAgICAgICAgb2JqLnNldFN1YnNjcmliZXJfaWQoc3Vic2NyaWJlcklkKTtcbiAgICAyNVx0XG4gICAgMjZcdCAgICAgICAgU3FsT3BlcmF0aW9uW10gb3BlcmF0aW9ucyA9IG5ldyBTcWxPcGVyYXRpb25bXSB7XG4gICAgMjdcdCAgICAgICAgICAgIG5ldyBTcWxPcGVyYXRpb24oKSB7XG4gICAgMjhcdCAgICAgICAgICAgICAgICBAT3ZlcnJpZGVcbiAgICAyOVx0ICAgICAgICAgICAgICAgIHB1YmxpYyBTdHJpbmcgZ2V0U3FsKCkge1xuICAgIDMwXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiBcIklOU0VSVCBJTlRPIFVTRVIodXNlcl9pZCwgdXNlcm5hbWUsIHBhc3N3b3JkLCByb2xlLCBjcmVhdGVkX2F0LCBpc0FjdGl2ZSkgVkFMVUVTICg/LCA/LCA/LCA/LCA/LCA/KVwiO1xuICAgIDMxXHQgICAgICAgICAgICAgICAgfVxuICAgIDMyXHRcbiAgICAzM1x0ICAgICAgICAgICAgICAgIEBPdmVycmlkZVxuICAgIDM0XHQgICAgICAgICAgICAgICAgcHVibGljIHZvaWQgc2V0UGFyYW1ldGVycyhQcmVwYXJlZFN0YXRlbWVudCBwcykgdGhyb3dzIEV4Y2VwdGlvbiB7XG4gICAgMzVcdCAgICAgICAgICAgICAgICAgICAgcHMuc2V0SW50KDEsIHVzZXJJZCk7XG4gICAgMzZcdCAgICAgICAgICAgICAgICAgICAgcHMuc2V0U3RyaW5nKDIsIG9iai5nZXRVc2VybmFtZSgpKTtcbiAgICAzN1x0ICAgICAgICAgICAgICAgICAgICBwcy5zZXRTdHJpbmcoMywgb2JqLmdldFBhc3N3b3JkKCkpO1xuICAgIDM4XHQgICAgICAgICAgICAgICAgICAgIHBzLnNldFN0cmluZyg0LCBvYmouZ2V0Um9sZSgpKTtcbiAgICAzOVx0ICAgICAgICAgICAgICAgICAgICBwcy5zZXRUaW1lc3RhbXAoNSwgVGltZXN0YW1wLnZhbHVlT2Yob2JqLmdldENyZWF0ZV9hdCgpKSk7XG4gICAgNDBcdCAgICAgICAgICAgICAgICAgICAgcHMuc2V0Qm9vbGVhbig2LCB0cnVlKTtcbiAgICA0MVx0ICAgICAgICAgICAgICAgIH1cbiAgICA0Mlx0ICAgICAgICAgICAgfSxcbiAgICA0M1x0XG4gICAgNDRcdCAgICAgICAgICAgIG5ldyBTcWxPcGVyYXRpb24oKSB7XG4gICAgNDVcdCAgICAgICAgICAgICAgICBAT3ZlcnJpZGVcbiAgICA0Nlx0ICAgICAgICAgICAgICAgIHB1YmxpYyBTdHJpbmcgZ2V0U3FsKCkge1xuICAgIDQ3XHQgICAgICAgICAgICAgICAgICAgIHJldHVybiBcIklOU0VSVCBJTlRPIFNVQlNDUklCRVIgKHN1YnNjcmliZXJfaWQsIG5hbWUsIGFkZHJlc3MsIHBob25lLCB1c2VyX2lkKSBWQUxVRVMgKD8sID8sID8sID8sID8pXCI7XG4gICAgNDhcdCAgICAgICAgICAgICAgICB9XG4gICAgNDlcdFxuICAgIDUwXHQgICAgICAgICAgICAgICAgQE92ZXJyaWRlXG4gICAgNTFcdCAgICAgICAgICAgICAgICBwdWJsaWMgdm9pZCBzZXRQYXJhbWV0ZXJzKFByZXBhcmVkU3RhdGVtZW50IHBzKSB0aHJvd3MgRXhjZXB0aW9uIHtcbiAgICA1Mlx0ICAgICAgICAgICAgICAgICAgICBwcy5zZXRJbnQoMSwgc3Vic2NyaWJlcklkKTtcbiAgICA1M1x0ICAgICAgICAgICAgICAgICAgICBwcy5zZXRTdHJpbmcoMiwgb2JqLmdldEZ1bGxOYW1lKCkpO1xuICAgIDU0XHQgICAgICAgICAgICAgICAgICAgIHBzLnNldFN0cmluZygzLCBvYmouZ2V0QWRkcmVzcygpKTtcbiAgICA1NVx0ICAgICAgICAgICAgICAgICAgICBwcy5zZXRTdHJpbmcoNCwgb2JqLmdldFBob25lKCkpO1xuICAgIDU2XHQgICAgICAgICAgICAgICAgICAgIHBzLnNldEludCg1LCB1c2VySWQpO1xuICAgIDU3XHQgICAgICAgICAgICAgICAgfVxuICAgIDU4XHQgICAgICAgICAgICB9XG4gICAgNTlcdCAgICAgICAgfTtcbiAgICA2MFx0XG4gICAgNjFcdCAgICAgICAgRGJPcGVyYXRpb25zLmV4ZWN1dGVUcmFuc2FjdGlvbihvcGVyYXRpb25zLCBcIsSQxINuZyBrw70gdGjDoG5oIGPDtG5nIVwiKTtcbiAgICA2Mlx0ICAgIH1cbiAgICA2M1x0XG4gICAgNjRcdCAgICBwdWJsaWMgc3RhdGljIHZvaWQgdXBkYXRlKFN1YnNjcmliZXIgb2JqKSB7XG4gICAgNjVcdCAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpOyAvLyBHZW5lcmF0ZWQgZnJvbSBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ29kZS9HZW5lcmF0ZWRNZXRob2RCb2R5XG4gICAgNjZcdCAgICB9XG4gICAgNjdcdFxuICAgIDY4XHQgICAgcHVibGljIHN0YXRpYyB2b2lkIGRlbGV0ZShpbnQgaWQpIHtcbiAgICA2OVx0ICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oXCJOb3Qgc3VwcG9ydGVkIHlldC5cIik7IC8vIEdlbmVyYXRlZCBmcm9tIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9Db2RlL0dlbmVyYXRlZE1ldGhvZEJvZHlcbiAgICA3MFx0ICAgIH1cbiAgICA3MVx0XG4gICAgNzJcdCAgICBwdWJsaWMgc3RhdGljIFN1YnNjcmliZXIgZ2V0QnlJZChpbnQgaWQpIHtcbiAgICA3M1x0ICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oXCJOb3Qgc3VwcG9ydGVkIHlldC5cIik7IC8vIEdlbmVyYXRlZCBmcm9tIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9Db2RlL0dlbmVyYXRlZE1ldGhvZEJvZHlcbiAgICA3NFx0ICAgIH1cbiAgICA3NVx0XG4gICAgNzZcdCAgICBwdWJsaWMgc3RhdGljIExpc3Q8U3Vic2NyaWJlcj4gZ2V0QWxsKCkge1xuICAgIDc3XHQgICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbihcIk5vdCBzdXBwb3J0ZWQgeWV0LlwiKTsgLy8gR2VuZXJhdGVkIGZyb20gbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NvZGUvR2VuZXJhdGVkTWV0aG9kQm9keVxuICAgIDc4XHQgICAgfVxuICAgIDc5XHRcbiAgICA4MFx0XG4gICAgODFcdH1cbiAgICA4Mlx0XG5Ub3RhbCBsaW5lcyBpbiBmaWxlOiA4MlxuIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiN2U3MmFiMDItMTc0Mi00ZmU2LTliODMtZGFkNDViNzJiMmE1O3Rvb2x1XzAxNldhNjhWWjFueWhTb2c3UWpyRVhacCI6eyJyZXF1ZXN0SWQiOiI3ZTcyYWIwMi0xNzQyLTRmZTYtOWI4My1kYWQ0NWI3MmIyYTUiLCJ0b29sVXNlSWQiOiJ0b29sdV8wMTZXYTY4VloxbnloU29nN1FqckVYWnAiLCJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJTdWNjZXNzZnVsbHkgZWRpdGVkIHRoZSBmaWxlIHNyYy9EQU8vU3Vic2NyaWJlckRBTy5qYXZhLlxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZSBmb3IgZW50cnkgd2l0aCBpbmRleCBbMF06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgICAgM1x0ICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NsYXNzLmphdmEgdG8gZWRpdCB0aGlzIHRlbXBsYXRlXG4gICAgIDRcdCAqL1xuICAgICA1XHRwYWNrYWdlIERBTztcbiAgICAgNlx0XG4gICAgIDdcdGltcG9ydCBNb2RlbC5TdWJzY3JpYmVyO1xuICAgICA4XHRpbXBvcnQgamF2YS51dGlsLkxpc3Q7XG4gICAgIDlcdGltcG9ydCBqYXZhLnNxbC5QcmVwYXJlZFN0YXRlbWVudDtcbiAgICAxMFx0aW1wb3J0IGphdmEuc3FsLlJlc3VsdFNldDtcbiAgICAxMVx0aW1wb3J0IGphdmEuc3FsLlRpbWVzdGFtcDtcbiAgICAxMlx0aW1wb3J0IERBTy5EYk9wZXJhdGlvbnMuU3FsT3BlcmF0aW9uO1xuICAgIDEzXHRcbiAgICAxNFx0LyoqXG4gICAgMTVcdCAqXG4gICAgMTZcdCAqIEBhdXRob3IgTmdvYyBUaGFvXG5cblJlc3VsdCBmb3Igc3RyX3JlcGxhY2UgZm9yIGVudHJ5IHdpdGggaW5kZXggWzFdOlxuUmVwbGFjZW1lbnQgc3VjY2Vzc2Z1bC5cbkVkaXRlZCBzZWN0aW9uIGFmdGVyIElERSBhdXRvLWZvcm1hdHRpbmcgd2FzIGFwcGxpZWQ6XG4gICAgNzNcdCAgICBwdWJsaWMgc3RhdGljIFN1YnNjcmliZXIgZ2V0QnlJZChpbnQgaWQpIHtcbiAgICA3NFx0ICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oXCJOb3Qgc3VwcG9ydGVkIHlldC5cIik7IC8vIEdlbmVyYXRlZCBmcm9tIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9Db2RlL0dlbmVyYXRlZE1ldGhvZEJvZHlcbiAgICA3NVx0ICAgIH1cbiAgICA3Nlx0XG4gICAgNzdcdCAgICBwdWJsaWMgc3RhdGljIExpc3Q8U3Vic2NyaWJlcj4gZ2V0QWxsKCkge1xuICAgIDc4XHQgICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbihcIk5vdCBzdXBwb3J0ZWQgeWV0LlwiKTsgLy8gR2VuZXJhdGVkIGZyb20gbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NvZGUvR2VuZXJhdGVkTWV0aG9kQm9keVxuICAgIDc5XHQgICAgfVxuICAgIDgwXHRcbiAgICA4MVx0ICAgIHB1YmxpYyBzdGF0aWMgU3Vic2NyaWJlciBnZXRCeVBob25lKFN0cmluZyBwaG9uZSkge1xuICAgIDgyXHQgICAgICAgIFN1YnNjcmliZXIgc3Vic2NyaWJlciA9IG51bGw7XG4gICAgODNcdCAgICAgICAgdHJ5IHtcbiAgICA4NFx0ICAgICAgICAgICAgUmVzdWx0U2V0IHJzID0gRGJPcGVyYXRpb25zLmdldERhdGEoXCJTRUxFQ1Qgcy4qLCB1LiogRlJPTSBTVUJTQ1JJQkVSIHMgSk9JTiBVU0VSIHUgT04gcy51c2VyX2lkID0gdS51c2VyX2lkIFdIRVJFIHMucGhvbmUgPSAnXCIgKyBwaG9uZSArIFwiJ1wiKTtcbiAgICA4NVx0ICAgICAgICAgICAgaWYgKHJzLm5leHQoKSkge1xuICAgIDg2XHQgICAgICAgICAgICAgICAgc3Vic2NyaWJlciA9IG5ldyBTdWJzY3JpYmVyKCk7XG4gICAgODdcdCAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLnNldFN1YnNjcmliZXJfaWQocnMuZ2V0SW50KFwic3Vic2NyaWJlcl9pZFwiKSk7XG4gICAgODhcdCAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLnNldEZ1bGxOYW1lKHJzLmdldFN0cmluZyhcIm5hbWVcIikpO1xuICAgIDg5XHQgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5zZXRBZGRyZXNzKHJzLmdldFN0cmluZyhcImFkZHJlc3NcIikpO1xuICAgIDkwXHQgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5zZXRQaG9uZShycy5nZXRTdHJpbmcoXCJwaG9uZVwiKSk7XG4gICAgOTFcdCAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLnNldFVzZXJfaWQocnMuZ2V0SW50KFwidXNlcl9pZFwiKSk7XG4gICAgOTJcdCAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLnNldFVzZXJuYW1lKHJzLmdldFN0cmluZyhcInVzZXJuYW1lXCIpKTtcbiAgICA5M1x0ICAgICAgICAgICAgICAgIHN1YnNjcmliZXIuc2V0UGFzc3dvcmQocnMuZ2V0U3RyaW5nKFwicGFzc3dvcmRcIikpO1xuICAgIDk0XHQgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5zZXRSb2xlKHJzLmdldFN0cmluZyhcInJvbGVcIikpO1xuICAgIDk1XHQgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5zZXRJc0FjdGl2ZShycy5nZXRCb29sZWFuKFwiaXNBY3RpdmVcIikpO1xuICAgIDk2XHQgICAgICAgICAgICB9XG4gICAgOTdcdCAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGV4KSB7XG4gICAgOThcdCAgICAgICAgICAgIGV4LnByaW50U3RhY2tUcmFjZSgpO1xuICAgIDk5XHQgICAgICAgIH1cbiAgIDEwMFx0ICAgICAgICByZXR1cm4gc3Vic2NyaWJlcjtcbiAgIDEwMVx0ICAgIH1cbiAgIDEwMlx0XG4gICAxMDNcdCAgICBwdWJsaWMgc3RhdGljIGJvb2xlYW4gdXBkYXRlUGFzc3dvcmQoaW50IHVzZXJJZCwgU3RyaW5nIG5ld1Bhc3N3b3JkKSB7XG4gICAxMDRcdCAgICAgICAgdHJ5IHtcbiAgIDEwNVx0ICAgICAgICAgICAgU3RyaW5nIHF1ZXJ5ID0gXCJVUERBVEUgVVNFUiBTRVQgcGFzc3dvcmQgPSAnXCIgKyBuZXdQYXNzd29yZCArIFwiJyBXSEVSRSB1c2VyX2lkID0gXCIgKyB1c2VySWQ7XG4gICAxMDZcdCAgICAgICAgICAgIERiT3BlcmF0aW9ucy5zZXREYXRhT3JEZWxldGUocXVlcnksIFwiQ+G6rXAgbmjhuq10IG3huq10IGto4bqpdSB0aMOgbmggY8O0bmchXCIpO1xuICAgMTA3XHQgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgIDEwOFx0ICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZXgpIHtcbiAgIDEwOVx0ICAgICAgICAgICAgZXgucHJpbnRTdGFja1RyYWNlKCk7XG4gICAxMTBcdCAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgIDExMVx0ICAgICAgICB9XG4gICAxMTJcdCAgICB9XG4gICAxMTNcdH1cbiAgIDExNFx0XG5cblJldmlldyB0aGUgY2hhbmdlcyBhbmQgbWFrZSBzdXJlIHRoZXkgYXJlIGFzIGV4cGVjdGVkIChjb3JyZWN0IGluZGVudGF0aW9uLCBubyBkdXBsaWNhdGUgbGluZXMsIGV0YykuXG5FZGl0IHRoZSBmaWxlIGFnYWluIGlmIG5lY2Vzc2FyeS5cbiIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX0sIjgwN2M3YjU2LWY4NDEtNGE3Ny1iNTdhLTE5M2ZiNTk4NzNjNjt0b29sdV8wMUEyRjY5eWt0RFdhYWdUV1BHd0doZmEiOnsicmVxdWVzdElkIjoiODA3YzdiNTYtZjg0MS00YTc3LWI1N2EtMTkzZmI1OTg3M2M2IiwidG9vbFVzZUlkIjoidG9vbHVfMDFBMkY2OXlrdERXYWFnVFdQR3dHaGZhIiwicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiU3VjY2Vzc2Z1bGx5IGVkaXRlZCB0aGUgZmlsZSBzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9Gb3Jnb3RQYXNzd29yZC5qYXZhLlxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZSBmb3IgZW50cnkgd2l0aCBpbmRleCBbMF06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgICAgMVx0LypcbiAgICAgMlx0ICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9MaWNlbnNlcy9saWNlbnNlLWRlZmF1bHQudHh0IHRvIGNoYW5nZSB0aGlzIGxpY2Vuc2VcbiAgICAgM1x0ICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9HVUlGb3Jtcy9KRnJhbWUuamF2YSB0byBlZGl0IHRoaXMgdGVtcGxhdGVcbiAgICAgNFx0ICovXG4gICAgIDVcdHBhY2thZ2UgaW50ZXJuZXQubWFuZ2VtZW50LnN5c3RlbTtcbiAgICAgNlx0XG4gICAgIDdcdGltcG9ydCBEQU8uU3Vic2NyaWJlckRBTztcbiAgICAgOFx0aW1wb3J0IE1vZGVsLlN1YnNjcmliZXI7XG4gICAgIDlcdGltcG9ydCBqYXZheC5zd2luZy5KT3B0aW9uUGFuZTtcbiAgICAxMFx0XG4gICAgMTFcdC8qKlxuICAgIDEyXHQgKlxuICAgIDEzXHQgKiBAYXV0aG9yIE5nb2MgVGhhb1xuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlIGZvciBlbnRyeSB3aXRoIGluZGV4IFsxXTpcblJlcGxhY2VtZW50IHN1Y2Nlc3NmdWwuXG5FZGl0ZWQgc2VjdGlvbiBhZnRlciBJREUgYXV0by1mb3JtYXR0aW5nIHdhcyBhcHBsaWVkOlxuICAgIDExXHQvKipcbiAgICAxMlx0ICpcbiAgICAxM1x0ICogQGF1dGhvciBOZ29jIFRoYW9cbiAgICAxNFx0ICovXG4gICAgMTVcdHB1YmxpYyBjbGFzcyBGb3Jnb3RQYXNzd29yZCBleHRlbmRzIGphdmF4LnN3aW5nLkpGcmFtZSB7XG4gICAgMTZcdCAgICBwcml2YXRlIFN1YnNjcmliZXIgY3VycmVudFN1YnNjcmliZXIgPSBudWxsO1xuICAgIDE3XHQgICAgcHVibGljIFN0cmluZyBwaG9uZVBhdHRlcm4gPSBcIl5bMC05XSokXCI7XG4gICAgMThcdFxuICAgIDE5XHQgICAgLyoqXG4gICAgMjBcdCAgICAgKiBDcmVhdGVzIG5ldyBmb3JtIEZvcmdvdFBhc3N3b3JkXG5cblJlc3VsdCBmb3Igc3RyX3JlcGxhY2UgZm9yIGVudHJ5IHdpdGggaW5kZXggWzJdOlxuUmVwbGFjZW1lbnQgc3VjY2Vzc2Z1bC5cbkVkaXRlZCBzZWN0aW9uIGFmdGVyIElERSBhdXRvLWZvcm1hdHRpbmcgd2FzIGFwcGxpZWQ6XG4gICAgNTFcdCAgICAgICAgfVxuICAgIDUyXHQgICAgICAgIHJldHVybiB0cnVlO1xuICAgIDUzXHQgICAgfVxuICAgIDU0XHRcbiAgICA1NVx0ICAgIHB1YmxpYyBib29sZWFuIHZhbGlkYXRlRmllbGRzKCl7XG4gICAgNTZcdCAgICAgICAgU3RyaW5nIHBhc3N3b3JkID0gdHh0UGFzc3dvcmQuZ2V0VGV4dCgpO1xuICAgIDU3XHQgICAgICAgIFN0cmluZyBjb25maXJtUGFzc3dvcmQgPSB0eHRDb25maXJtUGFzc3dvcmQuZ2V0VGV4dCgpO1xuICAgIDU4XHRcbiAgICA1OVx0ICAgICAgICBpZihwYXNzd29yZC5pc0VtcHR5KCkgfHwgY29uZmlybVBhc3N3b3JkLmlzRW1wdHkoKSl7XG4gICAgNjBcdCAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwiVnVpIGzDsm5nIGtow7RuZyBi4buPIHRy4buRbmchXCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAgNjFcdCAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICA2Mlx0ICAgICAgICB9XG4gICAgNjNcdFxuICAgIDY0XHQgICAgICAgIGlmKCFwYXNzd29yZC5lcXVhbHMoY29uZmlybVBhc3N3b3JkKSl7XG4gICAgNjVcdCAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwiTeG6rXQga2jhuql1IHjDoWMgbmjhuq1uIGtow7RuZyBraOG7m3AhXCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAgNjZcdCAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICA2N1x0ICAgICAgICB9XG4gICAgNjhcdFxuICAgIDY5XHQgICAgICAgIHJldHVybiB0cnVlO1xuICAgIDcwXHQgICAgfVxuICAgIDcxXHRcbiAgICA3Mlx0ICAgIC8qKlxuICAgIDczXHQgICAgICogVGhpcyBtZXRob2QgaXMgY2FsbGVkIGZyb20gd2l0aGluIHRoZSBjb25zdHJ1Y3RvciB0byBpbml0aWFsaXplIHRoZSBmb3JtLlxuICAgIDc0XHQgICAgICogV0FSTklORzogRG8gTk9UIG1vZGlmeSB0aGlzIGNvZGUuIFRoZSBjb250ZW50IG9mIHRoaXMgbWV0aG9kIGlzIGFsd2F5c1xuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlIGZvciBlbnRyeSB3aXRoIGluZGV4IFszXTpcblJlcGxhY2VtZW50IHN1Y2Nlc3NmdWwuXG5FZGl0ZWQgc2VjdGlvbiBhZnRlciBJREUgYXV0by1mb3JtYXR0aW5nIHdhcyBhcHBsaWVkOlxuICAgMTA0XHRcbiAgIDEwNVx0ICAgICAgICBsYkNvbmZpcm1QYXNzd29yZC5zZXRGb250KG5ldyBqYXZhLmF3dC5Gb250KFwiQXJpYWxcIiwgMSwgMTQpKTsgLy8gTk9JMThOXG4gICAxMDZcdCAgICAgICAgbGJDb25maXJtUGFzc3dvcmQuc2V0VGV4dChcIljDoWMgbmjhuq1uIG3huq10IGto4bqpdTpcIik7XG4gICAxMDdcdFxuICAgMTA4XHQgICAgICAgIGJ0bkNoZWNrLnNldEZvbnQobmV3IGphdmEuYXd0LkZvbnQoXCJBcmlhbFwiLCAxLCAxNCkpOyAvLyBOT0kxOE5cbiAgIDEwOVx0ICAgICAgICBidG5DaGVjay5zZXRJY29uKG5ldyBqYXZheC5zd2luZy5JbWFnZUljb24oZ2V0Q2xhc3MoKS5nZXRSZXNvdXJjZShcIi9JbWFnZXMvc2VhcmNoLnBuZ1wiKSkpOyAvLyBOT0kxOE5cbiAgIDExMFx0ICAgICAgICBidG5DaGVjay5zZXRUZXh0KFwiS2nhu4NtIHRyYVwiKTtcbiAgIDExMVx0ICAgICAgICBidG5DaGVjay5zZXRDdXJzb3IobmV3IGphdmEuYXd0LkN1cnNvcihqYXZhLmF3dC5DdXJzb3IuSEFORF9DVVJTT1IpKTtcbiAgIDExMlx0ICAgICAgICBidG5DaGVjay5hZGRBY3Rpb25MaXN0ZW5lcihuZXcgamF2YS5hd3QuZXZlbnQuQWN0aW9uTGlzdGVuZXIoKSB7XG4gICAxMTNcdCAgICAgICAgICAgIHB1YmxpYyB2b2lkIGFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHtcbiAgIDExNFx0ICAgICAgICAgICAgICAgIGJ0bkNoZWNrQWN0aW9uUGVyZm9ybWVkKGV2dCk7XG4gICAxMTVcdCAgICAgICAgICAgIH1cbiAgIDExNlx0ICAgICAgICB9KTtcbiAgIDExN1x0XG4gICAxMThcdCAgICAgICAgYnRuQ2hhbmdlLnNldEZvbnQobmV3IGphdmEuYXd0LkZvbnQoXCJBcmlhbFwiLCAxLCAxNCkpOyAvLyBOT0kxOE5cbiAgIDExOVx0ICAgICAgICBidG5DaGFuZ2Uuc2V0SWNvbihuZXcgamF2YXguc3dpbmcuSW1hZ2VJY29uKGdldENsYXNzKCkuZ2V0UmVzb3VyY2UoXCIvSW1hZ2VzL3Jlc2V0LXBhc3N3b3JkLnBuZ1wiKSkpOyAvLyBOT0kxOE5cbiAgIDEyMFx0ICAgICAgICBidG5DaGFuZ2Uuc2V0VGV4dChcIsSQ4buVaSBt4bqtdCBraOG6qXVcIik7XG5cblJlc3VsdCBmb3Igc3RyX3JlcGxhY2UgZm9yIGVudHJ5IHdpdGggaW5kZXggWzRdOlxuUmVwbGFjZW1lbnQgc3VjY2Vzc2Z1bC5cbkVkaXRlZCBzZWN0aW9uIGFmdGVyIElERSBhdXRvLWZvcm1hdHRpbmcgd2FzIGFwcGxpZWQ6XG4gICAxMTRcdCAgICAgICAgICAgICAgICBidG5DaGVja0FjdGlvblBlcmZvcm1lZChldnQpO1xuICAgMTE1XHQgICAgICAgICAgICB9XG4gICAxMTZcdCAgICAgICAgfSk7XG4gICAxMTdcdFxuICAgMTE4XHQgICAgICAgIGJ0bkNoYW5nZS5zZXRGb250KG5ldyBqYXZhLmF3dC5Gb250KFwiQXJpYWxcIiwgMSwgMTQpKTsgLy8gTk9JMThOXG4gICAxMTlcdCAgICAgICAgYnRuQ2hhbmdlLnNldEljb24obmV3IGphdmF4LnN3aW5nLkltYWdlSWNvbihnZXRDbGFzcygpLmdldFJlc291cmNlKFwiL0ltYWdlcy9yZXNldC1wYXNzd29yZC5wbmdcIikpKTsgLy8gTk9JMThOXG4gICAxMjBcdCAgICAgICAgYnRuQ2hhbmdlLnNldFRleHQoXCLEkOG7lWkgbeG6rXQga2jhuql1XCIpO1xuICAgMTIxXHQgICAgICAgIGJ0bkNoYW5nZS5zZXRDdXJzb3IobmV3IGphdmEuYXd0LkN1cnNvcihqYXZhLmF3dC5DdXJzb3IuSEFORF9DVVJTT1IpKTtcbiAgIDEyMlx0ICAgICAgICBidG5DaGFuZ2UuYWRkQWN0aW9uTGlzdGVuZXIobmV3IGphdmEuYXd0LmV2ZW50LkFjdGlvbkxpc3RlbmVyKCkge1xuICAgMTIzXHQgICAgICAgICAgICBwdWJsaWMgdm9pZCBhY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7XG4gICAxMjRcdCAgICAgICAgICAgICAgICBidG5DaGFuZ2VBY3Rpb25QZXJmb3JtZWQoZXZ0KTtcbiAgIDEyNVx0ICAgICAgICAgICAgfVxuICAgMTI2XHQgICAgICAgIH0pO1xuICAgMTI3XHRcbiAgIDEyOFx0ICAgICAgICBidG5FeGl0LnNldEZvbnQobmV3IGphdmEuYXd0LkZvbnQoXCJBcmlhbFwiLCAxLCAxNCkpOyAvLyBOT0kxOE5cbiAgIDEyOVx0ICAgICAgICBidG5FeGl0LnNldEljb24obmV3IGphdmF4LnN3aW5nLkltYWdlSWNvbihnZXRDbGFzcygpLmdldFJlc291cmNlKFwiL0ltYWdlcy9sb2dvdXQucG5nXCIpKSk7IC8vIE5PSTE4TlxuICAgMTMwXHQgICAgICAgIGJ0bkV4aXQuc2V0VGV4dChcIlRob8OhdFwiKTtcblxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZSBmb3IgZW50cnkgd2l0aCBpbmRleCBbNV06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgIDIxMFx0XG4gICAyMTFcdCAgICAgICAgcGFjaygpO1xuICAgMjEyXHQgICAgfS8vIDwvZWRpdG9yLWZvbGQ+Ly9HRU4tRU5EOmluaXRDb21wb25lbnRzXG4gICAyMTNcdFxuICAgMjE0XHQgICAgcHJpdmF0ZSB2b2lkIGJ0bkV4aXRBY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuRXhpdEFjdGlvblBlcmZvcm1lZFxuICAgMjE1XHQgICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxuICAgMjE2XHQgICAgICAgIGludCByZXN1bHQgPSBKT3B0aW9uUGFuZS5zaG93Q29uZmlybURpYWxvZyhudWxsLCBcIkLhuqFuIGPDsyBjaOG6r2MgY2jhuq9uIG114buRbiB0aG/DoXQga2jDtG5nP1wiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLllFU19OT19PUFRJT04sIEpPcHRpb25QYW5lLlFVRVNUSU9OX01FU1NBR0UpO1xuICAgMjE3XHRcbiAgIDIxOFx0ICAgICAgICBpZiAocmVzdWx0ID09IEpPcHRpb25QYW5lLllFU19PUFRJT04pIHtcbiAgIDIxOVx0ICAgICAgICAgICAgbmV3IExvZ2luKCkuc2V0VmlzaWJsZSh0cnVlKTtcbiAgIDIyMFx0ICAgICAgICAgICAgdGhpcy5kaXNwb3NlKCk7XG4gICAyMjFcdCAgICAgICAgfVxuICAgMjIyXHQgICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuRXhpdEFjdGlvblBlcmZvcm1lZFxuICAgMjIzXHRcbiAgIDIyNFx0ICAgIHByaXZhdGUgdm9pZCBidG5DaGVja0FjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5DaGVja0FjdGlvblBlcmZvcm1lZFxuICAgMjI1XHQgICAgICAgIGlmICh2YWxpZGF0ZVBob25lKCkpIHtcbiAgIDIyNlx0ICAgICAgICAgICAgU3RyaW5nIHBob25lID0gdHh0UGhvbmUuZ2V0VGV4dCgpO1xuICAgMjI3XHQgICAgICAgICAgICBjdXJyZW50U3Vic2NyaWJlciA9IFN1YnNjcmliZXJEQU8uZ2V0QnlQaG9uZShwaG9uZSk7XG4gICAyMjhcdFxuICAgMjI5XHQgICAgICAgICAgICBpZiAoY3VycmVudFN1YnNjcmliZXIgIT0gbnVsbCkge1xuICAgMjMwXHQgICAgICAgICAgICAgICAgLy8gUGhvbmUgbnVtYmVyIGZvdW5kLCBzaG93IHBhc3N3b3JkIGZpZWxkc1xuICAgMjMxXHQgICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXCJUw6xtIHRo4bqleSB0w6BpIGtob+G6o24gduG7m2kgc+G7kSDEkWnhu4duIHRob+G6oWkgbsOgeSFcIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5JTkZPUk1BVElPTl9NRVNTQUdFKTtcbiAgIDIzMlx0XG4gICAyMzNcdCAgICAgICAgICAgICAgICBidG5FeGl0LnNldFZpc2libGUodHJ1ZSk7XG4gICAyMzRcdCAgICAgICAgICAgICAgICBidG5DaGFuZ2Uuc2V0VmlzaWJsZSh0cnVlKTtcbiAgIDIzNVx0ICAgICAgICAgICAgICAgIGxiTmV3UGFzc3dvcmQuc2V0VmlzaWJsZSh0cnVlKTtcbiAgIDIzNlx0ICAgICAgICAgICAgICAgIGxiQ29uZmlybVBhc3N3b3JkLnNldFZpc2libGUodHJ1ZSk7XG4gICAyMzdcdCAgICAgICAgICAgICAgICB0eHRQYXNzd29yZC5zZXRWaXNpYmxlKHRydWUpO1xuICAgMjM4XHQgICAgICAgICAgICAgICAgdHh0Q29uZmlybVBhc3N3b3JkLnNldFZpc2libGUodHJ1ZSk7XG4gICAyMzlcdFxuICAgMjQwXHQgICAgICAgICAgICAgICAgLy8gRGlzYWJsZSBwaG9uZSBmaWVsZCBhbmQgY2hlY2sgYnV0dG9uXG4gICAyNDFcdCAgICAgICAgICAgICAgICB0eHRQaG9uZS5zZXRFZGl0YWJsZShmYWxzZSk7XG4gICAyNDJcdCAgICAgICAgICAgICAgICBidG5DaGVjay5zZXRFbmFibGVkKGZhbHNlKTtcbiAgIDI0M1x0ICAgICAgICAgICAgfSBlbHNlIHtcbiAgIDI0NFx0ICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwiS2jDtG5nIHTDrG0gdGjhuqV5IHTDoGkga2hv4bqjbiB24bubaSBz4buRIMSRaeG7h24gdGhv4bqhaSBuw6B5IVwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgMjQ1XHQgICAgICAgICAgICB9XG4gICAyNDZcdCAgICAgICAgfVxuICAgMjQ3XHQgICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuQ2hlY2tBY3Rpb25QZXJmb3JtZWRcbiAgIDI0OFx0XG4gICAyNDlcdCAgICBwcml2YXRlIHZvaWQgYnRuQ2hhbmdlQWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkNoYW5nZUFjdGlvblBlcmZvcm1lZFxuICAgMjUwXHQgICAgICAgIGlmICh2YWxpZGF0ZUZpZWxkcygpICYmIGN1cnJlbnRTdWJzY3JpYmVyICE9IG51bGwpIHtcbiAgIDI1MVx0ICAgICAgICAgICAgU3RyaW5nIG5ld1Bhc3N3b3JkID0gdHh0UGFzc3dvcmQuZ2V0VGV4dCgpO1xuICAgMjUyXHRcbiAgIDI1M1x0ICAgICAgICAgICAgYm9vbGVhbiBzdWNjZXNzID0gU3Vic2NyaWJlckRBTy51cGRhdGVQYXNzd29yZChjdXJyZW50U3Vic2NyaWJlci5nZXRVc2VyX2lkKCksIG5ld1Bhc3N3b3JkKTtcbiAgIDI1NFx0XG4gICAyNTVcdCAgICAgICAgICAgIGlmIChzdWNjZXNzKSB7XG4gICAyNTZcdCAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcIsSQ4buVaSBt4bqtdCBraOG6qXUgdGjDoG5oIGPDtG5nISBWdWkgbMOybmcgxJHEg25nIG5o4bqtcCBs4bqhaS5cIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5JTkZPUk1BVElPTl9NRVNTQUdFKTtcbiAgIDI1N1x0ICAgICAgICAgICAgICAgIG5ldyBMb2dpbigpLnNldFZpc2libGUodHJ1ZSk7XG4gICAyNThcdCAgICAgICAgICAgICAgICB0aGlzLmRpc3Bvc2UoKTtcbiAgIDI1OVx0ICAgICAgICAgICAgfSBlbHNlIHtcbiAgIDI2MFx0ICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwixJDhu5VpIG3huq10IGto4bqpdSB0aOG6pXQgYuG6oWkhIFZ1aSBsw7JuZyB0aOG7rSBs4bqhaSBzYXUuXCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAyNjFcdCAgICAgICAgICAgIH1cbiAgIDI2Mlx0ICAgICAgICB9XG4gICAyNjNcdCAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5DaGFuZ2VBY3Rpb25QZXJmb3JtZWRcbiAgIDI2NFx0XG4gICAyNjVcdCAgICAvKipcbiAgIDI2Nlx0ICAgICAqIEBwYXJhbSBhcmdzIHRoZSBjb21tYW5kIGxpbmUgYXJndW1lbnRzXG4gICAyNjdcdCAgICAgKi9cblxuUmV2aWV3IHRoZSBjaGFuZ2VzIGFuZCBtYWtlIHN1cmUgdGhleSBhcmUgYXMgZXhwZWN0ZWQgKGNvcnJlY3QgaW5kZW50YXRpb24sIG5vIGR1cGxpY2F0ZSBsaW5lcywgZXRjKS5cbkVkaXQgdGhlIGZpbGUgYWdhaW4gaWYgbmVjZXNzYXJ5LlxuIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiMGI5NGIzNDEtMGU2ZC00YjZmLWE4MmUtZDY5MGM0NWZiZmY0O3Rvb2x1XzAxSlpTM2FuTTVDelE0NTdLbnVmcEJqdCI6eyJyZXF1ZXN0SWQiOiIwYjk0YjM0MS0wZTZkLTRiNmYtYTgyZS1kNjkwYzQ1ZmJmZjQiLCJ0b29sVXNlSWQiOiJ0b29sdV8wMUpaUzNhbk01Q3pRNDU3S251ZnBCanQiLCJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJIZXJlJ3MgdGhlIHJlc3VsdCBvZiBydW5uaW5nIGBjYXQgLW5gIG9uIHNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL0ZvcmdvdFBhc3N3b3JkLmZvcm06XG4gICAgIDFcdDw/eG1sIHZlcnNpb249XCIxLjBcIiBlbmNvZGluZz1cIlVURi04XCIgPz5cbiAgICAgMlx0XG4gICAgIDNcdDxGb3JtIHZlcnNpb249XCIxLjNcIiBtYXhWZXJzaW9uPVwiMS45XCIgdHlwZT1cIm9yZy5uZXRiZWFucy5tb2R1bGVzLmZvcm0uZm9ybWluZm8uSkZyYW1lRm9ybUluZm9cIj5cbiAgICAgNFx0ICA8UHJvcGVydGllcz5cbiAgICAgNVx0ICAgIDxQcm9wZXJ0eSBuYW1lPVwiZGVmYXVsdENsb3NlT3BlcmF0aW9uXCIgdHlwZT1cImludFwiIHZhbHVlPVwiM1wiLz5cbiAgICAgNlx0ICA8L1Byb3BlcnRpZXM+XG4gICAgIDdcdCAgPFN5bnRoZXRpY1Byb3BlcnRpZXM+XG4gICAgIDhcdCAgICA8U3ludGhldGljUHJvcGVydHkgbmFtZT1cImZvcm1TaXplUG9saWN5XCIgdHlwZT1cImludFwiIHZhbHVlPVwiMVwiLz5cbiAgICAgOVx0ICAgIDxTeW50aGV0aWNQcm9wZXJ0eSBuYW1lPVwiZ2VuZXJhdGVDZW50ZXJcIiB0eXBlPVwiYm9vbGVhblwiIHZhbHVlPVwiZmFsc2VcIi8+XG4gICAgMTBcdCAgPC9TeW50aGV0aWNQcm9wZXJ0aWVzPlxuICAgIDExXHQgIDxBdXhWYWx1ZXM+XG4gICAgMTJcdCAgICA8QXV4VmFsdWUgbmFtZT1cIkZvcm1TZXR0aW5nc19hdXRvUmVzb3VyY2luZ1wiIHR5cGU9XCJqYXZhLmxhbmcuSW50ZWdlclwiIHZhbHVlPVwiMFwiLz5cbiAgICAxM1x0ICAgIDxBdXhWYWx1ZSBuYW1lPVwiRm9ybVNldHRpbmdzX2F1dG9TZXRDb21wb25lbnROYW1lXCIgdHlwZT1cImphdmEubGFuZy5Cb29sZWFuXCIgdmFsdWU9XCJmYWxzZVwiLz5cbiAgICAxNFx0ICAgIDxBdXhWYWx1ZSBuYW1lPVwiRm9ybVNldHRpbmdzX2dlbmVyYXRlRlFOXCIgdHlwZT1cImphdmEubGFuZy5Cb29sZWFuXCIgdmFsdWU9XCJ0cnVlXCIvPlxuICAgIDE1XHQgICAgPEF1eFZhbHVlIG5hbWU9XCJGb3JtU2V0dGluZ3NfZ2VuZXJhdGVNbmVtb25pY3NDb2RlXCIgdHlwZT1cImphdmEubGFuZy5Cb29sZWFuXCIgdmFsdWU9XCJmYWxzZVwiLz5cbiAgICAxNlx0ICAgIDxBdXhWYWx1ZSBuYW1lPVwiRm9ybVNldHRpbmdzX2kxOG5BdXRvTW9kZVwiIHR5cGU9XCJqYXZhLmxhbmcuQm9vbGVhblwiIHZhbHVlPVwiZmFsc2VcIi8+XG4gICAgMTdcdCAgICA8QXV4VmFsdWUgbmFtZT1cIkZvcm1TZXR0aW5nc19sYXlvdXRDb2RlVGFyZ2V0XCIgdHlwZT1cImphdmEubGFuZy5JbnRlZ2VyXCIgdmFsdWU9XCIxXCIvPlxuICAgIDE4XHQgICAgPEF1eFZhbHVlIG5hbWU9XCJGb3JtU2V0dGluZ3NfbGlzdGVuZXJHZW5lcmF0aW9uU3R5bGVcIiB0eXBlPVwiamF2YS5sYW5nLkludGVnZXJcIiB2YWx1ZT1cIjBcIi8+XG4gICAgMTlcdCAgICA8QXV4VmFsdWUgbmFtZT1cIkZvcm1TZXR0aW5nc192YXJpYWJsZXNMb2NhbFwiIHR5cGU9XCJqYXZhLmxhbmcuQm9vbGVhblwiIHZhbHVlPVwiZmFsc2VcIi8+XG4gICAgMjBcdCAgICA8QXV4VmFsdWUgbmFtZT1cIkZvcm1TZXR0aW5nc192YXJpYWJsZXNNb2RpZmllclwiIHR5cGU9XCJqYXZhLmxhbmcuSW50ZWdlclwiIHZhbHVlPVwiMlwiLz5cbiAgICAyMVx0ICA8L0F1eFZhbHVlcz5cbiAgICAyMlx0XG4gICAgMjNcdCAgPExheW91dD5cbiAgICAyNFx0ICAgIDxEaW1lbnNpb25MYXlvdXQgZGltPVwiMFwiPlxuICAgIDI1XHQgICAgICA8R3JvdXAgdHlwZT1cIjEwM1wiIGdyb3VwQWxpZ25tZW50PVwiMFwiIGF0dHJpYnV0ZXM9XCIwXCI+XG4gICAgMjZcdCAgICAgICAgICA8R3JvdXAgdHlwZT1cIjEwMlwiIGF0dHJpYnV0ZXM9XCIwXCI+XG4gICAgMjdcdCAgICAgICAgICAgICAgPEdyb3VwIHR5cGU9XCIxMDNcIiBncm91cEFsaWdubWVudD1cIjBcIiBhdHRyaWJ1dGVzPVwiMFwiPlxuICAgIDI4XHQgICAgICAgICAgICAgICAgICA8R3JvdXAgdHlwZT1cIjEwMlwiIGF0dHJpYnV0ZXM9XCIwXCI+XG4gICAgMjlcdCAgICAgICAgICAgICAgICAgICAgICA8RW1wdHlTcGFjZSBtaW49XCIxMTBcIiBwcmVmPVwiMTEwXCIgbWF4PVwiLTJcIiBhdHRyaWJ1dGVzPVwiMFwiLz5cbiAgICAzMFx0ICAgICAgICAgICAgICAgICAgICAgIDxDb21wb25lbnQgaWQ9XCJqTGFiZWwxXCIgbWluPVwiLTJcIiBtYXg9XCItMlwiIGF0dHJpYnV0ZXM9XCIwXCIvPlxuICAgIDMxXHQgICAgICAgICAgICAgICAgICA8L0dyb3VwPlxuICAgIDMyXHQgICAgICAgICAgICAgICAgICA8R3JvdXAgdHlwZT1cIjEwMlwiIGF0dHJpYnV0ZXM9XCIwXCI+XG4gICAgMzNcdCAgICAgICAgICAgICAgICAgICAgICA8RW1wdHlTcGFjZSBtaW49XCI2MVwiIHByZWY9XCI2MVwiIG1heD1cIi0yXCIgYXR0cmlidXRlcz1cIjBcIi8+XG4gICAgMzRcdCAgICAgICAgICAgICAgICAgICAgICA8Q29tcG9uZW50IGlkPVwialNlcGFyYXRvcjFcIiBtaW49XCItMlwiIHByZWY9XCIzNzBcIiBtYXg9XCItMlwiIGF0dHJpYnV0ZXM9XCIwXCIvPlxuICAgIDM1XHQgICAgICAgICAgICAgICAgICA8L0dyb3VwPlxuICAgIDM2XHQgICAgICAgICAgICAgICAgICA8R3JvdXAgdHlwZT1cIjEwMlwiIGF0dHJpYnV0ZXM9XCIwXCI+XG4gICAgMzdcdCAgICAgICAgICAgICAgICAgICAgICA8RW1wdHlTcGFjZSBtaW49XCI2MVwiIHByZWY9XCI2MVwiIG1heD1cIi0yXCIgYXR0cmlidXRlcz1cIjBcIi8+XG4gICAgMzhcdCAgICAgICAgICAgICAgICAgICAgICA8Q29tcG9uZW50IGlkPVwiakxhYmVsMlwiIG1pbj1cIi0yXCIgbWF4PVwiLTJcIiBhdHRyaWJ1dGVzPVwiMFwiLz5cbiAgICAzOVx0ICAgICAgICAgICAgICAgICAgICAgIDxFbXB0eVNwYWNlIG1pbj1cIjU2XCIgcHJlZj1cIjU2XCIgbWF4PVwiLTJcIiBhdHRyaWJ1dGVzPVwiMFwiLz5cbiAgICA0MFx0ICAgICAgICAgICAgICAgICAgICAgIDxDb21wb25lbnQgaWQ9XCJ0eHRQaG9uZVwiIG1pbj1cIi0yXCIgcHJlZj1cIjIxMFwiIG1heD1cIi0yXCIgYXR0cmlidXRlcz1cIjBcIi8+XG4gICAgNDFcdCAgICAgICAgICAgICAgICAgIDwvR3JvdXA+XG4gICAgNDJcdCAgICAgICAgICAgICAgICAgIDxHcm91cCB0eXBlPVwiMTAyXCIgYXR0cmlidXRlcz1cIjBcIj5cbiAgICA0M1x0ICAgICAgICAgICAgICAgICAgICAgIDxFbXB0eVNwYWNlIG1pbj1cIjYxXCIgcHJlZj1cIjYxXCIgbWF4PVwiLTJcIiBhdHRyaWJ1dGVzPVwiMFwiLz5cbiAgICA0NFx0ICAgICAgICAgICAgICAgICAgICAgIDxDb21wb25lbnQgaWQ9XCJsYk5ld1Bhc3N3b3JkXCIgbWluPVwiLTJcIiBtYXg9XCItMlwiIGF0dHJpYnV0ZXM9XCIwXCIvPlxuICAgIDQ1XHQgICAgICAgICAgICAgICAgICAgICAgPEVtcHR5U3BhY2UgbWluPVwiNTdcIiBwcmVmPVwiNTdcIiBtYXg9XCItMlwiIGF0dHJpYnV0ZXM9XCIwXCIvPlxuICAgIDQ2XHQgICAgICAgICAgICAgICAgICAgICAgPEdyb3VwIHR5cGU9XCIxMDNcIiBncm91cEFsaWdubWVudD1cIjBcIiBhdHRyaWJ1dGVzPVwiMFwiPlxuICAgIDQ3XHQgICAgICAgICAgICAgICAgICAgICAgICAgIDxDb21wb25lbnQgaWQ9XCJ0eHRQYXNzd29yZFwiIG1pbj1cIi0yXCIgcHJlZj1cIjIxMFwiIG1heD1cIi0yXCIgYXR0cmlidXRlcz1cIjBcIi8+XG4gICAgNDhcdCAgICAgICAgICAgICAgICAgICAgICAgICAgPEdyb3VwIHR5cGU9XCIxMDJcIiBhdHRyaWJ1dGVzPVwiMFwiPlxuICAgIDQ5XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8RW1wdHlTcGFjZSBtaW49XCIxMDJcIiBwcmVmPVwiMTAyXCIgbWF4PVwiLTJcIiBhdHRyaWJ1dGVzPVwiMFwiLz5cbiAgICA1MFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENvbXBvbmVudCBpZD1cImJ0bkNoZWNrXCIgbWluPVwiLTJcIiBtYXg9XCItMlwiIGF0dHJpYnV0ZXM9XCIwXCIvPlxuICAgIDUxXHQgICAgICAgICAgICAgICAgICAgICAgICAgIDwvR3JvdXA+XG4gICAgNTJcdCAgICAgICAgICAgICAgICAgICAgICA8L0dyb3VwPlxuICAgIDUzXHQgICAgICAgICAgICAgICAgICA8L0dyb3VwPlxuICAgIDU0XHQgICAgICAgICAgICAgICAgICA8R3JvdXAgdHlwZT1cIjEwM1wiIGFsaWdubWVudD1cIjBcIiBncm91cEFsaWdubWVudD1cIjFcIiBtYXg9XCItMlwiIGF0dHJpYnV0ZXM9XCIwXCI+XG4gICAgNTVcdCAgICAgICAgICAgICAgICAgICAgICA8R3JvdXAgdHlwZT1cIjEwMlwiIGF0dHJpYnV0ZXM9XCIwXCI+XG4gICAgNTZcdCAgICAgICAgICAgICAgICAgICAgICAgICAgPEVtcHR5U3BhY2UgbWluPVwiNjBcIiBwcmVmPVwiNjBcIiBtYXg9XCItMlwiIGF0dHJpYnV0ZXM9XCIwXCIvPlxuICAgIDU3XHQgICAgICAgICAgICAgICAgICAgICAgICAgIDxDb21wb25lbnQgaWQ9XCJidG5FeGl0XCIgbWluPVwiLTJcIiBtYXg9XCItMlwiIGF0dHJpYnV0ZXM9XCIwXCIvPlxuICAgIDU4XHQgICAgICAgICAgICAgICAgICAgICAgICAgIDxFbXB0eVNwYWNlIG1heD1cIjMyNzY3XCIgYXR0cmlidXRlcz1cIjBcIi8+XG4gICAgNTlcdCAgICAgICAgICAgICAgICAgICAgICAgICAgPENvbXBvbmVudCBpZD1cImJ0bkNoYW5nZVwiIG1pbj1cIi0yXCIgbWF4PVwiLTJcIiBhdHRyaWJ1dGVzPVwiMFwiLz5cbiAgICA2MFx0ICAgICAgICAgICAgICAgICAgICAgIDwvR3JvdXA+XG4gICAgNjFcdCAgICAgICAgICAgICAgICAgICAgICA8R3JvdXAgdHlwZT1cIjEwMlwiIGF0dHJpYnV0ZXM9XCIwXCI+XG4gICAgNjJcdCAgICAgICAgICAgICAgICAgICAgICAgICAgPEVtcHR5U3BhY2UgbWluPVwiNjFcIiBwcmVmPVwiNjFcIiBtYXg9XCItMlwiIGF0dHJpYnV0ZXM9XCIwXCIvPlxuICAgIDYzXHQgICAgICAgICAgICAgICAgICAgICAgICAgIDxDb21wb25lbnQgaWQ9XCJsYkNvbmZpcm1QYXNzd29yZFwiIG1pbj1cIi0yXCIgbWF4PVwiLTJcIiBhdHRyaWJ1dGVzPVwiMFwiLz5cbiAgICA2NFx0ICAgICAgICAgICAgICAgICAgICAgICAgICA8RW1wdHlTcGFjZSBtaW49XCIxOFwiIHByZWY9XCIxOFwiIG1heD1cIi0yXCIgYXR0cmlidXRlcz1cIjBcIi8+XG4gICAgNjVcdCAgICAgICAgICAgICAgICAgICAgICAgICAgPENvbXBvbmVudCBpZD1cInR4dENvbmZpcm1QYXNzd29yZFwiIG1pbj1cIi0yXCIgcHJlZj1cIjIxMVwiIG1heD1cIi0yXCIgYXR0cmlidXRlcz1cIjBcIi8+XG4gICAgNjZcdCAgICAgICAgICAgICAgICAgICAgICA8L0dyb3VwPlxuICAgIDY3XHQgICAgICAgICAgICAgICAgICA8L0dyb3VwPlxuICAgIDY4XHQgICAgICAgICAgICAgIDwvR3JvdXA+XG4gICAgNjlcdCAgICAgICAgICAgICAgPEVtcHR5U3BhY2UgbWluPVwiLTJcIiBwcmVmPVwiNjlcIiBtYXg9XCItMlwiIGF0dHJpYnV0ZXM9XCIwXCIvPlxuICAgIDcwXHQgICAgICAgICAgPC9Hcm91cD5cbiAgICA3MVx0ICAgICAgPC9Hcm91cD5cbiAgICA3Mlx0ICAgIDwvRGltZW5zaW9uTGF5b3V0PlxuICAgIDczXHQgICAgPERpbWVuc2lvbkxheW91dCBkaW09XCIxXCI+XG4gICAgNzRcdCAgICAgIDxHcm91cCB0eXBlPVwiMTAzXCIgZ3JvdXBBbGlnbm1lbnQ9XCIwXCIgYXR0cmlidXRlcz1cIjBcIj5cbiAgICA3NVx0ICAgICAgICAgIDxHcm91cCB0eXBlPVwiMTAyXCIgYXR0cmlidXRlcz1cIjBcIj5cbiAgICA3Nlx0ICAgICAgICAgICAgICA8RW1wdHlTcGFjZSBtaW49XCI0MFwiIHByZWY9XCI0MFwiIG1heD1cIi0yXCIgYXR0cmlidXRlcz1cIjBcIi8+XG4gICAgNzdcdCAgICAgICAgICAgICAgPENvbXBvbmVudCBpZD1cImpMYWJlbDFcIiBtaW49XCItMlwiIG1heD1cIi0yXCIgYXR0cmlidXRlcz1cIjBcIi8+XG4gICAgNzhcdCAgICAgICAgICAgICAgPEVtcHR5U3BhY2UgbWluPVwiMTRcIiBwcmVmPVwiMTRcIiBtYXg9XCItMlwiIGF0dHJpYnV0ZXM9XCIwXCIvPlxuICAgIDc5XHQgICAgICAgICAgICAgIDxDb21wb25lbnQgaWQ9XCJqU2VwYXJhdG9yMVwiIG1pbj1cIi0yXCIgcHJlZj1cIjEwXCIgbWF4PVwiLTJcIiBhdHRyaWJ1dGVzPVwiMFwiLz5cbiAgICA4MFx0ICAgICAgICAgICAgICA8RW1wdHlTcGFjZSBtaW49XCIxMlwiIHByZWY9XCIxMlwiIG1heD1cIi0yXCIgYXR0cmlidXRlcz1cIjBcIi8+XG4gICAgODFcdCAgICAgICAgICAgICAgPEdyb3VwIHR5cGU9XCIxMDNcIiBncm91cEFsaWdubWVudD1cIjBcIiBhdHRyaWJ1dGVzPVwiMFwiPlxuICAgIDgyXHQgICAgICAgICAgICAgICAgICA8R3JvdXAgdHlwZT1cIjEwMlwiIGF0dHJpYnV0ZXM9XCIwXCI+XG4gICAgODNcdCAgICAgICAgICAgICAgICAgICAgICA8RW1wdHlTcGFjZSBtaW49XCIzXCIgcHJlZj1cIjNcIiBtYXg9XCItMlwiIGF0dHJpYnV0ZXM9XCIwXCIvPlxuICAgIDg0XHQgICAgICAgICAgICAgICAgICAgICAgPENvbXBvbmVudCBpZD1cImpMYWJlbDJcIiBtaW49XCItMlwiIG1heD1cIi0yXCIgYXR0cmlidXRlcz1cIjBcIi8+XG4gICAgODVcdCAgICAgICAgICAgICAgICAgIDwvR3JvdXA+XG4gICAgODZcdCAgICAgICAgICAgICAgICAgIDxDb21wb25lbnQgaWQ9XCJ0eHRQaG9uZVwiIG1pbj1cIi0yXCIgbWF4PVwiLTJcIiBhdHRyaWJ1dGVzPVwiMFwiLz5cbiAgICA4N1x0ICAgICAgICAgICAgICA8L0dyb3VwPlxuICAgIDg4XHQgICAgICAgICAgICAgIDxFbXB0eVNwYWNlIG1pbj1cIjE4XCIgcHJlZj1cIjE4XCIgbWF4PVwiLTJcIiBhdHRyaWJ1dGVzPVwiMFwiLz5cbiAgICA4OVx0ICAgICAgICAgICAgICA8R3JvdXAgdHlwZT1cIjEwM1wiIGdyb3VwQWxpZ25tZW50PVwiMFwiIGF0dHJpYnV0ZXM9XCIwXCI+XG4gICAgOTBcdCAgICAgICAgICAgICAgICAgIDxHcm91cCB0eXBlPVwiMTAyXCIgYXR0cmlidXRlcz1cIjBcIj5cbiAgICA5MVx0ICAgICAgICAgICAgICAgICAgICAgIDxFbXB0eVNwYWNlIG1pbj1cIjNcIiBwcmVmPVwiM1wiIG1heD1cIi0yXCIgYXR0cmlidXRlcz1cIjBcIi8+XG4gICAgOTJcdCAgICAgICAgICAgICAgICAgICAgICA8Q29tcG9uZW50IGlkPVwibGJOZXdQYXNzd29yZFwiIG1pbj1cIi0yXCIgbWF4PVwiLTJcIiBhdHRyaWJ1dGVzPVwiMFwiLz5cbiAgICA5M1x0ICAgICAgICAgICAgICAgICAgPC9Hcm91cD5cbiAgICA5NFx0ICAgICAgICAgICAgICAgICAgPENvbXBvbmVudCBpZD1cInR4dFBhc3N3b3JkXCIgbWluPVwiLTJcIiBtYXg9XCItMlwiIGF0dHJpYnV0ZXM9XCIwXCIvPlxuICAgIDk1XHQgICAgICAgICAgICAgICAgICA8R3JvdXAgdHlwZT1cIjEwMlwiIGF0dHJpYnV0ZXM9XCIwXCI+XG4gICAgOTZcdCAgICAgICAgICAgICAgICAgICAgICA8RW1wdHlTcGFjZSBtaW49XCIyXCIgcHJlZj1cIjJcIiBtYXg9XCItMlwiIGF0dHJpYnV0ZXM9XCIwXCIvPlxuICAgIDk3XHQgICAgICAgICAgICAgICAgICAgICAgPENvbXBvbmVudCBpZD1cImJ0bkNoZWNrXCIgbWluPVwiLTJcIiBwcmVmPVwiMzBcIiBtYXg9XCItMlwiIGF0dHJpYnV0ZXM9XCIwXCIvPlxuICAgIDk4XHQgICAgICAgICAgICAgICAgICA8L0dyb3VwPlxuICAgIDk5XHQgICAgICAgICAgICAgIDwvR3JvdXA+XG4gICAxMDBcdCAgICAgICAgICAgICAgPEVtcHR5U3BhY2UgbWluPVwiOFwiIHByZWY9XCI4XCIgbWF4PVwiLTJcIiBhdHRyaWJ1dGVzPVwiMFwiLz5cbiAgIDEwMVx0ICAgICAgICAgICAgICA8R3JvdXAgdHlwZT1cIjEwM1wiIGdyb3VwQWxpZ25tZW50PVwiMFwiIGF0dHJpYnV0ZXM9XCIwXCI+XG4gICAxMDJcdCAgICAgICAgICAgICAgICAgIDxHcm91cCB0eXBlPVwiMTAyXCIgYXR0cmlidXRlcz1cIjBcIj5cbiAgIDEwM1x0ICAgICAgICAgICAgICAgICAgICAgIDxFbXB0eVNwYWNlIG1pbj1cIjNcIiBwcmVmPVwiM1wiIG1heD1cIi0yXCIgYXR0cmlidXRlcz1cIjBcIi8+XG4gICAxMDRcdCAgICAgICAgICAgICAgICAgICAgICA8Q29tcG9uZW50IGlkPVwibGJDb25maXJtUGFzc3dvcmRcIiBtaW49XCItMlwiIG1heD1cIi0yXCIgYXR0cmlidXRlcz1cIjBcIi8+XG4gICAxMDVcdCAgICAgICAgICAgICAgICAgIDwvR3JvdXA+XG4gICAxMDZcdCAgICAgICAgICAgICAgICAgIDxDb21wb25lbnQgaWQ9XCJ0eHRDb25maXJtUGFzc3dvcmRcIiBtaW49XCItMlwiIG1heD1cIi0yXCIgYXR0cmlidXRlcz1cIjBcIi8+XG4gICAxMDdcdCAgICAgICAgICAgICAgPC9Hcm91cD5cbiAgIDEwOFx0ICAgICAgICAgICAgICA8RW1wdHlTcGFjZSBtaW49XCIzMFwiIHByZWY9XCIzMFwiIG1heD1cIi0yXCIgYXR0cmlidXRlcz1cIjBcIi8+XG4gICAxMDlcdCAgICAgICAgICAgICAgPEdyb3VwIHR5cGU9XCIxMDNcIiBncm91cEFsaWdubWVudD1cIjNcIiBhdHRyaWJ1dGVzPVwiMFwiPlxuICAgMTEwXHQgICAgICAgICAgICAgICAgICA8Q29tcG9uZW50IGlkPVwiYnRuRXhpdFwiIGFsaWdubWVudD1cIjNcIiBtaW49XCItMlwiIHByZWY9XCIzMFwiIG1heD1cIi0yXCIgYXR0cmlidXRlcz1cIjBcIi8+XG4gICAxMTFcdCAgICAgICAgICAgICAgICAgIDxDb21wb25lbnQgaWQ9XCJidG5DaGFuZ2VcIiBhbGlnbm1lbnQ9XCIzXCIgbWluPVwiLTJcIiBwcmVmPVwiMzBcIiBtYXg9XCItMlwiIGF0dHJpYnV0ZXM9XCIwXCIvPlxuICAgMTEyXHQgICAgICAgICAgICAgIDwvR3JvdXA+XG4gICAxMTNcdCAgICAgICAgICAgICAgPEVtcHR5U3BhY2UgcHJlZj1cIjQwXCIgbWF4PVwiMzI3NjdcIiBhdHRyaWJ1dGVzPVwiMFwiLz5cbiAgIDExNFx0ICAgICAgICAgIDwvR3JvdXA+XG4gICAxMTVcdCAgICAgIDwvR3JvdXA+XG4gICAxMTZcdCAgICA8L0RpbWVuc2lvbkxheW91dD5cbiAgIDExN1x0ICA8L0xheW91dD5cbiAgIDExOFx0ICA8U3ViQ29tcG9uZW50cz5cbiAgIDExOVx0ICAgIDxDb21wb25lbnQgY2xhc3M9XCJqYXZheC5zd2luZy5KTGFiZWxcIiBuYW1lPVwiakxhYmVsMVwiPlxuICAgMTIwXHQgICAgICA8UHJvcGVydGllcz5cbiAgIDEyMVx0ICAgICAgICA8UHJvcGVydHkgbmFtZT1cImZvbnRcIiB0eXBlPVwiamF2YS5hd3QuRm9udFwiIGVkaXRvcj1cIm9yZy5uZXRiZWFucy5iZWFuaW5mby5lZGl0b3JzLkZvbnRFZGl0b3JcIj5cbiAgIDEyMlx0ICAgICAgICAgIDxGb250IG5hbWU9XCJBcmlhbFwiIHNpemU9XCIzNlwiIHN0eWxlPVwiMVwiLz5cbiAgIDEyM1x0ICAgICAgICA8L1Byb3BlcnR5PlxuICAgMTI0XHQgICAgICAgIDxQcm9wZXJ0eSBuYW1lPVwiZm9yZWdyb3VuZFwiIHR5cGU9XCJqYXZhLmF3dC5Db2xvclwiIGVkaXRvcj1cIm9yZy5uZXRiZWFucy5iZWFuaW5mby5lZGl0b3JzLkNvbG9yRWRpdG9yXCI+XG4gICAxMjVcdCAgICAgICAgICA8Q29sb3IgYmx1ZT1cIjBcIiBncmVlbj1cImEyXCIgaWQ9XCJBY3Rpb25zLlllbGxvd1wiIHBhbGV0dGU9XCIzXCIgcmVkPVwiZWRcIiB0eXBlPVwicGFsZXR0ZVwiLz5cbiAgIDEyNlx0ICAgICAgICA8L1Byb3BlcnR5PlxuICAgMTI3XHQgICAgICAgIDxQcm9wZXJ0eSBuYW1lPVwidGV4dFwiIHR5cGU9XCJqYXZhLmxhbmcuU3RyaW5nXCIgdmFsdWU9XCImI3gxMTA7JiN4MWVkNDtJIE0mI3gxZWFjO1QgS0gmI3gxZWE4O1VcIi8+XG4gICAxMjhcdCAgICAgIDwvUHJvcGVydGllcz5cbiAgIDEyOVx0ICAgIDwvQ29tcG9uZW50PlxuICAgMTMwXHQgICAgPENvbXBvbmVudCBjbGFzcz1cImphdmF4LnN3aW5nLkpMYWJlbFwiIG5hbWU9XCJqTGFiZWwyXCI+XG4gICAxMzFcdCAgICAgIDxQcm9wZXJ0aWVzPlxuICAgMTMyXHQgICAgICAgIDxQcm9wZXJ0eSBuYW1lPVwiZm9udFwiIHR5cGU9XCJqYXZhLmF3dC5Gb250XCIgZWRpdG9yPVwib3JnLm5ldGJlYW5zLmJlYW5pbmZvLmVkaXRvcnMuRm9udEVkaXRvclwiPlxuICAgMTMzXHQgICAgICAgICAgPEZvbnQgbmFtZT1cIkFyaWFsXCIgc2l6ZT1cIjE0XCIgc3R5bGU9XCIxXCIvPlxuICAgMTM0XHQgICAgICAgIDwvUHJvcGVydHk+XG4gICAxMzVcdCAgICAgICAgPFByb3BlcnR5IG5hbWU9XCJ0ZXh0XCIgdHlwZT1cImphdmEubGFuZy5TdHJpbmdcIiB2YWx1ZT1cIlMmI3gxZWQxOyAmI3gxMTE7aSYjeDFlYzc7biB0aG8mI3gxZWExO2k6IFwiLz5cbiAgIDEzNlx0ICAgICAgPC9Qcm9wZXJ0aWVzPlxuICAgMTM3XHQgICAgPC9Db21wb25lbnQ+XG4gICAxMzhcdCAgICA8Q29tcG9uZW50IGNsYXNzPVwiamF2YXguc3dpbmcuSkxhYmVsXCIgbmFtZT1cImxiTmV3UGFzc3dvcmRcIj5cbiAgIDEzOVx0ICAgICAgPFByb3BlcnRpZXM+XG4gICAxNDBcdCAgICAgICAgPFByb3BlcnR5IG5hbWU9XCJmb250XCIgdHlwZT1cImphdmEuYXd0LkZvbnRcIiBlZGl0b3I9XCJvcmcubmV0YmVhbnMuYmVhbmluZm8uZWRpdG9ycy5Gb250RWRpdG9yXCI+XG4gICAxNDFcdCAgICAgICAgICA8Rm9udCBuYW1lPVwiQXJpYWxcIiBzaXplPVwiMTRcIiBzdHlsZT1cIjFcIi8+XG4gICAxNDJcdCAgICAgICAgPC9Qcm9wZXJ0eT5cbiAgIDE0M1x0ICAgICAgICA8UHJvcGVydHkgbmFtZT1cInRleHRcIiB0eXBlPVwiamF2YS5sYW5nLlN0cmluZ1wiIHZhbHVlPVwiTSYjeDFlYWQ7dCBraCYjeDFlYTk7dSBtJiN4MWVkYjtpOlwiLz5cbiAgIDE0NFx0ICAgICAgPC9Qcm9wZXJ0aWVzPlxuICAgMTQ1XHQgICAgPC9Db21wb25lbnQ+XG4gICAxNDZcdCAgICA8Q29tcG9uZW50IGNsYXNzPVwiamF2YXguc3dpbmcuSkxhYmVsXCIgbmFtZT1cImxiQ29uZmlybVBhc3N3b3JkXCI+XG4gICAxNDdcdCAgICAgIDxQcm9wZXJ0aWVzPlxuICAgMTQ4XHQgICAgICAgIDxQcm9wZXJ0eSBuYW1lPVwiZm9udFwiIHR5cGU9XCJqYXZhLmF3dC5Gb250XCIgZWRpdG9yPVwib3JnLm5ldGJlYW5zLmJlYW5pbmZvLmVkaXRvcnMuRm9udEVkaXRvclwiPlxuICAgMTQ5XHQgICAgICAgICAgPEZvbnQgbmFtZT1cIkFyaWFsXCIgc2l6ZT1cIjE0XCIgc3R5bGU9XCIxXCIvPlxuICAgMTUwXHQgICAgICAgIDwvUHJvcGVydHk+XG4gICAxNTFcdCAgICAgICAgPFByb3BlcnR5IG5hbWU9XCJ0ZXh0XCIgdHlwZT1cImphdmEubGFuZy5TdHJpbmdcIiB2YWx1ZT1cIlgmI3hlMTtjIG5oJiN4MWVhZDtuIG0mI3gxZWFkO3Qga2gmI3gxZWE5O3U6XCIvPlxuICAgMTUyXHQgICAgICA8L1Byb3BlcnRpZXM+XG4gICAxNTNcdCAgICA8L0NvbXBvbmVudD5cbiAgIDE1NFx0ICAgIDxDb21wb25lbnQgY2xhc3M9XCJqYXZheC5zd2luZy5KU2VwYXJhdG9yXCIgbmFtZT1cImpTZXBhcmF0b3IxXCI+XG4gICAxNTVcdCAgICA8L0NvbXBvbmVudD5cbiAgIDE1Nlx0ICAgIDxDb21wb25lbnQgY2xhc3M9XCJqYXZheC5zd2luZy5KVGV4dEZpZWxkXCIgbmFtZT1cInR4dFBob25lXCI+XG4gICAxNTdcdCAgICA8L0NvbXBvbmVudD5cbiAgIDE1OFx0ICAgIDxDb21wb25lbnQgY2xhc3M9XCJqYXZheC5zd2luZy5KQnV0dG9uXCIgbmFtZT1cImJ0bkNoZWNrXCI+XG4gICAxNTlcdCAgICAgIDxQcm9wZXJ0aWVzPlxuICAgMTYwXHQgICAgICAgIDxQcm9wZXJ0eSBuYW1lPVwiZm9udFwiIHR5cGU9XCJqYXZhLmF3dC5Gb250XCIgZWRpdG9yPVwib3JnLm5ldGJlYW5zLmJlYW5pbmZvLmVkaXRvcnMuRm9udEVkaXRvclwiPlxuICAgMTYxXHQgICAgICAgICAgPEZvbnQgbmFtZT1cIkFyaWFsXCIgc2l6ZT1cIjE0XCIgc3R5bGU9XCIxXCIvPlxuICAgMTYyXHQgICAgICAgIDwvUHJvcGVydHk+XG4gICAxNjNcdCAgICAgICAgPFByb3BlcnR5IG5hbWU9XCJpY29uXCIgdHlwZT1cImphdmF4LnN3aW5nLkljb25cIiBlZGl0b3I9XCJvcmcubmV0YmVhbnMubW9kdWxlcy5mb3JtLmVkaXRvcnMyLkljb25FZGl0b3JcIj5cbiAgIDE2NFx0ICAgICAgICAgIDxJbWFnZSBpY29uVHlwZT1cIjNcIiBuYW1lPVwiL0ltYWdlcy9zZWFyY2gucG5nXCIvPlxuICAgMTY1XHQgICAgICAgIDwvUHJvcGVydHk+XG4gICAxNjZcdCAgICAgICAgPFByb3BlcnR5IG5hbWU9XCJ0ZXh0XCIgdHlwZT1cImphdmEubGFuZy5TdHJpbmdcIiB2YWx1ZT1cIktpJiN4MWVjMzttIHRyYVwiLz5cbiAgIDE2N1x0ICAgICAgICA8UHJvcGVydHkgbmFtZT1cImN1cnNvclwiIHR5cGU9XCJqYXZhLmF3dC5DdXJzb3JcIiBlZGl0b3I9XCJvcmcubmV0YmVhbnMubW9kdWxlcy5mb3JtLmVkaXRvcnMyLkN1cnNvckVkaXRvclwiPlxuICAgMTY4XHQgICAgICAgICAgPENvbG9yIGlkPVwiSGFuZCBDdXJzb3JcIi8+XG4gICAxNjlcdCAgICAgICAgPC9Qcm9wZXJ0eT5cbiAgIDE3MFx0ICAgICAgPC9Qcm9wZXJ0aWVzPlxuICAgMTcxXHQgICAgPC9Db21wb25lbnQ+XG4gICAxNzJcdCAgICA8Q29tcG9uZW50IGNsYXNzPVwiamF2YXguc3dpbmcuSlBhc3N3b3JkRmllbGRcIiBuYW1lPVwidHh0UGFzc3dvcmRcIj5cbiAgIDE3M1x0ICAgIDwvQ29tcG9uZW50PlxuICAgMTc0XHQgICAgPENvbXBvbmVudCBjbGFzcz1cImphdmF4LnN3aW5nLkpQYXNzd29yZEZpZWxkXCIgbmFtZT1cInR4dENvbmZpcm1QYXNzd29yZFwiPlxuICAgMTc1XHQgICAgPC9Db21wb25lbnQ+XG4gICAxNzZcdCAgICA8Q29tcG9uZW50IGNsYXNzPVwiamF2YXguc3dpbmcuSkJ1dHRvblwiIG5hbWU9XCJidG5DaGFuZ2VcIj5cbiAgIDE3N1x0ICAgICAgPFByb3BlcnRpZXM+XG4gICAxNzhcdCAgICAgICAgPFByb3BlcnR5IG5hbWU9XCJmb250XCIgdHlwZT1cImphdmEuYXd0LkZvbnRcIiBlZGl0b3I9XCJvcmcubmV0YmVhbnMuYmVhbmluZm8uZWRpdG9ycy5Gb250RWRpdG9yXCI+XG4gICAxNzlcdCAgICAgICAgICA8Rm9udCBuYW1lPVwiQXJpYWxcIiBzaXplPVwiMTRcIiBzdHlsZT1cIjFcIi8+XG4gICAxODBcdCAgICAgICAgPC9Qcm9wZXJ0eT5cbiAgIDE4MVx0ICAgICAgICA8UHJvcGVydHkgbmFtZT1cImljb25cIiB0eXBlPVwiamF2YXguc3dpbmcuSWNvblwiIGVkaXRvcj1cIm9yZy5uZXRiZWFucy5tb2R1bGVzLmZvcm0uZWRpdG9yczIuSWNvbkVkaXRvclwiPlxuICAgMTgyXHQgICAgICAgICAgPEltYWdlIGljb25UeXBlPVwiM1wiIG5hbWU9XCIvSW1hZ2VzL3Jlc2V0LXBhc3N3b3JkLnBuZ1wiLz5cbiAgIDE4M1x0ICAgICAgICA8L1Byb3BlcnR5PlxuICAgMTg0XHQgICAgICAgIDxQcm9wZXJ0eSBuYW1lPVwidGV4dFwiIHR5cGU9XCJqYXZhLmxhbmcuU3RyaW5nXCIgdmFsdWU9XCImI3gxMTA7JiN4MWVkNTtpIG0mI3gxZWFkO3Qga2gmI3gxZWE5O3VcIi8+XG4gICAxODVcdCAgICAgICAgPFByb3BlcnR5IG5hbWU9XCJjdXJzb3JcIiB0eXBlPVwiamF2YS5hd3QuQ3Vyc29yXCIgZWRpdG9yPVwib3JnLm5ldGJlYW5zLm1vZHVsZXMuZm9ybS5lZGl0b3JzMi5DdXJzb3JFZGl0b3JcIj5cbiAgIDE4Nlx0ICAgICAgICAgIDxDb2xvciBpZD1cIkhhbmQgQ3Vyc29yXCIvPlxuICAgMTg3XHQgICAgICAgIDwvUHJvcGVydHk+XG4gICAxODhcdCAgICAgIDwvUHJvcGVydGllcz5cbiAgIDE4OVx0ICAgIDwvQ29tcG9uZW50PlxuICAgMTkwXHQgICAgPENvbXBvbmVudCBjbGFzcz1cImphdmF4LnN3aW5nLkpCdXR0b25cIiBuYW1lPVwiYnRuRXhpdFwiPlxuICAgMTkxXHQgICAgICA8UHJvcGVydGllcz5cbiAgIDE5Mlx0ICAgICAgICA8UHJvcGVydHkgbmFtZT1cImZvbnRcIiB0eXBlPVwiamF2YS5hd3QuRm9udFwiIGVkaXRvcj1cIm9yZy5uZXRiZWFucy5iZWFuaW5mby5lZGl0b3JzLkZvbnRFZGl0b3JcIj5cbiAgIDE5M1x0ICAgICAgICAgIDxGb250IG5hbWU9XCJBcmlhbFwiIHNpemU9XCIxNFwiIHN0eWxlPVwiMVwiLz5cbiAgIDE5NFx0ICAgICAgICA8L1Byb3BlcnR5PlxuICAgMTk1XHQgICAgICAgIDxQcm9wZXJ0eSBuYW1lPVwiaWNvblwiIHR5cGU9XCJqYXZheC5zd2luZy5JY29uXCIgZWRpdG9yPVwib3JnLm5ldGJlYW5zLm1vZHVsZXMuZm9ybS5lZGl0b3JzMi5JY29uRWRpdG9yXCI+XG4gICAxOTZcdCAgICAgICAgICA8SW1hZ2UgaWNvblR5cGU9XCIzXCIgbmFtZT1cIi9JbWFnZXMvbG9nb3V0LnBuZ1wiLz5cbiAgIDE5N1x0ICAgICAgICA8L1Byb3BlcnR5PlxuICAgMTk4XHQgICAgICAgIDxQcm9wZXJ0eSBuYW1lPVwidGV4dFwiIHR5cGU9XCJqYXZhLmxhbmcuU3RyaW5nXCIgdmFsdWU9XCJUaG8mI3hlMTt0XCIvPlxuICAgMTk5XHQgICAgICAgIDxQcm9wZXJ0eSBuYW1lPVwiY3Vyc29yXCIgdHlwZT1cImphdmEuYXd0LkN1cnNvclwiIGVkaXRvcj1cIm9yZy5uZXRiZWFucy5tb2R1bGVzLmZvcm0uZWRpdG9yczIuQ3Vyc29yRWRpdG9yXCI+XG4gICAyMDBcdCAgICAgICAgICA8Q29sb3IgaWQ9XCJIYW5kIEN1cnNvclwiLz5cbiAgIDIwMVx0ICAgICAgICA8L1Byb3BlcnR5PlxuICAgMjAyXHQgICAgICA8L1Byb3BlcnRpZXM+XG4gICAyMDNcdCAgICAgIDxFdmVudHM+XG4gICAyMDRcdCAgICAgICAgPEV2ZW50SGFuZGxlciBldmVudD1cImFjdGlvblBlcmZvcm1lZFwiIGxpc3RlbmVyPVwiamF2YS5hd3QuZXZlbnQuQWN0aW9uTGlzdGVuZXJcIiBwYXJhbWV0ZXJzPVwiamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnRcIiBoYW5kbGVyPVwiYnRuRXhpdEFjdGlvblBlcmZvcm1lZFwiLz5cbiAgIDIwNVx0ICAgICAgPC9FdmVudHM+XG4gICAyMDZcdCAgICA8L0NvbXBvbmVudD5cbiAgIDIwN1x0ICA8L1N1YkNvbXBvbmVudHM+XG4gICAyMDhcdDwvRm9ybT5cbiAgIDIwOVx0XG5Ub3RhbCBsaW5lcyBpbiBmaWxlOiAyMDlcbiIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX0sImRkMTk0ZjA0LWVmY2YtNDNmNy05NGNmLTU1YjMwOGRmYTlmYzt0b29sdV8wMVRxZlVLN1J0dll5ZnE5c0JDRTdoMXEiOnsicmVxdWVzdElkIjoiZGQxOTRmMDQtZWZjZi00M2Y3LTk0Y2YtNTViMzA4ZGZhOWZjIiwidG9vbFVzZUlkIjoidG9vbHVfMDFUcWZVSzdSdHZZeWZxOXNCQ0U3aDFxIiwicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiU3VjY2Vzc2Z1bGx5IGVkaXRlZCB0aGUgZmlsZSBzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9Gb3Jnb3RQYXNzd29yZC5mb3JtLlxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZSBmb3IgZW50cnkgd2l0aCBpbmRleCBbMF06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgIDE1NVx0ICAgIDwvQ29tcG9uZW50PlxuICAgMTU2XHQgICAgPENvbXBvbmVudCBjbGFzcz1cImphdmF4LnN3aW5nLkpUZXh0RmllbGRcIiBuYW1lPVwidHh0UGhvbmVcIj5cbiAgIDE1N1x0ICAgIDwvQ29tcG9uZW50PlxuICAgMTU4XHQgICAgPENvbXBvbmVudCBjbGFzcz1cImphdmF4LnN3aW5nLkpCdXR0b25cIiBuYW1lPVwiYnRuQ2hlY2tcIj5cbiAgIDE1OVx0ICAgICAgPFByb3BlcnRpZXM+XG4gICAxNjBcdCAgICAgICAgPFByb3BlcnR5IG5hbWU9XCJmb250XCIgdHlwZT1cImphdmEuYXd0LkZvbnRcIiBlZGl0b3I9XCJvcmcubmV0YmVhbnMuYmVhbmluZm8uZWRpdG9ycy5Gb250RWRpdG9yXCI+XG4gICAxNjFcdCAgICAgICAgICA8Rm9udCBuYW1lPVwiQXJpYWxcIiBzaXplPVwiMTRcIiBzdHlsZT1cIjFcIi8+XG4gICAxNjJcdCAgICAgICAgPC9Qcm9wZXJ0eT5cbiAgIDE2M1x0ICAgICAgICA8UHJvcGVydHkgbmFtZT1cImljb25cIiB0eXBlPVwiamF2YXguc3dpbmcuSWNvblwiIGVkaXRvcj1cIm9yZy5uZXRiZWFucy5tb2R1bGVzLmZvcm0uZWRpdG9yczIuSWNvbkVkaXRvclwiPlxuICAgMTY0XHQgICAgICAgICAgPEltYWdlIGljb25UeXBlPVwiM1wiIG5hbWU9XCIvSW1hZ2VzL3NlYXJjaC5wbmdcIi8+XG4gICAxNjVcdCAgICAgICAgPC9Qcm9wZXJ0eT5cbiAgIDE2Nlx0ICAgICAgICA8UHJvcGVydHkgbmFtZT1cInRleHRcIiB0eXBlPVwiamF2YS5sYW5nLlN0cmluZ1wiIHZhbHVlPVwiS2kmI3gxZWMzO20gdHJhXCIvPlxuICAgMTY3XHQgICAgICAgIDxQcm9wZXJ0eSBuYW1lPVwiY3Vyc29yXCIgdHlwZT1cImphdmEuYXd0LkN1cnNvclwiIGVkaXRvcj1cIm9yZy5uZXRiZWFucy5tb2R1bGVzLmZvcm0uZWRpdG9yczIuQ3Vyc29yRWRpdG9yXCI+XG4gICAxNjhcdCAgICAgICAgICA8Q29sb3IgaWQ9XCJIYW5kIEN1cnNvclwiLz5cbiAgIDE2OVx0ICAgICAgICA8L1Byb3BlcnR5PlxuICAgMTcwXHQgICAgICA8L1Byb3BlcnRpZXM+XG4gICAxNzFcdCAgICAgIDxFdmVudHM+XG4gICAxNzJcdCAgICAgICAgPEV2ZW50SGFuZGxlciBldmVudD1cImFjdGlvblBlcmZvcm1lZFwiIGxpc3RlbmVyPVwiamF2YS5hd3QuZXZlbnQuQWN0aW9uTGlzdGVuZXJcIiBwYXJhbWV0ZXJzPVwiamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnRcIiBoYW5kbGVyPVwiYnRuQ2hlY2tBY3Rpb25QZXJmb3JtZWRcIi8+XG4gICAxNzNcdCAgICAgIDwvRXZlbnRzPlxuICAgMTc0XHQgICAgPC9Db21wb25lbnQ+XG4gICAxNzVcdCAgICA8Q29tcG9uZW50IGNsYXNzPVwiamF2YXguc3dpbmcuSlBhc3N3b3JkRmllbGRcIiBuYW1lPVwidHh0UGFzc3dvcmRcIj5cbiAgIDE3Nlx0ICAgIDwvQ29tcG9uZW50PlxuICAgMTc3XHQgICAgPENvbXBvbmVudCBjbGFzcz1cImphdmF4LnN3aW5nLkpQYXNzd29yZEZpZWxkXCIgbmFtZT1cInR4dENvbmZpcm1QYXNzd29yZFwiPlxuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlIGZvciBlbnRyeSB3aXRoIGluZGV4IFsxXTpcblJlcGxhY2VtZW50IHN1Y2Nlc3NmdWwuXG5FZGl0ZWQgc2VjdGlvbiBhZnRlciBJREUgYXV0by1mb3JtYXR0aW5nIHdhcyBhcHBsaWVkOlxuICAgMTc2XHQgICAgPC9Db21wb25lbnQ+XG4gICAxNzdcdCAgICA8Q29tcG9uZW50IGNsYXNzPVwiamF2YXguc3dpbmcuSlBhc3N3b3JkRmllbGRcIiBuYW1lPVwidHh0Q29uZmlybVBhc3N3b3JkXCI+XG4gICAxNzhcdCAgICA8L0NvbXBvbmVudD5cbiAgIDE3OVx0ICAgIDxDb21wb25lbnQgY2xhc3M9XCJqYXZheC5zd2luZy5KQnV0dG9uXCIgbmFtZT1cImJ0bkNoYW5nZVwiPlxuICAgMTgwXHQgICAgICA8UHJvcGVydGllcz5cbiAgIDE4MVx0ICAgICAgICA8UHJvcGVydHkgbmFtZT1cImZvbnRcIiB0eXBlPVwiamF2YS5hd3QuRm9udFwiIGVkaXRvcj1cIm9yZy5uZXRiZWFucy5iZWFuaW5mby5lZGl0b3JzLkZvbnRFZGl0b3JcIj5cbiAgIDE4Mlx0ICAgICAgICAgIDxGb250IG5hbWU9XCJBcmlhbFwiIHNpemU9XCIxNFwiIHN0eWxlPVwiMVwiLz5cbiAgIDE4M1x0ICAgICAgICA8L1Byb3BlcnR5PlxuICAgMTg0XHQgICAgICAgIDxQcm9wZXJ0eSBuYW1lPVwiaWNvblwiIHR5cGU9XCJqYXZheC5zd2luZy5JY29uXCIgZWRpdG9yPVwib3JnLm5ldGJlYW5zLm1vZHVsZXMuZm9ybS5lZGl0b3JzMi5JY29uRWRpdG9yXCI+XG4gICAxODVcdCAgICAgICAgICA8SW1hZ2UgaWNvblR5cGU9XCIzXCIgbmFtZT1cIi9JbWFnZXMvcmVzZXQtcGFzc3dvcmQucG5nXCIvPlxuICAgMTg2XHQgICAgICAgIDwvUHJvcGVydHk+XG4gICAxODdcdCAgICAgICAgPFByb3BlcnR5IG5hbWU9XCJ0ZXh0XCIgdHlwZT1cImphdmEubGFuZy5TdHJpbmdcIiB2YWx1ZT1cIiYjeDExMDsmI3gxZWQ1O2kgbSYjeDFlYWQ7dCBraCYjeDFlYTk7dVwiLz5cbiAgIDE4OFx0ICAgICAgICA8UHJvcGVydHkgbmFtZT1cImN1cnNvclwiIHR5cGU9XCJqYXZhLmF3dC5DdXJzb3JcIiBlZGl0b3I9XCJvcmcubmV0YmVhbnMubW9kdWxlcy5mb3JtLmVkaXRvcnMyLkN1cnNvckVkaXRvclwiPlxuICAgMTg5XHQgICAgICAgICAgPENvbG9yIGlkPVwiSGFuZCBDdXJzb3JcIi8+XG4gICAxOTBcdCAgICAgICAgPC9Qcm9wZXJ0eT5cbiAgIDE5MVx0ICAgICAgPC9Qcm9wZXJ0aWVzPlxuICAgMTkyXHQgICAgICA8RXZlbnRzPlxuICAgMTkzXHQgICAgICAgIDxFdmVudEhhbmRsZXIgZXZlbnQ9XCJhY3Rpb25QZXJmb3JtZWRcIiBsaXN0ZW5lcj1cImphdmEuYXd0LmV2ZW50LkFjdGlvbkxpc3RlbmVyXCIgcGFyYW1ldGVycz1cImphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50XCIgaGFuZGxlcj1cImJ0bkNoYW5nZUFjdGlvblBlcmZvcm1lZFwiLz5cbiAgIDE5NFx0ICAgICAgPC9FdmVudHM+XG4gICAxOTVcdCAgICA8L0NvbXBvbmVudD5cbiAgIDE5Nlx0ICAgIDxDb21wb25lbnQgY2xhc3M9XCJqYXZheC5zd2luZy5KQnV0dG9uXCIgbmFtZT1cImJ0bkV4aXRcIj5cbiAgIDE5N1x0ICAgICAgPFByb3BlcnRpZXM+XG4gICAxOThcdCAgICAgICAgPFByb3BlcnR5IG5hbWU9XCJmb250XCIgdHlwZT1cImphdmEuYXd0LkZvbnRcIiBlZGl0b3I9XCJvcmcubmV0YmVhbnMuYmVhbmluZm8uZWRpdG9ycy5Gb250RWRpdG9yXCI+XG5cblJldmlldyB0aGUgY2hhbmdlcyBhbmQgbWFrZSBzdXJlIHRoZXkgYXJlIGFzIGV4cGVjdGVkIChjb3JyZWN0IGluZGVudGF0aW9uLCBubyBkdXBsaWNhdGUgbGluZXMsIGV0YykuXG5FZGl0IHRoZSBmaWxlIGFnYWluIGlmIG5lY2Vzc2FyeS5cbiIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX0sIjAzMWFlY2MzLTZmNTItNDJjMy1hOTM5LWYyMDhkM2MxNmU4Njt0b29sdV8wMVlTeW9UNjE0WkFIY21nYnJrOFZOTlYiOnsicmVxdWVzdElkIjoiMDMxYWVjYzMtNmY1Mi00MmMzLWE5MzktZjIwOGQzYzE2ZTg2IiwidG9vbFVzZUlkIjoidG9vbHVfMDFZU3lvVDYxNFpBSGNtZ2JyazhWTk5WIiwicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiU3VjY2Vzc2Z1bGx5IGVkaXRlZCB0aGUgZmlsZSBzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9Gb3Jnb3RQYXNzd29yZC5qYXZhLlxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZSBmb3IgZW50cnkgd2l0aCBpbmRleCBbMF06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgICAgM1x0ICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9HVUlGb3Jtcy9KRnJhbWUuamF2YSB0byBlZGl0IHRoaXMgdGVtcGxhdGVcbiAgICAgNFx0ICovXG4gICAgIDVcdHBhY2thZ2UgaW50ZXJuZXQubWFuZ2VtZW50LnN5c3RlbTtcbiAgICAgNlx0XG4gICAgIDdcdGltcG9ydCBEQU8uU3Vic2NyaWJlckRBTztcbiAgICAgOFx0aW1wb3J0IE1vZGVsLlN1YnNjcmliZXI7XG4gICAgIDlcdGltcG9ydCBqYXZheC5zd2luZy5KT3B0aW9uUGFuZTtcbiAgICAxMFx0XG4gICAgMTFcdC8qKlxuICAgIDEyXHQgKlxuICAgIDEzXHQgKiBAYXV0aG9yIE5nb2MgVGhhb1xuXG5SZXZpZXcgdGhlIGNoYW5nZXMgYW5kIG1ha2Ugc3VyZSB0aGV5IGFyZSBhcyBleHBlY3RlZCAoY29ycmVjdCBpbmRlbnRhdGlvbiwgbm8gZHVwbGljYXRlIGxpbmVzLCBldGMpLlxuRWRpdCB0aGUgZmlsZSBhZ2FpbiBpZiBuZWNlc3NhcnkuXG4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCIxMDJkNmE3My01ZTQ5LTRmYjUtOTgxNy0yMDZiODgxYjJkMDk7dG9vbHVfMDFQcFdpMTlQakVuOU4xZzNIZllHbzhLIjp7InJlcXVlc3RJZCI6IjEwMmQ2YTczLTVlNDktNGZiNS05ODE3LTIwNmI4ODFiMmQwOSIsInRvb2xVc2VJZCI6InRvb2x1XzAxUHBXaTE5UGpFbjlOMWczSGZZR284SyIsInBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IkhlcmUncyB0aGUgcmVzdWx0IG9mIHJ1bm5pbmcgYGNhdCAtbmAgb24gc3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vRm9yZ290UGFzc3dvcmQuamF2YTpcbiAgICAgMVx0LypcbiAgICAgMlx0ICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9MaWNlbnNlcy9saWNlbnNlLWRlZmF1bHQudHh0IHRvIGNoYW5nZSB0aGlzIGxpY2Vuc2VcbiAgICAgM1x0ICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9HVUlGb3Jtcy9KRnJhbWUuamF2YSB0byBlZGl0IHRoaXMgdGVtcGxhdGVcbiAgICAgNFx0ICovXG4gICAgIDVcdHBhY2thZ2UgaW50ZXJuZXQubWFuZ2VtZW50LnN5c3RlbTtcbiAgICAgNlx0XG4gICAgIDdcdGltcG9ydCBEQU8uU3Vic2NyaWJlckRBTztcbiAgICAgOFx0aW1wb3J0IE1vZGVsLlN1YnNjcmliZXI7XG4gICAgIDlcdGltcG9ydCBqYXZheC5zd2luZy5KT3B0aW9uUGFuZTtcbiAgICAxMFx0XG4gICAgMTFcdC8qKlxuICAgIDEyXHQgKlxuICAgIDEzXHQgKiBAYXV0aG9yIE5nb2MgVGhhb1xuICAgIDE0XHQgKi9cbiAgICAxNVx0cHVibGljIGNsYXNzIEZvcmdvdFBhc3N3b3JkIGV4dGVuZHMgamF2YXguc3dpbmcuSkZyYW1lIHtcbiAgICAxNlx0ICAgIHByaXZhdGUgU3Vic2NyaWJlciBjdXJyZW50U3Vic2NyaWJlciA9IG51bGw7XG4gICAgMTdcdCAgICBwdWJsaWMgU3RyaW5nIHBob25lUGF0dGVybiA9IFwiXlswLTldKiRcIjtcbiAgICAxOFx0XG4gICAgMTlcdCAgICAvKipcbiAgICAyMFx0ICAgICAqIENyZWF0ZXMgbmV3IGZvcm0gRm9yZ290UGFzc3dvcmRcblRvdGFsIGxpbmVzIGluIGZpbGU6IDMwNVxuIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiN2M4ODQxOGMtY2U4Ni00NzlhLTllMjQtY2FjMzcwMTkxZDAzO3Rvb2x1XzAxTWlmWHJ2YnM1eFFkdWNNaFI5V0pzVyI6eyJyZXF1ZXN0SWQiOiI3Yzg4NDE4Yy1jZTg2LTQ3OWEtOWUyNC1jYWMzNzAxOTFkMDMiLCJ0b29sVXNlSWQiOiJ0b29sdV8wMU1pZlhydmJzNXhRZHVjTWhSOVdKc1ciLCJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJTdWNjZXNzZnVsbHkgZWRpdGVkIHRoZSBmaWxlIHNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL0ZvcmdvdFBhc3N3b3JkLmphdmEuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlIGZvciBlbnRyeSB3aXRoIGluZGV4IFswXTpcblJlcGxhY2VtZW50IHN1Y2Nlc3NmdWwuXG5FZGl0ZWQgc2VjdGlvbiBhZnRlciBJREUgYXV0by1mb3JtYXR0aW5nIHdhcyBhcHBsaWVkOlxuICAgICAzXHQgKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0dVSUZvcm1zL0pGcmFtZS5qYXZhIHRvIGVkaXQgdGhpcyB0ZW1wbGF0ZVxuICAgICA0XHQgKi9cbiAgICAgNVx0cGFja2FnZSBpbnRlcm5ldC5tYW5nZW1lbnQuc3lzdGVtO1xuICAgICA2XHRcbiAgICAgN1x0aW1wb3J0IERBTy5TdWJzY3JpYmVyREFPO1xuICAgICA4XHRpbXBvcnQgTW9kZWwuU3Vic2NyaWJlcjtcbiAgICAgOVx0aW1wb3J0IGphdmF4LnN3aW5nLkpPcHRpb25QYW5lO1xuICAgIDEwXHRpbXBvcnQgaW50ZXJuZXQubWFuZ2VtZW50LnN5c3RlbS5Mb2dpbjtcbiAgICAxMVx0XG4gICAgMTJcdC8qKlxuICAgIDEzXHQgKlxuICAgIDE0XHQgKiBAYXV0aG9yIE5nb2MgVGhhb1xuXG5SZXZpZXcgdGhlIGNoYW5nZXMgYW5kIG1ha2Ugc3VyZSB0aGV5IGFyZSBhcyBleHBlY3RlZCAoY29ycmVjdCBpbmRlbnRhdGlvbiwgbm8gZHVwbGljYXRlIGxpbmVzLCBldGMpLlxuRWRpdCB0aGUgZmlsZSBhZ2FpbiBpZiBuZWNlc3NhcnkuXG4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCJjMmY2NWUzZC1lMDYzLTQxYjUtYjYwMC04OGNhZjc0ZDdhNTI7dG9vbHVfMDExb0NHUldvYVF1TWNBd0NaN0tIUnZCIjp7InJlcXVlc3RJZCI6ImMyZjY1ZTNkLWUwNjMtNDFiNS1iNjAwLTg4Y2FmNzRkN2E1MiIsInRvb2xVc2VJZCI6InRvb2x1XzAxMW9DR1JXb2FRdU1jQXdDWjdLSFJ2QiIsInBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IkhlcmUncyB0aGUgcmVzdWx0IG9mIHJ1bm5pbmcgYGNhdCAtbmAgb24gc3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vRm9yZ290UGFzc3dvcmQuamF2YTpcbiAgIDIyMFx0XG4gICAyMjFcdCAgICAgICAgICAgIGlmIChjdXJyZW50U3Vic2NyaWJlciAhPSBudWxsKSB7XG4gICAyMjJcdCAgICAgICAgICAgICAgICAvLyBQaG9uZSBudW1iZXIgZm91bmQsIHNob3cgcGFzc3dvcmQgZmllbGRzXG4gICAyMjNcdCAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcIlTDrG0gdGjhuqV5IHTDoGkga2hv4bqjbiB24bubaSBz4buRIMSRaeG7h24gdGhv4bqhaSBuw6B5IVwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLklORk9STUFUSU9OX01FU1NBR0UpO1xuICAgMjI0XHRcbiAgIDIyNVx0ICAgICAgICAgICAgICAgIGJ0bkV4aXQuc2V0VmlzaWJsZSh0cnVlKTtcbiAgIDIyNlx0ICAgICAgICAgICAgICAgIGJ0bkNoYW5nZS5zZXRWaXNpYmxlKHRydWUpO1xuICAgMjI3XHQgICAgICAgICAgICAgICAgbGJOZXdQYXNzd29yZC5zZXRWaXNpYmxlKHRydWUpO1xuICAgMjI4XHQgICAgICAgICAgICAgICAgbGJDb25maXJtUGFzc3dvcmQuc2V0VmlzaWJsZSh0cnVlKTtcbiAgIDIyOVx0ICAgICAgICAgICAgICAgIHR4dFBhc3N3b3JkLnNldFZpc2libGUodHJ1ZSk7XG4gICAyMzBcdCAgICAgICAgICAgICAgICB0eHRDb25maXJtUGFzc3dvcmQuc2V0VmlzaWJsZSh0cnVlKTtcbiAgIDIzMVx0XG4gICAyMzJcdCAgICAgICAgICAgICAgICAvLyBEaXNhYmxlIHBob25lIGZpZWxkIGFuZCBjaGVjayBidXR0b25cbiAgIDIzM1x0ICAgICAgICAgICAgICAgIHR4dFBob25lLnNldEVkaXRhYmxlKGZhbHNlKTtcbiAgIDIzNFx0ICAgICAgICAgICAgICAgIGJ0bkNoZWNrLnNldEVuYWJsZWQoZmFsc2UpO1xuICAgMjM1XHQgICAgICAgICAgICB9IGVsc2Uge1xuICAgMjM2XHQgICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXCJLaMO0bmcgdMOsbSB0aOG6pXkgdMOgaSBraG/huqNuIHbhu5tpIHPhu5EgxJFp4buHbiB0aG/huqFpIG7DoHkhXCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAyMzdcdCAgICAgICAgICAgIH1cbiAgIDIzOFx0ICAgICAgICB9XG4gICAyMzlcdCAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5DaGVja0FjdGlvblBlcmZvcm1lZFxuICAgMjQwXHRcbiAgIDI0MVx0ICAgIHByaXZhdGUgdm9pZCBidG5DaGFuZ2VBY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuQ2hhbmdlQWN0aW9uUGVyZm9ybWVkXG4gICAyNDJcdCAgICAgICAgaWYgKHZhbGlkYXRlRmllbGRzKCkgJiYgY3VycmVudFN1YnNjcmliZXIgIT0gbnVsbCkge1xuICAgMjQzXHQgICAgICAgICAgICBTdHJpbmcgbmV3UGFzc3dvcmQgPSB0eHRQYXNzd29yZC5nZXRUZXh0KCk7XG4gICAyNDRcdFxuICAgMjQ1XHQgICAgICAgICAgICBib29sZWFuIHN1Y2Nlc3MgPSBTdWJzY3JpYmVyREFPLnVwZGF0ZVBhc3N3b3JkKGN1cnJlbnRTdWJzY3JpYmVyLmdldFVzZXJfaWQoKSwgbmV3UGFzc3dvcmQpO1xuICAgMjQ2XHRcbiAgIDI0N1x0ICAgICAgICAgICAgaWYgKHN1Y2Nlc3MpIHtcbiAgIDI0OFx0ICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwixJDhu5VpIG3huq10IGto4bqpdSB0aMOgbmggY8O0bmchIFZ1aSBsw7JuZyDEkcSDbmcgbmjhuq1wIGzhuqFpLlwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLklORk9STUFUSU9OX01FU1NBR0UpO1xuICAgMjQ5XHQgICAgICAgICAgICAgICAgbmV3IExvZ2luKCkuc2V0VmlzaWJsZSh0cnVlKTtcbiAgIDI1MFx0ICAgICAgICAgICAgICAgIHRoaXMuZGlzcG9zZSgpO1xuICAgMjUxXHQgICAgICAgICAgICB9IGVsc2Uge1xuICAgMjUyXHQgICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXCLEkOG7lWkgbeG6rXQga2jhuql1IHRo4bqldCBi4bqhaSEgVnVpIGzDsm5nIHRo4butIGzhuqFpIHNhdS5cIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgIDI1M1x0ICAgICAgICAgICAgfVxuICAgMjU0XHQgICAgICAgIH1cbiAgIDI1NVx0ICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0bkNoYW5nZUFjdGlvblBlcmZvcm1lZFxuICAgMjU2XHRcbiAgIDI1N1x0ICAgIC8qKlxuICAgMjU4XHQgICAgICogQHBhcmFtIGFyZ3MgdGhlIGNvbW1hbmQgbGluZSBhcmd1bWVudHNcbiAgIDI1OVx0ICAgICAqL1xuICAgMjYwXHQgICAgcHVibGljIHN0YXRpYyB2b2lkIG1haW4oU3RyaW5nIGFyZ3NbXSkge1xuVG90YWwgbGluZXMgaW4gZmlsZTogMzA2XG4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCI1MmI0ZDkxNy1iOGRkLTQ3NGUtOWI0ZC05YmY5NDJjOTk3MjY7dG9vbHVfMDFXcm5MQzNNRWV5MmI5dmU5ckNBRUp3Ijp7InJlcXVlc3RJZCI6IjUyYjRkOTE3LWI4ZGQtNDc0ZS05YjRkLTliZjk0MmM5OTcyNiIsInRvb2xVc2VJZCI6InRvb2x1XzAxV3JuTEMzTUVleTJiOXZlOXJDQUVKdyIsInBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IlN1Y2Nlc3NmdWxseSBlZGl0ZWQgdGhlIGZpbGUgc3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vRm9yZ290UGFzc3dvcmQuamF2YS5cblJlc3VsdCBmb3Igc3RyX3JlcGxhY2UgZm9yIGVudHJ5IHdpdGggaW5kZXggWzBdOlxuUmVwbGFjZW1lbnQgc3VjY2Vzc2Z1bC5cbkVkaXRlZCBzZWN0aW9uIGFmdGVyIElERSBhdXRvLWZvcm1hdHRpbmcgd2FzIGFwcGxpZWQ6XG4gICAyMTJcdCAgICAgICAgICAgIHRoaXMuZGlzcG9zZSgpO1xuICAgMjEzXHQgICAgICAgIH1cbiAgIDIxNFx0ICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0bkV4aXRBY3Rpb25QZXJmb3JtZWRcbiAgIDIxNVx0XG4gICAyMTZcdCAgICBwcml2YXRlIHZvaWQgYnRuQ2hlY2tBY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuQ2hlY2tBY3Rpb25QZXJmb3JtZWRcbiAgIDIxN1x0ICAgICAgICBpZiAodmFsaWRhdGVQaG9uZSgpKSB7XG4gICAyMThcdCAgICAgICAgICAgIFN0cmluZyBwaG9uZSA9IHR4dFBob25lLmdldFRleHQoKTtcbiAgIDIxOVx0ICAgICAgICAgICAgY3VycmVudFN1YnNjcmliZXIgPSBTdWJzY3JpYmVyREFPLmdldEJ5UGhvbmUocGhvbmUpO1xuICAgMjIwXHRcbiAgIDIyMVx0ICAgICAgICAgICAgaWYgKGN1cnJlbnRTdWJzY3JpYmVyICE9IG51bGwpIHtcbiAgIDIyMlx0ICAgICAgICAgICAgICAgIC8vIFBob25lIG51bWJlciBmb3VuZCwgc2hvdyBwYXNzd29yZCBmaWVsZHNcbiAgIDIyM1x0ICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwiVMOsbSB0aOG6pXkgdMOgaSBraG/huqNuIHbhu5tpIHPhu5EgxJFp4buHbiB0aG/huqFpIG7DoHkhXCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuSU5GT1JNQVRJT05fTUVTU0FHRSk7XG4gICAyMjRcdFxuICAgMjI1XHQgICAgICAgICAgICAgICAgYnRuRXhpdC5zZXRWaXNpYmxlKHRydWUpO1xuICAgMjI2XHQgICAgICAgICAgICAgICAgYnRuQ2hhbmdlLnNldFZpc2libGUodHJ1ZSk7XG4gICAyMjdcdCAgICAgICAgICAgICAgICBsYk5ld1Bhc3N3b3JkLnNldFZpc2libGUodHJ1ZSk7XG4gICAyMjhcdCAgICAgICAgICAgICAgICBsYkNvbmZpcm1QYXNzd29yZC5zZXRWaXNpYmxlKHRydWUpO1xuICAgMjI5XHQgICAgICAgICAgICAgICAgdHh0UGFzc3dvcmQuc2V0VmlzaWJsZSh0cnVlKTtcbiAgIDIzMFx0ICAgICAgICAgICAgICAgIHR4dENvbmZpcm1QYXNzd29yZC5zZXRWaXNpYmxlKHRydWUpO1xuICAgMjMxXHRcbiAgIDIzMlx0ICAgICAgICAgICAgICAgIC8vIERpc2FibGUgcGhvbmUgZmllbGQgYW5kIGNoZWNrIGJ1dHRvblxuICAgMjMzXHQgICAgICAgICAgICAgICAgdHh0UGhvbmUuc2V0RWRpdGFibGUoZmFsc2UpO1xuICAgMjM0XHQgICAgICAgICAgICAgICAgYnRuQ2hlY2suc2V0RW5hYmxlZChmYWxzZSk7XG4gICAyMzVcdCAgICAgICAgICAgICAgICBidG5DaGVjay5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgIDIzNlx0ICAgICAgICAgICAgfSBlbHNlIHtcbiAgIDIzN1x0ICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwiS2jDtG5nIHTDrG0gdGjhuqV5IHTDoGkga2hv4bqjbiB24bubaSBz4buRIMSRaeG7h24gdGhv4bqhaSBuw6B5IVwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgMjM4XHQgICAgICAgICAgICB9XG4gICAyMzlcdCAgICAgICAgfVxuICAgMjQwXHQgICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuQ2hlY2tBY3Rpb25QZXJmb3JtZWRcbiAgIDI0MVx0XG4gICAyNDJcdCAgICBwcml2YXRlIHZvaWQgYnRuQ2hhbmdlQWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkNoYW5nZUFjdGlvblBlcmZvcm1lZFxuICAgMjQzXHQgICAgICAgIGlmICh2YWxpZGF0ZUZpZWxkcygpICYmIGN1cnJlbnRTdWJzY3JpYmVyICE9IG51bGwpIHtcbiAgIDI0NFx0ICAgICAgICAgICAgU3RyaW5nIG5ld1Bhc3N3b3JkID0gdHh0UGFzc3dvcmQuZ2V0VGV4dCgpO1xuXG5SZXZpZXcgdGhlIGNoYW5nZXMgYW5kIG1ha2Ugc3VyZSB0aGV5IGFyZSBhcyBleHBlY3RlZCAoY29ycmVjdCBpbmRlbnRhdGlvbiwgbm8gZHVwbGljYXRlIGxpbmVzLCBldGMpLlxuRWRpdCB0aGUgZmlsZSBhZ2FpbiBpZiBuZWNlc3NhcnkuXG4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCIyZGQxMmQwNS1mN2ZiLTQwMDQtYTNmZC00ZmYyZWM4NTA5Zjg7dG9vbHVfMDFGMnpnZnpCbzdzY2FkcXpIMlBRbXk2Ijp7InJlcXVlc3RJZCI6IjJkZDEyZDA1LWY3ZmItNDAwNC1hM2ZkLTRmZjJlYzg1MDlmOCIsInRvb2xVc2VJZCI6InRvb2x1XzAxRjJ6Z2Z6Qm83c2NhZHF6SDJQUW15NiIsInBoYXNlIjo2LCJyZXN1bHQiOnsidGV4dCI6IkZhaWxlZCB0byBlZGl0IHRoZSBmaWxlIHNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL0ZvcmdvdFBhc3N3b3JkLmphdmEuIFNlZSBiZWxvdyBmb3IgZGV0YWlscy5cblJlc3VsdCBmb3Igc3RyX3JlcGxhY2UgZm9yIGVudHJ5IHdpdGggaW5kZXggWzBdOlxuTm8gcmVwbGFjZW1lbnQgd2FzIHBlcmZvcm1lZCwgb2xkU3RyIGRpZCBub3QgYXBwZWFyIHZlcmJhdGltIGluIHNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL0ZvcmdvdFBhc3N3b3JkLmphdmEuXG5UaGUgY29udGVudCBpbiB0aGUgc3BlY2lmaWVkIHJlZ2lvbiBpczpcbiAgIDIxMlx0ICAgICAgICAgICAgdGhpcy5kaXNwb3NlKCk7XG4gICAyMTNcdCAgICAgICAgfVxuICAgMjE0XHQgICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuRXhpdEFjdGlvblBlcmZvcm1lZFxuICAgMjE1XHRcbiAgIDIxNlx0ICAgIHByaXZhdGUgdm9pZCBidG5DaGVja0FjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5DaGVja0FjdGlvblBlcmZvcm1lZFxuICAgMjE3XHQgICAgICAgICAgICBpZiAodmFsaWRhdGVQaG9uZSgpKSB7XG4gICAyMThcdCAgICAgICAgICAgIFN0cmluZyBwaG9uZSA9IHR4dFBob25lLmdldFRleHQoKTtcbiAgIDIxOVx0ICAgICAgICAgICAgY3VycmVudFN1YnNjcmliZXIgPSBTdWJzY3JpYmVyREFPLmdldEJ5UGhvbmUocGhvbmUpO1xuICAgMjIwXHRcbiAgIDIyMVx0ICAgICAgICAgICAgaWYgKGN1cnJlbnRTdWJzY3JpYmVyICE9IG51bGwpIHtcbiAgIDIyMlx0ICAgICAgICAgICAgICAgIC8vIFBob25lIG51bWJlciBmb3VuZCwgc2hvdyBwYXNzd29yZCBmaWVsZHNcbiAgIDIyM1x0ICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwiVMOsbSB0aOG6pXkgdMOgaSBraG/huqNuIHbhu5tpIHPhu5EgxJFp4buHbiB0aG/huqFpIG7DoHkhXCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuSU5GT1JNQVRJT05fTUVTU0FHRSk7XG4gICAyMjRcdFxuICAgMjI1XHQgICAgICAgICAgICAgICAgYnRuRXhpdC5zZXRWaXNpYmxlKHRydWUpO1xuICAgMjI2XHQgICAgICAgICAgICAgICAgYnRuQ2hhbmdlLnNldFZpc2libGUodHJ1ZSk7XG4gICAyMjdcdCAgICAgICAgICAgICAgICBsYk5ld1Bhc3N3b3JkLnNldFZpc2libGUodHJ1ZSk7XG4gICAyMjhcdCAgICAgICAgICAgICAgICBsYkNvbmZpcm1QYXNzd29yZC5zZXRWaXNpYmxlKHRydWUpO1xuICAgMjI5XHQgICAgICAgICAgICAgICAgdHh0UGFzc3dvcmQuc2V0VmlzaWJsZSh0cnVlKTtcbiAgIDIzMFx0ICAgICAgICAgICAgICAgIHR4dENvbmZpcm1QYXNzd29yZC5zZXRWaXNpYmxlKHRydWUpO1xuICAgMjMxXHRcbiAgIDIzMlx0ICAgICAgICAgICAgICAgIC8vIERpc2FibGUgcGhvbmUgZmllbGQgYW5kIGNoZWNrIGJ1dHRvblxuICAgMjMzXHQgICAgICAgICAgICAgICAgdHh0UGhvbmUuc2V0RWRpdGFibGUoZmFsc2UpO1xuICAgMjM0XHQgICAgICAgICAgICAgICAgYnRuQ2hlY2suc2V0RW5hYmxlZChmYWxzZSk7XG4gICAyMzVcdCAgICAgICAgICAgICAgICBidG5DaGVjay5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgIDIzNlx0ICAgICAgICAgICAgfSBlbHNlIHtcbiAgIDIzN1x0ICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwiS2jDtG5nIHTDrG0gdGjhuqV5IHTDoGkga2hv4bqjbiB24bubaSBz4buRIMSRaeG7h24gdGhv4bqhaSBuw6B5IVwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgMjM4XHQgICAgICAgICAgICB9XG4gICAyMzlcdCAgICAgICAgfVxuICAgMjQwXHQgICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuQ2hlY2tBY3Rpb25QZXJmb3JtZWRcbiAgIDI0MVx0XG4gICAyNDJcdCAgICBwcml2YXRlIHZvaWQgYnRuQ2hhbmdlQWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkNoYW5nZUFjdGlvblBlcmZvcm1lZFxuICAgMjQzXHQgICAgICAgIGlmICh2YWxpZGF0ZUZpZWxkcygpICYmIGN1cnJlbnRTdWJzY3JpYmVyICE9IG51bGwpIHtcbiAgIDI0NFx0ICAgICAgICAgICAgU3RyaW5nIG5ld1Bhc3N3b3JkID0gdHh0UGFzc3dvcmQuZ2V0VGV4dCgpO1xuXG5EaWZmIGJldHdlZW4gb2xkU3RyIGFuZCB0aGUgc3BlY2lmaWVkIHJlZ2lvbiBpczpcbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi0tLSBvbGRTdHJcbisrKyByZWdpb25Db250ZW50XG5AQCAtMSw1ICsxLDUgQEBcbiAgICAgcHJpdmF0ZSB2b2lkIGJ0bkNoZWNrQWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkNoZWNrQWN0aW9uUGVyZm9ybWVkXG4tICAgICAgICBpZiAodmFsaWRhdGVQaG9uZSgpKSB7XG4rICAgICAgICAgICAgaWYgKHZhbGlkYXRlUGhvbmUoKSkge1xuICAgICAgICAgICAgIFN0cmluZyBwaG9uZSA9IHR4dFBob25lLmdldFRleHQoKTtcbiAgICAgICAgICAgICBjdXJyZW50U3Vic2NyaWJlciA9IFN1YnNjcmliZXJEQU8uZ2V0QnlQaG9uZShwaG9uZSk7XG4gXG5cblxuRml4IGZhaWxlZCBzdHJfcmVwbGFjZSBlbnRyaWVzIGFjY29yZGluZ2x5IGFuZCB0cnkgYWdhaW4uXG4iLCJpc0Vycm9yIjp0cnVlLCJyZXF1ZXN0SWQiOiIifX0sImRmMTI5ODRiLWFiMzEtNGUxOC1hNjJhLTI4ZGUxMDkwNGJiMzt0b29sdV8wMVJTYWZvdFBkUEdwZ0JGeHRHckNtd1ciOnsicmVxdWVzdElkIjoiZGYxMjk4NGItYWIzMS00ZTE4LWE2MmEtMjhkZTEwOTA0YmIzIiwidG9vbFVzZUlkIjoidG9vbHVfMDFSU2Fmb3RQZFBHcGdCRnh0R3JDbXdXIiwicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiSGVyZSdzIHRoZSByZXN1bHQgb2YgcnVubmluZyBgY2F0IC1uYCBvbiBzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9Gb3Jnb3RQYXNzd29yZC5qYXZhOlxuICAgMjE1XHRcbiAgIDIxNlx0ICAgIHByaXZhdGUgdm9pZCBidG5DaGVja0FjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5DaGVja0FjdGlvblBlcmZvcm1lZFxuICAgMjE3XHQgICAgICAgICAgICBpZiAodmFsaWRhdGVQaG9uZSgpKSB7XG4gICAyMThcdCAgICAgICAgICAgIFN0cmluZyBwaG9uZSA9IHR4dFBob25lLmdldFRleHQoKTtcbiAgIDIxOVx0ICAgICAgICAgICAgY3VycmVudFN1YnNjcmliZXIgPSBTdWJzY3JpYmVyREFPLmdldEJ5UGhvbmUocGhvbmUpO1xuICAgMjIwXHRcbiAgIDIyMVx0ICAgICAgICAgICAgaWYgKGN1cnJlbnRTdWJzY3JpYmVyICE9IG51bGwpIHtcbiAgIDIyMlx0ICAgICAgICAgICAgICAgIC8vIFBob25lIG51bWJlciBmb3VuZCwgc2hvdyBwYXNzd29yZCBmaWVsZHNcbiAgIDIyM1x0ICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwiVMOsbSB0aOG6pXkgdMOgaSBraG/huqNuIHbhu5tpIHPhu5EgxJFp4buHbiB0aG/huqFpIG7DoHkhXCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuSU5GT1JNQVRJT05fTUVTU0FHRSk7XG4gICAyMjRcdFxuICAgMjI1XHQgICAgICAgICAgICAgICAgYnRuRXhpdC5zZXRWaXNpYmxlKHRydWUpO1xuICAgMjI2XHQgICAgICAgICAgICAgICAgYnRuQ2hhbmdlLnNldFZpc2libGUodHJ1ZSk7XG4gICAyMjdcdCAgICAgICAgICAgICAgICBsYk5ld1Bhc3N3b3JkLnNldFZpc2libGUodHJ1ZSk7XG4gICAyMjhcdCAgICAgICAgICAgICAgICBsYkNvbmZpcm1QYXNzd29yZC5zZXRWaXNpYmxlKHRydWUpO1xuICAgMjI5XHQgICAgICAgICAgICAgICAgdHh0UGFzc3dvcmQuc2V0VmlzaWJsZSh0cnVlKTtcbiAgIDIzMFx0ICAgICAgICAgICAgICAgIHR4dENvbmZpcm1QYXNzd29yZC5zZXRWaXNpYmxlKHRydWUpO1xuICAgMjMxXHRcbiAgIDIzMlx0ICAgICAgICAgICAgICAgIC8vIERpc2FibGUgcGhvbmUgZmllbGQgYW5kIGNoZWNrIGJ1dHRvblxuICAgMjMzXHQgICAgICAgICAgICAgICAgdHh0UGhvbmUuc2V0RWRpdGFibGUoZmFsc2UpO1xuICAgMjM0XHQgICAgICAgICAgICAgICAgYnRuQ2hlY2suc2V0RW5hYmxlZChmYWxzZSk7XG4gICAyMzVcdCAgICAgICAgICAgICAgICBidG5DaGVjay5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgIDIzNlx0ICAgICAgICAgICAgfSBlbHNlIHtcbiAgIDIzN1x0ICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwiS2jDtG5nIHTDrG0gdGjhuqV5IHTDoGkga2hv4bqjbiB24bubaSBz4buRIMSRaeG7h24gdGhv4bqhaSBuw6B5IVwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgMjM4XHQgICAgICAgICAgICB9XG4gICAyMzlcdCAgICAgICAgfVxuICAgMjQwXHQgICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuQ2hlY2tBY3Rpb25QZXJmb3JtZWRcblRvdGFsIGxpbmVzIGluIGZpbGU6IDMwN1xuIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiNGY2ODdmMzQtMGJkNy00MGY0LTliNTctNTU5OWZhZDk4OGY3O3Rvb2x1XzAxNEZOR01qRXlkVTRFV0E2UFJiR1pNUSI6eyJyZXF1ZXN0SWQiOiI0ZjY4N2YzNC0wYmQ3LTQwZjQtOWI1Ny01NTk5ZmFkOTg4ZjciLCJ0b29sVXNlSWQiOiJ0b29sdV8wMTRGTkdNakV5ZFU0RVdBNlBSYkdaTVEiLCJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJTdWNjZXNzZnVsbHkgZWRpdGVkIHRoZSBmaWxlIHNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL0ZvcmdvdFBhc3N3b3JkLmphdmEuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlIGZvciBlbnRyeSB3aXRoIGluZGV4IFswXTpcblJlcGxhY2VtZW50IHN1Y2Nlc3NmdWwuXG5FZGl0ZWQgc2VjdGlvbiBhZnRlciBJREUgYXV0by1mb3JtYXR0aW5nIHdhcyBhcHBsaWVkOlxuICAgMjEyXHQgICAgICAgICAgICB0aGlzLmRpc3Bvc2UoKTtcbiAgIDIxM1x0ICAgICAgICB9XG4gICAyMTRcdCAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5FeGl0QWN0aW9uUGVyZm9ybWVkXG4gICAyMTVcdFxuICAgMjE2XHQgICAgcHJpdmF0ZSB2b2lkIGJ0bkNoZWNrQWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkNoZWNrQWN0aW9uUGVyZm9ybWVkXG4gICAyMTdcdCAgICAgICAgLy8gRGVidWcgbWVzc2FnZSB0byBjb25maXJtIGJ1dHRvbiBjbGljayBpcyByZWdpc3RlcmVkXG4gICAyMThcdCAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQ2hlY2sgYnV0dG9uIGNsaWNrZWQhXCIpO1xuICAgMjE5XHRcbiAgIDIyMFx0ICAgICAgICAvLyBDaGVjayBpZiBwaG9uZSBmaWVsZCBpcyBlbXB0eVxuICAgMjIxXHQgICAgICAgIFN0cmluZyBwaG9uZSA9IHR4dFBob25lLmdldFRleHQoKS50cmltKCk7XG4gICAyMjJcdCAgICAgICAgaWYgKHBob25lLmlzRW1wdHkoKSkge1xuICAgMjIzXHQgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcIlZ1aSBsw7JuZyBuaOG6rXAgc+G7kSDEkWnhu4duIHRob+G6oWkhXCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAyMjRcdCAgICAgICAgICAgIHJldHVybjtcbiAgIDIyNVx0ICAgICAgICB9XG4gICAyMjZcdFxuICAgMjI3XHQgICAgICAgIGlmICh2YWxpZGF0ZVBob25lKCkpIHtcbiAgIDIyOFx0ICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiUGhvbmUgdmFsaWRhdGlvbiBwYXNzZWQ6IFwiICsgcGhvbmUpO1xuICAgMjI5XHQgICAgICAgICAgICB0cnkge1xuICAgMjMwXHQgICAgICAgICAgICAgICAgY3VycmVudFN1YnNjcmliZXIgPSBTdWJzY3JpYmVyREFPLmdldEJ5UGhvbmUocGhvbmUpO1xuICAgMjMxXHQgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRGF0YWJhc2UgcXVlcnkgY29tcGxldGVkLiBSZXN1bHQ6IFwiICsgKGN1cnJlbnRTdWJzY3JpYmVyICE9IG51bGwgPyBcIkZvdW5kXCIgOiBcIk5vdCBmb3VuZFwiKSk7XG4gICAyMzJcdFxuICAgMjMzXHQgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTdWJzY3JpYmVyICE9IG51bGwpIHtcbiAgIDIzNFx0ICAgICAgICAgICAgICAgICAgICAvLyBQaG9uZSBudW1iZXIgZm91bmQsIHNob3cgcGFzc3dvcmQgZmllbGRzXG4gICAyMzVcdCAgICAgICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXCJUw6xtIHRo4bqleSB0w6BpIGtob+G6o24gduG7m2kgc+G7kSDEkWnhu4duIHRob+G6oWkgbsOgeSFcIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5JTkZPUk1BVElPTl9NRVNTQUdFKTtcbiAgIDIzNlx0XG4gICAyMzdcdCAgICAgICAgICAgICAgICAgICAgYnRuRXhpdC5zZXRWaXNpYmxlKHRydWUpO1xuICAgMjM4XHQgICAgICAgICAgICAgICAgICAgIGJ0bkNoYW5nZS5zZXRWaXNpYmxlKHRydWUpO1xuICAgMjM5XHQgICAgICAgICAgICAgICAgICAgIGxiTmV3UGFzc3dvcmQuc2V0VmlzaWJsZSh0cnVlKTtcbiAgIDI0MFx0ICAgICAgICAgICAgICAgICAgICBsYkNvbmZpcm1QYXNzd29yZC5zZXRWaXNpYmxlKHRydWUpO1xuICAgMjQxXHQgICAgICAgICAgICAgICAgICAgIHR4dFBhc3N3b3JkLnNldFZpc2libGUodHJ1ZSk7XG4gICAyNDJcdCAgICAgICAgICAgICAgICAgICAgdHh0Q29uZmlybVBhc3N3b3JkLnNldFZpc2libGUodHJ1ZSk7XG4gICAyNDNcdFxuICAgMjQ0XHQgICAgICAgICAgICAgICAgICAgIC8vIERpc2FibGUgcGhvbmUgZmllbGQgYW5kIGNoZWNrIGJ1dHRvblxuICAgMjQ1XHQgICAgICAgICAgICAgICAgICAgIHR4dFBob25lLnNldEVkaXRhYmxlKGZhbHNlKTtcbiAgIDI0Nlx0ICAgICAgICAgICAgICAgICAgICBidG5DaGVjay5zZXRFbmFibGVkKGZhbHNlKTtcbiAgIDI0N1x0ICAgICAgICAgICAgICAgICAgICBidG5DaGVjay5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgIDI0OFx0ICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAyNDlcdCAgICAgICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXCJLaMO0bmcgdMOsbSB0aOG6pXkgdMOgaSBraG/huqNuIHbhu5tpIHPhu5EgxJFp4buHbiB0aG/huqFpIG7DoHkhXCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAyNTBcdCAgICAgICAgICAgICAgICB9XG4gICAyNTFcdCAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBleCkge1xuICAgMjUyXHQgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRXhjZXB0aW9uIG9jY3VycmVkOiBcIiArIGV4LmdldE1lc3NhZ2UoKSk7XG4gICAyNTNcdCAgICAgICAgICAgICAgICBleC5wcmludFN0YWNrVHJhY2UoKTtcbiAgIDI1NFx0ICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwiTOG7l2kga2hpIHTDrG0ga2nhur9tOiBcIiArIGV4LmdldE1lc3NhZ2UoKSwgXCJM4buXaVwiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgIDI1NVx0ICAgICAgICAgICAgfVxuICAgMjU2XHQgICAgICAgIH1cbiAgIDI1N1x0ICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0bkNoZWNrQWN0aW9uUGVyZm9ybWVkXG4gICAyNThcdFxuICAgMjU5XHQgICAgcHJpdmF0ZSB2b2lkIGJ0bkNoYW5nZUFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5DaGFuZ2VBY3Rpb25QZXJmb3JtZWRcbiAgIDI2MFx0ICAgICAgICBpZiAodmFsaWRhdGVGaWVsZHMoKSAmJiBjdXJyZW50U3Vic2NyaWJlciAhPSBudWxsKSB7XG4gICAyNjFcdCAgICAgICAgICAgIFN0cmluZyBuZXdQYXNzd29yZCA9IHR4dFBhc3N3b3JkLmdldFRleHQoKTtcblxuUmV2aWV3IHRoZSBjaGFuZ2VzIGFuZCBtYWtlIHN1cmUgdGhleSBhcmUgYXMgZXhwZWN0ZWQgKGNvcnJlY3QgaW5kZW50YXRpb24sIG5vIGR1cGxpY2F0ZSBsaW5lcywgZXRjKS5cbkVkaXQgdGhlIGZpbGUgYWdhaW4gaWYgbmVjZXNzYXJ5LlxuIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiMDExZDdmNDMtYTYzOC00MjAyLTliNGItOWNjYjU3NzdlMGQ1O3Rvb2x1XzAxNzNmMVJTelhSZ1g0amh3N2syYmFMVSI6eyJyZXF1ZXN0SWQiOiIwMTFkN2Y0My1hNjM4LTQyMDItOWI0Yi05Y2NiNTc3N2UwZDUiLCJ0b29sVXNlSWQiOiJ0b29sdV8wMTczZjFSU3pYUmdYNGpodzdrMmJhTFUiLCJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJIZXJlJ3MgdGhlIHJlc3VsdCBvZiBydW5uaW5nIGBjYXQgLW5gIG9uIHNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL0ZvcmdvdFBhc3N3b3JkLmphdmE6XG4gICAgNDVcdCAgICB9XG4gICAgNDZcdFxuICAgIDQ3XHQgICAgcHVibGljIGJvb2xlYW4gdmFsaWRhdGVQaG9uZSgpe1xuICAgIDQ4XHQgICAgICAgIFN0cmluZyBwaG9uZSA9IHR4dFBob25lLmdldFRleHQoKTtcbiAgICA0OVx0ICAgICAgICBpZihwaG9uZS5sZW5ndGgoKSAhPSAxMCB8fCAhcGhvbmUubWF0Y2hlcyhwaG9uZVBhdHRlcm4pKSB7XG4gICAgNTBcdCAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwiVnVpIGzDsm5nIG5o4bqtcCDEkcO6bmcgxJHhu4tuaCBk4bqhbmcgc+G7kSDEkWnhu4duIHRob+G6oWkhXCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAgNTFcdCAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICA1Mlx0ICAgICAgICB9XG4gICAgNTNcdCAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgNTRcdCAgICB9XG4gICAgNTVcdFxuVG90YWwgbGluZXMgaW4gZmlsZTogMzI0XG4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCIyY2ZhZDEyOC1jZDI2LTRiZjUtYjJhYS03NTY0OWY2NDNkNDE7dG9vbHVfMDEzQjF6b0NxQndvU3d4NDlBanlEZmFZIjp7InJlcXVlc3RJZCI6IjJjZmFkMTI4LWNkMjYtNGJmNS1iMmFhLTc1NjQ5ZjY0M2Q0MSIsInRvb2xVc2VJZCI6InRvb2x1XzAxM0Ixem9DcUJ3b1N3eDQ5QWp5RGZhWSIsInBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IlN1Y2Nlc3NmdWxseSBlZGl0ZWQgdGhlIGZpbGUgc3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vRm9yZ290UGFzc3dvcmQuamF2YS5cblJlc3VsdCBmb3Igc3RyX3JlcGxhY2UgZm9yIGVudHJ5IHdpdGggaW5kZXggWzBdOlxuUmVwbGFjZW1lbnQgc3VjY2Vzc2Z1bC5cbkVkaXRlZCBzZWN0aW9uIGFmdGVyIElERSBhdXRvLWZvcm1hdHRpbmcgd2FzIGFwcGxpZWQ6XG4gICAgNDNcdCAgICAgICAgdHh0UGFzc3dvcmQuc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgNDRcdCAgICAgICAgdHh0Q29uZmlybVBhc3N3b3JkLnNldFZpc2libGUoZmFsc2UpO1xuICAgIDQ1XHQgICAgfVxuICAgIDQ2XHRcbiAgICA0N1x0ICAgIHB1YmxpYyBib29sZWFuIHZhbGlkYXRlUGhvbmUoKXtcbiAgICA0OFx0ICAgICAgICBTdHJpbmcgcGhvbmUgPSB0eHRQaG9uZS5nZXRUZXh0KCkudHJpbSgpO1xuICAgIDQ5XHQgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlZhbGlkYXRpbmcgcGhvbmU6IFwiICsgcGhvbmUpO1xuICAgIDUwXHQgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlBob25lIGxlbmd0aDogXCIgKyBwaG9uZS5sZW5ndGgoKSk7XG4gICAgNTFcdCAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiTWF0Y2hlcyBwYXR0ZXJuOiBcIiArIHBob25lLm1hdGNoZXMocGhvbmVQYXR0ZXJuKSk7XG4gICAgNTJcdFxuICAgIDUzXHQgICAgICAgIGlmKHBob25lLmxlbmd0aCgpICE9IDEwIHx8ICFwaG9uZS5tYXRjaGVzKHBob25lUGF0dGVybikpIHtcbiAgICA1NFx0ICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXCJWdWkgbMOybmcgbmjhuq1wIMSRw7puZyDEkeG7i25oIGThuqFuZyBz4buRIMSRaeG7h24gdGhv4bqhaSFcIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgICA1NVx0ICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIDU2XHQgICAgICAgIH1cbiAgICA1N1x0ICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICA1OFx0ICAgIH1cbiAgICA1OVx0XG4gICAgNjBcdCAgICBwdWJsaWMgYm9vbGVhbiB2YWxpZGF0ZUZpZWxkcygpe1xuICAgIDYxXHQgICAgICAgIFN0cmluZyBwYXNzd29yZCA9IHR4dFBhc3N3b3JkLmdldFRleHQoKTtcbiAgICA2Mlx0ICAgICAgICBTdHJpbmcgY29uZmlybVBhc3N3b3JkID0gdHh0Q29uZmlybVBhc3N3b3JkLmdldFRleHQoKTtcblxuUmV2aWV3IHRoZSBjaGFuZ2VzIGFuZCBtYWtlIHN1cmUgdGhleSBhcmUgYXMgZXhwZWN0ZWQgKGNvcnJlY3QgaW5kZW50YXRpb24sIG5vIGR1cGxpY2F0ZSBsaW5lcywgZXRjKS5cbkVkaXQgdGhlIGZpbGUgYWdhaW4gaWYgbmVjZXNzYXJ5LlxuIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiOTdiODgzMWItOWFjZS00YTViLTliMzktYzA1MGIyYzEzMzMxO3Rvb2x1XzAxVmQ4NndaZk52SGhHZUV5UHZ5cWJNNyI6eyJyZXF1ZXN0SWQiOiI5N2I4ODMxYi05YWNlLTRhNWItOWIzOS1jMDUwYjJjMTMzMzEiLCJ0b29sVXNlSWQiOiJ0b29sdV8wMVZkODZ3WmZOdkhoR2VFeVB2eXFiTTciLCJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJIZXJlJ3MgdGhlIHJlc3VsdCBvZiBydW5uaW5nIGBjYXQgLW5gIG9uIHNyYy9EQU8vU3Vic2NyaWJlckRBTy5qYXZhOlxuICAgIDgwXHRcbiAgICA4MVx0ICAgIHB1YmxpYyBzdGF0aWMgU3Vic2NyaWJlciBnZXRCeVBob25lKFN0cmluZyBwaG9uZSkge1xuICAgIDgyXHQgICAgICAgIFN1YnNjcmliZXIgc3Vic2NyaWJlciA9IG51bGw7XG4gICAgODNcdCAgICAgICAgdHJ5IHtcbiAgICA4NFx0ICAgICAgICAgICAgUmVzdWx0U2V0IHJzID0gRGJPcGVyYXRpb25zLmdldERhdGEoXCJTRUxFQ1Qgcy4qLCB1LiogRlJPTSBTVUJTQ1JJQkVSIHMgSk9JTiBVU0VSIHUgT04gcy51c2VyX2lkID0gdS51c2VyX2lkIFdIRVJFIHMucGhvbmUgPSAnXCIgKyBwaG9uZSArIFwiJ1wiKTtcbiAgICA4NVx0ICAgICAgICAgICAgaWYgKHJzLm5leHQoKSkge1xuICAgIDg2XHQgICAgICAgICAgICAgICAgc3Vic2NyaWJlciA9IG5ldyBTdWJzY3JpYmVyKCk7XG4gICAgODdcdCAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLnNldFN1YnNjcmliZXJfaWQocnMuZ2V0SW50KFwic3Vic2NyaWJlcl9pZFwiKSk7XG4gICAgODhcdCAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLnNldEZ1bGxOYW1lKHJzLmdldFN0cmluZyhcIm5hbWVcIikpO1xuICAgIDg5XHQgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5zZXRBZGRyZXNzKHJzLmdldFN0cmluZyhcImFkZHJlc3NcIikpO1xuICAgIDkwXHQgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5zZXRQaG9uZShycy5nZXRTdHJpbmcoXCJwaG9uZVwiKSk7XG4gICAgOTFcdCAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLnNldFVzZXJfaWQocnMuZ2V0SW50KFwidXNlcl9pZFwiKSk7XG4gICAgOTJcdCAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLnNldFVzZXJuYW1lKHJzLmdldFN0cmluZyhcInVzZXJuYW1lXCIpKTtcbiAgICA5M1x0ICAgICAgICAgICAgICAgIHN1YnNjcmliZXIuc2V0UGFzc3dvcmQocnMuZ2V0U3RyaW5nKFwicGFzc3dvcmRcIikpO1xuICAgIDk0XHQgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5zZXRSb2xlKHJzLmdldFN0cmluZyhcInJvbGVcIikpO1xuICAgIDk1XHQgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5zZXRJc0FjdGl2ZShycy5nZXRCb29sZWFuKFwiaXNBY3RpdmVcIikpO1xuICAgIDk2XHQgICAgICAgICAgICB9XG4gICAgOTdcdCAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGV4KSB7XG4gICAgOThcdCAgICAgICAgICAgIGV4LnByaW50U3RhY2tUcmFjZSgpO1xuICAgIDk5XHQgICAgICAgIH1cbiAgIDEwMFx0ICAgICAgICByZXR1cm4gc3Vic2NyaWJlcjtcblRvdGFsIGxpbmVzIGluIGZpbGU6IDExNFxuIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiZGIwNDk2NzMtNGFiZi00NmJlLWE3ZDYtYzhhODA5ZTgxYWEyO3Rvb2x1XzAxMzk2bm04OE5zZVdSbVBOeTl5NzIxdSI6eyJyZXF1ZXN0SWQiOiJkYjA0OTY3My00YWJmLTQ2YmUtYTdkNi1jOGE4MDllODFhYTIiLCJ0b29sVXNlSWQiOiJ0b29sdV8wMTM5Nm5tODhOc2VXUm1QTnk5eTcyMXUiLCJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJTdWNjZXNzZnVsbHkgZWRpdGVkIHRoZSBmaWxlIHNyYy9EQU8vU3Vic2NyaWJlckRBTy5qYXZhLlxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZSBmb3IgZW50cnkgd2l0aCBpbmRleCBbMF06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgICA3N1x0ICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxTdWJzY3JpYmVyPiBnZXRBbGwoKSB7XG4gICAgNzhcdCAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpOyAvLyBHZW5lcmF0ZWQgZnJvbSBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ29kZS9HZW5lcmF0ZWRNZXRob2RCb2R5XG4gICAgNzlcdCAgICB9XG4gICAgODBcdFxuICAgIDgxXHQgICAgcHVibGljIHN0YXRpYyBTdWJzY3JpYmVyIGdldEJ5UGhvbmUoU3RyaW5nIHBob25lKSB7XG4gICAgODJcdCAgICAgICAgU3Vic2NyaWJlciBzdWJzY3JpYmVyID0gbnVsbDtcbiAgICA4M1x0ICAgICAgICB0cnkge1xuICAgIDg0XHQgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJTZWFyY2hpbmcgZm9yIHBob25lOiBcIiArIHBob25lKTtcbiAgICA4NVx0ICAgICAgICAgICAgU3RyaW5nIHF1ZXJ5ID0gXCJTRUxFQ1Qgcy4qLCB1LiogRlJPTSBTVUJTQ1JJQkVSIHMgSk9JTiBVU0VSIHUgT04gcy51c2VyX2lkID0gdS51c2VyX2lkIFdIRVJFIHMucGhvbmUgPSAnXCIgKyBwaG9uZSArIFwiJ1wiO1xuICAgIDg2XHQgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJTUUwgUXVlcnk6IFwiICsgcXVlcnkpO1xuICAgIDg3XHRcbiAgICA4OFx0ICAgICAgICAgICAgUmVzdWx0U2V0IHJzID0gRGJPcGVyYXRpb25zLmdldERhdGEocXVlcnkpO1xuICAgIDg5XHQgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJRdWVyeSBleGVjdXRlZCwgY2hlY2tpbmcgcmVzdWx0cy4uLlwiKTtcbiAgICA5MFx0XG4gICAgOTFcdCAgICAgICAgICAgIGlmIChycy5uZXh0KCkpIHtcbiAgICA5Mlx0ICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlN1YnNjcmliZXIgZm91bmQhXCIpO1xuICAgIDkzXHQgICAgICAgICAgICAgICAgc3Vic2NyaWJlciA9IG5ldyBTdWJzY3JpYmVyKCk7XG4gICAgOTRcdCAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLnNldFN1YnNjcmliZXJfaWQocnMuZ2V0SW50KFwic3Vic2NyaWJlcl9pZFwiKSk7XG4gICAgOTVcdCAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLnNldEZ1bGxOYW1lKHJzLmdldFN0cmluZyhcIm5hbWVcIikpO1xuICAgIDk2XHQgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5zZXRBZGRyZXNzKHJzLmdldFN0cmluZyhcImFkZHJlc3NcIikpO1xuICAgIDk3XHQgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5zZXRQaG9uZShycy5nZXRTdHJpbmcoXCJwaG9uZVwiKSk7XG4gICAgOThcdCAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLnNldFVzZXJfaWQocnMuZ2V0SW50KFwidXNlcl9pZFwiKSk7XG4gICAgOTlcdCAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLnNldFVzZXJuYW1lKHJzLmdldFN0cmluZyhcInVzZXJuYW1lXCIpKTtcbiAgIDEwMFx0ICAgICAgICAgICAgICAgIHN1YnNjcmliZXIuc2V0UGFzc3dvcmQocnMuZ2V0U3RyaW5nKFwicGFzc3dvcmRcIikpO1xuICAgMTAxXHQgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5zZXRSb2xlKHJzLmdldFN0cmluZyhcInJvbGVcIikpO1xuICAgMTAyXHQgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5zZXRJc0FjdGl2ZShycy5nZXRCb29sZWFuKFwiaXNBY3RpdmVcIikpO1xuICAgMTAzXHQgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiU3Vic2NyaWJlciBkYXRhIGxvYWRlZDogXCIgKyBzdWJzY3JpYmVyLmdldEZ1bGxOYW1lKCkpO1xuICAgMTA0XHQgICAgICAgICAgICB9IGVsc2Uge1xuICAgMTA1XHQgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiTm8gc3Vic2NyaWJlciBmb3VuZCB3aXRoIHBob25lOiBcIiArIHBob25lKTtcbiAgIDEwNlx0ICAgICAgICAgICAgfVxuICAgMTA3XHQgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBleCkge1xuICAgMTA4XHQgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJFeGNlcHRpb24gaW4gZ2V0QnlQaG9uZTogXCIgKyBleC5nZXRNZXNzYWdlKCkpO1xuICAgMTA5XHQgICAgICAgICAgICBleC5wcmludFN0YWNrVHJhY2UoKTtcbiAgIDExMFx0ICAgICAgICB9XG4gICAxMTFcdCAgICAgICAgcmV0dXJuIHN1YnNjcmliZXI7XG4gICAxMTJcdCAgICB9XG4gICAxMTNcdFxuICAgMTE0XHQgICAgcHVibGljIHN0YXRpYyBib29sZWFuIHVwZGF0ZVBhc3N3b3JkKGludCB1c2VySWQsIFN0cmluZyBuZXdQYXNzd29yZCkge1xuICAgMTE1XHQgICAgICAgIHRyeSB7XG4gICAxMTZcdCAgICAgICAgICAgIFN0cmluZyBxdWVyeSA9IFwiVVBEQVRFIFVTRVIgU0VUIHBhc3N3b3JkID0gJ1wiICsgbmV3UGFzc3dvcmQgKyBcIicgV0hFUkUgdXNlcl9pZCA9IFwiICsgdXNlcklkO1xuXG5SZXZpZXcgdGhlIGNoYW5nZXMgYW5kIG1ha2Ugc3VyZSB0aGV5IGFyZSBhcyBleHBlY3RlZCAoY29ycmVjdCBpbmRlbnRhdGlvbiwgbm8gZHVwbGljYXRlIGxpbmVzLCBldGMpLlxuRWRpdCB0aGUgZmlsZSBhZ2FpbiBpZiBuZWNlc3NhcnkuXG4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCI3ZjhhYzg2OC1hNWE1LTRiYzktODgzNC1jYzk4YTRiMjM3MmQ7dG9vbHVfMDFZTEZ0NnhWcVhHWWhUdVZWdW5oQUNGIjp7InJlcXVlc3RJZCI6IjdmOGFjODY4LWE1YTUtNGJjOS04ODM0LWNjOThhNGIyMzcyZCIsInRvb2xVc2VJZCI6InRvb2x1XzAxWUxGdDZ4VnFYR1loVHVWVnVuaEFDRiIsInBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IkhlcmUncyB0aGUgcmVzdWx0IG9mIHJ1bm5pbmcgYGNhdCAtbmAgb24gc3JjL0RBTy9Db25uZWN0aW9uUHJvdmlkZXIuamF2YTpcbiAgICAgMVx0LypcbiAgICAgMlx0ICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9MaWNlbnNlcy9saWNlbnNlLWRlZmF1bHQudHh0IHRvIGNoYW5nZSB0aGlzIGxpY2Vuc2VcbiAgICAgM1x0ICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NsYXNzLmphdmEgdG8gZWRpdCB0aGlzIHRlbXBsYXRlXG4gICAgIDRcdCAqL1xuICAgICA1XHRwYWNrYWdlIERBTztcbiAgICAgNlx0XG4gICAgIDdcdGltcG9ydCBqYXZhLnNxbC4qO1xuICAgICA4XHRcbiAgICAgOVx0LyoqXG4gICAgMTBcdCAqXG4gICAgMTFcdCAqIEBhdXRob3IgTmdvYyBUaGFvXG4gICAgMTJcdCAqL1xuICAgIDEzXHRwdWJsaWMgY2xhc3MgQ29ubmVjdGlvblByb3ZpZGVyIHtcbiAgICAxNFx0ICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmluZyBVUkwgPSBcImpkYmM6bXlzcWw6Ly8xMjUuMjEyLjIzMS4xODQ6Njk2OS9JbnRlcm5ldERCXCI7XG4gICAgMTVcdCAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBTdHJpbmcgVVNFUiA9IFwibWludG9yaTA5XCI7XG4gICAgMTZcdCAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBTdHJpbmcgUEFTU1dPUkQgPSBcIk1pbnRvcnkwOUA5NlwiO1xuICAgIDE3XHQgICAgXG4gICAgMThcdCAgICBwdWJsaWMgc3RhdGljIENvbm5lY3Rpb24gZ2V0Q29ubigpe1xuICAgIDE5XHQgICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgMjBcdFxuICAgIDIxXHQgICAgICAgIHRyeSB7XG4gICAgMjJcdCAgICAgICAgICAgIENsYXNzLmZvck5hbWUoXCJjb20ubXlzcWwuY2ouamRiYy5Ecml2ZXJcIik7XG4gICAgMjNcdCAgICAgICAgICAgIGNvbm4gPSBEcml2ZXJNYW5hZ2VyLmdldENvbm5lY3Rpb24oVVJMLCBVU0VSLCBQQVNTV09SRCk7XG4gICAgMjRcdCAgICAgICAgfSBjYXRjaCAoQ2xhc3NOb3RGb3VuZEV4Y2VwdGlvbiBlKSB7XG4gICAgMjVcdCAgICAgICAgICAgIFN5c3RlbS5lcnIucHJpbnRsbihcIk15U1FMIEpEQkMgRHJpdmVyIG5vdCBmb3VuZC5cIik7XG4gICAgMjZcdCAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgMjdcdCAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcbiAgICAyOFx0ICAgICAgICAgICAgU3lzdGVtLmVyci5wcmludGxuKFwiQ29ubmVjdGlvbiBmYWlsZWQuXCIpO1xuICAgIDI5XHQgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgIDMwXHQgICAgICAgIH1cbiAgICAzMVx0ICAgICAgICByZXR1cm4gY29ubjtcbiAgICAzMlx0ICAgIH1cbiAgICAzM1x0ICAgIFxuICAgIDM0XHQgICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBtYWluKFN0cmluZ1tdIGFyZ3MpIHtcbiAgICAzNVx0ICAgICAgICBDb25uZWN0aW9uIGNvbm5lY3Rpb24gPSBnZXRDb25uKCk7XG4gICAgMzZcdFxuICAgIDM3XHQgICAgICAgIGlmIChjb25uZWN0aW9uICE9IG51bGwpIHtcbiAgICAzOFx0ICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiS+G6v3QgbuG7kWkgdGjDoG5oIGPDtG5nIVwiKTtcbiAgICAzOVx0ICAgICAgICB9IGVsc2Uge1xuICAgIDQwXHQgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJL4bq/dCBu4buRaSB0aOG6pXQgYuG6oWkhXCIpO1xuICAgIDQxXHQgICAgICAgIH1cbiAgICA0Mlx0ICAgIH1cbiAgICA0M1x0ICAgIFxuICAgIDQ0XHR9XG4gICAgNDVcdFxuVG90YWwgbGluZXMgaW4gZmlsZTogNDVcbiIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX0sImE2NjQxM2NlLWEzZjktNDViYy1iYzY2LTdjNjI1ZTQwOWM5Njt0b29sdV8wMVIxaDRldFZEMkhvVjlMRXp0MzUxTEQiOnsicmVxdWVzdElkIjoiYTY2NDEzY2UtYTNmOS00NWJjLWJjNjYtN2M2MjVlNDA5Yzk2IiwidG9vbFVzZUlkIjoidG9vbHVfMDFSMWg0ZXRWRDJIb1Y5TEV6dDM1MUxEIiwicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiU3VjY2Vzc2Z1bGx5IGVkaXRlZCB0aGUgZmlsZSBzcmMvREFPL0Nvbm5lY3Rpb25Qcm92aWRlci5qYXZhLlxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZSBmb3IgZW50cnkgd2l0aCBpbmRleCBbMF06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgICAxNFx0ICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmluZyBVUkwgPSBcImpkYmM6bXlzcWw6Ly8xMjUuMjEyLjIzMS4xODQ6Njk2OS9JbnRlcm5ldERCXCI7XG4gICAgMTVcdCAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBTdHJpbmcgVVNFUiA9IFwibWludG9yaTA5XCI7XG4gICAgMTZcdCAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBTdHJpbmcgUEFTU1dPUkQgPSBcIk1pbnRvcnkwOUA5NlwiO1xuICAgIDE3XHRcbiAgICAxOFx0ICAgIHB1YmxpYyBzdGF0aWMgQ29ubmVjdGlvbiBnZXRDb25uKCl7XG4gICAgMTlcdCAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcbiAgICAyMFx0XG4gICAgMjFcdCAgICAgICAgdHJ5IHtcbiAgICAyMlx0ICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQXR0ZW1wdGluZyB0byBjb25uZWN0IHRvIGRhdGFiYXNlLi4uXCIpO1xuICAgIDIzXHQgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJVUkw6IFwiICsgVVJMKTtcbiAgICAyNFx0ICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiVXNlcjogXCIgKyBVU0VSKTtcbiAgICAyNVx0XG4gICAgMjZcdCAgICAgICAgICAgIENsYXNzLmZvck5hbWUoXCJjb20ubXlzcWwuY2ouamRiYy5Ecml2ZXJcIik7XG4gICAgMjdcdCAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkRyaXZlciBsb2FkZWQgc3VjY2Vzc2Z1bGx5XCIpO1xuICAgIDI4XHRcbiAgICAyOVx0ICAgICAgICAgICAgY29ubiA9IERyaXZlck1hbmFnZXIuZ2V0Q29ubmVjdGlvbihVUkwsIFVTRVIsIFBBU1NXT1JEKTtcbiAgICAzMFx0ICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQ29ubmVjdGlvbiBlc3RhYmxpc2hlZDogXCIgKyAoY29ubiAhPSBudWxsKSk7XG4gICAgMzFcdFxuICAgIDMyXHQgICAgICAgIH0gY2F0Y2ggKENsYXNzTm90Rm91bmRFeGNlcHRpb24gZSkge1xuICAgIDMzXHQgICAgICAgICAgICBTeXN0ZW0uZXJyLnByaW50bG4oXCJNeVNRTCBKREJDIERyaXZlciBub3QgZm91bmQuXCIpO1xuICAgIDM0XHQgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgIDM1XHQgICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAgMzZcdCAgICAgICAgICAgIFN5c3RlbS5lcnIucHJpbnRsbihcIkNvbm5lY3Rpb24gZmFpbGVkOiBcIiArIGUuZ2V0TWVzc2FnZSgpKTtcbiAgICAzN1x0ICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAzOFx0ICAgICAgICB9XG4gICAgMzlcdCAgICAgICAgcmV0dXJuIGNvbm47XG4gICAgNDBcdCAgICB9XG4gICAgNDFcdFxuICAgIDQyXHQgICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBtYWluKFN0cmluZ1tdIGFyZ3MpIHtcbiAgICA0M1x0ICAgICAgICBDb25uZWN0aW9uIGNvbm5lY3Rpb24gPSBnZXRDb25uKCk7XG4gICAgNDRcdFxuXG5SZXZpZXcgdGhlIGNoYW5nZXMgYW5kIG1ha2Ugc3VyZSB0aGV5IGFyZSBhcyBleHBlY3RlZCAoY29ycmVjdCBpbmRlbnRhdGlvbiwgbm8gZHVwbGljYXRlIGxpbmVzLCBldGMpLlxuRWRpdCB0aGUgZmlsZSBhZ2FpbiBpZiBuZWNlc3NhcnkuXG4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCJiMTU3MWI2My0wMWMzLTRiMjEtYTI3Yy0yZDcwZmY2YTY0MzQ7dG9vbHVfMDFNVnlaMmNNV05CaDJRZUJtZE5IWXBZIjp7InJlcXVlc3RJZCI6ImIxNTcxYjYzLTAxYzMtNGIyMS1hMjdjLTJkNzBmZjZhNjQzNCIsInRvb2xVc2VJZCI6InRvb2x1XzAxTVZ5WjJjTVdOQmgyUWVCbWROSFlwWSIsInBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IkhlcmUncyB0aGUgcmVzdWx0IG9mIHJ1bm5pbmcgYGNhdCAtbmAgb24gc3JjL0RBTy9EYk9wZXJhdGlvbnMuamF2YTpcbiAgICAzMFx0ICAgICAgICB9XG4gICAgMzFcdCAgICB9XG4gICAgMzJcdCAgICBcbiAgICAzM1x0ICAgIHB1YmxpYyBzdGF0aWMgUmVzdWx0U2V0IGdldERhdGEoU3RyaW5nIHF1ZXJ5KXtcbiAgICAzNFx0ICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgIDM1XHQgICAgICAgIFN0YXRlbWVudCBzdCA9IG51bGw7XG4gICAgMzZcdCAgICAgICAgUmVzdWx0U2V0IHJzID0gbnVsbDtcbiAgICAzN1x0ICAgICAgICBcbiAgICAzOFx0ICAgICAgICB0cnl7XG4gICAgMzlcdCAgICAgICAgICAgIGNvbm4gPSBDb25uZWN0aW9uUHJvdmlkZXIuZ2V0Q29ubigpO1xuICAgIDQwXHQgICAgICAgICAgICBzdCA9IGNvbm4uY3JlYXRlU3RhdGVtZW50KCk7XG4gICAgNDFcdCAgICAgICAgICAgIHJzID0gc3QuZXhlY3V0ZVF1ZXJ5KHF1ZXJ5KTtcbiAgICA0Mlx0ICAgICAgICAgICAgXG4gICAgNDNcdCAgICAgICAgICAgIHJldHVybiBycztcbiAgICA0NFx0ICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZXgpe1xuICAgIDQ1XHQgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBleCwgXCJNZXNzYWdlXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgIDQ2XHQgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICA0N1x0ICAgICAgICB9IFxuICAgIDQ4XHQgICAgfVxuICAgIDQ5XHRcbiAgICA1MFx0ICAgIHB1YmxpYyBzdGF0aWMgaW50IGdldE5leHRJZChTdHJpbmcgdGFibGVOYW1lLCBTdHJpbmcgaWRDb2x1bW5OYW1lKSB7XG5Ub3RhbCBsaW5lcyBpbiBmaWxlOiAxMzBcbiIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX0sIjVjNDI5ODMxLWI2ODMtNDgxYy05MzhiLWZkNTQ0ZGFjZmIzNDt0b29sdV8wMVBzZzNEbjh2RlllNDlnUmVabUxRUzUiOnsicmVxdWVzdElkIjoiNWM0Mjk4MzEtYjY4My00ODFjLTkzOGItZmQ1NDRkYWNmYjM0IiwidG9vbFVzZUlkIjoidG9vbHVfMDFQc2czRG44dkZZZTQ5Z1JlWm1MUVM1IiwicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiU3VjY2Vzc2Z1bGx5IGVkaXRlZCB0aGUgZmlsZSBzcmMvREFPL0RiT3BlcmF0aW9ucy5qYXZhLlxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZSBmb3IgZW50cnkgd2l0aCBpbmRleCBbMF06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgICAyOVx0ICAgICAgICAgICAgfVxuICAgIDMwXHQgICAgICAgIH1cbiAgICAzMVx0ICAgIH1cbiAgICAzMlx0XG4gICAgMzNcdCAgICBwdWJsaWMgc3RhdGljIFJlc3VsdFNldCBnZXREYXRhKFN0cmluZyBxdWVyeSl7XG4gICAgMzRcdCAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcbiAgICAzNVx0ICAgICAgICBTdGF0ZW1lbnQgc3QgPSBudWxsO1xuICAgIDM2XHQgICAgICAgIFJlc3VsdFNldCBycyA9IG51bGw7XG4gICAgMzdcdFxuICAgIDM4XHQgICAgICAgIHRyeXtcbiAgICAzOVx0ICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRGJPcGVyYXRpb25zLmdldERhdGEgLSBFeGVjdXRpbmcgcXVlcnk6IFwiICsgcXVlcnkpO1xuICAgIDQwXHQgICAgICAgICAgICBjb25uID0gQ29ubmVjdGlvblByb3ZpZGVyLmdldENvbm4oKTtcbiAgICA0MVx0XG4gICAgNDJcdCAgICAgICAgICAgIGlmIChjb25uID09IG51bGwpIHtcbiAgICA0M1x0ICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkRiT3BlcmF0aW9ucy5nZXREYXRhIC0gQ29ubmVjdGlvbiBpcyBudWxsIVwiKTtcbiAgICA0NFx0ICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgIDQ1XHQgICAgICAgICAgICB9XG4gICAgNDZcdFxuICAgIDQ3XHQgICAgICAgICAgICBzdCA9IGNvbm4uY3JlYXRlU3RhdGVtZW50KCk7XG4gICAgNDhcdCAgICAgICAgICAgIHJzID0gc3QuZXhlY3V0ZVF1ZXJ5KHF1ZXJ5KTtcbiAgICA0OVx0ICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRGJPcGVyYXRpb25zLmdldERhdGEgLSBRdWVyeSBleGVjdXRlZCBzdWNjZXNzZnVsbHlcIik7XG4gICAgNTBcdFxuICAgIDUxXHQgICAgICAgICAgICByZXR1cm4gcnM7XG4gICAgNTJcdCAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGV4KXtcbiAgICA1M1x0ICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRGJPcGVyYXRpb25zLmdldERhdGEgLSBFeGNlcHRpb246IFwiICsgZXguZ2V0TWVzc2FnZSgpKTtcbiAgICA1NFx0ICAgICAgICAgICAgZXgucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgNTVcdCAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIGV4LCBcIk1lc3NhZ2VcIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAgNTZcdCAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgIDU3XHQgICAgICAgIH1cbiAgICA1OFx0ICAgIH1cbiAgICA1OVx0XG4gICAgNjBcdCAgICBwdWJsaWMgc3RhdGljIGludCBnZXROZXh0SWQoU3RyaW5nIHRhYmxlTmFtZSwgU3RyaW5nIGlkQ29sdW1uTmFtZSkge1xuICAgIDYxXHQgICAgICAgIGludCBuZXh0SWQgPSAxO1xuICAgIDYyXHQgICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG5cblJldmlldyB0aGUgY2hhbmdlcyBhbmQgbWFrZSBzdXJlIHRoZXkgYXJlIGFzIGV4cGVjdGVkIChjb3JyZWN0IGluZGVudGF0aW9uLCBubyBkdXBsaWNhdGUgbGluZXMsIGV0YykuXG5FZGl0IHRoZSBmaWxlIGFnYWluIGlmIG5lY2Vzc2FyeS5cbiIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX19LCJkcmFmdEV4Y2hhbmdlIjp7InJlcXVlc3RfbWVzc2FnZSI6IiIsInJpY2hfdGV4dF9qc29uX3JlcHIiOnsidHlwZSI6ImRvYyIsImNvbnRlbnQiOlt7InR5cGUiOiJwYXJhZ3JhcGgifV19LCJzdGF0dXMiOiJkcmFmdCJ9LCJkcmFmdEFjdGl2ZUNvbnRleHRJZHMiOlsiRTovSG9jVGFwLzAyX0pBVkEvMDNfUHJvamVjdC9JbnRlcm5ldCBNYW5nZW1lbnQgU3lzdGVtL3NyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL0ZvcmdvdFBhc3N3b3JkLmphdmEiLCJFOi9Ib2NUYXAvMDJfSkFWQS8wM19Qcm9qZWN0L0ludGVybmV0IE1hbmdlbWVudCBTeXN0ZW1mYWxzZWZhbHNlIiwidXNlckd1aWRlbGluZXMiLCJhZ2VudE1lbW9yaWVzIl0sInJlcXVlc3RJZHMiOltdLCJpc1Bpbm5lZCI6ZmFsc2UsImlzU2hhcmVhYmxlIjp0cnVlLCJleHRyYURhdGEiOnsiaXNBZ2VudENvbnZlcnNhdGlvbiI6dHJ1ZSwiaGFzRGlydHlFZGl0cyI6ZmFsc2UsImJhc2VsaW5lVGltZXN0YW1wIjoxNzQ3MDk5NzA3NDg2fSwicGVyc29uYVR5cGUiOjB9LCJjYWI4MjAyZS00ODFlLTRkOWQtOTNkYy1iZTc5ZDc3MGYzMzIiOnsiaWQiOiJjYWI4MjAyZS00ODFlLTRkOWQtOTNkYy1iZTc5ZDc3MGYzMzIiLCJjcmVhdGVkQXRJc28iOiIyMDI1LTA1LTEzVDAxOjU1OjEzLjQ2MFoiLCJsYXN0SW50ZXJhY3RlZEF0SXNvIjoiMjAyNS0wNS0xM1QxMjo1Nzo1Ny4yMTNaIiwiY2hhdEhpc3RvcnkiOlt7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiYjU1M2UzOGQtMDU4MS00ZGZlLThiZjgtMDUxNjIzNzE0ZWQ3IiwicmVxdWVzdF9tZXNzYWdlIjoid2hlbiBpIGNsaWNrIGNoYW5nZSBwYXNzd29yZCBidXR0b24gYW5kIGVudGVyIG5ldyBwYXNzd29yZCBpdCBkb2Vzbid0IHNob3cgYW55dGhpbmc/IiwicmljaF90ZXh0X2pzb25fcmVwciI6eyJ0eXBlIjoiZG9jIiwiY29udGVudCI6W3sidHlwZSI6InBhcmFncmFwaCIsImNvbnRlbnQiOlt7InR5cGUiOiJ0ZXh0IiwidGV4dCI6IndoZW4gaSBjbGljayBjaGFuZ2UgcGFzc3dvcmQgYnV0dG9uIGFuZCBlbnRlciBuZXcgcGFzc3dvcmQgaXQgZG9lc24ndCBzaG93IGFueXRoaW5nPyJ9XX1dfSwibWVudGlvbmVkX2l0ZW1zIjpbXSwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV8wMTF4UmFiTHhBZGdSN295Smc5eXprWGEiLCJ0b29sX25hbWUiOiJzdHItcmVwbGFjZS1lZGl0b3IiLCJpbnB1dF9qc29uIjoie1wiY29tbWFuZFwiOiBcInZpZXdcIiwgXCJwYXRoXCI6IFwic3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vRm9yZ290UGFzc3dvcmQuamF2YVwifSIsIm1jcF9zZXJ2ZXJfbmFtZSI6IiIsIm1jcF90b29sX25hbWUiOiIifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IkknbGwgaGVscCB5b3UgaW52ZXN0aWdhdGUgd2h5IHRoZSBjaGFuZ2UgcGFzc3dvcmQgYnV0dG9uIGlzbid0IHNob3dpbmcgYW55dGhpbmcgd2hlbiBjbGlja2VkLiBMZXQncyBmaXJzdCBsb29rIGF0IHRoZSBgRm9yZ290UGFzc3dvcmQuamF2YWAgZmlsZSB0byB1bmRlcnN0YW5kIGhvdyBpdCdzIGN1cnJlbnRseSBpbXBsZW1lbnRlZC5cbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjAsInRleHRfbm9kZSI6eyJjb250ZW50Ijoid2hlbiBpIGNsaWNrIGNoYW5nZSBwYXNzd29yZCBidXR0b24gYW5kIGVudGVyIG5ldyBwYXNzd29yZCBpdCBkb2Vzbid0IHNob3cgYW55dGhpbmc/In19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiRTovSG9jVGFwLzAyX0pBVkEvMDNfUHJvamVjdC9JbnRlcm5ldCBNYW5nZW1lbnQgU3lzdGVtIiwiZm9sZGVyUm9vdCI6IkU6L0hvY1RhcC8wMl9KQVZBLzAzX1Byb2plY3QvSW50ZXJuZXQgTWFuZ2VtZW50IFN5c3RlbSJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInRpbWVzdGFtcCI6IjIwMjUtMDUtMTNUMDE6NTU6MTUuMjc0WiIsInJlc3BvbnNlX3RleHQiOiJJJ2xsIGhlbHAgeW91IGludmVzdGlnYXRlIHdoeSB0aGUgY2hhbmdlIHBhc3N3b3JkIGJ1dHRvbiBpc24ndCBzaG93aW5nIGFueXRoaW5nIHdoZW4gY2xpY2tlZC4gTGV0J3MgZmlyc3QgbG9vayBhdCB0aGUgYEZvcmdvdFBhc3N3b3JkLmphdmFgIGZpbGUgdG8gdW5kZXJzdGFuZCBob3cgaXQncyBjdXJyZW50bHkgaW1wbGVtZW50ZWQuXG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiYmY4Yzg5MzItY2I1ZC00Y2JiLWI3OWItMzllOTRhYWY4MTYyIiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV8wMVZkZzliSDdxd0ZQa3R1WmZ0YjQxRDEiLCJ0b29sX25hbWUiOiJjb2RlYmFzZS1yZXRyaWV2YWwiLCJpbnB1dF9qc29uIjoie1wiaW5mb3JtYXRpb25fcmVxdWVzdFwiOiBcIkZpbmQgdGhlIFN1YnNjcmliZXJEQU8gY2xhc3MgYW5kIHNwZWNpZmljYWxseSB0aGUgdXBkYXRlUGFzc3dvcmQgbWV0aG9kXCJ9IiwibWNwX3NlcnZlcl9uYW1lIjoiIiwibWNwX3Rvb2xfbmFtZSI6IiJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiTGV0J3MgYWxzbyBsb29rIGF0IHRoZSBTdWJzY3JpYmVyREFPIGNsYXNzIHRvIHVuZGVyc3RhbmQgaG93IHRoZSBwYXNzd29yZCB1cGRhdGUgZnVuY3Rpb25hbGl0eSB3b3JrczpcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IkhlcmUncyB0aGUgcmVzdWx0IG9mIHJ1bm5pbmcgYGNhdCAtbmAgb24gc3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vRm9yZ290UGFzc3dvcmQuamF2YTpcbiAgICAgMVx0LypcbiAgICAgMlx0ICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9MaWNlbnNlcy9saWNlbnNlLWRlZmF1bHQudHh0IHRvIGNoYW5nZSB0aGlzIGxpY2Vuc2VcbiAgICAgM1x0ICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9HVUlGb3Jtcy9KRnJhbWUuamF2YSB0byBlZGl0IHRoaXMgdGVtcGxhdGVcbiAgICAgNFx0ICovXG4gICAgIDVcdHBhY2thZ2UgaW50ZXJuZXQubWFuZ2VtZW50LnN5c3RlbTtcbiAgICAgNlx0XG4gICAgIDdcdGltcG9ydCBEQU8uU3Vic2NyaWJlckRBTztcbiAgICAgOFx0aW1wb3J0IE1vZGVsLlN1YnNjcmliZXI7XG4gICAgIDlcdGltcG9ydCBqYXZheC5zd2luZy5KT3B0aW9uUGFuZTtcbiAgICAxMFx0aW1wb3J0IGludGVybmV0Lm1hbmdlbWVudC5zeXN0ZW0uTG9naW47XG4gICAgMTFcdFxuICAgIDEyXHQvKipcbiAgICAxM1x0ICpcbiAgICAxNFx0ICogQGF1dGhvciBOZ29jIFRoYW9cbiAgICAxNVx0ICovXG4gICAgMTZcdHB1YmxpYyBjbGFzcyBGb3Jnb3RQYXNzd29yZCBleHRlbmRzIGphdmF4LnN3aW5nLkpGcmFtZSB7XG4gICAgMTdcdCAgICBwcml2YXRlIFN1YnNjcmliZXIgY3VycmVudFN1YnNjcmliZXIgPSBudWxsO1xuICAgIDE4XHQgICAgcHVibGljIFN0cmluZyBwaG9uZVBhdHRlcm4gPSBcIl5bMC05XSokXCI7XG4gICAgMTlcdFxuICAgIDIwXHQgICAgLyoqXG4gICAgMjFcdCAgICAgKiBDcmVhdGVzIG5ldyBmb3JtIEZvcmdvdFBhc3N3b3JkXG4gICAgMjJcdCAgICAgKi9cbiAgICAyM1x0ICAgIHB1YmxpYyBGb3Jnb3RQYXNzd29yZCgpIHtcbiAgICAyNFx0ICAgICAgICBpbml0Q29tcG9uZW50cygpO1xuICAgIDI1XHRcbiAgICAyNlx0ICAgICAgICBidG5FeGl0LnNldFZpc2libGUoZmFsc2UpO1xuICAgIDI3XHQgICAgICAgIGJ0bkNoYW5nZS5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICAyOFx0ICAgICAgICBsYk5ld1Bhc3N3b3JkLnNldFZpc2libGUoZmFsc2UpO1xuICAgIDI5XHQgICAgICAgIGxiQ29uZmlybVBhc3N3b3JkLnNldFZpc2libGUoZmFsc2UpO1xuICAgIDMwXHQgICAgICAgIHR4dFBhc3N3b3JkLnNldFZpc2libGUoZmFsc2UpO1xuICAgIDMxXHQgICAgICAgIHR4dENvbmZpcm1QYXNzd29yZC5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICAzMlx0ICAgIH1cbiAgICAzM1x0XG4gICAgMzRcdCAgICBwdWJsaWMgdm9pZCBjbGVhcigpe1xuICAgIDM1XHQgICAgICAgIHR4dFBhc3N3b3JkLnNldFRleHQoXCJcIik7XG4gICAgMzZcdCAgICAgICAgdHh0UGhvbmUuc2V0VGV4dChcIlwiKTtcbiAgICAzN1x0ICAgICAgICB0eHRDb25maXJtUGFzc3dvcmQuc2V0VGV4dChcIlwiKTtcbiAgICAzOFx0XG4gICAgMzlcdCAgICAgICAgYnRuRXhpdC5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICA0MFx0ICAgICAgICBidG5DaGFuZ2Uuc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgNDFcdCAgICAgICAgbGJOZXdQYXNzd29yZC5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICA0Mlx0ICAgICAgICBsYkNvbmZpcm1QYXNzd29yZC5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICA0M1x0ICAgICAgICB0eHRQYXNzd29yZC5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICA0NFx0ICAgICAgICB0eHRDb25maXJtUGFzc3dvcmQuc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgNDVcdCAgICB9XG4gICAgNDZcdFxuICAgIDQ3XHQgICAgcHVibGljIGJvb2xlYW4gdmFsaWRhdGVQaG9uZSgpe1xuICAgIDQ4XHQgICAgICAgIFN0cmluZyBwaG9uZSA9IHR4dFBob25lLmdldFRleHQoKTtcbiAgICA0OVx0ICAgICAgICBpZihwaG9uZS5sZW5ndGgoKSAhPSAxMCB8fCAhcGhvbmUubWF0Y2hlcyhwaG9uZVBhdHRlcm4pKSB7XG4gICAgNTBcdCAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwiVnVpIGzDsm5nIG5o4bqtcCDEkcO6bmcgxJHhu4tuaCBk4bqhbmcgc+G7kSDEkWnhu4duIHRob+G6oWkhXCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAgNTFcdCAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICA1Mlx0ICAgICAgICB9XG4gICAgNTNcdCAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgNTRcdCAgICB9XG4gICAgNTVcdFxuICAgIDU2XHQgICAgcHVibGljIGJvb2xlYW4gdmFsaWRhdGVGaWVsZHMoKXtcbiAgICA1N1x0ICAgICAgICBTdHJpbmcgcGFzc3dvcmQgPSB0eHRQYXNzd29yZC5nZXRUZXh0KCk7XG4gICAgNThcdCAgICAgICAgU3RyaW5nIGNvbmZpcm1QYXNzd29yZCA9IHR4dENvbmZpcm1QYXNzd29yZC5nZXRUZXh0KCk7XG4gICAgNTlcdFxuICAgIDYwXHQgICAgICAgIGlmKHBhc3N3b3JkLmlzRW1wdHkoKSB8fCBjb25maXJtUGFzc3dvcmQuaXNFbXB0eSgpKXtcbiAgICA2MVx0ICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXCJWdWkgbMOybmcga2jDtG5nIGLhu48gdHLhu5FuZyFcIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgICA2Mlx0ICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIDYzXHQgICAgICAgIH1cbiAgICA2NFx0XG4gICAgNjVcdCAgICAgICAgaWYoIXBhc3N3b3JkLmVxdWFscyhjb25maXJtUGFzc3dvcmQpKXtcbiAgICA2Nlx0ICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXCJN4bqtdCBraOG6qXUgeMOhYyBuaOG6rW4ga2jDtG5nIGto4bubcCFcIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgICA2N1x0ICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIDY4XHQgICAgICAgIH1cbiAgICA2OVx0XG4gICAgNzBcdCAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgNzFcdCAgICB9XG4gICAgNzJcdFxuICAgIDczXHQgICAgLyoqXG4gICAgNzRcdCAgICAgKiBUaGlzIG1ldGhvZCBpcyBjYWxsZWQgZnJvbSB3aXRoaW4gdGhlIGNvbnN0cnVjdG9yIHRvIGluaXRpYWxpemUgdGhlIGZvcm0uXG4gICAgNzVcdCAgICAgKiBXQVJOSU5HOiBEbyBOT1QgbW9kaWZ5IHRoaXMgY29kZS4gVGhlIGNvbnRlbnQgb2YgdGhpcyBtZXRob2QgaXMgYWx3YXlzXG4gICAgNzZcdCAgICAgKiByZWdlbmVyYXRlZCBieSB0aGUgRm9ybSBFZGl0b3IuXG4gICAgNzdcdCAgICAgKi9cbiAgICA3OFx0ICAgIEBTdXBwcmVzc1dhcm5pbmdzKFwidW5jaGVja2VkXCIpXG4gICAgNzlcdCAgICAvLyA8ZWRpdG9yLWZvbGQgZGVmYXVsdHN0YXRlPVwiY29sbGFwc2VkXCIgZGVzYz1cIkdlbmVyYXRlZCBDb2RlXCI+Ly9HRU4tQkVHSU46aW5pdENvbXBvbmVudHNcbiAgICA4MFx0ICAgIHByaXZhdGUgdm9pZCBpbml0Q29tcG9uZW50cygpIHtcbiAgICA4MVx0XG4gICAgODJcdCAgICAgICAgakxhYmVsMSA9IG5ldyBqYXZheC5zd2luZy5KTGFiZWwoKTtcbiAgICA4M1x0ICAgICAgICBqTGFiZWwyID0gbmV3IGphdmF4LnN3aW5nLkpMYWJlbCgpO1xuICAgIDg0XHQgICAgICAgIGxiTmV3UGFzc3dvcmQgPSBuZXcgamF2YXguc3dpbmcuSkxhYmVsKCk7XG4gICAgODVcdCAgICAgICAgbGJDb25maXJtUGFzc3dvcmQgPSBuZXcgamF2YXguc3dpbmcuSkxhYmVsKCk7XG4gICAgODZcdCAgICAgICAgalNlcGFyYXRvcjEgPSBuZXcgamF2YXguc3dpbmcuSlNlcGFyYXRvcigpO1xuICAgIDg3XHQgICAgICAgIHR4dFBob25lID0gbmV3IGphdmF4LnN3aW5nLkpUZXh0RmllbGQoKTtcbiAgICA4OFx0ICAgICAgICBidG5DaGVjayA9IG5ldyBqYXZheC5zd2luZy5KQnV0dG9uKCk7XG4gICAgODlcdCAgICAgICAgdHh0UGFzc3dvcmQgPSBuZXcgamF2YXguc3dpbmcuSlBhc3N3b3JkRmllbGQoKTtcbiAgICA5MFx0ICAgICAgICB0eHRDb25maXJtUGFzc3dvcmQgPSBuZXcgamF2YXguc3dpbmcuSlBhc3N3b3JkRmllbGQoKTtcbiAgICA5MVx0ICAgICAgICBidG5DaGFuZ2UgPSBuZXcgamF2YXguc3dpbmcuSkJ1dHRvbigpO1xuICAgIDkyXHQgICAgICAgIGJ0bkV4aXQgPSBuZXcgamF2YXguc3dpbmcuSkJ1dHRvbigpO1xuICAgIDkzXHRcbiAgICA5NFx0ICAgICAgICBzZXREZWZhdWx0Q2xvc2VPcGVyYXRpb24oamF2YXguc3dpbmcuV2luZG93Q29uc3RhbnRzLkVYSVRfT05fQ0xPU0UpO1xuICAgIDk1XHRcbiAgICA5Nlx0ICAgICAgICBqTGFiZWwxLnNldEZvbnQobmV3IGphdmEuYXd0LkZvbnQoXCJBcmlhbFwiLCAxLCAzNikpOyAvLyBOT0kxOE5cbiAgICA5N1x0ICAgICAgICBqTGFiZWwxLnNldEZvcmVncm91bmQoamF2YXguc3dpbmcuVUlNYW5hZ2VyLmdldERlZmF1bHRzKCkuZ2V0Q29sb3IoXCJBY3Rpb25zLlllbGxvd1wiKSk7XG4gICAgOThcdCAgICAgICAgakxhYmVsMS5zZXRUZXh0KFwixJDhu5RJIE3huqxUIEtI4bqoVVwiKTtcbiAgICA5OVx0XG4gICAxMDBcdCAgICAgICAgakxhYmVsMi5zZXRGb250KG5ldyBqYXZhLmF3dC5Gb250KFwiQXJpYWxcIiwgMSwgMTQpKTsgLy8gTk9JMThOXG4gICAxMDFcdCAgICAgICAgakxhYmVsMi5zZXRUZXh0KFwiU+G7kSDEkWnhu4duIHRob+G6oWk6IFwiKTtcbiAgIDEwMlx0XG4gICAxMDNcdCAgICAgICAgbGJOZXdQYXNzd29yZC5zZXRGb250KG5ldyBqYXZhLmF3dC5Gb250KFwiQXJpYWxcIiwgMSwgMTQpKTsgLy8gTk9JMThOXG4gICAxMDRcdCAgICAgICAgbGJOZXdQYXNzd29yZC5zZXRUZXh0KFwiTeG6rXQga2jhuql1IG3hu5tpOlwiKTtcbiAgIDEwNVx0XG4gICAxMDZcdCAgICAgICAgbGJDb25maXJtUGFzc3dvcmQuc2V0Rm9udChuZXcgamF2YS5hd3QuRm9udChcIkFyaWFsXCIsIDEsIDE0KSk7IC8vIE5PSTE4TlxuICAgMTA3XHQgICAgICAgIGxiQ29uZmlybVBhc3N3b3JkLnNldFRleHQoXCJYw6FjIG5o4bqtbiBt4bqtdCBraOG6qXU6XCIpO1xuICAgMTA4XHRcbiAgIDEwOVx0ICAgICAgICBidG5DaGVjay5zZXRGb250KG5ldyBqYXZhLmF3dC5Gb250KFwiQXJpYWxcIiwgMSwgMTQpKTsgLy8gTk9JMThOXG4gICAxMTBcdCAgICAgICAgYnRuQ2hlY2suc2V0SWNvbihuZXcgamF2YXguc3dpbmcuSW1hZ2VJY29uKGdldENsYXNzKCkuZ2V0UmVzb3VyY2UoXCIvSW1hZ2VzL3NlYXJjaC5wbmdcIikpKTsgLy8gTk9JMThOXG4gICAxMTFcdCAgICAgICAgYnRuQ2hlY2suc2V0VGV4dChcIktp4buDbSB0cmFcIik7XG4gICAxMTJcdCAgICAgICAgYnRuQ2hlY2suc2V0Q3Vyc29yKG5ldyBqYXZhLmF3dC5DdXJzb3IoamF2YS5hd3QuQ3Vyc29yLkhBTkRfQ1VSU09SKSk7XG4gICAxMTNcdCAgICAgICAgYnRuQ2hlY2suYWRkQWN0aW9uTGlzdGVuZXIobmV3IGphdmEuYXd0LmV2ZW50LkFjdGlvbkxpc3RlbmVyKCkge1xuICAgMTE0XHQgICAgICAgICAgICBwdWJsaWMgdm9pZCBhY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7XG4gICAxMTVcdCAgICAgICAgICAgICAgICBidG5DaGVja0FjdGlvblBlcmZvcm1lZChldnQpO1xuICAgMTE2XHQgICAgICAgICAgICB9XG4gICAxMTdcdCAgICAgICAgfSk7XG4gICAxMThcdFxuICAgMTE5XHQgICAgICAgIGJ0bkNoYW5nZS5zZXRGb250KG5ldyBqYXZhLmF3dC5Gb250KFwiQXJpYWxcIiwgMSwgMTQpKTsgLy8gTk9JMThOXG4gICAxMjBcdCAgICAgICAgYnRuQ2hhbmdlLnNldEljb24obmV3IGphdmF4LnN3aW5nLkltYWdlSWNvbihnZXRDbGFzcygpLmdldFJlc291cmNlKFwiL0ltYWdlcy9yZXNldC1wYXNzd29yZC5wbmdcIikpKTsgLy8gTk9JMThOXG4gICAxMjFcdCAgICAgICAgYnRuQ2hhbmdlLnNldFRleHQoXCLEkOG7lWkgbeG6rXQga2jhuql1XCIpO1xuICAgMTIyXHQgICAgICAgIGJ0bkNoYW5nZS5zZXRDdXJzb3IobmV3IGphdmEuYXd0LkN1cnNvcihqYXZhLmF3dC5DdXJzb3IuSEFORF9DVVJTT1IpKTtcbiAgIDEyM1x0ICAgICAgICBidG5DaGFuZ2UuYWRkQWN0aW9uTGlzdGVuZXIobmV3IGphdmEuYXd0LmV2ZW50LkFjdGlvbkxpc3RlbmVyKCkge1xuICAgMTI0XHQgICAgICAgICAgICBwdWJsaWMgdm9pZCBhY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7XG4gICAxMjVcdCAgICAgICAgICAgICAgICBidG5DaGFuZ2VBY3Rpb25QZXJmb3JtZWQoZXZ0KTtcbiAgIDEyNlx0ICAgICAgICAgICAgfVxuICAgMTI3XHQgICAgICAgIH0pO1xuICAgMTI4XHRcbiAgIDEyOVx0ICAgICAgICBidG5FeGl0LnNldEZvbnQobmV3IGphdmEuYXd0LkZvbnQoXCJBcmlhbFwiLCAxLCAxNCkpOyAvLyBOT0kxOE5cbiAgIDEzMFx0ICAgICAgICBidG5FeGl0LnNldEljb24obmV3IGphdmF4LnN3aW5nLkltYWdlSWNvbihnZXRDbGFzcygpLmdldFJlc291cmNlKFwiL0ltYWdlcy9sb2dvdXQucG5nXCIpKSk7IC8vIE5PSTE4TlxuICAgMTMxXHQgICAgICAgIGJ0bkV4aXQuc2V0VGV4dChcIlRob8OhdFwiKTtcbiAgIDEzMlx0ICAgICAgICBidG5FeGl0LnNldEN1cnNvcihuZXcgamF2YS5hd3QuQ3Vyc29yKGphdmEuYXd0LkN1cnNvci5IQU5EX0NVUlNPUikpO1xuICAgMTMzXHQgICAgICAgIGJ0bkV4aXQuYWRkQWN0aW9uTGlzdGVuZXIobmV3IGphdmEuYXd0LmV2ZW50LkFjdGlvbkxpc3RlbmVyKCkge1xuICAgMTM0XHQgICAgICAgICAgICBwdWJsaWMgdm9pZCBhY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7XG4gICAxMzVcdCAgICAgICAgICAgICAgICBidG5FeGl0QWN0aW9uUGVyZm9ybWVkKGV2dCk7XG4gICAxMzZcdCAgICAgICAgICAgIH1cbiAgIDEzN1x0ICAgICAgICB9KTtcbiAgIDEzOFx0XG4gICAxMzlcdCAgICAgICAgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQgbGF5b3V0ID0gbmV3IGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0KGdldENvbnRlbnRQYW5lKCkpO1xuICAgMTQwXHQgICAgICAgIGdldENvbnRlbnRQYW5lKCkuc2V0TGF5b3V0KGxheW91dCk7XG4gICAxNDFcdCAgICAgICAgbGF5b3V0LnNldEhvcml6b250YWxHcm91cChcbiAgIDE0Mlx0ICAgICAgICAgICAgbGF5b3V0LmNyZWF0ZVBhcmFsbGVsR3JvdXAoamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuQWxpZ25tZW50LkxFQURJTkcpXG4gICAxNDNcdCAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlU2VxdWVudGlhbEdyb3VwKClcbiAgIDE0NFx0ICAgICAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlUGFyYWxsZWxHcm91cChqYXZheC5zd2luZy5Hcm91cExheW91dC5BbGlnbm1lbnQuTEVBRElORylcbiAgIDE0NVx0ICAgICAgICAgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVNlcXVlbnRpYWxHcm91cCgpXG4gICAxNDZcdCAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRHYXAoMTEwLCAxMTAsIDExMClcbiAgIDE0N1x0ICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChqTGFiZWwxKSlcbiAgIDE0OFx0ICAgICAgICAgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVNlcXVlbnRpYWxHcm91cCgpXG4gICAxNDlcdCAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRHYXAoNjEsIDYxLCA2MSlcbiAgIDE1MFx0ICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChqU2VwYXJhdG9yMSwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUsIDM3MCwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUpKVxuICAgMTUxXHQgICAgICAgICAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlU2VxdWVudGlhbEdyb3VwKClcbiAgIDE1Mlx0ICAgICAgICAgICAgICAgICAgICAgICAgLmFkZEdhcCg2MSwgNjEsIDYxKVxuICAgMTUzXHQgICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGpMYWJlbDIpXG4gICAxNTRcdCAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRHYXAoNTYsIDU2LCA1NilcbiAgIDE1NVx0ICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudCh0eHRQaG9uZSwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUsIDIxMCwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUpKVxuICAgMTU2XHQgICAgICAgICAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlU2VxdWVudGlhbEdyb3VwKClcbiAgIDE1N1x0ICAgICAgICAgICAgICAgICAgICAgICAgLmFkZEdhcCg2MSwgNjEsIDYxKVxuICAgMTU4XHQgICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGxiTmV3UGFzc3dvcmQpXG4gICAxNTlcdCAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRHYXAoNTcsIDU3LCA1NylcbiAgIDE2MFx0ICAgICAgICAgICAgICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVQYXJhbGxlbEdyb3VwKGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LkFsaWdubWVudC5MRUFESU5HKVxuICAgMTYxXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudCh0eHRQYXNzd29yZCwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUsIDIxMCwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUpXG4gICAxNjJcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVNlcXVlbnRpYWxHcm91cCgpXG4gICAxNjNcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFkZEdhcCgxMDIsIDEwMiwgMTAyKVxuICAgMTY0XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQoYnRuQ2hlY2spKSkpXG4gICAxNjVcdCAgICAgICAgICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVQYXJhbGxlbEdyb3VwKGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LkFsaWdubWVudC5UUkFJTElORywgZmFsc2UpXG4gICAxNjZcdCAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlU2VxdWVudGlhbEdyb3VwKClcbiAgIDE2N1x0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRHYXAoNjAsIDYwLCA2MClcbiAgIDE2OFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQoYnRuRXhpdClcbiAgIDE2OVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRQcmVmZXJyZWRHYXAoamF2YXguc3dpbmcuTGF5b3V0U3R5bGUuQ29tcG9uZW50UGxhY2VtZW50LlJFTEFURUQsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LkRFRkFVTFRfU0laRSwgU2hvcnQuTUFYX1ZBTFVFKVxuICAgMTcwXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChidG5DaGFuZ2UpKVxuICAgMTcxXHQgICAgICAgICAgICAgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVNlcXVlbnRpYWxHcm91cCgpXG4gICAxNzJcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYWRkR2FwKDYxLCA2MSwgNjEpXG4gICAxNzNcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGxiQ29uZmlybVBhc3N3b3JkKVxuICAgMTc0XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFkZEdhcCgxOCwgMTgsIDE4KVxuICAgMTc1XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudCh0eHRDb25maXJtUGFzc3dvcmQsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFLCAyMTEsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFKSkpKVxuICAgMTc2XHQgICAgICAgICAgICAgICAgLmFkZEdhcCg2OSwgNjksIDY5KSlcbiAgIDE3N1x0ICAgICAgICApO1xuICAgMTc4XHQgICAgICAgIGxheW91dC5zZXRWZXJ0aWNhbEdyb3VwKFxuICAgMTc5XHQgICAgICAgICAgICBsYXlvdXQuY3JlYXRlUGFyYWxsZWxHcm91cChqYXZheC5zd2luZy5Hcm91cExheW91dC5BbGlnbm1lbnQuTEVBRElORylcbiAgIDE4MFx0ICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVTZXF1ZW50aWFsR3JvdXAoKVxuICAgMTgxXHQgICAgICAgICAgICAgICAgLmFkZEdhcCg0MCwgNDAsIDQwKVxuICAgMTgyXHQgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChqTGFiZWwxKVxuICAgMTgzXHQgICAgICAgICAgICAgICAgLmFkZEdhcCgxNCwgMTQsIDE0KVxuICAgMTg0XHQgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChqU2VwYXJhdG9yMSwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUsIDEwLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSlcbiAgIDE4NVx0ICAgICAgICAgICAgICAgIC5hZGRHYXAoMTIsIDEyLCAxMilcbiAgIDE4Nlx0ICAgICAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlUGFyYWxsZWxHcm91cChqYXZheC5zd2luZy5Hcm91cExheW91dC5BbGlnbm1lbnQuTEVBRElORylcbiAgIDE4N1x0ICAgICAgICAgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVNlcXVlbnRpYWxHcm91cCgpXG4gICAxODhcdCAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRHYXAoMywgMywgMylcbiAgIDE4OVx0ICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChqTGFiZWwyKSlcbiAgIDE5MFx0ICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KHR4dFBob25lLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuREVGQVVMVF9TSVpFLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSkpXG4gICAxOTFcdCAgICAgICAgICAgICAgICAuYWRkR2FwKDE4LCAxOCwgMTgpXG4gICAxOTJcdCAgICAgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVBhcmFsbGVsR3JvdXAoamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuQWxpZ25tZW50LkxFQURJTkcpXG4gICAxOTNcdCAgICAgICAgICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVTZXF1ZW50aWFsR3JvdXAoKVxuICAgMTk0XHQgICAgICAgICAgICAgICAgICAgICAgICAuYWRkR2FwKDMsIDMsIDMpXG4gICAxOTVcdCAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQobGJOZXdQYXNzd29yZCkpXG4gICAxOTZcdCAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudCh0eHRQYXNzd29yZCwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LkRFRkFVTFRfU0laRSwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUpXG4gICAxOTdcdCAgICAgICAgICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVTZXF1ZW50aWFsR3JvdXAoKVxuICAgMTk4XHQgICAgICAgICAgICAgICAgICAgICAgICAuYWRkR2FwKDIsIDIsIDIpXG4gICAxOTlcdCAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQoYnRuQ2hlY2ssIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFLCAzMCwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUpKSlcbiAgIDIwMFx0ICAgICAgICAgICAgICAgIC5hZGRHYXAoOCwgOCwgOClcbiAgIDIwMVx0ICAgICAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlUGFyYWxsZWxHcm91cChqYXZheC5zd2luZy5Hcm91cExheW91dC5BbGlnbm1lbnQuTEVBRElORylcbiAgIDIwMlx0ICAgICAgICAgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVNlcXVlbnRpYWxHcm91cCgpXG4gICAyMDNcdCAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRHYXAoMywgMywgMylcbiAgIDIwNFx0ICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChsYkNvbmZpcm1QYXNzd29yZCkpXG4gICAyMDVcdCAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudCh0eHRDb25maXJtUGFzc3dvcmQsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5ERUZBVUxUX1NJWkUsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFKSlcbiAgIDIwNlx0ICAgICAgICAgICAgICAgIC5hZGRHYXAoMzAsIDMwLCAzMClcbiAgIDIwN1x0ICAgICAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlUGFyYWxsZWxHcm91cChqYXZheC5zd2luZy5Hcm91cExheW91dC5BbGlnbm1lbnQuQkFTRUxJTkUpXG4gICAyMDhcdCAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChidG5FeGl0LCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSwgMzAsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFKVxuICAgMjA5XHQgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQoYnRuQ2hhbmdlLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSwgMzAsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFKSlcbiAgIDIxMFx0ICAgICAgICAgICAgICAgIC5hZGRDb250YWluZXJHYXAoNDAsIFNob3J0Lk1BWF9WQUxVRSkpXG4gICAyMTFcdCAgICAgICAgKTtcbiAgIDIxMlx0XG4gICAyMTNcdCAgICAgICAgcGFjaygpO1xuICAgMjE0XHQgICAgfS8vIDwvZWRpdG9yLWZvbGQ+Ly9HRU4tRU5EOmluaXRDb21wb25lbnRzXG4gICAyMTVcdFxuICAgMjE2XHQgICAgcHJpdmF0ZSB2b2lkIGJ0bkV4aXRBY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuRXhpdEFjdGlvblBlcmZvcm1lZFxuICAgMjE3XHQgICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxuICAgMjE4XHQgICAgICAgIGludCByZXN1bHQgPSBKT3B0aW9uUGFuZS5zaG93Q29uZmlybURpYWxvZyhudWxsLCBcIkLhuqFuIGPDsyBjaOG6r2MgY2jhuq9uIG114buRbiB0aG/DoXQga2jDtG5nP1wiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLllFU19OT19PUFRJT04sIEpPcHRpb25QYW5lLlFVRVNUSU9OX01FU1NBR0UpO1xuICAgMjE5XHRcbiAgIDIyMFx0ICAgICAgICBpZiAocmVzdWx0ID09IEpPcHRpb25QYW5lLllFU19PUFRJT04pIHtcbiAgIDIyMVx0ICAgICAgICAgICAgbmV3IExvZ2luKCkuc2V0VmlzaWJsZSh0cnVlKTtcbiAgIDIyMlx0ICAgICAgICAgICAgdGhpcy5kaXNwb3NlKCk7XG4gICAyMjNcdCAgICAgICAgfVxuICAgMjI0XHQgICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuRXhpdEFjdGlvblBlcmZvcm1lZFxuICAgMjI1XHRcbiAgIDIyNlx0ICAgIHByaXZhdGUgdm9pZCBidG5DaGVja0FjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5DaGVja0FjdGlvblBlcmZvcm1lZFxuICAgMjI3XHQgICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxuICAgMjI4XHQgICAgICAgIGlmKHZhbGlkYXRlUGhvbmUoKSkge1xuICAgMjI5XHQgICAgICAgICAgICBTdHJpbmcgcGhvbmUgPSB0eHRQaG9uZS5nZXRUZXh0KCk7XG4gICAyMzBcdCAgICAgICAgICAgIGN1cnJlbnRTdWJzY3JpYmVyID0gU3Vic2NyaWJlckRBTy5nZXRCeVBob25lKHBob25lKTtcbiAgIDIzMVx0ICAgICAgICAgICAgXG4gICAyMzJcdCAgICAgICAgICAgIGlmIChjdXJyZW50U3Vic2NyaWJlciAhPSBudWxsKSB7XG4gICAyMzNcdCAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcIlTDrG0gdGjhuqV5IHTDoGkga2hv4bqjbiB24bubaSBz4buRIMSRaeG7h24gdGhv4bqhaSBuw6B5IVwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLklORk9STUFUSU9OX01FU1NBR0UpO1xuICAgMjM0XHRcbiAgIDIzNVx0ICAgICAgICAgICAgICAgIGJ0bkV4aXQuc2V0VmlzaWJsZSh0cnVlKTtcbiAgIDIzNlx0ICAgICAgICAgICAgICAgIGJ0bkNoYW5nZS5zZXRWaXNpYmxlKHRydWUpO1xuICAgMjM3XHQgICAgICAgICAgICAgICAgbGJOZXdQYXNzd29yZC5zZXRWaXNpYmxlKHRydWUpO1xuICAgMjM4XHQgICAgICAgICAgICAgICAgbGJDb25maXJtUGFzc3dvcmQuc2V0VmlzaWJsZSh0cnVlKTtcbiAgIDIzOVx0ICAgICAgICAgICAgICAgIHR4dFBhc3N3b3JkLnNldFZpc2libGUodHJ1ZSk7XG4gICAyNDBcdCAgICAgICAgICAgICAgICB0eHRDb25maXJtUGFzc3dvcmQuc2V0VmlzaWJsZSh0cnVlKTtcbiAgIDI0MVx0XG4gICAyNDJcdCAgICAgICAgICAgICAgICB0eHRQaG9uZS5zZXRFZGl0YWJsZShmYWxzZSk7XG4gICAyNDNcdCAgICAgICAgICAgICAgICBidG5DaGVjay5zZXRFbmFibGVkKGZhbHNlKTtcbiAgIDI0NFx0ICAgICAgICAgICAgfSBlbHNlIHtcbiAgIDI0NVx0ICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwiS2jDtG5nIHTDrG0gdGjhuqV5IHTDoGkga2hv4bqjbiB24bubaSBz4buRIMSRaeG7h24gdGhv4bqhaSBuw6B5IVwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgMjQ2XHQgICAgICAgICAgICB9XG4gICAyNDdcdCAgICAgICAgfVxuICAgMjQ4XHQgICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuQ2hlY2tBY3Rpb25QZXJmb3JtZWRcbiAgIDI0OVx0XG4gICAyNTBcdCAgICBwcml2YXRlIHZvaWQgYnRuQ2hhbmdlQWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkNoYW5nZUFjdGlvblBlcmZvcm1lZFxuICAgMjUxXHQgICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxuICAgMjUyXHQgICAgICAgIGlmKHZhbGlkYXRlRmllbGRzKCkgJiYgY3VycmVudFN1YnNjcmliZXIgPT0gbnVsbCl7XG4gICAyNTNcdCAgICAgICAgICAgIFN0cmluZyBuZXdQYXNzd29yZCA9IHR4dFBhc3N3b3JkLmdldFRleHQoKTtcbiAgIDI1NFx0ICAgICAgICAgICAgXG4gICAyNTVcdCAgICAgICAgICAgIGJvb2xlYW4gaXNTdWNjZXNzID0gU3Vic2NyaWJlckRBTy51cGRhdGVQYXNzd29yZChjdXJyZW50U3Vic2NyaWJlci5nZXRVc2VyX2lkKCksIG5ld1Bhc3N3b3JkKTtcbiAgIDI1Nlx0ICAgICAgICAgICAgXG4gICAyNTdcdCAgICAgICAgICAgIGlmKGlzU3VjY2Vzcykge1xuICAgMjU4XHQgICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXCLEkOG7lWkgbeG6rXQga2jhuql1IHRow6BuaCBjw7RuZyEgVnVpIGzDsm5nIMSRxINuZyBuaOG6rXAgbOG6oWkhXCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuSU5GT1JNQVRJT05fTUVTU0FHRSk7XG4gICAyNTlcdCAgICAgICAgICAgICAgICBuZXcgTG9naW4oKS5zZXRWaXNpYmxlKHRydWUpO1xuICAgMjYwXHQgICAgICAgICAgICAgICAgdGhpcy5kaXNwb3NlKCk7XG4gICAyNjFcdCAgICAgICAgICAgIH0gZWxzZSB7XG4gICAyNjJcdCAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcIsSQ4buVaSBt4bqtdCBraOG6qXUgdGjhuqV0IGLhuqFpfCBWdWkgbMOybmcgdGjhu60gbOG6oWkgc2F1IVwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgMjYzXHQgICAgICAgICAgICB9XG4gICAyNjRcdCAgICAgICAgfVxuICAgMjY1XHQgICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuQ2hhbmdlQWN0aW9uUGVyZm9ybWVkXG4gICAyNjZcdFxuICAgMjY3XHQgICAgLyoqXG4gICAyNjhcdCAgICAgKiBAcGFyYW0gYXJncyB0aGUgY29tbWFuZCBsaW5lIGFyZ3VtZW50c1xuICAgMjY5XHQgICAgICovXG4gICAyNzBcdCAgICBwdWJsaWMgc3RhdGljIHZvaWQgbWFpbihTdHJpbmcgYXJnc1tdKSB7XG4gICAyNzFcdCAgICAgICAgLyogU2V0IHRoZSBOaW1idXMgbG9vayBhbmQgZmVlbCAqL1xuICAgMjcyXHQgICAgICAgIC8vPGVkaXRvci1mb2xkIGRlZmF1bHRzdGF0ZT1cImNvbGxhcHNlZFwiIGRlc2M9XCIgTG9vayBhbmQgZmVlbCBzZXR0aW5nIGNvZGUgKG9wdGlvbmFsKSBcIj5cbiAgIDI3M1x0ICAgICAgICAvKiBJZiBOaW1idXMgKGludHJvZHVjZWQgaW4gSmF2YSBTRSA2KSBpcyBub3QgYXZhaWxhYmxlLCBzdGF5IHdpdGggdGhlIGRlZmF1bHQgbG9vayBhbmQgZmVlbC5cbiAgIDI3NFx0ICAgICAgICAgKiBGb3IgZGV0YWlscyBzZWUgaHR0cDovL2Rvd25sb2FkLm9yYWNsZS5jb20vamF2YXNlL3R1dG9yaWFsL3Vpc3dpbmcvbG9va2FuZGZlZWwvcGxhZi5odG1sXG4gICAyNzVcdCAgICAgICAgICovXG4gICAyNzZcdCAgICAgICAgdHJ5IHtcbiAgIDI3N1x0ICAgICAgICAgICAgZm9yIChqYXZheC5zd2luZy5VSU1hbmFnZXIuTG9va0FuZEZlZWxJbmZvIGluZm8gOiBqYXZheC5zd2luZy5VSU1hbmFnZXIuZ2V0SW5zdGFsbGVkTG9va0FuZEZlZWxzKCkpIHtcbiAgIDI3OFx0ICAgICAgICAgICAgICAgIGlmIChcIk5pbWJ1c1wiLmVxdWFscyhpbmZvLmdldE5hbWUoKSkpIHtcbiAgIDI3OVx0ICAgICAgICAgICAgICAgICAgICBqYXZheC5zd2luZy5VSU1hbmFnZXIuc2V0TG9va0FuZEZlZWwoaW5mby5nZXRDbGFzc05hbWUoKSk7XG4gICAyODBcdCAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAyODFcdCAgICAgICAgICAgICAgICB9XG4gICAyODJcdCAgICAgICAgICAgIH1cbiAgIDI4M1x0ICAgICAgICB9IGNhdGNoIChDbGFzc05vdEZvdW5kRXhjZXB0aW9uIGV4KSB7XG4gICAyODRcdCAgICAgICAgICAgIGphdmEudXRpbC5sb2dnaW5nLkxvZ2dlci5nZXRMb2dnZXIoRm9yZ290UGFzc3dvcmQuY2xhc3MuZ2V0TmFtZSgpKS5sb2coamF2YS51dGlsLmxvZ2dpbmcuTGV2ZWwuU0VWRVJFLCBudWxsLCBleCk7XG4gICAyODVcdCAgICAgICAgfSBjYXRjaCAoSW5zdGFudGlhdGlvbkV4Y2VwdGlvbiBleCkge1xuICAgMjg2XHQgICAgICAgICAgICBqYXZhLnV0aWwubG9nZ2luZy5Mb2dnZXIuZ2V0TG9nZ2VyKEZvcmdvdFBhc3N3b3JkLmNsYXNzLmdldE5hbWUoKSkubG9nKGphdmEudXRpbC5sb2dnaW5nLkxldmVsLlNFVkVSRSwgbnVsbCwgZXgpO1xuICAgMjg3XHQgICAgICAgIH0gY2F0Y2ggKElsbGVnYWxBY2Nlc3NFeGNlcHRpb24gZXgpIHtcbiAgIDI4OFx0ICAgICAgICAgICAgamF2YS51dGlsLmxvZ2dpbmcuTG9nZ2VyLmdldExvZ2dlcihGb3Jnb3RQYXNzd29yZC5jbGFzcy5nZXROYW1lKCkpLmxvZyhqYXZhLnV0aWwubG9nZ2luZy5MZXZlbC5TRVZFUkUsIG51bGwsIGV4KTtcbiAgIDI4OVx0ICAgICAgICB9IGNhdGNoIChqYXZheC5zd2luZy5VbnN1cHBvcnRlZExvb2tBbmRGZWVsRXhjZXB0aW9uIGV4KSB7XG4gICAyOTBcdCAgICAgICAgICAgIGphdmEudXRpbC5sb2dnaW5nLkxvZ2dlci5nZXRMb2dnZXIoRm9yZ290UGFzc3dvcmQuY2xhc3MuZ2V0TmFtZSgpKS5sb2coamF2YS51dGlsLmxvZ2dpbmcuTGV2ZWwuU0VWRVJFLCBudWxsLCBleCk7XG4gICAyOTFcdCAgICAgICAgfVxuICAgMjkyXHQgICAgICAgIC8vPC9lZGl0b3ItZm9sZD5cbiAgIDI5M1x0XG4gICAyOTRcdCAgICAgICAgLyogQ3JlYXRlIGFuZCBkaXNwbGF5IHRoZSBmb3JtICovXG4gICAyOTVcdCAgICAgICAgamF2YS5hd3QuRXZlbnRRdWV1ZS5pbnZva2VMYXRlcihuZXcgUnVubmFibGUoKSB7XG4gICAyOTZcdCAgICAgICAgICAgIHB1YmxpYyB2b2lkIHJ1bigpIHtcbiAgIDI5N1x0ICAgICAgICAgICAgICAgIG5ldyBGb3Jnb3RQYXNzd29yZCgpLnNldFZpc2libGUodHJ1ZSk7XG4gICAyOThcdCAgICAgICAgICAgIH1cbiAgIDI5OVx0ICAgICAgICB9KTtcbiAgIDMwMFx0ICAgIH1cbiAgIDMwMVx0XG4gICAzMDJcdCAgICAvLyBWYXJpYWJsZXMgZGVjbGFyYXRpb24gLSBkbyBub3QgbW9kaWZ5Ly9HRU4tQkVHSU46dmFyaWFibGVzXG4gICAzMDNcdCAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpCdXR0b24gYnRuQ2hhbmdlO1xuICAgMzA0XHQgICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KQnV0dG9uIGJ0bkNoZWNrO1xuICAgMzA1XHQgICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KQnV0dG9uIGJ0bkV4aXQ7XG4gICAzMDZcdCAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpMYWJlbCBqTGFiZWwxO1xuICAgMzA3XHQgICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KTGFiZWwgakxhYmVsMjtcbiAgIDMwOFx0ICAgIHByaXZhdGUgamF2YXguc3dpbmcuSlNlcGFyYXRvciBqU2VwYXJhdG9yMTtcbiAgIDMwOVx0ICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkxhYmVsIGxiQ29uZmlybVBhc3N3b3JkO1xuICAgMzEwXHQgICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KTGFiZWwgbGJOZXdQYXNzd29yZDtcbiAgIDMxMVx0ICAgIHByaXZhdGUgamF2YXguc3dpbmcuSlBhc3N3b3JkRmllbGQgdHh0Q29uZmlybVBhc3N3b3JkO1xuICAgMzEyXHQgICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KUGFzc3dvcmRGaWVsZCB0eHRQYXNzd29yZDtcbiAgIDMxM1x0ICAgIHByaXZhdGUgamF2YXguc3dpbmcuSlRleHRGaWVsZCB0eHRQaG9uZTtcbiAgIDMxNFx0ICAgIC8vIEVuZCBvZiB2YXJpYWJsZXMgZGVjbGFyYXRpb24vL0dFTi1FTkQ6dmFyaWFibGVzXG4gICAzMTVcdH1cbiAgIDMxNlx0XG5Ub3RhbCBsaW5lcyBpbiBmaWxlOiAzMTZcbiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfMDExeFJhYkx4QWRnUjdveUpnOXl6a1hhIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiRTovSG9jVGFwLzAyX0pBVkEvMDNfUHJvamVjdC9JbnRlcm5ldCBNYW5nZW1lbnQgU3lzdGVtIiwiZm9sZGVyUm9vdCI6IkU6L0hvY1RhcC8wMl9KQVZBLzAzX1Byb2plY3QvSW50ZXJuZXQgTWFuZ2VtZW50IFN5c3RlbSJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInRpbWVzdGFtcCI6IjIwMjUtMDUtMTNUMDE6NTU6MjQuMjg3WiIsInJlc3BvbnNlX3RleHQiOiJMZXQncyBhbHNvIGxvb2sgYXQgdGhlIFN1YnNjcmliZXJEQU8gY2xhc3MgdG8gdW5kZXJzdGFuZCBob3cgdGhlIHBhc3N3b3JkIHVwZGF0ZSBmdW5jdGlvbmFsaXR5IHdvcmtzOlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6IjE2NmFkOWZkLWZmZGEtNGRlNC1hMjY1LTgxMWZhMDI4Mjc4YSIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfMDFIdDE5RGlGTHY5b1VjZ0J6cURwcHpUIiwidG9vbF9uYW1lIjoic3RyLXJlcGxhY2UtZWRpdG9yIiwiaW5wdXRfanNvbiI6IntcImNvbW1hbmRcIjogXCJzdHJfcmVwbGFjZVwiLCBcInBhdGhcIjogXCJzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9Gb3Jnb3RQYXNzd29yZC5qYXZhXCIsIFwic3RyX3JlcGxhY2VfZW50cmllc1wiOiBbe1wib2xkX3N0clwiOiBcIiAgICBwcml2YXRlIHZvaWQgYnRuQ2hhbmdlQWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkNoYW5nZUFjdGlvblBlcmZvcm1lZFxcbiAgICAgICAgLy8gVE9ETyBhZGQgeW91ciBoYW5kbGluZyBjb2RlIGhlcmU6XFxuICAgICAgICBpZih2YWxpZGF0ZUZpZWxkcygpICYmIGN1cnJlbnRTdWJzY3JpYmVyID09IG51bGwpe1xcbiAgICAgICAgICAgIFN0cmluZyBuZXdQYXNzd29yZCA9IHR4dFBhc3N3b3JkLmdldFRleHQoKTtcXG4gICAgICAgICAgICBcXG4gICAgICAgICAgICBib29sZWFuIGlzU3VjY2VzcyA9IFN1YnNjcmliZXJEQU8udXBkYXRlUGFzc3dvcmQoY3VycmVudFN1YnNjcmliZXIuZ2V0VXNlcl9pZCgpLCBuZXdQYXNzd29yZCk7XFxuICAgICAgICAgICAgXFxuICAgICAgICAgICAgaWYoaXNTdWNjZXNzKSB7XFxuICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFxcXCJcXHUwMTEwXFx1MWVkNWkgbVxcdTFlYWR0IGtoXFx1MWVhOXUgdGhcXHUwMGUwbmggY1xcdTAwZjRuZyEgVnVpIGxcXHUwMGYybmcgXFx1MDExMVxcdTAxMDNuZyBuaFxcdTFlYWRwIGxcXHUxZWExaSFcXFwiLCBcXFwiVGhcXHUwMGY0bmcgYlxcdTAwZTFvXFxcIiwgSk9wdGlvblBhbmUuSU5GT1JNQVRJT05fTUVTU0FHRSk7XFxuICAgICAgICAgICAgICAgIG5ldyBMb2dpbigpLnNldFZpc2libGUodHJ1ZSk7XFxuICAgICAgICAgICAgICAgIHRoaXMuZGlzcG9zZSgpO1xcbiAgICAgICAgICAgIH0gZWxzZSB7XFxuICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFxcXCJcXHUwMTEwXFx1MWVkNWkgbVxcdTFlYWR0IGtoXFx1MWVhOXUgdGhcXHUxZWE1dCBiXFx1MWVhMWl8IFZ1aSBsXFx1MDBmMm5nIHRoXFx1MWVlZCBsXFx1MWVhMWkgc2F1IVxcXCIsIFxcXCJUaFxcdTAwZjRuZyBiXFx1MDBlMW9cXFwiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcXG4gICAgICAgICAgICB9XFxuICAgICAgICB9XFxuICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0bkNoYW5nZUFjdGlvblBlcmZvcm1lZFwiLCBcIm5ld19zdHJcIjogXCIgICAgcHJpdmF0ZSB2b2lkIGJ0bkNoYW5nZUFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5DaGFuZ2VBY3Rpb25QZXJmb3JtZWRcXG4gICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxcbiAgICAgICAgaWYodmFsaWRhdGVGaWVsZHMoKSAmJiBjdXJyZW50U3Vic2NyaWJlciAhPSBudWxsKXtcXG4gICAgICAgICAgICBTdHJpbmcgbmV3UGFzc3dvcmQgPSB0eHRQYXNzd29yZC5nZXRUZXh0KCk7XFxuICAgICAgICAgICAgXFxuICAgICAgICAgICAgYm9vbGVhbiBpc1N1Y2Nlc3MgPSBTdWJzY3JpYmVyREFPLnVwZGF0ZVBhc3N3b3JkKGN1cnJlbnRTdWJzY3JpYmVyLmdldFVzZXJfaWQoKSwgbmV3UGFzc3dvcmQpO1xcbiAgICAgICAgICAgIFxcbiAgICAgICAgICAgIGlmKGlzU3VjY2Vzcykge1xcbiAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcXFwiXFx1MDExMFxcdTFlZDVpIG1cXHUxZWFkdCBraFxcdTFlYTl1IHRoXFx1MDBlMG5oIGNcXHUwMGY0bmchIFZ1aSBsXFx1MDBmMm5nIFxcdTAxMTFcXHUwMTAzbmcgbmhcXHUxZWFkcCBsXFx1MWVhMWkhXFxcIiwgXFxcIlRoXFx1MDBmNG5nIGJcXHUwMGUxb1xcXCIsIEpPcHRpb25QYW5lLklORk9STUFUSU9OX01FU1NBR0UpO1xcbiAgICAgICAgICAgICAgICBuZXcgTG9naW4oKS5zZXRWaXNpYmxlKHRydWUpO1xcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3Bvc2UoKTtcXG4gICAgICAgICAgICB9IGVsc2Uge1xcbiAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcXFwiXFx1MDExMFxcdTFlZDVpIG1cXHUxZWFkdCBraFxcdTFlYTl1IHRoXFx1MWVhNXQgYlxcdTFlYTFpISBWdWkgbFxcdTAwZjJuZyB0aFxcdTFlZWQgbFxcdTFlYTFpIHNhdSFcXFwiLCBcXFwiVGhcXHUwMGY0bmcgYlxcdTAwZTFvXFxcIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgfVxcbiAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5DaGFuZ2VBY3Rpb25QZXJmb3JtZWRcIiwgXCJvbGRfc3RyX3N0YXJ0X2xpbmVfbnVtYmVyXCI6IDI1MCwgXCJvbGRfc3RyX2VuZF9saW5lX251bWJlclwiOiAyNjV9XX0iLCJtY3Bfc2VydmVyX25hbWUiOiIiLCJtY3BfdG9vbF9uYW1lIjoiIn19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiJJJ3ZlIGZvdW5kIHRoZSBpc3N1ZSBpbiB0aGUgYEZvcmdvdFBhc3N3b3JkLmphdmFgIGZpbGUuIExldCBtZSBleHBsYWluIHRoZSBwcm9ibGVtIGFuZCBwcm92aWRlIGEgc29sdXRpb246XG5cbiMjIFRoZSBJc3N1ZVxuXG5JbiB0aGUgYGJ0bkNoYW5nZUFjdGlvblBlcmZvcm1lZGAgbWV0aG9kIChsaW5lcyAyNTAtMjY1KSwgdGhlcmUncyBhIGxvZ2ljYWwgZXJyb3IgaW4gdGhlIGNvbmRpdGlvbjpcblxuPGF1Z21lbnRfY29kZV9zbmlwcGV0IHBhdGg9XCJzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9Gb3Jnb3RQYXNzd29yZC5qYXZhXCIgbW9kZT1cIkVYQ0VSUFRcIj5cbmBgYGphdmFcbnByaXZhdGUgdm9pZCBidG5DaGFuZ2VBY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuQ2hhbmdlQWN0aW9uUGVyZm9ybWVkXG4gICAgLy8gVE9ETyBhZGQgeW91ciBoYW5kbGluZyBjb2RlIGhlcmU6XG4gICAgaWYodmFsaWRhdGVGaWVsZHMoKSAmJiBjdXJyZW50U3Vic2NyaWJlciA9PSBudWxsKXtcbiAgICAgICAgU3RyaW5nIG5ld1Bhc3N3b3JkID0gdHh0UGFzc3dvcmQuZ2V0VGV4dCgpO1xuICAgICAgICBcbiAgICAgICAgYm9vbGVhbiBpc1N1Y2Nlc3MgPSBTdWJzY3JpYmVyREFPLnVwZGF0ZVBhc3N3b3JkKGN1cnJlbnRTdWJzY3JpYmVyLmdldFVzZXJfaWQoKSwgbmV3UGFzc3dvcmQpO1xuICAgICAgICBcbiAgICAgICAgaWYoaXNTdWNjZXNzKSB7XG4gICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcIsSQ4buVaSBt4bqtdCBraOG6qXUgdGjDoG5oIGPDtG5nISBWdWkgbMOybmcgxJHEg25nIG5o4bqtcCBs4bqhaSFcIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5JTkZPUk1BVElPTl9NRVNTQUdFKTtcbiAgICAgICAgICAgIG5ldyBMb2dpbigpLnNldFZpc2libGUodHJ1ZSk7XG4gICAgICAgICAgICB0aGlzLmRpc3Bvc2UoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwixJDhu5VpIG3huq10IGto4bqpdSB0aOG6pXQgYuG6oWl8IFZ1aSBsw7JuZyB0aOG7rSBs4bqhaSBzYXUhXCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAgICAgIH1cbiAgICB9XG59Ly9HRU4tTEFTVDpldmVudF9idG5DaGFuZ2VBY3Rpb25QZXJmb3JtZWRcbmBgYFxuPC9hdWdtZW50X2NvZGVfc25pcHBldD5cblxuVGhlIGNvbmRpdGlvbiBgaWYodmFsaWRhdGVGaWVsZHMoKSAmJiBjdXJyZW50U3Vic2NyaWJlciA9PSBudWxsKWAgaXMgaW5jb3JyZWN0LiBJdCdzIGNoZWNraW5nIGlmIGBjdXJyZW50U3Vic2NyaWJlcmAgaXMgbnVsbCwgYnV0IGl0IHNob3VsZCBiZSBjaGVja2luZyBpZiBgY3VycmVudFN1YnNjcmliZXJgIGlzIE5PVCBudWxsLiBUaGlzIGlzIHdoeSBub3RoaW5nIGhhcHBlbnMgd2hlbiB5b3UgY2xpY2sgdGhlIGNoYW5nZSBwYXNzd29yZCBidXR0b24gLSB0aGUgY29uZGl0aW9uIGlzIG5ldmVyIHRydWUuXG5cbkFkZGl0aW9uYWxseSwgaWYgYGN1cnJlbnRTdWJzY3JpYmVyYCBpcyBudWxsLCB0aGUgY29kZSB3b3VsZCB0aHJvdyBhIE51bGxQb2ludGVyRXhjZXB0aW9uIHdoZW4gdHJ5aW5nIHRvIGNhbGwgYGN1cnJlbnRTdWJzY3JpYmVyLmdldFVzZXJfaWQoKWAuXG5cbiMjIFRoZSBTb2x1dGlvblxuXG5MZXQncyBmaXggdGhlIGNvbmRpdGlvbiBpbiB0aGUgYGJ0bkNoYW5nZUFjdGlvblBlcmZvcm1lZGAgbWV0aG9kOlxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IkkndmUgZm91bmQgdGhlIGlzc3VlIGluIHRoZSBgRm9yZ290UGFzc3dvcmQuamF2YWAgZmlsZS4gTGV0IG1lIGV4cGxhaW4gdGhlIHByb2JsZW0gYW5kIHByb3ZpZGUgYSBzb2x1dGlvbjpcblxuIyMgVGhlIElzc3VlXG5cbkluIHRoZSBgYnRuQ2hhbmdlQWN0aW9uUGVyZm9ybWVkYCBtZXRob2QgKGxpbmVzIDI1MC0yNjUpLCB0aGVyZSdzIGEgbG9naWNhbCBlcnJvciBpbiB0aGUgY29uZGl0aW9uOlxuXG5gYGBgamF2YSBwYXRoPXNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL0ZvcmdvdFBhc3N3b3JkLmphdmEgbW9kZT1FWENFUlBUXG5wcml2YXRlIHZvaWQgYnRuQ2hhbmdlQWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkNoYW5nZUFjdGlvblBlcmZvcm1lZFxuICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxuICAgIGlmKHZhbGlkYXRlRmllbGRzKCkgJiYgY3VycmVudFN1YnNjcmliZXIgPT0gbnVsbCl7XG4gICAgICAgIFN0cmluZyBuZXdQYXNzd29yZCA9IHR4dFBhc3N3b3JkLmdldFRleHQoKTtcbiAgICAgICAgXG4gICAgICAgIGJvb2xlYW4gaXNTdWNjZXNzID0gU3Vic2NyaWJlckRBTy51cGRhdGVQYXNzd29yZChjdXJyZW50U3Vic2NyaWJlci5nZXRVc2VyX2lkKCksIG5ld1Bhc3N3b3JkKTtcbiAgICAgICAgXG4gICAgICAgIGlmKGlzU3VjY2Vzcykge1xuICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXCLEkOG7lWkgbeG6rXQga2jhuql1IHRow6BuaCBjw7RuZyEgVnVpIGzDsm5nIMSRxINuZyBuaOG6rXAgbOG6oWkhXCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuSU5GT1JNQVRJT05fTUVTU0FHRSk7XG4gICAgICAgICAgICBuZXcgTG9naW4oKS5zZXRWaXNpYmxlKHRydWUpO1xuICAgICAgICAgICAgdGhpcy5kaXNwb3NlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcIsSQ4buVaSBt4bqtdCBraOG6qXUgdGjhuqV0IGLhuqFpfCBWdWkgbMOybmcgdGjhu60gbOG6oWkgc2F1IVwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgICAgICB9XG4gICAgfVxufS8vR0VOLUxBU1Q6ZXZlbnRfYnRuQ2hhbmdlQWN0aW9uUGVyZm9ybWVkXG5gYGBgXG5cblRoZSBjb25kaXRpb24gYGlmKHZhbGlkYXRlRmllbGRzKCkgJiYgY3VycmVudFN1YnNjcmliZXIgPT0gbnVsbClgIGlzIGluY29ycmVjdC4gSXQncyBjaGVja2luZyBpZiBgY3VycmVudFN1YnNjcmliZXJgIGlzIG51bGwsIGJ1dCBpdCBzaG91bGQgYmUgY2hlY2tpbmcgaWYgYGN1cnJlbnRTdWJzY3JpYmVyYCBpcyBOT1QgbnVsbC4gVGhpcyBpcyB3aHkgbm90aGluZyBoYXBwZW5zIHdoZW4geW91IGNsaWNrIHRoZSBjaGFuZ2UgcGFzc3dvcmQgYnV0dG9uIC0gdGhlIGNvbmRpdGlvbiBpcyBuZXZlciB0cnVlLlxuXG5BZGRpdGlvbmFsbHksIGlmIGBjdXJyZW50U3Vic2NyaWJlcmAgaXMgbnVsbCwgdGhlIGNvZGUgd291bGQgdGhyb3cgYSBOdWxsUG9pbnRlckV4Y2VwdGlvbiB3aGVuIHRyeWluZyB0byBjYWxsIGBjdXJyZW50U3Vic2NyaWJlci5nZXRVc2VyX2lkKClgLlxuXG4jIyBUaGUgU29sdXRpb25cblxuTGV0J3MgZml4IHRoZSBjb25kaXRpb24gaW4gdGhlIGBidG5DaGFuZ2VBY3Rpb25QZXJmb3JtZWRgIG1ldGhvZDpcbiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiVGhlIGZvbGxvd2luZyBjb2RlIHNlY3Rpb25zIHdlcmUgcmV0cmlldmVkOlxuUGF0aDogc3JjL0RBTy9TdWJzY3JpYmVyREFPLmphdmFcbi8qXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0xpY2Vuc2VzL2xpY2Vuc2UtZGVmYXVsdC50eHQgdG8gY2hhbmdlIHRoaXMgbGljZW5zZVxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NsYXNzLmphdmEgdG8gZWRpdCB0aGlzIHRlbXBsYXRlXG4gKi9cbnBhY2thZ2UgREFPO1xuXG5pbXBvcnQgTW9kZWwuU3Vic2NyaWJlcjtcbmltcG9ydCBqYXZhLnV0aWwuTGlzdDtcbmltcG9ydCBqYXZhLnNxbC5QcmVwYXJlZFN0YXRlbWVudDtcbmltcG9ydCBqYXZhLnNxbC5SZXN1bHRTZXQ7XG5pbXBvcnQgamF2YS5zcWwuVGltZXN0YW1wO1xuaW1wb3J0IERBTy5EYk9wZXJhdGlvbnMuU3FsT3BlcmF0aW9uO1xuXG4vKipcbiAqXG4gKiBAYXV0aG9yIE5nb2MgVGhhb1xuICovXG5wdWJsaWMgY2xhc3MgU3Vic2NyaWJlckRBT3tcblxuICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBpbnNlcnQoZmluYWwgU3Vic2NyaWJlciBvYmopIHtcbiAgICAgICAgZmluYWwgaW50IHVzZXJJZCA9IERiT3BlcmF0aW9ucy5nZXROZXh0SWQoXCJVU0VSXCIsIFwidXNlcl9pZFwiKTtcbiAgICAgICAgZmluYWwgaW50IHN1YnNjcmliZXJJZCA9IERiT3BlcmF0aW9ucy5nZXROZXh0SWQoXCJTVUJTQ1JJQkVSXCIsIFwic3Vic2NyaWJlcl9pZFwiKTtcblxuICAgICAgICBvYmouc2V0VXNlcl9pZCh1c2VySWQpO1xuICAgICAgICBvYmouc2V0U3Vic2NyaWJlcl9pZChzdWJzY3JpYmVySWQpO1xuXG4gICAgICAgIFNxbE9wZXJhdGlvbltdIG9wZXJhdGlvbnMgPSBuZXcgU3FsT3BlcmF0aW9uW10ge1xuICAgICAgICAgICAgbmV3IFNxbE9wZXJhdGlvbigpIHtcbiAgICAgICAgICAgICAgICBAT3ZlcnJpZGVcbiAgICAgICAgICAgICAgICBwdWJsaWMgU3RyaW5nIGdldFNxbCgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiSU5TRVJUIElOVE8gVVNFUih1c2VyX2lkLCB1c2VybmFtZSwgcGFzc3dvcmQsIHJvbGUsIGNyZWF0ZWRfYXQsIGlzQWN0aXZlKSBWQUxVRVMgKD8sID8sID8sID8sID8sID8pXCI7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgQE92ZXJyaWRlXG4gICAgICAgICAgICAgICAgcHVibGljIHZvaWQgc2V0UGFyYW1ldGVycyhQcmVwYXJlZFN0YXRlbWVudCBwcykgdGhyb3dzIEV4Y2VwdGlvbiB7XG4gICAgICAgICAgICAgICAgICAgIHBzLnNldEludCgxLCB1c2VySWQpO1xuICAgICAgICAgICAgICAgICAgICBwcy5zZXRTdHJpbmcoMiwgb2JqLmdldFVzZXJuYW1lKCkpO1xuICAgICAgICAgICAgICAgICAgICBwcy5zZXRTdHJpbmcoMywgb2JqLmdldFBhc3N3b3JkKCkpO1xuICAgICAgICAgICAgICAgICAgICBwcy5zZXRTdHJpbmcoNCwgb2JqLmdldFJvbGUoKSk7XG4gICAgICAgICAgICAgICAgICAgIHBzLnNldFRpbWVzdGFtcCg1LCBUaW1lc3RhbXAudmFsdWVPZihvYmouZ2V0Q3JlYXRlX2F0KCkpKTtcbiAgICAgICAgICAgICAgICAgICAgcHMuc2V0Qm9vbGVhbig2LCB0cnVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBuZXcgU3FsT3BlcmF0aW9uKCkge1xuICAgICAgICAgICAgICAgIEBPdmVycmlkZVxuICAgICAgICAgICAgICAgIHB1YmxpYyBTdHJpbmcgZ2V0U3FsKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJJTlNFUlQgSU5UTyBTVUJTQ1JJQkVSIChzdWJzY3JpYmVyX2lkLCBuYW1lLCBhZGRyZXNzLCBwaG9uZSwgdXNlcl9pZCkgVkFMVUVTICg/LCA/LCA/LCA/LCA/KVwiO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIEBPdmVycmlkZVxuICAgICAgICAgICAgICAgIHB1YmxpYyB2b2lkIHNldFBhcmFtZXRlcnMoUHJlcGFyZWRTdGF0ZW1lbnQgcHMpIHRocm93cyBFeGNlcHRpb24ge1xuICAgICAgICAgICAgICAgICAgICBwcy5zZXRJbnQoMSwgc3Vic2NyaWJlcklkKTtcbiAgICAgICAgICAgICAgICAgICAgcHMuc2V0U3RyaW5nKDIsIG9iai5nZXRGdWxsTmFtZSgpKTtcbiAgICAgICAgICAgICAgICAgICAgcHMuc2V0U3RyaW5nKDMsIG9iai5nZXRBZGRyZXNzKCkpO1xuICAgICAgICAgICAgICAgICAgICBwcy5zZXRTdHJpbmcoNCwgb2JqLmdldFBob25lKCkpO1xuICAgICAgICAgICAgICAgICAgICBwcy5zZXRJbnQoNSwgdXNlcklkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgRGJPcGVyYXRpb25zLmV4ZWN1dGVUcmFuc2FjdGlvbihvcGVyYXRpb25zLCBcIsSQxINuZyBrw70gdGjDoG5oIGPDtG5nIVwiKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIHZvaWQgdXBkYXRlKFN1YnNjcmliZXIgb2JqKSB7XG4gICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbihcIk5vdCBzdXBwb3J0ZWQgeWV0LlwiKTsgLy8gR2VuZXJhdGVkIGZyb20gbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NvZGUvR2VuZXJhdGVkTWV0aG9kQm9keVxuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBkZWxldGUoaW50IGlkKSB7XG4gICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbihcIk5vdCBzdXBwb3J0ZWQgeWV0LlwiKTsgLy8gR2VuZXJhdGVkIGZyb20gbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NvZGUvR2VuZXJhdGVkTWV0aG9kQm9keVxuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgU3Vic2NyaWJlciBnZXRCeUlkKGludCBpZCkge1xuICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oXCJOb3Qgc3VwcG9ydGVkIHlldC5cIik7IC8vIEdlbmVyYXRlZCBmcm9tIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9Db2RlL0dlbmVyYXRlZE1ldGhvZEJvZHlcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIExpc3Q8U3Vic2NyaWJlcj4gZ2V0QWxsKCkge1xuICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oXCJOb3Qgc3VwcG9ydGVkIHlldC5cIik7IC8vIEdlbmVyYXRlZCBmcm9tIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9Db2RlL0dlbmVyYXRlZE1ldGhvZEJvZHlcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIFN1YnNjcmliZXIgZ2V0QnlQaG9uZShTdHJpbmcgcGhvbmUpIHtcbiAgICAgICAgU3Vic2NyaWJlciBzdWJzY3JpYmVyID0gbnVsbDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIFJlc3VsdFNldCBycyA9IERiT3BlcmF0aW9ucy5nZXREYXRhKFwiU0VMRUNUIHMuKiwgdS4qIEZST00gU1VCU0NSSUJFUiBzIEpPSU4gVVNFUiB1IE9OIHMudXNlcl9pZCA9IHUudXNlcl9pZCBXSEVSRSBzLnBob25lID0gJ1wiICsgcGhvbmUgKyBcIidcIik7XG4gICAgICAgICAgICBpZiAocnMubmV4dCgpKSB7XG4gICAgICAgICAgICAgICAgc3Vic2NyaWJlciA9IG5ldyBTdWJzY3JpYmVyKCk7XG4gICAgICAgICAgICAgICAgc3Vic2NyaWJlci5zZXRTdWJzY3JpYmVyX2lkKHJzLmdldEludChcInN1YnNjcmliZXJfaWRcIikpO1xuICAgICAgICAgICAgICAgIHN1YnNjcmliZXIuc2V0RnVsbE5hbWUocnMuZ2V0U3RyaW5nKFwibmFtZVwiKSk7XG4gICAgICAgICAgICAgICAgc3Vic2NyaWJlci5zZXRBZGRyZXNzKHJzLmdldFN0cmluZyhcImFkZHJlc3NcIikpO1xuICAgICAgICAgICAgICAgIHN1YnNjcmliZXIuc2V0UGhvbmUocnMuZ2V0U3RyaW5nKFwicGhvbmVcIikpO1xuICAgICAgICAgICAgICAgIHN1YnNjcmliZXIuc2V0VXNlcl9pZChycy5nZXRJbnQoXCJ1c2VyX2lkXCIpKTtcbiAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLnNldFVzZXJuYW1lKHJzLmdldFN0cmluZyhcInVzZXJuYW1lXCIpKTtcbiAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLnNldFBhc3N3b3JkKHJzLmdldFN0cmluZyhcInBhc3N3b3JkXCIpKTtcbiAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLnNldFJvbGUocnMuZ2V0U3RyaW5nKFwicm9sZVwiKSk7XG4gICAgICAgICAgICAgICAgc3Vic2NyaWJlci5zZXRJc0FjdGl2ZShycy5nZXRCb29sZWFuKFwiaXNBY3RpdmVcIikpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZXgpIHtcbiAgICAgICAgICAgIGV4LnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdWJzY3JpYmVyO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgYm9vbGVhbiB1cGRhdGVQYXNzd29yZChpbnQgdXNlcklkLCBTdHJpbmcgbmV3UGFzc3dvcmQpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIFN0cmluZyBxdWVyeSA9IFwiVVBEQVRFIFVTRVIgU0VUIHBhc3N3b3JkID0gJ1wiICsgbmV3UGFzc3dvcmQgKyBcIicgV0hFUkUgdXNlcl9pZCA9IFwiICsgdXNlcklkO1xuICAgICAgICAgICAgRGJPcGVyYXRpb25zLnNldERhdGFPckRlbGV0ZShxdWVyeSwgXCJD4bqtcCBuaOG6rXQgbeG6rXQga2jhuql1IHRow6BuaCBjw7RuZyFcIik7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGV4KSB7XG4gICAgICAgICAgICBleC5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi4uLlxuUGF0aDogc3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vRm9yZ290UGFzc3dvcmQuamF2YVxuLypcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvTGljZW5zZXMvbGljZW5zZS1kZWZhdWx0LnR4dCB0byBjaGFuZ2UgdGhpcyBsaWNlbnNlXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0dVSUZvcm1zL0pGcmFtZS5qYXZhIHRvIGVkaXQgdGhpcyB0ZW1wbGF0ZVxuICovXG5wYWNrYWdlIGludGVybmV0Lm1hbmdlbWVudC5zeXN0ZW07XG5cbmltcG9ydCBEQU8uU3Vic2NyaWJlckRBTztcbmltcG9ydCBNb2RlbC5TdWJzY3JpYmVyO1xuaW1wb3J0IGphdmF4LnN3aW5nLkpPcHRpb25QYW5lO1xuaW1wb3J0IGludGVybmV0Lm1hbmdlbWVudC5zeXN0ZW0uTG9naW47XG4uLi5cblxuICAgIHB1YmxpYyBib29sZWFuIHZhbGlkYXRlUGhvbmUoKXtcbiAgICAgICAgU3RyaW5nIHBob25lID0gdHh0UGhvbmUuZ2V0VGV4dCgpO1xuICAgICAgICBpZihwaG9uZS5sZW5ndGgoKSAhPSAxMCB8fCAhcGhvbmUubWF0Y2hlcyhwaG9uZVBhdHRlcm4pKSB7XG4gICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcIlZ1aSBsw7JuZyBuaOG6rXAgxJHDum5nIMSR4buLbmggZOG6oW5nIHPhu5EgxJFp4buHbiB0aG/huqFpIVwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbi4uLlxuXG4gICAgcHJpdmF0ZSB2b2lkIGJ0bkV4aXRBY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuRXhpdEFjdGlvblBlcmZvcm1lZFxuICAgICAgICAvLyBUT0RPIGFkZCB5b3VyIGhhbmRsaW5nIGNvZGUgaGVyZTpcbiAgICAgICAgaW50IHJlc3VsdCA9IEpPcHRpb25QYW5lLnNob3dDb25maXJtRGlhbG9nKG51bGwsIFwiQuG6oW4gY8OzIGNo4bqvYyBjaOG6r24gbXXhu5FuIHRob8OhdCBraMO0bmc/XCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuWUVTX05PX09QVElPTiwgSk9wdGlvblBhbmUuUVVFU1RJT05fTUVTU0FHRSk7XG5cbiAgICAgICAgaWYgKHJlc3VsdCA9PSBKT3B0aW9uUGFuZS5ZRVNfT1BUSU9OKSB7XG4gICAgICAgICAgICBuZXcgTG9naW4oKS5zZXRWaXNpYmxlKHRydWUpO1xuICAgICAgICAgICAgdGhpcy5kaXNwb3NlKCk7XG4gICAgICAgIH1cbiAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5FeGl0QWN0aW9uUGVyZm9ybWVkXG5cbiAgICBwcml2YXRlIHZvaWQgYnRuQ2hlY2tBY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuQ2hlY2tBY3Rpb25QZXJmb3JtZWRcbiAgICAgICAgLy8gVE9ETyBhZGQgeW91ciBoYW5kbGluZyBjb2RlIGhlcmU6XG4gICAgICAgIGlmKHZhbGlkYXRlUGhvbmUoKSkge1xuICAgICAgICAgICAgU3RyaW5nIHBob25lID0gdHh0UGhvbmUuZ2V0VGV4dCgpO1xuICAgICAgICAgICAgY3VycmVudFN1YnNjcmliZXIgPSBTdWJzY3JpYmVyREFPLmdldEJ5UGhvbmUocGhvbmUpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoY3VycmVudFN1YnNjcmliZXIgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwiVMOsbSB0aOG6pXkgdMOgaSBraG/huqNuIHbhu5tpIHPhu5EgxJFp4buHbiB0aG/huqFpIG7DoHkhXCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuSU5GT1JNQVRJT05fTUVTU0FHRSk7XG5cbiAgICAgICAgICAgICAgICBidG5FeGl0LnNldFZpc2libGUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgYnRuQ2hhbmdlLnNldFZpc2libGUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgbGJOZXdQYXNzd29yZC5zZXRWaXNpYmxlKHRydWUpO1xuICAgICAgICAgICAgICAgIGxiQ29uZmlybVBhc3N3b3JkLnNldFZpc2libGUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgdHh0UGFzc3dvcmQuc2V0VmlzaWJsZSh0cnVlKTtcbiAgICAgICAgICAgICAgICB0eHRDb25maXJtUGFzc3dvcmQuc2V0VmlzaWJsZSh0cnVlKTtcblxuICAgICAgICAgICAgICAgIHR4dFBob25lLnNldEVkaXRhYmxlKGZhbHNlKTtcbiAgICAgICAgICAgICAgICBidG5DaGVjay5zZXRFbmFibGVkKGZhbHNlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXCJLaMO0bmcgdMOsbSB0aOG6pXkgdMOgaSBraG/huqNuIHbhu5tpIHPhu5EgxJFp4buHbiB0aG/huqFpIG7DoHkhXCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5DaGVja0FjdGlvblBlcmZvcm1lZFxuXG4gICAgcHJpdmF0ZSB2b2lkIGJ0bkNoYW5nZUFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5DaGFuZ2VBY3Rpb25QZXJmb3JtZWRcbiAgICAgICAgLy8gVE9ETyBhZGQgeW91ciBoYW5kbGluZyBjb2RlIGhlcmU6XG4gICAgICAgIGlmKHZhbGlkYXRlRmllbGRzKCkgJiYgY3VycmVudFN1YnNjcmliZXIgPT0gbnVsbCl7XG4gICAgICAgICAgICBTdHJpbmcgbmV3UGFzc3dvcmQgPSB0eHRQYXNzd29yZC5nZXRUZXh0KCk7XG4gICAgICAgICAgICBib29sZWFuIGlzU3VjY2VzcyA9IFN1YnNjcmliZXJEQU8udXBkYXRlUGFzc3dvcmQoY3VycmVudFN1YnNjcmliZXIuZ2V0VXNlcl9pZCgpLCBuZXdQYXNzd29yZCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmKGlzU3VjY2Vzcykge1xuICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwixJDhu5VpIG3huq10IGto4bqpdSB0aMOgbmggY8O0bmchIFZ1aSBsw7JuZyDEkcSDbmcgbmjhuq1wIGzhuqFpIVwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLklORk9STUFUSU9OX01FU1NBR0UpO1xuICAgICAgICAgICAgICAgIG5ldyBMb2dpbigpLnNldFZpc2libGUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwb3NlKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwixJDhu5VpIG3huq10IGto4bqpdSB0aOG6pXQgYuG6oWl8IFZ1aSBsw7JuZyB0aOG7rSBs4bqhaSBzYXUhXCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5DaGFuZ2VBY3Rpb25QZXJmb3JtZWRcbi4uLlxuUGF0aDogc3JjL0RBTy9Vc2VyREFPLmphdmFcbi8qXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0xpY2Vuc2VzL2xpY2Vuc2UtZGVmYXVsdC50eHQgdG8gY2hhbmdlIHRoaXMgbGljZW5zZVxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NsYXNzLmphdmEgdG8gZWRpdCB0aGlzIHRlbXBsYXRlXG4gKi9cbnBhY2thZ2UgREFPO1xuXG5pbXBvcnQgTW9kZWwuVXNlcjtcbmltcG9ydCBqYXZhLnV0aWwuTGlzdDtcbmltcG9ydCBqYXZhLnNxbC5QcmVwYXJlZFN0YXRlbWVudDtcbmltcG9ydCBqYXZhLnNxbC5UaW1lc3RhbXA7XG5pbXBvcnQgREFPLkRiT3BlcmF0aW9ucy5TcWxPcGVyYXRpb247XG5pbXBvcnQgamF2YS5zcWwuUmVzdWx0U2V0O1xuLyoqXG4gKlxuICogQGF1dGhvciBOZ29jIFRoYW9cbiAqL1xucHVibGljIGNsYXNzIFVzZXJEQU97XG5cbiAgICBwdWJsaWMgc3RhdGljIHZvaWQgaW5zZXJ0KGZpbmFsIFVzZXIgb2JqKSB7XG4gICAgICAgIGZpbmFsIGludCB1c2VySWQgPSBEYk9wZXJhdGlvbnMuZ2V0TmV4dElkKFwiVVNFUlwiLCBcInVzZXJfaWRcIik7XG4gICAgICAgIFxuICAgICAgICBvYmouc2V0VXNlcl9pZCh1c2VySWQpO1xuICAgICAgICBcbiAgICAgICAgU3FsT3BlcmF0aW9uW10gb3BlcmF0aW9ucyA9IG5ldyBTcWxPcGVyYXRpb25bXSB7XG4gICAgICAgICAgICBuZXcgU3FsT3BlcmF0aW9uKCkge1xuICAgICAgICAgICAgICAgIEBPdmVycmlkZVxuICAgICAgICAgICAgICAgIHB1YmxpYyBTdHJpbmcgZ2V0U3FsKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJJTlNFUlQgSU5UTyBVU0VSKHVzZXJfaWQsIHVzZXJuYW1lLCBwYXNzd29yZCwgcm9sZSwgY3JlYXRlZF9hdCkgVkFMVUVTICg/LCA/LCA/LCA/LCA/KVwiO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIEBPdmVycmlkZVxuICAgICAgICAgICAgICAgIHB1YmxpYyB2b2lkIHNldFBhcmFtZXRlcnMoUHJlcGFyZWRTdGF0ZW1lbnQgcHMpIHRocm93cyBFeGNlcHRpb24ge1xuICAgICAgICAgICAgICAgICAgICBwcy5zZXRJbnQoMSwgdXNlcklkKTtcbiAgICAgICAgICAgICAgICAgICAgcHMuc2V0U3RyaW5nKDIsIG9iai5nZXRVc2VybmFtZSgpKTtcbiAgICAgICAgICAgICAgICAgICAgcHMuc2V0U3RyaW5nKDMsIG9iai5nZXRQYXNzd29yZCgpKTtcbiAgICAgICAgICAgICAgICAgICAgcHMuc2V0U3RyaW5nKDQsIG9iai5nZXRSb2xlKCkpO1xuICAgICAgICAgICAgICAgICAgICBwcy5zZXRUaW1lc3RhbXAoNSwgVGltZXN0YW1wLnZhbHVlT2Yob2JqLmdldENyZWF0ZV9hdCgpKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgRGJPcGVyYXRpb25zLmV4ZWN1dGVUcmFuc2FjdGlvbihvcGVyYXRpb25zLCBcIlRow6ptIHTDoGkga2hv4bqjbiB0aMOgbmggY8O0bmchXCIpO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgc3RhdGljIGJvb2xlYW4gbG9naW4oZmluYWwgU3RyaW5nIHVzZXJOYW1lLCBmaW5hbCBTdHJpbmcgcGFzc3dvcmQpIHtcbiAgICAgICAgVXNlciB1c2VyID0gbnVsbDtcbiAgICAgICAgYm9vbGVhbiBpc1ZhbGlkID0gZmFsc2U7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBSZXN1bHRTZXQgcnMgPSBEYk9wZXJhdGlvbnMuZ2V0RGF0YShcIlNFTEVDVCAqIEZST00gVVNFUiBXSEVSRSB1c2VybmFtZSA9ICdcIiArIHVzZXJOYW1lICsgXCInIGFuZCBwYXNzd29yZCA9ICdcIiArIHBhc3N3b3JkICtcIidcIik7XG4gICAgICAgICAgICB3aGlsZSAocnMubmV4dCgpKSB7XG4gICAgICAgICAgICAgICAgYm9vbGVhbiBpc0FjdGl2ZSA9IHJzLmdldEJvb2xlYW4oXCJpc0FjdGl2ZVwiKTtcbiAgICAgICAgICAgICAgICBpZiAoaXNBY3RpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgaXNWYWxpZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBleCkge1xuICAgICAgICAgICAgZXgucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgIH0gXG5cbiAgICAgICAgcmV0dXJuIGlzVmFsaWQ7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyB2b2lkIHVwZGF0ZShVc2VyIG9iaikge1xuICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oXCJOb3Qgc3VwcG9ydGVkIHlldC5cIik7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyB2b2lkIGRlbGV0ZShpbnQgaWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgVXNlciBnZXRCeUlkKGludCBpZCkge1xuICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oXCJOb3Qgc3VwcG9ydGVkIHlldC5cIik7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBMaXN0PFVzZXI+IGdldEFsbCgpIHtcbiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpO1xuICAgIH1cbiAgICBcbn1cbi4uLlxuUGF0aDogc3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vU2lnblVwLmphdmFcbi8qXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0xpY2Vuc2VzL2xpY2Vuc2UtZGVmYXVsdC50eHQgdG8gY2hhbmdlIHRoaXMgbGljZW5zZVxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9HVUlGb3Jtcy9KRnJhbWUuamF2YSB0byBlZGl0IHRoaXMgdGVtcGxhdGVcbiAqL1xucGFja2FnZSBpbnRlcm5ldC5tYW5nZW1lbnQuc3lzdGVtO1xuXG5pbXBvcnQgREFPLlN1YnNjcmliZXJEQU87XG5pbXBvcnQgTW9kZWwuU3Vic2NyaWJlcjtcbmltcG9ydCBqYXZhLnRpbWUuTG9jYWxEYXRlVGltZTtcbmltcG9ydCBqYXZheC5zd2luZy5KT3B0aW9uUGFuZTtcblxuLyoqXG4gKlxuICogQGF1dGhvciBOZ29jIFRoYW9cbiAqL1xucHVibGljIGNsYXNzIFNpZ25VcCBleHRlbmRzIGphdmF4LnN3aW5nLkpGcmFtZSB7XG5cbiAgICBwdWJsaWMgU3RyaW5nIHBob25lUGF0dGVybiA9IFwiXlswLTldKiRcIjtcbiAgICBwcml2YXRlIFN0cmluZyBERUZBVUxUX1JPTEUgPSBcInVzZXJcIjtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIG5ldyBmb3JtIFNpZ25JblxuICAgICAqL1xuICAgIHB1YmxpYyBTaWduVXAoKSB7XG4gICAgICAgIGluaXRDb21wb25lbnRzKCk7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgY2xlYXIoKXtcbiAgICAgICAgdHh0TmFtZS5zZXRUZXh0KFwiXCIpO1xuICAgICAgICB0eHRVc2VyTmFtZS5zZXRUZXh0KFwiXCIpO1xuICAgICAgICB0eHRQYXNzd29yZC5zZXRUZXh0KFwiXCIpO1xuICAgICAgICB0eHRBZGRyZXNzLnNldFRleHQoXCJcIik7XG4gICAgICAgIHR4dFBob25lLnNldFRleHQoXCJcIik7XG4gICAgfVxuLi4uXG5cbiAgICBwcml2YXRlIHZvaWQgYnRuU2lnbnVwQWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0blNpZ251cEFjdGlvblBlcmZvcm1lZFxuICAgICAgICAvLyBUT0RPIGFkZCB5b3VyIGhhbmRsaW5nIGNvZGUgaGVyZTpcbiAgICAgICAgaWYgKHZhbGlkYXRlRmllbGRzKCkpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgU3Vic2NyaWJlciBzdWIgPSBuZXcgU3Vic2NyaWJlcigpO1xuICAgICAgICAgICAgICAgIHN1Yi5zZXRGdWxsTmFtZSh0eHROYW1lLmdldFRleHQoKSk7XG4gICAgICAgICAgICAgICAgc3ViLnNldFVzZXJuYW1lKHR4dFVzZXJOYW1lLmdldFRleHQoKSk7XG4gICAgICAgICAgICAgICAgc3ViLnNldFBhc3N3b3JkKHR4dFBhc3N3b3JkLmdldFRleHQoKSk7XG4gICAgICAgICAgICAgICAgc3ViLnNldFJvbGUoREVGQVVMVF9ST0xFKTtcbiAgICAgICAgICAgICAgICBzdWIuc2V0QWRkcmVzcyh0eHRBZGRyZXNzLmdldFRleHQoKSk7XG4gICAgICAgICAgICAgICAgc3ViLnNldFBob25lKHR4dFBob25lLmdldFRleHQoKSk7XG4gICAgICAgICAgICAgICAgc3ViLnNldENyZWF0ZV9hdChMb2NhbERhdGVUaW1lLm5vdygpKTtcbiAgICAgICAgICAgICAgICBTdWJzY3JpYmVyREFPLmluc2VydChzdWIpO1xuICAgICAgICAgICAgICAgIGNsZWFyKCk7XG4gICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZXgpIHtcbiAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcIkzhu5dpOiBcIiArIGV4LmdldE1lc3NhZ2UoKSwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0blNpZ251cEFjdGlvblBlcmZvcm1lZFxuLi4uXG5QYXRoOiBzcmMvREFPL0RiT3BlcmF0aW9ucy5qYXZhXG5wYWNrYWdlIERBTztcblxuaW1wb3J0IGphdmEuc3FsLkNvbm5lY3Rpb247XG5pbXBvcnQgamF2YS5zcWwuUHJlcGFyZWRTdGF0ZW1lbnQ7XG5pbXBvcnQgamF2YS5zcWwuUmVzdWx0U2V0O1xuaW1wb3J0IGphdmEuc3FsLlN0YXRlbWVudDtcbmltcG9ydCBqYXZheC5zd2luZy5KT3B0aW9uUGFuZTtcblxucHVibGljIGNsYXNzIERiT3BlcmF0aW9ucyB7XG4gICAgcHVibGljIHN0YXRpYyB2b2lkIHNldERhdGFPckRlbGV0ZShTdHJpbmcgcXVlcnksIFN0cmluZyBtc2cpIHtcbiAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcbiAgICAgICAgU3RhdGVtZW50IHN0ID0gbnVsbDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbm4gPSBDb25uZWN0aW9uUHJvdmlkZXIuZ2V0Q29ubigpO1xuICAgICAgICAgICAgc3QgPSBjb25uLmNyZWF0ZVN0YXRlbWVudCgpO1xuICAgICAgICAgICAgc3QuZXhlY3V0ZVVwZGF0ZShxdWVyeSk7XG5cbiAgICAgICAgICAgIGlmKCFtc2cuZXF1YWxzKFwiXCIpKSB7XG4gICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgbXNnLCBcIk1lc3NhZ2VcIiwgSk9wdGlvblBhbmUuSU5GT1JNQVRJT05fTUVTU0FHRSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBleCkge1xuICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgZXgsIFwiTWVzc2FnZVwiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKHN0ICE9IG51bGwpIHN0LmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgaWYgKGNvbm4gIT0gbnVsbCkgY29ubi5jbG9zZSgpO1xuICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyBzdGF0aWMgUmVzdWx0U2V0IGdldERhdGEoU3RyaW5nIHF1ZXJ5KXtcbiAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcbiAgICAgICAgU3RhdGVtZW50IHN0ID0gbnVsbDtcbiAgICAgICAgUmVzdWx0U2V0IHJzID0gbnVsbDtcbiAgICAgICAgXG4gICAgICAgIHRyeXtcbiAgICAgICAgICAgIGNvbm4gPSBDb25uZWN0aW9uUHJvdmlkZXIuZ2V0Q29ubigpO1xuICAgICAgICAgICAgc3QgPSBjb25uLmNyZWF0ZVN0YXRlbWVudCgpO1xuICAgICAgICAgICAgcnMgPSBzdC5leGVjdXRlUXVlcnkocXVlcnkpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXR1cm4gcnM7XG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBleCl7XG4gICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBleCwgXCJNZXNzYWdlXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH0gXG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBpbnQgZ2V0TmV4dElkKFN0cmluZyB0YWJsZU5hbWUsIFN0cmluZyBpZENvbHVtbk5hbWUpIHtcbiAgICAgICAgaW50IG5leHRJZCA9IDE7XG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgICAgIFN0YXRlbWVudCBzdG10ID0gbnVsbDtcbiAgICAgICAgUmVzdWx0U2V0IHJzID0gbnVsbDtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29ubiA9IENvbm5lY3Rpb25Qcm92aWRlci5nZXRDb25uKCk7XG4gICAgICAgICAgICBzdG10ID0gY29ubi5jcmVhdGVTdGF0ZW1lbnQoKTtcbiAgICAgICAgICAgIFN0cmluZyBxdWVyeSA9IFwiU0VMRUNUIE1BWChcIiArIGlkQ29sdW1uTmFtZSArIFwiKSBBUyBtYXhfaWQgRlJPTSBcIiArIHRhYmxlTmFtZTtcbiAgICAgICAgICAgIHJzID0gc3RtdC5leGVjdXRlUXVlcnkocXVlcnkpO1xuXG4gICAgICAgICAgICBpZiAocnMubmV4dCgpKSB7XG4gICAgICAgICAgICAgICAgaW50IG1heElkID0gcnMuZ2V0SW50KFwibWF4X2lkXCIpO1xuICAgICAgICAgICAgICAgIG5leHRJZCA9IG1heElkICsgMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIGUsIFwiRXJyb3JcIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmIChycyAhPSBudWxsKSBycy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIGlmIChzdG10ICE9IG51bGwpIHN0bXQuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICBpZiAoY29ubiAhPSBudWxsKSBjb25uLmNsb3NlKCk7XG4gICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbmV4dElkO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgYm9vbGVhbiBleGVjdXRlVHJhbnNhY3Rpb24oU3FsT3BlcmF0aW9uW10gb3BlcmF0aW9ucywgU3RyaW5nIHN1Y2Nlc3NNc2cpIHtcbiAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcbiAgICAgICAgYm9vbGVhbiBzdWNjZXNzID0gZmFsc2U7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbm4gPSBDb25uZWN0aW9uUHJvdmlkZXIuZ2V0Q29ubigpO1xuICAgICAgICAgICAgY29ubi5zZXRBdXRvQ29tbWl0KGZhbHNlKTtcblxuICAgICAgICAgICAgZm9yIChTcWxPcGVyYXRpb24gb3BlcmF0aW9uIDogb3BlcmF0aW9ucykge1xuICAgICAgICAgICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHBzID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KG9wZXJhdGlvbi5nZXRTcWwoKSk7XG4gICAgICAgICAgICAgICAgb3BlcmF0aW9uLnNldFBhcmFtZXRlcnMocHMpO1xuICAgICAgICAgICAgICAgIHBzLmV4ZWN1dGVVcGRhdGUoKTtcbiAgICAgICAgICAgICAgICBwcy5jbG9zZSgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25uLmNvbW1pdCgpO1xuICAgICAgICAgICAgc3VjY2VzcyA9IHRydWU7XG5cbiAgICAgICAgICAgIGlmIChzdWNjZXNzTXNnICE9IG51bGwgJiYgIXN1Y2Nlc3NNc2cuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgc3VjY2Vzc01zZywgXCJUaMOgbmggY8O0bmdcIiwgSk9wdGlvblBhbmUuSU5GT1JNQVRJT05fTUVTU0FHRSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmIChjb25uICE9IG51bGwpIGNvbm4ucm9sbGJhY2soKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiByb2xsYmFja0V4KSB7XG4gICAgICAgICAgICAgICAgcm9sbGJhY2tFeC5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXCJFcnJvcjogXCIgKyBlLmdldE1lc3NhZ2UoKSwgXCJM4buXaVwiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmIChjb25uICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY29ubi5zZXRBdXRvQ29tbWl0KHRydWUpO1xuICAgICAgICAgICAgICAgICAgICBjb25uLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHN1Y2Nlc3M7XG4gICAgfVxuXG4gICAgcHVibGljIGludGVyZmFjZSBTcWxPcGVyYXRpb24ge1xuICAgICAgICBTdHJpbmcgZ2V0U3FsKCk7XG4gICAgICAgIHZvaWQgc2V0UGFyYW1ldGVycyhQcmVwYXJlZFN0YXRlbWVudCBwcykgdGhyb3dzIEV4Y2VwdGlvbjtcbiAgICB9XG59XG4uLi5cblBhdGg6IHNyYy9Nb2RlbC9TdWJzY3JpYmVyLmphdmFcbi8qXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0xpY2Vuc2VzL2xpY2Vuc2UtZGVmYXVsdC50eHQgdG8gY2hhbmdlIHRoaXMgbGljZW5zZVxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NsYXNzLmphdmEgdG8gZWRpdCB0aGlzIHRlbXBsYXRlXG4gKi9cbnBhY2thZ2UgTW9kZWw7XG5cbmltcG9ydCBqYXZhLnRpbWUuTG9jYWxEYXRlVGltZTtcblxuLyoqXG4gKlxuICogQGF1dGhvciBOZ29jIFRoYW9cbiAqL1xucHVibGljIGNsYXNzIFN1YnNjcmliZXIgZXh0ZW5kcyBVc2VyIHtcbiAgICBwcml2YXRlIGludCBzdWJzY3JpYmVyX2lkO1xuICAgIHByaXZhdGUgU3RyaW5nIGZ1bGxOYW1lO1xuICAgIHByaXZhdGUgU3RyaW5nIGFkZHJlc3M7XG4gICAgcHJpdmF0ZSBTdHJpbmcgcGhvbmU7XG4gICAgXG4gICAgcHVibGljIFN1YnNjcmliZXIoKSB7XG4gICAgfVxuXG4gICAgcHVibGljIFN1YnNjcmliZXIoaW50IHN1YnNjcmliZXJfaWQsIFN0cmluZyBmdWxsTmFtZSwgU3RyaW5nIGFkZHJlc3MsIFN0cmluZyBwaG9uZSkge1xuICAgICAgICB0aGlzLnN1YnNjcmliZXJfaWQgPSBzdWJzY3JpYmVyX2lkO1xuICAgICAgICB0aGlzLmZ1bGxOYW1lID0gZnVsbE5hbWU7XG4gICAgICAgIHRoaXMuYWRkcmVzcyA9IGFkZHJlc3M7XG4gICAgICAgIHRoaXMucGhvbmUgPSBwaG9uZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgU3Vic2NyaWJlcihpbnQgc3Vic2NyaWJlcl9pZCwgU3RyaW5nIGZ1bGxOYW1lLCBTdHJpbmcgYWRkcmVzcywgU3RyaW5nIHBob25lLCBpbnQgdXNlcl9pZCwgU3RyaW5nIHVzZXJuYW1lLCBTdHJpbmcgcGFzc3dvcmQsIFN0cmluZyByb2xlLCBMb2NhbERhdGVUaW1lIGNyZWF0ZV9hdCwgYm9vbGVhbiBpc0FjdGl2ZSkge1xuICAgICAgICBzdXBlcih1c2VyX2lkLCB1c2VybmFtZSwgcGFzc3dvcmQsIHJvbGUsIGNyZWF0ZV9hdCwgaXNBY3RpdmUpO1xuICAgICAgICB0aGlzLnN1YnNjcmliZXJfaWQgPSBzdWJzY3JpYmVyX2lkO1xuICAgICAgICB0aGlzLmZ1bGxOYW1lID0gZnVsbE5hbWU7XG4gICAgICAgIHRoaXMuYWRkcmVzcyA9IGFkZHJlc3M7XG4gICAgICAgIHRoaXMucGhvbmUgPSBwaG9uZTtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIGludCBnZXRTdWJzY3JpYmVyX2lkKCkge1xuICAgICAgICByZXR1cm4gc3Vic2NyaWJlcl9pZDtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXRTdWJzY3JpYmVyX2lkKGludCBzdWJzY3JpYmVyX2lkKSB7XG4gICAgICAgIHRoaXMuc3Vic2NyaWJlcl9pZCA9IHN1YnNjcmliZXJfaWQ7XG4gICAgfVxuXG4gICAgcHVibGljIFN0cmluZyBnZXRGdWxsTmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIGZ1bGxOYW1lO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHNldEZ1bGxOYW1lKFN0cmluZyBmdWxsTmFtZSkge1xuICAgICAgICB0aGlzLmZ1bGxOYW1lID0gZnVsbE5hbWU7XG4gICAgfVxuXG4gICAgcHVibGljIFN0cmluZyBnZXRBZGRyZXNzKCkge1xuICAgICAgICByZXR1cm4gYWRkcmVzcztcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXRBZGRyZXNzKFN0cmluZyBhZGRyZXNzKSB7XG4gICAgICAgIHRoaXMuYWRkcmVzcyA9IGFkZHJlc3M7XG4gICAgfVxuXG4gICAgcHVibGljIFN0cmluZyBnZXRQaG9uZSgpIHtcbiAgICAgICAgcmV0dXJuIHBob25lO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHNldFBob25lKFN0cmluZyBwaG9uZSkge1xuICAgICAgICB0aGlzLnBob25lID0gcGhvbmU7XG4gICAgfVxuICAgIFxuICAgIFxufVxuLi4uXG5QYXRoOiBzcmMvREFPL0Nvbm5lY3Rpb25Qcm92aWRlci5qYXZhXG4vKlxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9MaWNlbnNlcy9saWNlbnNlLWRlZmF1bHQudHh0IHRvIGNoYW5nZSB0aGlzIGxpY2Vuc2VcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9DbGFzcy5qYXZhIHRvIGVkaXQgdGhpcyB0ZW1wbGF0ZVxuICovXG5wYWNrYWdlIERBTztcblxuaW1wb3J0IGphdmEuc3FsLio7XG5cbi8qKlxuICpcbiAqIEBhdXRob3IgTmdvYyBUaGFvXG4gKi9cbnB1YmxpYyBjbGFzcyBDb25uZWN0aW9uUHJvdmlkZXIge1xuICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmluZyBVUkwgPSBcImpkYmM6bXlzcWw6Ly8xMjUuMjEyLjIzMS4xODQ6Njk2OS9JbnRlcm5ldERCXCI7XG4gICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nIFVTRVIgPSBcIm1pbnRvcmkwOVwiO1xuICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmluZyBQQVNTV09SRCA9IFwiTWludG9yeTA5QDk2XCI7XG4gICAgXG4gICAgcHVibGljIHN0YXRpYyBDb25uZWN0aW9uIGdldENvbm4oKXtcbiAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgQ2xhc3MuZm9yTmFtZShcImNvbS5teXNxbC5jai5qZGJjLkRyaXZlclwiKTtcbiAgICAgICAgICAgIGNvbm4gPSBEcml2ZXJNYW5hZ2VyLmdldENvbm5lY3Rpb24oVVJMLCBVU0VSLCBQQVNTV09SRCk7XG4gICAgICAgIH0gY2F0Y2ggKENsYXNzTm90Rm91bmRFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgU3lzdGVtLmVyci5wcmludGxuKFwiTXlTUUwgSkRCQyBEcml2ZXIgbm90IGZvdW5kLlwiKTtcbiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBTeXN0ZW0uZXJyLnByaW50bG4oXCJDb25uZWN0aW9uIGZhaWxlZC5cIik7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb25uO1xuICAgIH1cbi4uLlxuUGF0aDogc3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vTG9naW4uamF2YVxuLypcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvTGljZW5zZXMvbGljZW5zZS1kZWZhdWx0LnR4dCB0byBjaGFuZ2UgdGhpcyBsaWNlbnNlXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0dVSUZvcm1zL0pGcmFtZS5qYXZhIHRvIGVkaXQgdGhpcyB0ZW1wbGF0ZVxuICovXG5wYWNrYWdlIGludGVybmV0Lm1hbmdlbWVudC5zeXN0ZW07XG5cbmltcG9ydCBEQU8uVXNlckRBTztcbmltcG9ydCBNb2RlbC5Vc2VyO1xuaW1wb3J0IGphdmF4LnN3aW5nLkpPcHRpb25QYW5lO1xuLi4uXG5QYXRoOiBuYnByb2plY3QvcHJpdmF0ZS9wcml2YXRlLnhtbFxuPD94bWwgdmVyc2lvbj1cIjEuMFwiIGVuY29kaW5nPVwiVVRGLThcIj8+XG48cHJvamVjdC1wcml2YXRlIHhtbG5zPVwiaHR0cDovL3d3dy5uZXRiZWFucy5vcmcvbnMvcHJvamVjdC1wcml2YXRlLzFcIj5cbiAgICA8ZWRpdG9yLWJvb2ttYXJrcyB4bWxucz1cImh0dHA6Ly93d3cubmV0YmVhbnMub3JnL25zL2VkaXRvci1ib29rbWFya3MvMlwiIGxhc3RCb29rbWFya0lkPVwiMFwiLz5cbiAgICA8b3Blbi1maWxlcyB4bWxucz1cImh0dHA6Ly93d3cubmV0YmVhbnMub3JnL25zL3Byb2plY3R1aS1vcGVuLWZpbGVzLzJcIj5cbiAgICAgICAgPGdyb3VwPlxuICAgICAgICAgICAgPGZpbGU+ZmlsZTovRTovSG9jVGFwLzAyX0pBVkEvMDNfUHJvamVjdC9JbnRlcm5ldCUyME1hbmdlbWVudCUyMFN5c3RlbS9zcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9Gb3Jnb3RQYXNzd29yZC5qYXZhLi4uIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV8wMVZkZzliSDdxd0ZQa3R1WmZ0YjQxRDEifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJFOi9Ib2NUYXAvMDJfSkFWQS8wM19Qcm9qZWN0L0ludGVybmV0IE1hbmdlbWVudCBTeXN0ZW0iLCJmb2xkZXJSb290IjoiRTovSG9jVGFwLzAyX0pBVkEvMDNfUHJvamVjdC9JbnRlcm5ldCBNYW5nZW1lbnQgU3lzdGVtIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwidGltZXN0YW1wIjoiMjAyNS0wNS0xM1QwMTo1NTozMS44NDVaIiwicmVzcG9uc2VfdGV4dCI6IkkndmUgZm91bmQgdGhlIGlzc3VlIGluIHRoZSBgRm9yZ290UGFzc3dvcmQuamF2YWAgZmlsZS4gTGV0IG1lIGV4cGxhaW4gdGhlIHByb2JsZW0gYW5kIHByb3ZpZGUgYSBzb2x1dGlvbjpcblxuIyMgVGhlIElzc3VlXG5cbkluIHRoZSBgYnRuQ2hhbmdlQWN0aW9uUGVyZm9ybWVkYCBtZXRob2QgKGxpbmVzIDI1MC0yNjUpLCB0aGVyZSdzIGEgbG9naWNhbCBlcnJvciBpbiB0aGUgY29uZGl0aW9uOlxuXG5gYGBgamF2YSBwYXRoPXNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL0ZvcmdvdFBhc3N3b3JkLmphdmEgbW9kZT1FWENFUlBUXG5wcml2YXRlIHZvaWQgYnRuQ2hhbmdlQWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkNoYW5nZUFjdGlvblBlcmZvcm1lZFxuICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxuICAgIGlmKHZhbGlkYXRlRmllbGRzKCkgJiYgY3VycmVudFN1YnNjcmliZXIgPT0gbnVsbCl7XG4gICAgICAgIFN0cmluZyBuZXdQYXNzd29yZCA9IHR4dFBhc3N3b3JkLmdldFRleHQoKTtcbiAgICAgICAgXG4gICAgICAgIGJvb2xlYW4gaXNTdWNjZXNzID0gU3Vic2NyaWJlckRBTy51cGRhdGVQYXNzd29yZChjdXJyZW50U3Vic2NyaWJlci5nZXRVc2VyX2lkKCksIG5ld1Bhc3N3b3JkKTtcbiAgICAgICAgXG4gICAgICAgIGlmKGlzU3VjY2Vzcykge1xuICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXCLEkOG7lWkgbeG6rXQga2jhuql1IHRow6BuaCBjw7RuZyEgVnVpIGzDsm5nIMSRxINuZyBuaOG6rXAgbOG6oWkhXCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuSU5GT1JNQVRJT05fTUVTU0FHRSk7XG4gICAgICAgICAgICBuZXcgTG9naW4oKS5zZXRWaXNpYmxlKHRydWUpO1xuICAgICAgICAgICAgdGhpcy5kaXNwb3NlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcIsSQ4buVaSBt4bqtdCBraOG6qXUgdGjhuqV0IGLhuqFpfCBWdWkgbMOybmcgdGjhu60gbOG6oWkgc2F1IVwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgICAgICB9XG4gICAgfVxufS8vR0VOLUxBU1Q6ZXZlbnRfYnRuQ2hhbmdlQWN0aW9uUGVyZm9ybWVkXG5gYGBgXG5cblRoZSBjb25kaXRpb24gYGlmKHZhbGlkYXRlRmllbGRzKCkgJiYgY3VycmVudFN1YnNjcmliZXIgPT0gbnVsbClgIGlzIGluY29ycmVjdC4gSXQncyBjaGVja2luZyBpZiBgY3VycmVudFN1YnNjcmliZXJgIGlzIG51bGwsIGJ1dCBpdCBzaG91bGQgYmUgY2hlY2tpbmcgaWYgYGN1cnJlbnRTdWJzY3JpYmVyYCBpcyBOT1QgbnVsbC4gVGhpcyBpcyB3aHkgbm90aGluZyBoYXBwZW5zIHdoZW4geW91IGNsaWNrIHRoZSBjaGFuZ2UgcGFzc3dvcmQgYnV0dG9uIC0gdGhlIGNvbmRpdGlvbiBpcyBuZXZlciB0cnVlLlxuXG5BZGRpdGlvbmFsbHksIGlmIGBjdXJyZW50U3Vic2NyaWJlcmAgaXMgbnVsbCwgdGhlIGNvZGUgd291bGQgdGhyb3cgYSBOdWxsUG9pbnRlckV4Y2VwdGlvbiB3aGVuIHRyeWluZyB0byBjYWxsIGBjdXJyZW50U3Vic2NyaWJlci5nZXRVc2VyX2lkKClgLlxuXG4jIyBUaGUgU29sdXRpb25cblxuTGV0J3MgZml4IHRoZSBjb25kaXRpb24gaW4gdGhlIGBidG5DaGFuZ2VBY3Rpb25QZXJmb3JtZWRgIG1ldGhvZDpcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiJhMTc0ZjVlZi1iMzdlLTQzNTQtODk4Yi1lMDViNDgzZTg2MTMiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiIjIyBFeHBsYW5hdGlvbiBvZiB0aGUgRml4XG5cbkkndmUgbWFkZSB0aGUgZm9sbG93aW5nIGNoYW5nZSB0byBmaXggdGhlIGlzc3VlOlxuXG4xLiBDaGFuZ2VkIHRoZSBjb25kaXRpb24gZnJvbSBgaWYodmFsaWRhdGVGaWVsZHMoKSAmJiBjdXJyZW50U3Vic2NyaWJlciA9PSBudWxsKWAgdG8gYGlmKHZhbGlkYXRlRmllbGRzKCkgJiYgY3VycmVudFN1YnNjcmliZXIgIT0gbnVsbClgLlxuXG5UaGlzIGNoYW5nZSBlbnN1cmVzIHRoYXQ6XG4xLiBUaGUgcGFzc3dvcmQgY2hhbmdlIGZ1bmN0aW9uYWxpdHkgd2lsbCBvbmx5IHByb2NlZWQgaWYgdGhlIGZpZWxkcyBhcmUgdmFsaWQgQU5EIGEgc3Vic2NyaWJlciBoYXMgYmVlbiBmb3VuZFxuMi4gSXQgd2lsbCBwcmV2ZW50IGEgTnVsbFBvaW50ZXJFeGNlcHRpb24gdGhhdCB3b3VsZCBvY2N1ciBpZiB0cnlpbmcgdG8gYWNjZXNzIGBjdXJyZW50U3Vic2NyaWJlci5nZXRVc2VyX2lkKClgIHdoZW4gYGN1cnJlbnRTdWJzY3JpYmVyYCBpcyBudWxsXG4zLiBBbHNvIGZpeGVkIGEgc21hbGwgdHlwbyBpbiB0aGUgZXJyb3IgbWVzc2FnZSAoY2hhbmdlZCBcInRo4bqldCBi4bqhaXxcIiB0byBcInRo4bqldCBi4bqhaSFcIilcblxuIyMgSG93IHRvIFRlc3QgdGhlIEZpeFxuXG4xLiBSdW4geW91ciBhcHBsaWNhdGlvblxuMi4gR28gdG8gdGhlIEZvcmdvdCBQYXNzd29yZCBzY3JlZW5cbjMuIEVudGVyIGEgdmFsaWQgcGhvbmUgbnVtYmVyIGFuZCBjbGljayBcIktp4buDbSB0cmFcIlxuNC4gSWYgdGhlIHBob25lIG51bWJlciBpcyBmb3VuZCwgdGhlIHBhc3N3b3JkIGZpZWxkcyBzaG91bGQgYXBwZWFyXG41LiBFbnRlciBhIG5ldyBwYXNzd29yZCBhbmQgY29uZmlybSBwYXNzd29yZFxuNi4gQ2xpY2sgdGhlIFwixJDhu5VpIG3huq10IGto4bqpdVwiIGJ1dHRvblxuNy4gWW91IHNob3VsZCBub3cgc2VlIGEgc3VjY2VzcyBtZXNzYWdlIGFuZCBiZSByZWRpcmVjdGVkIHRvIHRoZSBsb2dpbiBzY3JlZW5cblxuVGhlIGlzc3VlIHdhcyB0aGF0IHRoZSBjb25kaXRpb24gd2FzIGNoZWNraW5nIGZvciBgY3VycmVudFN1YnNjcmliZXIgPT0gbnVsbGAgd2hpY2ggaXMgdGhlIG9wcG9zaXRlIG9mIHdoYXQgaXQgc2hvdWxkIGJlIGNoZWNraW5nLiBUaGUgcGFzc3dvcmQgY2hhbmdlIGZ1bmN0aW9uYWxpdHkgc2hvdWxkIG9ubHkgcHJvY2VlZCBpZiBhIHN1YnNjcmliZXIgaGFzIGJlZW4gZm91bmQgKGkuZS4sIGBjdXJyZW50U3Vic2NyaWJlciAhPSBudWxsYCkuXG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJTdWNjZXNzZnVsbHkgZWRpdGVkIHRoZSBmaWxlIHNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL0ZvcmdvdFBhc3N3b3JkLmphdmEuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlIGZvciBlbnRyeSB3aXRoIGluZGV4IFswXTpcblJlcGxhY2VtZW50IHN1Y2Nlc3NmdWwuXG5FZGl0ZWQgc2VjdGlvbiBhZnRlciBJREUgYXV0by1mb3JtYXR0aW5nIHdhcyBhcHBsaWVkOlxuICAgMjQ2XHQgICAgICAgICAgICB9XG4gICAyNDdcdCAgICAgICAgfVxuICAgMjQ4XHQgICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuQ2hlY2tBY3Rpb25QZXJmb3JtZWRcbiAgIDI0OVx0XG4gICAyNTBcdCAgICBwcml2YXRlIHZvaWQgYnRuQ2hhbmdlQWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkNoYW5nZUFjdGlvblBlcmZvcm1lZFxuICAgMjUxXHQgICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxuICAgMjUyXHQgICAgICAgIGlmKHZhbGlkYXRlRmllbGRzKCkgJiYgY3VycmVudFN1YnNjcmliZXIgIT0gbnVsbCl7XG4gICAyNTNcdCAgICAgICAgICAgIFN0cmluZyBuZXdQYXNzd29yZCA9IHR4dFBhc3N3b3JkLmdldFRleHQoKTtcbiAgIDI1NFx0XG4gICAyNTVcdCAgICAgICAgICAgIGJvb2xlYW4gaXNTdWNjZXNzID0gU3Vic2NyaWJlckRBTy51cGRhdGVQYXNzd29yZChjdXJyZW50U3Vic2NyaWJlci5nZXRVc2VyX2lkKCksIG5ld1Bhc3N3b3JkKTtcbiAgIDI1Nlx0XG4gICAyNTdcdCAgICAgICAgICAgIGlmKGlzU3VjY2Vzcykge1xuICAgMjU4XHQgICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXCLEkOG7lWkgbeG6rXQga2jhuql1IHRow6BuaCBjw7RuZyEgVnVpIGzDsm5nIMSRxINuZyBuaOG6rXAgbOG6oWkhXCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuSU5GT1JNQVRJT05fTUVTU0FHRSk7XG4gICAyNTlcdCAgICAgICAgICAgICAgICBuZXcgTG9naW4oKS5zZXRWaXNpYmxlKHRydWUpO1xuICAgMjYwXHQgICAgICAgICAgICAgICAgdGhpcy5kaXNwb3NlKCk7XG4gICAyNjFcdCAgICAgICAgICAgIH0gZWxzZSB7XG4gICAyNjJcdCAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcIsSQ4buVaSBt4bqtdCBraOG6qXUgdGjhuqV0IGLhuqFpISBWdWkgbMOybmcgdGjhu60gbOG6oWkgc2F1IVwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgMjYzXHQgICAgICAgICAgICB9XG4gICAyNjRcdCAgICAgICAgfVxuICAgMjY1XHQgICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuQ2hhbmdlQWN0aW9uUGVyZm9ybWVkXG4gICAyNjZcdFxuICAgMjY3XHQgICAgLyoqXG4gICAyNjhcdCAgICAgKiBAcGFyYW0gYXJncyB0aGUgY29tbWFuZCBsaW5lIGFyZ3VtZW50c1xuICAgMjY5XHQgICAgICovXG5cblJldmlldyB0aGUgY2hhbmdlcyBhbmQgbWFrZSBzdXJlIHRoZXkgYXJlIGFzIGV4cGVjdGVkIChjb3JyZWN0IGluZGVudGF0aW9uLCBubyBkdXBsaWNhdGUgbGluZXMsIGV0YykuXG5FZGl0IHRoZSBmaWxlIGFnYWluIGlmIG5lY2Vzc2FyeS5cbiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfMDFIdDE5RGlGTHY5b1VjZ0J6cURwcHpUIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiRTovSG9jVGFwLzAyX0pBVkEvMDNfUHJvamVjdC9JbnRlcm5ldCBNYW5nZW1lbnQgU3lzdGVtIiwiZm9sZGVyUm9vdCI6IkU6L0hvY1RhcC8wMl9KQVZBLzAzX1Byb2plY3QvSW50ZXJuZXQgTWFuZ2VtZW50IFN5c3RlbSJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInRpbWVzdGFtcCI6IjIwMjUtMDUtMTNUMDE6NTU6NTEuMzMyWiIsInJlc3BvbnNlX3RleHQiOiIjIyBFeHBsYW5hdGlvbiBvZiB0aGUgRml4XG5cbkkndmUgbWFkZSB0aGUgZm9sbG93aW5nIGNoYW5nZSB0byBmaXggdGhlIGlzc3VlOlxuXG4xLiBDaGFuZ2VkIHRoZSBjb25kaXRpb24gZnJvbSBgaWYodmFsaWRhdGVGaWVsZHMoKSAmJiBjdXJyZW50U3Vic2NyaWJlciA9PSBudWxsKWAgdG8gYGlmKHZhbGlkYXRlRmllbGRzKCkgJiYgY3VycmVudFN1YnNjcmliZXIgIT0gbnVsbClgLlxuXG5UaGlzIGNoYW5nZSBlbnN1cmVzIHRoYXQ6XG4xLiBUaGUgcGFzc3dvcmQgY2hhbmdlIGZ1bmN0aW9uYWxpdHkgd2lsbCBvbmx5IHByb2NlZWQgaWYgdGhlIGZpZWxkcyBhcmUgdmFsaWQgQU5EIGEgc3Vic2NyaWJlciBoYXMgYmVlbiBmb3VuZFxuMi4gSXQgd2lsbCBwcmV2ZW50IGEgTnVsbFBvaW50ZXJFeGNlcHRpb24gdGhhdCB3b3VsZCBvY2N1ciBpZiB0cnlpbmcgdG8gYWNjZXNzIGBjdXJyZW50U3Vic2NyaWJlci5nZXRVc2VyX2lkKClgIHdoZW4gYGN1cnJlbnRTdWJzY3JpYmVyYCBpcyBudWxsXG4zLiBBbHNvIGZpeGVkIGEgc21hbGwgdHlwbyBpbiB0aGUgZXJyb3IgbWVzc2FnZSAoY2hhbmdlZCBcInRo4bqldCBi4bqhaXxcIiB0byBcInRo4bqldCBi4bqhaSFcIilcblxuIyMgSG93IHRvIFRlc3QgdGhlIEZpeFxuXG4xLiBSdW4geW91ciBhcHBsaWNhdGlvblxuMi4gR28gdG8gdGhlIEZvcmdvdCBQYXNzd29yZCBzY3JlZW5cbjMuIEVudGVyIGEgdmFsaWQgcGhvbmUgbnVtYmVyIGFuZCBjbGljayBcIktp4buDbSB0cmFcIlxuNC4gSWYgdGhlIHBob25lIG51bWJlciBpcyBmb3VuZCwgdGhlIHBhc3N3b3JkIGZpZWxkcyBzaG91bGQgYXBwZWFyXG41LiBFbnRlciBhIG5ldyBwYXNzd29yZCBhbmQgY29uZmlybSBwYXNzd29yZFxuNi4gQ2xpY2sgdGhlIFwixJDhu5VpIG3huq10IGto4bqpdVwiIGJ1dHRvblxuNy4gWW91IHNob3VsZCBub3cgc2VlIGEgc3VjY2VzcyBtZXNzYWdlIGFuZCBiZSByZWRpcmVjdGVkIHRvIHRoZSBsb2dpbiBzY3JlZW5cblxuVGhlIGlzc3VlIHdhcyB0aGF0IHRoZSBjb25kaXRpb24gd2FzIGNoZWNraW5nIGZvciBgY3VycmVudFN1YnNjcmliZXIgPT0gbnVsbGAgd2hpY2ggaXMgdGhlIG9wcG9zaXRlIG9mIHdoYXQgaXQgc2hvdWxkIGJlIGNoZWNraW5nLiBUaGUgcGFzc3dvcmQgY2hhbmdlIGZ1bmN0aW9uYWxpdHkgc2hvdWxkIG9ubHkgcHJvY2VlZCBpZiBhIHN1YnNjcmliZXIgaGFzIGJlZW4gZm91bmQgKGkuZS4sIGBjdXJyZW50U3Vic2NyaWJlciAhPSBudWxsYCkuXG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InJlcXVlc3RfaWQiOiI3OTBlN2RlMy1mYTQ0LTRhYTYtOTI1Yi1lYTEzMDY1Mjg2ZmIiLCJ1dWlkIjoiZmQ4NDU2NmEtODllNS00YjJlLTkyYjMtNWU0MzYxY2ZiYWU3IiwiY2hhdEl0ZW1UeXBlIjoiYWdlbnRpYy1jaGVja3BvaW50LWRlbGltaXRlciIsInN0YXR1cyI6InN1Y2Nlc3MiLCJmcm9tVGltZXN0YW1wIjowLCJ0b1RpbWVzdGFtcCI6MTc0NzEwMTM1OTg0NSwic2Vlbl9zdGF0ZSI6InNlZW4ifSx7InJlcXVlc3RfaWQiOiIwMTBlODBhNS0xYjM2LTRjYWItODRjZi1mM2UwZTg1NjA3N2QiLCJzdGF0dXMiOiJjYW5jZWxsZWQiLCJjaGF0SXRlbVR5cGUiOiJhZ2VudGljLXR1cm4tZGVsaW1pdGVyIn0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6ImI0MGI3ODYyLTNhMzUtNGQxMS1iMDIxLWU4MmNlYjA0ODIyMSIsInJlcXVlc3RfbWVzc2FnZSI6IldoZW4geW91IHByZXNzIHRoZSBmb3Jnb3QgcGFzc3dvcmQgYnV0dG9uIHdoaWxlIGxvZ2dpbmcgaW4sIEZvcmdvdFBhc3N3b3JkIHdpbGwgYXBwZWFyIGFzIGEgcG9wdXAgd2luZG93LiIsInJpY2hfdGV4dF9qc29uX3JlcHIiOnsidHlwZSI6ImRvYyIsImNvbnRlbnQiOlt7InR5cGUiOiJwYXJhZ3JhcGgiLCJjb250ZW50IjpbeyJ0eXBlIjoidGV4dCIsInRleHQiOiJXaGVuIHlvdSBwcmVzcyB0aGUgZm9yZ290IHBhc3N3b3JkIGJ1dHRvbiB3aGlsZSBsb2dnaW5nIGluLCBGb3Jnb3RQYXNzd29yZCB3aWxsIGFwcGVhciBhcyBhIHBvcHVwIHdpbmRvdy4ifV19XX0sIm1lbnRpb25lZF9pdGVtcyI6W10sInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfMDE0ZW1TQTFSeXRxZXhmajlmR0UzN052IiwidG9vbF9uYW1lIjoiY29kZWJhc2UtcmV0cmlldmFsIiwiaW5wdXRfanNvbiI6IntcImluZm9ybWF0aW9uX3JlcXVlc3RcIjogXCJGaW5kIHRoZSBMb2dpbi5qYXZhIGZpbGUgYW5kIHNwZWNpZmljYWxseSBob3cgdGhlIGZvcmdvdCBwYXNzd29yZCBidXR0b24gaXMgaW1wbGVtZW50ZWRcIn0iLCJtY3Bfc2VydmVyX25hbWUiOiIiLCJtY3BfdG9vbF9uYW1lIjoiIn19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiJJIHVuZGVyc3RhbmQgeW91IHdhbnQgdGhlIEZvcmdvdFBhc3N3b3JkIGZ1bmN0aW9uYWxpdHkgdG8gYXBwZWFyIGFzIGEgcG9wdXAgd2luZG93IHdoZW4gY2xpY2tpbmcgdGhlIGZvcmdvdCBwYXNzd29yZCBidXR0b24gZnJvbSB0aGUgbG9naW4gc2NyZWVuLCByYXRoZXIgdGhhbiBhcyBhIHNlcGFyYXRlIHdpbmRvdy4gTGV0J3MgaW1wbGVtZW50IHRoaXMgY2hhbmdlLlxuXG5GaXJzdCwgbGV0J3MgbG9vayBhdCB0aGUgTG9naW4uamF2YSBmaWxlIHRvIHVuZGVyc3RhbmQgaG93IHRoZSBmb3Jnb3QgcGFzc3dvcmQgYnV0dG9uIGlzIGN1cnJlbnRseSBpbXBsZW1lbnRlZDpcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjAsInRleHRfbm9kZSI6eyJjb250ZW50IjoiV2hlbiB5b3UgcHJlc3MgdGhlIGZvcmdvdCBwYXNzd29yZCBidXR0b24gd2hpbGUgbG9nZ2luZyBpbiwgRm9yZ290UGFzc3dvcmQgd2lsbCBhcHBlYXIgYXMgYSBwb3B1cCB3aW5kb3cuIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiRTovSG9jVGFwLzAyX0pBVkEvMDNfUHJvamVjdC9JbnRlcm5ldCBNYW5nZW1lbnQgU3lzdGVtIiwiZm9sZGVyUm9vdCI6IkU6L0hvY1RhcC8wMl9KQVZBLzAzX1Byb2plY3QvSW50ZXJuZXQgTWFuZ2VtZW50IFN5c3RlbSJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInRpbWVzdGFtcCI6IjIwMjUtMDUtMTNUMDE6NTg6MjMuMDQ2WiIsInJlc3BvbnNlX3RleHQiOiJJIHVuZGVyc3RhbmQgeW91IHdhbnQgdGhlIEZvcmdvdFBhc3N3b3JkIGZ1bmN0aW9uYWxpdHkgdG8gYXBwZWFyIGFzIGEgcG9wdXAgd2luZG93IHdoZW4gY2xpY2tpbmcgdGhlIGZvcmdvdCBwYXNzd29yZCBidXR0b24gZnJvbSB0aGUgbG9naW4gc2NyZWVuLCByYXRoZXIgdGhhbiBhcyBhIHNlcGFyYXRlIHdpbmRvdy4gTGV0J3MgaW1wbGVtZW50IHRoaXMgY2hhbmdlLlxuXG5GaXJzdCwgbGV0J3MgbG9vayBhdCB0aGUgTG9naW4uamF2YSBmaWxlIHRvIHVuZGVyc3RhbmQgaG93IHRoZSBmb3Jnb3QgcGFzc3dvcmQgYnV0dG9uIGlzIGN1cnJlbnRseSBpbXBsZW1lbnRlZDpcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiI1OTFjNmQ5Zi1jNmY4LTQ0YWQtYWUyNC03ZmUzZmY3YjdmZDIiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1XzAxSkE1blN0RXRxYVV5bkZZZ1lVaks0MiIsInRvb2xfbmFtZSI6InN0ci1yZXBsYWNlLWVkaXRvciIsImlucHV0X2pzb24iOiJ7XCJjb21tYW5kXCI6IFwic3RyX3JlcGxhY2VcIiwgXCJwYXRoXCI6IFwic3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vRm9yZ290UGFzc3dvcmQuamF2YVwiLCBcInN0cl9yZXBsYWNlX2VudHJpZXNcIjogW3tcIm9sZF9zdHJcIjogXCJwYWNrYWdlIGludGVybmV0Lm1hbmdlbWVudC5zeXN0ZW07XFxuXFxuaW1wb3J0IERBTy5TdWJzY3JpYmVyREFPO1xcbmltcG9ydCBNb2RlbC5TdWJzY3JpYmVyO1xcbmltcG9ydCBqYXZheC5zd2luZy5KT3B0aW9uUGFuZTtcXG5pbXBvcnQgaW50ZXJuZXQubWFuZ2VtZW50LnN5c3RlbS5Mb2dpbjtcXG5cXG4vKipcXG4gKlxcbiAqIEBhdXRob3IgTmdvYyBUaGFvXFxuICovXFxucHVibGljIGNsYXNzIEZvcmdvdFBhc3N3b3JkIGV4dGVuZHMgamF2YXguc3dpbmcuSkZyYW1lIHtcIiwgXCJuZXdfc3RyXCI6IFwicGFja2FnZSBpbnRlcm5ldC5tYW5nZW1lbnQuc3lzdGVtO1xcblxcbmltcG9ydCBEQU8uU3Vic2NyaWJlckRBTztcXG5pbXBvcnQgTW9kZWwuU3Vic2NyaWJlcjtcXG5pbXBvcnQgamF2YXguc3dpbmcuSk9wdGlvblBhbmU7XFxuaW1wb3J0IGludGVybmV0Lm1hbmdlbWVudC5zeXN0ZW0uTG9naW47XFxuaW1wb3J0IGphdmEuYXd0LkZyYW1lO1xcblxcbi8qKlxcbiAqXFxuICogQGF1dGhvciBOZ29jIFRoYW9cXG4gKi9cXG5wdWJsaWMgY2xhc3MgRm9yZ290UGFzc3dvcmQgZXh0ZW5kcyBqYXZheC5zd2luZy5KRGlhbG9nIHtcIiwgXCJvbGRfc3RyX3N0YXJ0X2xpbmVfbnVtYmVyXCI6IDUsIFwib2xkX3N0cl9lbmRfbGluZV9udW1iZXJcIjogMTZ9XX0iLCJtY3Bfc2VydmVyX25hbWUiOiIiLCJtY3BfdG9vbF9uYW1lIjoiIn19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiJOb3cgSSB1bmRlcnN0YW5kIHRoZSB0YXNrLiBJIG5lZWQgdG86XG5cbjEuIE1vZGlmeSB0aGUgRm9yZ290UGFzc3dvcmQgY2xhc3MgdG8gYmUgYSBKRGlhbG9nIGluc3RlYWQgb2YgYSBKRnJhbWUgc28gaXQgY2FuIGJlIGRpc3BsYXllZCBhcyBhIG1vZGFsIHBvcHVwXG4yLiBVcGRhdGUgdGhlIExvZ2luIGNsYXNzIHRvIG9wZW4gRm9yZ290UGFzc3dvcmQgYXMgYSBkaWFsb2cgd2hlbiB0aGUgZm9yZ290IHBhc3N3b3JkIGJ1dHRvbiBpcyBjbGlja2VkXG5cbkxldCdzIGltcGxlbWVudCB0aGVzZSBjaGFuZ2VzOlxuXG4jIyBTdGVwIDE6IENvbnZlcnQgRm9yZ290UGFzc3dvcmQgZnJvbSBKRnJhbWUgdG8gSkRpYWxvZ1xuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiVGhlIGZvbGxvd2luZyBjb2RlIHNlY3Rpb25zIHdlcmUgcmV0cmlldmVkOlxuUGF0aDogc3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vRm9yZ290UGFzc3dvcmQuamF2YVxuLi4uXG5cbi8qKlxuICpcbiAqIEBhdXRob3IgTmdvYyBUaGFvXG4gKi9cbnB1YmxpYyBjbGFzcyBGb3Jnb3RQYXNzd29yZCBleHRlbmRzIGphdmF4LnN3aW5nLkpGcmFtZSB7XG4gICAgcHJpdmF0ZSBTdWJzY3JpYmVyIGN1cnJlbnRTdWJzY3JpYmVyID0gbnVsbDtcbiAgICBwdWJsaWMgU3RyaW5nIHBob25lUGF0dGVybiA9IFwiXlswLTldKiRcIjtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgbmV3IGZvcm0gRm9yZ290UGFzc3dvcmRcbiAgICAgKi9cbiAgICBwdWJsaWMgRm9yZ290UGFzc3dvcmQoKSB7XG4gICAgICAgIGluaXRDb21wb25lbnRzKCk7XG5cbiAgICAgICAgYnRuRXhpdC5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICAgICAgYnRuQ2hhbmdlLnNldFZpc2libGUoZmFsc2UpO1xuICAgICAgICBsYk5ld1Bhc3N3b3JkLnNldFZpc2libGUoZmFsc2UpO1xuICAgICAgICBsYkNvbmZpcm1QYXNzd29yZC5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICAgICAgdHh0UGFzc3dvcmQuc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgICAgIHR4dENvbmZpcm1QYXNzd29yZC5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBjbGVhcigpe1xuICAgICAgICB0eHRQYXNzd29yZC5zZXRUZXh0KFwiXCIpO1xuICAgICAgICB0eHRQaG9uZS5zZXRUZXh0KFwiXCIpO1xuICAgICAgICB0eHRDb25maXJtUGFzc3dvcmQuc2V0VGV4dChcIlwiKTtcblxuICAgICAgICBidG5FeGl0LnNldFZpc2libGUoZmFsc2UpO1xuICAgICAgICBidG5DaGFuZ2Uuc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgICAgIGxiTmV3UGFzc3dvcmQuc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgICAgIGxiQ29uZmlybVBhc3N3b3JkLnNldFZpc2libGUoZmFsc2UpO1xuICAgICAgICB0eHRQYXNzd29yZC5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICAgICAgdHh0Q29uZmlybVBhc3N3b3JkLnNldFZpc2libGUoZmFsc2UpO1xuICAgIH1cbi4uLlxuXG4gICAgICAgIGpMYWJlbDEgPSBuZXcgamF2YXguc3dpbmcuSkxhYmVsKCk7XG4gICAgICAgIGpMYWJlbDIgPSBuZXcgamF2YXguc3dpbmcuSkxhYmVsKCk7XG4gICAgICAgIGxiTmV3UGFzc3dvcmQgPSBuZXcgamF2YXguc3dpbmcuSkxhYmVsKCk7XG4gICAgICAgIGxiQ29uZmlybVBhc3N3b3JkID0gbmV3IGphdmF4LnN3aW5nLkpMYWJlbCgpO1xuICAgICAgICBqU2VwYXJhdG9yMSA9IG5ldyBqYXZheC5zd2luZy5KU2VwYXJhdG9yKCk7XG4gICAgICAgIHR4dFBob25lID0gbmV3IGphdmF4LnN3aW5nLkpUZXh0RmllbGQoKTtcbiAgICAgICAgYnRuQ2hlY2sgPSBuZXcgamF2YXguc3dpbmcuSkJ1dHRvbigpO1xuICAgICAgICB0eHRQYXNzd29yZCA9IG5ldyBqYXZheC5zd2luZy5KUGFzc3dvcmRGaWVsZCgpO1xuICAgICAgICB0eHRDb25maXJtUGFzc3dvcmQgPSBuZXcgamF2YXguc3dpbmcuSlBhc3N3b3JkRmllbGQoKTtcbiAgICAgICAgYnRuQ2hhbmdlID0gbmV3IGphdmF4LnN3aW5nLkpCdXR0b24oKTtcbiAgICAgICAgYnRuRXhpdCA9IG5ldyBqYXZheC5zd2luZy5KQnV0dG9uKCk7XG5cbiAgICAgICAgc2V0RGVmYXVsdENsb3NlT3BlcmF0aW9uKGphdmF4LnN3aW5nLldpbmRvd0NvbnN0YW50cy5FWElUX09OX0NMT1NFKTtcblxuICAgICAgICBqTGFiZWwxLnNldEZvbnQobmV3IGphdmEuYXd0LkZvbnQoXCJBcmlhbFwiLCAxLCAzNikpOyAvLyBOT0kxOE5cbiAgICAgICAgakxhYmVsMS5zZXRGb3JlZ3JvdW5kKGphdmF4LnN3aW5nLlVJTWFuYWdlci5nZXREZWZhdWx0cygpLmdldENvbG9yKFwiQWN0aW9ucy5ZZWxsb3dcIikpO1xuICAgICAgICBqTGFiZWwxLnNldFRleHQoXCLEkOG7lEkgTeG6rFQgS0jhuqhVXCIpO1xuXG4gICAgICAgIGpMYWJlbDIuc2V0Rm9udChuZXcgamF2YS5hd3QuRm9udChcIkFyaWFsXCIsIDEsIDE0KSk7IC8vIE5PSTE4TlxuICAgICAgICBqTGFiZWwyLnNldFRleHQoXCJT4buRIMSRaeG7h24gdGhv4bqhaTogXCIpO1xuXG4gICAgICAgIGxiTmV3UGFzc3dvcmQuc2V0Rm9udChuZXcgamF2YS5hd3QuRm9udChcIkFyaWFsXCIsIDEsIDE0KSk7IC8vIE5PSTE4TlxuICAgICAgICBsYk5ld1Bhc3N3b3JkLnNldFRleHQoXCJN4bqtdCBraOG6qXUgbeG7m2k6XCIpO1xuXG4gICAgICAgIGxiQ29uZmlybVBhc3N3b3JkLnNldEZvbnQobmV3IGphdmEuYXd0LkZvbnQoXCJBcmlhbFwiLCAxLCAxNCkpOyAvLyBOT0kxOE5cbiAgICAgICAgbGJDb25maXJtUGFzc3dvcmQuc2V0VGV4dChcIljDoWMgbmjhuq1uIG3huq10IGto4bqpdTpcIik7XG5cbiAgICAgICAgYnRuQ2hlY2suc2V0Rm9udChuZXcgamF2YS5hd3QuRm9udChcIkFyaWFsXCIsIDEsIDE0KSk7IC8vIE5PSTE4TlxuICAgICAgICBidG5DaGVjay5zZXRJY29uKG5ldyBqYXZheC5zd2luZy5JbWFnZUljb24oZ2V0Q2xhc3MoKS5nZXRSZXNvdXJjZShcIi9JbWFnZXMvc2VhcmNoLnBuZ1wiKSkpOyAvLyBOT0kxOE5cbiAgICAgICAgYnRuQ2hlY2suc2V0VGV4dChcIktp4buDbSB0cmFcIik7XG4gICAgICAgIGJ0bkNoZWNrLnNldEN1cnNvcihuZXcgamF2YS5hd3QuQ3Vyc29yKGphdmEuYXd0LkN1cnNvci5IQU5EX0NVUlNPUikpO1xuICAgICAgICBidG5DaGVjay5hZGRBY3Rpb25MaXN0ZW5lcihuZXcgamF2YS5hd3QuZXZlbnQuQWN0aW9uTGlzdGVuZXIoKSB7XG4gICAgICAgICAgICBwdWJsaWMgdm9pZCBhY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7XG4gICAgICAgICAgICAgICAgYnRuQ2hlY2tBY3Rpb25QZXJmb3JtZWQoZXZ0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4uLi5cblxuICAgIHByaXZhdGUgdm9pZCBidG5FeGl0QWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkV4aXRBY3Rpb25QZXJmb3JtZWRcbiAgICAgICAgLy8gVE9ETyBhZGQgeW91ciBoYW5kbGluZyBjb2RlIGhlcmU6XG4gICAgICAgIGludCByZXN1bHQgPSBKT3B0aW9uUGFuZS5zaG93Q29uZmlybURpYWxvZyhudWxsLCBcIkLhuqFuIGPDsyBjaOG6r2MgY2jhuq9uIG114buRbiB0aG/DoXQga2jDtG5nP1wiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLllFU19OT19PUFRJT04sIEpPcHRpb25QYW5lLlFVRVNUSU9OX01FU1NBR0UpO1xuXG4gICAgICAgIGlmIChyZXN1bHQgPT0gSk9wdGlvblBhbmUuWUVTX09QVElPTikge1xuICAgICAgICAgICAgbmV3IExvZ2luKCkuc2V0VmlzaWJsZSh0cnVlKTtcbiAgICAgICAgICAgIHRoaXMuZGlzcG9zZSgpO1xuICAgICAgICB9XG4gICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuRXhpdEFjdGlvblBlcmZvcm1lZFxuXG4gICAgcHJpdmF0ZSB2b2lkIGJ0bkNoZWNrQWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkNoZWNrQWN0aW9uUGVyZm9ybWVkXG4gICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxuICAgICAgICBpZih2YWxpZGF0ZVBob25lKCkpIHtcbiAgICAgICAgICAgIFN0cmluZyBwaG9uZSA9IHR4dFBob25lLmdldFRleHQoKTtcbiAgICAgICAgICAgIGN1cnJlbnRTdWJzY3JpYmVyID0gU3Vic2NyaWJlckRBTy5nZXRCeVBob25lKHBob25lKTtcblxuICAgICAgICAgICAgaWYgKGN1cnJlbnRTdWJzY3JpYmVyICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcIlTDrG0gdGjhuqV5IHTDoGkga2hv4bqjbiB24bubaSBz4buRIMSRaeG7h24gdGhv4bqhaSBuw6B5IVwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLklORk9STUFUSU9OX01FU1NBR0UpO1xuXG4gICAgICAgICAgICAgICAgYnRuRXhpdC5zZXRWaXNpYmxlKHRydWUpO1xuICAgICAgICAgICAgICAgIGJ0bkNoYW5nZS5zZXRWaXNpYmxlKHRydWUpO1xuICAgICAgICAgICAgICAgIGxiTmV3UGFzc3dvcmQuc2V0VmlzaWJsZSh0cnVlKTtcbiAgICAgICAgICAgICAgICBsYkNvbmZpcm1QYXNzd29yZC5zZXRWaXNpYmxlKHRydWUpO1xuICAgICAgICAgICAgICAgIHR4dFBhc3N3b3JkLnNldFZpc2libGUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgdHh0Q29uZmlybVBhc3N3b3JkLnNldFZpc2libGUodHJ1ZSk7XG5cbiAgICAgICAgICAgICAgICB0eHRQaG9uZS5zZXRFZGl0YWJsZShmYWxzZSk7XG4gICAgICAgICAgICAgICAgYnRuQ2hlY2suc2V0RW5hYmxlZChmYWxzZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwiS2jDtG5nIHTDrG0gdGjhuqV5IHTDoGkga2hv4bqjbiB24bubaSBz4buRIMSRaeG7h24gdGhv4bqhaSBuw6B5IVwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuQ2hlY2tBY3Rpb25QZXJmb3JtZWRcblxuICAgIHByaXZhdGUgdm9pZCBidG5DaGFuZ2VBY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuQ2hhbmdlQWN0aW9uUGVyZm9ybWVkXG4gICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxuICAgICAgICBpZih2YWxpZGF0ZUZpZWxkcygpICYmIGN1cnJlbnRTdWJzY3JpYmVyICE9IG51bGwpe1xuICAgICAgICAgICAgU3RyaW5nIG5ld1Bhc3N3b3JkID0gdHh0UGFzc3dvcmQuZ2V0VGV4dCgpO1xuXG4gICAgICAgICAgICBib29sZWFuIGlzU3VjY2VzcyA9IFN1YnNjcmliZXJEQU8udXBkYXRlUGFzc3dvcmQoY3VycmVudFN1YnNjcmliZXIuZ2V0VXNlcl9pZCgpLCBuZXdQYXNzd29yZCk7XG5cbiAgICAgICAgICAgIGlmKGlzU3VjY2Vzcykge1xuICAgICAgICAgICAgICAgIG5ldyBMb2dpbigpLnNldFZpc2libGUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwb3NlKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwixJDhu5VpIG3huq10IGto4bqpdSB0aOG6pXQgYuG6oWkhIFZ1aSBsw7JuZyB0aOG7rSBs4bqhaSBzYXUhXCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5DaGFuZ2VBY3Rpb25QZXJmb3JtZWRcbi4uLlxuUGF0aDogc3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vRm9yZ290UGFzc3dvcmQuZm9ybVxuLi4uXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxDb21wb25lbnQgaWQ9XCJidG5FeGl0XCIgbWluPVwiLTJcIiBtYXg9XCItMlwiIGF0dHJpYnV0ZXM9XCIwXCIvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8RW1wdHlTcGFjZSBtYXg9XCIzMjc2N1wiIGF0dHJpYnV0ZXM9XCIwXCIvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8Q29tcG9uZW50IGlkPVwiYnRuQ2hhbmdlXCIgbWluPVwiLTJcIiBtYXg9XCItMlwiIGF0dHJpYnV0ZXM9XCIwXCIvPlxuICAgICAgICAgICAgICAgICAgICAgIDwvR3JvdXA+XG4gICAgICAgICAgICAgICAgICAgICAgPEdyb3VwIHR5cGU9XCIxMDJcIiBhdHRyaWJ1dGVzPVwiMFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8RW1wdHlTcGFjZSBtaW49XCI2MVwiIHByZWY9XCI2MVwiIG1heD1cIi0yXCIgYXR0cmlidXRlcz1cIjBcIi8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxDb21wb25lbnQgaWQ9XCJsYkNvbmZpcm1QYXNzd29yZFwiIG1pbj1cIi0yXCIgbWF4PVwiLTJcIiBhdHRyaWJ1dGVzPVwiMFwiLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPEVtcHR5U3BhY2UgbWluPVwiMThcIiBwcmVmPVwiMThcIiBtYXg9XCItMlwiIGF0dHJpYnV0ZXM9XCIwXCIvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8Q29tcG9uZW50IGlkPVwidHh0Q29uZmlybVBhc3N3b3JkXCIgbWluPVwiLTJcIiBwcmVmPVwiMjExXCIgbWF4PVwiLTJcIiBhdHRyaWJ1dGVzPVwiMFwiLz5cbiAgICAgICAgICAgICAgICAgICAgICA8L0dyb3VwPlxuICAgICAgICAgICAgICAgICAgPC9Hcm91cD5cbiAgICAgICAgICAgICAgPC9Hcm91cD5cbiAgICAgICAgICAgICAgPEVtcHR5U3BhY2UgbWluPVwiLTJcIiBwcmVmPVwiNjlcIiBtYXg9XCItMlwiIGF0dHJpYnV0ZXM9XCIwXCIvPlxuICAgICAgICAgIDwvR3JvdXA+XG4gICAgICA8L0dyb3VwPlxuICAgIDwvRGltZW5zaW9uTGF5b3V0PlxuICAgIDxEaW1lbnNpb25MYXlvdXQgZGltPVwiMVwiPlxuICAgICAgPEdyb3VwIHR5cGU9XCIxMDNcIiBncm91cEFsaWdubWVudD1cIjBcIiBhdHRyaWJ1dGVzPVwiMFwiPlxuICAgICAgICAgIDxHcm91cCB0eXBlPVwiMTAyXCIgYXR0cmlidXRlcz1cIjBcIj5cbiAgICAgICAgICAgICAgPEVtcHR5U3BhY2UgbWluPVwiNDBcIiBwcmVmPVwiNDBcIiBtYXg9XCItMlwiIGF0dHJpYnV0ZXM9XCIwXCIvPlxuLi4uXG4gICAgICAgICAgICAgIDxHcm91cCB0eXBlPVwiMTAzXCIgZ3JvdXBBbGlnbm1lbnQ9XCIzXCIgYXR0cmlidXRlcz1cIjBcIj5cbiAgICAgICAgICAgICAgICAgIDxDb21wb25lbnQgaWQ9XCJidG5FeGl0XCIgYWxpZ25tZW50PVwiM1wiIG1pbj1cIi0yXCIgcHJlZj1cIjMwXCIgbWF4PVwiLTJcIiBhdHRyaWJ1dGVzPVwiMFwiLz5cbiAgICAgICAgICAgICAgICAgIDxDb21wb25lbnQgaWQ9XCJidG5DaGFuZ2VcIiBhbGlnbm1lbnQ9XCIzXCIgbWluPVwiLTJcIiBwcmVmPVwiMzBcIiBtYXg9XCItMlwiIGF0dHJpYnV0ZXM9XCIwXCIvPlxuICAgICAgICAgICAgICA8L0dyb3VwPlxuICAgICAgICAgICAgICA8RW1wdHlTcGFjZSBwcmVmPVwiNDBcIiBtYXg9XCIzMjc2N1wiIGF0dHJpYnV0ZXM9XCIwXCIvPlxuICAgICAgICAgIDwvR3JvdXA+XG4gICAgICA8L0dyb3VwPlxuICAgIDwvRGltZW5zaW9uTGF5b3V0PlxuICA8L0xheW91dD5cbiAgPFN1YkNvbXBvbmVudHM+XG4gICAgPENvbXBvbmVudCBjbGFzcz1cImphdmF4LnN3aW5nLkpMYWJlbFwiIG5hbWU9XCJqTGFiZWwxXCI+XG4gICAgICA8UHJvcGVydGllcz5cbiAgICAgICAgPFByb3BlcnR5IG5hbWU9XCJmb250XCIgdHlwZT1cImphdmEuYXd0LkZvbnRcIiBlZGl0b3I9XCJvcmcubmV0YmVhbnMuYmVhbmluZm8uZWRpdG9ycy5Gb250RWRpdG9yXCI+XG4gICAgICAgICAgPEZvbnQgbmFtZT1cIkFyaWFsXCIgc2l6ZT1cIjM2XCIgc3R5bGU9XCIxXCIvPlxuICAgICAgICA8L1Byb3BlcnR5PlxuICAgICAgICA8UHJvcGVydHkgbmFtZT1cImZvcmVncm91bmRcIiB0eXBlPVwiamF2YS5hd3QuQ29sb3JcIiBlZGl0b3I9XCJvcmcubmV0YmVhbnMuYmVhbmluZm8uZWRpdG9ycy5Db2xvckVkaXRvclwiPlxuICAgICAgICAgIDxDb2xvciBibHVlPVwiMFwiIGdyZWVuPVwiYTJcIiBpZD1cIkFjdGlvbnMuWWVsbG93XCIgcGFsZXR0ZT1cIjNcIiByZWQ9XCJlZFwiIHR5cGU9XCJwYWxldHRlXCIvPlxuICAgICAgICA8L1Byb3BlcnR5PlxuLi4uXG4gICAgPENvbXBvbmVudCBjbGFzcz1cImphdmF4LnN3aW5nLkpQYXNzd29yZEZpZWxkXCIgbmFtZT1cInR4dFBhc3N3b3JkXCI+XG4gICAgPC9Db21wb25lbnQ+XG4gICAgPENvbXBvbmVudCBjbGFzcz1cImphdmF4LnN3aW5nLkpQYXNzd29yZEZpZWxkXCIgbmFtZT1cInR4dENvbmZpcm1QYXNzd29yZFwiPlxuICAgIDwvQ29tcG9uZW50PlxuICAgIDxDb21wb25lbnQgY2xhc3M9XCJqYXZheC5zd2luZy5KQnV0dG9uXCIgbmFtZT1cImJ0bkNoYW5nZVwiPlxuICAgICAgPFByb3BlcnRpZXM+XG4gICAgICAgIDxQcm9wZXJ0eSBuYW1lPVwiZm9udFwiIHR5cGU9XCJqYXZhLmF3dC5Gb250XCIgZWRpdG9yPVwib3JnLm5ldGJlYW5zLmJlYW5pbmZvLmVkaXRvcnMuRm9udEVkaXRvclwiPlxuICAgICAgICAgIDxGb250IG5hbWU9XCJBcmlhbFwiIHNpemU9XCIxNFwiIHN0eWxlPVwiMVwiLz5cbiAgICAgICAgPC9Qcm9wZXJ0eT5cbiAgICAgICAgPFByb3BlcnR5IG5hbWU9XCJpY29uXCIgdHlwZT1cImphdmF4LnN3aW5nLkljb25cIiBlZGl0b3I9XCJvcmcubmV0YmVhbnMubW9kdWxlcy5mb3JtLmVkaXRvcnMyLkljb25FZGl0b3JcIj5cbiAgICAgICAgICA8SW1hZ2UgaWNvblR5cGU9XCIzXCIgbmFtZT1cIi9JbWFnZXMvcmVzZXQtcGFzc3dvcmQucG5nXCIvPlxuICAgICAgICA8L1Byb3BlcnR5PlxuICAgICAgICA8UHJvcGVydHkgbmFtZT1cInRleHRcIiB0eXBlPVwiamF2YS5sYW5nLlN0cmluZ1wiIHZhbHVlPVwiJiN4MTEwOyYjeDFlZDU7aSBtJiN4MWVhZDt0IGtoJiN4MWVhOTt1XCIvPlxuICAgICAgICA8UHJvcGVydHkgbmFtZT1cImN1cnNvclwiIHR5cGU9XCJqYXZhLmF3dC5DdXJzb3JcIiBlZGl0b3I9XCJvcmcubmV0YmVhbnMubW9kdWxlcy5mb3JtLmVkaXRvcnMyLkN1cnNvckVkaXRvclwiPlxuICAgICAgICAgIDxDb2xvciBpZD1cIkhhbmQgQ3Vyc29yXCIvPlxuICAgICAgICA8L1Byb3BlcnR5PlxuICAgICAgPC9Qcm9wZXJ0aWVzPlxuICAgICAgPEV2ZW50cz5cbiAgICAgICAgPEV2ZW50SGFuZGxlciBldmVudD1cImFjdGlvblBlcmZvcm1lZFwiIGxpc3RlbmVyPVwiamF2YS5hd3QuZXZlbnQuQWN0aW9uTGlzdGVuZXJcIiBwYXJhbWV0ZXJzPVwiamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnRcIiBoYW5kbGVyPVwiYnRuQ2hhbmdlQWN0aW9uUGVyZm9ybWVkXCIvPlxuICAgICAgPC9FdmVudHM+XG4gICAgPC9Db21wb25lbnQ+XG4gICAgPENvbXBvbmVudCBjbGFzcz1cImphdmF4LnN3aW5nLkpCdXR0b25cIiBuYW1lPVwiYnRuRXhpdFwiPlxuICAgICAgPFByb3BlcnRpZXM+XG4gICAgICAgIDxQcm9wZXJ0eSBuYW1lPVwiZm9udFwiIHR5cGU9XCJqYXZhLmF3dC5Gb250XCIgZWRpdG9yPVwib3JnLm5ldGJlYW5zLmJlYW5pbmZvLmVkaXRvcnMuRm9udEVkaXRvclwiPlxuICAgICAgICAgIDxGb250IG5hbWU9XCJBcmlhbFwiIHNpemU9XCIxNFwiIHN0eWxlPVwiMVwiLz5cbiAgICAgICAgPC9Qcm9wZXJ0eT5cbiAgICAgICAgPFByb3BlcnR5IG5hbWU9XCJpY29uXCIgdHlwZT1cImphdmF4LnN3aW5nLkljb25cIiBlZGl0b3I9XCJvcmcubmV0YmVhbnMubW9kdWxlcy5mb3JtLmVkaXRvcnMyLkljb25FZGl0b3JcIj5cbiAgICAgICAgICA8SW1hZ2UgaWNvblR5cGU9XCIzXCIgbmFtZT1cIi9JbWFnZXMvbG9nb3V0LnBuZ1wiLz5cbiAgICAgICAgPC9Qcm9wZXJ0eT5cbiAgICAgICAgPFByb3BlcnR5IG5hbWU9XCJ0ZXh0XCIgdHlwZT1cImphdmEubGFuZy5TdHJpbmdcIiB2YWx1ZT1cIlRobyYjeGUxO3RcIi8+XG4uLi5cblBhdGg6IHNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL0xvZ2luLmphdmFcbi8qXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0xpY2Vuc2VzL2xpY2Vuc2UtZGVmYXVsdC50eHQgdG8gY2hhbmdlIHRoaXMgbGljZW5zZVxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9HVUlGb3Jtcy9KRnJhbWUuamF2YSB0byBlZGl0IHRoaXMgdGVtcGxhdGVcbiAqL1xucGFja2FnZSBpbnRlcm5ldC5tYW5nZW1lbnQuc3lzdGVtO1xuXG5pbXBvcnQgREFPLlVzZXJEQU87XG5pbXBvcnQgTW9kZWwuVXNlcjtcbmltcG9ydCBqYXZheC5zd2luZy5KT3B0aW9uUGFuZTtcblxuLyoqXG4gKlxuICogQGF1dGhvciBOZ29jIFRoYW9cbiAqL1xucHVibGljIGNsYXNzIExvZ2luIGV4dGVuZHMgamF2YXguc3dpbmcuSkZyYW1lIHtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgbmV3IGZvcm0gTG9naW5cbiAgICAgKi9cbiAgICBwdWJsaWMgTG9naW4oKSB7XG4gICAgICAgIGluaXRDb21wb25lbnRzKCk7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyB2b2lkIGNsZWFyKCl7XG4gICAgICAgIHR4dFVzZXJOYW1lLnNldFRleHQoXCJcIik7XG4gICAgICAgIHR4dFBhc3N3b3JkLnNldFRleHQoXCJcIik7XG4gICAgfVxuXG4gICAgcHVibGljIGJvb2xlYW4gdmFsaWRhdGVGaWVsZHMoKXtcbiAgICAgICAgU3RyaW5nIHVzZXJOYW1lID0gdHh0VXNlck5hbWUuZ2V0VGV4dCgpO1xuICAgICAgICBTdHJpbmcgcGFzc3dvcmQgPSB0eHRQYXNzd29yZC5nZXRUZXh0KCk7XG5cbiAgICAgICAgaWYodXNlck5hbWUuaXNFbXB0eSgpIHx8IHBhc3N3b3JkLmlzRW1wdHkoKSl7XG4gICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcIlZ1aSBsw7JuZyBraMO0bmcgYuG7jyB0cuG7kW5nIVwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGNhbGxlZCBmcm9tIHdpdGhpbiB0aGUgY29uc3RydWN0b3IgdG8gaW5pdGlhbGl6ZSB0aGUgZm9ybS5cbiAgICAgKiBXQVJOSU5HOiBEbyBOT1QgbW9kaWZ5IHRoaXMgY29kZS4gVGhlIGNvbnRlbnQgb2YgdGhpcyBtZXRob2QgaXMgYWx3YXlzXG4gICAgICogcmVnZW5lcmF0ZWQgYnkgdGhlIEZvcm0gRWRpdG9yLlxuICAgICAqL1xuICAgIEBTdXBwcmVzc1dhcm5pbmdzKFwidW5jaGVja2VkXCIpXG4gICAgLy8gPGVkaXRvci1mb2xkIGRlZmF1bHRzdGF0ZT1cImNvbGxhcHNlZFwiIGRlc2M9XCJHZW5lcmF0ZWQgQ29kZVwiPi8vR0VOLUJFR0lOOmluaXRDb21wb25lbnRzXG4gICAgcHJpdmF0ZSB2b2lkIGluaXRDb21wb25lbnRzKCkge1xuXG4gICAgICAgIGpMYWJlbDEgPSBuZXcgamF2YXguc3dpbmcuSkxhYmVsKCk7XG4gICAgICAgIGpMYWJlbDIgPSBuZXcgamF2YXguc3dpbmcuSkxhYmVsKCk7XG4gICAgICAgIGpMYWJlbDMgPSBuZXcgamF2YXguc3dpbmcuSkxhYmVsKCk7XG4gICAgICAgIGpMYWJlbDQgPSBuZXcgamF2YXguc3dpbmcuSkxhYmVsKCk7XG4gICAgICAgIHR4dFVzZXJOYW1lID0gbmV3IGphdmF4LnN3aW5nLkpUZXh0RmllbGQoKTtcbiAgICAgICAgdHh0UGFzc3dvcmQgPSBuZXcgamF2YXguc3dpbmcuSlBhc3N3b3JkRmllbGQoKTtcbiAgICAgICAgalNlcGFyYXRvcjEgPSBuZXcgamF2YXguc3dpbmcuSlNlcGFyYXRvcigpO1xuICAgICAgICBqU2VwYXJhdG9yMiA9IG5ldyBqYXZheC5zd2luZy5KU2VwYXJhdG9yKCk7XG4gICAgICAgIGJ0bkxvZ2luID0gbmV3IGphdmF4LnN3aW5nLkpCdXR0b24oKTtcbiAgICAgICAgYnRuRm9yZ290UGFzc3dvcmQgPSBuZXcgamF2YXguc3dpbmcuSkJ1dHRvbigpO1xuICAgICAgICBidG5TaWdudXAgPSBuZXcgamF2YXguc3dpbmcuSkJ1dHRvbigpO1xuICAgICAgICBqTGFiZWw1ID0gbmV3IGphdmF4LnN3aW5nLkpMYWJlbCgpO1xuICAgICAgICBidG5FeGl0ID0gbmV3IGphdmF4LnN3aW5nLkpCdXR0b24oKTtcblxuICAgICAgICBzZXREZWZhdWx0Q2xvc2VPcGVyYXRpb24oamF2YXguc3dpbmcuV2luZG93Q29uc3RhbnRzLkVYSVRfT05fQ0xPU0UpO1xuXG4gICAgICAgIGpMYWJlbDEuc2V0Rm9udChuZXcgamF2YS5hd3QuRm9udChcIkFyaWFsXCIsIDEsIDM2KSk7IC8vIE5PSTE4TlxuICAgICAgICBqTGFiZWwxLnNldEZvcmVncm91bmQoamF2YXguc3dpbmcuVUlNYW5hZ2VyLmdldERlZmF1bHRzKCkuZ2V0Q29sb3IoXCJBY3Rpb25zLkJsdWVcIikpO1xuICAgICAgICBqTGFiZWwxLnNldFRleHQoXCLEkMSCTkcgTkjhuqxQXCIpO1xuXG4gICAgICAgIGpMYWJlbDIuc2V0Rm9udChuZXcgamF2YS5hd3QuRm9udChcIkFyaWFsXCIsIDIsIDE4KSk7IC8vIE5PSTE4TlxuICAgICAgICBqTGFiZWwyLnNldFRleHQoXCJDaMOgbyBt4burbmcgYuG6oW4gcXVheSBs4bqhaSFcIik7XG5cbiAgICAgICAgakxhYmVsMy5zZXRGb250KG5ldyBqYXZhLmF3dC5Gb250KFwiQXJpYWxcIiwgMSwgMTQpKTsgLy8gTk9JMThOXG4gICAgICAgIGpMYWJlbDMuc2V0VGV4dChcIlTDqm4gxJHEg25nIG5o4bqtcDpcIik7XG5cbiAgICAgICAgakxhYmVsNC5zZXRGb250KG5ldyBqYXZhLmF3dC5Gb250KFwiQXJpYWxcIiwgMSwgMTQpKTsgLy8gTk9JMThOXG4gICAgICAgIGpMYWJlbDQuc2V0VGV4dChcIk3huq10IGto4bqpdTpcIik7XG5cbiAgICAgICAgdHh0VXNlck5hbWUuc2V0Rm9udChuZXcgamF2YS5hd3QuRm9udChcIkFyaWFsXCIsIDAsIDE0KSk7IC8vIE5PSTE4TlxuXG4gICAgICAgIHR4dFBhc3N3b3JkLnNldEZvbnQobmV3IGphdmEuYXd0LkZvbnQoXCJBcmlhbFwiLCAwLCAxNCkpOyAvLyBOT0kxOE5cblxuICAgICAgICBidG5Mb2dpbi5zZXRGb250KG5ldyBqYXZhLmF3dC5Gb250KFwiQXJpYWxcIiwgMSwgMTYpKTsgLy8gTk9JMThOXG4gICAgICAgIGJ0bkxvZ2luLnNldEljb24obmV3IGphdmF4LnN3aW5nLkltYWdlSWNvbihnZXRDbGFzcygpLmdldFJlc291cmNlKFwiL0ltYWdlcy9lbnRlci5wbmdcIikpKTsgLy8gTk9JMThOXG4gICAgICAgIGJ0bkxvZ2luLnNldFRleHQoXCLEkMSDbmcgbmjhuq1wXCIpO1xuICAgICAgICBidG5Mb2dpbi5zZXRDdXJzb3IobmV3IGphdmEuYXd0LkN1cnNvcihqYXZhLmF3dC5DdXJzb3IuSEFORF9DVVJTT1IpKTtcbiAgICAgICAgYnRuTG9naW4uc2V0SG9yaXpvbnRhbEFsaWdubWVudChqYXZheC5zd2luZy5Td2luZ0NvbnN0YW50cy5MRUZUKTtcbiAgICAgICAgYnRuTG9naW4uYWRkQWN0aW9uTGlzdGVuZXIobmV3IGphdmEuYXd0LmV2ZW50LkFjdGlvbkxpc3RlbmVyKCkge1xuICAgICAgICAgICAgcHVibGljIHZvaWQgYWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkge1xuICAgICAgICAgICAgICAgIGJ0bkxvZ2luQWN0aW9uUGVyZm9ybWVkKGV2dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGJ0bkZvcmdvdFBhc3N3b3JkLnNldEZvbnQobmV3IGphdmEuYXd0LkZvbnQoXCJBcmlhbFwiLCAxLCAxNCkpOyAvLyBOT0kxOE5cbiAgICAgICAgYnRuRm9yZ290UGFzc3dvcmQuc2V0SWNvbihuZXcgamF2YXguc3dpbmcuSW1hZ2VJY29uKGdldENsYXNzKCkuZ2V0UmVzb3VyY2UoXCIvSW1hZ2VzL3Jlc2V0LXBhc3N3b3JkLnBuZ1wiKSkpOyAvLyBOT0kxOE5cbiAgICAgICAgYnRuRm9yZ290UGFzc3dvcmQuc2V0VGV4dChcIlF1w6puIG3huq10IGto4bqpdT9cIik7XG4gICAgICAgIGJ0bkZvcmdvdFBhc3N3b3JkLnNldEN1cnNvcihuZXcgamF2YS5hd3QuQ3Vyc29yKGphdmEuYXd0LkN1cnNvci5IQU5EX0NVUlNPUikpO1xuICAgICAgICBidG5Gb3Jnb3RQYXNzd29yZC5zZXRIb3Jpem9udGFsQWxpZ25tZW50KGphdmF4LnN3aW5nLlN3aW5nQ29uc3RhbnRzLkxFRlQpO1xuICAgICAgICBidG5Gb3Jnb3RQYXNzd29yZC5hZGRBY3Rpb25MaXN0ZW5lcihuZXcgamF2YS5hd3QuZXZlbnQuQWN0aW9uTGlzdGVuZXIoKSB7XG4gICAgICAgICAgICBwdWJsaWMgdm9pZCBhY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7XG4gICAgICAgICAgICAgICAgYnRuRm9yZ290UGFzc3dvcmRBY3Rpb25QZXJmb3JtZWQoZXZ0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgYnRuU2lnbnVwLnNldEZvbnQobmV3IGphdmEuYXd0LkZvbnQoXCJBcmlhbFwiLCAxLCAxNikpOyAvLyBOT0kxOE5cbiAgICAgICAgYnRuU2lnbnVwLnNldEljb24obmV3IGphdmF4LnN3aW5nLkltYWdlSWNvbihnZXRDbGFzcygpLmdldFJlc291cmNlKFwiL0ltYWdlcy9hZGQtdXNlci5wbmdcIikpKTsgLy8gTk9JMThOXG4gICAgICAgIGJ0blNpZ251cC5zZXRUZXh0KFwixJDEg25nIGvDvVwiKTtcbiAgICAgICAgYnRuU2lnbnVwLnNldEN1cnNvcihuZXcgamF2YS5hd3QuQ3Vyc29yKGphdmEuYXd0LkN1cnNvci5IQU5EX0NVUlNPUikpO1xuICAgICAgICBidG5TaWdudXAuc2V0SG9yaXpvbnRhbEFsaWdubWVudChqYXZheC5zd2luZy5Td2luZ0NvbnN0YW50cy5MRUZUKTtcbiAgICAgICAgYnRuU2lnbnVwLmFkZEFjdGlvbkxpc3RlbmVyKG5ldyBqYXZhLmF3dC5ldmVudC5BY3Rpb25MaXN0ZW5lcigpIHtcbiAgICAgICAgICAgIHB1YmxpYyB2b2lkIGFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHtcbiAgICAgICAgICAgICAgICBidG5TaWdudXBBY3Rpb25QZXJmb3JtZWQoZXZ0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgakxhYmVsNS5zZXRJY29uKG5ldyBqYXZheC5zd2luZy5JbWFnZUljb24oZ2V0Q2xhc3MoKS5nZXRSZXNvdXJjZShcIi9JbWFnZXMvYmcyLmpwZ1wiKSkpOyAvLyBOT0kxOE5cbiAgICAgICAgakxhYmVsNS5zZXRUZXh0KFwiakxhYmVsNVwiKTtcblxuICAgICAgICBidG5FeGl0LnNldEZvbnQobmV3IGphdmEuYXd0LkZvbnQoXCJBcmlhbFwiLCAxLCAxNCkpOyAvLyBOT0kxOE5cbiAgICAgICAgYnRuRXhpdC5zZXRJY29uKG5ldyBqYXZheC5zd2luZy5JbWFnZUljb24oZ2V0Q2xhc3MoKS5nZXRSZXNvdXJjZShcIi9JbWFnZXMvbG9nb3V0LnBuZ1wiKSkpOyAvLyBOT0kxOE5cbiAgICAgICAgYnRuRXhpdC5zZXRUZXh0KFwiVGhvw6F0XCIpO1xuICAgICAgICBidG5FeGl0LnNldEN1cnNvcihuZXcgamF2YS5hd3QuQ3Vyc29yKGphdmEuYXd0LkN1cnNvci5IQU5EX0NVUlNPUikpO1xuICAgICAgICBidG5FeGl0LnNldEhvcml6b250YWxBbGlnbm1lbnQoamF2YXguc3dpbmcuU3dpbmdDb25zdGFudHMuTEVGVCk7XG4gICAgICAgIGJ0bkV4aXQuYWRkQWN0aW9uTGlzdGVuZXIobmV3IGphdmEuYXd0LmV2ZW50LkFjdGlvbkxpc3RlbmVyKCkge1xuICAgICAgICAgICAgcHVibGljIHZvaWQgYWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkge1xuICAgICAgICAgICAgICAgIGJ0bkV4aXRBY3Rpb25QZXJmb3JtZWQoZXZ0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4uLi5cbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQoakxhYmVsNClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRHYXAoNzAsIDcwLCA3MClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQodHh0UGFzc3dvcmQsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFLCAyMzAsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFKSlcbiAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChqU2VwYXJhdG9yMiwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUsIDM2OCwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlU2VxdWVudGlhbEdyb3VwKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlUGFyYWxsZWxHcm91cChqYXZheC5zd2luZy5Hcm91cExheW91dC5BbGlnbm1lbnQuVFJBSUxJTkcsIGZhbHNlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQoYnRuRXhpdCwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuREVGQVVMVF9TSVpFLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5ERUZBVUxUX1NJWkUsIFNob3J0Lk1BWF9WQUxVRSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGJ0blNpZ251cCwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuREVGQVVMVF9TSVpFLCAxMjgsIFNob3J0Lk1BWF9WQUxVRSkpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkR2FwKDc2LCA3NiwgNzYpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVBhcmFsbGVsR3JvdXAoamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuQWxpZ25tZW50LkxFQURJTkcpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChidG5Mb2dpbiwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUsIDE2NCwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChidG5Gb3Jnb3RQYXNzd29yZCwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuQWxpZ25tZW50LlRSQUlMSU5HKSkpKVxuICAgICAgICAgICAgICAgIC5hZGRHYXAoNjAsIDYwLCA2MClcbiAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGpMYWJlbDUsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFLCA1MDUsIFNob3J0Lk1BWF9WQUxVRSkpXG4gICAgICAgICk7XG4uLi5cbiAgICAgICAgICAgICAgICAuYWRkR2FwKDEyLCAxMiwgMTIpXG4gICAgICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVQYXJhbGxlbEdyb3VwKGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LkFsaWdubWVudC5MRUFESU5HKVxuICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGJ0bkZvcmdvdFBhc3N3b3JkKVxuICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGJ0bkV4aXQpKSlcbiAgICAgICAgICAgIC5hZGRDb21wb25lbnQoakxhYmVsNSwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUsIDYzMCwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUpXG4gICAgICAgICk7XG5cbiAgICAgICAgcGFjaygpO1xuICAgIH0vLyA8L2VkaXRvci1mb2xkPi8vR0VOLUVORDppbml0Q29tcG9uZW50c1xuXG4gICAgcHJpdmF0ZSB2b2lkIGJ0bkxvZ2luQWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkxvZ2luQWN0aW9uUGVyZm9ybWVkXG4gICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxuICAgICAgICBpZih2YWxpZGF0ZUZpZWxkcygpKSB7XG4gICAgICAgICAgICB0cnl7XG4gICAgICAgICAgICAgICAgU3RyaW5nIHVzZXJuYW1lID0gdHh0VXNlck5hbWUuZ2V0VGV4dCgpLnRyaW0oKTtcbiAgICAgICAgICAgICAgICBTdHJpbmcgcGFzc3dvcmQgPSB0eHRQYXNzd29yZC5nZXRUZXh0KCkudHJpbSgpO1xuICAgICAgICBcbiAgICAgICAgICAgICAgICBVc2VyIHVzZXIgPSBudWxsO1xuICAgICAgICAgICAgICAgIGJvb2xlYW4gaXNTdWNjZXNzID0gVXNlckRBTy5sb2dpbih1c2VybmFtZSwgcGFzc3dvcmQpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmKGlzU3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyh0aGlzLCBcIsSQxINuZyBuaOG6rXAgdGjDoG5oIGPDtG5nIVwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLklORk9STUFUSU9OX01FU1NBR0UpO1xuLy8gICAgICAgICAgICAgICAgICAgIG5ldyBNYWluRnJhbWUoKS5zZXRWaXNpYmxlKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyh0aGlzLCBcIlNhaSB0w6puIMSRxINuZyBuaOG6rXAgaG/hurdjIG3huq10IGto4bqpdS5cIiwgXCJM4buXaVwiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoKEV4Y2VwdGlvbiBleCkge1xuICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwiTOG7l2k6IFwiICsgZXguZ2V0TWVzc2FnZSgpLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBcbiAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5Mb2dpbkFjdGlvblBlcmZvcm1lZFxuXG4gICAgcHJpdmF0ZSB2b2lkIGJ0bkZvcmdvdFBhc3N3b3JkQWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkZvcmdvdFBhc3N3b3JkQWN0aW9uUGVyZm9ybWVkXG4gICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxuICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0bkZvcmdvdFBhc3N3b3JkQWN0aW9uUGVyZm9ybWVkXG5cbiAgICBwcml2YXRlIHZvaWQgYnRuRXhpdEFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5FeGl0QWN0aW9uUGVyZm9ybWVkXG4gICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxuICAgICAgICBpbnQgcmVzdWx0ID0gSk9wdGlvblBhbmUuc2hvd0NvbmZpcm1EaWFsb2cobnVsbCwgXCJC4bqhbiBjw7MgY2jhuq9jIGNo4bqvbiBtdeG7kW4gdGhvw6F0IGtow7RuZz9cIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5ZRVNfTk9fT1BUSU9OLCBKT3B0aW9uUGFuZS5RVUVTVElPTl9NRVNTQUdFKTtcbiAgICBcbiAgICAgICAgaWYgKHJlc3VsdCA9PSBKT3B0aW9uUGFuZS5ZRVNfT1BUSU9OKSB7XG4gICAgICAgICAgICBTeXN0ZW0uZXhpdCgwKTtcbiAgICAgICAgfVxuICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0bkV4aXRBY3Rpb25QZXJmb3JtZWRcblxuICAgIHByaXZhdGUgdm9pZCBidG5TaWdudXBBY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuU2lnbnVwQWN0aW9uUGVyZm9ybWVkXG4gICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxuICAgICAgICBzZXRWaXNpYmxlKGZhbHNlKTtcbiAgICAgICAgbmV3IFNpZ25VcCgpLnNldFZpc2libGUodHJ1ZSk7XG4gICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuU2lnbnVwQWN0aW9uUGVyZm9ybWVkXG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gYXJncyB0aGUgY29tbWFuZCBsaW5lIGFyZ3VtZW50c1xuICAgICAqL1xuICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBtYWluKFN0cmluZyBhcmdzW10pIHtcbiAgICAgICAgLyogU2V0IHRoZSBOaW1idXMgbG9vayBhbmQgZmVlbCAqL1xuICAgICAgICAvLzxlZGl0b3ItZm9sZCBkZWZhdWx0c3RhdGU9XCJjb2xsYXBzZWRcIiBkZXNjPVwiIExvb2sgYW5kIGZlZWwgc2V0dGluZyBjb2RlIChvcHRpb25hbCkgXCI+XG4gICAgICAgIC8qIElmIE5pbWJ1cyAoaW50cm9kdWNlZCBpbiBKYXZhIFNFIDYpIGlzIG5vdCBhdmFpbGFibGUsIHN0YXkgd2l0aCB0aGUgZGVmYXVsdCBsb29rIGFuZCBmZWVsLlxuICAgICAgICAgKiBGb3IgZGV0YWlscyBzZWUgaHR0cDovL2Rvd25sb2FkLm9yYWNsZS5jb20vamF2YXNlL3R1dG9yaWFsL3Vpc3dpbmcvbG9va2FuZGZlZWwvcGxhZi5odG1sIFxuICAgICAgICAgKi9cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGZvciAoamF2YXguc3dpbmcuVUlNYW5hZ2VyLkxvb2tBbmRGZWVsSW5mbyBpbmZvIDogamF2YXguc3dpbmcuVUlNYW5hZ2VyLmdldEluc3RhbGxlZExvb2tBbmRGZWVscygpKSB7XG4gICAgICAgICAgICAgICAgaWYgKFwiTmltYnVzXCIuZXF1YWxzKGluZm8uZ2V0TmFtZSgpKSkge1xuICAgICAgICAgICAgICAgICAgICBqYXZheC5zd2luZy5VSU1hbmFnZXIuc2V0TG9va0FuZEZlZWwoaW5mby5nZXRDbGFzc05hbWUoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbi4uLlxuXG4gICAgLy8gVmFyaWFibGVzIGRlY2xhcmF0aW9uIC0gZG8gbm90IG1vZGlmeS8vR0VOLUJFR0lOOnZhcmlhYmxlc1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkJ1dHRvbiBidG5FeGl0O1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkJ1dHRvbiBidG5Gb3Jnb3RQYXNzd29yZDtcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpCdXR0b24gYnRuTG9naW47XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KQnV0dG9uIGJ0blNpZ251cDtcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpMYWJlbCBqTGFiZWwxO1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkxhYmVsIGpMYWJlbDI7XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KTGFiZWwgakxhYmVsMztcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpMYWJlbCBqTGFiZWw0O1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkxhYmVsIGpMYWJlbDU7XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KU2VwYXJhdG9yIGpTZXBhcmF0b3IxO1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSlNlcGFyYXRvciBqU2VwYXJhdG9yMjtcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpQYXNzd29yZEZpZWxkIHR4dFBhc3N3b3JkO1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSlRleHRGaWVsZCB0eHRVc2VyTmFtZTtcbiAgICAvLyBFbmQgb2YgdmFyaWFibGVzIGRlY2xhcmF0aW9uLy9HRU4tRU5EOnZhcmlhYmxlc1xufVxuLi4uXG4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1XzAxNGVtU0ExUnl0cWV4Zmo5ZkdFMzdOdiJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkU6L0hvY1RhcC8wMl9KQVZBLzAzX1Byb2plY3QvSW50ZXJuZXQgTWFuZ2VtZW50IFN5c3RlbSIsImZvbGRlclJvb3QiOiJFOi9Ib2NUYXAvMDJfSkFWQS8wM19Qcm9qZWN0L0ludGVybmV0IE1hbmdlbWVudCBTeXN0ZW0ifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJ0aW1lc3RhbXAiOiIyMDI1LTA1LTEzVDAxOjU4OjMxLjQwMFoiLCJyZXNwb25zZV90ZXh0IjoiTm93IEkgdW5kZXJzdGFuZCB0aGUgdGFzay4gSSBuZWVkIHRvOlxuXG4xLiBNb2RpZnkgdGhlIEZvcmdvdFBhc3N3b3JkIGNsYXNzIHRvIGJlIGEgSkRpYWxvZyBpbnN0ZWFkIG9mIGEgSkZyYW1lIHNvIGl0IGNhbiBiZSBkaXNwbGF5ZWQgYXMgYSBtb2RhbCBwb3B1cFxuMi4gVXBkYXRlIHRoZSBMb2dpbiBjbGFzcyB0byBvcGVuIEZvcmdvdFBhc3N3b3JkIGFzIGEgZGlhbG9nIHdoZW4gdGhlIGZvcmdvdCBwYXNzd29yZCBidXR0b24gaXMgY2xpY2tlZFxuXG5MZXQncyBpbXBsZW1lbnQgdGhlc2UgY2hhbmdlczpcblxuIyMgU3RlcCAxOiBDb252ZXJ0IEZvcmdvdFBhc3N3b3JkIGZyb20gSkZyYW1lIHRvIEpEaWFsb2dcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiIxYmRhODNkMy1kZWI2LTQ5NWQtYTEwMy0yNGJiNzM3OGQ3MjIiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1XzAxSjRIMnZVcVBKVmRraXc2TjZHRHl6QyIsInRvb2xfbmFtZSI6InN0ci1yZXBsYWNlLWVkaXRvciIsImlucHV0X2pzb24iOiJ7XCJjb21tYW5kXCI6IFwic3RyX3JlcGxhY2VcIiwgXCJwYXRoXCI6IFwic3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vRm9yZ290UGFzc3dvcmQuamF2YVwiLCBcInN0cl9yZXBsYWNlX2VudHJpZXNcIjogW3tcIm9sZF9zdHJcIjogXCIgICAgLyoqXFxuICAgICAqIENyZWF0ZXMgbmV3IGZvcm0gRm9yZ290UGFzc3dvcmRcXG4gICAgICovXFxuICAgIHB1YmxpYyBGb3Jnb3RQYXNzd29yZCgpIHtcXG4gICAgICAgIGluaXRDb21wb25lbnRzKCk7XFxuXFxuICAgICAgICBidG5FeGl0LnNldFZpc2libGUoZmFsc2UpO1xcbiAgICAgICAgYnRuQ2hhbmdlLnNldFZpc2libGUoZmFsc2UpO1xcbiAgICAgICAgbGJOZXdQYXNzd29yZC5zZXRWaXNpYmxlKGZhbHNlKTtcXG4gICAgICAgIGxiQ29uZmlybVBhc3N3b3JkLnNldFZpc2libGUoZmFsc2UpO1xcbiAgICAgICAgdHh0UGFzc3dvcmQuc2V0VmlzaWJsZShmYWxzZSk7XFxuICAgICAgICB0eHRDb25maXJtUGFzc3dvcmQuc2V0VmlzaWJsZShmYWxzZSk7XFxuICAgIH1cIiwgXCJuZXdfc3RyXCI6IFwiICAgIC8qKlxcbiAgICAgKiBDcmVhdGVzIG5ldyBmb3JtIEZvcmdvdFBhc3N3b3JkXFxuICAgICAqL1xcbiAgICBwdWJsaWMgRm9yZ290UGFzc3dvcmQoRnJhbWUgcGFyZW50LCBib29sZWFuIG1vZGFsKSB7XFxuICAgICAgICBzdXBlcihwYXJlbnQsIG1vZGFsKTtcXG4gICAgICAgIGluaXRDb21wb25lbnRzKCk7XFxuICAgICAgICBcXG4gICAgICAgIC8vIFNldCBkaWFsb2cgcHJvcGVydGllc1xcbiAgICAgICAgc2V0VGl0bGUoXFxcIlF1XFx1MDBlYW4gbVxcdTFlYWR0IGtoXFx1MWVhOXVcXFwiKTtcXG4gICAgICAgIHNldExvY2F0aW9uUmVsYXRpdmVUbyhwYXJlbnQpO1xcbiAgICAgICAgXFxuICAgICAgICBidG5FeGl0LnNldFZpc2libGUoZmFsc2UpO1xcbiAgICAgICAgYnRuQ2hhbmdlLnNldFZpc2libGUoZmFsc2UpO1xcbiAgICAgICAgbGJOZXdQYXNzd29yZC5zZXRWaXNpYmxlKGZhbHNlKTtcXG4gICAgICAgIGxiQ29uZmlybVBhc3N3b3JkLnNldFZpc2libGUoZmFsc2UpO1xcbiAgICAgICAgdHh0UGFzc3dvcmQuc2V0VmlzaWJsZShmYWxzZSk7XFxuICAgICAgICB0eHRDb25maXJtUGFzc3dvcmQuc2V0VmlzaWJsZShmYWxzZSk7XFxuICAgIH1cIiwgXCJvbGRfc3RyX3N0YXJ0X2xpbmVfbnVtYmVyXCI6IDIwLCBcIm9sZF9zdHJfZW5kX2xpbmVfbnVtYmVyXCI6IDMyfV19IiwibWNwX3NlcnZlcl9uYW1lIjoiIiwibWNwX3Rvb2xfbmFtZSI6IiJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiTm93IGxldCdzIHVwZGF0ZSB0aGUgY29uc3RydWN0b3IgdG8gYWNjZXB0IGEgcGFyZW50IGZyYW1lIGFuZCBtYWtlIGl0IG1vZGFsOlxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiU3VjY2Vzc2Z1bGx5IGVkaXRlZCB0aGUgZmlsZSBzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9Gb3Jnb3RQYXNzd29yZC5qYXZhLlxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZSBmb3IgZW50cnkgd2l0aCBpbmRleCBbMF06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgICAgMVx0LypcbiAgICAgMlx0ICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9MaWNlbnNlcy9saWNlbnNlLWRlZmF1bHQudHh0IHRvIGNoYW5nZSB0aGlzIGxpY2Vuc2VcbiAgICAgM1x0ICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9HVUlGb3Jtcy9KRnJhbWUuamF2YSB0byBlZGl0IHRoaXMgdGVtcGxhdGVcbiAgICAgNFx0ICovXG4gICAgIDVcdHBhY2thZ2UgaW50ZXJuZXQubWFuZ2VtZW50LnN5c3RlbTtcbiAgICAgNlx0XG4gICAgIDdcdGltcG9ydCBEQU8uU3Vic2NyaWJlckRBTztcbiAgICAgOFx0aW1wb3J0IE1vZGVsLlN1YnNjcmliZXI7XG4gICAgIDlcdGltcG9ydCBqYXZheC5zd2luZy5KT3B0aW9uUGFuZTtcbiAgICAxMFx0aW1wb3J0IGludGVybmV0Lm1hbmdlbWVudC5zeXN0ZW0uTG9naW47XG4gICAgMTFcdGltcG9ydCBqYXZhLmF3dC5GcmFtZTtcbiAgICAxMlx0XG4gICAgMTNcdC8qKlxuICAgIDE0XHQgKlxuICAgIDE1XHQgKiBAYXV0aG9yIE5nb2MgVGhhb1xuICAgIDE2XHQgKi9cbiAgICAxN1x0cHVibGljIGNsYXNzIEZvcmdvdFBhc3N3b3JkIGV4dGVuZHMgamF2YXguc3dpbmcuSkRpYWxvZyB7XG4gICAgMThcdCAgICBwcml2YXRlIFN1YnNjcmliZXIgY3VycmVudFN1YnNjcmliZXIgPSBudWxsO1xuICAgIDE5XHQgICAgcHVibGljIFN0cmluZyBwaG9uZVBhdHRlcm4gPSBcIl5bMC05XSokXCI7XG4gICAgMjBcdFxuICAgIDIxXHQgICAgLyoqXG5cblJldmlldyB0aGUgY2hhbmdlcyBhbmQgbWFrZSBzdXJlIHRoZXkgYXJlIGFzIGV4cGVjdGVkIChjb3JyZWN0IGluZGVudGF0aW9uLCBubyBkdXBsaWNhdGUgbGluZXMsIGV0YykuXG5FZGl0IHRoZSBmaWxlIGFnYWluIGlmIG5lY2Vzc2FyeS5cbiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfMDFKQTVuU3RFdHFhVXluRllnWVVqSzQyIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiRTovSG9jVGFwLzAyX0pBVkEvMDNfUHJvamVjdC9JbnRlcm5ldCBNYW5nZW1lbnQgU3lzdGVtIiwiZm9sZGVyUm9vdCI6IkU6L0hvY1RhcC8wMl9KQVZBLzAzX1Byb2plY3QvSW50ZXJuZXQgTWFuZ2VtZW50IFN5c3RlbSJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInRpbWVzdGFtcCI6IjIwMjUtMDUtMTNUMDE6NTg6NDUuODYxWiIsInJlc3BvbnNlX3RleHQiOiJOb3cgbGV0J3MgdXBkYXRlIHRoZSBjb25zdHJ1Y3RvciB0byBhY2NlcHQgYSBwYXJlbnQgZnJhbWUgYW5kIG1ha2UgaXQgbW9kYWw6XG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiYTI0MjkxODYtN2QxYy00MGQxLWE5ZjUtZTc4MjdiODk2YzVjIiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV8wMUFpcUZqbXdtU2VTb0hKbXFNekVlVm8iLCJ0b29sX25hbWUiOiJzdHItcmVwbGFjZS1lZGl0b3IiLCJpbnB1dF9qc29uIjoie1wiY29tbWFuZFwiOiBcInN0cl9yZXBsYWNlXCIsIFwicGF0aFwiOiBcInNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL0ZvcmdvdFBhc3N3b3JkLmphdmFcIiwgXCJzdHJfcmVwbGFjZV9lbnRyaWVzXCI6IFt7XCJvbGRfc3RyXCI6IFwiICAgIHByaXZhdGUgdm9pZCBidG5FeGl0QWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkV4aXRBY3Rpb25QZXJmb3JtZWRcXG4gICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxcbiAgICAgICAgaW50IHJlc3VsdCA9IEpPcHRpb25QYW5lLnNob3dDb25maXJtRGlhbG9nKG51bGwsIFxcXCJCXFx1MWVhMW4gY1xcdTAwZjMgY2hcXHUxZWFmYyBjaFxcdTFlYWZuIG11XFx1MWVkMW4gdGhvXFx1MDBlMXQga2hcXHUwMGY0bmc/XFxcIiwgXFxcIlRoXFx1MDBmNG5nIGJcXHUwMGUxb1xcXCIsIEpPcHRpb25QYW5lLllFU19OT19PUFRJT04sIEpPcHRpb25QYW5lLlFVRVNUSU9OX01FU1NBR0UpO1xcblxcbiAgICAgICAgaWYgKHJlc3VsdCA9PSBKT3B0aW9uUGFuZS5ZRVNfT1BUSU9OKSB7XFxuICAgICAgICAgICAgbmV3IExvZ2luKCkuc2V0VmlzaWJsZSh0cnVlKTtcXG4gICAgICAgICAgICB0aGlzLmRpc3Bvc2UoKTtcXG4gICAgICAgIH1cXG4gICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuRXhpdEFjdGlvblBlcmZvcm1lZFwiLCBcIm5ld19zdHJcIjogXCIgICAgcHJpdmF0ZSB2b2lkIGJ0bkV4aXRBY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuRXhpdEFjdGlvblBlcmZvcm1lZFxcbiAgICAgICAgLy8gVE9ETyBhZGQgeW91ciBoYW5kbGluZyBjb2RlIGhlcmU6XFxuICAgICAgICBpbnQgcmVzdWx0ID0gSk9wdGlvblBhbmUuc2hvd0NvbmZpcm1EaWFsb2codGhpcywgXFxcIkJcXHUxZWExbiBjXFx1MDBmMyBjaFxcdTFlYWZjIGNoXFx1MWVhZm4gbXVcXHUxZWQxbiB0aG9cXHUwMGUxdCBraFxcdTAwZjRuZz9cXFwiLCBcXFwiVGhcXHUwMGY0bmcgYlxcdTAwZTFvXFxcIiwgSk9wdGlvblBhbmUuWUVTX05PX09QVElPTiwgSk9wdGlvblBhbmUuUVVFU1RJT05fTUVTU0FHRSk7XFxuXFxuICAgICAgICBpZiAocmVzdWx0ID09IEpPcHRpb25QYW5lLllFU19PUFRJT04pIHtcXG4gICAgICAgICAgICB0aGlzLmRpc3Bvc2UoKTtcXG4gICAgICAgIH1cXG4gICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuRXhpdEFjdGlvblBlcmZvcm1lZFwiLCBcIm9sZF9zdHJfc3RhcnRfbGluZV9udW1iZXJcIjogMjE2LCBcIm9sZF9zdHJfZW5kX2xpbmVfbnVtYmVyXCI6IDIyNH1dfSIsIm1jcF9zZXJ2ZXJfbmFtZSI6IiIsIm1jcF90b29sX25hbWUiOiIifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6Ik5vdyBsZXQncyB1cGRhdGUgdGhlIEV4aXQgYnV0dG9uIGFjdGlvbiB0byBjbG9zZSB0aGUgZGlhbG9nIGluc3RlYWQgb2Ygb3BlbmluZyBhIG5ldyBMb2dpbiB3aW5kb3c6XG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJTdWNjZXNzZnVsbHkgZWRpdGVkIHRoZSBmaWxlIHNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL0ZvcmdvdFBhc3N3b3JkLmphdmEuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlIGZvciBlbnRyeSB3aXRoIGluZGV4IFswXTpcblJlcGxhY2VtZW50IHN1Y2Nlc3NmdWwuXG5FZGl0ZWQgc2VjdGlvbiBhZnRlciBJREUgYXV0by1mb3JtYXR0aW5nIHdhcyBhcHBsaWVkOlxuICAgIDE3XHRwdWJsaWMgY2xhc3MgRm9yZ290UGFzc3dvcmQgZXh0ZW5kcyBqYXZheC5zd2luZy5KRGlhbG9nIHtcbiAgICAxOFx0ICAgIHByaXZhdGUgU3Vic2NyaWJlciBjdXJyZW50U3Vic2NyaWJlciA9IG51bGw7XG4gICAgMTlcdCAgICBwdWJsaWMgU3RyaW5nIHBob25lUGF0dGVybiA9IFwiXlswLTldKiRcIjtcbiAgICAyMFx0XG4gICAgMjFcdCAgICAvKipcbiAgICAyMlx0ICAgICAqIENyZWF0ZXMgbmV3IGZvcm0gRm9yZ290UGFzc3dvcmRcbiAgICAyM1x0ICAgICAqL1xuICAgIDI0XHQgICAgcHVibGljIEZvcmdvdFBhc3N3b3JkKEZyYW1lIHBhcmVudCwgYm9vbGVhbiBtb2RhbCkge1xuICAgIDI1XHQgICAgICAgIHN1cGVyKHBhcmVudCwgbW9kYWwpO1xuICAgIDI2XHQgICAgICAgIGluaXRDb21wb25lbnRzKCk7XG4gICAgMjdcdFxuICAgIDI4XHQgICAgICAgIC8vIFNldCBkaWFsb2cgcHJvcGVydGllc1xuICAgIDI5XHQgICAgICAgIHNldFRpdGxlKFwiUXXDqm4gbeG6rXQga2jhuql1XCIpO1xuICAgIDMwXHQgICAgICAgIHNldExvY2F0aW9uUmVsYXRpdmVUbyhwYXJlbnQpO1xuICAgIDMxXHRcbiAgICAzMlx0ICAgICAgICBidG5FeGl0LnNldFZpc2libGUoZmFsc2UpO1xuICAgIDMzXHQgICAgICAgIGJ0bkNoYW5nZS5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICAzNFx0ICAgICAgICBsYk5ld1Bhc3N3b3JkLnNldFZpc2libGUoZmFsc2UpO1xuICAgIDM1XHQgICAgICAgIGxiQ29uZmlybVBhc3N3b3JkLnNldFZpc2libGUoZmFsc2UpO1xuICAgIDM2XHQgICAgICAgIHR4dFBhc3N3b3JkLnNldFZpc2libGUoZmFsc2UpO1xuICAgIDM3XHQgICAgICAgIHR4dENvbmZpcm1QYXNzd29yZC5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICAzOFx0ICAgIH1cbiAgICAzOVx0XG4gICAgNDBcdCAgICBwdWJsaWMgdm9pZCBjbGVhcigpe1xuICAgIDQxXHQgICAgICAgIHR4dFBhc3N3b3JkLnNldFRleHQoXCJcIik7XG4gICAgNDJcdCAgICAgICAgdHh0UGhvbmUuc2V0VGV4dChcIlwiKTtcblxuUmV2aWV3IHRoZSBjaGFuZ2VzIGFuZCBtYWtlIHN1cmUgdGhleSBhcmUgYXMgZXhwZWN0ZWQgKGNvcnJlY3QgaW5kZW50YXRpb24sIG5vIGR1cGxpY2F0ZSBsaW5lcywgZXRjKS5cbkVkaXQgdGhlIGZpbGUgYWdhaW4gaWYgbmVjZXNzYXJ5LlxuIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV8wMUo0SDJ2VXFQSlZka2l3Nk42R0R5ekMifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJFOi9Ib2NUYXAvMDJfSkFWQS8wM19Qcm9qZWN0L0ludGVybmV0IE1hbmdlbWVudCBTeXN0ZW0iLCJmb2xkZXJSb290IjoiRTovSG9jVGFwLzAyX0pBVkEvMDNfUHJvamVjdC9JbnRlcm5ldCBNYW5nZW1lbnQgU3lzdGVtIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwidGltZXN0YW1wIjoiMjAyNS0wNS0xM1QwMTo1ODo1NS4xNTJaIiwicmVzcG9uc2VfdGV4dCI6Ik5vdyBsZXQncyB1cGRhdGUgdGhlIEV4aXQgYnV0dG9uIGFjdGlvbiB0byBjbG9zZSB0aGUgZGlhbG9nIGluc3RlYWQgb2Ygb3BlbmluZyBhIG5ldyBMb2dpbiB3aW5kb3c6XG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiOTg4MjEwMTQtMjYwMy00ODI0LWFlNDMtOTczYTBiYmI1YjMxIiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV8wMUNoeVRpYjVBTU5EM3BZWjR3Z2huWU0iLCJ0b29sX25hbWUiOiJzdHItcmVwbGFjZS1lZGl0b3IiLCJpbnB1dF9qc29uIjoie1wiY29tbWFuZFwiOiBcInN0cl9yZXBsYWNlXCIsIFwicGF0aFwiOiBcInNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL0ZvcmdvdFBhc3N3b3JkLmphdmFcIiwgXCJzdHJfcmVwbGFjZV9lbnRyaWVzXCI6IFt7XCJvbGRfc3RyXCI6IFwiICAgIHByaXZhdGUgdm9pZCBidG5DaGFuZ2VBY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuQ2hhbmdlQWN0aW9uUGVyZm9ybWVkXFxuICAgICAgICAvLyBUT0RPIGFkZCB5b3VyIGhhbmRsaW5nIGNvZGUgaGVyZTpcXG4gICAgICAgIGlmKHZhbGlkYXRlRmllbGRzKCkgJiYgY3VycmVudFN1YnNjcmliZXIgIT0gbnVsbCl7XFxuICAgICAgICAgICAgU3RyaW5nIG5ld1Bhc3N3b3JkID0gdHh0UGFzc3dvcmQuZ2V0VGV4dCgpO1xcblxcbiAgICAgICAgICAgIGJvb2xlYW4gaXNTdWNjZXNzID0gU3Vic2NyaWJlckRBTy51cGRhdGVQYXNzd29yZChjdXJyZW50U3Vic2NyaWJlci5nZXRVc2VyX2lkKCksIG5ld1Bhc3N3b3JkKTtcXG5cXG4gICAgICAgICAgICBpZihpc1N1Y2Nlc3MpIHtcXG4gICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXFxcIlxcdTAxMTBcXHUxZWQ1aSBtXFx1MWVhZHQga2hcXHUxZWE5dSB0aFxcdTAwZTBuaCBjXFx1MDBmNG5nISBWdWkgbFxcdTAwZjJuZyBcXHUwMTExXFx1MDEwM25nIG5oXFx1MWVhZHAgbFxcdTFlYTFpIVxcXCIsIFxcXCJUaFxcdTAwZjRuZyBiXFx1MDBlMW9cXFwiLCBKT3B0aW9uUGFuZS5JTkZPUk1BVElPTl9NRVNTQUdFKTtcXG4gICAgICAgICAgICAgICAgbmV3IExvZ2luKCkuc2V0VmlzaWJsZSh0cnVlKTtcXG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwb3NlKCk7XFxuICAgICAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXFxcIlxcdTAxMTBcXHUxZWQ1aSBtXFx1MWVhZHQga2hcXHUxZWE5dSB0aFxcdTFlYTV0IGJcXHUxZWExaSEgVnVpIGxcXHUwMGYybmcgdGhcXHUxZWVkIGxcXHUxZWExaSBzYXUhXFxcIiwgXFxcIlRoXFx1MDBmNG5nIGJcXHUwMGUxb1xcXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgIH1cXG4gICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuQ2hhbmdlQWN0aW9uUGVyZm9ybWVkXCIsIFwibmV3X3N0clwiOiBcIiAgICBwcml2YXRlIHZvaWQgYnRuQ2hhbmdlQWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkNoYW5nZUFjdGlvblBlcmZvcm1lZFxcbiAgICAgICAgLy8gVE9ETyBhZGQgeW91ciBoYW5kbGluZyBjb2RlIGhlcmU6XFxuICAgICAgICBpZih2YWxpZGF0ZUZpZWxkcygpICYmIGN1cnJlbnRTdWJzY3JpYmVyICE9IG51bGwpe1xcbiAgICAgICAgICAgIFN0cmluZyBuZXdQYXNzd29yZCA9IHR4dFBhc3N3b3JkLmdldFRleHQoKTtcXG5cXG4gICAgICAgICAgICBib29sZWFuIGlzU3VjY2VzcyA9IFN1YnNjcmliZXJEQU8udXBkYXRlUGFzc3dvcmQoY3VycmVudFN1YnNjcmliZXIuZ2V0VXNlcl9pZCgpLCBuZXdQYXNzd29yZCk7XFxuXFxuICAgICAgICAgICAgaWYoaXNTdWNjZXNzKSB7XFxuICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKHRoaXMsIFxcXCJcXHUwMTEwXFx1MWVkNWkgbVxcdTFlYWR0IGtoXFx1MWVhOXUgdGhcXHUwMGUwbmggY1xcdTAwZjRuZyEgVnVpIGxcXHUwMGYybmcgXFx1MDExMVxcdTAxMDNuZyBuaFxcdTFlYWRwIGxcXHUxZWExaSFcXFwiLCBcXFwiVGhcXHUwMGY0bmcgYlxcdTAwZTFvXFxcIiwgSk9wdGlvblBhbmUuSU5GT1JNQVRJT05fTUVTU0FHRSk7XFxuICAgICAgICAgICAgICAgIHRoaXMuZGlzcG9zZSgpO1xcbiAgICAgICAgICAgIH0gZWxzZSB7XFxuICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKHRoaXMsIFxcXCJcXHUwMTEwXFx1MWVkNWkgbVxcdTFlYWR0IGtoXFx1MWVhOXUgdGhcXHUxZWE1dCBiXFx1MWVhMWkhIFZ1aSBsXFx1MDBmMm5nIHRoXFx1MWVlZCBsXFx1MWVhMWkgc2F1IVxcXCIsIFxcXCJUaFxcdTAwZjRuZyBiXFx1MDBlMW9cXFwiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcXG4gICAgICAgICAgICB9XFxuICAgICAgICB9XFxuICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0bkNoYW5nZUFjdGlvblBlcmZvcm1lZFwiLCBcIm9sZF9zdHJfc3RhcnRfbGluZV9udW1iZXJcIjogMjUwLCBcIm9sZF9zdHJfZW5kX2xpbmVfbnVtYmVyXCI6IDI2NX1dfSIsIm1jcF9zZXJ2ZXJfbmFtZSI6IiIsIm1jcF90b29sX25hbWUiOiIifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6Ik5vdyBsZXQncyB1cGRhdGUgdGhlIENoYW5nZSBQYXNzd29yZCBidXR0b24gYWN0aW9uIHRvIGNsb3NlIHRoZSBkaWFsb2cgaW5zdGVhZCBvZiBvcGVuaW5nIGEgbmV3IExvZ2luIHdpbmRvdzpcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IlN1Y2Nlc3NmdWxseSBlZGl0ZWQgdGhlIGZpbGUgc3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vRm9yZ290UGFzc3dvcmQuamF2YS5cblJlc3VsdCBmb3Igc3RyX3JlcGxhY2UgZm9yIGVudHJ5IHdpdGggaW5kZXggWzBdOlxuUmVwbGFjZW1lbnQgc3VjY2Vzc2Z1bC5cbkVkaXRlZCBzZWN0aW9uIGFmdGVyIElERSBhdXRvLWZvcm1hdHRpbmcgd2FzIGFwcGxpZWQ6XG4gICAyMThcdFxuICAgMjE5XHQgICAgICAgIHBhY2soKTtcbiAgIDIyMFx0ICAgIH0vLyA8L2VkaXRvci1mb2xkPi8vR0VOLUVORDppbml0Q29tcG9uZW50c1xuICAgMjIxXHRcbiAgIDIyMlx0ICAgIHByaXZhdGUgdm9pZCBidG5FeGl0QWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkV4aXRBY3Rpb25QZXJmb3JtZWRcbiAgIDIyM1x0ICAgICAgICAvLyBUT0RPIGFkZCB5b3VyIGhhbmRsaW5nIGNvZGUgaGVyZTpcbiAgIDIyNFx0ICAgICAgICBpbnQgcmVzdWx0ID0gSk9wdGlvblBhbmUuc2hvd0NvbmZpcm1EaWFsb2codGhpcywgXCJC4bqhbiBjw7MgY2jhuq9jIGNo4bqvbiBtdeG7kW4gdGhvw6F0IGtow7RuZz9cIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5ZRVNfTk9fT1BUSU9OLCBKT3B0aW9uUGFuZS5RVUVTVElPTl9NRVNTQUdFKTtcbiAgIDIyNVx0XG4gICAyMjZcdCAgICAgICAgaWYgKHJlc3VsdCA9PSBKT3B0aW9uUGFuZS5ZRVNfT1BUSU9OKSB7XG4gICAyMjdcdCAgICAgICAgICAgIHRoaXMuZGlzcG9zZSgpO1xuICAgMjI4XHQgICAgICAgIH1cbiAgIDIyOVx0ICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0bkV4aXRBY3Rpb25QZXJmb3JtZWRcbiAgIDIzMFx0XG4gICAyMzFcdCAgICBwcml2YXRlIHZvaWQgYnRuQ2hlY2tBY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuQ2hlY2tBY3Rpb25QZXJmb3JtZWRcbiAgIDIzMlx0ICAgICAgICAvLyBUT0RPIGFkZCB5b3VyIGhhbmRsaW5nIGNvZGUgaGVyZTpcbiAgIDIzM1x0ICAgICAgICBpZih2YWxpZGF0ZVBob25lKCkpIHtcblxuUmV2aWV3IHRoZSBjaGFuZ2VzIGFuZCBtYWtlIHN1cmUgdGhleSBhcmUgYXMgZXhwZWN0ZWQgKGNvcnJlY3QgaW5kZW50YXRpb24sIG5vIGR1cGxpY2F0ZSBsaW5lcywgZXRjKS5cbkVkaXQgdGhlIGZpbGUgYWdhaW4gaWYgbmVjZXNzYXJ5LlxuIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV8wMUFpcUZqbXdtU2VTb0hKbXFNekVlVm8ifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJFOi9Ib2NUYXAvMDJfSkFWQS8wM19Qcm9qZWN0L0ludGVybmV0IE1hbmdlbWVudCBTeXN0ZW0iLCJmb2xkZXJSb290IjoiRTovSG9jVGFwLzAyX0pBVkEvMDNfUHJvamVjdC9JbnRlcm5ldCBNYW5nZW1lbnQgU3lzdGVtIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwidGltZXN0YW1wIjoiMjAyNS0wNS0xM1QwMTo1OTowNC42NjlaIiwicmVzcG9uc2VfdGV4dCI6Ik5vdyBsZXQncyB1cGRhdGUgdGhlIENoYW5nZSBQYXNzd29yZCBidXR0b24gYWN0aW9uIHRvIGNsb3NlIHRoZSBkaWFsb2cgaW5zdGVhZCBvZiBvcGVuaW5nIGEgbmV3IExvZ2luIHdpbmRvdzpcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiIwNWMxZWNmZS0yYmZiLTQ0YWYtOGQ5NC00MzAyNzdiOTAwZDQiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1XzAxTm5OQnJKdjRrdFdUbnptcmFhcmVSSCIsInRvb2xfbmFtZSI6InN0ci1yZXBsYWNlLWVkaXRvciIsImlucHV0X2pzb24iOiJ7XCJjb21tYW5kXCI6IFwidmlld1wiLCBcInBhdGhcIjogXCJzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9Gb3Jnb3RQYXNzd29yZC5qYXZhXCIsIFwidmlld19yYW5nZVwiOiBbMjUwLCAyNzBdfSIsIm1jcF9zZXJ2ZXJfbmFtZSI6IiIsIm1jcF90b29sX25hbWUiOiIifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IkxldCBtZSB0cnkgYWdhaW4gd2l0aCB0aGUgY29ycmVjdCBsaW5lIG51bWJlcnM6XG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJGYWlsZWQgdG8gZWRpdCB0aGUgZmlsZSBzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9Gb3Jnb3RQYXNzd29yZC5qYXZhLiBTZWUgYmVsb3cgZm9yIGRldGFpbHMuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlIGZvciBlbnRyeSB3aXRoIGluZGV4IFswXTpcbk5vIHJlcGxhY2VtZW50IHdhcyBwZXJmb3JtZWQsIG9sZFN0ciBkaWQgbm90IGFwcGVhciB2ZXJiYXRpbSBpbiBzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9Gb3Jnb3RQYXNzd29yZC5qYXZhLlxuVGhlIGNvbnRlbnQgaW4gdGhlIHNwZWNpZmllZCByZWdpb24gaXM6XG4gICAyNDZcdFxuICAgMjQ3XHQgICAgICAgICAgICAgICAgdHh0UGhvbmUuc2V0RWRpdGFibGUoZmFsc2UpO1xuICAgMjQ4XHQgICAgICAgICAgICAgICAgYnRuQ2hlY2suc2V0RW5hYmxlZChmYWxzZSk7XG4gICAyNDlcdCAgICAgICAgICAgIH0gZWxzZSB7XG4gICAyNTBcdCAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcIktow7RuZyB0w6xtIHRo4bqleSB0w6BpIGtob+G6o24gduG7m2kgc+G7kSDEkWnhu4duIHRob+G6oWkgbsOgeSFcIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgIDI1MVx0ICAgICAgICAgICAgfVxuICAgMjUyXHQgICAgICAgIH1cbiAgIDI1M1x0ICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0bkNoZWNrQWN0aW9uUGVyZm9ybWVkXG4gICAyNTRcdFxuICAgMjU1XHQgICAgcHJpdmF0ZSB2b2lkIGJ0bkNoYW5nZUFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5DaGFuZ2VBY3Rpb25QZXJmb3JtZWRcbiAgIDI1Nlx0ICAgICAgICAvLyBUT0RPIGFkZCB5b3VyIGhhbmRsaW5nIGNvZGUgaGVyZTpcbiAgIDI1N1x0ICAgICAgICBpZih2YWxpZGF0ZUZpZWxkcygpICYmIGN1cnJlbnRTdWJzY3JpYmVyICE9IG51bGwpe1xuICAgMjU4XHQgICAgICAgICAgICBTdHJpbmcgbmV3UGFzc3dvcmQgPSB0eHRQYXNzd29yZC5nZXRUZXh0KCk7XG4gICAyNTlcdFxuICAgMjYwXHQgICAgICAgICAgICBib29sZWFuIGlzU3VjY2VzcyA9IFN1YnNjcmliZXJEQU8udXBkYXRlUGFzc3dvcmQoY3VycmVudFN1YnNjcmliZXIuZ2V0VXNlcl9pZCgpLCBuZXdQYXNzd29yZCk7XG4gICAyNjFcdFxuICAgMjYyXHQgICAgICAgICAgICBpZihpc1N1Y2Nlc3MpIHtcbiAgIDI2M1x0ICAgICAgICAgICAgICAgIG5ldyBMb2dpbigpLnNldFZpc2libGUodHJ1ZSk7XG4gICAyNjRcdCAgICAgICAgICAgICAgICB0aGlzLmRpc3Bvc2UoKTtcbiAgIDI2NVx0ICAgICAgICAgICAgfSBlbHNlIHtcbiAgIDI2Nlx0ICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwixJDhu5VpIG3huq10IGto4bqpdSB0aOG6pXQgYuG6oWkhIFZ1aSBsw7JuZyB0aOG7rSBs4bqhaSBzYXUhXCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAyNjdcdCAgICAgICAgICAgIH1cbiAgIDI2OFx0ICAgICAgICB9XG4gICAyNjlcdCAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5DaGFuZ2VBY3Rpb25QZXJmb3JtZWRcblxuRGlmZiBiZXR3ZWVuIG9sZFN0ciBhbmQgdGhlIHNwZWNpZmllZCByZWdpb24gaXM6XG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4tLS0gb2xkU3RyXG4rKysgcmVnaW9uQ29udGVudFxuQEAgLTEsMyArMSw4IEBAXG4rICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwiS2jDtG5nIHTDrG0gdGjhuqV5IHTDoGkga2hv4bqjbiB24bubaSBz4buRIMSRaeG7h24gdGhv4bqhaSBuw6B5IVwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuKyAgICAgICAgICAgIH1cbisgICAgICAgIH1cbisgICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuQ2hlY2tBY3Rpb25QZXJmb3JtZWRcbitcbiAgICAgcHJpdmF0ZSB2b2lkIGJ0bkNoYW5nZUFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5DaGFuZ2VBY3Rpb25QZXJmb3JtZWRcbiAgICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxuICAgICAgICAgaWYodmFsaWRhdGVGaWVsZHMoKSAmJiBjdXJyZW50U3Vic2NyaWJlciAhPSBudWxsKXtcbkBAIC02LDExICsxMSw2IEBAXG4gICAgICAgICAgICAgYm9vbGVhbiBpc1N1Y2Nlc3MgPSBTdWJzY3JpYmVyREFPLnVwZGF0ZVBhc3N3b3JkKGN1cnJlbnRTdWJzY3JpYmVyLmdldFVzZXJfaWQoKSwgbmV3UGFzc3dvcmQpO1xuIFxuICAgICAgICAgICAgIGlmKGlzU3VjY2Vzcykge1xuLSAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcIsSQ4buVaSBt4bqtdCBraOG6qXUgdGjDoG5oIGPDtG5nISBWdWkgbMOybmcgxJHEg25nIG5o4bqtcCBs4bqhaSFcIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5JTkZPUk1BVElPTl9NRVNTQUdFKTtcbiAgICAgICAgICAgICAgICAgbmV3IExvZ2luKCkuc2V0VmlzaWJsZSh0cnVlKTtcbiAgICAgICAgICAgICAgICAgdGhpcy5kaXNwb3NlKCk7XG4gICAgICAgICAgICAgfSBlbHNlIHtcbi0gICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXCLEkOG7lWkgbeG6rXQga2jhuql1IHRo4bqldCBi4bqhaSEgVnVpIGzDsm5nIHRo4butIGzhuqFpIHNhdSFcIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbi0gICAgICAgICAgICB9XG4tICAgICAgICB9XG4tICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0bkNoYW5nZUFjdGlvblBlcmZvcm1lZFxuXG5cbkZpeCBmYWlsZWQgc3RyX3JlcGxhY2UgZW50cmllcyBhY2NvcmRpbmdseSBhbmQgdHJ5IGFnYWluLlxuIiwiaXNfZXJyb3IiOnRydWUsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1XzAxQ2h5VGliNUFNTkQzcFlaNHdnaG5ZTSJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkU6L0hvY1RhcC8wMl9KQVZBLzAzX1Byb2plY3QvSW50ZXJuZXQgTWFuZ2VtZW50IFN5c3RlbSIsImZvbGRlclJvb3QiOiJFOi9Ib2NUYXAvMDJfSkFWQS8wM19Qcm9qZWN0L0ludGVybmV0IE1hbmdlbWVudCBTeXN0ZW0ifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJ0aW1lc3RhbXAiOiIyMDI1LTA1LTEzVDAxOjU5OjE2LjgwMFoiLCJyZXNwb25zZV90ZXh0IjoiTGV0IG1lIHRyeSBhZ2FpbiB3aXRoIHRoZSBjb3JyZWN0IGxpbmUgbnVtYmVyczpcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiIxNTBhYjllYy1kY2E4LTRmN2QtYjYwMy02Njc4YTg0NDZhNWIiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1XzAxVVViRXVSNENTZmR0TU5SMTh3cEVCcyIsInRvb2xfbmFtZSI6InN0ci1yZXBsYWNlLWVkaXRvciIsImlucHV0X2pzb24iOiJ7XCJjb21tYW5kXCI6IFwic3RyX3JlcGxhY2VcIiwgXCJwYXRoXCI6IFwic3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vRm9yZ290UGFzc3dvcmQuamF2YVwiLCBcInN0cl9yZXBsYWNlX2VudHJpZXNcIjogW3tcIm9sZF9zdHJcIjogXCIgICAgcHJpdmF0ZSB2b2lkIGJ0bkNoYW5nZUFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5DaGFuZ2VBY3Rpb25QZXJmb3JtZWRcXG4gICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxcbiAgICAgICAgaWYodmFsaWRhdGVGaWVsZHMoKSAmJiBjdXJyZW50U3Vic2NyaWJlciAhPSBudWxsKXtcXG4gICAgICAgICAgICBTdHJpbmcgbmV3UGFzc3dvcmQgPSB0eHRQYXNzd29yZC5nZXRUZXh0KCk7XFxuXFxuICAgICAgICAgICAgYm9vbGVhbiBpc1N1Y2Nlc3MgPSBTdWJzY3JpYmVyREFPLnVwZGF0ZVBhc3N3b3JkKGN1cnJlbnRTdWJzY3JpYmVyLmdldFVzZXJfaWQoKSwgbmV3UGFzc3dvcmQpO1xcblxcbiAgICAgICAgICAgIGlmKGlzU3VjY2Vzcykge1xcbiAgICAgICAgICAgICAgICBuZXcgTG9naW4oKS5zZXRWaXNpYmxlKHRydWUpO1xcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3Bvc2UoKTtcXG4gICAgICAgICAgICB9IGVsc2Uge1xcbiAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcXFwiXFx1MDExMFxcdTFlZDVpIG1cXHUxZWFkdCBraFxcdTFlYTl1IHRoXFx1MWVhNXQgYlxcdTFlYTFpISBWdWkgbFxcdTAwZjJuZyB0aFxcdTFlZWQgbFxcdTFlYTFpIHNhdSFcXFwiLCBcXFwiVGhcXHUwMGY0bmcgYlxcdTAwZTFvXFxcIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgfVxcbiAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5DaGFuZ2VBY3Rpb25QZXJmb3JtZWRcIiwgXCJuZXdfc3RyXCI6IFwiICAgIHByaXZhdGUgdm9pZCBidG5DaGFuZ2VBY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuQ2hhbmdlQWN0aW9uUGVyZm9ybWVkXFxuICAgICAgICAvLyBUT0RPIGFkZCB5b3VyIGhhbmRsaW5nIGNvZGUgaGVyZTpcXG4gICAgICAgIGlmKHZhbGlkYXRlRmllbGRzKCkgJiYgY3VycmVudFN1YnNjcmliZXIgIT0gbnVsbCl7XFxuICAgICAgICAgICAgU3RyaW5nIG5ld1Bhc3N3b3JkID0gdHh0UGFzc3dvcmQuZ2V0VGV4dCgpO1xcblxcbiAgICAgICAgICAgIGJvb2xlYW4gaXNTdWNjZXNzID0gU3Vic2NyaWJlckRBTy51cGRhdGVQYXNzd29yZChjdXJyZW50U3Vic2NyaWJlci5nZXRVc2VyX2lkKCksIG5ld1Bhc3N3b3JkKTtcXG5cXG4gICAgICAgICAgICBpZihpc1N1Y2Nlc3MpIHtcXG4gICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2codGhpcywgXFxcIlxcdTAxMTBcXHUxZWQ1aSBtXFx1MWVhZHQga2hcXHUxZWE5dSB0aFxcdTAwZTBuaCBjXFx1MDBmNG5nISBWdWkgbFxcdTAwZjJuZyBcXHUwMTExXFx1MDEwM25nIG5oXFx1MWVhZHAgbFxcdTFlYTFpIVxcXCIsIFxcXCJUaFxcdTAwZjRuZyBiXFx1MDBlMW9cXFwiLCBKT3B0aW9uUGFuZS5JTkZPUk1BVElPTl9NRVNTQUdFKTtcXG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwb3NlKCk7XFxuICAgICAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2codGhpcywgXFxcIlxcdTAxMTBcXHUxZWQ1aSBtXFx1MWVhZHQga2hcXHUxZWE5dSB0aFxcdTFlYTV0IGJcXHUxZWExaSEgVnVpIGxcXHUwMGYybmcgdGhcXHUxZWVkIGxcXHUxZWExaSBzYXUhXFxcIiwgXFxcIlRoXFx1MDBmNG5nIGJcXHUwMGUxb1xcXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgIH1cXG4gICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuQ2hhbmdlQWN0aW9uUGVyZm9ybWVkXCIsIFwib2xkX3N0cl9zdGFydF9saW5lX251bWJlclwiOiAyNTUsIFwib2xkX3N0cl9lbmRfbGluZV9udW1iZXJcIjogMjY5fV19IiwibWNwX3NlcnZlcl9uYW1lIjoiIiwibWNwX3Rvb2xfbmFtZSI6IiJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiSGVyZSdzIHRoZSByZXN1bHQgb2YgcnVubmluZyBgY2F0IC1uYCBvbiBzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9Gb3Jnb3RQYXNzd29yZC5qYXZhOlxuICAgMjUwXHQgICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXCJLaMO0bmcgdMOsbSB0aOG6pXkgdMOgaSBraG/huqNuIHbhu5tpIHPhu5EgxJFp4buHbiB0aG/huqFpIG7DoHkhXCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAyNTFcdCAgICAgICAgICAgIH1cbiAgIDI1Mlx0ICAgICAgICB9XG4gICAyNTNcdCAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5DaGVja0FjdGlvblBlcmZvcm1lZFxuICAgMjU0XHRcbiAgIDI1NVx0ICAgIHByaXZhdGUgdm9pZCBidG5DaGFuZ2VBY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuQ2hhbmdlQWN0aW9uUGVyZm9ybWVkXG4gICAyNTZcdCAgICAgICAgLy8gVE9ETyBhZGQgeW91ciBoYW5kbGluZyBjb2RlIGhlcmU6XG4gICAyNTdcdCAgICAgICAgaWYodmFsaWRhdGVGaWVsZHMoKSAmJiBjdXJyZW50U3Vic2NyaWJlciAhPSBudWxsKXtcbiAgIDI1OFx0ICAgICAgICAgICAgU3RyaW5nIG5ld1Bhc3N3b3JkID0gdHh0UGFzc3dvcmQuZ2V0VGV4dCgpO1xuICAgMjU5XHRcbiAgIDI2MFx0ICAgICAgICAgICAgYm9vbGVhbiBpc1N1Y2Nlc3MgPSBTdWJzY3JpYmVyREFPLnVwZGF0ZVBhc3N3b3JkKGN1cnJlbnRTdWJzY3JpYmVyLmdldFVzZXJfaWQoKSwgbmV3UGFzc3dvcmQpO1xuICAgMjYxXHRcbiAgIDI2Mlx0ICAgICAgICAgICAgaWYoaXNTdWNjZXNzKSB7XG4gICAyNjNcdCAgICAgICAgICAgICAgICBuZXcgTG9naW4oKS5zZXRWaXNpYmxlKHRydWUpO1xuICAgMjY0XHQgICAgICAgICAgICAgICAgdGhpcy5kaXNwb3NlKCk7XG4gICAyNjVcdCAgICAgICAgICAgIH0gZWxzZSB7XG4gICAyNjZcdCAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcIsSQ4buVaSBt4bqtdCBraOG6qXUgdGjhuqV0IGLhuqFpISBWdWkgbMOybmcgdGjhu60gbOG6oWkgc2F1IVwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgMjY3XHQgICAgICAgICAgICB9XG4gICAyNjhcdCAgICAgICAgfVxuICAgMjY5XHQgICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuQ2hhbmdlQWN0aW9uUGVyZm9ybWVkXG4gICAyNzBcdFxuVG90YWwgbGluZXMgaW4gZmlsZTogMzIwXG4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1XzAxTm5OQnJKdjRrdFdUbnptcmFhcmVSSCJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkU6L0hvY1RhcC8wMl9KQVZBLzAzX1Byb2plY3QvSW50ZXJuZXQgTWFuZ2VtZW50IFN5c3RlbSIsImZvbGRlclJvb3QiOiJFOi9Ib2NUYXAvMDJfSkFWQS8wM19Qcm9qZWN0L0ludGVybmV0IE1hbmdlbWVudCBTeXN0ZW0ifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJ0aW1lc3RhbXAiOiIyMDI1LTA1LTEzVDAxOjU5OjIwLjUxNFoiLCJyZXNwb25zZV90ZXh0IjoiIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6IjNhYTc2YzBmLTY1MGItNGMyNC04ZTMzLTNkZDViODRhMzBlMSIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfMDFLWU5uQ1VBY2tqY0JVaWZFVmJ5OGt6IiwidG9vbF9uYW1lIjoic3RyLXJlcGxhY2UtZWRpdG9yIiwiaW5wdXRfanNvbiI6IntcImNvbW1hbmRcIjogXCJ2aWV3XCIsIFwicGF0aFwiOiBcInNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL0ZvcmdvdFBhc3N3b3JkLmphdmFcIiwgXCJ2aWV3X3JhbmdlXCI6IFsyNzAsIDMwMF19IiwibWNwX3NlcnZlcl9uYW1lIjoiIiwibWNwX3Rvb2xfbmFtZSI6IiJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiTm93IGxldCdzIHVwZGF0ZSB0aGUgbWFpbiBtZXRob2QgaW4gRm9yZ290UGFzc3dvcmQuamF2YSBzaW5jZSB3ZSBkb24ndCBuZWVkIGl0IGFueW1vcmUgKEpEaWFsb2cgZG9lc24ndCBuZWVkIGEgbWFpbiBtZXRob2QpOlxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiU3VjY2Vzc2Z1bGx5IGVkaXRlZCB0aGUgZmlsZSBzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9Gb3Jnb3RQYXNzd29yZC5qYXZhLlxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZSBmb3IgZW50cnkgd2l0aCBpbmRleCBbMF06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgIDI1MVx0ICAgICAgICAgICAgfVxuICAgMjUyXHQgICAgICAgIH1cbiAgIDI1M1x0ICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0bkNoZWNrQWN0aW9uUGVyZm9ybWVkXG4gICAyNTRcdFxuICAgMjU1XHQgICAgcHJpdmF0ZSB2b2lkIGJ0bkNoYW5nZUFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5DaGFuZ2VBY3Rpb25QZXJmb3JtZWRcbiAgIDI1Nlx0ICAgICAgICAvLyBUT0RPIGFkZCB5b3VyIGhhbmRsaW5nIGNvZGUgaGVyZTpcbiAgIDI1N1x0ICAgICAgICBpZih2YWxpZGF0ZUZpZWxkcygpICYmIGN1cnJlbnRTdWJzY3JpYmVyICE9IG51bGwpe1xuICAgMjU4XHQgICAgICAgICAgICBTdHJpbmcgbmV3UGFzc3dvcmQgPSB0eHRQYXNzd29yZC5nZXRUZXh0KCk7XG4gICAyNTlcdFxuICAgMjYwXHQgICAgICAgICAgICBib29sZWFuIGlzU3VjY2VzcyA9IFN1YnNjcmliZXJEQU8udXBkYXRlUGFzc3dvcmQoY3VycmVudFN1YnNjcmliZXIuZ2V0VXNlcl9pZCgpLCBuZXdQYXNzd29yZCk7XG4gICAyNjFcdFxuICAgMjYyXHQgICAgICAgICAgICBpZihpc1N1Y2Nlc3MpIHtcbiAgIDI2M1x0ICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKHRoaXMsIFwixJDhu5VpIG3huq10IGto4bqpdSB0aMOgbmggY8O0bmchIFZ1aSBsw7JuZyDEkcSDbmcgbmjhuq1wIGzhuqFpIVwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLklORk9STUFUSU9OX01FU1NBR0UpO1xuICAgMjY0XHQgICAgICAgICAgICAgICAgdGhpcy5kaXNwb3NlKCk7XG4gICAyNjVcdCAgICAgICAgICAgIH0gZWxzZSB7XG4gICAyNjZcdCAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyh0aGlzLCBcIsSQ4buVaSBt4bqtdCBraOG6qXUgdGjhuqV0IGLhuqFpISBWdWkgbMOybmcgdGjhu60gbOG6oWkgc2F1IVwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgMjY3XHQgICAgICAgICAgICB9XG4gICAyNjhcdCAgICAgICAgfVxuICAgMjY5XHQgICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuQ2hhbmdlQWN0aW9uUGVyZm9ybWVkXG4gICAyNzBcdFxuICAgMjcxXHQgICAgLyoqXG4gICAyNzJcdCAgICAgKiBAcGFyYW0gYXJncyB0aGUgY29tbWFuZCBsaW5lIGFyZ3VtZW50c1xuICAgMjczXHQgICAgICovXG5cblJldmlldyB0aGUgY2hhbmdlcyBhbmQgbWFrZSBzdXJlIHRoZXkgYXJlIGFzIGV4cGVjdGVkIChjb3JyZWN0IGluZGVudGF0aW9uLCBubyBkdXBsaWNhdGUgbGluZXMsIGV0YykuXG5FZGl0IHRoZSBmaWxlIGFnYWluIGlmIG5lY2Vzc2FyeS5cbiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfMDFVVWJFdVI0Q1NmZHRNTlIxOHdwRUJzIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiRTovSG9jVGFwLzAyX0pBVkEvMDNfUHJvamVjdC9JbnRlcm5ldCBNYW5nZW1lbnQgU3lzdGVtIiwiZm9sZGVyUm9vdCI6IkU6L0hvY1RhcC8wMl9KQVZBLzAzX1Byb2plY3QvSW50ZXJuZXQgTWFuZ2VtZW50IFN5c3RlbSJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInRpbWVzdGFtcCI6IjIwMjUtMDUtMTNUMDE6NTk6MzEuOTk5WiIsInJlc3BvbnNlX3RleHQiOiJOb3cgbGV0J3MgdXBkYXRlIHRoZSBtYWluIG1ldGhvZCBpbiBGb3Jnb3RQYXNzd29yZC5qYXZhIHNpbmNlIHdlIGRvbid0IG5lZWQgaXQgYW55bW9yZSAoSkRpYWxvZyBkb2Vzbid0IG5lZWQgYSBtYWluIG1ldGhvZCk6XG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiMjMyMzg1M2QtZDUyMy00Mjg5LWIxM2EtZjMwYWJlZTQ0YjgwIiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV8wMThqR2N6WVFTR2dkZXBuZzVGOUhDbnIiLCJ0b29sX25hbWUiOiJzdHItcmVwbGFjZS1lZGl0b3IiLCJpbnB1dF9qc29uIjoie1wiY29tbWFuZFwiOiBcInZpZXdcIiwgXCJwYXRoXCI6IFwic3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vRm9yZ290UGFzc3dvcmQuamF2YVwiLCBcInZpZXdfcmFuZ2VcIjogWzI5NSwgMzIwXX0iLCJtY3Bfc2VydmVyX25hbWUiOiIiLCJtY3BfdG9vbF9uYW1lIjoiIn19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiIifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJIZXJlJ3MgdGhlIHJlc3VsdCBvZiBydW5uaW5nIGBjYXQgLW5gIG9uIHNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL0ZvcmdvdFBhc3N3b3JkLmphdmE6XG4gICAyNzBcdFxuICAgMjcxXHQgICAgLyoqXG4gICAyNzJcdCAgICAgKiBAcGFyYW0gYXJncyB0aGUgY29tbWFuZCBsaW5lIGFyZ3VtZW50c1xuICAgMjczXHQgICAgICovXG4gICAyNzRcdCAgICBwdWJsaWMgc3RhdGljIHZvaWQgbWFpbihTdHJpbmcgYXJnc1tdKSB7XG4gICAyNzVcdCAgICAgICAgLyogU2V0IHRoZSBOaW1idXMgbG9vayBhbmQgZmVlbCAqL1xuICAgMjc2XHQgICAgICAgIC8vPGVkaXRvci1mb2xkIGRlZmF1bHRzdGF0ZT1cImNvbGxhcHNlZFwiIGRlc2M9XCIgTG9vayBhbmQgZmVlbCBzZXR0aW5nIGNvZGUgKG9wdGlvbmFsKSBcIj5cbiAgIDI3N1x0ICAgICAgICAvKiBJZiBOaW1idXMgKGludHJvZHVjZWQgaW4gSmF2YSBTRSA2KSBpcyBub3QgYXZhaWxhYmxlLCBzdGF5IHdpdGggdGhlIGRlZmF1bHQgbG9vayBhbmQgZmVlbC5cbiAgIDI3OFx0ICAgICAgICAgKiBGb3IgZGV0YWlscyBzZWUgaHR0cDovL2Rvd25sb2FkLm9yYWNsZS5jb20vamF2YXNlL3R1dG9yaWFsL3Vpc3dpbmcvbG9va2FuZGZlZWwvcGxhZi5odG1sXG4gICAyNzlcdCAgICAgICAgICovXG4gICAyODBcdCAgICAgICAgdHJ5IHtcbiAgIDI4MVx0ICAgICAgICAgICAgZm9yIChqYXZheC5zd2luZy5VSU1hbmFnZXIuTG9va0FuZEZlZWxJbmZvIGluZm8gOiBqYXZheC5zd2luZy5VSU1hbmFnZXIuZ2V0SW5zdGFsbGVkTG9va0FuZEZlZWxzKCkpIHtcbiAgIDI4Mlx0ICAgICAgICAgICAgICAgIGlmIChcIk5pbWJ1c1wiLmVxdWFscyhpbmZvLmdldE5hbWUoKSkpIHtcbiAgIDI4M1x0ICAgICAgICAgICAgICAgICAgICBqYXZheC5zd2luZy5VSU1hbmFnZXIuc2V0TG9va0FuZEZlZWwoaW5mby5nZXRDbGFzc05hbWUoKSk7XG4gICAyODRcdCAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAyODVcdCAgICAgICAgICAgICAgICB9XG4gICAyODZcdCAgICAgICAgICAgIH1cbiAgIDI4N1x0ICAgICAgICB9IGNhdGNoIChDbGFzc05vdEZvdW5kRXhjZXB0aW9uIGV4KSB7XG4gICAyODhcdCAgICAgICAgICAgIGphdmEudXRpbC5sb2dnaW5nLkxvZ2dlci5nZXRMb2dnZXIoRm9yZ290UGFzc3dvcmQuY2xhc3MuZ2V0TmFtZSgpKS5sb2coamF2YS51dGlsLmxvZ2dpbmcuTGV2ZWwuU0VWRVJFLCBudWxsLCBleCk7XG4gICAyODlcdCAgICAgICAgfSBjYXRjaCAoSW5zdGFudGlhdGlvbkV4Y2VwdGlvbiBleCkge1xuICAgMjkwXHQgICAgICAgICAgICBqYXZhLnV0aWwubG9nZ2luZy5Mb2dnZXIuZ2V0TG9nZ2VyKEZvcmdvdFBhc3N3b3JkLmNsYXNzLmdldE5hbWUoKSkubG9nKGphdmEudXRpbC5sb2dnaW5nLkxldmVsLlNFVkVSRSwgbnVsbCwgZXgpO1xuICAgMjkxXHQgICAgICAgIH0gY2F0Y2ggKElsbGVnYWxBY2Nlc3NFeGNlcHRpb24gZXgpIHtcbiAgIDI5Mlx0ICAgICAgICAgICAgamF2YS51dGlsLmxvZ2dpbmcuTG9nZ2VyLmdldExvZ2dlcihGb3Jnb3RQYXNzd29yZC5jbGFzcy5nZXROYW1lKCkpLmxvZyhqYXZhLnV0aWwubG9nZ2luZy5MZXZlbC5TRVZFUkUsIG51bGwsIGV4KTtcbiAgIDI5M1x0ICAgICAgICB9IGNhdGNoIChqYXZheC5zd2luZy5VbnN1cHBvcnRlZExvb2tBbmRGZWVsRXhjZXB0aW9uIGV4KSB7XG4gICAyOTRcdCAgICAgICAgICAgIGphdmEudXRpbC5sb2dnaW5nLkxvZ2dlci5nZXRMb2dnZXIoRm9yZ290UGFzc3dvcmQuY2xhc3MuZ2V0TmFtZSgpKS5sb2coamF2YS51dGlsLmxvZ2dpbmcuTGV2ZWwuU0VWRVJFLCBudWxsLCBleCk7XG4gICAyOTVcdCAgICAgICAgfVxuICAgMjk2XHQgICAgICAgIC8vPC9lZGl0b3ItZm9sZD5cbiAgIDI5N1x0XG4gICAyOThcdCAgICAgICAgLyogQ3JlYXRlIGFuZCBkaXNwbGF5IHRoZSBmb3JtICovXG4gICAyOTlcdCAgICAgICAgamF2YS5hd3QuRXZlbnRRdWV1ZS5pbnZva2VMYXRlcihuZXcgUnVubmFibGUoKSB7XG4gICAzMDBcdCAgICAgICAgICAgIHB1YmxpYyB2b2lkIHJ1bigpIHtcblRvdGFsIGxpbmVzIGluIGZpbGU6IDMyMFxuIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV8wMUtZTm5DVUFja2pjQlVpZkVWYnk4a3oifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJFOi9Ib2NUYXAvMDJfSkFWQS8wM19Qcm9qZWN0L0ludGVybmV0IE1hbmdlbWVudCBTeXN0ZW0iLCJmb2xkZXJSb290IjoiRTovSG9jVGFwLzAyX0pBVkEvMDNfUHJvamVjdC9JbnRlcm5ldCBNYW5nZW1lbnQgU3lzdGVtIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwidGltZXN0YW1wIjoiMjAyNS0wNS0xM1QwMTo1OTozNi41MDNaIiwicmVzcG9uc2VfdGV4dCI6IiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiJhOTNjMTRlMy01N2MyLTQ2ZjUtYjgyOS1jNDM5ZTI5OGUzZjgiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1XzAxNWRteHFpdDFWcm83d3FuQ1dVOFlGRiIsInRvb2xfbmFtZSI6InN0ci1yZXBsYWNlLWVkaXRvciIsImlucHV0X2pzb24iOiJ7XCJjb21tYW5kXCI6IFwic3RyX3JlcGxhY2VcIiwgXCJwYXRoXCI6IFwic3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vRm9yZ290UGFzc3dvcmQuamF2YVwiLCBcInN0cl9yZXBsYWNlX2VudHJpZXNcIjogW3tcIm9sZF9zdHJcIjogXCIgICAgLyoqXFxuICAgICAqIEBwYXJhbSBhcmdzIHRoZSBjb21tYW5kIGxpbmUgYXJndW1lbnRzXFxuICAgICAqL1xcbiAgICBwdWJsaWMgc3RhdGljIHZvaWQgbWFpbihTdHJpbmcgYXJnc1tdKSB7XFxuICAgICAgICAvKiBTZXQgdGhlIE5pbWJ1cyBsb29rIGFuZCBmZWVsICovXFxuICAgICAgICAvLzxlZGl0b3ItZm9sZCBkZWZhdWx0c3RhdGU9XFxcImNvbGxhcHNlZFxcXCIgZGVzYz1cXFwiIExvb2sgYW5kIGZlZWwgc2V0dGluZyBjb2RlIChvcHRpb25hbCkgXFxcIj5cXG4gICAgICAgIC8qIElmIE5pbWJ1cyAoaW50cm9kdWNlZCBpbiBKYXZhIFNFIDYpIGlzIG5vdCBhdmFpbGFibGUsIHN0YXkgd2l0aCB0aGUgZGVmYXVsdCBsb29rIGFuZCBmZWVsLlxcbiAgICAgICAgICogRm9yIGRldGFpbHMgc2VlIGh0dHA6Ly9kb3dubG9hZC5vcmFjbGUuY29tL2phdmFzZS90dXRvcmlhbC91aXN3aW5nL2xvb2thbmRmZWVsL3BsYWYuaHRtbFxcbiAgICAgICAgICovXFxuICAgICAgICB0cnkge1xcbiAgICAgICAgICAgIGZvciAoamF2YXguc3dpbmcuVUlNYW5hZ2VyLkxvb2tBbmRGZWVsSW5mbyBpbmZvIDogamF2YXguc3dpbmcuVUlNYW5hZ2VyLmdldEluc3RhbGxlZExvb2tBbmRGZWVscygpKSB7XFxuICAgICAgICAgICAgICAgIGlmIChcXFwiTmltYnVzXFxcIi5lcXVhbHMoaW5mby5nZXROYW1lKCkpKSB7XFxuICAgICAgICAgICAgICAgICAgICBqYXZheC5zd2luZy5VSU1hbmFnZXIuc2V0TG9va0FuZEZlZWwoaW5mby5nZXRDbGFzc05hbWUoKSk7XFxuICAgICAgICAgICAgICAgICAgICBicmVhaztcXG4gICAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgIH1cXG4gICAgICAgIH0gY2F0Y2ggKENsYXNzTm90Rm91bmRFeGNlcHRpb24gZXgpIHtcXG4gICAgICAgICAgICBqYXZhLnV0aWwubG9nZ2luZy5Mb2dnZXIuZ2V0TG9nZ2VyKEZvcmdvdFBhc3N3b3JkLmNsYXNzLmdldE5hbWUoKSkubG9nKGphdmEudXRpbC5sb2dnaW5nLkxldmVsLlNFVkVSRSwgbnVsbCwgZXgpO1xcbiAgICAgICAgfSBjYXRjaCAoSW5zdGFudGlhdGlvbkV4Y2VwdGlvbiBleCkge1xcbiAgICAgICAgICAgIGphdmEudXRpbC5sb2dnaW5nLkxvZ2dlci5nZXRMb2dnZXIoRm9yZ290UGFzc3dvcmQuY2xhc3MuZ2V0TmFtZSgpKS5sb2coamF2YS51dGlsLmxvZ2dpbmcuTGV2ZWwuU0VWRVJFLCBudWxsLCBleCk7XFxuICAgICAgICB9IGNhdGNoIChJbGxlZ2FsQWNjZXNzRXhjZXB0aW9uIGV4KSB7XFxuICAgICAgICAgICAgamF2YS51dGlsLmxvZ2dpbmcuTG9nZ2VyLmdldExvZ2dlcihGb3Jnb3RQYXNzd29yZC5jbGFzcy5nZXROYW1lKCkpLmxvZyhqYXZhLnV0aWwubG9nZ2luZy5MZXZlbC5TRVZFUkUsIG51bGwsIGV4KTtcXG4gICAgICAgIH0gY2F0Y2ggKGphdmF4LnN3aW5nLlVuc3VwcG9ydGVkTG9va0FuZEZlZWxFeGNlcHRpb24gZXgpIHtcXG4gICAgICAgICAgICBqYXZhLnV0aWwubG9nZ2luZy5Mb2dnZXIuZ2V0TG9nZ2VyKEZvcmdvdFBhc3N3b3JkLmNsYXNzLmdldE5hbWUoKSkubG9nKGphdmEudXRpbC5sb2dnaW5nLkxldmVsLlNFVkVSRSwgbnVsbCwgZXgpO1xcbiAgICAgICAgfVxcbiAgICAgICAgLy88L2VkaXRvci1mb2xkPlxcblxcbiAgICAgICAgLyogQ3JlYXRlIGFuZCBkaXNwbGF5IHRoZSBmb3JtICovXFxuICAgICAgICBqYXZhLmF3dC5FdmVudFF1ZXVlLmludm9rZUxhdGVyKG5ldyBSdW5uYWJsZSgpIHtcXG4gICAgICAgICAgICBwdWJsaWMgdm9pZCBydW4oKSB7XFxuICAgICAgICAgICAgICAgIG5ldyBGb3Jnb3RQYXNzd29yZCgpLnNldFZpc2libGUodHJ1ZSk7XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgfSk7XFxuICAgIH1cIiwgXCJuZXdfc3RyXCI6IFwiXCIsIFwib2xkX3N0cl9zdGFydF9saW5lX251bWJlclwiOiAyNzEsIFwib2xkX3N0cl9lbmRfbGluZV9udW1iZXJcIjogMzA0fV19IiwibWNwX3NlcnZlcl9uYW1lIjoiIiwibWNwX3Rvb2xfbmFtZSI6IiJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiSGVyZSdzIHRoZSByZXN1bHQgb2YgcnVubmluZyBgY2F0IC1uYCBvbiBzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9Gb3Jnb3RQYXNzd29yZC5qYXZhOlxuICAgMjk1XHQgICAgICAgIH1cbiAgIDI5Nlx0ICAgICAgICAvLzwvZWRpdG9yLWZvbGQ+XG4gICAyOTdcdFxuICAgMjk4XHQgICAgICAgIC8qIENyZWF0ZSBhbmQgZGlzcGxheSB0aGUgZm9ybSAqL1xuICAgMjk5XHQgICAgICAgIGphdmEuYXd0LkV2ZW50UXVldWUuaW52b2tlTGF0ZXIobmV3IFJ1bm5hYmxlKCkge1xuICAgMzAwXHQgICAgICAgICAgICBwdWJsaWMgdm9pZCBydW4oKSB7XG4gICAzMDFcdCAgICAgICAgICAgICAgICBuZXcgRm9yZ290UGFzc3dvcmQoKS5zZXRWaXNpYmxlKHRydWUpO1xuICAgMzAyXHQgICAgICAgICAgICB9XG4gICAzMDNcdCAgICAgICAgfSk7XG4gICAzMDRcdCAgICB9XG4gICAzMDVcdFxuICAgMzA2XHQgICAgLy8gVmFyaWFibGVzIGRlY2xhcmF0aW9uIC0gZG8gbm90IG1vZGlmeS8vR0VOLUJFR0lOOnZhcmlhYmxlc1xuICAgMzA3XHQgICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KQnV0dG9uIGJ0bkNoYW5nZTtcbiAgIDMwOFx0ICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkJ1dHRvbiBidG5DaGVjaztcbiAgIDMwOVx0ICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkJ1dHRvbiBidG5FeGl0O1xuICAgMzEwXHQgICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KTGFiZWwgakxhYmVsMTtcbiAgIDMxMVx0ICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkxhYmVsIGpMYWJlbDI7XG4gICAzMTJcdCAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpTZXBhcmF0b3IgalNlcGFyYXRvcjE7XG4gICAzMTNcdCAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpMYWJlbCBsYkNvbmZpcm1QYXNzd29yZDtcbiAgIDMxNFx0ICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkxhYmVsIGxiTmV3UGFzc3dvcmQ7XG4gICAzMTVcdCAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpQYXNzd29yZEZpZWxkIHR4dENvbmZpcm1QYXNzd29yZDtcbiAgIDMxNlx0ICAgIHByaXZhdGUgamF2YXguc3dpbmcuSlBhc3N3b3JkRmllbGQgdHh0UGFzc3dvcmQ7XG4gICAzMTdcdCAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpUZXh0RmllbGQgdHh0UGhvbmU7XG4gICAzMThcdCAgICAvLyBFbmQgb2YgdmFyaWFibGVzIGRlY2xhcmF0aW9uLy9HRU4tRU5EOnZhcmlhYmxlc1xuICAgMzE5XHR9XG4gICAzMjBcdFxuVG90YWwgbGluZXMgaW4gZmlsZTogMzIwXG4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1XzAxOGpHY3pZUVNHZ2RlcG5nNUY5SENuciJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkU6L0hvY1RhcC8wMl9KQVZBLzAzX1Byb2plY3QvSW50ZXJuZXQgTWFuZ2VtZW50IFN5c3RlbSIsImZvbGRlclJvb3QiOiJFOi9Ib2NUYXAvMDJfSkFWQS8wM19Qcm9qZWN0L0ludGVybmV0IE1hbmdlbWVudCBTeXN0ZW0ifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJ0aW1lc3RhbXAiOiIyMDI1LTA1LTEzVDAxOjU5OjQwLjQwNloiLCJyZXNwb25zZV90ZXh0IjoiIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6ImViZjY4YmE1LTEwNjItNGU1Yi1iOGI2LTA4NTFjYWNjNzgyMSIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfMDEyMU1WYW42eUtkOFBjcFNHdGFFdFQ2IiwidG9vbF9uYW1lIjoic3RyLXJlcGxhY2UtZWRpdG9yIiwiaW5wdXRfanNvbiI6IntcImNvbW1hbmRcIjogXCJ2aWV3XCIsIFwicGF0aFwiOiBcInNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL0ZvcmdvdFBhc3N3b3JkLmphdmFcIiwgXCJ2aWV3X3JhbmdlXCI6IFs5MCwgMTAwXX0iLCJtY3Bfc2VydmVyX25hbWUiOiIiLCJtY3BfdG9vbF9uYW1lIjoiIn19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiJOb3cgbGV0J3MgdXBkYXRlIHRoZSBzZXREZWZhdWx0Q2xvc2VPcGVyYXRpb24gaW4gdGhlIGluaXRDb21wb25lbnRzIG1ldGhvZDpcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IlN1Y2Nlc3NmdWxseSBlZGl0ZWQgdGhlIGZpbGUgc3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vRm9yZ290UGFzc3dvcmQuamF2YS5cblJlc3VsdCBmb3Igc3RyX3JlcGxhY2UgZm9yIGVudHJ5IHdpdGggaW5kZXggWzBdOlxuUmVwbGFjZW1lbnQgc3VjY2Vzc2Z1bC5cbkVkaXRlZCBzZWN0aW9uIGFmdGVyIElERSBhdXRvLWZvcm1hdHRpbmcgd2FzIGFwcGxpZWQ6XG4gICAyNjdcdCAgICAgICAgICAgIH1cbiAgIDI2OFx0ICAgICAgICB9XG4gICAyNjlcdCAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5DaGFuZ2VBY3Rpb25QZXJmb3JtZWRcbiAgIDI3MFx0XG4gICAyNzFcdFxuICAgMjcyXHRcbiAgIDI3M1x0ICAgIC8vIFZhcmlhYmxlcyBkZWNsYXJhdGlvbiAtIGRvIG5vdCBtb2RpZnkvL0dFTi1CRUdJTjp2YXJpYWJsZXNcbiAgIDI3NFx0ICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkJ1dHRvbiBidG5DaGFuZ2U7XG4gICAyNzVcdCAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpCdXR0b24gYnRuQ2hlY2s7XG5cblJldmlldyB0aGUgY2hhbmdlcyBhbmQgbWFrZSBzdXJlIHRoZXkgYXJlIGFzIGV4cGVjdGVkIChjb3JyZWN0IGluZGVudGF0aW9uLCBubyBkdXBsaWNhdGUgbGluZXMsIGV0YykuXG5FZGl0IHRoZSBmaWxlIGFnYWluIGlmIG5lY2Vzc2FyeS5cbiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfMDE1ZG14cWl0MVZybzd3cW5DV1U4WUZGIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiRTovSG9jVGFwLzAyX0pBVkEvMDNfUHJvamVjdC9JbnRlcm5ldCBNYW5nZW1lbnQgU3lzdGVtIiwiZm9sZGVyUm9vdCI6IkU6L0hvY1RhcC8wMl9KQVZBLzAzX1Byb2plY3QvSW50ZXJuZXQgTWFuZ2VtZW50IFN5c3RlbSJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInRpbWVzdGFtcCI6IjIwMjUtMDUtMTNUMDE6NTk6NTEuOTI5WiIsInJlc3BvbnNlX3RleHQiOiJOb3cgbGV0J3MgdXBkYXRlIHRoZSBzZXREZWZhdWx0Q2xvc2VPcGVyYXRpb24gaW4gdGhlIGluaXRDb21wb25lbnRzIG1ldGhvZDpcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiIwYTkyODE3Ni1jNWViLTQ4MjEtOTM5ZC0zZjUwMGE0ZjdkNzUiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1XzAxSGJtb2Q2RUhKdlRFMlR2MkNZNkJOUCIsInRvb2xfbmFtZSI6InN0ci1yZXBsYWNlLWVkaXRvciIsImlucHV0X2pzb24iOiJ7XCJjb21tYW5kXCI6IFwic3RyX3JlcGxhY2VcIiwgXCJwYXRoXCI6IFwic3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vRm9yZ290UGFzc3dvcmQuamF2YVwiLCBcInN0cl9yZXBsYWNlX2VudHJpZXNcIjogW3tcIm9sZF9zdHJcIjogXCIgICAgICAgIHNldERlZmF1bHRDbG9zZU9wZXJhdGlvbihqYXZheC5zd2luZy5XaW5kb3dDb25zdGFudHMuRVhJVF9PTl9DTE9TRSk7XCIsIFwibmV3X3N0clwiOiBcIiAgICAgICAgc2V0RGVmYXVsdENsb3NlT3BlcmF0aW9uKGphdmF4LnN3aW5nLldpbmRvd0NvbnN0YW50cy5ESVNQT1NFX09OX0NMT1NFKTtcIiwgXCJvbGRfc3RyX3N0YXJ0X2xpbmVfbnVtYmVyXCI6IDEwMCwgXCJvbGRfc3RyX2VuZF9saW5lX251bWJlclwiOiAxMDB9XX0iLCJtY3Bfc2VydmVyX25hbWUiOiIiLCJtY3BfdG9vbF9uYW1lIjoiIn19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiIifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJIZXJlJ3MgdGhlIHJlc3VsdCBvZiBydW5uaW5nIGBjYXQgLW5gIG9uIHNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL0ZvcmdvdFBhc3N3b3JkLmphdmE6XG4gICAgOTBcdCAgICAgICAgbGJOZXdQYXNzd29yZCA9IG5ldyBqYXZheC5zd2luZy5KTGFiZWwoKTtcbiAgICA5MVx0ICAgICAgICBsYkNvbmZpcm1QYXNzd29yZCA9IG5ldyBqYXZheC5zd2luZy5KTGFiZWwoKTtcbiAgICA5Mlx0ICAgICAgICBqU2VwYXJhdG9yMSA9IG5ldyBqYXZheC5zd2luZy5KU2VwYXJhdG9yKCk7XG4gICAgOTNcdCAgICAgICAgdHh0UGhvbmUgPSBuZXcgamF2YXguc3dpbmcuSlRleHRGaWVsZCgpO1xuICAgIDk0XHQgICAgICAgIGJ0bkNoZWNrID0gbmV3IGphdmF4LnN3aW5nLkpCdXR0b24oKTtcbiAgICA5NVx0ICAgICAgICB0eHRQYXNzd29yZCA9IG5ldyBqYXZheC5zd2luZy5KUGFzc3dvcmRGaWVsZCgpO1xuICAgIDk2XHQgICAgICAgIHR4dENvbmZpcm1QYXNzd29yZCA9IG5ldyBqYXZheC5zd2luZy5KUGFzc3dvcmRGaWVsZCgpO1xuICAgIDk3XHQgICAgICAgIGJ0bkNoYW5nZSA9IG5ldyBqYXZheC5zd2luZy5KQnV0dG9uKCk7XG4gICAgOThcdCAgICAgICAgYnRuRXhpdCA9IG5ldyBqYXZheC5zd2luZy5KQnV0dG9uKCk7XG4gICAgOTlcdFxuICAgMTAwXHQgICAgICAgIHNldERlZmF1bHRDbG9zZU9wZXJhdGlvbihqYXZheC5zd2luZy5XaW5kb3dDb25zdGFudHMuRVhJVF9PTl9DTE9TRSk7XG5Ub3RhbCBsaW5lcyBpbiBmaWxlOiAyODdcbiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfMDEyMU1WYW42eUtkOFBjcFNHdGFFdFQ2In19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiRTovSG9jVGFwLzAyX0pBVkEvMDNfUHJvamVjdC9JbnRlcm5ldCBNYW5nZW1lbnQgU3lzdGVtIiwiZm9sZGVyUm9vdCI6IkU6L0hvY1RhcC8wMl9KQVZBLzAzX1Byb2plY3QvSW50ZXJuZXQgTWFuZ2VtZW50IFN5c3RlbSJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInRpbWVzdGFtcCI6IjIwMjUtMDUtMTNUMDE6NTk6NTYuMTczWiIsInJlc3BvbnNlX3RleHQiOiIiLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiOWU5NzE3YzgtYmE3ZS00MzU3LWI4ZWUtZTQxMzMxMWEwZTI0IiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV8wMVBmUXhXS1JQTW5iZjRiMlhnTHMyNTUiLCJ0b29sX25hbWUiOiJzdHItcmVwbGFjZS1lZGl0b3IiLCJpbnB1dF9qc29uIjoie1wiY29tbWFuZFwiOiBcInZpZXdcIiwgXCJwYXRoXCI6IFwic3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vTG9naW4uamF2YVwiLCBcInZpZXdfcmFuZ2VcIjogWzE3MCwgMTgwXX0iLCJtY3Bfc2VydmVyX25hbWUiOiIiLCJtY3BfdG9vbF9uYW1lIjoiIn19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiJOb3cgbGV0J3MgdXBkYXRlIHRoZSBMb2dpbiBjbGFzcyB0byBvcGVuIHRoZSBGb3Jnb3RQYXNzd29yZCBkaWFsb2cgd2hlbiB0aGUgZm9yZ290IHBhc3N3b3JkIGJ1dHRvbiBpcyBjbGlja2VkOlxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiU3VjY2Vzc2Z1bGx5IGVkaXRlZCB0aGUgZmlsZSBzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9Gb3Jnb3RQYXNzd29yZC5qYXZhLlxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZSBmb3IgZW50cnkgd2l0aCBpbmRleCBbMF06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgICA5Nlx0ICAgICAgICB0eHRDb25maXJtUGFzc3dvcmQgPSBuZXcgamF2YXguc3dpbmcuSlBhc3N3b3JkRmllbGQoKTtcbiAgICA5N1x0ICAgICAgICBidG5DaGFuZ2UgPSBuZXcgamF2YXguc3dpbmcuSkJ1dHRvbigpO1xuICAgIDk4XHQgICAgICAgIGJ0bkV4aXQgPSBuZXcgamF2YXguc3dpbmcuSkJ1dHRvbigpO1xuICAgIDk5XHRcbiAgIDEwMFx0ICAgICAgICBzZXREZWZhdWx0Q2xvc2VPcGVyYXRpb24oamF2YXguc3dpbmcuV2luZG93Q29uc3RhbnRzLkRJU1BPU0VfT05fQ0xPU0UpO1xuICAgMTAxXHRcbiAgIDEwMlx0ICAgICAgICBqTGFiZWwxLnNldEZvbnQobmV3IGphdmEuYXd0LkZvbnQoXCJBcmlhbFwiLCAxLCAzNikpOyAvLyBOT0kxOE5cbiAgIDEwM1x0ICAgICAgICBqTGFiZWwxLnNldEZvcmVncm91bmQoamF2YXguc3dpbmcuVUlNYW5hZ2VyLmdldERlZmF1bHRzKCkuZ2V0Q29sb3IoXCJBY3Rpb25zLlllbGxvd1wiKSk7XG4gICAxMDRcdCAgICAgICAgakxhYmVsMS5zZXRUZXh0KFwixJDhu5RJIE3huqxUIEtI4bqoVVwiKTtcblxuUmV2aWV3IHRoZSBjaGFuZ2VzIGFuZCBtYWtlIHN1cmUgdGhleSBhcmUgYXMgZXhwZWN0ZWQgKGNvcnJlY3QgaW5kZW50YXRpb24sIG5vIGR1cGxpY2F0ZSBsaW5lcywgZXRjKS5cbkVkaXQgdGhlIGZpbGUgYWdhaW4gaWYgbmVjZXNzYXJ5LlxuIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV8wMUhibW9kNkVISnZURTJUdjJDWTZCTlAifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJFOi9Ib2NUYXAvMDJfSkFWQS8wM19Qcm9qZWN0L0ludGVybmV0IE1hbmdlbWVudCBTeXN0ZW0iLCJmb2xkZXJSb290IjoiRTovSG9jVGFwLzAyX0pBVkEvMDNfUHJvamVjdC9JbnRlcm5ldCBNYW5nZW1lbnQgU3lzdGVtIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwidGltZXN0YW1wIjoiMjAyNS0wNS0xM1QwMjowMDowMi44MzRaIiwicmVzcG9uc2VfdGV4dCI6Ik5vdyBsZXQncyB1cGRhdGUgdGhlIExvZ2luIGNsYXNzIHRvIG9wZW4gdGhlIEZvcmdvdFBhc3N3b3JkIGRpYWxvZyB3aGVuIHRoZSBmb3Jnb3QgcGFzc3dvcmQgYnV0dG9uIGlzIGNsaWNrZWQ6XG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiMWMyZGFkYTktMzgwNi00MGNiLWEyZDYtMjYxOWFmZjJmNTQ2IiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV8wMTNUWnA2SmJvZmNBQXZIMmJHSEhaYjMiLCJ0b29sX25hbWUiOiJzdHItcmVwbGFjZS1lZGl0b3IiLCJpbnB1dF9qc29uIjoie1wiY29tbWFuZFwiOiBcInZpZXdcIiwgXCJwYXRoXCI6IFwic3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vTG9naW4uamF2YVwiLCBcInZpZXdfcmFuZ2VcIjogWzE3MCwgMTkwXX0iLCJtY3Bfc2VydmVyX25hbWUiOiIiLCJtY3BfdG9vbF9uYW1lIjoiIn19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiIifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJIZXJlJ3MgdGhlIHJlc3VsdCBvZiBydW5uaW5nIGBjYXQgLW5gIG9uIHNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL0xvZ2luLmphdmE6XG4gICAxNzBcdCAgICAgICAgICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVTZXF1ZW50aWFsR3JvdXAoKVxuICAgMTcxXHQgICAgICAgICAgICAgICAgICAgICAgICAuYWRkR2FwKDMsIDMsIDMpXG4gICAxNzJcdCAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQoakxhYmVsMykpXG4gICAxNzNcdCAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudCh0eHRVc2VyTmFtZSwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LkRFRkFVTFRfU0laRSwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUpKVxuICAgMTc0XHQgICAgICAgICAgICAgICAgLmFkZEdhcCgxOCwgMTgsIDE4KVxuICAgMTc1XHQgICAgICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVQYXJhbGxlbEdyb3VwKGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LkFsaWdubWVudC5MRUFESU5HKVxuICAgMTc2XHQgICAgICAgICAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlU2VxdWVudGlhbEdyb3VwKClcbiAgIDE3N1x0ICAgICAgICAgICAgICAgICAgICAgICAgLmFkZEdhcCgzLCAzLCAzKVxuICAgMTc4XHQgICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGpMYWJlbDQpKVxuICAgMTc5XHQgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQodHh0UGFzc3dvcmQsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5ERUZBVUxUX1NJWkUsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFKSlcbiAgIDE4MFx0ICAgICAgICAgICAgICAgIC5hZGRHYXAoMzAsIDMwLCAzMClcblRvdGFsIGxpbmVzIGluIGZpbGU6IDI5MVxuIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV8wMVBmUXhXS1JQTW5iZjRiMlhnTHMyNTUifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJFOi9Ib2NUYXAvMDJfSkFWQS8wM19Qcm9qZWN0L0ludGVybmV0IE1hbmdlbWVudCBTeXN0ZW0iLCJmb2xkZXJSb290IjoiRTovSG9jVGFwLzAyX0pBVkEvMDNfUHJvamVjdC9JbnRlcm5ldCBNYW5nZW1lbnQgU3lzdGVtIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwidGltZXN0YW1wIjoiMjAyNS0wNS0xM1QwMjowMDowNy43OThaIiwicmVzcG9uc2VfdGV4dCI6IiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiI2NmY3NTAyYi0zZmY0LTQ0MGItYjA2Ny04Zjk4NzQ4M2ZlZDUiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1XzAxMmlLWWhFU2tUbVUzWHRXSjQ4SjUxSiIsInRvb2xfbmFtZSI6InN0ci1yZXBsYWNlLWVkaXRvciIsImlucHV0X2pzb24iOiJ7XCJjb21tYW5kXCI6IFwidmlld1wiLCBcInBhdGhcIjogXCJzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9Mb2dpbi5qYXZhXCIsIFwidmlld19yYW5nZVwiOiBbMTcwLCAyMDBdfSIsIm1jcF9zZXJ2ZXJfbmFtZSI6IiIsIm1jcF90b29sX25hbWUiOiIifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IkhlcmUncyB0aGUgcmVzdWx0IG9mIHJ1bm5pbmcgYGNhdCAtbmAgb24gc3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vTG9naW4uamF2YTpcbiAgIDE3MFx0ICAgICAgICAgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVNlcXVlbnRpYWxHcm91cCgpXG4gICAxNzFcdCAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRHYXAoMywgMywgMylcbiAgIDE3Mlx0ICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChqTGFiZWwzKSlcbiAgIDE3M1x0ICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KHR4dFVzZXJOYW1lLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuREVGQVVMVF9TSVpFLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSkpXG4gICAxNzRcdCAgICAgICAgICAgICAgICAuYWRkR2FwKDE4LCAxOCwgMTgpXG4gICAxNzVcdCAgICAgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVBhcmFsbGVsR3JvdXAoamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuQWxpZ25tZW50LkxFQURJTkcpXG4gICAxNzZcdCAgICAgICAgICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVTZXF1ZW50aWFsR3JvdXAoKVxuICAgMTc3XHQgICAgICAgICAgICAgICAgICAgICAgICAuYWRkR2FwKDMsIDMsIDMpXG4gICAxNzhcdCAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQoakxhYmVsNCkpXG4gICAxNzlcdCAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudCh0eHRQYXNzd29yZCwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LkRFRkFVTFRfU0laRSwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUpKVxuICAgMTgwXHQgICAgICAgICAgICAgICAgLmFkZEdhcCgzMCwgMzAsIDMwKVxuICAgMTgxXHQgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChqU2VwYXJhdG9yMiwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUsIDEwLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSlcbiAgIDE4Mlx0ICAgICAgICAgICAgICAgIC5hZGRHYXAoMTIsIDEyLCAxMilcbiAgIDE4M1x0ICAgICAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlUGFyYWxsZWxHcm91cChqYXZheC5zd2luZy5Hcm91cExheW91dC5BbGlnbm1lbnQuTEVBRElORylcbiAgIDE4NFx0ICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGJ0blNpZ251cCwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUsIDM1LCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSlcbiAgIDE4NVx0ICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGJ0bkxvZ2luLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSwgMzUsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFKSlcbiAgIDE4Nlx0ICAgICAgICAgICAgICAgIC5hZGRHYXAoMTIsIDEyLCAxMilcbiAgIDE4N1x0ICAgICAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlUGFyYWxsZWxHcm91cChqYXZheC5zd2luZy5Hcm91cExheW91dC5BbGlnbm1lbnQuTEVBRElORylcbiAgIDE4OFx0ICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGJ0bkZvcmdvdFBhc3N3b3JkKVxuICAgMTg5XHQgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQoYnRuRXhpdCkpKVxuICAgMTkwXHQgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGpMYWJlbDUsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFLCA2MzAsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFKVxuVG90YWwgbGluZXMgaW4gZmlsZTogMjkxXG4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1XzAxM1RacDZKYm9mY0FBdkgyYkdISFpiMyJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkU6L0hvY1RhcC8wMl9KQVZBLzAzX1Byb2plY3QvSW50ZXJuZXQgTWFuZ2VtZW50IFN5c3RlbSIsImZvbGRlclJvb3QiOiJFOi9Ib2NUYXAvMDJfSkFWQS8wM19Qcm9qZWN0L0ludGVybmV0IE1hbmdlbWVudCBTeXN0ZW0ifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJ0aW1lc3RhbXAiOiIyMDI1LTA1LTEzVDAyOjAwOjEyLjM2OFoiLCJyZXNwb25zZV90ZXh0IjoiIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6IjIxYjVjNTllLWMxMTctNDI2NS04ZWE0LTg0YmQ1MTk0MmNiZiIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfMDFXekE2WlJMbmlZaDhacXlxbjFkSFZwIiwidG9vbF9uYW1lIjoic3RyLXJlcGxhY2UtZWRpdG9yIiwiaW5wdXRfanNvbiI6IntcImNvbW1hbmRcIjogXCJ2aWV3XCIsIFwicGF0aFwiOiBcInNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL0xvZ2luLmphdmFcIiwgXCJ2aWV3X3JhbmdlXCI6IFsyMjAsIDI0MF19IiwibWNwX3NlcnZlcl9uYW1lIjoiIiwibWNwX3Rvb2xfbmFtZSI6IiJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiSGVyZSdzIHRoZSByZXN1bHQgb2YgcnVubmluZyBgY2F0IC1uYCBvbiBzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9Mb2dpbi5qYXZhOlxuICAgMTcwXHQgICAgICAgICAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlU2VxdWVudGlhbEdyb3VwKClcbiAgIDE3MVx0ICAgICAgICAgICAgICAgICAgICAgICAgLmFkZEdhcCgzLCAzLCAzKVxuICAgMTcyXHQgICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGpMYWJlbDMpKVxuICAgMTczXHQgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQodHh0VXNlck5hbWUsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5ERUZBVUxUX1NJWkUsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFKSlcbiAgIDE3NFx0ICAgICAgICAgICAgICAgIC5hZGRHYXAoMTgsIDE4LCAxOClcbiAgIDE3NVx0ICAgICAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlUGFyYWxsZWxHcm91cChqYXZheC5zd2luZy5Hcm91cExheW91dC5BbGlnbm1lbnQuTEVBRElORylcbiAgIDE3Nlx0ICAgICAgICAgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVNlcXVlbnRpYWxHcm91cCgpXG4gICAxNzdcdCAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRHYXAoMywgMywgMylcbiAgIDE3OFx0ICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChqTGFiZWw0KSlcbiAgIDE3OVx0ICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KHR4dFBhc3N3b3JkLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuREVGQVVMVF9TSVpFLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSkpXG4gICAxODBcdCAgICAgICAgICAgICAgICAuYWRkR2FwKDMwLCAzMCwgMzApXG4gICAxODFcdCAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGpTZXBhcmF0b3IyLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSwgMTAsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFKVxuICAgMTgyXHQgICAgICAgICAgICAgICAgLmFkZEdhcCgxMiwgMTIsIDEyKVxuICAgMTgzXHQgICAgICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVQYXJhbGxlbEdyb3VwKGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LkFsaWdubWVudC5MRUFESU5HKVxuICAgMTg0XHQgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQoYnRuU2lnbnVwLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSwgMzUsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFKVxuICAgMTg1XHQgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQoYnRuTG9naW4sIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFLCAzNSwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUpKVxuICAgMTg2XHQgICAgICAgICAgICAgICAgLmFkZEdhcCgxMiwgMTIsIDEyKVxuICAgMTg3XHQgICAgICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVQYXJhbGxlbEdyb3VwKGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LkFsaWdubWVudC5MRUFESU5HKVxuICAgMTg4XHQgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQoYnRuRm9yZ290UGFzc3dvcmQpXG4gICAxODlcdCAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChidG5FeGl0KSkpXG4gICAxOTBcdCAgICAgICAgICAgIC5hZGRDb21wb25lbnQoakxhYmVsNSwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUsIDYzMCwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUpXG4gICAxOTFcdCAgICAgICAgKTtcbiAgIDE5Mlx0XG4gICAxOTNcdCAgICAgICAgcGFjaygpO1xuICAgMTk0XHQgICAgfS8vIDwvZWRpdG9yLWZvbGQ+Ly9HRU4tRU5EOmluaXRDb21wb25lbnRzXG4gICAxOTVcdFxuICAgMTk2XHQgICAgcHJpdmF0ZSB2b2lkIGJ0bkxvZ2luQWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkxvZ2luQWN0aW9uUGVyZm9ybWVkXG4gICAxOTdcdCAgICAgICAgLy8gVE9ETyBhZGQgeW91ciBoYW5kbGluZyBjb2RlIGhlcmU6XG4gICAxOThcdCAgICAgICAgaWYodmFsaWRhdGVGaWVsZHMoKSkge1xuICAgMTk5XHQgICAgICAgICAgICB0cnl7XG4gICAyMDBcdCAgICAgICAgICAgICAgICBTdHJpbmcgdXNlcm5hbWUgPSB0eHRVc2VyTmFtZS5nZXRUZXh0KCkudHJpbSgpO1xuVG90YWwgbGluZXMgaW4gZmlsZTogMjkxXG4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1XzAxMmlLWWhFU2tUbVUzWHRXSjQ4SjUxSiJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkU6L0hvY1RhcC8wMl9KQVZBLzAzX1Byb2plY3QvSW50ZXJuZXQgTWFuZ2VtZW50IFN5c3RlbSIsImZvbGRlclJvb3QiOiJFOi9Ib2NUYXAvMDJfSkFWQS8wM19Qcm9qZWN0L0ludGVybmV0IE1hbmdlbWVudCBTeXN0ZW0ifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJ0aW1lc3RhbXAiOiIyMDI1LTA1LTEzVDAyOjAwOjE1LjY3N1oiLCJyZXNwb25zZV90ZXh0IjoiIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6ImQzODI2ODdlLTM5Y2EtNDhkYS05MGYyLTdmN2YwOTAwMjE1NCIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfMDFGQ1JHM0tIekQ3MUIyUzNKR1ZSNHNGIiwidG9vbF9uYW1lIjoic3RyLXJlcGxhY2UtZWRpdG9yIiwiaW5wdXRfanNvbiI6IntcImNvbW1hbmRcIjogXCJzdHJfcmVwbGFjZVwiLCBcInBhdGhcIjogXCJzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9Mb2dpbi5qYXZhXCIsIFwic3RyX3JlcGxhY2VfZW50cmllc1wiOiBbe1wib2xkX3N0clwiOiBcIiAgICBwcml2YXRlIHZvaWQgYnRuRm9yZ290UGFzc3dvcmRBY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuRm9yZ290UGFzc3dvcmRBY3Rpb25QZXJmb3JtZWRcXG4gICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxcbiAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5Gb3Jnb3RQYXNzd29yZEFjdGlvblBlcmZvcm1lZFwiLCBcIm5ld19zdHJcIjogXCIgICAgcHJpdmF0ZSB2b2lkIGJ0bkZvcmdvdFBhc3N3b3JkQWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkZvcmdvdFBhc3N3b3JkQWN0aW9uUGVyZm9ybWVkXFxuICAgICAgICAvLyBPcGVuIHRoZSBGb3Jnb3RQYXNzd29yZCBkaWFsb2dcXG4gICAgICAgIEZvcmdvdFBhc3N3b3JkIGZvcmdvdFBhc3N3b3JkRGlhbG9nID0gbmV3IEZvcmdvdFBhc3N3b3JkKHRoaXMsIHRydWUpO1xcbiAgICAgICAgZm9yZ290UGFzc3dvcmREaWFsb2cuc2V0VmlzaWJsZSh0cnVlKTtcXG4gICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuRm9yZ290UGFzc3dvcmRBY3Rpb25QZXJmb3JtZWRcIiwgXCJvbGRfc3RyX3N0YXJ0X2xpbmVfbnVtYmVyXCI6IDIyMSwgXCJvbGRfc3RyX2VuZF9saW5lX251bWJlclwiOiAyMjN9XX0iLCJtY3Bfc2VydmVyX25hbWUiOiIiLCJtY3BfdG9vbF9uYW1lIjoiIn19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiJOb3cgbGV0J3MgdXBkYXRlIHRoZSBidG5Gb3Jnb3RQYXNzd29yZEFjdGlvblBlcmZvcm1lZCBtZXRob2QgdG8gb3BlbiB0aGUgRm9yZ290UGFzc3dvcmQgZGlhbG9nOlxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiSGVyZSdzIHRoZSByZXN1bHQgb2YgcnVubmluZyBgY2F0IC1uYCBvbiBzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9Mb2dpbi5qYXZhOlxuICAgMjIwXHRcbiAgIDIyMVx0ICAgIHByaXZhdGUgdm9pZCBidG5Gb3Jnb3RQYXNzd29yZEFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5Gb3Jnb3RQYXNzd29yZEFjdGlvblBlcmZvcm1lZFxuICAgMjIyXHQgICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxuICAgMjIzXHQgICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuRm9yZ290UGFzc3dvcmRBY3Rpb25QZXJmb3JtZWRcbiAgIDIyNFx0XG4gICAyMjVcdCAgICBwcml2YXRlIHZvaWQgYnRuRXhpdEFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5FeGl0QWN0aW9uUGVyZm9ybWVkXG4gICAyMjZcdCAgICAgICAgLy8gVE9ETyBhZGQgeW91ciBoYW5kbGluZyBjb2RlIGhlcmU6XG4gICAyMjdcdCAgICAgICAgaW50IHJlc3VsdCA9IEpPcHRpb25QYW5lLnNob3dDb25maXJtRGlhbG9nKG51bGwsIFwiQuG6oW4gY8OzIGNo4bqvYyBjaOG6r24gbXXhu5FuIHRob8OhdCBraMO0bmc/XCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuWUVTX05PX09QVElPTiwgSk9wdGlvblBhbmUuUVVFU1RJT05fTUVTU0FHRSk7XG4gICAyMjhcdCAgICBcbiAgIDIyOVx0ICAgICAgICBpZiAocmVzdWx0ID09IEpPcHRpb25QYW5lLllFU19PUFRJT04pIHtcbiAgIDIzMFx0ICAgICAgICAgICAgU3lzdGVtLmV4aXQoMCk7XG4gICAyMzFcdCAgICAgICAgfVxuICAgMjMyXHQgICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuRXhpdEFjdGlvblBlcmZvcm1lZFxuICAgMjMzXHRcbiAgIDIzNFx0ICAgIHByaXZhdGUgdm9pZCBidG5TaWdudXBBY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuU2lnbnVwQWN0aW9uUGVyZm9ybWVkXG4gICAyMzVcdCAgICAgICAgLy8gVE9ETyBhZGQgeW91ciBoYW5kbGluZyBjb2RlIGhlcmU6XG4gICAyMzZcdCAgICAgICAgc2V0VmlzaWJsZShmYWxzZSk7XG4gICAyMzdcdCAgICAgICAgbmV3IFNpZ25VcCgpLnNldFZpc2libGUodHJ1ZSk7XG4gICAyMzhcdCAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5TaWdudXBBY3Rpb25QZXJmb3JtZWRcbiAgIDIzOVx0XG4gICAyNDBcdCAgICAvKipcblRvdGFsIGxpbmVzIGluIGZpbGU6IDI5MVxuIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV8wMVd6QTZaUkxuaVloOFpxeXFuMWRIVnAifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJFOi9Ib2NUYXAvMDJfSkFWQS8wM19Qcm9qZWN0L0ludGVybmV0IE1hbmdlbWVudCBTeXN0ZW0iLCJmb2xkZXJSb290IjoiRTovSG9jVGFwLzAyX0pBVkEvMDNfUHJvamVjdC9JbnRlcm5ldCBNYW5nZW1lbnQgU3lzdGVtIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwidGltZXN0YW1wIjoiMjAyNS0wNS0xM1QwMjowMDoyMC4wNzNaIiwicmVzcG9uc2VfdGV4dCI6Ik5vdyBsZXQncyB1cGRhdGUgdGhlIGJ0bkZvcmdvdFBhc3N3b3JkQWN0aW9uUGVyZm9ybWVkIG1ldGhvZCB0byBvcGVuIHRoZSBGb3Jnb3RQYXNzd29yZCBkaWFsb2c6XG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiZTM4ZDIxMGYtYTY4Yi00NzNhLWJjODQtZGJlZDY4NDhmOGZmIiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiIyMgU3VtbWFyeSBvZiBDaGFuZ2VzXG5cbkkndmUgbWFkZSB0aGUgZm9sbG93aW5nIGNoYW5nZXMgdG8gaW1wbGVtZW50IHRoZSBGb3Jnb3RQYXNzd29yZCBmdW5jdGlvbmFsaXR5IGFzIGEgcG9wdXAgd2luZG93OlxuXG4xLiAqKk1vZGlmaWVkIEZvcmdvdFBhc3N3b3JkLmphdmEqKjpcbiAgIC0gQ2hhbmdlZCB0aGUgY2xhc3MgdG8gZXh0ZW5kIEpEaWFsb2cgaW5zdGVhZCBvZiBKRnJhbWVcbiAgIC0gVXBkYXRlZCB0aGUgY29uc3RydWN0b3IgdG8gYWNjZXB0IGEgcGFyZW50IGZyYW1lIGFuZCBtb2RhbCBwYXJhbWV0ZXJcbiAgIC0gU2V0IHRoZSBkaWFsb2cgdG8gYmUgbW9kYWwgYW5kIGNlbnRlcmVkIG9uIHRoZSBwYXJlbnRcbiAgIC0gVXBkYXRlZCB0aGUgRXhpdCBidXR0b24gdG8gc2ltcGx5IGNsb3NlIHRoZSBkaWFsb2dcbiAgIC0gVXBkYXRlZCB0aGUgQ2hhbmdlIFBhc3N3b3JkIGJ1dHRvbiB0byBzaG93IGEgc3VjY2VzcyBtZXNzYWdlIGFuZCBjbG9zZSB0aGUgZGlhbG9nXG4gICAtIFJlbW92ZWQgdGhlIG1haW4gbWV0aG9kIGFzIGl0J3Mgbm90IG5lZWRlZCBmb3IgYSBkaWFsb2dcbiAgIC0gQ2hhbmdlZCB0aGUgZGVmYXVsdCBjbG9zZSBvcGVyYXRpb24gdG8gRElTUE9TRV9PTl9DTE9TRVxuXG4yLiAqKk1vZGlmaWVkIExvZ2luLmphdmEqKjpcbiAgIC0gVXBkYXRlZCB0aGUgRm9yZ290IFBhc3N3b3JkIGJ1dHRvbiBhY3Rpb24gdG8gY3JlYXRlIGFuZCBzaG93IHRoZSBGb3Jnb3RQYXNzd29yZCBkaWFsb2dcblxuIyMgSG93IHRvIFRlc3QgdGhlIENoYW5nZXNcblxuMS4gUnVuIHlvdXIgYXBwbGljYXRpb25cbjIuIEdvIHRvIHRoZSBMb2dpbiBzY3JlZW5cbjMuIENsaWNrIHRoZSBcIlF1w6puIG3huq10IGto4bqpdT9cIiBidXR0b25cbjQuIFRoZSBGb3Jnb3RQYXNzd29yZCBkaWFsb2cgc2hvdWxkIGFwcGVhciBhcyBhIHBvcHVwIHdpbmRvd1xuNS4gRW50ZXIgYSB2YWxpZCBwaG9uZSBudW1iZXIgYW5kIGNsaWNrIFwiS2nhu4NtIHRyYVwiXG42LiBJZiB0aGUgcGhvbmUgbnVtYmVyIGlzIGZvdW5kLCB0aGUgcGFzc3dvcmQgZmllbGRzIHNob3VsZCBhcHBlYXJcbjcuIEVudGVyIGEgbmV3IHBhc3N3b3JkIGFuZCBjb25maXJtIHBhc3N3b3JkXG44LiBDbGljayB0aGUgXCLEkOG7lWkgbeG6rXQga2jhuql1XCIgYnV0dG9uXG45LiBZb3Ugc2hvdWxkIHNlZSBhIHN1Y2Nlc3MgbWVzc2FnZSBhbmQgdGhlIGRpYWxvZyBzaG91bGQgY2xvc2UsIHJldHVybmluZyB5b3UgdG8gdGhlIGxvZ2luIHNjcmVlblxuXG5UaGVzZSBjaGFuZ2VzIGVuc3VyZSB0aGF0IHRoZSBGb3Jnb3RQYXNzd29yZCBmdW5jdGlvbmFsaXR5IGFwcGVhcnMgYXMgYSBtb2RhbCBwb3B1cCB3aW5kb3cgd2hlbiBjbGlja2luZyB0aGUgZm9yZ290IHBhc3N3b3JkIGJ1dHRvbiBmcm9tIHRoZSBsb2dpbiBzY3JlZW4sIHJhdGhlciB0aGFuIGFzIGEgc2VwYXJhdGUgd2luZG93LlxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiU3VjY2Vzc2Z1bGx5IGVkaXRlZCB0aGUgZmlsZSBzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9Mb2dpbi5qYXZhLlxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZSBmb3IgZW50cnkgd2l0aCBpbmRleCBbMF06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgIDIxN1x0XG4gICAyMThcdFxuICAgMjE5XHQgICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuTG9naW5BY3Rpb25QZXJmb3JtZWRcbiAgIDIyMFx0XG4gICAyMjFcdCAgICBwcml2YXRlIHZvaWQgYnRuRm9yZ290UGFzc3dvcmRBY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuRm9yZ290UGFzc3dvcmRBY3Rpb25QZXJmb3JtZWRcbiAgIDIyMlx0ICAgICAgICAvLyBPcGVuIHRoZSBGb3Jnb3RQYXNzd29yZCBkaWFsb2dcbiAgIDIyM1x0ICAgICAgICBGb3Jnb3RQYXNzd29yZCBmb3Jnb3RQYXNzd29yZERpYWxvZyA9IG5ldyBGb3Jnb3RQYXNzd29yZCh0aGlzLCB0cnVlKTtcbiAgIDIyNFx0ICAgICAgICBmb3Jnb3RQYXNzd29yZERpYWxvZy5zZXRWaXNpYmxlKHRydWUpO1xuICAgMjI1XHQgICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuRm9yZ290UGFzc3dvcmRBY3Rpb25QZXJmb3JtZWRcbiAgIDIyNlx0XG4gICAyMjdcdCAgICBwcml2YXRlIHZvaWQgYnRuRXhpdEFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5FeGl0QWN0aW9uUGVyZm9ybWVkXG4gICAyMjhcdCAgICAgICAgLy8gVE9ETyBhZGQgeW91ciBoYW5kbGluZyBjb2RlIGhlcmU6XG4gICAyMjlcdCAgICAgICAgaW50IHJlc3VsdCA9IEpPcHRpb25QYW5lLnNob3dDb25maXJtRGlhbG9nKG51bGwsIFwiQuG6oW4gY8OzIGNo4bqvYyBjaOG6r24gbXXhu5FuIHRob8OhdCBraMO0bmc/XCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuWUVTX05PX09QVElPTiwgSk9wdGlvblBhbmUuUVVFU1RJT05fTUVTU0FHRSk7XG5cblJldmlldyB0aGUgY2hhbmdlcyBhbmQgbWFrZSBzdXJlIHRoZXkgYXJlIGFzIGV4cGVjdGVkIChjb3JyZWN0IGluZGVudGF0aW9uLCBubyBkdXBsaWNhdGUgbGluZXMsIGV0YykuXG5FZGl0IHRoZSBmaWxlIGFnYWluIGlmIG5lY2Vzc2FyeS5cbiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfMDFGQ1JHM0tIekQ3MUIyUzNKR1ZSNHNGIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiRTovSG9jVGFwLzAyX0pBVkEvMDNfUHJvamVjdC9JbnRlcm5ldCBNYW5nZW1lbnQgU3lzdGVtIiwiZm9sZGVyUm9vdCI6IkU6L0hvY1RhcC8wMl9KQVZBLzAzX1Byb2plY3QvSW50ZXJuZXQgTWFuZ2VtZW50IFN5c3RlbSJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInRpbWVzdGFtcCI6IjIwMjUtMDUtMTNUMDI6MDA6MjcuODA2WiIsInJlc3BvbnNlX3RleHQiOiIjIyBTdW1tYXJ5IG9mIENoYW5nZXNcblxuSSd2ZSBtYWRlIHRoZSBmb2xsb3dpbmcgY2hhbmdlcyB0byBpbXBsZW1lbnQgdGhlIEZvcmdvdFBhc3N3b3JkIGZ1bmN0aW9uYWxpdHkgYXMgYSBwb3B1cCB3aW5kb3c6XG5cbjEuICoqTW9kaWZpZWQgRm9yZ290UGFzc3dvcmQuamF2YSoqOlxuICAgLSBDaGFuZ2VkIHRoZSBjbGFzcyB0byBleHRlbmQgSkRpYWxvZyBpbnN0ZWFkIG9mIEpGcmFtZVxuICAgLSBVcGRhdGVkIHRoZSBjb25zdHJ1Y3RvciB0byBhY2NlcHQgYSBwYXJlbnQgZnJhbWUgYW5kIG1vZGFsIHBhcmFtZXRlclxuICAgLSBTZXQgdGhlIGRpYWxvZyB0byBiZSBtb2RhbCBhbmQgY2VudGVyZWQgb24gdGhlIHBhcmVudFxuICAgLSBVcGRhdGVkIHRoZSBFeGl0IGJ1dHRvbiB0byBzaW1wbHkgY2xvc2UgdGhlIGRpYWxvZ1xuICAgLSBVcGRhdGVkIHRoZSBDaGFuZ2UgUGFzc3dvcmQgYnV0dG9uIHRvIHNob3cgYSBzdWNjZXNzIG1lc3NhZ2UgYW5kIGNsb3NlIHRoZSBkaWFsb2dcbiAgIC0gUmVtb3ZlZCB0aGUgbWFpbiBtZXRob2QgYXMgaXQncyBub3QgbmVlZGVkIGZvciBhIGRpYWxvZ1xuICAgLSBDaGFuZ2VkIHRoZSBkZWZhdWx0IGNsb3NlIG9wZXJhdGlvbiB0byBESVNQT1NFX09OX0NMT1NFXG5cbjIuICoqTW9kaWZpZWQgTG9naW4uamF2YSoqOlxuICAgLSBVcGRhdGVkIHRoZSBGb3Jnb3QgUGFzc3dvcmQgYnV0dG9uIGFjdGlvbiB0byBjcmVhdGUgYW5kIHNob3cgdGhlIEZvcmdvdFBhc3N3b3JkIGRpYWxvZ1xuXG4jIyBIb3cgdG8gVGVzdCB0aGUgQ2hhbmdlc1xuXG4xLiBSdW4geW91ciBhcHBsaWNhdGlvblxuMi4gR28gdG8gdGhlIExvZ2luIHNjcmVlblxuMy4gQ2xpY2sgdGhlIFwiUXXDqm4gbeG6rXQga2jhuql1P1wiIGJ1dHRvblxuNC4gVGhlIEZvcmdvdFBhc3N3b3JkIGRpYWxvZyBzaG91bGQgYXBwZWFyIGFzIGEgcG9wdXAgd2luZG93XG41LiBFbnRlciBhIHZhbGlkIHBob25lIG51bWJlciBhbmQgY2xpY2sgXCJLaeG7g20gdHJhXCJcbjYuIElmIHRoZSBwaG9uZSBudW1iZXIgaXMgZm91bmQsIHRoZSBwYXNzd29yZCBmaWVsZHMgc2hvdWxkIGFwcGVhclxuNy4gRW50ZXIgYSBuZXcgcGFzc3dvcmQgYW5kIGNvbmZpcm0gcGFzc3dvcmRcbjguIENsaWNrIHRoZSBcIsSQ4buVaSBt4bqtdCBraOG6qXVcIiBidXR0b25cbjkuIFlvdSBzaG91bGQgc2VlIGEgc3VjY2VzcyBtZXNzYWdlIGFuZCB0aGUgZGlhbG9nIHNob3VsZCBjbG9zZSwgcmV0dXJuaW5nIHlvdSB0byB0aGUgbG9naW4gc2NyZWVuXG5cblRoZXNlIGNoYW5nZXMgZW5zdXJlIHRoYXQgdGhlIEZvcmdvdFBhc3N3b3JkIGZ1bmN0aW9uYWxpdHkgYXBwZWFycyBhcyBhIG1vZGFsIHBvcHVwIHdpbmRvdyB3aGVuIGNsaWNraW5nIHRoZSBmb3Jnb3QgcGFzc3dvcmQgYnV0dG9uIGZyb20gdGhlIGxvZ2luIHNjcmVlbiwgcmF0aGVyIHRoYW4gYXMgYSBzZXBhcmF0ZSB3aW5kb3cuXG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InJlcXVlc3RfaWQiOiI3NWFjZTQ0MC01NTBhLTQ1MTktYTkzNi03MWFmNmM0NzhiMTYiLCJ1dWlkIjoiNzFhYTRlNTgtNmMyOS00NzIyLTk0MTEtOGZkOTY4NzFlODJlIiwiY2hhdEl0ZW1UeXBlIjoiYWdlbnRpYy1jaGVja3BvaW50LWRlbGltaXRlciIsInN0YXR1cyI6InN1Y2Nlc3MiLCJmcm9tVGltZXN0YW1wIjoxNzQ3MTAxMzU5ODQ1LCJ0b1RpbWVzdGFtcCI6MTc0NzEwMTY0MjQzNSwic2Vlbl9zdGF0ZSI6InNlZW4ifSx7InJlcXVlc3RfaWQiOiJlOGZjMGUwMC0zNGNkLTQxOWUtYmY3Ny1mMTI1MTZkMjdjYWQiLCJ1dWlkIjoiMDEzYWNkNWEtN2E4Yy00N2ZiLTg2NGQtNGM5NzcyYzZkMWNmIiwiY2hhdEl0ZW1UeXBlIjoiYWdlbnRpYy1jaGVja3BvaW50LWRlbGltaXRlciIsInN0YXR1cyI6InN1Y2Nlc3MiLCJmcm9tVGltZXN0YW1wIjoxNzQ3MTAxNjQyNDM1LCJ0b1RpbWVzdGFtcCI6MTc0NzE0MTA4MTgwMiwic2Vlbl9zdGF0ZSI6InNlZW4ifV0sImZlZWRiYWNrU3RhdGVzIjp7InRlbXAtZmUtNDNlMmI2NjMtM2EyMy00ZDM2LTlmZDktNGE0Y2I1NzIyZTUzIjp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS1iZjlhYmUxMC1jYjAwLTQ0MDItODE1Ny1iNWM4NzI0Mjk3NDgiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLTNlZjM5N2FhLTUwN2UtNDc4OC1iMmU4LWU1NjQyNGRmNjAyYiI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtMGIzYzdhNmQtYzA0OS00ODM2LTkwMDgtNjM4NmZiOTBhMjJlIjp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS1hMDQ4OWRjMi03OWJiLTQ1MjYtYjZiYi1iOGYyMzAwZWVhNTIiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLTVkNGFmYTk3LTYwMmQtNDcxZC05YmNhLWFjZTg2NDczMjI0YSI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtYTUzYmI0YzAtNWMyZi00ZDA5LWEwZjAtYWFmYzZkNWQ5NmVjIjp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS05MTUxMjY1MC03NDc4LTQ3OTUtOWRkMS02M2Y4MjZkYTJmN2UiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLWVmMzhkYWJjLThjODQtNDk2ZS1iZWMyLWY4OTllMGYwODAzOCI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtOGJhNDFhYzUtM2JlOS00OWYyLTg3NDItYzllOTA2MWI1MGNlIjp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS1kNzE5MzE2YS1iZjNkLTRlMTYtYTNhMi1mMzc1NmE5ZDJkZWIiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLWM1YTRkNGRkLTBhNTYtNDJkYS1iN2QwLTBjNDI1ZjM3ZWI0ZSI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtNDU2MGQzMTEtMjg2NS00MWZjLWEwZGEtODhmNDRiMDliMTgwIjp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS0yMWFjN2MwOS03ZTI4LTQyOGYtODY1ZS0yN2NkYjI4YTYwNzAiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLTlmZTYxMTc5LTVlMmItNDFjOS05NmQ1LWE1NDZiMDBkNDJlMiI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtOGNjYTE2NDgtNDI2My00NDc2LWE3MDctYzk0NzQ3N2VkYzFlIjp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS1iNGRmYzlmMi0zNTM1LTRkNWEtYTIxMC1jZGJhNzBjOTQ1ODAiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLTM2MWQzMWMwLTkxN2QtNDViMy1hNzllLWY5YWJlNjljNDUxYSI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtN2U1ZWZhNWQtZDlmOS00M2M4LWEzOTgtNzVmMmNjNmVkY2JiIjp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS1iNzkwZDQ4Ny0wMjc0LTQyODctYmNjZS0yOGVmMjdlNDIzMWMiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLTkzMjE2YzUxLTFiMWEtNGViNC05YzZmLWZiZWY0ZDg0NGE0YSI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtYWRmNWUxNzYtYjI5Zi00ZmFiLTkxYmMtMzdhZmZkN2I3NWViIjp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS02ZGNjZWU2My05ZWFmLTQ2ZTMtYjA1ZS1jOTM3YTAyZjU2ZDgiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9fSwidG9vbFVzZVN0YXRlcyI6eyJiNTUzZTM4ZC0wNTgxLTRkZmUtOGJmOC0wNTE2MjM3MTRlZDc7dG9vbHVfMDExeFJhYkx4QWRnUjdveUpnOXl6a1hhIjp7InJlcXVlc3RJZCI6ImI1NTNlMzhkLTA1ODEtNGRmZS04YmY4LTA1MTYyMzcxNGVkNyIsInRvb2xVc2VJZCI6InRvb2x1XzAxMXhSYWJMeEFkZ1I3b3lKZzl5emtYYSIsInBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IkhlcmUncyB0aGUgcmVzdWx0IG9mIHJ1bm5pbmcgYGNhdCAtbmAgb24gc3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vRm9yZ290UGFzc3dvcmQuamF2YTpcbiAgICAgMVx0LypcbiAgICAgMlx0ICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9MaWNlbnNlcy9saWNlbnNlLWRlZmF1bHQudHh0IHRvIGNoYW5nZSB0aGlzIGxpY2Vuc2VcbiAgICAgM1x0ICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9HVUlGb3Jtcy9KRnJhbWUuamF2YSB0byBlZGl0IHRoaXMgdGVtcGxhdGVcbiAgICAgNFx0ICovXG4gICAgIDVcdHBhY2thZ2UgaW50ZXJuZXQubWFuZ2VtZW50LnN5c3RlbTtcbiAgICAgNlx0XG4gICAgIDdcdGltcG9ydCBEQU8uU3Vic2NyaWJlckRBTztcbiAgICAgOFx0aW1wb3J0IE1vZGVsLlN1YnNjcmliZXI7XG4gICAgIDlcdGltcG9ydCBqYXZheC5zd2luZy5KT3B0aW9uUGFuZTtcbiAgICAxMFx0aW1wb3J0IGludGVybmV0Lm1hbmdlbWVudC5zeXN0ZW0uTG9naW47XG4gICAgMTFcdFxuICAgIDEyXHQvKipcbiAgICAxM1x0ICpcbiAgICAxNFx0ICogQGF1dGhvciBOZ29jIFRoYW9cbiAgICAxNVx0ICovXG4gICAgMTZcdHB1YmxpYyBjbGFzcyBGb3Jnb3RQYXNzd29yZCBleHRlbmRzIGphdmF4LnN3aW5nLkpGcmFtZSB7XG4gICAgMTdcdCAgICBwcml2YXRlIFN1YnNjcmliZXIgY3VycmVudFN1YnNjcmliZXIgPSBudWxsO1xuICAgIDE4XHQgICAgcHVibGljIFN0cmluZyBwaG9uZVBhdHRlcm4gPSBcIl5bMC05XSokXCI7XG4gICAgMTlcdFxuICAgIDIwXHQgICAgLyoqXG4gICAgMjFcdCAgICAgKiBDcmVhdGVzIG5ldyBmb3JtIEZvcmdvdFBhc3N3b3JkXG4gICAgMjJcdCAgICAgKi9cbiAgICAyM1x0ICAgIHB1YmxpYyBGb3Jnb3RQYXNzd29yZCgpIHtcbiAgICAyNFx0ICAgICAgICBpbml0Q29tcG9uZW50cygpO1xuICAgIDI1XHRcbiAgICAyNlx0ICAgICAgICBidG5FeGl0LnNldFZpc2libGUoZmFsc2UpO1xuICAgIDI3XHQgICAgICAgIGJ0bkNoYW5nZS5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICAyOFx0ICAgICAgICBsYk5ld1Bhc3N3b3JkLnNldFZpc2libGUoZmFsc2UpO1xuICAgIDI5XHQgICAgICAgIGxiQ29uZmlybVBhc3N3b3JkLnNldFZpc2libGUoZmFsc2UpO1xuICAgIDMwXHQgICAgICAgIHR4dFBhc3N3b3JkLnNldFZpc2libGUoZmFsc2UpO1xuICAgIDMxXHQgICAgICAgIHR4dENvbmZpcm1QYXNzd29yZC5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICAzMlx0ICAgIH1cbiAgICAzM1x0XG4gICAgMzRcdCAgICBwdWJsaWMgdm9pZCBjbGVhcigpe1xuICAgIDM1XHQgICAgICAgIHR4dFBhc3N3b3JkLnNldFRleHQoXCJcIik7XG4gICAgMzZcdCAgICAgICAgdHh0UGhvbmUuc2V0VGV4dChcIlwiKTtcbiAgICAzN1x0ICAgICAgICB0eHRDb25maXJtUGFzc3dvcmQuc2V0VGV4dChcIlwiKTtcbiAgICAzOFx0XG4gICAgMzlcdCAgICAgICAgYnRuRXhpdC5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICA0MFx0ICAgICAgICBidG5DaGFuZ2Uuc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgNDFcdCAgICAgICAgbGJOZXdQYXNzd29yZC5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICA0Mlx0ICAgICAgICBsYkNvbmZpcm1QYXNzd29yZC5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICA0M1x0ICAgICAgICB0eHRQYXNzd29yZC5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICA0NFx0ICAgICAgICB0eHRDb25maXJtUGFzc3dvcmQuc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgNDVcdCAgICB9XG4gICAgNDZcdFxuICAgIDQ3XHQgICAgcHVibGljIGJvb2xlYW4gdmFsaWRhdGVQaG9uZSgpe1xuICAgIDQ4XHQgICAgICAgIFN0cmluZyBwaG9uZSA9IHR4dFBob25lLmdldFRleHQoKTtcbiAgICA0OVx0ICAgICAgICBpZihwaG9uZS5sZW5ndGgoKSAhPSAxMCB8fCAhcGhvbmUubWF0Y2hlcyhwaG9uZVBhdHRlcm4pKSB7XG4gICAgNTBcdCAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwiVnVpIGzDsm5nIG5o4bqtcCDEkcO6bmcgxJHhu4tuaCBk4bqhbmcgc+G7kSDEkWnhu4duIHRob+G6oWkhXCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAgNTFcdCAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICA1Mlx0ICAgICAgICB9XG4gICAgNTNcdCAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgNTRcdCAgICB9XG4gICAgNTVcdFxuICAgIDU2XHQgICAgcHVibGljIGJvb2xlYW4gdmFsaWRhdGVGaWVsZHMoKXtcbiAgICA1N1x0ICAgICAgICBTdHJpbmcgcGFzc3dvcmQgPSB0eHRQYXNzd29yZC5nZXRUZXh0KCk7XG4gICAgNThcdCAgICAgICAgU3RyaW5nIGNvbmZpcm1QYXNzd29yZCA9IHR4dENvbmZpcm1QYXNzd29yZC5nZXRUZXh0KCk7XG4gICAgNTlcdFxuICAgIDYwXHQgICAgICAgIGlmKHBhc3N3b3JkLmlzRW1wdHkoKSB8fCBjb25maXJtUGFzc3dvcmQuaXNFbXB0eSgpKXtcbiAgICA2MVx0ICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXCJWdWkgbMOybmcga2jDtG5nIGLhu48gdHLhu5FuZyFcIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgICA2Mlx0ICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIDYzXHQgICAgICAgIH1cbiAgICA2NFx0XG4gICAgNjVcdCAgICAgICAgaWYoIXBhc3N3b3JkLmVxdWFscyhjb25maXJtUGFzc3dvcmQpKXtcbiAgICA2Nlx0ICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXCJN4bqtdCBraOG6qXUgeMOhYyBuaOG6rW4ga2jDtG5nIGto4bubcCFcIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgICA2N1x0ICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIDY4XHQgICAgICAgIH1cbiAgICA2OVx0XG4gICAgNzBcdCAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgNzFcdCAgICB9XG4gICAgNzJcdFxuICAgIDczXHQgICAgLyoqXG4gICAgNzRcdCAgICAgKiBUaGlzIG1ldGhvZCBpcyBjYWxsZWQgZnJvbSB3aXRoaW4gdGhlIGNvbnN0cnVjdG9yIHRvIGluaXRpYWxpemUgdGhlIGZvcm0uXG4gICAgNzVcdCAgICAgKiBXQVJOSU5HOiBEbyBOT1QgbW9kaWZ5IHRoaXMgY29kZS4gVGhlIGNvbnRlbnQgb2YgdGhpcyBtZXRob2QgaXMgYWx3YXlzXG4gICAgNzZcdCAgICAgKiByZWdlbmVyYXRlZCBieSB0aGUgRm9ybSBFZGl0b3IuXG4gICAgNzdcdCAgICAgKi9cbiAgICA3OFx0ICAgIEBTdXBwcmVzc1dhcm5pbmdzKFwidW5jaGVja2VkXCIpXG4gICAgNzlcdCAgICAvLyA8ZWRpdG9yLWZvbGQgZGVmYXVsdHN0YXRlPVwiY29sbGFwc2VkXCIgZGVzYz1cIkdlbmVyYXRlZCBDb2RlXCI+Ly9HRU4tQkVHSU46aW5pdENvbXBvbmVudHNcbiAgICA4MFx0ICAgIHByaXZhdGUgdm9pZCBpbml0Q29tcG9uZW50cygpIHtcbiAgICA4MVx0XG4gICAgODJcdCAgICAgICAgakxhYmVsMSA9IG5ldyBqYXZheC5zd2luZy5KTGFiZWwoKTtcbiAgICA4M1x0ICAgICAgICBqTGFiZWwyID0gbmV3IGphdmF4LnN3aW5nLkpMYWJlbCgpO1xuICAgIDg0XHQgICAgICAgIGxiTmV3UGFzc3dvcmQgPSBuZXcgamF2YXguc3dpbmcuSkxhYmVsKCk7XG4gICAgODVcdCAgICAgICAgbGJDb25maXJtUGFzc3dvcmQgPSBuZXcgamF2YXguc3dpbmcuSkxhYmVsKCk7XG4gICAgODZcdCAgICAgICAgalNlcGFyYXRvcjEgPSBuZXcgamF2YXguc3dpbmcuSlNlcGFyYXRvcigpO1xuICAgIDg3XHQgICAgICAgIHR4dFBob25lID0gbmV3IGphdmF4LnN3aW5nLkpUZXh0RmllbGQoKTtcbiAgICA4OFx0ICAgICAgICBidG5DaGVjayA9IG5ldyBqYXZheC5zd2luZy5KQnV0dG9uKCk7XG4gICAgODlcdCAgICAgICAgdHh0UGFzc3dvcmQgPSBuZXcgamF2YXguc3dpbmcuSlBhc3N3b3JkRmllbGQoKTtcbiAgICA5MFx0ICAgICAgICB0eHRDb25maXJtUGFzc3dvcmQgPSBuZXcgamF2YXguc3dpbmcuSlBhc3N3b3JkRmllbGQoKTtcbiAgICA5MVx0ICAgICAgICBidG5DaGFuZ2UgPSBuZXcgamF2YXguc3dpbmcuSkJ1dHRvbigpO1xuICAgIDkyXHQgICAgICAgIGJ0bkV4aXQgPSBuZXcgamF2YXguc3dpbmcuSkJ1dHRvbigpO1xuICAgIDkzXHRcbiAgICA5NFx0ICAgICAgICBzZXREZWZhdWx0Q2xvc2VPcGVyYXRpb24oamF2YXguc3dpbmcuV2luZG93Q29uc3RhbnRzLkVYSVRfT05fQ0xPU0UpO1xuICAgIDk1XHRcbiAgICA5Nlx0ICAgICAgICBqTGFiZWwxLnNldEZvbnQobmV3IGphdmEuYXd0LkZvbnQoXCJBcmlhbFwiLCAxLCAzNikpOyAvLyBOT0kxOE5cbiAgICA5N1x0ICAgICAgICBqTGFiZWwxLnNldEZvcmVncm91bmQoamF2YXguc3dpbmcuVUlNYW5hZ2VyLmdldERlZmF1bHRzKCkuZ2V0Q29sb3IoXCJBY3Rpb25zLlllbGxvd1wiKSk7XG4gICAgOThcdCAgICAgICAgakxhYmVsMS5zZXRUZXh0KFwixJDhu5RJIE3huqxUIEtI4bqoVVwiKTtcbiAgICA5OVx0XG4gICAxMDBcdCAgICAgICAgakxhYmVsMi5zZXRGb250KG5ldyBqYXZhLmF3dC5Gb250KFwiQXJpYWxcIiwgMSwgMTQpKTsgLy8gTk9JMThOXG4gICAxMDFcdCAgICAgICAgakxhYmVsMi5zZXRUZXh0KFwiU+G7kSDEkWnhu4duIHRob+G6oWk6IFwiKTtcbiAgIDEwMlx0XG4gICAxMDNcdCAgICAgICAgbGJOZXdQYXNzd29yZC5zZXRGb250KG5ldyBqYXZhLmF3dC5Gb250KFwiQXJpYWxcIiwgMSwgMTQpKTsgLy8gTk9JMThOXG4gICAxMDRcdCAgICAgICAgbGJOZXdQYXNzd29yZC5zZXRUZXh0KFwiTeG6rXQga2jhuql1IG3hu5tpOlwiKTtcbiAgIDEwNVx0XG4gICAxMDZcdCAgICAgICAgbGJDb25maXJtUGFzc3dvcmQuc2V0Rm9udChuZXcgamF2YS5hd3QuRm9udChcIkFyaWFsXCIsIDEsIDE0KSk7IC8vIE5PSTE4TlxuICAgMTA3XHQgICAgICAgIGxiQ29uZmlybVBhc3N3b3JkLnNldFRleHQoXCJYw6FjIG5o4bqtbiBt4bqtdCBraOG6qXU6XCIpO1xuICAgMTA4XHRcbiAgIDEwOVx0ICAgICAgICBidG5DaGVjay5zZXRGb250KG5ldyBqYXZhLmF3dC5Gb250KFwiQXJpYWxcIiwgMSwgMTQpKTsgLy8gTk9JMThOXG4gICAxMTBcdCAgICAgICAgYnRuQ2hlY2suc2V0SWNvbihuZXcgamF2YXguc3dpbmcuSW1hZ2VJY29uKGdldENsYXNzKCkuZ2V0UmVzb3VyY2UoXCIvSW1hZ2VzL3NlYXJjaC5wbmdcIikpKTsgLy8gTk9JMThOXG4gICAxMTFcdCAgICAgICAgYnRuQ2hlY2suc2V0VGV4dChcIktp4buDbSB0cmFcIik7XG4gICAxMTJcdCAgICAgICAgYnRuQ2hlY2suc2V0Q3Vyc29yKG5ldyBqYXZhLmF3dC5DdXJzb3IoamF2YS5hd3QuQ3Vyc29yLkhBTkRfQ1VSU09SKSk7XG4gICAxMTNcdCAgICAgICAgYnRuQ2hlY2suYWRkQWN0aW9uTGlzdGVuZXIobmV3IGphdmEuYXd0LmV2ZW50LkFjdGlvbkxpc3RlbmVyKCkge1xuICAgMTE0XHQgICAgICAgICAgICBwdWJsaWMgdm9pZCBhY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7XG4gICAxMTVcdCAgICAgICAgICAgICAgICBidG5DaGVja0FjdGlvblBlcmZvcm1lZChldnQpO1xuICAgMTE2XHQgICAgICAgICAgICB9XG4gICAxMTdcdCAgICAgICAgfSk7XG4gICAxMThcdFxuICAgMTE5XHQgICAgICAgIGJ0bkNoYW5nZS5zZXRGb250KG5ldyBqYXZhLmF3dC5Gb250KFwiQXJpYWxcIiwgMSwgMTQpKTsgLy8gTk9JMThOXG4gICAxMjBcdCAgICAgICAgYnRuQ2hhbmdlLnNldEljb24obmV3IGphdmF4LnN3aW5nLkltYWdlSWNvbihnZXRDbGFzcygpLmdldFJlc291cmNlKFwiL0ltYWdlcy9yZXNldC1wYXNzd29yZC5wbmdcIikpKTsgLy8gTk9JMThOXG4gICAxMjFcdCAgICAgICAgYnRuQ2hhbmdlLnNldFRleHQoXCLEkOG7lWkgbeG6rXQga2jhuql1XCIpO1xuICAgMTIyXHQgICAgICAgIGJ0bkNoYW5nZS5zZXRDdXJzb3IobmV3IGphdmEuYXd0LkN1cnNvcihqYXZhLmF3dC5DdXJzb3IuSEFORF9DVVJTT1IpKTtcbiAgIDEyM1x0ICAgICAgICBidG5DaGFuZ2UuYWRkQWN0aW9uTGlzdGVuZXIobmV3IGphdmEuYXd0LmV2ZW50LkFjdGlvbkxpc3RlbmVyKCkge1xuICAgMTI0XHQgICAgICAgICAgICBwdWJsaWMgdm9pZCBhY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7XG4gICAxMjVcdCAgICAgICAgICAgICAgICBidG5DaGFuZ2VBY3Rpb25QZXJmb3JtZWQoZXZ0KTtcbiAgIDEyNlx0ICAgICAgICAgICAgfVxuICAgMTI3XHQgICAgICAgIH0pO1xuICAgMTI4XHRcbiAgIDEyOVx0ICAgICAgICBidG5FeGl0LnNldEZvbnQobmV3IGphdmEuYXd0LkZvbnQoXCJBcmlhbFwiLCAxLCAxNCkpOyAvLyBOT0kxOE5cbiAgIDEzMFx0ICAgICAgICBidG5FeGl0LnNldEljb24obmV3IGphdmF4LnN3aW5nLkltYWdlSWNvbihnZXRDbGFzcygpLmdldFJlc291cmNlKFwiL0ltYWdlcy9sb2dvdXQucG5nXCIpKSk7IC8vIE5PSTE4TlxuICAgMTMxXHQgICAgICAgIGJ0bkV4aXQuc2V0VGV4dChcIlRob8OhdFwiKTtcbiAgIDEzMlx0ICAgICAgICBidG5FeGl0LnNldEN1cnNvcihuZXcgamF2YS5hd3QuQ3Vyc29yKGphdmEuYXd0LkN1cnNvci5IQU5EX0NVUlNPUikpO1xuICAgMTMzXHQgICAgICAgIGJ0bkV4aXQuYWRkQWN0aW9uTGlzdGVuZXIobmV3IGphdmEuYXd0LmV2ZW50LkFjdGlvbkxpc3RlbmVyKCkge1xuICAgMTM0XHQgICAgICAgICAgICBwdWJsaWMgdm9pZCBhY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7XG4gICAxMzVcdCAgICAgICAgICAgICAgICBidG5FeGl0QWN0aW9uUGVyZm9ybWVkKGV2dCk7XG4gICAxMzZcdCAgICAgICAgICAgIH1cbiAgIDEzN1x0ICAgICAgICB9KTtcbiAgIDEzOFx0XG4gICAxMzlcdCAgICAgICAgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQgbGF5b3V0ID0gbmV3IGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0KGdldENvbnRlbnRQYW5lKCkpO1xuICAgMTQwXHQgICAgICAgIGdldENvbnRlbnRQYW5lKCkuc2V0TGF5b3V0KGxheW91dCk7XG4gICAxNDFcdCAgICAgICAgbGF5b3V0LnNldEhvcml6b250YWxHcm91cChcbiAgIDE0Mlx0ICAgICAgICAgICAgbGF5b3V0LmNyZWF0ZVBhcmFsbGVsR3JvdXAoamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuQWxpZ25tZW50LkxFQURJTkcpXG4gICAxNDNcdCAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlU2VxdWVudGlhbEdyb3VwKClcbiAgIDE0NFx0ICAgICAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlUGFyYWxsZWxHcm91cChqYXZheC5zd2luZy5Hcm91cExheW91dC5BbGlnbm1lbnQuTEVBRElORylcbiAgIDE0NVx0ICAgICAgICAgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVNlcXVlbnRpYWxHcm91cCgpXG4gICAxNDZcdCAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRHYXAoMTEwLCAxMTAsIDExMClcbiAgIDE0N1x0ICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChqTGFiZWwxKSlcbiAgIDE0OFx0ICAgICAgICAgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVNlcXVlbnRpYWxHcm91cCgpXG4gICAxNDlcdCAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRHYXAoNjEsIDYxLCA2MSlcbiAgIDE1MFx0ICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChqU2VwYXJhdG9yMSwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUsIDM3MCwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUpKVxuICAgMTUxXHQgICAgICAgICAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlU2VxdWVudGlhbEdyb3VwKClcbiAgIDE1Mlx0ICAgICAgICAgICAgICAgICAgICAgICAgLmFkZEdhcCg2MSwgNjEsIDYxKVxuICAgMTUzXHQgICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGpMYWJlbDIpXG4gICAxNTRcdCAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRHYXAoNTYsIDU2LCA1NilcbiAgIDE1NVx0ICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudCh0eHRQaG9uZSwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUsIDIxMCwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUpKVxuICAgMTU2XHQgICAgICAgICAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlU2VxdWVudGlhbEdyb3VwKClcbiAgIDE1N1x0ICAgICAgICAgICAgICAgICAgICAgICAgLmFkZEdhcCg2MSwgNjEsIDYxKVxuICAgMTU4XHQgICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGxiTmV3UGFzc3dvcmQpXG4gICAxNTlcdCAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRHYXAoNTcsIDU3LCA1NylcbiAgIDE2MFx0ICAgICAgICAgICAgICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVQYXJhbGxlbEdyb3VwKGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LkFsaWdubWVudC5MRUFESU5HKVxuICAgMTYxXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudCh0eHRQYXNzd29yZCwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUsIDIxMCwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUpXG4gICAxNjJcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVNlcXVlbnRpYWxHcm91cCgpXG4gICAxNjNcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFkZEdhcCgxMDIsIDEwMiwgMTAyKVxuICAgMTY0XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQoYnRuQ2hlY2spKSkpXG4gICAxNjVcdCAgICAgICAgICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVQYXJhbGxlbEdyb3VwKGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LkFsaWdubWVudC5UUkFJTElORywgZmFsc2UpXG4gICAxNjZcdCAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlU2VxdWVudGlhbEdyb3VwKClcbiAgIDE2N1x0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRHYXAoNjAsIDYwLCA2MClcbiAgIDE2OFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQoYnRuRXhpdClcbiAgIDE2OVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRQcmVmZXJyZWRHYXAoamF2YXguc3dpbmcuTGF5b3V0U3R5bGUuQ29tcG9uZW50UGxhY2VtZW50LlJFTEFURUQsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LkRFRkFVTFRfU0laRSwgU2hvcnQuTUFYX1ZBTFVFKVxuICAgMTcwXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChidG5DaGFuZ2UpKVxuICAgMTcxXHQgICAgICAgICAgICAgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVNlcXVlbnRpYWxHcm91cCgpXG4gICAxNzJcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYWRkR2FwKDYxLCA2MSwgNjEpXG4gICAxNzNcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGxiQ29uZmlybVBhc3N3b3JkKVxuICAgMTc0XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFkZEdhcCgxOCwgMTgsIDE4KVxuICAgMTc1XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudCh0eHRDb25maXJtUGFzc3dvcmQsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFLCAyMTEsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFKSkpKVxuICAgMTc2XHQgICAgICAgICAgICAgICAgLmFkZEdhcCg2OSwgNjksIDY5KSlcbiAgIDE3N1x0ICAgICAgICApO1xuICAgMTc4XHQgICAgICAgIGxheW91dC5zZXRWZXJ0aWNhbEdyb3VwKFxuICAgMTc5XHQgICAgICAgICAgICBsYXlvdXQuY3JlYXRlUGFyYWxsZWxHcm91cChqYXZheC5zd2luZy5Hcm91cExheW91dC5BbGlnbm1lbnQuTEVBRElORylcbiAgIDE4MFx0ICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVTZXF1ZW50aWFsR3JvdXAoKVxuICAgMTgxXHQgICAgICAgICAgICAgICAgLmFkZEdhcCg0MCwgNDAsIDQwKVxuICAgMTgyXHQgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChqTGFiZWwxKVxuICAgMTgzXHQgICAgICAgICAgICAgICAgLmFkZEdhcCgxNCwgMTQsIDE0KVxuICAgMTg0XHQgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChqU2VwYXJhdG9yMSwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUsIDEwLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSlcbiAgIDE4NVx0ICAgICAgICAgICAgICAgIC5hZGRHYXAoMTIsIDEyLCAxMilcbiAgIDE4Nlx0ICAgICAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlUGFyYWxsZWxHcm91cChqYXZheC5zd2luZy5Hcm91cExheW91dC5BbGlnbm1lbnQuTEVBRElORylcbiAgIDE4N1x0ICAgICAgICAgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVNlcXVlbnRpYWxHcm91cCgpXG4gICAxODhcdCAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRHYXAoMywgMywgMylcbiAgIDE4OVx0ICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChqTGFiZWwyKSlcbiAgIDE5MFx0ICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KHR4dFBob25lLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuREVGQVVMVF9TSVpFLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSkpXG4gICAxOTFcdCAgICAgICAgICAgICAgICAuYWRkR2FwKDE4LCAxOCwgMTgpXG4gICAxOTJcdCAgICAgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVBhcmFsbGVsR3JvdXAoamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuQWxpZ25tZW50LkxFQURJTkcpXG4gICAxOTNcdCAgICAgICAgICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVTZXF1ZW50aWFsR3JvdXAoKVxuICAgMTk0XHQgICAgICAgICAgICAgICAgICAgICAgICAuYWRkR2FwKDMsIDMsIDMpXG4gICAxOTVcdCAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQobGJOZXdQYXNzd29yZCkpXG4gICAxOTZcdCAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudCh0eHRQYXNzd29yZCwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LkRFRkFVTFRfU0laRSwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUpXG4gICAxOTdcdCAgICAgICAgICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVTZXF1ZW50aWFsR3JvdXAoKVxuICAgMTk4XHQgICAgICAgICAgICAgICAgICAgICAgICAuYWRkR2FwKDIsIDIsIDIpXG4gICAxOTlcdCAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQoYnRuQ2hlY2ssIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFLCAzMCwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUpKSlcbiAgIDIwMFx0ICAgICAgICAgICAgICAgIC5hZGRHYXAoOCwgOCwgOClcbiAgIDIwMVx0ICAgICAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlUGFyYWxsZWxHcm91cChqYXZheC5zd2luZy5Hcm91cExheW91dC5BbGlnbm1lbnQuTEVBRElORylcbiAgIDIwMlx0ICAgICAgICAgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVNlcXVlbnRpYWxHcm91cCgpXG4gICAyMDNcdCAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRHYXAoMywgMywgMylcbiAgIDIwNFx0ICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChsYkNvbmZpcm1QYXNzd29yZCkpXG4gICAyMDVcdCAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudCh0eHRDb25maXJtUGFzc3dvcmQsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5ERUZBVUxUX1NJWkUsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFKSlcbiAgIDIwNlx0ICAgICAgICAgICAgICAgIC5hZGRHYXAoMzAsIDMwLCAzMClcbiAgIDIwN1x0ICAgICAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlUGFyYWxsZWxHcm91cChqYXZheC5zd2luZy5Hcm91cExheW91dC5BbGlnbm1lbnQuQkFTRUxJTkUpXG4gICAyMDhcdCAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChidG5FeGl0LCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSwgMzAsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFKVxuICAgMjA5XHQgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQoYnRuQ2hhbmdlLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSwgMzAsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFKSlcbiAgIDIxMFx0ICAgICAgICAgICAgICAgIC5hZGRDb250YWluZXJHYXAoNDAsIFNob3J0Lk1BWF9WQUxVRSkpXG4gICAyMTFcdCAgICAgICAgKTtcbiAgIDIxMlx0XG4gICAyMTNcdCAgICAgICAgcGFjaygpO1xuICAgMjE0XHQgICAgfS8vIDwvZWRpdG9yLWZvbGQ+Ly9HRU4tRU5EOmluaXRDb21wb25lbnRzXG4gICAyMTVcdFxuICAgMjE2XHQgICAgcHJpdmF0ZSB2b2lkIGJ0bkV4aXRBY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuRXhpdEFjdGlvblBlcmZvcm1lZFxuICAgMjE3XHQgICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxuICAgMjE4XHQgICAgICAgIGludCByZXN1bHQgPSBKT3B0aW9uUGFuZS5zaG93Q29uZmlybURpYWxvZyhudWxsLCBcIkLhuqFuIGPDsyBjaOG6r2MgY2jhuq9uIG114buRbiB0aG/DoXQga2jDtG5nP1wiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLllFU19OT19PUFRJT04sIEpPcHRpb25QYW5lLlFVRVNUSU9OX01FU1NBR0UpO1xuICAgMjE5XHRcbiAgIDIyMFx0ICAgICAgICBpZiAocmVzdWx0ID09IEpPcHRpb25QYW5lLllFU19PUFRJT04pIHtcbiAgIDIyMVx0ICAgICAgICAgICAgbmV3IExvZ2luKCkuc2V0VmlzaWJsZSh0cnVlKTtcbiAgIDIyMlx0ICAgICAgICAgICAgdGhpcy5kaXNwb3NlKCk7XG4gICAyMjNcdCAgICAgICAgfVxuICAgMjI0XHQgICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuRXhpdEFjdGlvblBlcmZvcm1lZFxuICAgMjI1XHRcbiAgIDIyNlx0ICAgIHByaXZhdGUgdm9pZCBidG5DaGVja0FjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5DaGVja0FjdGlvblBlcmZvcm1lZFxuICAgMjI3XHQgICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxuICAgMjI4XHQgICAgICAgIGlmKHZhbGlkYXRlUGhvbmUoKSkge1xuICAgMjI5XHQgICAgICAgICAgICBTdHJpbmcgcGhvbmUgPSB0eHRQaG9uZS5nZXRUZXh0KCk7XG4gICAyMzBcdCAgICAgICAgICAgIGN1cnJlbnRTdWJzY3JpYmVyID0gU3Vic2NyaWJlckRBTy5nZXRCeVBob25lKHBob25lKTtcbiAgIDIzMVx0ICAgICAgICAgICAgXG4gICAyMzJcdCAgICAgICAgICAgIGlmIChjdXJyZW50U3Vic2NyaWJlciAhPSBudWxsKSB7XG4gICAyMzNcdCAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcIlTDrG0gdGjhuqV5IHTDoGkga2hv4bqjbiB24bubaSBz4buRIMSRaeG7h24gdGhv4bqhaSBuw6B5IVwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLklORk9STUFUSU9OX01FU1NBR0UpO1xuICAgMjM0XHRcbiAgIDIzNVx0ICAgICAgICAgICAgICAgIGJ0bkV4aXQuc2V0VmlzaWJsZSh0cnVlKTtcbiAgIDIzNlx0ICAgICAgICAgICAgICAgIGJ0bkNoYW5nZS5zZXRWaXNpYmxlKHRydWUpO1xuICAgMjM3XHQgICAgICAgICAgICAgICAgbGJOZXdQYXNzd29yZC5zZXRWaXNpYmxlKHRydWUpO1xuICAgMjM4XHQgICAgICAgICAgICAgICAgbGJDb25maXJtUGFzc3dvcmQuc2V0VmlzaWJsZSh0cnVlKTtcbiAgIDIzOVx0ICAgICAgICAgICAgICAgIHR4dFBhc3N3b3JkLnNldFZpc2libGUodHJ1ZSk7XG4gICAyNDBcdCAgICAgICAgICAgICAgICB0eHRDb25maXJtUGFzc3dvcmQuc2V0VmlzaWJsZSh0cnVlKTtcbiAgIDI0MVx0XG4gICAyNDJcdCAgICAgICAgICAgICAgICB0eHRQaG9uZS5zZXRFZGl0YWJsZShmYWxzZSk7XG4gICAyNDNcdCAgICAgICAgICAgICAgICBidG5DaGVjay5zZXRFbmFibGVkKGZhbHNlKTtcbiAgIDI0NFx0ICAgICAgICAgICAgfSBlbHNlIHtcbiAgIDI0NVx0ICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwiS2jDtG5nIHTDrG0gdGjhuqV5IHTDoGkga2hv4bqjbiB24bubaSBz4buRIMSRaeG7h24gdGhv4bqhaSBuw6B5IVwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgMjQ2XHQgICAgICAgICAgICB9XG4gICAyNDdcdCAgICAgICAgfVxuICAgMjQ4XHQgICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuQ2hlY2tBY3Rpb25QZXJmb3JtZWRcbiAgIDI0OVx0XG4gICAyNTBcdCAgICBwcml2YXRlIHZvaWQgYnRuQ2hhbmdlQWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkNoYW5nZUFjdGlvblBlcmZvcm1lZFxuICAgMjUxXHQgICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxuICAgMjUyXHQgICAgICAgIGlmKHZhbGlkYXRlRmllbGRzKCkgJiYgY3VycmVudFN1YnNjcmliZXIgPT0gbnVsbCl7XG4gICAyNTNcdCAgICAgICAgICAgIFN0cmluZyBuZXdQYXNzd29yZCA9IHR4dFBhc3N3b3JkLmdldFRleHQoKTtcbiAgIDI1NFx0ICAgICAgICAgICAgXG4gICAyNTVcdCAgICAgICAgICAgIGJvb2xlYW4gaXNTdWNjZXNzID0gU3Vic2NyaWJlckRBTy51cGRhdGVQYXNzd29yZChjdXJyZW50U3Vic2NyaWJlci5nZXRVc2VyX2lkKCksIG5ld1Bhc3N3b3JkKTtcbiAgIDI1Nlx0ICAgICAgICAgICAgXG4gICAyNTdcdCAgICAgICAgICAgIGlmKGlzU3VjY2Vzcykge1xuICAgMjU4XHQgICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXCLEkOG7lWkgbeG6rXQga2jhuql1IHRow6BuaCBjw7RuZyEgVnVpIGzDsm5nIMSRxINuZyBuaOG6rXAgbOG6oWkhXCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuSU5GT1JNQVRJT05fTUVTU0FHRSk7XG4gICAyNTlcdCAgICAgICAgICAgICAgICBuZXcgTG9naW4oKS5zZXRWaXNpYmxlKHRydWUpO1xuICAgMjYwXHQgICAgICAgICAgICAgICAgdGhpcy5kaXNwb3NlKCk7XG4gICAyNjFcdCAgICAgICAgICAgIH0gZWxzZSB7XG4gICAyNjJcdCAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcIsSQ4buVaSBt4bqtdCBraOG6qXUgdGjhuqV0IGLhuqFpfCBWdWkgbMOybmcgdGjhu60gbOG6oWkgc2F1IVwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgMjYzXHQgICAgICAgICAgICB9XG4gICAyNjRcdCAgICAgICAgfVxuICAgMjY1XHQgICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuQ2hhbmdlQWN0aW9uUGVyZm9ybWVkXG4gICAyNjZcdFxuICAgMjY3XHQgICAgLyoqXG4gICAyNjhcdCAgICAgKiBAcGFyYW0gYXJncyB0aGUgY29tbWFuZCBsaW5lIGFyZ3VtZW50c1xuICAgMjY5XHQgICAgICovXG4gICAyNzBcdCAgICBwdWJsaWMgc3RhdGljIHZvaWQgbWFpbihTdHJpbmcgYXJnc1tdKSB7XG4gICAyNzFcdCAgICAgICAgLyogU2V0IHRoZSBOaW1idXMgbG9vayBhbmQgZmVlbCAqL1xuICAgMjcyXHQgICAgICAgIC8vPGVkaXRvci1mb2xkIGRlZmF1bHRzdGF0ZT1cImNvbGxhcHNlZFwiIGRlc2M9XCIgTG9vayBhbmQgZmVlbCBzZXR0aW5nIGNvZGUgKG9wdGlvbmFsKSBcIj5cbiAgIDI3M1x0ICAgICAgICAvKiBJZiBOaW1idXMgKGludHJvZHVjZWQgaW4gSmF2YSBTRSA2KSBpcyBub3QgYXZhaWxhYmxlLCBzdGF5IHdpdGggdGhlIGRlZmF1bHQgbG9vayBhbmQgZmVlbC5cbiAgIDI3NFx0ICAgICAgICAgKiBGb3IgZGV0YWlscyBzZWUgaHR0cDovL2Rvd25sb2FkLm9yYWNsZS5jb20vamF2YXNlL3R1dG9yaWFsL3Vpc3dpbmcvbG9va2FuZGZlZWwvcGxhZi5odG1sXG4gICAyNzVcdCAgICAgICAgICovXG4gICAyNzZcdCAgICAgICAgdHJ5IHtcbiAgIDI3N1x0ICAgICAgICAgICAgZm9yIChqYXZheC5zd2luZy5VSU1hbmFnZXIuTG9va0FuZEZlZWxJbmZvIGluZm8gOiBqYXZheC5zd2luZy5VSU1hbmFnZXIuZ2V0SW5zdGFsbGVkTG9va0FuZEZlZWxzKCkpIHtcbiAgIDI3OFx0ICAgICAgICAgICAgICAgIGlmIChcIk5pbWJ1c1wiLmVxdWFscyhpbmZvLmdldE5hbWUoKSkpIHtcbiAgIDI3OVx0ICAgICAgICAgICAgICAgICAgICBqYXZheC5zd2luZy5VSU1hbmFnZXIuc2V0TG9va0FuZEZlZWwoaW5mby5nZXRDbGFzc05hbWUoKSk7XG4gICAyODBcdCAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAyODFcdCAgICAgICAgICAgICAgICB9XG4gICAyODJcdCAgICAgICAgICAgIH1cbiAgIDI4M1x0ICAgICAgICB9IGNhdGNoIChDbGFzc05vdEZvdW5kRXhjZXB0aW9uIGV4KSB7XG4gICAyODRcdCAgICAgICAgICAgIGphdmEudXRpbC5sb2dnaW5nLkxvZ2dlci5nZXRMb2dnZXIoRm9yZ290UGFzc3dvcmQuY2xhc3MuZ2V0TmFtZSgpKS5sb2coamF2YS51dGlsLmxvZ2dpbmcuTGV2ZWwuU0VWRVJFLCBudWxsLCBleCk7XG4gICAyODVcdCAgICAgICAgfSBjYXRjaCAoSW5zdGFudGlhdGlvbkV4Y2VwdGlvbiBleCkge1xuICAgMjg2XHQgICAgICAgICAgICBqYXZhLnV0aWwubG9nZ2luZy5Mb2dnZXIuZ2V0TG9nZ2VyKEZvcmdvdFBhc3N3b3JkLmNsYXNzLmdldE5hbWUoKSkubG9nKGphdmEudXRpbC5sb2dnaW5nLkxldmVsLlNFVkVSRSwgbnVsbCwgZXgpO1xuICAgMjg3XHQgICAgICAgIH0gY2F0Y2ggKElsbGVnYWxBY2Nlc3NFeGNlcHRpb24gZXgpIHtcbiAgIDI4OFx0ICAgICAgICAgICAgamF2YS51dGlsLmxvZ2dpbmcuTG9nZ2VyLmdldExvZ2dlcihGb3Jnb3RQYXNzd29yZC5jbGFzcy5nZXROYW1lKCkpLmxvZyhqYXZhLnV0aWwubG9nZ2luZy5MZXZlbC5TRVZFUkUsIG51bGwsIGV4KTtcbiAgIDI4OVx0ICAgICAgICB9IGNhdGNoIChqYXZheC5zd2luZy5VbnN1cHBvcnRlZExvb2tBbmRGZWVsRXhjZXB0aW9uIGV4KSB7XG4gICAyOTBcdCAgICAgICAgICAgIGphdmEudXRpbC5sb2dnaW5nLkxvZ2dlci5nZXRMb2dnZXIoRm9yZ290UGFzc3dvcmQuY2xhc3MuZ2V0TmFtZSgpKS5sb2coamF2YS51dGlsLmxvZ2dpbmcuTGV2ZWwuU0VWRVJFLCBudWxsLCBleCk7XG4gICAyOTFcdCAgICAgICAgfVxuICAgMjkyXHQgICAgICAgIC8vPC9lZGl0b3ItZm9sZD5cbiAgIDI5M1x0XG4gICAyOTRcdCAgICAgICAgLyogQ3JlYXRlIGFuZCBkaXNwbGF5IHRoZSBmb3JtICovXG4gICAyOTVcdCAgICAgICAgamF2YS5hd3QuRXZlbnRRdWV1ZS5pbnZva2VMYXRlcihuZXcgUnVubmFibGUoKSB7XG4gICAyOTZcdCAgICAgICAgICAgIHB1YmxpYyB2b2lkIHJ1bigpIHtcbiAgIDI5N1x0ICAgICAgICAgICAgICAgIG5ldyBGb3Jnb3RQYXNzd29yZCgpLnNldFZpc2libGUodHJ1ZSk7XG4gICAyOThcdCAgICAgICAgICAgIH1cbiAgIDI5OVx0ICAgICAgICB9KTtcbiAgIDMwMFx0ICAgIH1cbiAgIDMwMVx0XG4gICAzMDJcdCAgICAvLyBWYXJpYWJsZXMgZGVjbGFyYXRpb24gLSBkbyBub3QgbW9kaWZ5Ly9HRU4tQkVHSU46dmFyaWFibGVzXG4gICAzMDNcdCAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpCdXR0b24gYnRuQ2hhbmdlO1xuICAgMzA0XHQgICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KQnV0dG9uIGJ0bkNoZWNrO1xuICAgMzA1XHQgICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KQnV0dG9uIGJ0bkV4aXQ7XG4gICAzMDZcdCAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpMYWJlbCBqTGFiZWwxO1xuICAgMzA3XHQgICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KTGFiZWwgakxhYmVsMjtcbiAgIDMwOFx0ICAgIHByaXZhdGUgamF2YXguc3dpbmcuSlNlcGFyYXRvciBqU2VwYXJhdG9yMTtcbiAgIDMwOVx0ICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkxhYmVsIGxiQ29uZmlybVBhc3N3b3JkO1xuICAgMzEwXHQgICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KTGFiZWwgbGJOZXdQYXNzd29yZDtcbiAgIDMxMVx0ICAgIHByaXZhdGUgamF2YXguc3dpbmcuSlBhc3N3b3JkRmllbGQgdHh0Q29uZmlybVBhc3N3b3JkO1xuICAgMzEyXHQgICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KUGFzc3dvcmRGaWVsZCB0eHRQYXNzd29yZDtcbiAgIDMxM1x0ICAgIHByaXZhdGUgamF2YXguc3dpbmcuSlRleHRGaWVsZCB0eHRQaG9uZTtcbiAgIDMxNFx0ICAgIC8vIEVuZCBvZiB2YXJpYWJsZXMgZGVjbGFyYXRpb24vL0dFTi1FTkQ6dmFyaWFibGVzXG4gICAzMTVcdH1cbiAgIDMxNlx0XG5Ub3RhbCBsaW5lcyBpbiBmaWxlOiAzMTZcbiIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX0sImJmOGM4OTMyLWNiNWQtNGNiYi1iNzliLTM5ZTk0YWFmODE2Mjt0b29sdV8wMVZkZzliSDdxd0ZQa3R1WmZ0YjQxRDEiOnsicmVxdWVzdElkIjoiYmY4Yzg5MzItY2I1ZC00Y2JiLWI3OWItMzllOTRhYWY4MTYyIiwidG9vbFVzZUlkIjoidG9vbHVfMDFWZGc5Ykg3cXdGUGt0dVpmdGI0MUQxIiwicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiVGhlIGZvbGxvd2luZyBjb2RlIHNlY3Rpb25zIHdlcmUgcmV0cmlldmVkOlxuUGF0aDogc3JjL0RBTy9TdWJzY3JpYmVyREFPLmphdmFcbi8qXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0xpY2Vuc2VzL2xpY2Vuc2UtZGVmYXVsdC50eHQgdG8gY2hhbmdlIHRoaXMgbGljZW5zZVxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NsYXNzLmphdmEgdG8gZWRpdCB0aGlzIHRlbXBsYXRlXG4gKi9cbnBhY2thZ2UgREFPO1xuXG5pbXBvcnQgTW9kZWwuU3Vic2NyaWJlcjtcbmltcG9ydCBqYXZhLnV0aWwuTGlzdDtcbmltcG9ydCBqYXZhLnNxbC5QcmVwYXJlZFN0YXRlbWVudDtcbmltcG9ydCBqYXZhLnNxbC5SZXN1bHRTZXQ7XG5pbXBvcnQgamF2YS5zcWwuVGltZXN0YW1wO1xuaW1wb3J0IERBTy5EYk9wZXJhdGlvbnMuU3FsT3BlcmF0aW9uO1xuXG4vKipcbiAqXG4gKiBAYXV0aG9yIE5nb2MgVGhhb1xuICovXG5wdWJsaWMgY2xhc3MgU3Vic2NyaWJlckRBT3tcblxuICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBpbnNlcnQoZmluYWwgU3Vic2NyaWJlciBvYmopIHtcbiAgICAgICAgZmluYWwgaW50IHVzZXJJZCA9IERiT3BlcmF0aW9ucy5nZXROZXh0SWQoXCJVU0VSXCIsIFwidXNlcl9pZFwiKTtcbiAgICAgICAgZmluYWwgaW50IHN1YnNjcmliZXJJZCA9IERiT3BlcmF0aW9ucy5nZXROZXh0SWQoXCJTVUJTQ1JJQkVSXCIsIFwic3Vic2NyaWJlcl9pZFwiKTtcblxuICAgICAgICBvYmouc2V0VXNlcl9pZCh1c2VySWQpO1xuICAgICAgICBvYmouc2V0U3Vic2NyaWJlcl9pZChzdWJzY3JpYmVySWQpO1xuXG4gICAgICAgIFNxbE9wZXJhdGlvbltdIG9wZXJhdGlvbnMgPSBuZXcgU3FsT3BlcmF0aW9uW10ge1xuICAgICAgICAgICAgbmV3IFNxbE9wZXJhdGlvbigpIHtcbiAgICAgICAgICAgICAgICBAT3ZlcnJpZGVcbiAgICAgICAgICAgICAgICBwdWJsaWMgU3RyaW5nIGdldFNxbCgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiSU5TRVJUIElOVE8gVVNFUih1c2VyX2lkLCB1c2VybmFtZSwgcGFzc3dvcmQsIHJvbGUsIGNyZWF0ZWRfYXQsIGlzQWN0aXZlKSBWQUxVRVMgKD8sID8sID8sID8sID8sID8pXCI7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgQE92ZXJyaWRlXG4gICAgICAgICAgICAgICAgcHVibGljIHZvaWQgc2V0UGFyYW1ldGVycyhQcmVwYXJlZFN0YXRlbWVudCBwcykgdGhyb3dzIEV4Y2VwdGlvbiB7XG4gICAgICAgICAgICAgICAgICAgIHBzLnNldEludCgxLCB1c2VySWQpO1xuICAgICAgICAgICAgICAgICAgICBwcy5zZXRTdHJpbmcoMiwgb2JqLmdldFVzZXJuYW1lKCkpO1xuICAgICAgICAgICAgICAgICAgICBwcy5zZXRTdHJpbmcoMywgb2JqLmdldFBhc3N3b3JkKCkpO1xuICAgICAgICAgICAgICAgICAgICBwcy5zZXRTdHJpbmcoNCwgb2JqLmdldFJvbGUoKSk7XG4gICAgICAgICAgICAgICAgICAgIHBzLnNldFRpbWVzdGFtcCg1LCBUaW1lc3RhbXAudmFsdWVPZihvYmouZ2V0Q3JlYXRlX2F0KCkpKTtcbiAgICAgICAgICAgICAgICAgICAgcHMuc2V0Qm9vbGVhbig2LCB0cnVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBuZXcgU3FsT3BlcmF0aW9uKCkge1xuICAgICAgICAgICAgICAgIEBPdmVycmlkZVxuICAgICAgICAgICAgICAgIHB1YmxpYyBTdHJpbmcgZ2V0U3FsKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJJTlNFUlQgSU5UTyBTVUJTQ1JJQkVSIChzdWJzY3JpYmVyX2lkLCBuYW1lLCBhZGRyZXNzLCBwaG9uZSwgdXNlcl9pZCkgVkFMVUVTICg/LCA/LCA/LCA/LCA/KVwiO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIEBPdmVycmlkZVxuICAgICAgICAgICAgICAgIHB1YmxpYyB2b2lkIHNldFBhcmFtZXRlcnMoUHJlcGFyZWRTdGF0ZW1lbnQgcHMpIHRocm93cyBFeGNlcHRpb24ge1xuICAgICAgICAgICAgICAgICAgICBwcy5zZXRJbnQoMSwgc3Vic2NyaWJlcklkKTtcbiAgICAgICAgICAgICAgICAgICAgcHMuc2V0U3RyaW5nKDIsIG9iai5nZXRGdWxsTmFtZSgpKTtcbiAgICAgICAgICAgICAgICAgICAgcHMuc2V0U3RyaW5nKDMsIG9iai5nZXRBZGRyZXNzKCkpO1xuICAgICAgICAgICAgICAgICAgICBwcy5zZXRTdHJpbmcoNCwgb2JqLmdldFBob25lKCkpO1xuICAgICAgICAgICAgICAgICAgICBwcy5zZXRJbnQoNSwgdXNlcklkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgRGJPcGVyYXRpb25zLmV4ZWN1dGVUcmFuc2FjdGlvbihvcGVyYXRpb25zLCBcIsSQxINuZyBrw70gdGjDoG5oIGPDtG5nIVwiKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIHZvaWQgdXBkYXRlKFN1YnNjcmliZXIgb2JqKSB7XG4gICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbihcIk5vdCBzdXBwb3J0ZWQgeWV0LlwiKTsgLy8gR2VuZXJhdGVkIGZyb20gbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NvZGUvR2VuZXJhdGVkTWV0aG9kQm9keVxuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBkZWxldGUoaW50IGlkKSB7XG4gICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbihcIk5vdCBzdXBwb3J0ZWQgeWV0LlwiKTsgLy8gR2VuZXJhdGVkIGZyb20gbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NvZGUvR2VuZXJhdGVkTWV0aG9kQm9keVxuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgU3Vic2NyaWJlciBnZXRCeUlkKGludCBpZCkge1xuICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oXCJOb3Qgc3VwcG9ydGVkIHlldC5cIik7IC8vIEdlbmVyYXRlZCBmcm9tIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9Db2RlL0dlbmVyYXRlZE1ldGhvZEJvZHlcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIExpc3Q8U3Vic2NyaWJlcj4gZ2V0QWxsKCkge1xuICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oXCJOb3Qgc3VwcG9ydGVkIHlldC5cIik7IC8vIEdlbmVyYXRlZCBmcm9tIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9Db2RlL0dlbmVyYXRlZE1ldGhvZEJvZHlcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIFN1YnNjcmliZXIgZ2V0QnlQaG9uZShTdHJpbmcgcGhvbmUpIHtcbiAgICAgICAgU3Vic2NyaWJlciBzdWJzY3JpYmVyID0gbnVsbDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIFJlc3VsdFNldCBycyA9IERiT3BlcmF0aW9ucy5nZXREYXRhKFwiU0VMRUNUIHMuKiwgdS4qIEZST00gU1VCU0NSSUJFUiBzIEpPSU4gVVNFUiB1IE9OIHMudXNlcl9pZCA9IHUudXNlcl9pZCBXSEVSRSBzLnBob25lID0gJ1wiICsgcGhvbmUgKyBcIidcIik7XG4gICAgICAgICAgICBpZiAocnMubmV4dCgpKSB7XG4gICAgICAgICAgICAgICAgc3Vic2NyaWJlciA9IG5ldyBTdWJzY3JpYmVyKCk7XG4gICAgICAgICAgICAgICAgc3Vic2NyaWJlci5zZXRTdWJzY3JpYmVyX2lkKHJzLmdldEludChcInN1YnNjcmliZXJfaWRcIikpO1xuICAgICAgICAgICAgICAgIHN1YnNjcmliZXIuc2V0RnVsbE5hbWUocnMuZ2V0U3RyaW5nKFwibmFtZVwiKSk7XG4gICAgICAgICAgICAgICAgc3Vic2NyaWJlci5zZXRBZGRyZXNzKHJzLmdldFN0cmluZyhcImFkZHJlc3NcIikpO1xuICAgICAgICAgICAgICAgIHN1YnNjcmliZXIuc2V0UGhvbmUocnMuZ2V0U3RyaW5nKFwicGhvbmVcIikpO1xuICAgICAgICAgICAgICAgIHN1YnNjcmliZXIuc2V0VXNlcl9pZChycy5nZXRJbnQoXCJ1c2VyX2lkXCIpKTtcbiAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLnNldFVzZXJuYW1lKHJzLmdldFN0cmluZyhcInVzZXJuYW1lXCIpKTtcbiAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLnNldFBhc3N3b3JkKHJzLmdldFN0cmluZyhcInBhc3N3b3JkXCIpKTtcbiAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLnNldFJvbGUocnMuZ2V0U3RyaW5nKFwicm9sZVwiKSk7XG4gICAgICAgICAgICAgICAgc3Vic2NyaWJlci5zZXRJc0FjdGl2ZShycy5nZXRCb29sZWFuKFwiaXNBY3RpdmVcIikpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZXgpIHtcbiAgICAgICAgICAgIGV4LnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdWJzY3JpYmVyO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgYm9vbGVhbiB1cGRhdGVQYXNzd29yZChpbnQgdXNlcklkLCBTdHJpbmcgbmV3UGFzc3dvcmQpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIFN0cmluZyBxdWVyeSA9IFwiVVBEQVRFIFVTRVIgU0VUIHBhc3N3b3JkID0gJ1wiICsgbmV3UGFzc3dvcmQgKyBcIicgV0hFUkUgdXNlcl9pZCA9IFwiICsgdXNlcklkO1xuICAgICAgICAgICAgRGJPcGVyYXRpb25zLnNldERhdGFPckRlbGV0ZShxdWVyeSwgXCJD4bqtcCBuaOG6rXQgbeG6rXQga2jhuql1IHRow6BuaCBjw7RuZyFcIik7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGV4KSB7XG4gICAgICAgICAgICBleC5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi4uLlxuUGF0aDogc3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vRm9yZ290UGFzc3dvcmQuamF2YVxuLypcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvTGljZW5zZXMvbGljZW5zZS1kZWZhdWx0LnR4dCB0byBjaGFuZ2UgdGhpcyBsaWNlbnNlXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0dVSUZvcm1zL0pGcmFtZS5qYXZhIHRvIGVkaXQgdGhpcyB0ZW1wbGF0ZVxuICovXG5wYWNrYWdlIGludGVybmV0Lm1hbmdlbWVudC5zeXN0ZW07XG5cbmltcG9ydCBEQU8uU3Vic2NyaWJlckRBTztcbmltcG9ydCBNb2RlbC5TdWJzY3JpYmVyO1xuaW1wb3J0IGphdmF4LnN3aW5nLkpPcHRpb25QYW5lO1xuaW1wb3J0IGludGVybmV0Lm1hbmdlbWVudC5zeXN0ZW0uTG9naW47XG4uLi5cblxuICAgIHB1YmxpYyBib29sZWFuIHZhbGlkYXRlUGhvbmUoKXtcbiAgICAgICAgU3RyaW5nIHBob25lID0gdHh0UGhvbmUuZ2V0VGV4dCgpO1xuICAgICAgICBpZihwaG9uZS5sZW5ndGgoKSAhPSAxMCB8fCAhcGhvbmUubWF0Y2hlcyhwaG9uZVBhdHRlcm4pKSB7XG4gICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcIlZ1aSBsw7JuZyBuaOG6rXAgxJHDum5nIMSR4buLbmggZOG6oW5nIHPhu5EgxJFp4buHbiB0aG/huqFpIVwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbi4uLlxuXG4gICAgcHJpdmF0ZSB2b2lkIGJ0bkV4aXRBY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuRXhpdEFjdGlvblBlcmZvcm1lZFxuICAgICAgICAvLyBUT0RPIGFkZCB5b3VyIGhhbmRsaW5nIGNvZGUgaGVyZTpcbiAgICAgICAgaW50IHJlc3VsdCA9IEpPcHRpb25QYW5lLnNob3dDb25maXJtRGlhbG9nKG51bGwsIFwiQuG6oW4gY8OzIGNo4bqvYyBjaOG6r24gbXXhu5FuIHRob8OhdCBraMO0bmc/XCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuWUVTX05PX09QVElPTiwgSk9wdGlvblBhbmUuUVVFU1RJT05fTUVTU0FHRSk7XG5cbiAgICAgICAgaWYgKHJlc3VsdCA9PSBKT3B0aW9uUGFuZS5ZRVNfT1BUSU9OKSB7XG4gICAgICAgICAgICBuZXcgTG9naW4oKS5zZXRWaXNpYmxlKHRydWUpO1xuICAgICAgICAgICAgdGhpcy5kaXNwb3NlKCk7XG4gICAgICAgIH1cbiAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5FeGl0QWN0aW9uUGVyZm9ybWVkXG5cbiAgICBwcml2YXRlIHZvaWQgYnRuQ2hlY2tBY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuQ2hlY2tBY3Rpb25QZXJmb3JtZWRcbiAgICAgICAgLy8gVE9ETyBhZGQgeW91ciBoYW5kbGluZyBjb2RlIGhlcmU6XG4gICAgICAgIGlmKHZhbGlkYXRlUGhvbmUoKSkge1xuICAgICAgICAgICAgU3RyaW5nIHBob25lID0gdHh0UGhvbmUuZ2V0VGV4dCgpO1xuICAgICAgICAgICAgY3VycmVudFN1YnNjcmliZXIgPSBTdWJzY3JpYmVyREFPLmdldEJ5UGhvbmUocGhvbmUpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoY3VycmVudFN1YnNjcmliZXIgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwiVMOsbSB0aOG6pXkgdMOgaSBraG/huqNuIHbhu5tpIHPhu5EgxJFp4buHbiB0aG/huqFpIG7DoHkhXCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuSU5GT1JNQVRJT05fTUVTU0FHRSk7XG5cbiAgICAgICAgICAgICAgICBidG5FeGl0LnNldFZpc2libGUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgYnRuQ2hhbmdlLnNldFZpc2libGUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgbGJOZXdQYXNzd29yZC5zZXRWaXNpYmxlKHRydWUpO1xuICAgICAgICAgICAgICAgIGxiQ29uZmlybVBhc3N3b3JkLnNldFZpc2libGUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgdHh0UGFzc3dvcmQuc2V0VmlzaWJsZSh0cnVlKTtcbiAgICAgICAgICAgICAgICB0eHRDb25maXJtUGFzc3dvcmQuc2V0VmlzaWJsZSh0cnVlKTtcblxuICAgICAgICAgICAgICAgIHR4dFBob25lLnNldEVkaXRhYmxlKGZhbHNlKTtcbiAgICAgICAgICAgICAgICBidG5DaGVjay5zZXRFbmFibGVkKGZhbHNlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXCJLaMO0bmcgdMOsbSB0aOG6pXkgdMOgaSBraG/huqNuIHbhu5tpIHPhu5EgxJFp4buHbiB0aG/huqFpIG7DoHkhXCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5DaGVja0FjdGlvblBlcmZvcm1lZFxuXG4gICAgcHJpdmF0ZSB2b2lkIGJ0bkNoYW5nZUFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5DaGFuZ2VBY3Rpb25QZXJmb3JtZWRcbiAgICAgICAgLy8gVE9ETyBhZGQgeW91ciBoYW5kbGluZyBjb2RlIGhlcmU6XG4gICAgICAgIGlmKHZhbGlkYXRlRmllbGRzKCkgJiYgY3VycmVudFN1YnNjcmliZXIgPT0gbnVsbCl7XG4gICAgICAgICAgICBTdHJpbmcgbmV3UGFzc3dvcmQgPSB0eHRQYXNzd29yZC5nZXRUZXh0KCk7XG4gICAgICAgICAgICBib29sZWFuIGlzU3VjY2VzcyA9IFN1YnNjcmliZXJEQU8udXBkYXRlUGFzc3dvcmQoY3VycmVudFN1YnNjcmliZXIuZ2V0VXNlcl9pZCgpLCBuZXdQYXNzd29yZCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmKGlzU3VjY2Vzcykge1xuICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwixJDhu5VpIG3huq10IGto4bqpdSB0aMOgbmggY8O0bmchIFZ1aSBsw7JuZyDEkcSDbmcgbmjhuq1wIGzhuqFpIVwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLklORk9STUFUSU9OX01FU1NBR0UpO1xuICAgICAgICAgICAgICAgIG5ldyBMb2dpbigpLnNldFZpc2libGUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwb3NlKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwixJDhu5VpIG3huq10IGto4bqpdSB0aOG6pXQgYuG6oWl8IFZ1aSBsw7JuZyB0aOG7rSBs4bqhaSBzYXUhXCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5DaGFuZ2VBY3Rpb25QZXJmb3JtZWRcbi4uLlxuUGF0aDogc3JjL0RBTy9Vc2VyREFPLmphdmFcbi8qXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0xpY2Vuc2VzL2xpY2Vuc2UtZGVmYXVsdC50eHQgdG8gY2hhbmdlIHRoaXMgbGljZW5zZVxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NsYXNzLmphdmEgdG8gZWRpdCB0aGlzIHRlbXBsYXRlXG4gKi9cbnBhY2thZ2UgREFPO1xuXG5pbXBvcnQgTW9kZWwuVXNlcjtcbmltcG9ydCBqYXZhLnV0aWwuTGlzdDtcbmltcG9ydCBqYXZhLnNxbC5QcmVwYXJlZFN0YXRlbWVudDtcbmltcG9ydCBqYXZhLnNxbC5UaW1lc3RhbXA7XG5pbXBvcnQgREFPLkRiT3BlcmF0aW9ucy5TcWxPcGVyYXRpb247XG5pbXBvcnQgamF2YS5zcWwuUmVzdWx0U2V0O1xuLyoqXG4gKlxuICogQGF1dGhvciBOZ29jIFRoYW9cbiAqL1xucHVibGljIGNsYXNzIFVzZXJEQU97XG5cbiAgICBwdWJsaWMgc3RhdGljIHZvaWQgaW5zZXJ0KGZpbmFsIFVzZXIgb2JqKSB7XG4gICAgICAgIGZpbmFsIGludCB1c2VySWQgPSBEYk9wZXJhdGlvbnMuZ2V0TmV4dElkKFwiVVNFUlwiLCBcInVzZXJfaWRcIik7XG4gICAgICAgIFxuICAgICAgICBvYmouc2V0VXNlcl9pZCh1c2VySWQpO1xuICAgICAgICBcbiAgICAgICAgU3FsT3BlcmF0aW9uW10gb3BlcmF0aW9ucyA9IG5ldyBTcWxPcGVyYXRpb25bXSB7XG4gICAgICAgICAgICBuZXcgU3FsT3BlcmF0aW9uKCkge1xuICAgICAgICAgICAgICAgIEBPdmVycmlkZVxuICAgICAgICAgICAgICAgIHB1YmxpYyBTdHJpbmcgZ2V0U3FsKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJJTlNFUlQgSU5UTyBVU0VSKHVzZXJfaWQsIHVzZXJuYW1lLCBwYXNzd29yZCwgcm9sZSwgY3JlYXRlZF9hdCkgVkFMVUVTICg/LCA/LCA/LCA/LCA/KVwiO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIEBPdmVycmlkZVxuICAgICAgICAgICAgICAgIHB1YmxpYyB2b2lkIHNldFBhcmFtZXRlcnMoUHJlcGFyZWRTdGF0ZW1lbnQgcHMpIHRocm93cyBFeGNlcHRpb24ge1xuICAgICAgICAgICAgICAgICAgICBwcy5zZXRJbnQoMSwgdXNlcklkKTtcbiAgICAgICAgICAgICAgICAgICAgcHMuc2V0U3RyaW5nKDIsIG9iai5nZXRVc2VybmFtZSgpKTtcbiAgICAgICAgICAgICAgICAgICAgcHMuc2V0U3RyaW5nKDMsIG9iai5nZXRQYXNzd29yZCgpKTtcbiAgICAgICAgICAgICAgICAgICAgcHMuc2V0U3RyaW5nKDQsIG9iai5nZXRSb2xlKCkpO1xuICAgICAgICAgICAgICAgICAgICBwcy5zZXRUaW1lc3RhbXAoNSwgVGltZXN0YW1wLnZhbHVlT2Yob2JqLmdldENyZWF0ZV9hdCgpKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgRGJPcGVyYXRpb25zLmV4ZWN1dGVUcmFuc2FjdGlvbihvcGVyYXRpb25zLCBcIlRow6ptIHTDoGkga2hv4bqjbiB0aMOgbmggY8O0bmchXCIpO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgc3RhdGljIGJvb2xlYW4gbG9naW4oZmluYWwgU3RyaW5nIHVzZXJOYW1lLCBmaW5hbCBTdHJpbmcgcGFzc3dvcmQpIHtcbiAgICAgICAgVXNlciB1c2VyID0gbnVsbDtcbiAgICAgICAgYm9vbGVhbiBpc1ZhbGlkID0gZmFsc2U7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBSZXN1bHRTZXQgcnMgPSBEYk9wZXJhdGlvbnMuZ2V0RGF0YShcIlNFTEVDVCAqIEZST00gVVNFUiBXSEVSRSB1c2VybmFtZSA9ICdcIiArIHVzZXJOYW1lICsgXCInIGFuZCBwYXNzd29yZCA9ICdcIiArIHBhc3N3b3JkICtcIidcIik7XG4gICAgICAgICAgICB3aGlsZSAocnMubmV4dCgpKSB7XG4gICAgICAgICAgICAgICAgYm9vbGVhbiBpc0FjdGl2ZSA9IHJzLmdldEJvb2xlYW4oXCJpc0FjdGl2ZVwiKTtcbiAgICAgICAgICAgICAgICBpZiAoaXNBY3RpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgaXNWYWxpZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBleCkge1xuICAgICAgICAgICAgZXgucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgIH0gXG5cbiAgICAgICAgcmV0dXJuIGlzVmFsaWQ7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyB2b2lkIHVwZGF0ZShVc2VyIG9iaikge1xuICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oXCJOb3Qgc3VwcG9ydGVkIHlldC5cIik7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyB2b2lkIGRlbGV0ZShpbnQgaWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgVXNlciBnZXRCeUlkKGludCBpZCkge1xuICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oXCJOb3Qgc3VwcG9ydGVkIHlldC5cIik7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBMaXN0PFVzZXI+IGdldEFsbCgpIHtcbiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpO1xuICAgIH1cbiAgICBcbn1cbi4uLlxuUGF0aDogc3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vU2lnblVwLmphdmFcbi8qXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0xpY2Vuc2VzL2xpY2Vuc2UtZGVmYXVsdC50eHQgdG8gY2hhbmdlIHRoaXMgbGljZW5zZVxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9HVUlGb3Jtcy9KRnJhbWUuamF2YSB0byBlZGl0IHRoaXMgdGVtcGxhdGVcbiAqL1xucGFja2FnZSBpbnRlcm5ldC5tYW5nZW1lbnQuc3lzdGVtO1xuXG5pbXBvcnQgREFPLlN1YnNjcmliZXJEQU87XG5pbXBvcnQgTW9kZWwuU3Vic2NyaWJlcjtcbmltcG9ydCBqYXZhLnRpbWUuTG9jYWxEYXRlVGltZTtcbmltcG9ydCBqYXZheC5zd2luZy5KT3B0aW9uUGFuZTtcblxuLyoqXG4gKlxuICogQGF1dGhvciBOZ29jIFRoYW9cbiAqL1xucHVibGljIGNsYXNzIFNpZ25VcCBleHRlbmRzIGphdmF4LnN3aW5nLkpGcmFtZSB7XG5cbiAgICBwdWJsaWMgU3RyaW5nIHBob25lUGF0dGVybiA9IFwiXlswLTldKiRcIjtcbiAgICBwcml2YXRlIFN0cmluZyBERUZBVUxUX1JPTEUgPSBcInVzZXJcIjtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIG5ldyBmb3JtIFNpZ25JblxuICAgICAqL1xuICAgIHB1YmxpYyBTaWduVXAoKSB7XG4gICAgICAgIGluaXRDb21wb25lbnRzKCk7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgY2xlYXIoKXtcbiAgICAgICAgdHh0TmFtZS5zZXRUZXh0KFwiXCIpO1xuICAgICAgICB0eHRVc2VyTmFtZS5zZXRUZXh0KFwiXCIpO1xuICAgICAgICB0eHRQYXNzd29yZC5zZXRUZXh0KFwiXCIpO1xuICAgICAgICB0eHRBZGRyZXNzLnNldFRleHQoXCJcIik7XG4gICAgICAgIHR4dFBob25lLnNldFRleHQoXCJcIik7XG4gICAgfVxuLi4uXG5cbiAgICBwcml2YXRlIHZvaWQgYnRuU2lnbnVwQWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0blNpZ251cEFjdGlvblBlcmZvcm1lZFxuICAgICAgICAvLyBUT0RPIGFkZCB5b3VyIGhhbmRsaW5nIGNvZGUgaGVyZTpcbiAgICAgICAgaWYgKHZhbGlkYXRlRmllbGRzKCkpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgU3Vic2NyaWJlciBzdWIgPSBuZXcgU3Vic2NyaWJlcigpO1xuICAgICAgICAgICAgICAgIHN1Yi5zZXRGdWxsTmFtZSh0eHROYW1lLmdldFRleHQoKSk7XG4gICAgICAgICAgICAgICAgc3ViLnNldFVzZXJuYW1lKHR4dFVzZXJOYW1lLmdldFRleHQoKSk7XG4gICAgICAgICAgICAgICAgc3ViLnNldFBhc3N3b3JkKHR4dFBhc3N3b3JkLmdldFRleHQoKSk7XG4gICAgICAgICAgICAgICAgc3ViLnNldFJvbGUoREVGQVVMVF9ST0xFKTtcbiAgICAgICAgICAgICAgICBzdWIuc2V0QWRkcmVzcyh0eHRBZGRyZXNzLmdldFRleHQoKSk7XG4gICAgICAgICAgICAgICAgc3ViLnNldFBob25lKHR4dFBob25lLmdldFRleHQoKSk7XG4gICAgICAgICAgICAgICAgc3ViLnNldENyZWF0ZV9hdChMb2NhbERhdGVUaW1lLm5vdygpKTtcbiAgICAgICAgICAgICAgICBTdWJzY3JpYmVyREFPLmluc2VydChzdWIpO1xuICAgICAgICAgICAgICAgIGNsZWFyKCk7XG4gICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZXgpIHtcbiAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcIkzhu5dpOiBcIiArIGV4LmdldE1lc3NhZ2UoKSwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0blNpZ251cEFjdGlvblBlcmZvcm1lZFxuLi4uXG5QYXRoOiBzcmMvREFPL0RiT3BlcmF0aW9ucy5qYXZhXG5wYWNrYWdlIERBTztcblxuaW1wb3J0IGphdmEuc3FsLkNvbm5lY3Rpb247XG5pbXBvcnQgamF2YS5zcWwuUHJlcGFyZWRTdGF0ZW1lbnQ7XG5pbXBvcnQgamF2YS5zcWwuUmVzdWx0U2V0O1xuaW1wb3J0IGphdmEuc3FsLlN0YXRlbWVudDtcbmltcG9ydCBqYXZheC5zd2luZy5KT3B0aW9uUGFuZTtcblxucHVibGljIGNsYXNzIERiT3BlcmF0aW9ucyB7XG4gICAgcHVibGljIHN0YXRpYyB2b2lkIHNldERhdGFPckRlbGV0ZShTdHJpbmcgcXVlcnksIFN0cmluZyBtc2cpIHtcbiAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcbiAgICAgICAgU3RhdGVtZW50IHN0ID0gbnVsbDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbm4gPSBDb25uZWN0aW9uUHJvdmlkZXIuZ2V0Q29ubigpO1xuICAgICAgICAgICAgc3QgPSBjb25uLmNyZWF0ZVN0YXRlbWVudCgpO1xuICAgICAgICAgICAgc3QuZXhlY3V0ZVVwZGF0ZShxdWVyeSk7XG5cbiAgICAgICAgICAgIGlmKCFtc2cuZXF1YWxzKFwiXCIpKSB7XG4gICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgbXNnLCBcIk1lc3NhZ2VcIiwgSk9wdGlvblBhbmUuSU5GT1JNQVRJT05fTUVTU0FHRSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBleCkge1xuICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgZXgsIFwiTWVzc2FnZVwiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKHN0ICE9IG51bGwpIHN0LmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgaWYgKGNvbm4gIT0gbnVsbCkgY29ubi5jbG9zZSgpO1xuICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyBzdGF0aWMgUmVzdWx0U2V0IGdldERhdGEoU3RyaW5nIHF1ZXJ5KXtcbiAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcbiAgICAgICAgU3RhdGVtZW50IHN0ID0gbnVsbDtcbiAgICAgICAgUmVzdWx0U2V0IHJzID0gbnVsbDtcbiAgICAgICAgXG4gICAgICAgIHRyeXtcbiAgICAgICAgICAgIGNvbm4gPSBDb25uZWN0aW9uUHJvdmlkZXIuZ2V0Q29ubigpO1xuICAgICAgICAgICAgc3QgPSBjb25uLmNyZWF0ZVN0YXRlbWVudCgpO1xuICAgICAgICAgICAgcnMgPSBzdC5leGVjdXRlUXVlcnkocXVlcnkpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXR1cm4gcnM7XG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBleCl7XG4gICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBleCwgXCJNZXNzYWdlXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH0gXG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBpbnQgZ2V0TmV4dElkKFN0cmluZyB0YWJsZU5hbWUsIFN0cmluZyBpZENvbHVtbk5hbWUpIHtcbiAgICAgICAgaW50IG5leHRJZCA9IDE7XG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgICAgIFN0YXRlbWVudCBzdG10ID0gbnVsbDtcbiAgICAgICAgUmVzdWx0U2V0IHJzID0gbnVsbDtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29ubiA9IENvbm5lY3Rpb25Qcm92aWRlci5nZXRDb25uKCk7XG4gICAgICAgICAgICBzdG10ID0gY29ubi5jcmVhdGVTdGF0ZW1lbnQoKTtcbiAgICAgICAgICAgIFN0cmluZyBxdWVyeSA9IFwiU0VMRUNUIE1BWChcIiArIGlkQ29sdW1uTmFtZSArIFwiKSBBUyBtYXhfaWQgRlJPTSBcIiArIHRhYmxlTmFtZTtcbiAgICAgICAgICAgIHJzID0gc3RtdC5leGVjdXRlUXVlcnkocXVlcnkpO1xuXG4gICAgICAgICAgICBpZiAocnMubmV4dCgpKSB7XG4gICAgICAgICAgICAgICAgaW50IG1heElkID0gcnMuZ2V0SW50KFwibWF4X2lkXCIpO1xuICAgICAgICAgICAgICAgIG5leHRJZCA9IG1heElkICsgMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIGUsIFwiRXJyb3JcIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmIChycyAhPSBudWxsKSBycy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIGlmIChzdG10ICE9IG51bGwpIHN0bXQuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICBpZiAoY29ubiAhPSBudWxsKSBjb25uLmNsb3NlKCk7XG4gICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbmV4dElkO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgYm9vbGVhbiBleGVjdXRlVHJhbnNhY3Rpb24oU3FsT3BlcmF0aW9uW10gb3BlcmF0aW9ucywgU3RyaW5nIHN1Y2Nlc3NNc2cpIHtcbiAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcbiAgICAgICAgYm9vbGVhbiBzdWNjZXNzID0gZmFsc2U7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbm4gPSBDb25uZWN0aW9uUHJvdmlkZXIuZ2V0Q29ubigpO1xuICAgICAgICAgICAgY29ubi5zZXRBdXRvQ29tbWl0KGZhbHNlKTtcblxuICAgICAgICAgICAgZm9yIChTcWxPcGVyYXRpb24gb3BlcmF0aW9uIDogb3BlcmF0aW9ucykge1xuICAgICAgICAgICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHBzID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KG9wZXJhdGlvbi5nZXRTcWwoKSk7XG4gICAgICAgICAgICAgICAgb3BlcmF0aW9uLnNldFBhcmFtZXRlcnMocHMpO1xuICAgICAgICAgICAgICAgIHBzLmV4ZWN1dGVVcGRhdGUoKTtcbiAgICAgICAgICAgICAgICBwcy5jbG9zZSgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25uLmNvbW1pdCgpO1xuICAgICAgICAgICAgc3VjY2VzcyA9IHRydWU7XG5cbiAgICAgICAgICAgIGlmIChzdWNjZXNzTXNnICE9IG51bGwgJiYgIXN1Y2Nlc3NNc2cuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgc3VjY2Vzc01zZywgXCJUaMOgbmggY8O0bmdcIiwgSk9wdGlvblBhbmUuSU5GT1JNQVRJT05fTUVTU0FHRSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmIChjb25uICE9IG51bGwpIGNvbm4ucm9sbGJhY2soKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiByb2xsYmFja0V4KSB7XG4gICAgICAgICAgICAgICAgcm9sbGJhY2tFeC5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXCJFcnJvcjogXCIgKyBlLmdldE1lc3NhZ2UoKSwgXCJM4buXaVwiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmIChjb25uICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY29ubi5zZXRBdXRvQ29tbWl0KHRydWUpO1xuICAgICAgICAgICAgICAgICAgICBjb25uLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHN1Y2Nlc3M7XG4gICAgfVxuXG4gICAgcHVibGljIGludGVyZmFjZSBTcWxPcGVyYXRpb24ge1xuICAgICAgICBTdHJpbmcgZ2V0U3FsKCk7XG4gICAgICAgIHZvaWQgc2V0UGFyYW1ldGVycyhQcmVwYXJlZFN0YXRlbWVudCBwcykgdGhyb3dzIEV4Y2VwdGlvbjtcbiAgICB9XG59XG4uLi5cblBhdGg6IHNyYy9Nb2RlbC9TdWJzY3JpYmVyLmphdmFcbi8qXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0xpY2Vuc2VzL2xpY2Vuc2UtZGVmYXVsdC50eHQgdG8gY2hhbmdlIHRoaXMgbGljZW5zZVxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NsYXNzLmphdmEgdG8gZWRpdCB0aGlzIHRlbXBsYXRlXG4gKi9cbnBhY2thZ2UgTW9kZWw7XG5cbmltcG9ydCBqYXZhLnRpbWUuTG9jYWxEYXRlVGltZTtcblxuLyoqXG4gKlxuICogQGF1dGhvciBOZ29jIFRoYW9cbiAqL1xucHVibGljIGNsYXNzIFN1YnNjcmliZXIgZXh0ZW5kcyBVc2VyIHtcbiAgICBwcml2YXRlIGludCBzdWJzY3JpYmVyX2lkO1xuICAgIHByaXZhdGUgU3RyaW5nIGZ1bGxOYW1lO1xuICAgIHByaXZhdGUgU3RyaW5nIGFkZHJlc3M7XG4gICAgcHJpdmF0ZSBTdHJpbmcgcGhvbmU7XG4gICAgXG4gICAgcHVibGljIFN1YnNjcmliZXIoKSB7XG4gICAgfVxuXG4gICAgcHVibGljIFN1YnNjcmliZXIoaW50IHN1YnNjcmliZXJfaWQsIFN0cmluZyBmdWxsTmFtZSwgU3RyaW5nIGFkZHJlc3MsIFN0cmluZyBwaG9uZSkge1xuICAgICAgICB0aGlzLnN1YnNjcmliZXJfaWQgPSBzdWJzY3JpYmVyX2lkO1xuICAgICAgICB0aGlzLmZ1bGxOYW1lID0gZnVsbE5hbWU7XG4gICAgICAgIHRoaXMuYWRkcmVzcyA9IGFkZHJlc3M7XG4gICAgICAgIHRoaXMucGhvbmUgPSBwaG9uZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgU3Vic2NyaWJlcihpbnQgc3Vic2NyaWJlcl9pZCwgU3RyaW5nIGZ1bGxOYW1lLCBTdHJpbmcgYWRkcmVzcywgU3RyaW5nIHBob25lLCBpbnQgdXNlcl9pZCwgU3RyaW5nIHVzZXJuYW1lLCBTdHJpbmcgcGFzc3dvcmQsIFN0cmluZyByb2xlLCBMb2NhbERhdGVUaW1lIGNyZWF0ZV9hdCwgYm9vbGVhbiBpc0FjdGl2ZSkge1xuICAgICAgICBzdXBlcih1c2VyX2lkLCB1c2VybmFtZSwgcGFzc3dvcmQsIHJvbGUsIGNyZWF0ZV9hdCwgaXNBY3RpdmUpO1xuICAgICAgICB0aGlzLnN1YnNjcmliZXJfaWQgPSBzdWJzY3JpYmVyX2lkO1xuICAgICAgICB0aGlzLmZ1bGxOYW1lID0gZnVsbE5hbWU7XG4gICAgICAgIHRoaXMuYWRkcmVzcyA9IGFkZHJlc3M7XG4gICAgICAgIHRoaXMucGhvbmUgPSBwaG9uZTtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIGludCBnZXRTdWJzY3JpYmVyX2lkKCkge1xuICAgICAgICByZXR1cm4gc3Vic2NyaWJlcl9pZDtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXRTdWJzY3JpYmVyX2lkKGludCBzdWJzY3JpYmVyX2lkKSB7XG4gICAgICAgIHRoaXMuc3Vic2NyaWJlcl9pZCA9IHN1YnNjcmliZXJfaWQ7XG4gICAgfVxuXG4gICAgcHVibGljIFN0cmluZyBnZXRGdWxsTmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIGZ1bGxOYW1lO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHNldEZ1bGxOYW1lKFN0cmluZyBmdWxsTmFtZSkge1xuICAgICAgICB0aGlzLmZ1bGxOYW1lID0gZnVsbE5hbWU7XG4gICAgfVxuXG4gICAgcHVibGljIFN0cmluZyBnZXRBZGRyZXNzKCkge1xuICAgICAgICByZXR1cm4gYWRkcmVzcztcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXRBZGRyZXNzKFN0cmluZyBhZGRyZXNzKSB7XG4gICAgICAgIHRoaXMuYWRkcmVzcyA9IGFkZHJlc3M7XG4gICAgfVxuXG4gICAgcHVibGljIFN0cmluZyBnZXRQaG9uZSgpIHtcbiAgICAgICAgcmV0dXJuIHBob25lO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHNldFBob25lKFN0cmluZyBwaG9uZSkge1xuICAgICAgICB0aGlzLnBob25lID0gcGhvbmU7XG4gICAgfVxuICAgIFxuICAgIFxufVxuLi4uXG5QYXRoOiBzcmMvREFPL0Nvbm5lY3Rpb25Qcm92aWRlci5qYXZhXG4vKlxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9MaWNlbnNlcy9saWNlbnNlLWRlZmF1bHQudHh0IHRvIGNoYW5nZSB0aGlzIGxpY2Vuc2VcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9DbGFzcy5qYXZhIHRvIGVkaXQgdGhpcyB0ZW1wbGF0ZVxuICovXG5wYWNrYWdlIERBTztcblxuaW1wb3J0IGphdmEuc3FsLio7XG5cbi8qKlxuICpcbiAqIEBhdXRob3IgTmdvYyBUaGFvXG4gKi9cbnB1YmxpYyBjbGFzcyBDb25uZWN0aW9uUHJvdmlkZXIge1xuICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmluZyBVUkwgPSBcImpkYmM6bXlzcWw6Ly8xMjUuMjEyLjIzMS4xODQ6Njk2OS9JbnRlcm5ldERCXCI7XG4gICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nIFVTRVIgPSBcIm1pbnRvcmkwOVwiO1xuICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmluZyBQQVNTV09SRCA9IFwiTWludG9yeTA5QDk2XCI7XG4gICAgXG4gICAgcHVibGljIHN0YXRpYyBDb25uZWN0aW9uIGdldENvbm4oKXtcbiAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgQ2xhc3MuZm9yTmFtZShcImNvbS5teXNxbC5jai5qZGJjLkRyaXZlclwiKTtcbiAgICAgICAgICAgIGNvbm4gPSBEcml2ZXJNYW5hZ2VyLmdldENvbm5lY3Rpb24oVVJMLCBVU0VSLCBQQVNTV09SRCk7XG4gICAgICAgIH0gY2F0Y2ggKENsYXNzTm90Rm91bmRFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgU3lzdGVtLmVyci5wcmludGxuKFwiTXlTUUwgSkRCQyBEcml2ZXIgbm90IGZvdW5kLlwiKTtcbiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBTeXN0ZW0uZXJyLnByaW50bG4oXCJDb25uZWN0aW9uIGZhaWxlZC5cIik7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb25uO1xuICAgIH1cbi4uLlxuUGF0aDogc3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vTG9naW4uamF2YVxuLypcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvTGljZW5zZXMvbGljZW5zZS1kZWZhdWx0LnR4dCB0byBjaGFuZ2UgdGhpcyBsaWNlbnNlXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0dVSUZvcm1zL0pGcmFtZS5qYXZhIHRvIGVkaXQgdGhpcyB0ZW1wbGF0ZVxuICovXG5wYWNrYWdlIGludGVybmV0Lm1hbmdlbWVudC5zeXN0ZW07XG5cbmltcG9ydCBEQU8uVXNlckRBTztcbmltcG9ydCBNb2RlbC5Vc2VyO1xuaW1wb3J0IGphdmF4LnN3aW5nLkpPcHRpb25QYW5lO1xuLi4uXG5QYXRoOiBuYnByb2plY3QvcHJpdmF0ZS9wcml2YXRlLnhtbFxuPD94bWwgdmVyc2lvbj1cIjEuMFwiIGVuY29kaW5nPVwiVVRGLThcIj8+XG48cHJvamVjdC1wcml2YXRlIHhtbG5zPVwiaHR0cDovL3d3dy5uZXRiZWFucy5vcmcvbnMvcHJvamVjdC1wcml2YXRlLzFcIj5cbiAgICA8ZWRpdG9yLWJvb2ttYXJrcyB4bWxucz1cImh0dHA6Ly93d3cubmV0YmVhbnMub3JnL25zL2VkaXRvci1ib29rbWFya3MvMlwiIGxhc3RCb29rbWFya0lkPVwiMFwiLz5cbiAgICA8b3Blbi1maWxlcyB4bWxucz1cImh0dHA6Ly93d3cubmV0YmVhbnMub3JnL25zL3Byb2plY3R1aS1vcGVuLWZpbGVzLzJcIj5cbiAgICAgICAgPGdyb3VwPlxuICAgICAgICAgICAgPGZpbGU+ZmlsZTovRTovSG9jVGFwLzAyX0pBVkEvMDNfUHJvamVjdC9JbnRlcm5ldCUyME1hbmdlbWVudCUyMFN5c3RlbS9zcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9Gb3Jnb3RQYXNzd29yZC5qYXZhLi4uIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiMTY2YWQ5ZmQtZmZkYS00ZGU0LWEyNjUtODExZmEwMjgyNzhhO3Rvb2x1XzAxSHQxOURpRkx2OW9VY2dCenFEcHB6VCI6eyJyZXF1ZXN0SWQiOiIxNjZhZDlmZC1mZmRhLTRkZTQtYTI2NS04MTFmYTAyODI3OGEiLCJ0b29sVXNlSWQiOiJ0b29sdV8wMUh0MTlEaUZMdjlvVWNnQnpxRHBwelQiLCJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJTdWNjZXNzZnVsbHkgZWRpdGVkIHRoZSBmaWxlIHNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL0ZvcmdvdFBhc3N3b3JkLmphdmEuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlIGZvciBlbnRyeSB3aXRoIGluZGV4IFswXTpcblJlcGxhY2VtZW50IHN1Y2Nlc3NmdWwuXG5FZGl0ZWQgc2VjdGlvbiBhZnRlciBJREUgYXV0by1mb3JtYXR0aW5nIHdhcyBhcHBsaWVkOlxuICAgMjQ2XHQgICAgICAgICAgICB9XG4gICAyNDdcdCAgICAgICAgfVxuICAgMjQ4XHQgICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuQ2hlY2tBY3Rpb25QZXJmb3JtZWRcbiAgIDI0OVx0XG4gICAyNTBcdCAgICBwcml2YXRlIHZvaWQgYnRuQ2hhbmdlQWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkNoYW5nZUFjdGlvblBlcmZvcm1lZFxuICAgMjUxXHQgICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxuICAgMjUyXHQgICAgICAgIGlmKHZhbGlkYXRlRmllbGRzKCkgJiYgY3VycmVudFN1YnNjcmliZXIgIT0gbnVsbCl7XG4gICAyNTNcdCAgICAgICAgICAgIFN0cmluZyBuZXdQYXNzd29yZCA9IHR4dFBhc3N3b3JkLmdldFRleHQoKTtcbiAgIDI1NFx0XG4gICAyNTVcdCAgICAgICAgICAgIGJvb2xlYW4gaXNTdWNjZXNzID0gU3Vic2NyaWJlckRBTy51cGRhdGVQYXNzd29yZChjdXJyZW50U3Vic2NyaWJlci5nZXRVc2VyX2lkKCksIG5ld1Bhc3N3b3JkKTtcbiAgIDI1Nlx0XG4gICAyNTdcdCAgICAgICAgICAgIGlmKGlzU3VjY2Vzcykge1xuICAgMjU4XHQgICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXCLEkOG7lWkgbeG6rXQga2jhuql1IHRow6BuaCBjw7RuZyEgVnVpIGzDsm5nIMSRxINuZyBuaOG6rXAgbOG6oWkhXCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuSU5GT1JNQVRJT05fTUVTU0FHRSk7XG4gICAyNTlcdCAgICAgICAgICAgICAgICBuZXcgTG9naW4oKS5zZXRWaXNpYmxlKHRydWUpO1xuICAgMjYwXHQgICAgICAgICAgICAgICAgdGhpcy5kaXNwb3NlKCk7XG4gICAyNjFcdCAgICAgICAgICAgIH0gZWxzZSB7XG4gICAyNjJcdCAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcIsSQ4buVaSBt4bqtdCBraOG6qXUgdGjhuqV0IGLhuqFpISBWdWkgbMOybmcgdGjhu60gbOG6oWkgc2F1IVwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgMjYzXHQgICAgICAgICAgICB9XG4gICAyNjRcdCAgICAgICAgfVxuICAgMjY1XHQgICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuQ2hhbmdlQWN0aW9uUGVyZm9ybWVkXG4gICAyNjZcdFxuICAgMjY3XHQgICAgLyoqXG4gICAyNjhcdCAgICAgKiBAcGFyYW0gYXJncyB0aGUgY29tbWFuZCBsaW5lIGFyZ3VtZW50c1xuICAgMjY5XHQgICAgICovXG5cblJldmlldyB0aGUgY2hhbmdlcyBhbmQgbWFrZSBzdXJlIHRoZXkgYXJlIGFzIGV4cGVjdGVkIChjb3JyZWN0IGluZGVudGF0aW9uLCBubyBkdXBsaWNhdGUgbGluZXMsIGV0YykuXG5FZGl0IHRoZSBmaWxlIGFnYWluIGlmIG5lY2Vzc2FyeS5cbiIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX0sImI0MGI3ODYyLTNhMzUtNGQxMS1iMDIxLWU4MmNlYjA0ODIyMTt0b29sdV8wMTRlbVNBMVJ5dHFleGZqOWZHRTM3TnYiOnsicmVxdWVzdElkIjoiYjQwYjc4NjItM2EzNS00ZDExLWIwMjEtZTgyY2ViMDQ4MjIxIiwidG9vbFVzZUlkIjoidG9vbHVfMDE0ZW1TQTFSeXRxZXhmajlmR0UzN052IiwicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiVGhlIGZvbGxvd2luZyBjb2RlIHNlY3Rpb25zIHdlcmUgcmV0cmlldmVkOlxuUGF0aDogc3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vRm9yZ290UGFzc3dvcmQuamF2YVxuLi4uXG5cbi8qKlxuICpcbiAqIEBhdXRob3IgTmdvYyBUaGFvXG4gKi9cbnB1YmxpYyBjbGFzcyBGb3Jnb3RQYXNzd29yZCBleHRlbmRzIGphdmF4LnN3aW5nLkpGcmFtZSB7XG4gICAgcHJpdmF0ZSBTdWJzY3JpYmVyIGN1cnJlbnRTdWJzY3JpYmVyID0gbnVsbDtcbiAgICBwdWJsaWMgU3RyaW5nIHBob25lUGF0dGVybiA9IFwiXlswLTldKiRcIjtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgbmV3IGZvcm0gRm9yZ290UGFzc3dvcmRcbiAgICAgKi9cbiAgICBwdWJsaWMgRm9yZ290UGFzc3dvcmQoKSB7XG4gICAgICAgIGluaXRDb21wb25lbnRzKCk7XG5cbiAgICAgICAgYnRuRXhpdC5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICAgICAgYnRuQ2hhbmdlLnNldFZpc2libGUoZmFsc2UpO1xuICAgICAgICBsYk5ld1Bhc3N3b3JkLnNldFZpc2libGUoZmFsc2UpO1xuICAgICAgICBsYkNvbmZpcm1QYXNzd29yZC5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICAgICAgdHh0UGFzc3dvcmQuc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgICAgIHR4dENvbmZpcm1QYXNzd29yZC5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBjbGVhcigpe1xuICAgICAgICB0eHRQYXNzd29yZC5zZXRUZXh0KFwiXCIpO1xuICAgICAgICB0eHRQaG9uZS5zZXRUZXh0KFwiXCIpO1xuICAgICAgICB0eHRDb25maXJtUGFzc3dvcmQuc2V0VGV4dChcIlwiKTtcblxuICAgICAgICBidG5FeGl0LnNldFZpc2libGUoZmFsc2UpO1xuICAgICAgICBidG5DaGFuZ2Uuc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgICAgIGxiTmV3UGFzc3dvcmQuc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgICAgIGxiQ29uZmlybVBhc3N3b3JkLnNldFZpc2libGUoZmFsc2UpO1xuICAgICAgICB0eHRQYXNzd29yZC5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICAgICAgdHh0Q29uZmlybVBhc3N3b3JkLnNldFZpc2libGUoZmFsc2UpO1xuICAgIH1cbi4uLlxuXG4gICAgICAgIGpMYWJlbDEgPSBuZXcgamF2YXguc3dpbmcuSkxhYmVsKCk7XG4gICAgICAgIGpMYWJlbDIgPSBuZXcgamF2YXguc3dpbmcuSkxhYmVsKCk7XG4gICAgICAgIGxiTmV3UGFzc3dvcmQgPSBuZXcgamF2YXguc3dpbmcuSkxhYmVsKCk7XG4gICAgICAgIGxiQ29uZmlybVBhc3N3b3JkID0gbmV3IGphdmF4LnN3aW5nLkpMYWJlbCgpO1xuICAgICAgICBqU2VwYXJhdG9yMSA9IG5ldyBqYXZheC5zd2luZy5KU2VwYXJhdG9yKCk7XG4gICAgICAgIHR4dFBob25lID0gbmV3IGphdmF4LnN3aW5nLkpUZXh0RmllbGQoKTtcbiAgICAgICAgYnRuQ2hlY2sgPSBuZXcgamF2YXguc3dpbmcuSkJ1dHRvbigpO1xuICAgICAgICB0eHRQYXNzd29yZCA9IG5ldyBqYXZheC5zd2luZy5KUGFzc3dvcmRGaWVsZCgpO1xuICAgICAgICB0eHRDb25maXJtUGFzc3dvcmQgPSBuZXcgamF2YXguc3dpbmcuSlBhc3N3b3JkRmllbGQoKTtcbiAgICAgICAgYnRuQ2hhbmdlID0gbmV3IGphdmF4LnN3aW5nLkpCdXR0b24oKTtcbiAgICAgICAgYnRuRXhpdCA9IG5ldyBqYXZheC5zd2luZy5KQnV0dG9uKCk7XG5cbiAgICAgICAgc2V0RGVmYXVsdENsb3NlT3BlcmF0aW9uKGphdmF4LnN3aW5nLldpbmRvd0NvbnN0YW50cy5FWElUX09OX0NMT1NFKTtcblxuICAgICAgICBqTGFiZWwxLnNldEZvbnQobmV3IGphdmEuYXd0LkZvbnQoXCJBcmlhbFwiLCAxLCAzNikpOyAvLyBOT0kxOE5cbiAgICAgICAgakxhYmVsMS5zZXRGb3JlZ3JvdW5kKGphdmF4LnN3aW5nLlVJTWFuYWdlci5nZXREZWZhdWx0cygpLmdldENvbG9yKFwiQWN0aW9ucy5ZZWxsb3dcIikpO1xuICAgICAgICBqTGFiZWwxLnNldFRleHQoXCLEkOG7lEkgTeG6rFQgS0jhuqhVXCIpO1xuXG4gICAgICAgIGpMYWJlbDIuc2V0Rm9udChuZXcgamF2YS5hd3QuRm9udChcIkFyaWFsXCIsIDEsIDE0KSk7IC8vIE5PSTE4TlxuICAgICAgICBqTGFiZWwyLnNldFRleHQoXCJT4buRIMSRaeG7h24gdGhv4bqhaTogXCIpO1xuXG4gICAgICAgIGxiTmV3UGFzc3dvcmQuc2V0Rm9udChuZXcgamF2YS5hd3QuRm9udChcIkFyaWFsXCIsIDEsIDE0KSk7IC8vIE5PSTE4TlxuICAgICAgICBsYk5ld1Bhc3N3b3JkLnNldFRleHQoXCJN4bqtdCBraOG6qXUgbeG7m2k6XCIpO1xuXG4gICAgICAgIGxiQ29uZmlybVBhc3N3b3JkLnNldEZvbnQobmV3IGphdmEuYXd0LkZvbnQoXCJBcmlhbFwiLCAxLCAxNCkpOyAvLyBOT0kxOE5cbiAgICAgICAgbGJDb25maXJtUGFzc3dvcmQuc2V0VGV4dChcIljDoWMgbmjhuq1uIG3huq10IGto4bqpdTpcIik7XG5cbiAgICAgICAgYnRuQ2hlY2suc2V0Rm9udChuZXcgamF2YS5hd3QuRm9udChcIkFyaWFsXCIsIDEsIDE0KSk7IC8vIE5PSTE4TlxuICAgICAgICBidG5DaGVjay5zZXRJY29uKG5ldyBqYXZheC5zd2luZy5JbWFnZUljb24oZ2V0Q2xhc3MoKS5nZXRSZXNvdXJjZShcIi9JbWFnZXMvc2VhcmNoLnBuZ1wiKSkpOyAvLyBOT0kxOE5cbiAgICAgICAgYnRuQ2hlY2suc2V0VGV4dChcIktp4buDbSB0cmFcIik7XG4gICAgICAgIGJ0bkNoZWNrLnNldEN1cnNvcihuZXcgamF2YS5hd3QuQ3Vyc29yKGphdmEuYXd0LkN1cnNvci5IQU5EX0NVUlNPUikpO1xuICAgICAgICBidG5DaGVjay5hZGRBY3Rpb25MaXN0ZW5lcihuZXcgamF2YS5hd3QuZXZlbnQuQWN0aW9uTGlzdGVuZXIoKSB7XG4gICAgICAgICAgICBwdWJsaWMgdm9pZCBhY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7XG4gICAgICAgICAgICAgICAgYnRuQ2hlY2tBY3Rpb25QZXJmb3JtZWQoZXZ0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4uLi5cblxuICAgIHByaXZhdGUgdm9pZCBidG5FeGl0QWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkV4aXRBY3Rpb25QZXJmb3JtZWRcbiAgICAgICAgLy8gVE9ETyBhZGQgeW91ciBoYW5kbGluZyBjb2RlIGhlcmU6XG4gICAgICAgIGludCByZXN1bHQgPSBKT3B0aW9uUGFuZS5zaG93Q29uZmlybURpYWxvZyhudWxsLCBcIkLhuqFuIGPDsyBjaOG6r2MgY2jhuq9uIG114buRbiB0aG/DoXQga2jDtG5nP1wiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLllFU19OT19PUFRJT04sIEpPcHRpb25QYW5lLlFVRVNUSU9OX01FU1NBR0UpO1xuXG4gICAgICAgIGlmIChyZXN1bHQgPT0gSk9wdGlvblBhbmUuWUVTX09QVElPTikge1xuICAgICAgICAgICAgbmV3IExvZ2luKCkuc2V0VmlzaWJsZSh0cnVlKTtcbiAgICAgICAgICAgIHRoaXMuZGlzcG9zZSgpO1xuICAgICAgICB9XG4gICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuRXhpdEFjdGlvblBlcmZvcm1lZFxuXG4gICAgcHJpdmF0ZSB2b2lkIGJ0bkNoZWNrQWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkNoZWNrQWN0aW9uUGVyZm9ybWVkXG4gICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxuICAgICAgICBpZih2YWxpZGF0ZVBob25lKCkpIHtcbiAgICAgICAgICAgIFN0cmluZyBwaG9uZSA9IHR4dFBob25lLmdldFRleHQoKTtcbiAgICAgICAgICAgIGN1cnJlbnRTdWJzY3JpYmVyID0gU3Vic2NyaWJlckRBTy5nZXRCeVBob25lKHBob25lKTtcblxuICAgICAgICAgICAgaWYgKGN1cnJlbnRTdWJzY3JpYmVyICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcIlTDrG0gdGjhuqV5IHTDoGkga2hv4bqjbiB24bubaSBz4buRIMSRaeG7h24gdGhv4bqhaSBuw6B5IVwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLklORk9STUFUSU9OX01FU1NBR0UpO1xuXG4gICAgICAgICAgICAgICAgYnRuRXhpdC5zZXRWaXNpYmxlKHRydWUpO1xuICAgICAgICAgICAgICAgIGJ0bkNoYW5nZS5zZXRWaXNpYmxlKHRydWUpO1xuICAgICAgICAgICAgICAgIGxiTmV3UGFzc3dvcmQuc2V0VmlzaWJsZSh0cnVlKTtcbiAgICAgICAgICAgICAgICBsYkNvbmZpcm1QYXNzd29yZC5zZXRWaXNpYmxlKHRydWUpO1xuICAgICAgICAgICAgICAgIHR4dFBhc3N3b3JkLnNldFZpc2libGUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgdHh0Q29uZmlybVBhc3N3b3JkLnNldFZpc2libGUodHJ1ZSk7XG5cbiAgICAgICAgICAgICAgICB0eHRQaG9uZS5zZXRFZGl0YWJsZShmYWxzZSk7XG4gICAgICAgICAgICAgICAgYnRuQ2hlY2suc2V0RW5hYmxlZChmYWxzZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwiS2jDtG5nIHTDrG0gdGjhuqV5IHTDoGkga2hv4bqjbiB24bubaSBz4buRIMSRaeG7h24gdGhv4bqhaSBuw6B5IVwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuQ2hlY2tBY3Rpb25QZXJmb3JtZWRcblxuICAgIHByaXZhdGUgdm9pZCBidG5DaGFuZ2VBY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuQ2hhbmdlQWN0aW9uUGVyZm9ybWVkXG4gICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxuICAgICAgICBpZih2YWxpZGF0ZUZpZWxkcygpICYmIGN1cnJlbnRTdWJzY3JpYmVyICE9IG51bGwpe1xuICAgICAgICAgICAgU3RyaW5nIG5ld1Bhc3N3b3JkID0gdHh0UGFzc3dvcmQuZ2V0VGV4dCgpO1xuXG4gICAgICAgICAgICBib29sZWFuIGlzU3VjY2VzcyA9IFN1YnNjcmliZXJEQU8udXBkYXRlUGFzc3dvcmQoY3VycmVudFN1YnNjcmliZXIuZ2V0VXNlcl9pZCgpLCBuZXdQYXNzd29yZCk7XG5cbiAgICAgICAgICAgIGlmKGlzU3VjY2Vzcykge1xuICAgICAgICAgICAgICAgIG5ldyBMb2dpbigpLnNldFZpc2libGUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwb3NlKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwixJDhu5VpIG3huq10IGto4bqpdSB0aOG6pXQgYuG6oWkhIFZ1aSBsw7JuZyB0aOG7rSBs4bqhaSBzYXUhXCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5DaGFuZ2VBY3Rpb25QZXJmb3JtZWRcbi4uLlxuUGF0aDogc3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vRm9yZ290UGFzc3dvcmQuZm9ybVxuLi4uXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxDb21wb25lbnQgaWQ9XCJidG5FeGl0XCIgbWluPVwiLTJcIiBtYXg9XCItMlwiIGF0dHJpYnV0ZXM9XCIwXCIvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8RW1wdHlTcGFjZSBtYXg9XCIzMjc2N1wiIGF0dHJpYnV0ZXM9XCIwXCIvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8Q29tcG9uZW50IGlkPVwiYnRuQ2hhbmdlXCIgbWluPVwiLTJcIiBtYXg9XCItMlwiIGF0dHJpYnV0ZXM9XCIwXCIvPlxuICAgICAgICAgICAgICAgICAgICAgIDwvR3JvdXA+XG4gICAgICAgICAgICAgICAgICAgICAgPEdyb3VwIHR5cGU9XCIxMDJcIiBhdHRyaWJ1dGVzPVwiMFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8RW1wdHlTcGFjZSBtaW49XCI2MVwiIHByZWY9XCI2MVwiIG1heD1cIi0yXCIgYXR0cmlidXRlcz1cIjBcIi8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxDb21wb25lbnQgaWQ9XCJsYkNvbmZpcm1QYXNzd29yZFwiIG1pbj1cIi0yXCIgbWF4PVwiLTJcIiBhdHRyaWJ1dGVzPVwiMFwiLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPEVtcHR5U3BhY2UgbWluPVwiMThcIiBwcmVmPVwiMThcIiBtYXg9XCItMlwiIGF0dHJpYnV0ZXM9XCIwXCIvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8Q29tcG9uZW50IGlkPVwidHh0Q29uZmlybVBhc3N3b3JkXCIgbWluPVwiLTJcIiBwcmVmPVwiMjExXCIgbWF4PVwiLTJcIiBhdHRyaWJ1dGVzPVwiMFwiLz5cbiAgICAgICAgICAgICAgICAgICAgICA8L0dyb3VwPlxuICAgICAgICAgICAgICAgICAgPC9Hcm91cD5cbiAgICAgICAgICAgICAgPC9Hcm91cD5cbiAgICAgICAgICAgICAgPEVtcHR5U3BhY2UgbWluPVwiLTJcIiBwcmVmPVwiNjlcIiBtYXg9XCItMlwiIGF0dHJpYnV0ZXM9XCIwXCIvPlxuICAgICAgICAgIDwvR3JvdXA+XG4gICAgICA8L0dyb3VwPlxuICAgIDwvRGltZW5zaW9uTGF5b3V0PlxuICAgIDxEaW1lbnNpb25MYXlvdXQgZGltPVwiMVwiPlxuICAgICAgPEdyb3VwIHR5cGU9XCIxMDNcIiBncm91cEFsaWdubWVudD1cIjBcIiBhdHRyaWJ1dGVzPVwiMFwiPlxuICAgICAgICAgIDxHcm91cCB0eXBlPVwiMTAyXCIgYXR0cmlidXRlcz1cIjBcIj5cbiAgICAgICAgICAgICAgPEVtcHR5U3BhY2UgbWluPVwiNDBcIiBwcmVmPVwiNDBcIiBtYXg9XCItMlwiIGF0dHJpYnV0ZXM9XCIwXCIvPlxuLi4uXG4gICAgICAgICAgICAgIDxHcm91cCB0eXBlPVwiMTAzXCIgZ3JvdXBBbGlnbm1lbnQ9XCIzXCIgYXR0cmlidXRlcz1cIjBcIj5cbiAgICAgICAgICAgICAgICAgIDxDb21wb25lbnQgaWQ9XCJidG5FeGl0XCIgYWxpZ25tZW50PVwiM1wiIG1pbj1cIi0yXCIgcHJlZj1cIjMwXCIgbWF4PVwiLTJcIiBhdHRyaWJ1dGVzPVwiMFwiLz5cbiAgICAgICAgICAgICAgICAgIDxDb21wb25lbnQgaWQ9XCJidG5DaGFuZ2VcIiBhbGlnbm1lbnQ9XCIzXCIgbWluPVwiLTJcIiBwcmVmPVwiMzBcIiBtYXg9XCItMlwiIGF0dHJpYnV0ZXM9XCIwXCIvPlxuICAgICAgICAgICAgICA8L0dyb3VwPlxuICAgICAgICAgICAgICA8RW1wdHlTcGFjZSBwcmVmPVwiNDBcIiBtYXg9XCIzMjc2N1wiIGF0dHJpYnV0ZXM9XCIwXCIvPlxuICAgICAgICAgIDwvR3JvdXA+XG4gICAgICA8L0dyb3VwPlxuICAgIDwvRGltZW5zaW9uTGF5b3V0PlxuICA8L0xheW91dD5cbiAgPFN1YkNvbXBvbmVudHM+XG4gICAgPENvbXBvbmVudCBjbGFzcz1cImphdmF4LnN3aW5nLkpMYWJlbFwiIG5hbWU9XCJqTGFiZWwxXCI+XG4gICAgICA8UHJvcGVydGllcz5cbiAgICAgICAgPFByb3BlcnR5IG5hbWU9XCJmb250XCIgdHlwZT1cImphdmEuYXd0LkZvbnRcIiBlZGl0b3I9XCJvcmcubmV0YmVhbnMuYmVhbmluZm8uZWRpdG9ycy5Gb250RWRpdG9yXCI+XG4gICAgICAgICAgPEZvbnQgbmFtZT1cIkFyaWFsXCIgc2l6ZT1cIjM2XCIgc3R5bGU9XCIxXCIvPlxuICAgICAgICA8L1Byb3BlcnR5PlxuICAgICAgICA8UHJvcGVydHkgbmFtZT1cImZvcmVncm91bmRcIiB0eXBlPVwiamF2YS5hd3QuQ29sb3JcIiBlZGl0b3I9XCJvcmcubmV0YmVhbnMuYmVhbmluZm8uZWRpdG9ycy5Db2xvckVkaXRvclwiPlxuICAgICAgICAgIDxDb2xvciBibHVlPVwiMFwiIGdyZWVuPVwiYTJcIiBpZD1cIkFjdGlvbnMuWWVsbG93XCIgcGFsZXR0ZT1cIjNcIiByZWQ9XCJlZFwiIHR5cGU9XCJwYWxldHRlXCIvPlxuICAgICAgICA8L1Byb3BlcnR5PlxuLi4uXG4gICAgPENvbXBvbmVudCBjbGFzcz1cImphdmF4LnN3aW5nLkpQYXNzd29yZEZpZWxkXCIgbmFtZT1cInR4dFBhc3N3b3JkXCI+XG4gICAgPC9Db21wb25lbnQ+XG4gICAgPENvbXBvbmVudCBjbGFzcz1cImphdmF4LnN3aW5nLkpQYXNzd29yZEZpZWxkXCIgbmFtZT1cInR4dENvbmZpcm1QYXNzd29yZFwiPlxuICAgIDwvQ29tcG9uZW50PlxuICAgIDxDb21wb25lbnQgY2xhc3M9XCJqYXZheC5zd2luZy5KQnV0dG9uXCIgbmFtZT1cImJ0bkNoYW5nZVwiPlxuICAgICAgPFByb3BlcnRpZXM+XG4gICAgICAgIDxQcm9wZXJ0eSBuYW1lPVwiZm9udFwiIHR5cGU9XCJqYXZhLmF3dC5Gb250XCIgZWRpdG9yPVwib3JnLm5ldGJlYW5zLmJlYW5pbmZvLmVkaXRvcnMuRm9udEVkaXRvclwiPlxuICAgICAgICAgIDxGb250IG5hbWU9XCJBcmlhbFwiIHNpemU9XCIxNFwiIHN0eWxlPVwiMVwiLz5cbiAgICAgICAgPC9Qcm9wZXJ0eT5cbiAgICAgICAgPFByb3BlcnR5IG5hbWU9XCJpY29uXCIgdHlwZT1cImphdmF4LnN3aW5nLkljb25cIiBlZGl0b3I9XCJvcmcubmV0YmVhbnMubW9kdWxlcy5mb3JtLmVkaXRvcnMyLkljb25FZGl0b3JcIj5cbiAgICAgICAgICA8SW1hZ2UgaWNvblR5cGU9XCIzXCIgbmFtZT1cIi9JbWFnZXMvcmVzZXQtcGFzc3dvcmQucG5nXCIvPlxuICAgICAgICA8L1Byb3BlcnR5PlxuICAgICAgICA8UHJvcGVydHkgbmFtZT1cInRleHRcIiB0eXBlPVwiamF2YS5sYW5nLlN0cmluZ1wiIHZhbHVlPVwiJiN4MTEwOyYjeDFlZDU7aSBtJiN4MWVhZDt0IGtoJiN4MWVhOTt1XCIvPlxuICAgICAgICA8UHJvcGVydHkgbmFtZT1cImN1cnNvclwiIHR5cGU9XCJqYXZhLmF3dC5DdXJzb3JcIiBlZGl0b3I9XCJvcmcubmV0YmVhbnMubW9kdWxlcy5mb3JtLmVkaXRvcnMyLkN1cnNvckVkaXRvclwiPlxuICAgICAgICAgIDxDb2xvciBpZD1cIkhhbmQgQ3Vyc29yXCIvPlxuICAgICAgICA8L1Byb3BlcnR5PlxuICAgICAgPC9Qcm9wZXJ0aWVzPlxuICAgICAgPEV2ZW50cz5cbiAgICAgICAgPEV2ZW50SGFuZGxlciBldmVudD1cImFjdGlvblBlcmZvcm1lZFwiIGxpc3RlbmVyPVwiamF2YS5hd3QuZXZlbnQuQWN0aW9uTGlzdGVuZXJcIiBwYXJhbWV0ZXJzPVwiamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnRcIiBoYW5kbGVyPVwiYnRuQ2hhbmdlQWN0aW9uUGVyZm9ybWVkXCIvPlxuICAgICAgPC9FdmVudHM+XG4gICAgPC9Db21wb25lbnQ+XG4gICAgPENvbXBvbmVudCBjbGFzcz1cImphdmF4LnN3aW5nLkpCdXR0b25cIiBuYW1lPVwiYnRuRXhpdFwiPlxuICAgICAgPFByb3BlcnRpZXM+XG4gICAgICAgIDxQcm9wZXJ0eSBuYW1lPVwiZm9udFwiIHR5cGU9XCJqYXZhLmF3dC5Gb250XCIgZWRpdG9yPVwib3JnLm5ldGJlYW5zLmJlYW5pbmZvLmVkaXRvcnMuRm9udEVkaXRvclwiPlxuICAgICAgICAgIDxGb250IG5hbWU9XCJBcmlhbFwiIHNpemU9XCIxNFwiIHN0eWxlPVwiMVwiLz5cbiAgICAgICAgPC9Qcm9wZXJ0eT5cbiAgICAgICAgPFByb3BlcnR5IG5hbWU9XCJpY29uXCIgdHlwZT1cImphdmF4LnN3aW5nLkljb25cIiBlZGl0b3I9XCJvcmcubmV0YmVhbnMubW9kdWxlcy5mb3JtLmVkaXRvcnMyLkljb25FZGl0b3JcIj5cbiAgICAgICAgICA8SW1hZ2UgaWNvblR5cGU9XCIzXCIgbmFtZT1cIi9JbWFnZXMvbG9nb3V0LnBuZ1wiLz5cbiAgICAgICAgPC9Qcm9wZXJ0eT5cbiAgICAgICAgPFByb3BlcnR5IG5hbWU9XCJ0ZXh0XCIgdHlwZT1cImphdmEubGFuZy5TdHJpbmdcIiB2YWx1ZT1cIlRobyYjeGUxO3RcIi8+XG4uLi5cblBhdGg6IHNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL0xvZ2luLmphdmFcbi8qXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0xpY2Vuc2VzL2xpY2Vuc2UtZGVmYXVsdC50eHQgdG8gY2hhbmdlIHRoaXMgbGljZW5zZVxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9HVUlGb3Jtcy9KRnJhbWUuamF2YSB0byBlZGl0IHRoaXMgdGVtcGxhdGVcbiAqL1xucGFja2FnZSBpbnRlcm5ldC5tYW5nZW1lbnQuc3lzdGVtO1xuXG5pbXBvcnQgREFPLlVzZXJEQU87XG5pbXBvcnQgTW9kZWwuVXNlcjtcbmltcG9ydCBqYXZheC5zd2luZy5KT3B0aW9uUGFuZTtcblxuLyoqXG4gKlxuICogQGF1dGhvciBOZ29jIFRoYW9cbiAqL1xucHVibGljIGNsYXNzIExvZ2luIGV4dGVuZHMgamF2YXguc3dpbmcuSkZyYW1lIHtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgbmV3IGZvcm0gTG9naW5cbiAgICAgKi9cbiAgICBwdWJsaWMgTG9naW4oKSB7XG4gICAgICAgIGluaXRDb21wb25lbnRzKCk7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyB2b2lkIGNsZWFyKCl7XG4gICAgICAgIHR4dFVzZXJOYW1lLnNldFRleHQoXCJcIik7XG4gICAgICAgIHR4dFBhc3N3b3JkLnNldFRleHQoXCJcIik7XG4gICAgfVxuXG4gICAgcHVibGljIGJvb2xlYW4gdmFsaWRhdGVGaWVsZHMoKXtcbiAgICAgICAgU3RyaW5nIHVzZXJOYW1lID0gdHh0VXNlck5hbWUuZ2V0VGV4dCgpO1xuICAgICAgICBTdHJpbmcgcGFzc3dvcmQgPSB0eHRQYXNzd29yZC5nZXRUZXh0KCk7XG5cbiAgICAgICAgaWYodXNlck5hbWUuaXNFbXB0eSgpIHx8IHBhc3N3b3JkLmlzRW1wdHkoKSl7XG4gICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcIlZ1aSBsw7JuZyBraMO0bmcgYuG7jyB0cuG7kW5nIVwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGNhbGxlZCBmcm9tIHdpdGhpbiB0aGUgY29uc3RydWN0b3IgdG8gaW5pdGlhbGl6ZSB0aGUgZm9ybS5cbiAgICAgKiBXQVJOSU5HOiBEbyBOT1QgbW9kaWZ5IHRoaXMgY29kZS4gVGhlIGNvbnRlbnQgb2YgdGhpcyBtZXRob2QgaXMgYWx3YXlzXG4gICAgICogcmVnZW5lcmF0ZWQgYnkgdGhlIEZvcm0gRWRpdG9yLlxuICAgICAqL1xuICAgIEBTdXBwcmVzc1dhcm5pbmdzKFwidW5jaGVja2VkXCIpXG4gICAgLy8gPGVkaXRvci1mb2xkIGRlZmF1bHRzdGF0ZT1cImNvbGxhcHNlZFwiIGRlc2M9XCJHZW5lcmF0ZWQgQ29kZVwiPi8vR0VOLUJFR0lOOmluaXRDb21wb25lbnRzXG4gICAgcHJpdmF0ZSB2b2lkIGluaXRDb21wb25lbnRzKCkge1xuXG4gICAgICAgIGpMYWJlbDEgPSBuZXcgamF2YXguc3dpbmcuSkxhYmVsKCk7XG4gICAgICAgIGpMYWJlbDIgPSBuZXcgamF2YXguc3dpbmcuSkxhYmVsKCk7XG4gICAgICAgIGpMYWJlbDMgPSBuZXcgamF2YXguc3dpbmcuSkxhYmVsKCk7XG4gICAgICAgIGpMYWJlbDQgPSBuZXcgamF2YXguc3dpbmcuSkxhYmVsKCk7XG4gICAgICAgIHR4dFVzZXJOYW1lID0gbmV3IGphdmF4LnN3aW5nLkpUZXh0RmllbGQoKTtcbiAgICAgICAgdHh0UGFzc3dvcmQgPSBuZXcgamF2YXguc3dpbmcuSlBhc3N3b3JkRmllbGQoKTtcbiAgICAgICAgalNlcGFyYXRvcjEgPSBuZXcgamF2YXguc3dpbmcuSlNlcGFyYXRvcigpO1xuICAgICAgICBqU2VwYXJhdG9yMiA9IG5ldyBqYXZheC5zd2luZy5KU2VwYXJhdG9yKCk7XG4gICAgICAgIGJ0bkxvZ2luID0gbmV3IGphdmF4LnN3aW5nLkpCdXR0b24oKTtcbiAgICAgICAgYnRuRm9yZ290UGFzc3dvcmQgPSBuZXcgamF2YXguc3dpbmcuSkJ1dHRvbigpO1xuICAgICAgICBidG5TaWdudXAgPSBuZXcgamF2YXguc3dpbmcuSkJ1dHRvbigpO1xuICAgICAgICBqTGFiZWw1ID0gbmV3IGphdmF4LnN3aW5nLkpMYWJlbCgpO1xuICAgICAgICBidG5FeGl0ID0gbmV3IGphdmF4LnN3aW5nLkpCdXR0b24oKTtcblxuICAgICAgICBzZXREZWZhdWx0Q2xvc2VPcGVyYXRpb24oamF2YXguc3dpbmcuV2luZG93Q29uc3RhbnRzLkVYSVRfT05fQ0xPU0UpO1xuXG4gICAgICAgIGpMYWJlbDEuc2V0Rm9udChuZXcgamF2YS5hd3QuRm9udChcIkFyaWFsXCIsIDEsIDM2KSk7IC8vIE5PSTE4TlxuICAgICAgICBqTGFiZWwxLnNldEZvcmVncm91bmQoamF2YXguc3dpbmcuVUlNYW5hZ2VyLmdldERlZmF1bHRzKCkuZ2V0Q29sb3IoXCJBY3Rpb25zLkJsdWVcIikpO1xuICAgICAgICBqTGFiZWwxLnNldFRleHQoXCLEkMSCTkcgTkjhuqxQXCIpO1xuXG4gICAgICAgIGpMYWJlbDIuc2V0Rm9udChuZXcgamF2YS5hd3QuRm9udChcIkFyaWFsXCIsIDIsIDE4KSk7IC8vIE5PSTE4TlxuICAgICAgICBqTGFiZWwyLnNldFRleHQoXCJDaMOgbyBt4burbmcgYuG6oW4gcXVheSBs4bqhaSFcIik7XG5cbiAgICAgICAgakxhYmVsMy5zZXRGb250KG5ldyBqYXZhLmF3dC5Gb250KFwiQXJpYWxcIiwgMSwgMTQpKTsgLy8gTk9JMThOXG4gICAgICAgIGpMYWJlbDMuc2V0VGV4dChcIlTDqm4gxJHEg25nIG5o4bqtcDpcIik7XG5cbiAgICAgICAgakxhYmVsNC5zZXRGb250KG5ldyBqYXZhLmF3dC5Gb250KFwiQXJpYWxcIiwgMSwgMTQpKTsgLy8gTk9JMThOXG4gICAgICAgIGpMYWJlbDQuc2V0VGV4dChcIk3huq10IGto4bqpdTpcIik7XG5cbiAgICAgICAgdHh0VXNlck5hbWUuc2V0Rm9udChuZXcgamF2YS5hd3QuRm9udChcIkFyaWFsXCIsIDAsIDE0KSk7IC8vIE5PSTE4TlxuXG4gICAgICAgIHR4dFBhc3N3b3JkLnNldEZvbnQobmV3IGphdmEuYXd0LkZvbnQoXCJBcmlhbFwiLCAwLCAxNCkpOyAvLyBOT0kxOE5cblxuICAgICAgICBidG5Mb2dpbi5zZXRGb250KG5ldyBqYXZhLmF3dC5Gb250KFwiQXJpYWxcIiwgMSwgMTYpKTsgLy8gTk9JMThOXG4gICAgICAgIGJ0bkxvZ2luLnNldEljb24obmV3IGphdmF4LnN3aW5nLkltYWdlSWNvbihnZXRDbGFzcygpLmdldFJlc291cmNlKFwiL0ltYWdlcy9lbnRlci5wbmdcIikpKTsgLy8gTk9JMThOXG4gICAgICAgIGJ0bkxvZ2luLnNldFRleHQoXCLEkMSDbmcgbmjhuq1wXCIpO1xuICAgICAgICBidG5Mb2dpbi5zZXRDdXJzb3IobmV3IGphdmEuYXd0LkN1cnNvcihqYXZhLmF3dC5DdXJzb3IuSEFORF9DVVJTT1IpKTtcbiAgICAgICAgYnRuTG9naW4uc2V0SG9yaXpvbnRhbEFsaWdubWVudChqYXZheC5zd2luZy5Td2luZ0NvbnN0YW50cy5MRUZUKTtcbiAgICAgICAgYnRuTG9naW4uYWRkQWN0aW9uTGlzdGVuZXIobmV3IGphdmEuYXd0LmV2ZW50LkFjdGlvbkxpc3RlbmVyKCkge1xuICAgICAgICAgICAgcHVibGljIHZvaWQgYWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkge1xuICAgICAgICAgICAgICAgIGJ0bkxvZ2luQWN0aW9uUGVyZm9ybWVkKGV2dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGJ0bkZvcmdvdFBhc3N3b3JkLnNldEZvbnQobmV3IGphdmEuYXd0LkZvbnQoXCJBcmlhbFwiLCAxLCAxNCkpOyAvLyBOT0kxOE5cbiAgICAgICAgYnRuRm9yZ290UGFzc3dvcmQuc2V0SWNvbihuZXcgamF2YXguc3dpbmcuSW1hZ2VJY29uKGdldENsYXNzKCkuZ2V0UmVzb3VyY2UoXCIvSW1hZ2VzL3Jlc2V0LXBhc3N3b3JkLnBuZ1wiKSkpOyAvLyBOT0kxOE5cbiAgICAgICAgYnRuRm9yZ290UGFzc3dvcmQuc2V0VGV4dChcIlF1w6puIG3huq10IGto4bqpdT9cIik7XG4gICAgICAgIGJ0bkZvcmdvdFBhc3N3b3JkLnNldEN1cnNvcihuZXcgamF2YS5hd3QuQ3Vyc29yKGphdmEuYXd0LkN1cnNvci5IQU5EX0NVUlNPUikpO1xuICAgICAgICBidG5Gb3Jnb3RQYXNzd29yZC5zZXRIb3Jpem9udGFsQWxpZ25tZW50KGphdmF4LnN3aW5nLlN3aW5nQ29uc3RhbnRzLkxFRlQpO1xuICAgICAgICBidG5Gb3Jnb3RQYXNzd29yZC5hZGRBY3Rpb25MaXN0ZW5lcihuZXcgamF2YS5hd3QuZXZlbnQuQWN0aW9uTGlzdGVuZXIoKSB7XG4gICAgICAgICAgICBwdWJsaWMgdm9pZCBhY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7XG4gICAgICAgICAgICAgICAgYnRuRm9yZ290UGFzc3dvcmRBY3Rpb25QZXJmb3JtZWQoZXZ0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgYnRuU2lnbnVwLnNldEZvbnQobmV3IGphdmEuYXd0LkZvbnQoXCJBcmlhbFwiLCAxLCAxNikpOyAvLyBOT0kxOE5cbiAgICAgICAgYnRuU2lnbnVwLnNldEljb24obmV3IGphdmF4LnN3aW5nLkltYWdlSWNvbihnZXRDbGFzcygpLmdldFJlc291cmNlKFwiL0ltYWdlcy9hZGQtdXNlci5wbmdcIikpKTsgLy8gTk9JMThOXG4gICAgICAgIGJ0blNpZ251cC5zZXRUZXh0KFwixJDEg25nIGvDvVwiKTtcbiAgICAgICAgYnRuU2lnbnVwLnNldEN1cnNvcihuZXcgamF2YS5hd3QuQ3Vyc29yKGphdmEuYXd0LkN1cnNvci5IQU5EX0NVUlNPUikpO1xuICAgICAgICBidG5TaWdudXAuc2V0SG9yaXpvbnRhbEFsaWdubWVudChqYXZheC5zd2luZy5Td2luZ0NvbnN0YW50cy5MRUZUKTtcbiAgICAgICAgYnRuU2lnbnVwLmFkZEFjdGlvbkxpc3RlbmVyKG5ldyBqYXZhLmF3dC5ldmVudC5BY3Rpb25MaXN0ZW5lcigpIHtcbiAgICAgICAgICAgIHB1YmxpYyB2b2lkIGFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHtcbiAgICAgICAgICAgICAgICBidG5TaWdudXBBY3Rpb25QZXJmb3JtZWQoZXZ0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgakxhYmVsNS5zZXRJY29uKG5ldyBqYXZheC5zd2luZy5JbWFnZUljb24oZ2V0Q2xhc3MoKS5nZXRSZXNvdXJjZShcIi9JbWFnZXMvYmcyLmpwZ1wiKSkpOyAvLyBOT0kxOE5cbiAgICAgICAgakxhYmVsNS5zZXRUZXh0KFwiakxhYmVsNVwiKTtcblxuICAgICAgICBidG5FeGl0LnNldEZvbnQobmV3IGphdmEuYXd0LkZvbnQoXCJBcmlhbFwiLCAxLCAxNCkpOyAvLyBOT0kxOE5cbiAgICAgICAgYnRuRXhpdC5zZXRJY29uKG5ldyBqYXZheC5zd2luZy5JbWFnZUljb24oZ2V0Q2xhc3MoKS5nZXRSZXNvdXJjZShcIi9JbWFnZXMvbG9nb3V0LnBuZ1wiKSkpOyAvLyBOT0kxOE5cbiAgICAgICAgYnRuRXhpdC5zZXRUZXh0KFwiVGhvw6F0XCIpO1xuICAgICAgICBidG5FeGl0LnNldEN1cnNvcihuZXcgamF2YS5hd3QuQ3Vyc29yKGphdmEuYXd0LkN1cnNvci5IQU5EX0NVUlNPUikpO1xuICAgICAgICBidG5FeGl0LnNldEhvcml6b250YWxBbGlnbm1lbnQoamF2YXguc3dpbmcuU3dpbmdDb25zdGFudHMuTEVGVCk7XG4gICAgICAgIGJ0bkV4aXQuYWRkQWN0aW9uTGlzdGVuZXIobmV3IGphdmEuYXd0LmV2ZW50LkFjdGlvbkxpc3RlbmVyKCkge1xuICAgICAgICAgICAgcHVibGljIHZvaWQgYWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkge1xuICAgICAgICAgICAgICAgIGJ0bkV4aXRBY3Rpb25QZXJmb3JtZWQoZXZ0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4uLi5cbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQoakxhYmVsNClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRHYXAoNzAsIDcwLCA3MClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQodHh0UGFzc3dvcmQsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFLCAyMzAsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFKSlcbiAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChqU2VwYXJhdG9yMiwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUsIDM2OCwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlU2VxdWVudGlhbEdyb3VwKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlUGFyYWxsZWxHcm91cChqYXZheC5zd2luZy5Hcm91cExheW91dC5BbGlnbm1lbnQuVFJBSUxJTkcsIGZhbHNlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQoYnRuRXhpdCwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuREVGQVVMVF9TSVpFLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5ERUZBVUxUX1NJWkUsIFNob3J0Lk1BWF9WQUxVRSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGJ0blNpZ251cCwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuREVGQVVMVF9TSVpFLCAxMjgsIFNob3J0Lk1BWF9WQUxVRSkpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkR2FwKDc2LCA3NiwgNzYpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVBhcmFsbGVsR3JvdXAoamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuQWxpZ25tZW50LkxFQURJTkcpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChidG5Mb2dpbiwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUsIDE2NCwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChidG5Gb3Jnb3RQYXNzd29yZCwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuQWxpZ25tZW50LlRSQUlMSU5HKSkpKVxuICAgICAgICAgICAgICAgIC5hZGRHYXAoNjAsIDYwLCA2MClcbiAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGpMYWJlbDUsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFLCA1MDUsIFNob3J0Lk1BWF9WQUxVRSkpXG4gICAgICAgICk7XG4uLi5cbiAgICAgICAgICAgICAgICAuYWRkR2FwKDEyLCAxMiwgMTIpXG4gICAgICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVQYXJhbGxlbEdyb3VwKGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LkFsaWdubWVudC5MRUFESU5HKVxuICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGJ0bkZvcmdvdFBhc3N3b3JkKVxuICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGJ0bkV4aXQpKSlcbiAgICAgICAgICAgIC5hZGRDb21wb25lbnQoakxhYmVsNSwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUsIDYzMCwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUpXG4gICAgICAgICk7XG5cbiAgICAgICAgcGFjaygpO1xuICAgIH0vLyA8L2VkaXRvci1mb2xkPi8vR0VOLUVORDppbml0Q29tcG9uZW50c1xuXG4gICAgcHJpdmF0ZSB2b2lkIGJ0bkxvZ2luQWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkxvZ2luQWN0aW9uUGVyZm9ybWVkXG4gICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxuICAgICAgICBpZih2YWxpZGF0ZUZpZWxkcygpKSB7XG4gICAgICAgICAgICB0cnl7XG4gICAgICAgICAgICAgICAgU3RyaW5nIHVzZXJuYW1lID0gdHh0VXNlck5hbWUuZ2V0VGV4dCgpLnRyaW0oKTtcbiAgICAgICAgICAgICAgICBTdHJpbmcgcGFzc3dvcmQgPSB0eHRQYXNzd29yZC5nZXRUZXh0KCkudHJpbSgpO1xuICAgICAgICBcbiAgICAgICAgICAgICAgICBVc2VyIHVzZXIgPSBudWxsO1xuICAgICAgICAgICAgICAgIGJvb2xlYW4gaXNTdWNjZXNzID0gVXNlckRBTy5sb2dpbih1c2VybmFtZSwgcGFzc3dvcmQpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmKGlzU3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyh0aGlzLCBcIsSQxINuZyBuaOG6rXAgdGjDoG5oIGPDtG5nIVwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLklORk9STUFUSU9OX01FU1NBR0UpO1xuLy8gICAgICAgICAgICAgICAgICAgIG5ldyBNYWluRnJhbWUoKS5zZXRWaXNpYmxlKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyh0aGlzLCBcIlNhaSB0w6puIMSRxINuZyBuaOG6rXAgaG/hurdjIG3huq10IGto4bqpdS5cIiwgXCJM4buXaVwiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoKEV4Y2VwdGlvbiBleCkge1xuICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwiTOG7l2k6IFwiICsgZXguZ2V0TWVzc2FnZSgpLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBcbiAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5Mb2dpbkFjdGlvblBlcmZvcm1lZFxuXG4gICAgcHJpdmF0ZSB2b2lkIGJ0bkZvcmdvdFBhc3N3b3JkQWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkZvcmdvdFBhc3N3b3JkQWN0aW9uUGVyZm9ybWVkXG4gICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxuICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0bkZvcmdvdFBhc3N3b3JkQWN0aW9uUGVyZm9ybWVkXG5cbiAgICBwcml2YXRlIHZvaWQgYnRuRXhpdEFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5FeGl0QWN0aW9uUGVyZm9ybWVkXG4gICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxuICAgICAgICBpbnQgcmVzdWx0ID0gSk9wdGlvblBhbmUuc2hvd0NvbmZpcm1EaWFsb2cobnVsbCwgXCJC4bqhbiBjw7MgY2jhuq9jIGNo4bqvbiBtdeG7kW4gdGhvw6F0IGtow7RuZz9cIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5ZRVNfTk9fT1BUSU9OLCBKT3B0aW9uUGFuZS5RVUVTVElPTl9NRVNTQUdFKTtcbiAgICBcbiAgICAgICAgaWYgKHJlc3VsdCA9PSBKT3B0aW9uUGFuZS5ZRVNfT1BUSU9OKSB7XG4gICAgICAgICAgICBTeXN0ZW0uZXhpdCgwKTtcbiAgICAgICAgfVxuICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0bkV4aXRBY3Rpb25QZXJmb3JtZWRcblxuICAgIHByaXZhdGUgdm9pZCBidG5TaWdudXBBY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuU2lnbnVwQWN0aW9uUGVyZm9ybWVkXG4gICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxuICAgICAgICBzZXRWaXNpYmxlKGZhbHNlKTtcbiAgICAgICAgbmV3IFNpZ25VcCgpLnNldFZpc2libGUodHJ1ZSk7XG4gICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuU2lnbnVwQWN0aW9uUGVyZm9ybWVkXG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gYXJncyB0aGUgY29tbWFuZCBsaW5lIGFyZ3VtZW50c1xuICAgICAqL1xuICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBtYWluKFN0cmluZyBhcmdzW10pIHtcbiAgICAgICAgLyogU2V0IHRoZSBOaW1idXMgbG9vayBhbmQgZmVlbCAqL1xuICAgICAgICAvLzxlZGl0b3ItZm9sZCBkZWZhdWx0c3RhdGU9XCJjb2xsYXBzZWRcIiBkZXNjPVwiIExvb2sgYW5kIGZlZWwgc2V0dGluZyBjb2RlIChvcHRpb25hbCkgXCI+XG4gICAgICAgIC8qIElmIE5pbWJ1cyAoaW50cm9kdWNlZCBpbiBKYXZhIFNFIDYpIGlzIG5vdCBhdmFpbGFibGUsIHN0YXkgd2l0aCB0aGUgZGVmYXVsdCBsb29rIGFuZCBmZWVsLlxuICAgICAgICAgKiBGb3IgZGV0YWlscyBzZWUgaHR0cDovL2Rvd25sb2FkLm9yYWNsZS5jb20vamF2YXNlL3R1dG9yaWFsL3Vpc3dpbmcvbG9va2FuZGZlZWwvcGxhZi5odG1sIFxuICAgICAgICAgKi9cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGZvciAoamF2YXguc3dpbmcuVUlNYW5hZ2VyLkxvb2tBbmRGZWVsSW5mbyBpbmZvIDogamF2YXguc3dpbmcuVUlNYW5hZ2VyLmdldEluc3RhbGxlZExvb2tBbmRGZWVscygpKSB7XG4gICAgICAgICAgICAgICAgaWYgKFwiTmltYnVzXCIuZXF1YWxzKGluZm8uZ2V0TmFtZSgpKSkge1xuICAgICAgICAgICAgICAgICAgICBqYXZheC5zd2luZy5VSU1hbmFnZXIuc2V0TG9va0FuZEZlZWwoaW5mby5nZXRDbGFzc05hbWUoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbi4uLlxuXG4gICAgLy8gVmFyaWFibGVzIGRlY2xhcmF0aW9uIC0gZG8gbm90IG1vZGlmeS8vR0VOLUJFR0lOOnZhcmlhYmxlc1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkJ1dHRvbiBidG5FeGl0O1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkJ1dHRvbiBidG5Gb3Jnb3RQYXNzd29yZDtcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpCdXR0b24gYnRuTG9naW47XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KQnV0dG9uIGJ0blNpZ251cDtcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpMYWJlbCBqTGFiZWwxO1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkxhYmVsIGpMYWJlbDI7XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KTGFiZWwgakxhYmVsMztcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpMYWJlbCBqTGFiZWw0O1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkxhYmVsIGpMYWJlbDU7XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KU2VwYXJhdG9yIGpTZXBhcmF0b3IxO1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSlNlcGFyYXRvciBqU2VwYXJhdG9yMjtcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpQYXNzd29yZEZpZWxkIHR4dFBhc3N3b3JkO1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSlRleHRGaWVsZCB0eHRVc2VyTmFtZTtcbiAgICAvLyBFbmQgb2YgdmFyaWFibGVzIGRlY2xhcmF0aW9uLy9HRU4tRU5EOnZhcmlhYmxlc1xufVxuLi4uXG4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCI1OTFjNmQ5Zi1jNmY4LTQ0YWQtYWUyNC03ZmUzZmY3YjdmZDI7dG9vbHVfMDFKQTVuU3RFdHFhVXluRllnWVVqSzQyIjp7InJlcXVlc3RJZCI6IjU5MWM2ZDlmLWM2ZjgtNDRhZC1hZTI0LTdmZTNmZjdiN2ZkMiIsInRvb2xVc2VJZCI6InRvb2x1XzAxSkE1blN0RXRxYVV5bkZZZ1lVaks0MiIsInBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IlN1Y2Nlc3NmdWxseSBlZGl0ZWQgdGhlIGZpbGUgc3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vRm9yZ290UGFzc3dvcmQuamF2YS5cblJlc3VsdCBmb3Igc3RyX3JlcGxhY2UgZm9yIGVudHJ5IHdpdGggaW5kZXggWzBdOlxuUmVwbGFjZW1lbnQgc3VjY2Vzc2Z1bC5cbkVkaXRlZCBzZWN0aW9uIGFmdGVyIElERSBhdXRvLWZvcm1hdHRpbmcgd2FzIGFwcGxpZWQ6XG4gICAgIDFcdC8qXG4gICAgIDJcdCAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvTGljZW5zZXMvbGljZW5zZS1kZWZhdWx0LnR4dCB0byBjaGFuZ2UgdGhpcyBsaWNlbnNlXG4gICAgIDNcdCAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvR1VJRm9ybXMvSkZyYW1lLmphdmEgdG8gZWRpdCB0aGlzIHRlbXBsYXRlXG4gICAgIDRcdCAqL1xuICAgICA1XHRwYWNrYWdlIGludGVybmV0Lm1hbmdlbWVudC5zeXN0ZW07XG4gICAgIDZcdFxuICAgICA3XHRpbXBvcnQgREFPLlN1YnNjcmliZXJEQU87XG4gICAgIDhcdGltcG9ydCBNb2RlbC5TdWJzY3JpYmVyO1xuICAgICA5XHRpbXBvcnQgamF2YXguc3dpbmcuSk9wdGlvblBhbmU7XG4gICAgMTBcdGltcG9ydCBpbnRlcm5ldC5tYW5nZW1lbnQuc3lzdGVtLkxvZ2luO1xuICAgIDExXHRpbXBvcnQgamF2YS5hd3QuRnJhbWU7XG4gICAgMTJcdFxuICAgIDEzXHQvKipcbiAgICAxNFx0ICpcbiAgICAxNVx0ICogQGF1dGhvciBOZ29jIFRoYW9cbiAgICAxNlx0ICovXG4gICAgMTdcdHB1YmxpYyBjbGFzcyBGb3Jnb3RQYXNzd29yZCBleHRlbmRzIGphdmF4LnN3aW5nLkpEaWFsb2cge1xuICAgIDE4XHQgICAgcHJpdmF0ZSBTdWJzY3JpYmVyIGN1cnJlbnRTdWJzY3JpYmVyID0gbnVsbDtcbiAgICAxOVx0ICAgIHB1YmxpYyBTdHJpbmcgcGhvbmVQYXR0ZXJuID0gXCJeWzAtOV0qJFwiO1xuICAgIDIwXHRcbiAgICAyMVx0ICAgIC8qKlxuXG5SZXZpZXcgdGhlIGNoYW5nZXMgYW5kIG1ha2Ugc3VyZSB0aGV5IGFyZSBhcyBleHBlY3RlZCAoY29ycmVjdCBpbmRlbnRhdGlvbiwgbm8gZHVwbGljYXRlIGxpbmVzLCBldGMpLlxuRWRpdCB0aGUgZmlsZSBhZ2FpbiBpZiBuZWNlc3NhcnkuXG4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCIxYmRhODNkMy1kZWI2LTQ5NWQtYTEwMy0yNGJiNzM3OGQ3MjI7dG9vbHVfMDFKNEgydlVxUEpWZGtpdzZONkdEeXpDIjp7InJlcXVlc3RJZCI6IjFiZGE4M2QzLWRlYjYtNDk1ZC1hMTAzLTI0YmI3Mzc4ZDcyMiIsInRvb2xVc2VJZCI6InRvb2x1XzAxSjRIMnZVcVBKVmRraXc2TjZHRHl6QyIsInBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IlN1Y2Nlc3NmdWxseSBlZGl0ZWQgdGhlIGZpbGUgc3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vRm9yZ290UGFzc3dvcmQuamF2YS5cblJlc3VsdCBmb3Igc3RyX3JlcGxhY2UgZm9yIGVudHJ5IHdpdGggaW5kZXggWzBdOlxuUmVwbGFjZW1lbnQgc3VjY2Vzc2Z1bC5cbkVkaXRlZCBzZWN0aW9uIGFmdGVyIElERSBhdXRvLWZvcm1hdHRpbmcgd2FzIGFwcGxpZWQ6XG4gICAgMTdcdHB1YmxpYyBjbGFzcyBGb3Jnb3RQYXNzd29yZCBleHRlbmRzIGphdmF4LnN3aW5nLkpEaWFsb2cge1xuICAgIDE4XHQgICAgcHJpdmF0ZSBTdWJzY3JpYmVyIGN1cnJlbnRTdWJzY3JpYmVyID0gbnVsbDtcbiAgICAxOVx0ICAgIHB1YmxpYyBTdHJpbmcgcGhvbmVQYXR0ZXJuID0gXCJeWzAtOV0qJFwiO1xuICAgIDIwXHRcbiAgICAyMVx0ICAgIC8qKlxuICAgIDIyXHQgICAgICogQ3JlYXRlcyBuZXcgZm9ybSBGb3Jnb3RQYXNzd29yZFxuICAgIDIzXHQgICAgICovXG4gICAgMjRcdCAgICBwdWJsaWMgRm9yZ290UGFzc3dvcmQoRnJhbWUgcGFyZW50LCBib29sZWFuIG1vZGFsKSB7XG4gICAgMjVcdCAgICAgICAgc3VwZXIocGFyZW50LCBtb2RhbCk7XG4gICAgMjZcdCAgICAgICAgaW5pdENvbXBvbmVudHMoKTtcbiAgICAyN1x0XG4gICAgMjhcdCAgICAgICAgLy8gU2V0IGRpYWxvZyBwcm9wZXJ0aWVzXG4gICAgMjlcdCAgICAgICAgc2V0VGl0bGUoXCJRdcOqbiBt4bqtdCBraOG6qXVcIik7XG4gICAgMzBcdCAgICAgICAgc2V0TG9jYXRpb25SZWxhdGl2ZVRvKHBhcmVudCk7XG4gICAgMzFcdFxuICAgIDMyXHQgICAgICAgIGJ0bkV4aXQuc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgMzNcdCAgICAgICAgYnRuQ2hhbmdlLnNldFZpc2libGUoZmFsc2UpO1xuICAgIDM0XHQgICAgICAgIGxiTmV3UGFzc3dvcmQuc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgMzVcdCAgICAgICAgbGJDb25maXJtUGFzc3dvcmQuc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgMzZcdCAgICAgICAgdHh0UGFzc3dvcmQuc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgMzdcdCAgICAgICAgdHh0Q29uZmlybVBhc3N3b3JkLnNldFZpc2libGUoZmFsc2UpO1xuICAgIDM4XHQgICAgfVxuICAgIDM5XHRcbiAgICA0MFx0ICAgIHB1YmxpYyB2b2lkIGNsZWFyKCl7XG4gICAgNDFcdCAgICAgICAgdHh0UGFzc3dvcmQuc2V0VGV4dChcIlwiKTtcbiAgICA0Mlx0ICAgICAgICB0eHRQaG9uZS5zZXRUZXh0KFwiXCIpO1xuXG5SZXZpZXcgdGhlIGNoYW5nZXMgYW5kIG1ha2Ugc3VyZSB0aGV5IGFyZSBhcyBleHBlY3RlZCAoY29ycmVjdCBpbmRlbnRhdGlvbiwgbm8gZHVwbGljYXRlIGxpbmVzLCBldGMpLlxuRWRpdCB0aGUgZmlsZSBhZ2FpbiBpZiBuZWNlc3NhcnkuXG4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCJhMjQyOTE4Ni03ZDFjLTQwZDEtYTlmNS1lNzgyN2I4OTZjNWM7dG9vbHVfMDFBaXFGam13bVNlU29ISm1xTXpFZVZvIjp7InJlcXVlc3RJZCI6ImEyNDI5MTg2LTdkMWMtNDBkMS1hOWY1LWU3ODI3Yjg5NmM1YyIsInRvb2xVc2VJZCI6InRvb2x1XzAxQWlxRmptd21TZVNvSEptcU16RWVWbyIsInBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IlN1Y2Nlc3NmdWxseSBlZGl0ZWQgdGhlIGZpbGUgc3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vRm9yZ290UGFzc3dvcmQuamF2YS5cblJlc3VsdCBmb3Igc3RyX3JlcGxhY2UgZm9yIGVudHJ5IHdpdGggaW5kZXggWzBdOlxuUmVwbGFjZW1lbnQgc3VjY2Vzc2Z1bC5cbkVkaXRlZCBzZWN0aW9uIGFmdGVyIElERSBhdXRvLWZvcm1hdHRpbmcgd2FzIGFwcGxpZWQ6XG4gICAyMThcdFxuICAgMjE5XHQgICAgICAgIHBhY2soKTtcbiAgIDIyMFx0ICAgIH0vLyA8L2VkaXRvci1mb2xkPi8vR0VOLUVORDppbml0Q29tcG9uZW50c1xuICAgMjIxXHRcbiAgIDIyMlx0ICAgIHByaXZhdGUgdm9pZCBidG5FeGl0QWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkV4aXRBY3Rpb25QZXJmb3JtZWRcbiAgIDIyM1x0ICAgICAgICAvLyBUT0RPIGFkZCB5b3VyIGhhbmRsaW5nIGNvZGUgaGVyZTpcbiAgIDIyNFx0ICAgICAgICBpbnQgcmVzdWx0ID0gSk9wdGlvblBhbmUuc2hvd0NvbmZpcm1EaWFsb2codGhpcywgXCJC4bqhbiBjw7MgY2jhuq9jIGNo4bqvbiBtdeG7kW4gdGhvw6F0IGtow7RuZz9cIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5ZRVNfTk9fT1BUSU9OLCBKT3B0aW9uUGFuZS5RVUVTVElPTl9NRVNTQUdFKTtcbiAgIDIyNVx0XG4gICAyMjZcdCAgICAgICAgaWYgKHJlc3VsdCA9PSBKT3B0aW9uUGFuZS5ZRVNfT1BUSU9OKSB7XG4gICAyMjdcdCAgICAgICAgICAgIHRoaXMuZGlzcG9zZSgpO1xuICAgMjI4XHQgICAgICAgIH1cbiAgIDIyOVx0ICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0bkV4aXRBY3Rpb25QZXJmb3JtZWRcbiAgIDIzMFx0XG4gICAyMzFcdCAgICBwcml2YXRlIHZvaWQgYnRuQ2hlY2tBY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuQ2hlY2tBY3Rpb25QZXJmb3JtZWRcbiAgIDIzMlx0ICAgICAgICAvLyBUT0RPIGFkZCB5b3VyIGhhbmRsaW5nIGNvZGUgaGVyZTpcbiAgIDIzM1x0ICAgICAgICBpZih2YWxpZGF0ZVBob25lKCkpIHtcblxuUmV2aWV3IHRoZSBjaGFuZ2VzIGFuZCBtYWtlIHN1cmUgdGhleSBhcmUgYXMgZXhwZWN0ZWQgKGNvcnJlY3QgaW5kZW50YXRpb24sIG5vIGR1cGxpY2F0ZSBsaW5lcywgZXRjKS5cbkVkaXQgdGhlIGZpbGUgYWdhaW4gaWYgbmVjZXNzYXJ5LlxuIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiOTg4MjEwMTQtMjYwMy00ODI0LWFlNDMtOTczYTBiYmI1YjMxO3Rvb2x1XzAxQ2h5VGliNUFNTkQzcFlaNHdnaG5ZTSI6eyJyZXF1ZXN0SWQiOiI5ODgyMTAxNC0yNjAzLTQ4MjQtYWU0My05NzNhMGJiYjViMzEiLCJ0b29sVXNlSWQiOiJ0b29sdV8wMUNoeVRpYjVBTU5EM3BZWjR3Z2huWU0iLCJwaGFzZSI6NiwicmVzdWx0Ijp7InRleHQiOiJGYWlsZWQgdG8gZWRpdCB0aGUgZmlsZSBzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9Gb3Jnb3RQYXNzd29yZC5qYXZhLiBTZWUgYmVsb3cgZm9yIGRldGFpbHMuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlIGZvciBlbnRyeSB3aXRoIGluZGV4IFswXTpcbk5vIHJlcGxhY2VtZW50IHdhcyBwZXJmb3JtZWQsIG9sZFN0ciBkaWQgbm90IGFwcGVhciB2ZXJiYXRpbSBpbiBzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9Gb3Jnb3RQYXNzd29yZC5qYXZhLlxuVGhlIGNvbnRlbnQgaW4gdGhlIHNwZWNpZmllZCByZWdpb24gaXM6XG4gICAyNDZcdFxuICAgMjQ3XHQgICAgICAgICAgICAgICAgdHh0UGhvbmUuc2V0RWRpdGFibGUoZmFsc2UpO1xuICAgMjQ4XHQgICAgICAgICAgICAgICAgYnRuQ2hlY2suc2V0RW5hYmxlZChmYWxzZSk7XG4gICAyNDlcdCAgICAgICAgICAgIH0gZWxzZSB7XG4gICAyNTBcdCAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcIktow7RuZyB0w6xtIHRo4bqleSB0w6BpIGtob+G6o24gduG7m2kgc+G7kSDEkWnhu4duIHRob+G6oWkgbsOgeSFcIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgIDI1MVx0ICAgICAgICAgICAgfVxuICAgMjUyXHQgICAgICAgIH1cbiAgIDI1M1x0ICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0bkNoZWNrQWN0aW9uUGVyZm9ybWVkXG4gICAyNTRcdFxuICAgMjU1XHQgICAgcHJpdmF0ZSB2b2lkIGJ0bkNoYW5nZUFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5DaGFuZ2VBY3Rpb25QZXJmb3JtZWRcbiAgIDI1Nlx0ICAgICAgICAvLyBUT0RPIGFkZCB5b3VyIGhhbmRsaW5nIGNvZGUgaGVyZTpcbiAgIDI1N1x0ICAgICAgICBpZih2YWxpZGF0ZUZpZWxkcygpICYmIGN1cnJlbnRTdWJzY3JpYmVyICE9IG51bGwpe1xuICAgMjU4XHQgICAgICAgICAgICBTdHJpbmcgbmV3UGFzc3dvcmQgPSB0eHRQYXNzd29yZC5nZXRUZXh0KCk7XG4gICAyNTlcdFxuICAgMjYwXHQgICAgICAgICAgICBib29sZWFuIGlzU3VjY2VzcyA9IFN1YnNjcmliZXJEQU8udXBkYXRlUGFzc3dvcmQoY3VycmVudFN1YnNjcmliZXIuZ2V0VXNlcl9pZCgpLCBuZXdQYXNzd29yZCk7XG4gICAyNjFcdFxuICAgMjYyXHQgICAgICAgICAgICBpZihpc1N1Y2Nlc3MpIHtcbiAgIDI2M1x0ICAgICAgICAgICAgICAgIG5ldyBMb2dpbigpLnNldFZpc2libGUodHJ1ZSk7XG4gICAyNjRcdCAgICAgICAgICAgICAgICB0aGlzLmRpc3Bvc2UoKTtcbiAgIDI2NVx0ICAgICAgICAgICAgfSBlbHNlIHtcbiAgIDI2Nlx0ICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwixJDhu5VpIG3huq10IGto4bqpdSB0aOG6pXQgYuG6oWkhIFZ1aSBsw7JuZyB0aOG7rSBs4bqhaSBzYXUhXCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAyNjdcdCAgICAgICAgICAgIH1cbiAgIDI2OFx0ICAgICAgICB9XG4gICAyNjlcdCAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5DaGFuZ2VBY3Rpb25QZXJmb3JtZWRcblxuRGlmZiBiZXR3ZWVuIG9sZFN0ciBhbmQgdGhlIHNwZWNpZmllZCByZWdpb24gaXM6XG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4tLS0gb2xkU3RyXG4rKysgcmVnaW9uQ29udGVudFxuQEAgLTEsMyArMSw4IEBAXG4rICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwiS2jDtG5nIHTDrG0gdGjhuqV5IHTDoGkga2hv4bqjbiB24bubaSBz4buRIMSRaeG7h24gdGhv4bqhaSBuw6B5IVwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuKyAgICAgICAgICAgIH1cbisgICAgICAgIH1cbisgICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuQ2hlY2tBY3Rpb25QZXJmb3JtZWRcbitcbiAgICAgcHJpdmF0ZSB2b2lkIGJ0bkNoYW5nZUFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5DaGFuZ2VBY3Rpb25QZXJmb3JtZWRcbiAgICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxuICAgICAgICAgaWYodmFsaWRhdGVGaWVsZHMoKSAmJiBjdXJyZW50U3Vic2NyaWJlciAhPSBudWxsKXtcbkBAIC02LDExICsxMSw2IEBAXG4gICAgICAgICAgICAgYm9vbGVhbiBpc1N1Y2Nlc3MgPSBTdWJzY3JpYmVyREFPLnVwZGF0ZVBhc3N3b3JkKGN1cnJlbnRTdWJzY3JpYmVyLmdldFVzZXJfaWQoKSwgbmV3UGFzc3dvcmQpO1xuIFxuICAgICAgICAgICAgIGlmKGlzU3VjY2Vzcykge1xuLSAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcIsSQ4buVaSBt4bqtdCBraOG6qXUgdGjDoG5oIGPDtG5nISBWdWkgbMOybmcgxJHEg25nIG5o4bqtcCBs4bqhaSFcIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5JTkZPUk1BVElPTl9NRVNTQUdFKTtcbiAgICAgICAgICAgICAgICAgbmV3IExvZ2luKCkuc2V0VmlzaWJsZSh0cnVlKTtcbiAgICAgICAgICAgICAgICAgdGhpcy5kaXNwb3NlKCk7XG4gICAgICAgICAgICAgfSBlbHNlIHtcbi0gICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXCLEkOG7lWkgbeG6rXQga2jhuql1IHRo4bqldCBi4bqhaSEgVnVpIGzDsm5nIHRo4butIGzhuqFpIHNhdSFcIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbi0gICAgICAgICAgICB9XG4tICAgICAgICB9XG4tICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0bkNoYW5nZUFjdGlvblBlcmZvcm1lZFxuXG5cbkZpeCBmYWlsZWQgc3RyX3JlcGxhY2UgZW50cmllcyBhY2NvcmRpbmdseSBhbmQgdHJ5IGFnYWluLlxuIiwiaXNFcnJvciI6dHJ1ZSwicmVxdWVzdElkIjoiIn19LCIwNWMxZWNmZS0yYmZiLTQ0YWYtOGQ5NC00MzAyNzdiOTAwZDQ7dG9vbHVfMDFObk5Cckp2NGt0V1Ruem1yYWFyZVJIIjp7InJlcXVlc3RJZCI6IjA1YzFlY2ZlLTJiZmItNDRhZi04ZDk0LTQzMDI3N2I5MDBkNCIsInRvb2xVc2VJZCI6InRvb2x1XzAxTm5OQnJKdjRrdFdUbnptcmFhcmVSSCIsInBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IkhlcmUncyB0aGUgcmVzdWx0IG9mIHJ1bm5pbmcgYGNhdCAtbmAgb24gc3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vRm9yZ290UGFzc3dvcmQuamF2YTpcbiAgIDI1MFx0ICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwiS2jDtG5nIHTDrG0gdGjhuqV5IHTDoGkga2hv4bqjbiB24bubaSBz4buRIMSRaeG7h24gdGhv4bqhaSBuw6B5IVwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgMjUxXHQgICAgICAgICAgICB9XG4gICAyNTJcdCAgICAgICAgfVxuICAgMjUzXHQgICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuQ2hlY2tBY3Rpb25QZXJmb3JtZWRcbiAgIDI1NFx0XG4gICAyNTVcdCAgICBwcml2YXRlIHZvaWQgYnRuQ2hhbmdlQWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkNoYW5nZUFjdGlvblBlcmZvcm1lZFxuICAgMjU2XHQgICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxuICAgMjU3XHQgICAgICAgIGlmKHZhbGlkYXRlRmllbGRzKCkgJiYgY3VycmVudFN1YnNjcmliZXIgIT0gbnVsbCl7XG4gICAyNThcdCAgICAgICAgICAgIFN0cmluZyBuZXdQYXNzd29yZCA9IHR4dFBhc3N3b3JkLmdldFRleHQoKTtcbiAgIDI1OVx0XG4gICAyNjBcdCAgICAgICAgICAgIGJvb2xlYW4gaXNTdWNjZXNzID0gU3Vic2NyaWJlckRBTy51cGRhdGVQYXNzd29yZChjdXJyZW50U3Vic2NyaWJlci5nZXRVc2VyX2lkKCksIG5ld1Bhc3N3b3JkKTtcbiAgIDI2MVx0XG4gICAyNjJcdCAgICAgICAgICAgIGlmKGlzU3VjY2Vzcykge1xuICAgMjYzXHQgICAgICAgICAgICAgICAgbmV3IExvZ2luKCkuc2V0VmlzaWJsZSh0cnVlKTtcbiAgIDI2NFx0ICAgICAgICAgICAgICAgIHRoaXMuZGlzcG9zZSgpO1xuICAgMjY1XHQgICAgICAgICAgICB9IGVsc2Uge1xuICAgMjY2XHQgICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXCLEkOG7lWkgbeG6rXQga2jhuql1IHRo4bqldCBi4bqhaSEgVnVpIGzDsm5nIHRo4butIGzhuqFpIHNhdSFcIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgIDI2N1x0ICAgICAgICAgICAgfVxuICAgMjY4XHQgICAgICAgIH1cbiAgIDI2OVx0ICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0bkNoYW5nZUFjdGlvblBlcmZvcm1lZFxuICAgMjcwXHRcblRvdGFsIGxpbmVzIGluIGZpbGU6IDMyMFxuIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiMTUwYWI5ZWMtZGNhOC00ZjdkLWI2MDMtNjY3OGE4NDQ2YTViO3Rvb2x1XzAxVVViRXVSNENTZmR0TU5SMTh3cEVCcyI6eyJyZXF1ZXN0SWQiOiIxNTBhYjllYy1kY2E4LTRmN2QtYjYwMy02Njc4YTg0NDZhNWIiLCJ0b29sVXNlSWQiOiJ0b29sdV8wMVVVYkV1UjRDU2ZkdE1OUjE4d3BFQnMiLCJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJTdWNjZXNzZnVsbHkgZWRpdGVkIHRoZSBmaWxlIHNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL0ZvcmdvdFBhc3N3b3JkLmphdmEuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlIGZvciBlbnRyeSB3aXRoIGluZGV4IFswXTpcblJlcGxhY2VtZW50IHN1Y2Nlc3NmdWwuXG5FZGl0ZWQgc2VjdGlvbiBhZnRlciBJREUgYXV0by1mb3JtYXR0aW5nIHdhcyBhcHBsaWVkOlxuICAgMjUxXHQgICAgICAgICAgICB9XG4gICAyNTJcdCAgICAgICAgfVxuICAgMjUzXHQgICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuQ2hlY2tBY3Rpb25QZXJmb3JtZWRcbiAgIDI1NFx0XG4gICAyNTVcdCAgICBwcml2YXRlIHZvaWQgYnRuQ2hhbmdlQWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkNoYW5nZUFjdGlvblBlcmZvcm1lZFxuICAgMjU2XHQgICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxuICAgMjU3XHQgICAgICAgIGlmKHZhbGlkYXRlRmllbGRzKCkgJiYgY3VycmVudFN1YnNjcmliZXIgIT0gbnVsbCl7XG4gICAyNThcdCAgICAgICAgICAgIFN0cmluZyBuZXdQYXNzd29yZCA9IHR4dFBhc3N3b3JkLmdldFRleHQoKTtcbiAgIDI1OVx0XG4gICAyNjBcdCAgICAgICAgICAgIGJvb2xlYW4gaXNTdWNjZXNzID0gU3Vic2NyaWJlckRBTy51cGRhdGVQYXNzd29yZChjdXJyZW50U3Vic2NyaWJlci5nZXRVc2VyX2lkKCksIG5ld1Bhc3N3b3JkKTtcbiAgIDI2MVx0XG4gICAyNjJcdCAgICAgICAgICAgIGlmKGlzU3VjY2Vzcykge1xuICAgMjYzXHQgICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2codGhpcywgXCLEkOG7lWkgbeG6rXQga2jhuql1IHRow6BuaCBjw7RuZyEgVnVpIGzDsm5nIMSRxINuZyBuaOG6rXAgbOG6oWkhXCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuSU5GT1JNQVRJT05fTUVTU0FHRSk7XG4gICAyNjRcdCAgICAgICAgICAgICAgICB0aGlzLmRpc3Bvc2UoKTtcbiAgIDI2NVx0ICAgICAgICAgICAgfSBlbHNlIHtcbiAgIDI2Nlx0ICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKHRoaXMsIFwixJDhu5VpIG3huq10IGto4bqpdSB0aOG6pXQgYuG6oWkhIFZ1aSBsw7JuZyB0aOG7rSBs4bqhaSBzYXUhXCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAyNjdcdCAgICAgICAgICAgIH1cbiAgIDI2OFx0ICAgICAgICB9XG4gICAyNjlcdCAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5DaGFuZ2VBY3Rpb25QZXJmb3JtZWRcbiAgIDI3MFx0XG4gICAyNzFcdCAgICAvKipcbiAgIDI3Mlx0ICAgICAqIEBwYXJhbSBhcmdzIHRoZSBjb21tYW5kIGxpbmUgYXJndW1lbnRzXG4gICAyNzNcdCAgICAgKi9cblxuUmV2aWV3IHRoZSBjaGFuZ2VzIGFuZCBtYWtlIHN1cmUgdGhleSBhcmUgYXMgZXhwZWN0ZWQgKGNvcnJlY3QgaW5kZW50YXRpb24sIG5vIGR1cGxpY2F0ZSBsaW5lcywgZXRjKS5cbkVkaXQgdGhlIGZpbGUgYWdhaW4gaWYgbmVjZXNzYXJ5LlxuIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiM2FhNzZjMGYtNjUwYi00YzI0LThlMzMtM2RkNWI4NGEzMGUxO3Rvb2x1XzAxS1lObkNVQWNramNCVWlmRVZieThreiI6eyJyZXF1ZXN0SWQiOiIzYWE3NmMwZi02NTBiLTRjMjQtOGUzMy0zZGQ1Yjg0YTMwZTEiLCJ0b29sVXNlSWQiOiJ0b29sdV8wMUtZTm5DVUFja2pjQlVpZkVWYnk4a3oiLCJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJIZXJlJ3MgdGhlIHJlc3VsdCBvZiBydW5uaW5nIGBjYXQgLW5gIG9uIHNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL0ZvcmdvdFBhc3N3b3JkLmphdmE6XG4gICAyNzBcdFxuICAgMjcxXHQgICAgLyoqXG4gICAyNzJcdCAgICAgKiBAcGFyYW0gYXJncyB0aGUgY29tbWFuZCBsaW5lIGFyZ3VtZW50c1xuICAgMjczXHQgICAgICovXG4gICAyNzRcdCAgICBwdWJsaWMgc3RhdGljIHZvaWQgbWFpbihTdHJpbmcgYXJnc1tdKSB7XG4gICAyNzVcdCAgICAgICAgLyogU2V0IHRoZSBOaW1idXMgbG9vayBhbmQgZmVlbCAqL1xuICAgMjc2XHQgICAgICAgIC8vPGVkaXRvci1mb2xkIGRlZmF1bHRzdGF0ZT1cImNvbGxhcHNlZFwiIGRlc2M9XCIgTG9vayBhbmQgZmVlbCBzZXR0aW5nIGNvZGUgKG9wdGlvbmFsKSBcIj5cbiAgIDI3N1x0ICAgICAgICAvKiBJZiBOaW1idXMgKGludHJvZHVjZWQgaW4gSmF2YSBTRSA2KSBpcyBub3QgYXZhaWxhYmxlLCBzdGF5IHdpdGggdGhlIGRlZmF1bHQgbG9vayBhbmQgZmVlbC5cbiAgIDI3OFx0ICAgICAgICAgKiBGb3IgZGV0YWlscyBzZWUgaHR0cDovL2Rvd25sb2FkLm9yYWNsZS5jb20vamF2YXNlL3R1dG9yaWFsL3Vpc3dpbmcvbG9va2FuZGZlZWwvcGxhZi5odG1sXG4gICAyNzlcdCAgICAgICAgICovXG4gICAyODBcdCAgICAgICAgdHJ5IHtcbiAgIDI4MVx0ICAgICAgICAgICAgZm9yIChqYXZheC5zd2luZy5VSU1hbmFnZXIuTG9va0FuZEZlZWxJbmZvIGluZm8gOiBqYXZheC5zd2luZy5VSU1hbmFnZXIuZ2V0SW5zdGFsbGVkTG9va0FuZEZlZWxzKCkpIHtcbiAgIDI4Mlx0ICAgICAgICAgICAgICAgIGlmIChcIk5pbWJ1c1wiLmVxdWFscyhpbmZvLmdldE5hbWUoKSkpIHtcbiAgIDI4M1x0ICAgICAgICAgICAgICAgICAgICBqYXZheC5zd2luZy5VSU1hbmFnZXIuc2V0TG9va0FuZEZlZWwoaW5mby5nZXRDbGFzc05hbWUoKSk7XG4gICAyODRcdCAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAyODVcdCAgICAgICAgICAgICAgICB9XG4gICAyODZcdCAgICAgICAgICAgIH1cbiAgIDI4N1x0ICAgICAgICB9IGNhdGNoIChDbGFzc05vdEZvdW5kRXhjZXB0aW9uIGV4KSB7XG4gICAyODhcdCAgICAgICAgICAgIGphdmEudXRpbC5sb2dnaW5nLkxvZ2dlci5nZXRMb2dnZXIoRm9yZ290UGFzc3dvcmQuY2xhc3MuZ2V0TmFtZSgpKS5sb2coamF2YS51dGlsLmxvZ2dpbmcuTGV2ZWwuU0VWRVJFLCBudWxsLCBleCk7XG4gICAyODlcdCAgICAgICAgfSBjYXRjaCAoSW5zdGFudGlhdGlvbkV4Y2VwdGlvbiBleCkge1xuICAgMjkwXHQgICAgICAgICAgICBqYXZhLnV0aWwubG9nZ2luZy5Mb2dnZXIuZ2V0TG9nZ2VyKEZvcmdvdFBhc3N3b3JkLmNsYXNzLmdldE5hbWUoKSkubG9nKGphdmEudXRpbC5sb2dnaW5nLkxldmVsLlNFVkVSRSwgbnVsbCwgZXgpO1xuICAgMjkxXHQgICAgICAgIH0gY2F0Y2ggKElsbGVnYWxBY2Nlc3NFeGNlcHRpb24gZXgpIHtcbiAgIDI5Mlx0ICAgICAgICAgICAgamF2YS51dGlsLmxvZ2dpbmcuTG9nZ2VyLmdldExvZ2dlcihGb3Jnb3RQYXNzd29yZC5jbGFzcy5nZXROYW1lKCkpLmxvZyhqYXZhLnV0aWwubG9nZ2luZy5MZXZlbC5TRVZFUkUsIG51bGwsIGV4KTtcbiAgIDI5M1x0ICAgICAgICB9IGNhdGNoIChqYXZheC5zd2luZy5VbnN1cHBvcnRlZExvb2tBbmRGZWVsRXhjZXB0aW9uIGV4KSB7XG4gICAyOTRcdCAgICAgICAgICAgIGphdmEudXRpbC5sb2dnaW5nLkxvZ2dlci5nZXRMb2dnZXIoRm9yZ290UGFzc3dvcmQuY2xhc3MuZ2V0TmFtZSgpKS5sb2coamF2YS51dGlsLmxvZ2dpbmcuTGV2ZWwuU0VWRVJFLCBudWxsLCBleCk7XG4gICAyOTVcdCAgICAgICAgfVxuICAgMjk2XHQgICAgICAgIC8vPC9lZGl0b3ItZm9sZD5cbiAgIDI5N1x0XG4gICAyOThcdCAgICAgICAgLyogQ3JlYXRlIGFuZCBkaXNwbGF5IHRoZSBmb3JtICovXG4gICAyOTlcdCAgICAgICAgamF2YS5hd3QuRXZlbnRRdWV1ZS5pbnZva2VMYXRlcihuZXcgUnVubmFibGUoKSB7XG4gICAzMDBcdCAgICAgICAgICAgIHB1YmxpYyB2b2lkIHJ1bigpIHtcblRvdGFsIGxpbmVzIGluIGZpbGU6IDMyMFxuIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiMjMyMzg1M2QtZDUyMy00Mjg5LWIxM2EtZjMwYWJlZTQ0YjgwO3Rvb2x1XzAxOGpHY3pZUVNHZ2RlcG5nNUY5SENuciI6eyJyZXF1ZXN0SWQiOiIyMzIzODUzZC1kNTIzLTQyODktYjEzYS1mMzBhYmVlNDRiODAiLCJ0b29sVXNlSWQiOiJ0b29sdV8wMThqR2N6WVFTR2dkZXBuZzVGOUhDbnIiLCJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJIZXJlJ3MgdGhlIHJlc3VsdCBvZiBydW5uaW5nIGBjYXQgLW5gIG9uIHNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL0ZvcmdvdFBhc3N3b3JkLmphdmE6XG4gICAyOTVcdCAgICAgICAgfVxuICAgMjk2XHQgICAgICAgIC8vPC9lZGl0b3ItZm9sZD5cbiAgIDI5N1x0XG4gICAyOThcdCAgICAgICAgLyogQ3JlYXRlIGFuZCBkaXNwbGF5IHRoZSBmb3JtICovXG4gICAyOTlcdCAgICAgICAgamF2YS5hd3QuRXZlbnRRdWV1ZS5pbnZva2VMYXRlcihuZXcgUnVubmFibGUoKSB7XG4gICAzMDBcdCAgICAgICAgICAgIHB1YmxpYyB2b2lkIHJ1bigpIHtcbiAgIDMwMVx0ICAgICAgICAgICAgICAgIG5ldyBGb3Jnb3RQYXNzd29yZCgpLnNldFZpc2libGUodHJ1ZSk7XG4gICAzMDJcdCAgICAgICAgICAgIH1cbiAgIDMwM1x0ICAgICAgICB9KTtcbiAgIDMwNFx0ICAgIH1cbiAgIDMwNVx0XG4gICAzMDZcdCAgICAvLyBWYXJpYWJsZXMgZGVjbGFyYXRpb24gLSBkbyBub3QgbW9kaWZ5Ly9HRU4tQkVHSU46dmFyaWFibGVzXG4gICAzMDdcdCAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpCdXR0b24gYnRuQ2hhbmdlO1xuICAgMzA4XHQgICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KQnV0dG9uIGJ0bkNoZWNrO1xuICAgMzA5XHQgICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KQnV0dG9uIGJ0bkV4aXQ7XG4gICAzMTBcdCAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpMYWJlbCBqTGFiZWwxO1xuICAgMzExXHQgICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KTGFiZWwgakxhYmVsMjtcbiAgIDMxMlx0ICAgIHByaXZhdGUgamF2YXguc3dpbmcuSlNlcGFyYXRvciBqU2VwYXJhdG9yMTtcbiAgIDMxM1x0ICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkxhYmVsIGxiQ29uZmlybVBhc3N3b3JkO1xuICAgMzE0XHQgICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KTGFiZWwgbGJOZXdQYXNzd29yZDtcbiAgIDMxNVx0ICAgIHByaXZhdGUgamF2YXguc3dpbmcuSlBhc3N3b3JkRmllbGQgdHh0Q29uZmlybVBhc3N3b3JkO1xuICAgMzE2XHQgICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KUGFzc3dvcmRGaWVsZCB0eHRQYXNzd29yZDtcbiAgIDMxN1x0ICAgIHByaXZhdGUgamF2YXguc3dpbmcuSlRleHRGaWVsZCB0eHRQaG9uZTtcbiAgIDMxOFx0ICAgIC8vIEVuZCBvZiB2YXJpYWJsZXMgZGVjbGFyYXRpb24vL0dFTi1FTkQ6dmFyaWFibGVzXG4gICAzMTlcdH1cbiAgIDMyMFx0XG5Ub3RhbCBsaW5lcyBpbiBmaWxlOiAzMjBcbiIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX0sImE5M2MxNGUzLTU3YzItNDZmNS1iODI5LWM0MzllMjk4ZTNmODt0b29sdV8wMTVkbXhxaXQxVnJvN3dxbkNXVThZRkYiOnsicmVxdWVzdElkIjoiYTkzYzE0ZTMtNTdjMi00NmY1LWI4MjktYzQzOWUyOThlM2Y4IiwidG9vbFVzZUlkIjoidG9vbHVfMDE1ZG14cWl0MVZybzd3cW5DV1U4WUZGIiwicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiU3VjY2Vzc2Z1bGx5IGVkaXRlZCB0aGUgZmlsZSBzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9Gb3Jnb3RQYXNzd29yZC5qYXZhLlxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZSBmb3IgZW50cnkgd2l0aCBpbmRleCBbMF06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgIDI2N1x0ICAgICAgICAgICAgfVxuICAgMjY4XHQgICAgICAgIH1cbiAgIDI2OVx0ICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0bkNoYW5nZUFjdGlvblBlcmZvcm1lZFxuICAgMjcwXHRcbiAgIDI3MVx0XG4gICAyNzJcdFxuICAgMjczXHQgICAgLy8gVmFyaWFibGVzIGRlY2xhcmF0aW9uIC0gZG8gbm90IG1vZGlmeS8vR0VOLUJFR0lOOnZhcmlhYmxlc1xuICAgMjc0XHQgICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KQnV0dG9uIGJ0bkNoYW5nZTtcbiAgIDI3NVx0ICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkJ1dHRvbiBidG5DaGVjaztcblxuUmV2aWV3IHRoZSBjaGFuZ2VzIGFuZCBtYWtlIHN1cmUgdGhleSBhcmUgYXMgZXhwZWN0ZWQgKGNvcnJlY3QgaW5kZW50YXRpb24sIG5vIGR1cGxpY2F0ZSBsaW5lcywgZXRjKS5cbkVkaXQgdGhlIGZpbGUgYWdhaW4gaWYgbmVjZXNzYXJ5LlxuIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiZWJmNjhiYTUtMTA2Mi00ZTViLWI4YjYtMDg1MWNhY2M3ODIxO3Rvb2x1XzAxMjFNVmFuNnlLZDhQY3BTR3RhRXRUNiI6eyJyZXF1ZXN0SWQiOiJlYmY2OGJhNS0xMDYyLTRlNWItYjhiNi0wODUxY2FjYzc4MjEiLCJ0b29sVXNlSWQiOiJ0b29sdV8wMTIxTVZhbjZ5S2Q4UGNwU0d0YUV0VDYiLCJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJIZXJlJ3MgdGhlIHJlc3VsdCBvZiBydW5uaW5nIGBjYXQgLW5gIG9uIHNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL0ZvcmdvdFBhc3N3b3JkLmphdmE6XG4gICAgOTBcdCAgICAgICAgbGJOZXdQYXNzd29yZCA9IG5ldyBqYXZheC5zd2luZy5KTGFiZWwoKTtcbiAgICA5MVx0ICAgICAgICBsYkNvbmZpcm1QYXNzd29yZCA9IG5ldyBqYXZheC5zd2luZy5KTGFiZWwoKTtcbiAgICA5Mlx0ICAgICAgICBqU2VwYXJhdG9yMSA9IG5ldyBqYXZheC5zd2luZy5KU2VwYXJhdG9yKCk7XG4gICAgOTNcdCAgICAgICAgdHh0UGhvbmUgPSBuZXcgamF2YXguc3dpbmcuSlRleHRGaWVsZCgpO1xuICAgIDk0XHQgICAgICAgIGJ0bkNoZWNrID0gbmV3IGphdmF4LnN3aW5nLkpCdXR0b24oKTtcbiAgICA5NVx0ICAgICAgICB0eHRQYXNzd29yZCA9IG5ldyBqYXZheC5zd2luZy5KUGFzc3dvcmRGaWVsZCgpO1xuICAgIDk2XHQgICAgICAgIHR4dENvbmZpcm1QYXNzd29yZCA9IG5ldyBqYXZheC5zd2luZy5KUGFzc3dvcmRGaWVsZCgpO1xuICAgIDk3XHQgICAgICAgIGJ0bkNoYW5nZSA9IG5ldyBqYXZheC5zd2luZy5KQnV0dG9uKCk7XG4gICAgOThcdCAgICAgICAgYnRuRXhpdCA9IG5ldyBqYXZheC5zd2luZy5KQnV0dG9uKCk7XG4gICAgOTlcdFxuICAgMTAwXHQgICAgICAgIHNldERlZmF1bHRDbG9zZU9wZXJhdGlvbihqYXZheC5zd2luZy5XaW5kb3dDb25zdGFudHMuRVhJVF9PTl9DTE9TRSk7XG5Ub3RhbCBsaW5lcyBpbiBmaWxlOiAyODdcbiIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX0sIjBhOTI4MTc2LWM1ZWItNDgyMS05MzlkLTNmNTAwYTRmN2Q3NTt0b29sdV8wMUhibW9kNkVISnZURTJUdjJDWTZCTlAiOnsicmVxdWVzdElkIjoiMGE5MjgxNzYtYzVlYi00ODIxLTkzOWQtM2Y1MDBhNGY3ZDc1IiwidG9vbFVzZUlkIjoidG9vbHVfMDFIYm1vZDZFSEp2VEUyVHYyQ1k2Qk5QIiwicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiU3VjY2Vzc2Z1bGx5IGVkaXRlZCB0aGUgZmlsZSBzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9Gb3Jnb3RQYXNzd29yZC5qYXZhLlxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZSBmb3IgZW50cnkgd2l0aCBpbmRleCBbMF06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgICA5Nlx0ICAgICAgICB0eHRDb25maXJtUGFzc3dvcmQgPSBuZXcgamF2YXguc3dpbmcuSlBhc3N3b3JkRmllbGQoKTtcbiAgICA5N1x0ICAgICAgICBidG5DaGFuZ2UgPSBuZXcgamF2YXguc3dpbmcuSkJ1dHRvbigpO1xuICAgIDk4XHQgICAgICAgIGJ0bkV4aXQgPSBuZXcgamF2YXguc3dpbmcuSkJ1dHRvbigpO1xuICAgIDk5XHRcbiAgIDEwMFx0ICAgICAgICBzZXREZWZhdWx0Q2xvc2VPcGVyYXRpb24oamF2YXguc3dpbmcuV2luZG93Q29uc3RhbnRzLkRJU1BPU0VfT05fQ0xPU0UpO1xuICAgMTAxXHRcbiAgIDEwMlx0ICAgICAgICBqTGFiZWwxLnNldEZvbnQobmV3IGphdmEuYXd0LkZvbnQoXCJBcmlhbFwiLCAxLCAzNikpOyAvLyBOT0kxOE5cbiAgIDEwM1x0ICAgICAgICBqTGFiZWwxLnNldEZvcmVncm91bmQoamF2YXguc3dpbmcuVUlNYW5hZ2VyLmdldERlZmF1bHRzKCkuZ2V0Q29sb3IoXCJBY3Rpb25zLlllbGxvd1wiKSk7XG4gICAxMDRcdCAgICAgICAgakxhYmVsMS5zZXRUZXh0KFwixJDhu5RJIE3huqxUIEtI4bqoVVwiKTtcblxuUmV2aWV3IHRoZSBjaGFuZ2VzIGFuZCBtYWtlIHN1cmUgdGhleSBhcmUgYXMgZXhwZWN0ZWQgKGNvcnJlY3QgaW5kZW50YXRpb24sIG5vIGR1cGxpY2F0ZSBsaW5lcywgZXRjKS5cbkVkaXQgdGhlIGZpbGUgYWdhaW4gaWYgbmVjZXNzYXJ5LlxuIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiOWU5NzE3YzgtYmE3ZS00MzU3LWI4ZWUtZTQxMzMxMWEwZTI0O3Rvb2x1XzAxUGZReFdLUlBNbmJmNGIyWGdMczI1NSI6eyJyZXF1ZXN0SWQiOiI5ZTk3MTdjOC1iYTdlLTQzNTctYjhlZS1lNDEzMzExYTBlMjQiLCJ0b29sVXNlSWQiOiJ0b29sdV8wMVBmUXhXS1JQTW5iZjRiMlhnTHMyNTUiLCJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJIZXJlJ3MgdGhlIHJlc3VsdCBvZiBydW5uaW5nIGBjYXQgLW5gIG9uIHNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL0xvZ2luLmphdmE6XG4gICAxNzBcdCAgICAgICAgICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVTZXF1ZW50aWFsR3JvdXAoKVxuICAgMTcxXHQgICAgICAgICAgICAgICAgICAgICAgICAuYWRkR2FwKDMsIDMsIDMpXG4gICAxNzJcdCAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQoakxhYmVsMykpXG4gICAxNzNcdCAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudCh0eHRVc2VyTmFtZSwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LkRFRkFVTFRfU0laRSwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUpKVxuICAgMTc0XHQgICAgICAgICAgICAgICAgLmFkZEdhcCgxOCwgMTgsIDE4KVxuICAgMTc1XHQgICAgICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVQYXJhbGxlbEdyb3VwKGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LkFsaWdubWVudC5MRUFESU5HKVxuICAgMTc2XHQgICAgICAgICAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlU2VxdWVudGlhbEdyb3VwKClcbiAgIDE3N1x0ICAgICAgICAgICAgICAgICAgICAgICAgLmFkZEdhcCgzLCAzLCAzKVxuICAgMTc4XHQgICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGpMYWJlbDQpKVxuICAgMTc5XHQgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQodHh0UGFzc3dvcmQsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5ERUZBVUxUX1NJWkUsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFKSlcbiAgIDE4MFx0ICAgICAgICAgICAgICAgIC5hZGRHYXAoMzAsIDMwLCAzMClcblRvdGFsIGxpbmVzIGluIGZpbGU6IDI5MVxuIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiMWMyZGFkYTktMzgwNi00MGNiLWEyZDYtMjYxOWFmZjJmNTQ2O3Rvb2x1XzAxM1RacDZKYm9mY0FBdkgyYkdISFpiMyI6eyJyZXF1ZXN0SWQiOiIxYzJkYWRhOS0zODA2LTQwY2ItYTJkNi0yNjE5YWZmMmY1NDYiLCJ0b29sVXNlSWQiOiJ0b29sdV8wMTNUWnA2SmJvZmNBQXZIMmJHSEhaYjMiLCJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJIZXJlJ3MgdGhlIHJlc3VsdCBvZiBydW5uaW5nIGBjYXQgLW5gIG9uIHNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL0xvZ2luLmphdmE6XG4gICAxNzBcdCAgICAgICAgICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVTZXF1ZW50aWFsR3JvdXAoKVxuICAgMTcxXHQgICAgICAgICAgICAgICAgICAgICAgICAuYWRkR2FwKDMsIDMsIDMpXG4gICAxNzJcdCAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQoakxhYmVsMykpXG4gICAxNzNcdCAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudCh0eHRVc2VyTmFtZSwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LkRFRkFVTFRfU0laRSwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUpKVxuICAgMTc0XHQgICAgICAgICAgICAgICAgLmFkZEdhcCgxOCwgMTgsIDE4KVxuICAgMTc1XHQgICAgICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVQYXJhbGxlbEdyb3VwKGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LkFsaWdubWVudC5MRUFESU5HKVxuICAgMTc2XHQgICAgICAgICAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlU2VxdWVudGlhbEdyb3VwKClcbiAgIDE3N1x0ICAgICAgICAgICAgICAgICAgICAgICAgLmFkZEdhcCgzLCAzLCAzKVxuICAgMTc4XHQgICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGpMYWJlbDQpKVxuICAgMTc5XHQgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQodHh0UGFzc3dvcmQsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5ERUZBVUxUX1NJWkUsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFKSlcbiAgIDE4MFx0ICAgICAgICAgICAgICAgIC5hZGRHYXAoMzAsIDMwLCAzMClcbiAgIDE4MVx0ICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQoalNlcGFyYXRvcjIsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFLCAxMCwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUpXG4gICAxODJcdCAgICAgICAgICAgICAgICAuYWRkR2FwKDEyLCAxMiwgMTIpXG4gICAxODNcdCAgICAgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVBhcmFsbGVsR3JvdXAoamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuQWxpZ25tZW50LkxFQURJTkcpXG4gICAxODRcdCAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChidG5TaWdudXAsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFLCAzNSwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUpXG4gICAxODVcdCAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChidG5Mb2dpbiwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUsIDM1LCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSkpXG4gICAxODZcdCAgICAgICAgICAgICAgICAuYWRkR2FwKDEyLCAxMiwgMTIpXG4gICAxODdcdCAgICAgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVBhcmFsbGVsR3JvdXAoamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuQWxpZ25tZW50LkxFQURJTkcpXG4gICAxODhcdCAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChidG5Gb3Jnb3RQYXNzd29yZClcbiAgIDE4OVx0ICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGJ0bkV4aXQpKSlcbiAgIDE5MFx0ICAgICAgICAgICAgLmFkZENvbXBvbmVudChqTGFiZWw1LCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSwgNjMwLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSlcblRvdGFsIGxpbmVzIGluIGZpbGU6IDI5MVxuIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiNjZmNzUwMmItM2ZmNC00NDBiLWIwNjctOGY5ODc0ODNmZWQ1O3Rvb2x1XzAxMmlLWWhFU2tUbVUzWHRXSjQ4SjUxSiI6eyJyZXF1ZXN0SWQiOiI2NmY3NTAyYi0zZmY0LTQ0MGItYjA2Ny04Zjk4NzQ4M2ZlZDUiLCJ0b29sVXNlSWQiOiJ0b29sdV8wMTJpS1loRVNrVG1VM1h0V0o0OEo1MUoiLCJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJIZXJlJ3MgdGhlIHJlc3VsdCBvZiBydW5uaW5nIGBjYXQgLW5gIG9uIHNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL0xvZ2luLmphdmE6XG4gICAxNzBcdCAgICAgICAgICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVTZXF1ZW50aWFsR3JvdXAoKVxuICAgMTcxXHQgICAgICAgICAgICAgICAgICAgICAgICAuYWRkR2FwKDMsIDMsIDMpXG4gICAxNzJcdCAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQoakxhYmVsMykpXG4gICAxNzNcdCAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudCh0eHRVc2VyTmFtZSwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LkRFRkFVTFRfU0laRSwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUpKVxuICAgMTc0XHQgICAgICAgICAgICAgICAgLmFkZEdhcCgxOCwgMTgsIDE4KVxuICAgMTc1XHQgICAgICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVQYXJhbGxlbEdyb3VwKGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LkFsaWdubWVudC5MRUFESU5HKVxuICAgMTc2XHQgICAgICAgICAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlU2VxdWVudGlhbEdyb3VwKClcbiAgIDE3N1x0ICAgICAgICAgICAgICAgICAgICAgICAgLmFkZEdhcCgzLCAzLCAzKVxuICAgMTc4XHQgICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGpMYWJlbDQpKVxuICAgMTc5XHQgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQodHh0UGFzc3dvcmQsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5ERUZBVUxUX1NJWkUsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFKSlcbiAgIDE4MFx0ICAgICAgICAgICAgICAgIC5hZGRHYXAoMzAsIDMwLCAzMClcbiAgIDE4MVx0ICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQoalNlcGFyYXRvcjIsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFLCAxMCwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUpXG4gICAxODJcdCAgICAgICAgICAgICAgICAuYWRkR2FwKDEyLCAxMiwgMTIpXG4gICAxODNcdCAgICAgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVBhcmFsbGVsR3JvdXAoamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuQWxpZ25tZW50LkxFQURJTkcpXG4gICAxODRcdCAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChidG5TaWdudXAsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFLCAzNSwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUpXG4gICAxODVcdCAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChidG5Mb2dpbiwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUsIDM1LCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSkpXG4gICAxODZcdCAgICAgICAgICAgICAgICAuYWRkR2FwKDEyLCAxMiwgMTIpXG4gICAxODdcdCAgICAgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVBhcmFsbGVsR3JvdXAoamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuQWxpZ25tZW50LkxFQURJTkcpXG4gICAxODhcdCAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChidG5Gb3Jnb3RQYXNzd29yZClcbiAgIDE4OVx0ICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGJ0bkV4aXQpKSlcbiAgIDE5MFx0ICAgICAgICAgICAgLmFkZENvbXBvbmVudChqTGFiZWw1LCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSwgNjMwLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSlcbiAgIDE5MVx0ICAgICAgICApO1xuICAgMTkyXHRcbiAgIDE5M1x0ICAgICAgICBwYWNrKCk7XG4gICAxOTRcdCAgICB9Ly8gPC9lZGl0b3ItZm9sZD4vL0dFTi1FTkQ6aW5pdENvbXBvbmVudHNcbiAgIDE5NVx0XG4gICAxOTZcdCAgICBwcml2YXRlIHZvaWQgYnRuTG9naW5BY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuTG9naW5BY3Rpb25QZXJmb3JtZWRcbiAgIDE5N1x0ICAgICAgICAvLyBUT0RPIGFkZCB5b3VyIGhhbmRsaW5nIGNvZGUgaGVyZTpcbiAgIDE5OFx0ICAgICAgICBpZih2YWxpZGF0ZUZpZWxkcygpKSB7XG4gICAxOTlcdCAgICAgICAgICAgIHRyeXtcbiAgIDIwMFx0ICAgICAgICAgICAgICAgIFN0cmluZyB1c2VybmFtZSA9IHR4dFVzZXJOYW1lLmdldFRleHQoKS50cmltKCk7XG5Ub3RhbCBsaW5lcyBpbiBmaWxlOiAyOTFcbiIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX0sIjIxYjVjNTllLWMxMTctNDI2NS04ZWE0LTg0YmQ1MTk0MmNiZjt0b29sdV8wMVd6QTZaUkxuaVloOFpxeXFuMWRIVnAiOnsicmVxdWVzdElkIjoiMjFiNWM1OWUtYzExNy00MjY1LThlYTQtODRiZDUxOTQyY2JmIiwidG9vbFVzZUlkIjoidG9vbHVfMDFXekE2WlJMbmlZaDhacXlxbjFkSFZwIiwicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiSGVyZSdzIHRoZSByZXN1bHQgb2YgcnVubmluZyBgY2F0IC1uYCBvbiBzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9Mb2dpbi5qYXZhOlxuICAgMjIwXHRcbiAgIDIyMVx0ICAgIHByaXZhdGUgdm9pZCBidG5Gb3Jnb3RQYXNzd29yZEFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5Gb3Jnb3RQYXNzd29yZEFjdGlvblBlcmZvcm1lZFxuICAgMjIyXHQgICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxuICAgMjIzXHQgICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuRm9yZ290UGFzc3dvcmRBY3Rpb25QZXJmb3JtZWRcbiAgIDIyNFx0XG4gICAyMjVcdCAgICBwcml2YXRlIHZvaWQgYnRuRXhpdEFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5FeGl0QWN0aW9uUGVyZm9ybWVkXG4gICAyMjZcdCAgICAgICAgLy8gVE9ETyBhZGQgeW91ciBoYW5kbGluZyBjb2RlIGhlcmU6XG4gICAyMjdcdCAgICAgICAgaW50IHJlc3VsdCA9IEpPcHRpb25QYW5lLnNob3dDb25maXJtRGlhbG9nKG51bGwsIFwiQuG6oW4gY8OzIGNo4bqvYyBjaOG6r24gbXXhu5FuIHRob8OhdCBraMO0bmc/XCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuWUVTX05PX09QVElPTiwgSk9wdGlvblBhbmUuUVVFU1RJT05fTUVTU0FHRSk7XG4gICAyMjhcdCAgICBcbiAgIDIyOVx0ICAgICAgICBpZiAocmVzdWx0ID09IEpPcHRpb25QYW5lLllFU19PUFRJT04pIHtcbiAgIDIzMFx0ICAgICAgICAgICAgU3lzdGVtLmV4aXQoMCk7XG4gICAyMzFcdCAgICAgICAgfVxuICAgMjMyXHQgICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuRXhpdEFjdGlvblBlcmZvcm1lZFxuICAgMjMzXHRcbiAgIDIzNFx0ICAgIHByaXZhdGUgdm9pZCBidG5TaWdudXBBY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuU2lnbnVwQWN0aW9uUGVyZm9ybWVkXG4gICAyMzVcdCAgICAgICAgLy8gVE9ETyBhZGQgeW91ciBoYW5kbGluZyBjb2RlIGhlcmU6XG4gICAyMzZcdCAgICAgICAgc2V0VmlzaWJsZShmYWxzZSk7XG4gICAyMzdcdCAgICAgICAgbmV3IFNpZ25VcCgpLnNldFZpc2libGUodHJ1ZSk7XG4gICAyMzhcdCAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5TaWdudXBBY3Rpb25QZXJmb3JtZWRcbiAgIDIzOVx0XG4gICAyNDBcdCAgICAvKipcblRvdGFsIGxpbmVzIGluIGZpbGU6IDI5MVxuIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiZDM4MjY4N2UtMzljYS00OGRhLTkwZjItN2Y3ZjA5MDAyMTU0O3Rvb2x1XzAxRkNSRzNLSHpENzFCMlMzSkdWUjRzRiI6eyJyZXF1ZXN0SWQiOiJkMzgyNjg3ZS0zOWNhLTQ4ZGEtOTBmMi03ZjdmMDkwMDIxNTQiLCJ0b29sVXNlSWQiOiJ0b29sdV8wMUZDUkczS0h6RDcxQjJTM0pHVlI0c0YiLCJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJTdWNjZXNzZnVsbHkgZWRpdGVkIHRoZSBmaWxlIHNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL0xvZ2luLmphdmEuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlIGZvciBlbnRyeSB3aXRoIGluZGV4IFswXTpcblJlcGxhY2VtZW50IHN1Y2Nlc3NmdWwuXG5FZGl0ZWQgc2VjdGlvbiBhZnRlciBJREUgYXV0by1mb3JtYXR0aW5nIHdhcyBhcHBsaWVkOlxuICAgMjE3XHRcbiAgIDIxOFx0XG4gICAyMTlcdCAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5Mb2dpbkFjdGlvblBlcmZvcm1lZFxuICAgMjIwXHRcbiAgIDIyMVx0ICAgIHByaXZhdGUgdm9pZCBidG5Gb3Jnb3RQYXNzd29yZEFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5Gb3Jnb3RQYXNzd29yZEFjdGlvblBlcmZvcm1lZFxuICAgMjIyXHQgICAgICAgIC8vIE9wZW4gdGhlIEZvcmdvdFBhc3N3b3JkIGRpYWxvZ1xuICAgMjIzXHQgICAgICAgIEZvcmdvdFBhc3N3b3JkIGZvcmdvdFBhc3N3b3JkRGlhbG9nID0gbmV3IEZvcmdvdFBhc3N3b3JkKHRoaXMsIHRydWUpO1xuICAgMjI0XHQgICAgICAgIGZvcmdvdFBhc3N3b3JkRGlhbG9nLnNldFZpc2libGUodHJ1ZSk7XG4gICAyMjVcdCAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5Gb3Jnb3RQYXNzd29yZEFjdGlvblBlcmZvcm1lZFxuICAgMjI2XHRcbiAgIDIyN1x0ICAgIHByaXZhdGUgdm9pZCBidG5FeGl0QWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkV4aXRBY3Rpb25QZXJmb3JtZWRcbiAgIDIyOFx0ICAgICAgICAvLyBUT0RPIGFkZCB5b3VyIGhhbmRsaW5nIGNvZGUgaGVyZTpcbiAgIDIyOVx0ICAgICAgICBpbnQgcmVzdWx0ID0gSk9wdGlvblBhbmUuc2hvd0NvbmZpcm1EaWFsb2cobnVsbCwgXCJC4bqhbiBjw7MgY2jhuq9jIGNo4bqvbiBtdeG7kW4gdGhvw6F0IGtow7RuZz9cIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5ZRVNfTk9fT1BUSU9OLCBKT3B0aW9uUGFuZS5RVUVTVElPTl9NRVNTQUdFKTtcblxuUmV2aWV3IHRoZSBjaGFuZ2VzIGFuZCBtYWtlIHN1cmUgdGhleSBhcmUgYXMgZXhwZWN0ZWQgKGNvcnJlY3QgaW5kZW50YXRpb24sIG5vIGR1cGxpY2F0ZSBsaW5lcywgZXRjKS5cbkVkaXQgdGhlIGZpbGUgYWdhaW4gaWYgbmVjZXNzYXJ5LlxuIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fX0sImRyYWZ0RXhjaGFuZ2UiOnsicmVxdWVzdF9tZXNzYWdlIjoiIiwicmljaF90ZXh0X2pzb25fcmVwciI6eyJ0eXBlIjoiZG9jIiwiY29udGVudCI6W3sidHlwZSI6InBhcmFncmFwaCJ9XX0sIm1lbnRpb25lZF9pdGVtcyI6W10sInN0YXR1cyI6ImRyYWZ0In0sInJlcXVlc3RJZHMiOltdLCJpc1Bpbm5lZCI6ZmFsc2UsImlzU2hhcmVhYmxlIjp0cnVlLCJleHRyYURhdGEiOnsiaXNBZ2VudENvbnZlcnNhdGlvbiI6dHJ1ZSwiaGFzRGlydHlFZGl0cyI6dHJ1ZSwiYmFzZWxpbmVUaW1lc3RhbXAiOjE3NDcxNDEwODE4MDJ9LCJwZXJzb25hVHlwZSI6MCwiZHJhZnRBY3RpdmVDb250ZXh0SWRzIjpbIkU6L0hvY1RhcC8wMl9KQVZBLzAzX1Byb2plY3QvSW50ZXJuZXQgTWFuZ2VtZW50IFN5c3RlbS9zcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9Gb3Jnb3RQYXNzd29yZC5qYXZhIiwiRTovSG9jVGFwLzAyX0pBVkEvMDNfUHJvamVjdC9JbnRlcm5ldCBNYW5nZW1lbnQgU3lzdGVtZmFsc2VmYWxzZSIsInVzZXJHdWlkZWxpbmVzIiwiYWdlbnRNZW1vcmllcyJdfSwiOTY0MjliMWUtNDkzNy00NGJkLTg5OWItNjIyYjM3NmE0MTE0Ijp7ImlkIjoiOTY0MjliMWUtNDkzNy00NGJkLTg5OWItNjIyYjM3NmE0MTE0IiwiY3JlYXRlZEF0SXNvIjoiMjAyNS0wNS0xM1QxMjo1ODozMC4zMDNaIiwibGFzdEludGVyYWN0ZWRBdElzbyI6IjIwMjUtMDUtMTNUMTM6MDQ6MjIuNDc2WiIsImNoYXRIaXN0b3J5IjpbeyJyZXF1ZXN0X2lkIjoiOTM4MjMxZmUtMjQ4MS00MDEzLThjODctNzM2ZDI0NmMyNDhlIiwidXVpZCI6IjAwYmY0NzVlLTcyMmUtNGJlNC05NmZlLWM5YTg1NmZhMjYwYSIsImNoYXRJdGVtVHlwZSI6ImFnZW50aWMtY2hlY2twb2ludC1kZWxpbWl0ZXIiLCJzdGF0dXMiOiJzdWNjZXNzIiwiZnJvbVRpbWVzdGFtcCI6MCwidG9UaW1lc3RhbXAiOjE3NDcxNDExMTAzMDUsInNlZW5fc3RhdGUiOiJzZWVuIn0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6ImM2ODYzYjdkLTFiZDktNGFjMC1iZjI4LWJlMWM0YmU1MWUwOSIsInJlcXVlc3RfbWVzc2FnZSI6IkdldCBhbGwgdXNlciBpbmZvcm1hdGlvbiB3aGVuIGxvZ2luIGlzIHN1Y2Nlc3NmdWwiLCJyaWNoX3RleHRfanNvbl9yZXByIjp7InR5cGUiOiJkb2MiLCJjb250ZW50IjpbeyJ0eXBlIjoicGFyYWdyYXBoIiwiY29udGVudCI6W3sidHlwZSI6InRleHQiLCJ0ZXh0IjoiR2V0IGFsbCB1c2VyIGluZm9ybWF0aW9uIHdoZW4gbG9naW4gaXMgc3VjY2Vzc2Z1bCJ9XX1dfSwibWVudGlvbmVkX2l0ZW1zIjpbXSwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV8wMVVFQmNUZ0ZrSGl1VEhLOEFFZ2o0S3oiLCJ0b29sX25hbWUiOiJjb2RlYmFzZS1yZXRyaWV2YWwiLCJpbnB1dF9qc29uIjoie1wiaW5mb3JtYXRpb25fcmVxdWVzdFwiOiBcIkZpbmQgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGxvZ2luIHByb2Nlc3MsIGluY2x1ZGluZyB0aGUgbG9naW4gY29tcG9uZW50LCBhdXRoZW50aWNhdGlvbiBtZXRob2RzLCBhbmQgaG93IHVzZXIgaW5mb3JtYXRpb24gaXMgaGFuZGxlZCBhZnRlciBzdWNjZXNzZnVsIGxvZ2luLiBBbHNvIGxvb2sgZm9yIGFueSB1c2VyIG1vZGVsIG9yIGRhdGEgc3RydWN0dXJlcyB0aGF0IHN0b3JlIHVzZXIgaW5mb3JtYXRpb24uXCJ9IiwibWNwX3NlcnZlcl9uYW1lIjoiIiwibWNwX3Rvb2xfbmFtZSI6IiJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiSSdsbCBoZWxwIHlvdSBpbXBsZW1lbnQgZnVuY3Rpb25hbGl0eSB0byBnZXQgYWxsIHVzZXIgaW5mb3JtYXRpb24gd2hlbiBsb2dpbiBpcyBzdWNjZXNzZnVsLiBMZXQgbWUgZmlyc3QgZ2F0aGVyIGluZm9ybWF0aW9uIGFib3V0IHRoZSBjdXJyZW50IGNvZGViYXNlIHRvIHVuZGVyc3RhbmQgaG93IHRoZSBsb2dpbiBwcm9jZXNzIHdvcmtzIGFuZCB3aGVyZSB3ZSBuZWVkIHRvIG1ha2UgY2hhbmdlcy5cbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjAsInRleHRfbm9kZSI6eyJjb250ZW50IjoiR2V0IGFsbCB1c2VyIGluZm9ybWF0aW9uIHdoZW4gbG9naW4gaXMgc3VjY2Vzc2Z1bCJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkU6L0hvY1RhcC8wMl9KQVZBLzAzX1Byb2plY3QvSW50ZXJuZXQgTWFuZ2VtZW50IFN5c3RlbSIsImZvbGRlclJvb3QiOiJFOi9Ib2NUYXAvMDJfSkFWQS8wM19Qcm9qZWN0L0ludGVybmV0IE1hbmdlbWVudCBTeXN0ZW0ifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJ0aW1lc3RhbXAiOiIyMDI1LTA1LTEzVDEyOjU4OjMzLjYzMVoiLCJyZXNwb25zZV90ZXh0IjoiSSdsbCBoZWxwIHlvdSBpbXBsZW1lbnQgZnVuY3Rpb25hbGl0eSB0byBnZXQgYWxsIHVzZXIgaW5mb3JtYXRpb24gd2hlbiBsb2dpbiBpcyBzdWNjZXNzZnVsLiBMZXQgbWUgZmlyc3QgZ2F0aGVyIGluZm9ybWF0aW9uIGFib3V0IHRoZSBjdXJyZW50IGNvZGViYXNlIHRvIHVuZGVyc3RhbmQgaG93IHRoZSBsb2dpbiBwcm9jZXNzIHdvcmtzIGFuZCB3aGVyZSB3ZSBuZWVkIHRvIG1ha2UgY2hhbmdlcy5cbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiJiY2VkNTRhOC1mOTg0LTQwNWItOWZlNi04ODBmYjI2ZDg1NDEiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1XzAxNWpnRjNEQm5vZWM0M1dXQlJBOGprZiIsInRvb2xfbmFtZSI6InN0ci1yZXBsYWNlLWVkaXRvciIsImlucHV0X2pzb24iOiJ7XCJjb21tYW5kXCI6IFwidmlld1wiLCBcInBhdGhcIjogXCJzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9Gb3Jnb3RQYXNzd29yZC5qYXZhXCJ9IiwibWNwX3NlcnZlcl9uYW1lIjoiIiwibWNwX3Rvb2xfbmFtZSI6IiJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiTGV0IG1lIGFsc28gY2hlY2sgdGhlIEZvcmdvdFBhc3N3b3JkLmphdmEgZmlsZSB0aGF0IHlvdSBtZW50aW9uZWQ6XG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJUaGUgZm9sbG93aW5nIGNvZGUgc2VjdGlvbnMgd2VyZSByZXRyaWV2ZWQ6XG5QYXRoOiBzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9Mb2dpbi5qYXZhXG4vKlxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9MaWNlbnNlcy9saWNlbnNlLWRlZmF1bHQudHh0IHRvIGNoYW5nZSB0aGlzIGxpY2Vuc2VcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvR1VJRm9ybXMvSkZyYW1lLmphdmEgdG8gZWRpdCB0aGlzIHRlbXBsYXRlXG4gKi9cbnBhY2thZ2UgaW50ZXJuZXQubWFuZ2VtZW50LnN5c3RlbTtcblxuaW1wb3J0IERBTy5Vc2VyREFPO1xuaW1wb3J0IE1vZGVsLlVzZXI7XG5pbXBvcnQgamF2YXguc3dpbmcuSk9wdGlvblBhbmU7XG5cbi8qKlxuICpcbiAqIEBhdXRob3IgTmdvYyBUaGFvXG4gKi9cbnB1YmxpYyBjbGFzcyBMb2dpbiBleHRlbmRzIGphdmF4LnN3aW5nLkpGcmFtZSB7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIG5ldyBmb3JtIExvZ2luXG4gICAgICovXG4gICAgcHVibGljIExvZ2luKCkge1xuICAgICAgICBpbml0Q29tcG9uZW50cygpO1xuICAgICAgICBzZXRUaXRsZShcIsSQxINuZyBrw71cIik7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgY2xlYXIoKXtcbiAgICAgICAgdHh0VXNlck5hbWUuc2V0VGV4dChcIlwiKTtcbiAgICAgICAgdHh0UGFzc3dvcmQuc2V0VGV4dChcIlwiKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYm9vbGVhbiB2YWxpZGF0ZUZpZWxkcygpe1xuICAgICAgICBTdHJpbmcgdXNlck5hbWUgPSB0eHRVc2VyTmFtZS5nZXRUZXh0KCk7XG4gICAgICAgIFN0cmluZyBwYXNzd29yZCA9IHR4dFBhc3N3b3JkLmdldFRleHQoKTtcblxuICAgICAgICBpZih1c2VyTmFtZS5pc0VtcHR5KCkgfHwgcGFzc3dvcmQuaXNFbXB0eSgpKXtcbiAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwiVnVpIGzDsm5nIGtow7RuZyBi4buPIHRy4buRbmchXCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuLi4uXG5cbiAgICAgICAgakxhYmVsMSA9IG5ldyBqYXZheC5zd2luZy5KTGFiZWwoKTtcbiAgICAgICAgakxhYmVsMiA9IG5ldyBqYXZheC5zd2luZy5KTGFiZWwoKTtcbiAgICAgICAgakxhYmVsMyA9IG5ldyBqYXZheC5zd2luZy5KTGFiZWwoKTtcbiAgICAgICAgakxhYmVsNCA9IG5ldyBqYXZheC5zd2luZy5KTGFiZWwoKTtcbiAgICAgICAgdHh0VXNlck5hbWUgPSBuZXcgamF2YXguc3dpbmcuSlRleHRGaWVsZCgpO1xuICAgICAgICB0eHRQYXNzd29yZCA9IG5ldyBqYXZheC5zd2luZy5KUGFzc3dvcmRGaWVsZCgpO1xuICAgICAgICBqU2VwYXJhdG9yMSA9IG5ldyBqYXZheC5zd2luZy5KU2VwYXJhdG9yKCk7XG4gICAgICAgIGpTZXBhcmF0b3IyID0gbmV3IGphdmF4LnN3aW5nLkpTZXBhcmF0b3IoKTtcbiAgICAgICAgYnRuTG9naW4gPSBuZXcgamF2YXguc3dpbmcuSkJ1dHRvbigpO1xuICAgICAgICBidG5Gb3Jnb3RQYXNzd29yZCA9IG5ldyBqYXZheC5zd2luZy5KQnV0dG9uKCk7XG4gICAgICAgIGJ0blNpZ251cCA9IG5ldyBqYXZheC5zd2luZy5KQnV0dG9uKCk7XG4gICAgICAgIGpMYWJlbDUgPSBuZXcgamF2YXguc3dpbmcuSkxhYmVsKCk7XG4gICAgICAgIGJ0bkV4aXQgPSBuZXcgamF2YXguc3dpbmcuSkJ1dHRvbigpO1xuXG4gICAgICAgIHNldERlZmF1bHRDbG9zZU9wZXJhdGlvbihqYXZheC5zd2luZy5XaW5kb3dDb25zdGFudHMuRVhJVF9PTl9DTE9TRSk7XG4uLi5cblxuICAgIHByaXZhdGUgdm9pZCBidG5Mb2dpbkFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5Mb2dpbkFjdGlvblBlcmZvcm1lZFxuICAgICAgICAvLyBUT0RPIGFkZCB5b3VyIGhhbmRsaW5nIGNvZGUgaGVyZTpcbiAgICAgICAgaWYodmFsaWRhdGVGaWVsZHMoKSkge1xuICAgICAgICAgICAgdHJ5e1xuICAgICAgICAgICAgICAgIFN0cmluZyB1c2VybmFtZSA9IHR4dFVzZXJOYW1lLmdldFRleHQoKS50cmltKCk7XG4gICAgICAgICAgICAgICAgU3RyaW5nIHBhc3N3b3JkID0gdHh0UGFzc3dvcmQuZ2V0VGV4dCgpLnRyaW0oKTtcblxuICAgICAgICAgICAgICAgIFVzZXIgdXNlciA9IG51bGw7XG4gICAgICAgICAgICAgICAgYm9vbGVhbiBpc1N1Y2Nlc3MgPSBVc2VyREFPLmxvZ2luKHVzZXJuYW1lLCBwYXNzd29yZCk7XG5cbiAgICAgICAgICAgICAgICBpZihpc1N1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2codGhpcywgXCLEkMSDbmcgbmjhuq1wIHRow6BuaCBjw7RuZyFcIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5JTkZPUk1BVElPTl9NRVNTQUdFKTtcbi8vICAgICAgICAgICAgICAgICAgICBuZXcgTWFpbkZyYW1lKCkuc2V0VmlzaWJsZSh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwb3NlKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2codGhpcywgXCJTYWkgdMOqbiDEkcSDbmcgbmjhuq1wIGhv4bq3YyBt4bqtdCBraOG6qXUuXCIsIFwiTOG7l2lcIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAgICAgICAgICAgICAgfVxuLi4uXG5cbiAgICBwcml2YXRlIHZvaWQgYnRuRXhpdEFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5FeGl0QWN0aW9uUGVyZm9ybWVkXG4gICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxuICAgICAgICBpbnQgcmVzdWx0ID0gSk9wdGlvblBhbmUuc2hvd0NvbmZpcm1EaWFsb2cobnVsbCwgXCJC4bqhbiBjw7MgY2jhuq9jIGNo4bqvbiBtdeG7kW4gdGhvw6F0IGtow7RuZz9cIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5ZRVNfTk9fT1BUSU9OLCBKT3B0aW9uUGFuZS5RVUVTVElPTl9NRVNTQUdFKTtcblxuICAgICAgICBpZiAocmVzdWx0ID09IEpPcHRpb25QYW5lLllFU19PUFRJT04pIHtcbiAgICAgICAgICAgIFN5c3RlbS5leGl0KDApO1xuICAgICAgICB9XG4gICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuRXhpdEFjdGlvblBlcmZvcm1lZFxuXG4gICAgcHJpdmF0ZSB2b2lkIGJ0blNpZ251cEFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5TaWdudXBBY3Rpb25QZXJmb3JtZWRcbiAgICAgICAgLy8gVE9ETyBhZGQgeW91ciBoYW5kbGluZyBjb2RlIGhlcmU6XG4gICAgICAgIHNldFZpc2libGUoZmFsc2UpO1xuICAgICAgICBuZXcgU2lnblVwKCkuc2V0VmlzaWJsZSh0cnVlKTtcbiAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5TaWdudXBBY3Rpb25QZXJmb3JtZWRcbi4uLlxuXG4gICAgLy8gVmFyaWFibGVzIGRlY2xhcmF0aW9uIC0gZG8gbm90IG1vZGlmeS8vR0VOLUJFR0lOOnZhcmlhYmxlc1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkJ1dHRvbiBidG5FeGl0O1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkJ1dHRvbiBidG5Gb3Jnb3RQYXNzd29yZDtcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpCdXR0b24gYnRuTG9naW47XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KQnV0dG9uIGJ0blNpZ251cDtcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpMYWJlbCBqTGFiZWwxO1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkxhYmVsIGpMYWJlbDI7XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KTGFiZWwgakxhYmVsMztcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpMYWJlbCBqTGFiZWw0O1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkxhYmVsIGpMYWJlbDU7XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KU2VwYXJhdG9yIGpTZXBhcmF0b3IxO1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSlNlcGFyYXRvciBqU2VwYXJhdG9yMjtcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpQYXNzd29yZEZpZWxkIHR4dFBhc3N3b3JkO1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSlRleHRGaWVsZCB0eHRVc2VyTmFtZTtcbiAgICAvLyBFbmQgb2YgdmFyaWFibGVzIGRlY2xhcmF0aW9uLy9HRU4tRU5EOnZhcmlhYmxlc1xufVxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL2NvbS9zdG9yZS9hcHAvcGV0c3RvcmUvQ29udHJvbGxlcnMvTG9naW5Db250cm9sbGVyLmphdmFcbi4uLlxuXG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5EQU8uVXNlckRBTztcbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLkRBTy5TdGFmZkRBTztcbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLk1vZGVscy5FbnRpdGllcy5Vc2VyO1xuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuTW9kZWxzLkVudGl0aWVzLlN0YWZmO1xuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuU2Vzc2lvbnMuU2Vzc2lvbk1hbmFnZXI7XG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5WaWV3cy5BZG1pbkZhY3Rvcnk7XG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5WaWV3cy5WaWV3RmFjdG9yeTtcbmltcG9ydCBkZS5qZW5zZC5meC5nbHlwaHMuZm9udGF3ZXNvbWUuRm9udEF3ZXNvbWVJY29uO1xuaW1wb3J0IGRlLmplbnNkLmZ4LmdseXBocy5mb250YXdlc29tZS5Gb250QXdlc29tZUljb25WaWV3O1xuaW1wb3J0IGphdmFmeC5meG1sLkZYTUw7XG5pbXBvcnQgamF2YWZ4LmZ4bWwuSW5pdGlhbGl6YWJsZTtcbmltcG9ydCBqYXZhZnguc2NlbmUuY29udHJvbC4qO1xuaW1wb3J0IGphdmFmeC5zY2VuZS5pbnB1dC5Nb3VzZUV2ZW50O1xuaW1wb3J0IGphdmFmeC5zdGFnZS5TdGFnZTtcbmltcG9ydCBqYXZhZnguc2NlbmUuaW1hZ2UuSW1hZ2U7XG5pbXBvcnQgamF2YWZ4LnNjZW5lLmltYWdlLkltYWdlVmlldztcbmltcG9ydCBqYXZhZnguc2NlbmUucGFpbnQuSW1hZ2VQYXR0ZXJuO1xuaW1wb3J0IGphdmEudXRpbC5PYmplY3RzO1xuLi4uXG5cbnB1YmxpYyBjbGFzcyBMb2dpbkNvbnRyb2xsZXIgaW1wbGVtZW50cyBJbml0aWFsaXphYmxlIHtcblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBGb250QXdlc29tZUljb25WaWV3IGV5ZUljb247XG5cbiAgICBARlhNTFxuICAgIHByaXZhdGUgVGV4dEZpZWxkIHNob3dQYXNzd29yZDtcblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBQYXNzd29yZEZpZWxkIHBhc3N3b3JkRmllbGQ7XG5cbiAgICBARlhNTFxuICAgIHByaXZhdGUgVGV4dEZpZWxkIHVzZXJuYW1lRmllbGQ7XG5cbiAgICBARlhNTFxuICAgIHByaXZhdGUgQnV0dG9uIGxvZ2luQnV0dG9uO1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIExhYmVsIGVycm9yTGFiZWw7XG5cbiAgICBARlhNTFxuICAgIHByaXZhdGUgSHlwZXJsaW5rIGZvcmdvdFBhc3N3b3JkTGluaztcblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBJbWFnZVZpZXcgdXNlckltYWdlO1xuXG4gICAgcHJpdmF0ZSBkb3VibGUgeCwgeTtcblxuICAgIFVzZXJEQU8gdXNlckRBTyA9IG5ldyBVc2VyREFPKCk7XG4gICAgU3RhZmZEQU8gc3RhZmZEQU8gPSBTdGFmZkRBTy5nZXRJbnN0YW5jZSgpO1xuICAgIHB1YmxpYyBzdGF0aWMgaW50IGlkU3RhZmZDdXJyZW50O1xuICAgIHB1YmxpYyBzdGF0aWMgaW50IGlkQWRtaW5DdXJyZW50O1xuXG4gICAgcHJpdmF0ZSBTZXNzaW9uTWFuYWdlciBzZXNzaW9uTWFuYWdlciA9IG5ldyBTZXNzaW9uTWFuYWdlcigpO1xuLi4uXG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFTDrG0gdXNlciB0aGVvIHVzZXJuYW1lXG4gICAgICAgICAgICBVc2VyIHVzZXIgPSB1c2VyREFPLmZpbmRCeVVzZXJuYW1lKHVzZXJuYW1lKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYodXNlciA9PSBudWxsIHx8IHVzZXIuZ2V0VXNlcm5hbWUoKSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgQ29udHJvbGxlclV0aWxzLnNob3dBbGVydChBbGVydC5BbGVydFR5cGUuRVJST1IsIFwiTOG7l2lcIiwgXCJUw6puIMSRxINuZyBuaOG6rXAga2jDtG5nIMSRw7puZ1wiKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEtp4buDbSB0cmEgdMOqbiDEkcSDbmcgbmjhuq1wXG4gICAgICAgICAgICBpZiAoIXVzZXIuZ2V0VXNlcm5hbWUoKS5lcXVhbHModXNlcm5hbWUpKSB7XG4gICAgICAgICAgICAgICAgQ29udHJvbGxlclV0aWxzLnNob3dBbGVydChBbGVydC5BbGVydFR5cGUuRVJST1IsIFwiTOG7l2lcIiwgXCJUw6puIMSRxINuZyBuaOG6rXAga2jDtG5nIMSRw7puZ1wiKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEtp4buDbSB0cmEgbeG6rXQga2jhuql1XG4gICAgICAgICAgICBpZighQkNyeXB0LmNoZWNrcHcocGFzc3dvcmQsIHVzZXIuZ2V0UGFzc3dvcmQoKSkpIHtcbiAgICAgICAgICAgICAgICBDb250cm9sbGVyVXRpbHMuc2hvd0FsZXJ0KEFsZXJ0LkFsZXJ0VHlwZS5FUlJPUiwgXCJM4buXaVwiLCBcIk3huq10IGto4bqpdSBraMO0bmcgxJHDum5nXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc2Vzc2lvbk1hbmFnZXIuc2V0Q3VycmVudFVzZXIodXNlcik7XG5cbiAgICAgICAgICAgIFN0YWdlIGN1cnJlbnRTdGFnZSA9IChTdGFnZSkgdXNlcm5hbWVGaWVsZC5nZXRTY2VuZSgpLmdldFdpbmRvdygpO1xuXG4gICAgICAgICAgICBpZih1c2VyLmdldFJvbGUoKS5lcXVhbHMoVXNlci5ST0xFX0FETUlOKSkge1xuICAgICAgICAgICAgICAgIGlkQWRtaW5DdXJyZW50ID0gdXNlci5nZXRVc2VySWQoKTtcbiAgICAgICAgICAgICAgICBBZG1pbkZhY3RvcnkuZ2V0SW5zdGFuY2UoKS5zd2l0Y2hDb250ZW50KFwiZGFzaGJvYXJkXCIsIGN1cnJlbnRTdGFnZSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYodXNlci5nZXRSb2xlKCkuZXF1YWxzKFVzZXIuUk9MRV9VU0VSKSkge1xuICAgICAgICAgICAgICAgIGlkU3RhZmZDdXJyZW50ID0gdXNlci5nZXRVc2VySWQoKTtcbiAgICAgICAgICAgICAgICBTdGFmZiBzdGFmZiA9IHN0YWZmREFPLmZpbmRCeVVzZXJJZCh1c2VyLmdldFVzZXJJZCgpKTtcbiAgICAgICAgICAgICAgICBpZiAoc3RhZmYgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBzZXNzaW9uTWFuYWdlci5zZXRDdXJyZW50U3RhZmYoc3RhZmYpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBWaWV3RmFjdG9yeS5nZXRJbnN0YW5jZSgpLnN3aXRjaENvbnRlbnQoXCJkYXNoYm9hcmRcIiwgY3VycmVudFN0YWdlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgQ29udHJvbGxlclV0aWxzLnNob3dBbGVydChBbGVydC5BbGVydFR5cGUuRVJST1IsIFwiTOG7l2lcIiwgXCJWYWkgdHLDsiBuZ8aw4budaSBkw7luZyBraMO0bmcgaOG7o3AgbOG7h1wiKTtcbiAgICAgICAgICAgICAgICBzZXNzaW9uTWFuYWdlci5jbGVhcigpO1xuICAgICAgICAgICAgfVxuLi4uXG5QYXRoOiBzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9TZXNzaW9uL1VzZXJTZXNzaW9uLmphdmFcbi8qXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0xpY2Vuc2VzL2xpY2Vuc2UtZGVmYXVsdC50eHQgdG8gY2hhbmdlIHRoaXMgbGljZW5zZVxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NsYXNzLmphdmEgdG8gZWRpdCB0aGlzIHRlbXBsYXRlXG4gKi9cbnBhY2thZ2UgaW50ZXJuZXQubWFuZ2VtZW50LnN5c3RlbS5TZXNzaW9uO1xuXG5pbXBvcnQgTW9kZWwuVXNlcjtcblxuLyoqXG4gKlxuICogQGF1dGhvciBOZ29jIFRoYW9cbiAqL1xucHVibGljIGNsYXNzIFVzZXJTZXNzaW9uIHtcbiAgICBwdWJsaWMgc3RhdGljIFVzZXIgY3VycmVudFVzZXI7XG5cbiAgICBwdWJsaWMgVXNlclNlc3Npb24oKSB7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBVc2VyIGdldEN1cnJlbnRVc2VyKCkge1xuICAgICAgICByZXR1cm4gY3VycmVudFVzZXI7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyB2b2lkIHNldEN1cnJlbnRVc2VyKFVzZXIgY3VycmVudFVzZXIpIHtcbiAgICAgICAgVXNlclNlc3Npb24uY3VycmVudFVzZXIgPSBjdXJyZW50VXNlcjtcbiAgICB9XG4gICAgXG4gICAgXG59XG4uLi5cblBhdGg6IHNyYy9Nb2RlbC9Vc2VyLmphdmFcbi4uLlxuXG5pbXBvcnQgamF2YS50aW1lLkxvY2FsRGF0ZVRpbWU7XG4vKipcbiAqXG4gKiBAYXV0aG9yIE5nb2MgVGhhb1xuICovXG5wdWJsaWMgY2xhc3MgVXNlciB7XG4gICAgcHJpdmF0ZSBpbnQgdXNlcl9pZDtcbiAgICBwcml2YXRlIFN0cmluZyB1c2VybmFtZTtcbiAgICBwcml2YXRlIFN0cmluZyBwYXNzd29yZDtcbiAgICBwcml2YXRlIFN0cmluZyByb2xlO1xuICAgIHByaXZhdGUgTG9jYWxEYXRlVGltZSBjcmVhdGVfYXQ7XG4gICAgcHJpdmF0ZSBib29sZWFuIGlzQWN0aXZlO1xuXG4gICAgcHVibGljIFVzZXIoKSB7XG4gICAgfVxuXG4gICAgcHVibGljIFVzZXIoaW50IHVzZXJfaWQsIFN0cmluZyB1c2VybmFtZSwgU3RyaW5nIHBhc3N3b3JkLCBTdHJpbmcgcm9sZSwgTG9jYWxEYXRlVGltZSBjcmVhdGVfYXQsIGJvb2xlYW4gaXNBY3RpdmUpIHtcbiAgICAgICAgdGhpcy51c2VyX2lkID0gdXNlcl9pZDtcbiAgICAgICAgdGhpcy51c2VybmFtZSA9IHVzZXJuYW1lO1xuICAgICAgICB0aGlzLnBhc3N3b3JkID0gcGFzc3dvcmQ7XG4gICAgICAgIHRoaXMucm9sZSA9IHJvbGU7XG4gICAgICAgIHRoaXMuY3JlYXRlX2F0ID0gY3JlYXRlX2F0O1xuICAgICAgICB0aGlzLmlzQWN0aXZlID0gaXNBY3RpdmU7XG4gICAgfVxuXG4gICAgcHVibGljIGludCBnZXRVc2VyX2lkKCkge1xuICAgICAgICByZXR1cm4gdXNlcl9pZDtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXRVc2VyX2lkKGludCB1c2VyX2lkKSB7XG4gICAgICAgIHRoaXMudXNlcl9pZCA9IHVzZXJfaWQ7XG4gICAgfVxuXG4gICAgcHVibGljIFN0cmluZyBnZXRVc2VybmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHVzZXJuYW1lO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHNldFVzZXJuYW1lKFN0cmluZyB1c2VybmFtZSkge1xuICAgICAgICB0aGlzLnVzZXJuYW1lID0gdXNlcm5hbWU7XG4gICAgfVxuLi4uXG5QYXRoOiBzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9TaWduVXAuamF2YVxuLi4uXG5cbiAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5SZXR1cm5BY3Rpb25QZXJmb3JtZWRcblxuICAgIHByaXZhdGUgdm9pZCBidG5TaWdudXBBY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuU2lnbnVwQWN0aW9uUGVyZm9ybWVkXG4gICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxuICAgICAgICBpZiAodmFsaWRhdGVGaWVsZHMoKSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBTdWJzY3JpYmVyIHN1YiA9IG5ldyBTdWJzY3JpYmVyKCk7XG4gICAgICAgICAgICAgICAgc3ViLnNldEZ1bGxOYW1lKHR4dE5hbWUuZ2V0VGV4dCgpKTtcbiAgICAgICAgICAgICAgICBzdWIuc2V0VXNlcm5hbWUodHh0VXNlck5hbWUuZ2V0VGV4dCgpKTtcbiAgICAgICAgICAgICAgICBzdWIuc2V0UGFzc3dvcmQodHh0UGFzc3dvcmQuZ2V0VGV4dCgpKTtcbiAgICAgICAgICAgICAgICBzdWIuc2V0Um9sZShERUZBVUxUX1JPTEUpO1xuICAgICAgICAgICAgICAgIHN1Yi5zZXRBZGRyZXNzKHR4dEFkZHJlc3MuZ2V0VGV4dCgpKTtcbiAgICAgICAgICAgICAgICBzdWIuc2V0UGhvbmUodHh0UGhvbmUuZ2V0VGV4dCgpKTtcbiAgICAgICAgICAgICAgICBzdWIuc2V0Q3JlYXRlX2F0KExvY2FsRGF0ZVRpbWUubm93KCkpO1xuICAgICAgICAgICAgICAgIFN1YnNjcmliZXJEQU8uaW5zZXJ0KHN1Yik7XG4gICAgICAgICAgICAgICAgY2xlYXIoKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBleCkge1xuICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwiTOG7l2k6IFwiICsgZXguZ2V0TWVzc2FnZSgpLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuU2lnbnVwQWN0aW9uUGVyZm9ybWVkXG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvY29tL3N0b3JlL2FwcC9wZXRzdG9yZS9EQU8vVXNlckRBTy5qYXZhXG5wYWNrYWdlIGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuREFPO1xuXG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5Nb2RlbHMuRW50aXRpZXMuVXNlcjtcbmltcG9ydCBvcmcubWluZHJvdC5qYmNyeXB0LkJDcnlwdDtcblxuaW1wb3J0IGphdmEuc3FsLio7XG5pbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDtcbmltcG9ydCBqYXZhLnV0aWwuQmFzZTY0O1xuXG5wdWJsaWMgY2xhc3MgVXNlckRBTyBpbXBsZW1lbnRzIEJhc2VEQU88VXNlciwgSW50ZWdlcj4ge1xuICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgaW50IGlzRHVwbGljYXRlID0gLTE7XG5cbiAgICBwdWJsaWMgc3RhdGljIFVzZXJEQU8gZ2V0SW5zdGFuY2UoKSB7XG4gICAgICAgIHJldHVybiBuZXcgVXNlckRBTygpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgU3RyaW5nIGVuY29kZShTdHJpbmcgcGFzc3dvcmQpIHtcbi8vICAgICAgICByZXR1cm4gQmFzZTY0LmdldEVuY29kZXIoKS5lbmNvZGVUb1N0cmluZyhwYXNzd29yZC5nZXRCeXRlcygpKTtcbiAgICAgICAgcmV0dXJuIEJDcnlwdC5oYXNocHcocGFzc3dvcmQsIEJDcnlwdC5nZW5zYWx0KCkpO1xuICAgIH1cblxuLy8gICAgcHVibGljIHN0YXRpYyBTdHJpbmcgZGVjb2RlKFN0cmluZyBwYXNzd29yZCkge1xuLy8gICAgICAgIHJldHVybiBuZXcgU3RyaW5nKEJhc2U2NC5nZXREZWNvZGVyKCkuZGVjb2RlKHBhc3N3b3JkKSk7XG4vLyAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGJvb2xlYW4gdmVyaWZ5KFN0cmluZyBwYXNzd29yZCwgU3RyaW5nIGhhc2hlZCkge1xuICAgICAgICByZXR1cm4gQkNyeXB0LmNoZWNrcHcocGFzc3dvcmQsIGhhc2hlZCk7XG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIGludCBpbnNlcnQoVXNlciBlbnRpdHkpIHtcbiAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcbiAgICAgICAgUHJlcGFyZWRTdGF0ZW1lbnQgc3RtdCA9IG51bGw7XG4gICAgICAgIFJlc3VsdFNldCBycyA9IG51bGw7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbm4gPSBEYXRhYmFzZVV0aWwuZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgICAgICAgU3RyaW5nIHNxbCA9IFwiSU5TRVJUIElOVE8gVXNlcnMgKHVzZXJuYW1lLCBwYXNzd29yZCwgcm9sZSwgaW1hZ2VfdXJsLCBpc0FjdGl2ZSkgVkFMVUVTICg/LCA/LCA/LCA/LCA/KVwiO1xuICAgICAgICAgICAgc3RtdCA9IGNvbm4ucHJlcGFyZVN0YXRlbWVudChzcWwsIFN0YXRlbWVudC5SRVRVUk5fR0VORVJBVEVEX0tFWVMpO1xuXG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygxLCBlbnRpdHkuZ2V0VXNlcm5hbWUoKSk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygyLCBlbmNvZGUoZW50aXR5LmdldFBhc3N3b3JkKCkpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDMsIGVudGl0eS5nZXRSb2xlKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoNCwgZW50aXR5LmdldEltYWdlVXJsKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRCb29sZWFuKDUsIGVudGl0eS5pc0FjdGl2ZSgpKTtcblxuICAgICAgICAgICAgaW50IGFmZmVjdGVkUm93cyA9IHN0bXQuZXhlY3V0ZVVwZGF0ZSgpO1xuICAgICAgICAgICAgaWYgKGFmZmVjdGVkUm93cyA9PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRyeSAoUmVzdWx0U2V0IGdlbmVyYXRlZEtleXMgPSBzdG10LmdldEdlbmVyYXRlZEtleXMoKSkge1xuICAgICAgICAgICAgICAgIGlmIChnZW5lcmF0ZWRLZXlzLm5leHQoKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ2VuZXJhdGVkS2V5cy5nZXRJbnQoMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBEYXRhYmFzZVV0aWwuY2xvc2VSZXNvdXJjZXMocnMsIHN0bXQsIGNvbm4pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIGludCB1cGRhdGUoVXNlciBlbnRpdHkpIHtcbiAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcbiAgICAgICAgUHJlcGFyZWRTdGF0ZW1lbnQgc3RtdCA9IG51bGw7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbm4gPSBEYXRhYmFzZVV0aWwuZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgICAgICAgU3RyaW5nIHNxbCA9IFwiVVBEQVRFIFVzZXJzIFNFVCB1c2VybmFtZSA9ID8sIHBhc3N3b3JkID0gPywgcm9sZSA9ID8sIGltYWdlX3VybCA9ID8sIGlzQWN0aXZlID0gPyBXSEVSRSB1c2VyX2lkID0gP1wiO1xuICAgICAgICAgICAgc3RtdCA9IGNvbm4ucHJlcGFyZVN0YXRlbWVudChzcWwpO1xuXG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygxLCBlbnRpdHkuZ2V0VXNlcm5hbWUoKSk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygyLCBlbmNvZGUoZW50aXR5LmdldFBhc3N3b3JkKCkpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDMsIGVudGl0eS5nZXRSb2xlKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoNCwgZW50aXR5LmdldEltYWdlVXJsKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRCb29sZWFuKDUsIGVudGl0eS5pc0FjdGl2ZSgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0SW50KDYsIGVudGl0eS5nZXRVc2VySWQoKSk7XG5cbiAgICAgICAgICAgIHJldHVybiBzdG10LmV4ZWN1dGVVcGRhdGUoKTtcbiAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIERhdGFiYXNlVXRpbC5jbG9zZVJlc291cmNlcyhzdG10LCBjb25uKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBpbnQgdXBkYXRlKFVzZXIgZW50aXR5LCBib29sZWFuIGlzVXNlcm5hbWVDaGFuZ2VkKSB7XG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25uID0gRGF0YWJhc2VVdGlsLmdldENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgIFN0cmluZyBzcWwgPSBcIlVQREFURSBVc2VycyBTRVQgdXNlcm5hbWUgPSA/LCBwYXNzd29yZCA9ID8sIHJvbGUgPSA/LCBpbWFnZV91cmwgPSA/LCBpc0FjdGl2ZSA9ID8gV0hFUkUgdXNlcl9pZCA9ID9cIjtcbiAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsKTtcblxuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMSwgZW50aXR5LmdldFVzZXJuYW1lKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMiwgZW5jb2RlKGVudGl0eS5nZXRQYXNzd29yZCgpKSk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygzLCBlbnRpdHkuZ2V0Um9sZSgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDQsIGVudGl0eS5nZXRJbWFnZVVybCgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0Qm9vbGVhbig1LCBlbnRpdHkuaXNBY3RpdmUoKSk7XG4gICAgICAgICAgICBzdG10LnNldEludCg2LCBlbnRpdHkuZ2V0VXNlcklkKCkpO1xuXG4gICAgICAgICAgICByZXR1cm4gc3RtdC5leGVjdXRlVXBkYXRlKCk7XG4gICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBEYXRhYmFzZVV0aWwuY2xvc2VSZXNvdXJjZXMoc3RtdCwgY29ubik7XG4gICAgICAgIH1cbiAgICB9XG4uLi5cblxuICAgIHB1YmxpYyBVc2VyIGZpbmRCeVVzZXJuYW1lKFN0cmluZyB1c2VybmFtZSkge1xuICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgICAgICBQcmVwYXJlZFN0YXRlbWVudCBzdG10ID0gbnVsbDtcbiAgICAgICAgUmVzdWx0U2V0IHJzID0gbnVsbDtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29ubiA9IERhdGFiYXNlVXRpbC5nZXRDb25uZWN0aW9uKCk7XG4gICAgICAgICAgICBTdHJpbmcgc3FsID0gXCJTRUxFQ1QgKiBGUk9NIFVzZXJzIFdIRVJFIHVzZXJuYW1lID0gP1wiO1xuICAgICAgICAgICAgc3RtdCA9IGNvbm4ucHJlcGFyZVN0YXRlbWVudChzcWwpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMSwgdXNlcm5hbWUpO1xuICAgICAgICAgICAgcnMgPSBzdG10LmV4ZWN1dGVRdWVyeSgpO1xuXG4gICAgICAgICAgICBpZiAocnMubmV4dCgpKSB7XG4gICAgICAgICAgICAgICAgVXNlciB1c2VyID0gbmV3IFVzZXIoKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldFVzZXJJZChycy5nZXRJbnQoXCJ1c2VyX2lkXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldFVzZXJuYW1lKHJzLmdldFN0cmluZyhcInVzZXJuYW1lXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldFBhc3N3b3JkKHJzLmdldFN0cmluZyhcInBhc3N3b3JkXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldFJvbGUocnMuZ2V0U3RyaW5nKFwicm9sZVwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRJbWFnZVVybChycy5nZXRTdHJpbmcoXCJpbWFnZV91cmxcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0QWN0aXZlKHJzLmdldEJvb2xlYW4oXCJpc0FjdGl2ZVwiKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVzZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgRGF0YWJhc2VVdGlsLmNsb3NlUmVzb3VyY2VzKHJzLCBzdG10LCBjb25uKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBwdWJsaWMgVXNlciBmaW5kQnlFbWFpbChTdHJpbmcgZW1haWwpIHtcbiAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcbiAgICAgICAgUHJlcGFyZWRTdGF0ZW1lbnQgc3RtdCA9IG51bGw7XG4gICAgICAgIFJlc3VsdFNldCBycyA9IG51bGw7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIEtp4buDbSB0cmEgZW1haWwgY8OzIHThu5NuIHThuqFpIHRyb25nIGLhuqNuZyBTdGFmZnMga2jDtG5nXG4gICAgICAgICAgICBjb25uID0gRGF0YWJhc2VVdGlsLmdldENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgIFN0cmluZyBjaGVja1NxbCA9IFwiU0VMRUNUICogRlJPTSBTdGFmZnMgV0hFUkUgZW1haWwgPSA/XCI7XG4gICAgICAgICAgICBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KGNoZWNrU3FsKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDEsIGVtYWlsKTtcbiAgICAgICAgICAgIHJzID0gc3RtdC5leGVjdXRlUXVlcnkoKTtcblxuICAgICAgICAgICAgLy8gTuG6v3UgZW1haWwgdOG7k24gdOG6oWksIGzhuqV5IHRow7RuZyB0aW4gdXNlclxuICAgICAgICAgICAgU3RyaW5nIHNxbCA9IFwiU0VMRUNUIHUuKiBGUk9NIFVzZXJzIHUgXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJKT0lOIFN0YWZmcyBzIE9OIHUudXNlcl9pZCA9IHMudXNlcl9pZCBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICBcIldIRVJFIHMuZW1haWwgPSA/XCI7XG4gICAgICAgICAgICBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHNxbCk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygxLCBlbWFpbCk7XG5cbiAgICAgICAgICAgIHJzID0gc3RtdC5leGVjdXRlUXVlcnkoKTtcbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9jb20vc3RvcmUvYXBwL3BldHN0b3JlL0NvbnRyb2xsZXJzL0FkbWluL0FkbWluTWVudUNvbnRyb2xsZXIuamF2YVxuLi4uXG5cbiAgICBARlhNTFxuICAgIHByaXZhdGUgTGFiZWwgdXNlcm5hbWVMYWJlbDtcblxuICAgIHByaXZhdGUgVXNlciBjdXJyZW50VXNlcjtcblxuLy8gICAgcHJpdmF0ZSBTZXNzaW9uTWFuYWdlciBzZXNzaW9uTWFuYWdlcjtcblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyB2b2lkIGluaXRpYWxpemUoVVJMIHVybCwgUmVzb3VyY2VCdW5kbGUgcmVzb3VyY2VCdW5kbGUpIHtcbiAgICAgICAgY3VycmVudFVzZXIgPSBTZXNzaW9uTWFuYWdlci5nZXRDdXJyZW50VXNlcigpO1xuICAgICAgICBzZXR1cFVzZXJOYW1lKCk7XG4gICAgICAgIHNldHVwVXNlckltYWdlKCk7XG4gICAgICAgIHNldE1lbnUoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHZvaWQgc2V0dXBVc2VyTmFtZSgpIHtcbiAgICAgICAgaWYgKGN1cnJlbnRVc2VyICE9IG51bGwpIHtcbiAgICAgICAgICAgIHVzZXJuYW1lTGFiZWwuc2V0VGV4dChjdXJyZW50VXNlci5nZXRVc2VybmFtZSgpKTtcbiAgICAgICAgICAgIG5hbWVMYWJlbC5zZXRUZXh0KGN1cnJlbnRVc2VyLmdldFVzZXJuYW1lKCkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdXNlcm5hbWVMYWJlbC5zZXRUZXh0KFwiQ2jGsGEgxJHEg25nIG5o4bqtcFwiKTtcbiAgICAgICAgICAgIG5hbWVMYWJlbC5zZXRUZXh0KFwiQ2jGsGEgY+G6rXAgbmjhuq10IHRow7RuZyB0aW5cIik7XG4gICAgICAgIH1cbiAgICB9XG4uLi5cblxuICAgICAgICBNZW51SXRlbSBsb2dvdXRNZW51SXRlbSA9IG5ldyBNZW51SXRlbShcIsSQxINuZyB4deG6pXRcIik7XG4gICAgICAgIGxvZ291dE1lbnVJdGVtLnNldE9uQWN0aW9uKGUgLT4gaGFuZGxlTG9nb3V0KG51bGwpKTtcbiAgICAgICAgbWVudUxvZ291dC5nZXRJdGVtcygpLmFkZChsb2dvdXRNZW51SXRlbSk7XG4gICAgfVxuXG4gICAgQEZYTUxcbiAgICB2b2lkIGhhbmRsZUxvZ291dChBY3Rpb25FdmVudCBldmVudCkge1xuICAgICAgICBTdGFnZSBjdXJyZW50U3RhZ2UgPSAoU3RhZ2UpIHJvb3QuZ2V0U2NlbmUoKS5nZXRXaW5kb3coKTtcbiAgICAgICAgaWYgKENvbnRyb2xsZXJVdGlscy5zaG93Q29uZmlybWF0aW9uQW5kV2FpdChcIsSQxINuZyB4deG6pXRcIiwgXCJC4bqhbiBjw7MgY2jhuq9jIGNo4bqvbiBtdeG7kW4gxJHEg25nIHh14bqldCBraMO0bmc/XFxuTmjhuqVuIE9LIMSR4buDIHjDoWMgbmjhuq1uLlwiKSkge1xuICAgICAgICAgICAgU2Vzc2lvbk1hbmFnZXIuY2xlYXIoKTtcbiAgICAgICAgICAgIFZpZXdGYWN0b3J5LmdldEluc3RhbmNlKCkuc3dpdGNoQ29udGVudChcImxvZ2luXCIsIGN1cnJlbnRTdGFnZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBDb250cm9sbGVyVXRpbHMuc2hvd0FsZXJ0KEFsZXJ0LkFsZXJ0VHlwZS5JTkZPUk1BVElPTiwgXCJUaMO0bmcgYsOhb1wiLCBcIsSQxINuZyB4deG6pXQga2jDtG5nIHRow6BuaCBjw7RuZ1wiKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9jb20vc3RvcmUvYXBwL3BldHN0b3JlL0NvbnRyb2xsZXJzL0FkbWluL1VzZXJJbmZvckNvbnRyb2xsZXIuamF2YVxuLi4uXG5cbiAgICAgICAgaWYgKHZhbGlkYXRlSW5wdXQoKSkge1xuICAgICAgICAgICAgVXNlciB1c2VyID0gbmV3IFVzZXIoKTtcbiAgICAgICAgICAgIGlmICghaXNOZXdVc2VyKSB7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRVc2VySWQoaWRVc2VyQ3VycmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB1c2VyLnNldFVzZXJuYW1lKHR4dFVzZXJuYW1lLmdldFRleHQoKSk7XG4gICAgICAgICAgICB1c2VyLnNldFBhc3N3b3JkKHR4dFBhc3N3b3JkLmdldFRleHQoKSk7XG5cbiAgICAgICAgICAgIGJvb2xlYW4gaXNBZG1pbiA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKHJvbGVHcm91cC5nZXRTZWxlY3RlZFRvZ2dsZSgpID09IHJidG5BZG1pbikge1xuICAgICAgICAgICAgICAgIGlzQWRtaW4gPSB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChyb2xlR3JvdXAuZ2V0U2VsZWN0ZWRUb2dnbGUoKSA9PSByYnRuU3RhZmYpIHtcbiAgICAgICAgICAgICAgICBpc0FkbWluID0gZmFsc2U7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHJidG5BZG1pbi5pc1NlbGVjdGVkKCkpIHtcbiAgICAgICAgICAgICAgICBpc0FkbWluID0gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocmJ0blN0YWZmLmlzU2VsZWN0ZWQoKSkge1xuICAgICAgICAgICAgICAgIGlzQWRtaW4gPSBmYWxzZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmJ0blN0YWZmLnNldFNlbGVjdGVkKHRydWUpO1xuICAgICAgICAgICAgICAgIHJvbGVHcm91cC5zZWxlY3RUb2dnbGUocmJ0blN0YWZmKTtcbiAgICAgICAgICAgICAgICBpc0FkbWluID0gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHVzZXIuc2V0Um9sZShpc0FkbWluID8gVXNlci5ST0xFX0FETUlOIDogVXNlci5ST0xFX1VTRVIpO1xuXG4gICAgICAgICAgICB1c2VyLnNldENyZWF0ZWRBdChMb2NhbERhdGVUaW1lLm5vdygpKTtcbiAgICAgICAgICAgIHVzZXIuc2V0QWN0aXZlKHRydWUpO1xuLi4uXG5cbiAgICBwcml2YXRlIGludCBnZXROZXh0VXNlcklkKCkge1xuICAgICAgICBBcnJheUxpc3Q8VXNlcj4gdXNlcnMgPSB1c2VyREFPLmZpbmRBbGwoKTtcbiAgICAgICAgaWYgKHVzZXJzID09IG51bGwgfHwgdXNlcnMuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdXNlcnMuc3RyZWFtKClcbiAgICAgICAgICAgICAgICAubWFwVG9JbnQoVXNlcjo6Z2V0VXNlcklkKVxuICAgICAgICAgICAgICAgIC5tYXgoKVxuICAgICAgICAgICAgICAgIC5vckVsc2UoMCkgKyAxO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHNldFVzZXIoVXNlciB1c2VyKSB7XG4gICAgICAgIHNldEFjY291bnRJbmZvKHVzZXIpO1xuICAgIH1cbn0uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvY29tL3N0b3JlL2FwcC9wZXRzdG9yZS9Db250cm9sbGVycy9BZG1pbi9EYXNoYm9hcmRDb250cm9sbGVyLmphdmFcbi4uLlxuXG4gICAgcHJpdmF0ZSB2b2lkIG5hdmlnYXRlVG8oU3RyaW5nIHZpZXdOYW1lKSB7XG4gICAgICAgIFN0YWdlIGN1cnJlbnRTdGFnZSA9IChTdGFnZSkgbG9nb3V0QnV0dG9uLmdldFNjZW5lKCkuZ2V0V2luZG93KCk7XG4gICAgICAgIEFkbWluRmFjdG9yeS5nZXRJbnN0YW5jZSgpLnN3aXRjaENvbnRlbnQodmlld05hbWUsIGN1cnJlbnRTdGFnZSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB2b2lkIGhhbmRsZUxvZ291dCgpIHtcbiAgICAgICAgLy8gU3RvcCBhdXRvLXJlZnJlc2ggaWYgYWN0aXZlXG4gICAgICAgIHN0b3BBdXRvUmVmcmVzaCgpO1xuXG4gICAgICAgIFN0YWdlIGN1cnJlbnRTdGFnZSA9IChTdGFnZSkgbG9nb3V0QnV0dG9uLmdldFNjZW5lKCkuZ2V0V2luZG93KCk7XG4gICAgICAgIGlmIChDb250cm9sbGVyVXRpbHMuc2hvd0NvbmZpcm1hdGlvbkFuZFdhaXQoXCLEkMSDbmcgeHXhuqV0XCIsIFwiQuG6oW4gY8OzIGNo4bqvYyBjaOG6r24gbXXhu5FuIMSRxINuZyB4deG6pXQga2jDtG5nP1xcbk5o4bqlbiBPSyDEkeG7gyB4w6FjIG5o4bqtbi5cIikpIHtcbiAgICAgICAgICAgIFNlc3Npb25NYW5hZ2VyLmNsZWFyKCk7XG4gICAgICAgICAgICBWaWV3RmFjdG9yeS5nZXRJbnN0YW5jZSgpLnN3aXRjaENvbnRlbnQoXCJsb2dpblwiLCBjdXJyZW50U3RhZ2UpO1xuICAgICAgICB9XG4gICAgfVxuXG5cbn1cbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9jb20vc3RvcmUvYXBwL3BldHN0b3JlL1BldFN0b3JlQXBwbGljYXRpb24uamF2YVxucGFja2FnZSBjb20uc3RvcmUuYXBwLnBldHN0b3JlO1xuXG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5Nb2RlbHMuRGF0YWJhc2VNYW5hZ2VyO1xuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuVmlld3MuTW9kZWxWaWV3O1xuaW1wb3J0IGphdmFmeC5hcHBsaWNhdGlvbi5BcHBsaWNhdGlvbjtcbmltcG9ydCBqYXZhZnguZnhtbC5GWE1MTG9hZGVyO1xuaW1wb3J0IGphdmFmeC5zY2VuZS5QYXJlbnQ7XG5pbXBvcnQgamF2YWZ4LnNjZW5lLlNjZW5lO1xuaW1wb3J0IGphdmFmeC5zdGFnZS5TdGFnZTtcblxuaW1wb3J0IGphdmEuaW8uSU9FeGNlcHRpb247XG5cbnB1YmxpYyBjbGFzcyBQZXRTdG9yZUFwcGxpY2F0aW9uIGV4dGVuZHMgQXBwbGljYXRpb24ge1xuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyB2b2lkIHN0YXJ0KFN0YWdlIHByaW1hcnlTdGFnZSkge1xuICAgICAgICBEYXRhYmFzZU1hbmFnZXIuY29ubmVjdCgpO1xuICAgICAgICBNb2RlbFZpZXcuZ2V0SW5zdGFuY2UoKS5nZXRWaWV3RmFjdG9yeSgpLnNob3dXaW5kb3coXCJsb2dpblwiKTtcbi4uLlxuUGF0aDouLi4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1XzAxVUVCY1RnRmtIaXVUSEs4QUVnajRLeiJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkU6L0hvY1RhcC8wMl9KQVZBLzAzX1Byb2plY3QvSW50ZXJuZXQgTWFuZ2VtZW50IFN5c3RlbSIsImZvbGRlclJvb3QiOiJFOi9Ib2NUYXAvMDJfSkFWQS8wM19Qcm9qZWN0L0ludGVybmV0IE1hbmdlbWVudCBTeXN0ZW0ifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJ0aW1lc3RhbXAiOiIyMDI1LTA1LTEzVDEyOjU4OjQ5Ljg1MVoiLCJyZXNwb25zZV90ZXh0IjoiTGV0IG1lIGFsc28gY2hlY2sgdGhlIEZvcmdvdFBhc3N3b3JkLmphdmEgZmlsZSB0aGF0IHlvdSBtZW50aW9uZWQ6XG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiNjk2ZWMyMzQtYzM2OC00Yzg0LThiMzktODI2Y2I5YmY5YmY2IiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV8wMVlMdFJDYzZlU25FZzRKamVZcmtLNXIiLCJ0b29sX25hbWUiOiJjb2RlYmFzZS1yZXRyaWV2YWwiLCJpbnB1dF9qc29uIjoie1wiaW5mb3JtYXRpb25fcmVxdWVzdFwiOiBcIkZpbmQgdGhlIFVzZXJEQU8gY2xhc3MgaW4gdGhlIGludGVybmV0Lm1hbmdlbWVudC5zeXN0ZW0gcHJvamVjdCwgc3BlY2lmaWNhbGx5IGxvb2tpbmcgZm9yIG1ldGhvZHMgcmVsYXRlZCB0byBsb2dpbiwgcmV0cmlldmluZyB1c2VyIGluZm9ybWF0aW9uLCBhbmQgYW55IHNlc3Npb24gbWFuYWdlbWVudC5cIn0iLCJtY3Bfc2VydmVyX25hbWUiOiIiLCJtY3BfdG9vbF9uYW1lIjoiIn19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiJOb3cgbGV0IG1lIGNoZWNrIHRoZSBVc2VyREFPIGNsYXNzIHRvIHVuZGVyc3RhbmQgaG93IHVzZXIgaW5mb3JtYXRpb24gaXMgcmV0cmlldmVkOlxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiSGVyZSdzIHRoZSByZXN1bHQgb2YgcnVubmluZyBgY2F0IC1uYCBvbiBzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9Gb3Jnb3RQYXNzd29yZC5qYXZhOlxuICAgICAxXHQvKlxuICAgICAyXHQgKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0xpY2Vuc2VzL2xpY2Vuc2UtZGVmYXVsdC50eHQgdG8gY2hhbmdlIHRoaXMgbGljZW5zZVxuICAgICAzXHQgKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0dVSUZvcm1zL0pGcmFtZS5qYXZhIHRvIGVkaXQgdGhpcyB0ZW1wbGF0ZVxuICAgICA0XHQgKi9cbiAgICAgNVx0cGFja2FnZSBpbnRlcm5ldC5tYW5nZW1lbnQuc3lzdGVtO1xuICAgICA2XHRcbiAgICAgN1x0aW1wb3J0IERBTy5TdWJzY3JpYmVyREFPO1xuICAgICA4XHRpbXBvcnQgTW9kZWwuU3Vic2NyaWJlcjtcbiAgICAgOVx0aW1wb3J0IGphdmF4LnN3aW5nLkpPcHRpb25QYW5lO1xuICAgIDEwXHRpbXBvcnQgaW50ZXJuZXQubWFuZ2VtZW50LnN5c3RlbS5Mb2dpbjtcbiAgICAxMVx0aW1wb3J0IGphdmEuYXd0LkZyYW1lO1xuICAgIDEyXHRcbiAgICAxM1x0LyoqXG4gICAgMTRcdCAqXG4gICAgMTVcdCAqIEBhdXRob3IgTmdvYyBUaGFvXG4gICAgMTZcdCAqL1xuICAgIDE3XHRwdWJsaWMgY2xhc3MgRm9yZ290UGFzc3dvcmQgZXh0ZW5kcyBqYXZheC5zd2luZy5KRGlhbG9nIHtcbiAgICAxOFx0ICAgIHByaXZhdGUgU3Vic2NyaWJlciBjdXJyZW50U3Vic2NyaWJlciA9IG51bGw7XG4gICAgMTlcdCAgICBwdWJsaWMgU3RyaW5nIHBob25lUGF0dGVybiA9IFwiXlswLTldKiRcIjtcbiAgICAyMFx0XG4gICAgMjFcdCAgICAvKipcbiAgICAyMlx0ICAgICAqIENyZWF0ZXMgbmV3IGZvcm0gRm9yZ290UGFzc3dvcmRcbiAgICAyM1x0ICAgICAqL1xuICAgIDI0XHQgICAgcHVibGljIEZvcmdvdFBhc3N3b3JkKEZyYW1lIHBhcmVudCwgYm9vbGVhbiBtb2RhbCkge1xuICAgIDI1XHQgICAgICAgIHN1cGVyKHBhcmVudCwgbW9kYWwpO1xuICAgIDI2XHQgICAgICAgIGluaXRDb21wb25lbnRzKCk7XG4gICAgMjdcdFxuICAgIDI4XHQgICAgICAgIHNldFRpdGxlKFwixJDhu5VpIG3huq10IGto4bqpdVwiKTtcbiAgICAyOVx0ICAgICAgICBzZXRMb2NhdGlvblJlbGF0aXZlVG8ocGFyZW50KTtcbiAgICAzMFx0XG4gICAgMzFcdCAgICAgICAgYnRuRXhpdC5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICAzMlx0ICAgICAgICBidG5DaGFuZ2Uuc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgMzNcdCAgICAgICAgbGJOZXdQYXNzd29yZC5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICAzNFx0ICAgICAgICBsYkNvbmZpcm1QYXNzd29yZC5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICAzNVx0ICAgICAgICB0eHRQYXNzd29yZC5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICAzNlx0ICAgICAgICB0eHRDb25maXJtUGFzc3dvcmQuc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgMzdcdCAgICB9XG4gICAgMzhcdFxuICAgIDM5XHQgICAgcHVibGljIHZvaWQgY2xlYXIoKXtcbiAgICA0MFx0ICAgICAgICB0eHRQYXNzd29yZC5zZXRUZXh0KFwiXCIpO1xuICAgIDQxXHQgICAgICAgIHR4dFBob25lLnNldFRleHQoXCJcIik7XG4gICAgNDJcdCAgICAgICAgdHh0Q29uZmlybVBhc3N3b3JkLnNldFRleHQoXCJcIik7XG4gICAgNDNcdFxuICAgIDQ0XHQgICAgICAgIGJ0bkV4aXQuc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgNDVcdCAgICAgICAgYnRuQ2hhbmdlLnNldFZpc2libGUoZmFsc2UpO1xuICAgIDQ2XHQgICAgICAgIGxiTmV3UGFzc3dvcmQuc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgNDdcdCAgICAgICAgbGJDb25maXJtUGFzc3dvcmQuc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgNDhcdCAgICAgICAgdHh0UGFzc3dvcmQuc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgNDlcdCAgICAgICAgdHh0Q29uZmlybVBhc3N3b3JkLnNldFZpc2libGUoZmFsc2UpO1xuICAgIDUwXHQgICAgfVxuICAgIDUxXHRcbiAgICA1Mlx0ICAgIHB1YmxpYyBib29sZWFuIHZhbGlkYXRlUGhvbmUoKXtcbiAgICA1M1x0ICAgICAgICBTdHJpbmcgcGhvbmUgPSB0eHRQaG9uZS5nZXRUZXh0KCk7XG4gICAgNTRcdCAgICAgICAgaWYocGhvbmUubGVuZ3RoKCkgIT0gMTAgfHwgIXBob25lLm1hdGNoZXMocGhvbmVQYXR0ZXJuKSkge1xuICAgIDU1XHQgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcIlZ1aSBsw7JuZyBuaOG6rXAgxJHDum5nIMSR4buLbmggZOG6oW5nIHPhu5EgxJFp4buHbiB0aG/huqFpIVwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgIDU2XHQgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgNTdcdCAgICAgICAgfVxuICAgIDU4XHQgICAgICAgIHJldHVybiB0cnVlO1xuICAgIDU5XHQgICAgfVxuICAgIDYwXHRcbiAgICA2MVx0ICAgIHB1YmxpYyBib29sZWFuIHZhbGlkYXRlRmllbGRzKCl7XG4gICAgNjJcdCAgICAgICAgU3RyaW5nIHBhc3N3b3JkID0gdHh0UGFzc3dvcmQuZ2V0VGV4dCgpO1xuICAgIDYzXHQgICAgICAgIFN0cmluZyBjb25maXJtUGFzc3dvcmQgPSB0eHRDb25maXJtUGFzc3dvcmQuZ2V0VGV4dCgpO1xuICAgIDY0XHRcbiAgICA2NVx0ICAgICAgICBpZihwYXNzd29yZC5pc0VtcHR5KCkgfHwgY29uZmlybVBhc3N3b3JkLmlzRW1wdHkoKSl7XG4gICAgNjZcdCAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwiVnVpIGzDsm5nIGtow7RuZyBi4buPIHRy4buRbmchXCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAgNjdcdCAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICA2OFx0ICAgICAgICB9XG4gICAgNjlcdFxuICAgIDcwXHQgICAgICAgIGlmKCFwYXNzd29yZC5lcXVhbHMoY29uZmlybVBhc3N3b3JkKSl7XG4gICAgNzFcdCAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwiTeG6rXQga2jhuql1IHjDoWMgbmjhuq1uIGtow7RuZyBraOG7m3AhXCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAgNzJcdCAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICA3M1x0ICAgICAgICB9XG4gICAgNzRcdFxuICAgIDc1XHQgICAgICAgIHJldHVybiB0cnVlO1xuICAgIDc2XHQgICAgfVxuICAgIDc3XHRcbiAgICA3OFx0ICAgIC8qKlxuICAgIDc5XHQgICAgICogVGhpcyBtZXRob2QgaXMgY2FsbGVkIGZyb20gd2l0aGluIHRoZSBjb25zdHJ1Y3RvciB0byBpbml0aWFsaXplIHRoZSBmb3JtLlxuICAgIDgwXHQgICAgICogV0FSTklORzogRG8gTk9UIG1vZGlmeSB0aGlzIGNvZGUuIFRoZSBjb250ZW50IG9mIHRoaXMgbWV0aG9kIGlzIGFsd2F5c1xuICAgIDgxXHQgICAgICogcmVnZW5lcmF0ZWQgYnkgdGhlIEZvcm0gRWRpdG9yLlxuICAgIDgyXHQgICAgICovXG4gICAgODNcdCAgICBAU3VwcHJlc3NXYXJuaW5ncyhcInVuY2hlY2tlZFwiKVxuICAgIDg0XHQgICAgLy8gPGVkaXRvci1mb2xkIGRlZmF1bHRzdGF0ZT1cImNvbGxhcHNlZFwiIGRlc2M9XCJHZW5lcmF0ZWQgQ29kZVwiPi8vR0VOLUJFR0lOOmluaXRDb21wb25lbnRzXG4gICAgODVcdCAgICBwcml2YXRlIHZvaWQgaW5pdENvbXBvbmVudHMoKSB7XG4gICAgODZcdFxuICAgIDg3XHQgICAgICAgIGpMYWJlbDEgPSBuZXcgamF2YXguc3dpbmcuSkxhYmVsKCk7XG4gICAgODhcdCAgICAgICAgakxhYmVsMiA9IG5ldyBqYXZheC5zd2luZy5KTGFiZWwoKTtcbiAgICA4OVx0ICAgICAgICBsYk5ld1Bhc3N3b3JkID0gbmV3IGphdmF4LnN3aW5nLkpMYWJlbCgpO1xuICAgIDkwXHQgICAgICAgIGxiQ29uZmlybVBhc3N3b3JkID0gbmV3IGphdmF4LnN3aW5nLkpMYWJlbCgpO1xuICAgIDkxXHQgICAgICAgIGpTZXBhcmF0b3IxID0gbmV3IGphdmF4LnN3aW5nLkpTZXBhcmF0b3IoKTtcbiAgICA5Mlx0ICAgICAgICB0eHRQaG9uZSA9IG5ldyBqYXZheC5zd2luZy5KVGV4dEZpZWxkKCk7XG4gICAgOTNcdCAgICAgICAgYnRuQ2hlY2sgPSBuZXcgamF2YXguc3dpbmcuSkJ1dHRvbigpO1xuICAgIDk0XHQgICAgICAgIHR4dFBhc3N3b3JkID0gbmV3IGphdmF4LnN3aW5nLkpQYXNzd29yZEZpZWxkKCk7XG4gICAgOTVcdCAgICAgICAgdHh0Q29uZmlybVBhc3N3b3JkID0gbmV3IGphdmF4LnN3aW5nLkpQYXNzd29yZEZpZWxkKCk7XG4gICAgOTZcdCAgICAgICAgYnRuQ2hhbmdlID0gbmV3IGphdmF4LnN3aW5nLkpCdXR0b24oKTtcbiAgICA5N1x0ICAgICAgICBidG5FeGl0ID0gbmV3IGphdmF4LnN3aW5nLkpCdXR0b24oKTtcbiAgICA5OFx0XG4gICAgOTlcdCAgICAgICAgc2V0RGVmYXVsdENsb3NlT3BlcmF0aW9uKGphdmF4LnN3aW5nLldpbmRvd0NvbnN0YW50cy5ESVNQT1NFX09OX0NMT1NFKTtcbiAgIDEwMFx0XG4gICAxMDFcdCAgICAgICAgakxhYmVsMS5zZXRGb250KG5ldyBqYXZhLmF3dC5Gb250KFwiQXJpYWxcIiwgMSwgMzYpKTsgLy8gTk9JMThOXG4gICAxMDJcdCAgICAgICAgakxhYmVsMS5zZXRGb3JlZ3JvdW5kKGphdmF4LnN3aW5nLlVJTWFuYWdlci5nZXREZWZhdWx0cygpLmdldENvbG9yKFwiQWN0aW9ucy5ZZWxsb3dcIikpO1xuICAgMTAzXHQgICAgICAgIGpMYWJlbDEuc2V0VGV4dChcIsSQ4buUSSBN4bqsVCBLSOG6qFVcIik7XG4gICAxMDRcdFxuICAgMTA1XHQgICAgICAgIGpMYWJlbDIuc2V0Rm9udChuZXcgamF2YS5hd3QuRm9udChcIkFyaWFsXCIsIDEsIDE0KSk7IC8vIE5PSTE4TlxuICAgMTA2XHQgICAgICAgIGpMYWJlbDIuc2V0VGV4dChcIlPhu5EgxJFp4buHbiB0aG/huqFpOiBcIik7XG4gICAxMDdcdFxuICAgMTA4XHQgICAgICAgIGxiTmV3UGFzc3dvcmQuc2V0Rm9udChuZXcgamF2YS5hd3QuRm9udChcIkFyaWFsXCIsIDEsIDE0KSk7IC8vIE5PSTE4TlxuICAgMTA5XHQgICAgICAgIGxiTmV3UGFzc3dvcmQuc2V0VGV4dChcIk3huq10IGto4bqpdSBt4bubaTpcIik7XG4gICAxMTBcdFxuICAgMTExXHQgICAgICAgIGxiQ29uZmlybVBhc3N3b3JkLnNldEZvbnQobmV3IGphdmEuYXd0LkZvbnQoXCJBcmlhbFwiLCAxLCAxNCkpOyAvLyBOT0kxOE5cbiAgIDExMlx0ICAgICAgICBsYkNvbmZpcm1QYXNzd29yZC5zZXRUZXh0KFwiWMOhYyBuaOG6rW4gbeG6rXQga2jhuql1OlwiKTtcbiAgIDExM1x0XG4gICAxMTRcdCAgICAgICAgYnRuQ2hlY2suc2V0Rm9udChuZXcgamF2YS5hd3QuRm9udChcIkFyaWFsXCIsIDEsIDE0KSk7IC8vIE5PSTE4TlxuICAgMTE1XHQgICAgICAgIGJ0bkNoZWNrLnNldEljb24obmV3IGphdmF4LnN3aW5nLkltYWdlSWNvbihnZXRDbGFzcygpLmdldFJlc291cmNlKFwiL0ltYWdlcy9zZWFyY2gucG5nXCIpKSk7IC8vIE5PSTE4TlxuICAgMTE2XHQgICAgICAgIGJ0bkNoZWNrLnNldFRleHQoXCJLaeG7g20gdHJhXCIpO1xuICAgMTE3XHQgICAgICAgIGJ0bkNoZWNrLnNldEN1cnNvcihuZXcgamF2YS5hd3QuQ3Vyc29yKGphdmEuYXd0LkN1cnNvci5IQU5EX0NVUlNPUikpO1xuICAgMTE4XHQgICAgICAgIGJ0bkNoZWNrLmFkZEFjdGlvbkxpc3RlbmVyKG5ldyBqYXZhLmF3dC5ldmVudC5BY3Rpb25MaXN0ZW5lcigpIHtcbiAgIDExOVx0ICAgICAgICAgICAgcHVibGljIHZvaWQgYWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkge1xuICAgMTIwXHQgICAgICAgICAgICAgICAgYnRuQ2hlY2tBY3Rpb25QZXJmb3JtZWQoZXZ0KTtcbiAgIDEyMVx0ICAgICAgICAgICAgfVxuICAgMTIyXHQgICAgICAgIH0pO1xuICAgMTIzXHRcbiAgIDEyNFx0ICAgICAgICBidG5DaGFuZ2Uuc2V0Rm9udChuZXcgamF2YS5hd3QuRm9udChcIkFyaWFsXCIsIDEsIDE0KSk7IC8vIE5PSTE4TlxuICAgMTI1XHQgICAgICAgIGJ0bkNoYW5nZS5zZXRJY29uKG5ldyBqYXZheC5zd2luZy5JbWFnZUljb24oZ2V0Q2xhc3MoKS5nZXRSZXNvdXJjZShcIi9JbWFnZXMvcmVzZXQtcGFzc3dvcmQucG5nXCIpKSk7IC8vIE5PSTE4TlxuICAgMTI2XHQgICAgICAgIGJ0bkNoYW5nZS5zZXRUZXh0KFwixJDhu5VpIG3huq10IGto4bqpdVwiKTtcbiAgIDEyN1x0ICAgICAgICBidG5DaGFuZ2Uuc2V0Q3Vyc29yKG5ldyBqYXZhLmF3dC5DdXJzb3IoamF2YS5hd3QuQ3Vyc29yLkhBTkRfQ1VSU09SKSk7XG4gICAxMjhcdCAgICAgICAgYnRuQ2hhbmdlLmFkZEFjdGlvbkxpc3RlbmVyKG5ldyBqYXZhLmF3dC5ldmVudC5BY3Rpb25MaXN0ZW5lcigpIHtcbiAgIDEyOVx0ICAgICAgICAgICAgcHVibGljIHZvaWQgYWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkge1xuICAgMTMwXHQgICAgICAgICAgICAgICAgYnRuQ2hhbmdlQWN0aW9uUGVyZm9ybWVkKGV2dCk7XG4gICAxMzFcdCAgICAgICAgICAgIH1cbiAgIDEzMlx0ICAgICAgICB9KTtcbiAgIDEzM1x0XG4gICAxMzRcdCAgICAgICAgYnRuRXhpdC5zZXRGb250KG5ldyBqYXZhLmF3dC5Gb250KFwiQXJpYWxcIiwgMSwgMTQpKTsgLy8gTk9JMThOXG4gICAxMzVcdCAgICAgICAgYnRuRXhpdC5zZXRJY29uKG5ldyBqYXZheC5zd2luZy5JbWFnZUljb24oZ2V0Q2xhc3MoKS5nZXRSZXNvdXJjZShcIi9JbWFnZXMvbG9nb3V0LnBuZ1wiKSkpOyAvLyBOT0kxOE5cbiAgIDEzNlx0ICAgICAgICBidG5FeGl0LnNldFRleHQoXCJUaG/DoXRcIik7XG4gICAxMzdcdCAgICAgICAgYnRuRXhpdC5zZXRDdXJzb3IobmV3IGphdmEuYXd0LkN1cnNvcihqYXZhLmF3dC5DdXJzb3IuSEFORF9DVVJTT1IpKTtcbiAgIDEzOFx0ICAgICAgICBidG5FeGl0LmFkZEFjdGlvbkxpc3RlbmVyKG5ldyBqYXZhLmF3dC5ldmVudC5BY3Rpb25MaXN0ZW5lcigpIHtcbiAgIDEzOVx0ICAgICAgICAgICAgcHVibGljIHZvaWQgYWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkge1xuICAgMTQwXHQgICAgICAgICAgICAgICAgYnRuRXhpdEFjdGlvblBlcmZvcm1lZChldnQpO1xuICAgMTQxXHQgICAgICAgICAgICB9XG4gICAxNDJcdCAgICAgICAgfSk7XG4gICAxNDNcdFxuICAgMTQ0XHQgICAgICAgIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0IGxheW91dCA9IG5ldyBqYXZheC5zd2luZy5Hcm91cExheW91dChnZXRDb250ZW50UGFuZSgpKTtcbiAgIDE0NVx0ICAgICAgICBnZXRDb250ZW50UGFuZSgpLnNldExheW91dChsYXlvdXQpO1xuICAgMTQ2XHQgICAgICAgIGxheW91dC5zZXRIb3Jpem9udGFsR3JvdXAoXG4gICAxNDdcdCAgICAgICAgICAgIGxheW91dC5jcmVhdGVQYXJhbGxlbEdyb3VwKGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LkFsaWdubWVudC5MRUFESU5HKVxuICAgMTQ4XHQgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVNlcXVlbnRpYWxHcm91cCgpXG4gICAxNDlcdCAgICAgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVBhcmFsbGVsR3JvdXAoamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuQWxpZ25tZW50LkxFQURJTkcpXG4gICAxNTBcdCAgICAgICAgICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVTZXF1ZW50aWFsR3JvdXAoKVxuICAgMTUxXHQgICAgICAgICAgICAgICAgICAgICAgICAuYWRkR2FwKDExMCwgMTEwLCAxMTApXG4gICAxNTJcdCAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQoakxhYmVsMSkpXG4gICAxNTNcdCAgICAgICAgICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVTZXF1ZW50aWFsR3JvdXAoKVxuICAgMTU0XHQgICAgICAgICAgICAgICAgICAgICAgICAuYWRkR2FwKDYxLCA2MSwgNjEpXG4gICAxNTVcdCAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQoalNlcGFyYXRvcjEsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFLCAzNzAsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFKSlcbiAgIDE1Nlx0ICAgICAgICAgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVNlcXVlbnRpYWxHcm91cCgpXG4gICAxNTdcdCAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRHYXAoNjEsIDYxLCA2MSlcbiAgIDE1OFx0ICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChqTGFiZWwyKVxuICAgMTU5XHQgICAgICAgICAgICAgICAgICAgICAgICAuYWRkR2FwKDU2LCA1NiwgNTYpXG4gICAxNjBcdCAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQodHh0UGhvbmUsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFLCAyMTAsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFKSlcbiAgIDE2MVx0ICAgICAgICAgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVNlcXVlbnRpYWxHcm91cCgpXG4gICAxNjJcdCAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRHYXAoNjEsIDYxLCA2MSlcbiAgIDE2M1x0ICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChsYk5ld1Bhc3N3b3JkKVxuICAgMTY0XHQgICAgICAgICAgICAgICAgICAgICAgICAuYWRkR2FwKDU3LCA1NywgNTcpXG4gICAxNjVcdCAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlUGFyYWxsZWxHcm91cChqYXZheC5zd2luZy5Hcm91cExheW91dC5BbGlnbm1lbnQuTEVBRElORylcbiAgIDE2Nlx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQodHh0UGFzc3dvcmQsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFLCAyMTAsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFKVxuICAgMTY3XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVTZXF1ZW50aWFsR3JvdXAoKVxuICAgMTY4XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRHYXAoMTAyLCAxMDIsIDEwMilcbiAgIDE2OVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGJ0bkNoZWNrKSkpKVxuICAgMTcwXHQgICAgICAgICAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlUGFyYWxsZWxHcm91cChqYXZheC5zd2luZy5Hcm91cExheW91dC5BbGlnbm1lbnQuVFJBSUxJTkcsIGZhbHNlKVxuICAgMTcxXHQgICAgICAgICAgICAgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVNlcXVlbnRpYWxHcm91cCgpXG4gICAxNzJcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYWRkR2FwKDYwLCA2MCwgNjApXG4gICAxNzNcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGJ0bkV4aXQpXG4gICAxNzRcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYWRkUHJlZmVycmVkR2FwKGphdmF4LnN3aW5nLkxheW91dFN0eWxlLkNvbXBvbmVudFBsYWNlbWVudC5SRUxBVEVELCBqYXZheC5zd2luZy5Hcm91cExheW91dC5ERUZBVUxUX1NJWkUsIFNob3J0Lk1BWF9WQUxVRSlcbiAgIDE3NVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQoYnRuQ2hhbmdlKSlcbiAgIDE3Nlx0ICAgICAgICAgICAgICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVTZXF1ZW50aWFsR3JvdXAoKVxuICAgMTc3XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFkZEdhcCg2MSwgNjEsIDYxKVxuICAgMTc4XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChsYkNvbmZpcm1QYXNzd29yZClcbiAgIDE3OVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRHYXAoMTgsIDE4LCAxOClcbiAgIDE4MFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQodHh0Q29uZmlybVBhc3N3b3JkLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSwgMjExLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSkpKSlcbiAgIDE4MVx0ICAgICAgICAgICAgICAgIC5hZGRHYXAoNjksIDY5LCA2OSkpXG4gICAxODJcdCAgICAgICAgKTtcbiAgIDE4M1x0ICAgICAgICBsYXlvdXQuc2V0VmVydGljYWxHcm91cChcbiAgIDE4NFx0ICAgICAgICAgICAgbGF5b3V0LmNyZWF0ZVBhcmFsbGVsR3JvdXAoamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuQWxpZ25tZW50LkxFQURJTkcpXG4gICAxODVcdCAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlU2VxdWVudGlhbEdyb3VwKClcbiAgIDE4Nlx0ICAgICAgICAgICAgICAgIC5hZGRHYXAoNDAsIDQwLCA0MClcbiAgIDE4N1x0ICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQoakxhYmVsMSlcbiAgIDE4OFx0ICAgICAgICAgICAgICAgIC5hZGRHYXAoMTQsIDE0LCAxNClcbiAgIDE4OVx0ICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQoalNlcGFyYXRvcjEsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFLCAxMCwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUpXG4gICAxOTBcdCAgICAgICAgICAgICAgICAuYWRkR2FwKDEyLCAxMiwgMTIpXG4gICAxOTFcdCAgICAgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVBhcmFsbGVsR3JvdXAoamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuQWxpZ25tZW50LkxFQURJTkcpXG4gICAxOTJcdCAgICAgICAgICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVTZXF1ZW50aWFsR3JvdXAoKVxuICAgMTkzXHQgICAgICAgICAgICAgICAgICAgICAgICAuYWRkR2FwKDMsIDMsIDMpXG4gICAxOTRcdCAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQoakxhYmVsMikpXG4gICAxOTVcdCAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudCh0eHRQaG9uZSwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LkRFRkFVTFRfU0laRSwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUpKVxuICAgMTk2XHQgICAgICAgICAgICAgICAgLmFkZEdhcCgxOCwgMTgsIDE4KVxuICAgMTk3XHQgICAgICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVQYXJhbGxlbEdyb3VwKGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LkFsaWdubWVudC5MRUFESU5HKVxuICAgMTk4XHQgICAgICAgICAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlU2VxdWVudGlhbEdyb3VwKClcbiAgIDE5OVx0ICAgICAgICAgICAgICAgICAgICAgICAgLmFkZEdhcCgzLCAzLCAzKVxuICAgMjAwXHQgICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGxiTmV3UGFzc3dvcmQpKVxuICAgMjAxXHQgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQodHh0UGFzc3dvcmQsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5ERUZBVUxUX1NJWkUsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFKVxuICAgMjAyXHQgICAgICAgICAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlU2VxdWVudGlhbEdyb3VwKClcbiAgIDIwM1x0ICAgICAgICAgICAgICAgICAgICAgICAgLmFkZEdhcCgyLCAyLCAyKVxuICAgMjA0XHQgICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGJ0bkNoZWNrLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSwgMzAsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFKSkpXG4gICAyMDVcdCAgICAgICAgICAgICAgICAuYWRkR2FwKDgsIDgsIDgpXG4gICAyMDZcdCAgICAgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVBhcmFsbGVsR3JvdXAoamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuQWxpZ25tZW50LkxFQURJTkcpXG4gICAyMDdcdCAgICAgICAgICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVTZXF1ZW50aWFsR3JvdXAoKVxuICAgMjA4XHQgICAgICAgICAgICAgICAgICAgICAgICAuYWRkR2FwKDMsIDMsIDMpXG4gICAyMDlcdCAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQobGJDb25maXJtUGFzc3dvcmQpKVxuICAgMjEwXHQgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQodHh0Q29uZmlybVBhc3N3b3JkLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuREVGQVVMVF9TSVpFLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSkpXG4gICAyMTFcdCAgICAgICAgICAgICAgICAuYWRkR2FwKDMwLCAzMCwgMzApXG4gICAyMTJcdCAgICAgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVBhcmFsbGVsR3JvdXAoamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuQWxpZ25tZW50LkJBU0VMSU5FKVxuICAgMjEzXHQgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQoYnRuRXhpdCwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUsIDMwLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSlcbiAgIDIxNFx0ICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGJ0bkNoYW5nZSwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUsIDMwLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSkpXG4gICAyMTVcdCAgICAgICAgICAgICAgICAuYWRkQ29udGFpbmVyR2FwKDQwLCBTaG9ydC5NQVhfVkFMVUUpKVxuICAgMjE2XHQgICAgICAgICk7XG4gICAyMTdcdFxuICAgMjE4XHQgICAgICAgIHBhY2soKTtcbiAgIDIxOVx0ICAgIH0vLyA8L2VkaXRvci1mb2xkPi8vR0VOLUVORDppbml0Q29tcG9uZW50c1xuICAgMjIwXHRcbiAgIDIyMVx0ICAgIHByaXZhdGUgdm9pZCBidG5FeGl0QWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkV4aXRBY3Rpb25QZXJmb3JtZWRcbiAgIDIyMlx0ICAgICAgICAvLyBUT0RPIGFkZCB5b3VyIGhhbmRsaW5nIGNvZGUgaGVyZTpcbiAgIDIyM1x0ICAgICAgICBpbnQgcmVzdWx0ID0gSk9wdGlvblBhbmUuc2hvd0NvbmZpcm1EaWFsb2codGhpcywgXCJC4bqhbiBjw7MgY2jhuq9jIGNo4bqvbiBtdeG7kW4gdGhvw6F0IGtow7RuZz9cIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5ZRVNfTk9fT1BUSU9OLCBKT3B0aW9uUGFuZS5RVUVTVElPTl9NRVNTQUdFKTtcbiAgIDIyNFx0XG4gICAyMjVcdCAgICAgICAgaWYgKHJlc3VsdCA9PSBKT3B0aW9uUGFuZS5ZRVNfT1BUSU9OKSB7XG4gICAyMjZcdCAgICAgICAgICAgIHRoaXMuZGlzcG9zZSgpO1xuICAgMjI3XHQgICAgICAgIH1cbiAgIDIyOFx0ICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0bkV4aXRBY3Rpb25QZXJmb3JtZWRcbiAgIDIyOVx0XG4gICAyMzBcdCAgICBwcml2YXRlIHZvaWQgYnRuQ2hlY2tBY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuQ2hlY2tBY3Rpb25QZXJmb3JtZWRcbiAgIDIzMVx0ICAgICAgICAvLyBUT0RPIGFkZCB5b3VyIGhhbmRsaW5nIGNvZGUgaGVyZTpcbiAgIDIzMlx0ICAgICAgICBpZih2YWxpZGF0ZVBob25lKCkpIHtcbiAgIDIzM1x0ICAgICAgICAgICAgU3RyaW5nIHBob25lID0gdHh0UGhvbmUuZ2V0VGV4dCgpO1xuICAgMjM0XHQgICAgICAgICAgICBjdXJyZW50U3Vic2NyaWJlciA9IFN1YnNjcmliZXJEQU8uZ2V0QnlQaG9uZShwaG9uZSk7XG4gICAyMzVcdFxuICAgMjM2XHQgICAgICAgICAgICBpZiAoY3VycmVudFN1YnNjcmliZXIgIT0gbnVsbCkge1xuICAgMjM3XHQgICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXCJUw6xtIHRo4bqleSB0w6BpIGtob+G6o24gduG7m2kgc+G7kSDEkWnhu4duIHRob+G6oWkgbsOgeSFcIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5JTkZPUk1BVElPTl9NRVNTQUdFKTtcbiAgIDIzOFx0XG4gICAyMzlcdCAgICAgICAgICAgICAgICBidG5FeGl0LnNldFZpc2libGUodHJ1ZSk7XG4gICAyNDBcdCAgICAgICAgICAgICAgICBidG5DaGFuZ2Uuc2V0VmlzaWJsZSh0cnVlKTtcbiAgIDI0MVx0ICAgICAgICAgICAgICAgIGxiTmV3UGFzc3dvcmQuc2V0VmlzaWJsZSh0cnVlKTtcbiAgIDI0Mlx0ICAgICAgICAgICAgICAgIGxiQ29uZmlybVBhc3N3b3JkLnNldFZpc2libGUodHJ1ZSk7XG4gICAyNDNcdCAgICAgICAgICAgICAgICB0eHRQYXNzd29yZC5zZXRWaXNpYmxlKHRydWUpO1xuICAgMjQ0XHQgICAgICAgICAgICAgICAgdHh0Q29uZmlybVBhc3N3b3JkLnNldFZpc2libGUodHJ1ZSk7XG4gICAyNDVcdFxuICAgMjQ2XHQgICAgICAgICAgICAgICAgdHh0UGhvbmUuc2V0RWRpdGFibGUoZmFsc2UpO1xuICAgMjQ3XHQgICAgICAgICAgICAgICAgYnRuQ2hlY2suc2V0RW5hYmxlZChmYWxzZSk7XG4gICAyNDhcdCAgICAgICAgICAgIH0gZWxzZSB7XG4gICAyNDlcdCAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcIktow7RuZyB0w6xtIHRo4bqleSB0w6BpIGtob+G6o24gduG7m2kgc+G7kSDEkWnhu4duIHRob+G6oWkgbsOgeSFcIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgIDI1MFx0ICAgICAgICAgICAgfVxuICAgMjUxXHQgICAgICAgIH1cbiAgIDI1Mlx0ICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0bkNoZWNrQWN0aW9uUGVyZm9ybWVkXG4gICAyNTNcdFxuICAgMjU0XHQgICAgcHJpdmF0ZSB2b2lkIGJ0bkNoYW5nZUFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5DaGFuZ2VBY3Rpb25QZXJmb3JtZWRcbiAgIDI1NVx0ICAgICAgICAvLyBUT0RPIGFkZCB5b3VyIGhhbmRsaW5nIGNvZGUgaGVyZTpcbiAgIDI1Nlx0ICAgICAgICBpZih2YWxpZGF0ZUZpZWxkcygpICYmIGN1cnJlbnRTdWJzY3JpYmVyICE9IG51bGwpe1xuICAgMjU3XHQgICAgICAgICAgICBTdHJpbmcgbmV3UGFzc3dvcmQgPSB0eHRQYXNzd29yZC5nZXRUZXh0KCk7XG4gICAyNThcdFxuICAgMjU5XHQgICAgICAgICAgICBib29sZWFuIGlzU3VjY2VzcyA9IFN1YnNjcmliZXJEQU8udXBkYXRlUGFzc3dvcmQoY3VycmVudFN1YnNjcmliZXIuZ2V0VXNlcl9pZCgpLCBuZXdQYXNzd29yZCk7XG4gICAyNjBcdFxuICAgMjYxXHQgICAgICAgICAgICBpZihpc1N1Y2Nlc3MpIHtcbiAgIDI2Mlx0ICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKHRoaXMsIFwixJDhu5VpIG3huq10IGto4bqpdSB0aMOgbmggY8O0bmchIFZ1aSBsw7JuZyDEkcSDbmcgbmjhuq1wIGzhuqFpIVwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLklORk9STUFUSU9OX01FU1NBR0UpO1xuICAgMjYzXHQgICAgICAgICAgICAgICAgdGhpcy5kaXNwb3NlKCk7XG4gICAyNjRcdCAgICAgICAgICAgIH0gZWxzZSB7XG4gICAyNjVcdCAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyh0aGlzLCBcIsSQ4buVaSBt4bqtdCBraOG6qXUgdGjhuqV0IGLhuqFpISBWdWkgbMOybmcgdGjhu60gbOG6oWkgc2F1IVwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgMjY2XHQgICAgICAgICAgICB9XG4gICAyNjdcdCAgICAgICAgfVxuICAgMjY4XHQgICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuQ2hhbmdlQWN0aW9uUGVyZm9ybWVkXG4gICAyNjlcdFxuICAgMjcwXHRcbiAgIDI3MVx0XG4gICAyNzJcdCAgICAvLyBWYXJpYWJsZXMgZGVjbGFyYXRpb24gLSBkbyBub3QgbW9kaWZ5Ly9HRU4tQkVHSU46dmFyaWFibGVzXG4gICAyNzNcdCAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpCdXR0b24gYnRuQ2hhbmdlO1xuICAgMjc0XHQgICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KQnV0dG9uIGJ0bkNoZWNrO1xuICAgMjc1XHQgICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KQnV0dG9uIGJ0bkV4aXQ7XG4gICAyNzZcdCAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpMYWJlbCBqTGFiZWwxO1xuICAgMjc3XHQgICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KTGFiZWwgakxhYmVsMjtcbiAgIDI3OFx0ICAgIHByaXZhdGUgamF2YXguc3dpbmcuSlNlcGFyYXRvciBqU2VwYXJhdG9yMTtcbiAgIDI3OVx0ICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkxhYmVsIGxiQ29uZmlybVBhc3N3b3JkO1xuICAgMjgwXHQgICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KTGFiZWwgbGJOZXdQYXNzd29yZDtcbiAgIDI4MVx0ICAgIHByaXZhdGUgamF2YXguc3dpbmcuSlBhc3N3b3JkRmllbGQgdHh0Q29uZmlybVBhc3N3b3JkO1xuICAgMjgyXHQgICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KUGFzc3dvcmRGaWVsZCB0eHRQYXNzd29yZDtcbiAgIDI4M1x0ICAgIHByaXZhdGUgamF2YXguc3dpbmcuSlRleHRGaWVsZCB0eHRQaG9uZTtcbiAgIDI4NFx0ICAgIC8vIEVuZCBvZiB2YXJpYWJsZXMgZGVjbGFyYXRpb24vL0dFTi1FTkQ6dmFyaWFibGVzXG4gICAyODVcdH1cbiAgIDI4Nlx0XG5Ub3RhbCBsaW5lcyBpbiBmaWxlOiAyODZcbiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfMDE1amdGM0RCbm9lYzQzV1dCUkE4amtmIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiRTovSG9jVGFwLzAyX0pBVkEvMDNfUHJvamVjdC9JbnRlcm5ldCBNYW5nZW1lbnQgU3lzdGVtIiwiZm9sZGVyUm9vdCI6IkU6L0hvY1RhcC8wMl9KQVZBLzAzX1Byb2plY3QvSW50ZXJuZXQgTWFuZ2VtZW50IFN5c3RlbSJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInRpbWVzdGFtcCI6IjIwMjUtMDUtMTNUMTI6NTk6MDIuNjYwWiIsInJlc3BvbnNlX3RleHQiOiJOb3cgbGV0IG1lIGNoZWNrIHRoZSBVc2VyREFPIGNsYXNzIHRvIHVuZGVyc3RhbmQgaG93IHVzZXIgaW5mb3JtYXRpb24gaXMgcmV0cmlldmVkOlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6ImY0MWZhZmU5LTJiMTUtNDQ3MC1hMWVmLTc5NTEzYTc3NTg0OCIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfMDFVcWFzZ2tQWTRXRWNibWdTVHpVOFlMIiwidG9vbF9uYW1lIjoiY29kZWJhc2UtcmV0cmlldmFsIiwiaW5wdXRfanNvbiI6IntcImluZm9ybWF0aW9uX3JlcXVlc3RcIjogXCJGaW5kIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgVXNlckRBTy5sb2dpbiBtZXRob2QgdGhhdCBpcyB1c2VkIGluIHRoZSBMb2dpbi5qYXZhIGZpbGUuIEFsc28gbG9vayBmb3IgYW55IE1haW5GcmFtZSBjbGFzcyB0aGF0IG1pZ2h0IGJlIHVzZWQgYWZ0ZXIgc3VjY2Vzc2Z1bCBsb2dpbi5cIn0iLCJtY3Bfc2VydmVyX25hbWUiOiIiLCJtY3BfdG9vbF9uYW1lIjoiIn19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiJMZXQgbWUgY2hlY2sgdGhlIGltcGxlbWVudGF0aW9uIG9mIHRoZSBVc2VyREFPLmxvZ2luIG1ldGhvZDpcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IlRoZSBmb2xsb3dpbmcgY29kZSBzZWN0aW9ucyB3ZXJlIHJldHJpZXZlZDpcblBhdGg6IHNyYy9tYWluL2phdmEvY29tL3N0b3JlL2FwcC9wZXRzdG9yZS9EQU8vVXNlckRBTy5qYXZhXG5wYWNrYWdlIGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuREFPO1xuXG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5Nb2RlbHMuRW50aXRpZXMuVXNlcjtcbmltcG9ydCBvcmcubWluZHJvdC5qYmNyeXB0LkJDcnlwdDtcblxuaW1wb3J0IGphdmEuc3FsLio7XG5pbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDtcbmltcG9ydCBqYXZhLnV0aWwuQmFzZTY0O1xuXG5wdWJsaWMgY2xhc3MgVXNlckRBTyBpbXBsZW1lbnRzIEJhc2VEQU88VXNlciwgSW50ZWdlcj4ge1xuICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgaW50IGlzRHVwbGljYXRlID0gLTE7XG5cbiAgICBwdWJsaWMgc3RhdGljIFVzZXJEQU8gZ2V0SW5zdGFuY2UoKSB7XG4gICAgICAgIHJldHVybiBuZXcgVXNlckRBTygpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgU3RyaW5nIGVuY29kZShTdHJpbmcgcGFzc3dvcmQpIHtcbi8vICAgICAgICByZXR1cm4gQmFzZTY0LmdldEVuY29kZXIoKS5lbmNvZGVUb1N0cmluZyhwYXNzd29yZC5nZXRCeXRlcygpKTtcbiAgICAgICAgcmV0dXJuIEJDcnlwdC5oYXNocHcocGFzc3dvcmQsIEJDcnlwdC5nZW5zYWx0KCkpO1xuICAgIH1cbi4uLlxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25uID0gRGF0YWJhc2VVdGlsLmdldENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgIFN0cmluZyBzcWwgPSBcIklOU0VSVCBJTlRPIFVzZXJzICh1c2VybmFtZSwgcGFzc3dvcmQsIHJvbGUsIGltYWdlX3VybCwgaXNBY3RpdmUpIFZBTFVFUyAoPywgPywgPywgPywgPylcIjtcbiAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsLCBTdGF0ZW1lbnQuUkVUVVJOX0dFTkVSQVRFRF9LRVlTKTtcblxuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMSwgZW50aXR5LmdldFVzZXJuYW1lKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMiwgZW5jb2RlKGVudGl0eS5nZXRQYXNzd29yZCgpKSk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygzLCBlbnRpdHkuZ2V0Um9sZSgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDQsIGVudGl0eS5nZXRJbWFnZVVybCgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0Qm9vbGVhbig1LCBlbnRpdHkuaXNBY3RpdmUoKSk7XG5cbiAgICAgICAgICAgIGludCBhZmZlY3RlZFJvd3MgPSBzdG10LmV4ZWN1dGVVcGRhdGUoKTtcbiAgICAgICAgICAgIGlmIChhZmZlY3RlZFJvd3MgPT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0cnkgKFJlc3VsdFNldCBnZW5lcmF0ZWRLZXlzID0gc3RtdC5nZXRHZW5lcmF0ZWRLZXlzKCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoZ2VuZXJhdGVkS2V5cy5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdlbmVyYXRlZEtleXMuZ2V0SW50KDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgRGF0YWJhc2VVdGlsLmNsb3NlUmVzb3VyY2VzKHJzLCBzdG10LCBjb25uKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBpbnQgdXBkYXRlKFVzZXIgZW50aXR5KSB7XG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25uID0gRGF0YWJhc2VVdGlsLmdldENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgIFN0cmluZyBzcWwgPSBcIlVQREFURSBVc2VycyBTRVQgdXNlcm5hbWUgPSA/LCBwYXNzd29yZCA9ID8sIHJvbGUgPSA/LCBpbWFnZV91cmwgPSA/LCBpc0FjdGl2ZSA9ID8gV0hFUkUgdXNlcl9pZCA9ID9cIjtcbiAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsKTtcblxuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMSwgZW50aXR5LmdldFVzZXJuYW1lKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMiwgZW5jb2RlKGVudGl0eS5nZXRQYXNzd29yZCgpKSk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygzLCBlbnRpdHkuZ2V0Um9sZSgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDQsIGVudGl0eS5nZXRJbWFnZVVybCgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0Qm9vbGVhbig1LCBlbnRpdHkuaXNBY3RpdmUoKSk7XG4gICAgICAgICAgICBzdG10LnNldEludCg2LCBlbnRpdHkuZ2V0VXNlcklkKCkpO1xuXG4gICAgICAgICAgICByZXR1cm4gc3RtdC5leGVjdXRlVXBkYXRlKCk7XG4gICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBEYXRhYmFzZVV0aWwuY2xvc2VSZXNvdXJjZXMoc3RtdCwgY29ubik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgaW50IHVwZGF0ZShVc2VyIGVudGl0eSwgYm9vbGVhbiBpc1VzZXJuYW1lQ2hhbmdlZCkge1xuICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgICAgICBQcmVwYXJlZFN0YXRlbWVudCBzdG10ID0gbnVsbDtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29ubiA9IERhdGFiYXNlVXRpbC5nZXRDb25uZWN0aW9uKCk7XG4gICAgICAgICAgICBTdHJpbmcgc3FsID0gXCJVUERBVEUgVXNlcnMgU0VUIHVzZXJuYW1lID0gPywgcGFzc3dvcmQgPSA/LCByb2xlID0gPywgaW1hZ2VfdXJsID0gPywgaXNBY3RpdmUgPSA/IFdIRVJFIHVzZXJfaWQgPSA/XCI7XG4gICAgICAgICAgICBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHNxbCk7XG5cbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDEsIGVudGl0eS5nZXRVc2VybmFtZSgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDIsIGVuY29kZShlbnRpdHkuZ2V0UGFzc3dvcmQoKSkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMywgZW50aXR5LmdldFJvbGUoKSk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZyg0LCBlbnRpdHkuZ2V0SW1hZ2VVcmwoKSk7XG4gICAgICAgICAgICBzdG10LnNldEJvb2xlYW4oNSwgZW50aXR5LmlzQWN0aXZlKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRJbnQoNiwgZW50aXR5LmdldFVzZXJJZCgpKTtcblxuICAgICAgICAgICAgcmV0dXJuIHN0bXQuZXhlY3V0ZVVwZGF0ZSgpO1xuICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgRGF0YWJhc2VVdGlsLmNsb3NlUmVzb3VyY2VzKHN0bXQsIGNvbm4pO1xuICAgICAgICB9XG4gICAgfVxuLi4uXG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgQXJyYXlMaXN0PFVzZXI+IGZpbmRBbGwoKSB7XG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuICAgICAgICBSZXN1bHRTZXQgcnMgPSBudWxsO1xuICAgICAgICBBcnJheUxpc3Q8VXNlcj4gdXNlcnMgPSBuZXcgQXJyYXlMaXN0PD4oKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29ubiA9IERhdGFiYXNlVXRpbC5nZXRDb25uZWN0aW9uKCk7XG4gICAgICAgICAgICBTdHJpbmcgc3FsID0gXCJTRUxFQ1QgKiBGUk9NIFVzZXJzXCI7XG4gICAgICAgICAgICBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHNxbCk7XG4gICAgICAgICAgICBycyA9IHN0bXQuZXhlY3V0ZVF1ZXJ5KCk7XG5cbiAgICAgICAgICAgIHdoaWxlIChycy5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICBVc2VyIHVzZXIgPSBuZXcgVXNlcigpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0VXNlcklkKHJzLmdldEludChcInVzZXJfaWRcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0VXNlcm5hbWUocnMuZ2V0U3RyaW5nKFwidXNlcm5hbWVcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0UGFzc3dvcmQocnMuZ2V0U3RyaW5nKFwicGFzc3dvcmRcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0Um9sZShycy5nZXRTdHJpbmcoXCJyb2xlXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldEltYWdlVXJsKHJzLmdldFN0cmluZyhcImltYWdlX3VybFwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRBY3RpdmUocnMuZ2V0Qm9vbGVhbihcImlzQWN0aXZlXCIpKTtcbiAgICAgICAgICAgICAgICB1c2Vycy5hZGQodXNlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgRGF0YWJhc2VVdGlsLmNsb3NlUmVzb3VyY2VzKHJzLCBzdG10LCBjb25uKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdXNlcnM7XG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIFVzZXIgZmluZEJ5SWQoSW50ZWdlciBpZCkge1xuICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgICAgICBQcmVwYXJlZFN0YXRlbWVudCBzdG10ID0gbnVsbDtcbiAgICAgICAgUmVzdWx0U2V0IHJzID0gbnVsbDtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29ubiA9IERhdGFiYXNlVXRpbC5nZXRDb25uZWN0aW9uKCk7XG4gICAgICAgICAgICBTdHJpbmcgc3FsID0gXCJTRUxFQ1QgKiBGUk9NIFVzZXJzIFdIRVJFIHVzZXJfaWQgPSA/XCI7XG4gICAgICAgICAgICBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHNxbCk7XG4gICAgICAgICAgICBzdG10LnNldEludCgxLCBpZCk7XG4gICAgICAgICAgICBycyA9IHN0bXQuZXhlY3V0ZVF1ZXJ5KCk7XG5cbiAgICAgICAgICAgIGlmIChycy5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICBVc2VyIHVzZXIgPSBuZXcgVXNlcigpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0VXNlcklkKHJzLmdldEludChcInVzZXJfaWRcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0VXNlcm5hbWUocnMuZ2V0U3RyaW5nKFwidXNlcm5hbWVcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0UGFzc3dvcmQocnMuZ2V0U3RyaW5nKFwicGFzc3dvcmRcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0Um9sZShycy5nZXRTdHJpbmcoXCJyb2xlXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldEltYWdlVXJsKHJzLmdldFN0cmluZyhcImltYWdlX3VybFwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRBY3RpdmUocnMuZ2V0Qm9vbGVhbihcImlzQWN0aXZlXCIpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdXNlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBEYXRhYmFzZVV0aWwuY2xvc2VSZXNvdXJjZXMocnMsIHN0bXQsIGNvbm4pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbi4uLlxuXG4gICAgcHVibGljIFVzZXIgZmluZEJ5VXNlcm5hbWUoU3RyaW5nIHVzZXJuYW1lKSB7XG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuICAgICAgICBSZXN1bHRTZXQgcnMgPSBudWxsO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25uID0gRGF0YWJhc2VVdGlsLmdldENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgIFN0cmluZyBzcWwgPSBcIlNFTEVDVCAqIEZST00gVXNlcnMgV0hFUkUgdXNlcm5hbWUgPSA/XCI7XG4gICAgICAgICAgICBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHNxbCk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygxLCB1c2VybmFtZSk7XG4gICAgICAgICAgICBycyA9IHN0bXQuZXhlY3V0ZVF1ZXJ5KCk7XG5cbiAgICAgICAgICAgIGlmIChycy5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICBVc2VyIHVzZXIgPSBuZXcgVXNlcigpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0VXNlcklkKHJzLmdldEludChcInVzZXJfaWRcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0VXNlcm5hbWUocnMuZ2V0U3RyaW5nKFwidXNlcm5hbWVcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0UGFzc3dvcmQocnMuZ2V0U3RyaW5nKFwicGFzc3dvcmRcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0Um9sZShycy5nZXRTdHJpbmcoXCJyb2xlXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldEltYWdlVXJsKHJzLmdldFN0cmluZyhcImltYWdlX3VybFwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRBY3RpdmUocnMuZ2V0Qm9vbGVhbihcImlzQWN0aXZlXCIpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdXNlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBEYXRhYmFzZVV0aWwuY2xvc2VSZXNvdXJjZXMocnMsIHN0bXQsIGNvbm4pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHB1YmxpYyBVc2VyIGZpbmRCeUVtYWlsKFN0cmluZyBlbWFpbCkge1xuICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgICAgICBQcmVwYXJlZFN0YXRlbWVudCBzdG10ID0gbnVsbDtcbiAgICAgICAgUmVzdWx0U2V0IHJzID0gbnVsbDtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gS2nhu4NtIHRyYSBlbWFpbCBjw7MgdOG7k24gdOG6oWkgdHJvbmcgYuG6o25nIFN0YWZmcyBraMO0bmdcbiAgICAgICAgICAgIGNvbm4gPSBEYXRhYmFzZVV0aWwuZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgICAgICAgU3RyaW5nIGNoZWNrU3FsID0gXCJTRUxFQ1QgKiBGUk9NIFN0YWZmcyBXSEVSRSBlbWFpbCA9ID9cIjtcbiAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoY2hlY2tTcWwpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMSwgZW1haWwpO1xuICAgICAgICAgICAgcnMgPSBzdG10LmV4ZWN1dGVRdWVyeSgpO1xuXG4gICAgICAgICAgICAvLyBO4bq/dSBlbWFpbCB04buTbiB04bqhaSwgbOG6pXkgdGjDtG5nIHRpbiB1c2VyXG4gICAgICAgICAgICBTdHJpbmcgc3FsID0gXCJTRUxFQ1QgdS4qIEZST00gVXNlcnMgdSBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICBcIkpPSU4gU3RhZmZzIHMgT04gdS51c2VyX2lkID0gcy51c2VyX2lkIFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiV0hFUkUgcy5lbWFpbCA9ID9cIjtcbiAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDEsIGVtYWlsKTtcblxuICAgICAgICAgICAgcnMgPSBzdG10LmV4ZWN1dGVRdWVyeSgpO1xuLi4uXG5cbiAgICBwdWJsaWMgYm9vbGVhbiBjaGVja0R1cGxpY2F0ZShTdHJpbmcgdXNlcm5hbWUsIGludCBleGNsdWRlVXNlcklkKSB7XG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuICAgICAgICBSZXN1bHRTZXQgcnMgPSBudWxsO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29ubiA9IERhdGFiYXNlVXRpbC5nZXRDb25uZWN0aW9uKCk7XG4gICAgICAgICAgICBTdHJpbmcgc3FsID0gXCJTRUxFQ1QgQ09VTlQoKikgRlJPTSBVc2VycyBXSEVSRSBMT1dFUih1c2VybmFtZSkgPSBMT1dFUig/KVwiO1xuICAgICAgICAgICAgaWYgKGV4Y2x1ZGVVc2VySWQgPj0gMCkge1xuICAgICAgICAgICAgICAgIHNxbCArPSBcIiBBTkQgdXNlcl9pZCA8PiA/XCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHNxbCk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygxLCB1c2VybmFtZSk7XG4gICAgICAgICAgICBpZiAoZXhjbHVkZVVzZXJJZCA+PSAwKSB7XG4gICAgICAgICAgICAgICAgc3RtdC5zZXRJbnQoMiwgZXhjbHVkZVVzZXJJZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBycyA9IHN0bXQuZXhlY3V0ZVF1ZXJ5KCk7XG4gICAgICAgICAgICBpZiAocnMubmV4dCgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJzLmdldEludCgxKSA+IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgRGF0YWJhc2VVdGlsLmNsb3NlUmVzb3VyY2VzKHJzLCBzdG10LCBjb25uKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuLi4uXG5QYXRoOiBzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9Mb2dpbi5qYXZhXG4vKlxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9MaWNlbnNlcy9saWNlbnNlLWRlZmF1bHQudHh0IHRvIGNoYW5nZSB0aGlzIGxpY2Vuc2VcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvR1VJRm9ybXMvSkZyYW1lLmphdmEgdG8gZWRpdCB0aGlzIHRlbXBsYXRlXG4gKi9cbnBhY2thZ2UgaW50ZXJuZXQubWFuZ2VtZW50LnN5c3RlbTtcblxuaW1wb3J0IERBTy5Vc2VyREFPO1xuaW1wb3J0IE1vZGVsLlVzZXI7XG5pbXBvcnQgamF2YXguc3dpbmcuSk9wdGlvblBhbmU7XG5cbi8qKlxuICpcbiAqIEBhdXRob3IgTmdvYyBUaGFvXG4gKi9cbnB1YmxpYyBjbGFzcyBMb2dpbiBleHRlbmRzIGphdmF4LnN3aW5nLkpGcmFtZSB7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIG5ldyBmb3JtIExvZ2luXG4gICAgICovXG4gICAgcHVibGljIExvZ2luKCkge1xuICAgICAgICBpbml0Q29tcG9uZW50cygpO1xuICAgICAgICBzZXRUaXRsZShcIsSQxINuZyBrw71cIik7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgY2xlYXIoKXtcbiAgICAgICAgdHh0VXNlck5hbWUuc2V0VGV4dChcIlwiKTtcbiAgICAgICAgdHh0UGFzc3dvcmQuc2V0VGV4dChcIlwiKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYm9vbGVhbiB2YWxpZGF0ZUZpZWxkcygpe1xuICAgICAgICBTdHJpbmcgdXNlck5hbWUgPSB0eHRVc2VyTmFtZS5nZXRUZXh0KCk7XG4gICAgICAgIFN0cmluZyBwYXNzd29yZCA9IHR4dFBhc3N3b3JkLmdldFRleHQoKTtcblxuICAgICAgICBpZih1c2VyTmFtZS5pc0VtcHR5KCkgfHwgcGFzc3dvcmQuaXNFbXB0eSgpKXtcbiAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwiVnVpIGzDsm5nIGtow7RuZyBi4buPIHRy4buRbmchXCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuLi4uXG5cbiAgICAgICAgakxhYmVsMSA9IG5ldyBqYXZheC5zd2luZy5KTGFiZWwoKTtcbiAgICAgICAgakxhYmVsMiA9IG5ldyBqYXZheC5zd2luZy5KTGFiZWwoKTtcbiAgICAgICAgakxhYmVsMyA9IG5ldyBqYXZheC5zd2luZy5KTGFiZWwoKTtcbiAgICAgICAgakxhYmVsNCA9IG5ldyBqYXZheC5zd2luZy5KTGFiZWwoKTtcbiAgICAgICAgdHh0VXNlck5hbWUgPSBuZXcgamF2YXguc3dpbmcuSlRleHRGaWVsZCgpO1xuICAgICAgICB0eHRQYXNzd29yZCA9IG5ldyBqYXZheC5zd2luZy5KUGFzc3dvcmRGaWVsZCgpO1xuICAgICAgICBqU2VwYXJhdG9yMSA9IG5ldyBqYXZheC5zd2luZy5KU2VwYXJhdG9yKCk7XG4gICAgICAgIGpTZXBhcmF0b3IyID0gbmV3IGphdmF4LnN3aW5nLkpTZXBhcmF0b3IoKTtcbiAgICAgICAgYnRuTG9naW4gPSBuZXcgamF2YXguc3dpbmcuSkJ1dHRvbigpO1xuICAgICAgICBidG5Gb3Jnb3RQYXNzd29yZCA9IG5ldyBqYXZheC5zd2luZy5KQnV0dG9uKCk7XG4gICAgICAgIGJ0blNpZ251cCA9IG5ldyBqYXZheC5zd2luZy5KQnV0dG9uKCk7XG4gICAgICAgIGpMYWJlbDUgPSBuZXcgamF2YXguc3dpbmcuSkxhYmVsKCk7XG4gICAgICAgIGJ0bkV4aXQgPSBuZXcgamF2YXguc3dpbmcuSkJ1dHRvbigpO1xuXG4gICAgICAgIHNldERlZmF1bHRDbG9zZU9wZXJhdGlvbihqYXZheC5zd2luZy5XaW5kb3dDb25zdGFudHMuRVhJVF9PTl9DTE9TRSk7XG4uLi5cblxuICAgICAgICBidG5Mb2dpbi5zZXRGb250KG5ldyBqYXZhLmF3dC5Gb250KFwiQXJpYWxcIiwgMSwgMTYpKTsgLy8gTk9JMThOXG4gICAgICAgIGJ0bkxvZ2luLnNldEljb24obmV3IGphdmF4LnN3aW5nLkltYWdlSWNvbihnZXRDbGFzcygpLmdldFJlc291cmNlKFwiL0ltYWdlcy9lbnRlci5wbmdcIikpKTsgLy8gTk9JMThOXG4gICAgICAgIGJ0bkxvZ2luLnNldFRleHQoXCLEkMSDbmcgbmjhuq1wXCIpO1xuICAgICAgICBidG5Mb2dpbi5zZXRDdXJzb3IobmV3IGphdmEuYXd0LkN1cnNvcihqYXZhLmF3dC5DdXJzb3IuSEFORF9DVVJTT1IpKTtcbiAgICAgICAgYnRuTG9naW4uc2V0SG9yaXpvbnRhbEFsaWdubWVudChqYXZheC5zd2luZy5Td2luZ0NvbnN0YW50cy5MRUZUKTtcbiAgICAgICAgYnRuTG9naW4uYWRkQWN0aW9uTGlzdGVuZXIobmV3IGphdmEuYXd0LmV2ZW50LkFjdGlvbkxpc3RlbmVyKCkge1xuICAgICAgICAgICAgcHVibGljIHZvaWQgYWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkge1xuICAgICAgICAgICAgICAgIGJ0bkxvZ2luQWN0aW9uUGVyZm9ybWVkKGV2dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuLi4uXG5cbiAgICBwcml2YXRlIHZvaWQgYnRuTG9naW5BY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuTG9naW5BY3Rpb25QZXJmb3JtZWRcbiAgICAgICAgLy8gVE9ETyBhZGQgeW91ciBoYW5kbGluZyBjb2RlIGhlcmU6XG4gICAgICAgIGlmKHZhbGlkYXRlRmllbGRzKCkpIHtcbiAgICAgICAgICAgIHRyeXtcbiAgICAgICAgICAgICAgICBTdHJpbmcgdXNlcm5hbWUgPSB0eHRVc2VyTmFtZS5nZXRUZXh0KCkudHJpbSgpO1xuICAgICAgICAgICAgICAgIFN0cmluZyBwYXNzd29yZCA9IHR4dFBhc3N3b3JkLmdldFRleHQoKS50cmltKCk7XG5cbiAgICAgICAgICAgICAgICBVc2VyIHVzZXIgPSBudWxsO1xuICAgICAgICAgICAgICAgIGJvb2xlYW4gaXNTdWNjZXNzID0gVXNlckRBTy5sb2dpbih1c2VybmFtZSwgcGFzc3dvcmQpO1xuXG4gICAgICAgICAgICAgICAgaWYoaXNTdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKHRoaXMsIFwixJDEg25nIG5o4bqtcCB0aMOgbmggY8O0bmchXCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuSU5GT1JNQVRJT05fTUVTU0FHRSk7XG4vLyAgICAgICAgICAgICAgICAgICAgbmV3IE1haW5GcmFtZSgpLnNldFZpc2libGUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcG9zZSgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKHRoaXMsIFwiU2FpIHTDqm4gxJHEg25nIG5o4bqtcCBob+G6t2MgbeG6rXQga2jhuql1LlwiLCBcIkzhu5dpXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2goRXhjZXB0aW9uIGV4KSB7XG4gICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXCJM4buXaTogXCIgKyBleC5nZXRNZXNzYWdlKCksIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuXG4gICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuTG9naW5BY3Rpb25QZXJmb3JtZWRcblxuICAgIHByaXZhdGUgdm9pZCBidG5Gb3Jnb3RQYXNzd29yZEFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5Gb3Jnb3RQYXNzd29yZEFjdGlvblBlcmZvcm1lZFxuICAgICAgICAvLyBPcGVuIHRoZSBGb3Jnb3RQYXNzd29yZCBkaWFsb2dcbiAgICAgICAgRm9yZ290UGFzc3dvcmQgZm9yZ290UGFzc3dvcmREaWFsb2cgPSBuZXcgRm9yZ290UGFzc3dvcmQodGhpcywgdHJ1ZSk7XG4gICAgICAgIGZvcmdvdFBhc3N3b3JkRGlhbG9nLnNldFZpc2libGUodHJ1ZSk7XG4gICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuRm9yZ290UGFzc3dvcmRBY3Rpb25QZXJmb3JtZWRcblxuICAgIHByaXZhdGUgdm9pZCBidG5FeGl0QWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkV4aXRBY3Rpb25QZXJmb3JtZWRcbiAgICAgICAgLy8gVE9ETyBhZGQgeW91ciBoYW5kbGluZyBjb2RlIGhlcmU6XG4gICAgICAgIGludCByZXN1bHQgPSBKT3B0aW9uUGFuZS5zaG93Q29uZmlybURpYWxvZyhudWxsLCBcIkLhuqFuIGPDsyBjaOG6r2MgY2jhuq9uIG114buRbiB0aG/DoXQga2jDtG5nP1wiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLllFU19OT19PUFRJT04sIEpPcHRpb25QYW5lLlFVRVNUSU9OX01FU1NBR0UpO1xuXG4gICAgICAgIGlmIChyZXN1bHQgPT0gSk9wdGlvblBhbmUuWUVTX09QVElPTikge1xuICAgICAgICAgICAgU3lzdGVtLmV4aXQoMCk7XG4gICAgICAgIH1cbiAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5FeGl0QWN0aW9uUGVyZm9ybWVkXG5cbiAgICBwcml2YXRlIHZvaWQgYnRuU2lnbnVwQWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0blNpZ251cEFjdGlvblBlcmZvcm1lZFxuICAgICAgICAvLyBUT0RPIGFkZCB5b3VyIGhhbmRsaW5nIGNvZGUgaGVyZTpcbiAgICAgICAgc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgICAgIG5ldyBTaWduVXAoKS5zZXRWaXNpYmxlKHRydWUpO1xuICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0blNpZ251cEFjdGlvblBlcmZvcm1lZFxuLi4uXG5cbiAgICAvLyBWYXJpYWJsZXMgZGVjbGFyYXRpb24gLSBkbyBub3QgbW9kaWZ5Ly9HRU4tQkVHSU46dmFyaWFibGVzXG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KQnV0dG9uIGJ0bkV4aXQ7XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KQnV0dG9uIGJ0bkZvcmdvdFBhc3N3b3JkO1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkJ1dHRvbiBidG5Mb2dpbjtcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpCdXR0b24gYnRuU2lnbnVwO1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkxhYmVsIGpMYWJlbDE7XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KTGFiZWwgakxhYmVsMjtcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpMYWJlbCBqTGFiZWwzO1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkxhYmVsIGpMYWJlbDQ7XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KTGFiZWwgakxhYmVsNTtcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpTZXBhcmF0b3IgalNlcGFyYXRvcjE7XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KU2VwYXJhdG9yIGpTZXBhcmF0b3IyO1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSlBhc3N3b3JkRmllbGQgdHh0UGFzc3dvcmQ7XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KVGV4dEZpZWxkIHR4dFVzZXJOYW1lO1xuICAgIC8vIEVuZCBvZiB2YXJpYWJsZXMgZGVjbGFyYXRpb24vL0dFTi1FTkQ6dmFyaWFibGVzXG59XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvY29tL3N0b3JlL2FwcC9wZXRzdG9yZS9Db250cm9sbGVycy9Mb2dpbkNvbnRyb2xsZXIuamF2YVxuLi4uXG5cbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLkRBTy5Vc2VyREFPO1xuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuREFPLlN0YWZmREFPO1xuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuTW9kZWxzLkVudGl0aWVzLlVzZXI7XG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5Nb2RlbHMuRW50aXRpZXMuU3RhZmY7XG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5TZXNzaW9ucy5TZXNzaW9uTWFuYWdlcjtcbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLlZpZXdzLkFkbWluRmFjdG9yeTtcbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLlZpZXdzLlZpZXdGYWN0b3J5O1xuaW1wb3J0IGRlLmplbnNkLmZ4LmdseXBocy5mb250YXdlc29tZS5Gb250QXdlc29tZUljb247XG5pbXBvcnQgZGUuamVuc2QuZnguZ2x5cGhzLmZvbnRhd2Vzb21lLkZvbnRBd2Vzb21lSWNvblZpZXc7XG5pbXBvcnQgamF2YWZ4LmZ4bWwuRlhNTDtcbmltcG9ydCBqYXZhZnguZnhtbC5Jbml0aWFsaXphYmxlO1xuaW1wb3J0IGphdmFmeC5zY2VuZS5jb250cm9sLio7XG5pbXBvcnQgamF2YWZ4LnNjZW5lLmlucHV0Lk1vdXNlRXZlbnQ7XG5pbXBvcnQgamF2YWZ4LnN0YWdlLlN0YWdlO1xuaW1wb3J0IGphdmFmeC5zY2VuZS5pbWFnZS5JbWFnZTtcbmltcG9ydCBqYXZhZnguc2NlbmUuaW1hZ2UuSW1hZ2VWaWV3O1xuaW1wb3J0IGphdmFmeC5zY2VuZS5wYWludC5JbWFnZVBhdHRlcm47XG5pbXBvcnQgamF2YS51dGlsLk9iamVjdHM7XG4uLi5cblBhdGg6IHNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL1Nlc3Npb24vVXNlclNlc3Npb24uamF2YVxuLypcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvTGljZW5zZXMvbGljZW5zZS1kZWZhdWx0LnR4dCB0byBjaGFuZ2UgdGhpcyBsaWNlbnNlXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ2xhc3MuamF2YSB0byBlZGl0IHRoaXMgdGVtcGxhdGVcbiAqL1xucGFja2FnZSBpbnRlcm5ldC5tYW5nZW1lbnQuc3lzdGVtLlNlc3Npb247XG5cbmltcG9ydCBNb2RlbC5Vc2VyO1xuXG4vKipcbiAqXG4gKiBAYXV0aG9yIE5nb2MgVGhhb1xuICovXG5wdWJsaWMgY2xhc3MgVXNlclNlc3Npb24ge1xuICAgIHB1YmxpYyBzdGF0aWMgVXNlciBjdXJyZW50VXNlcjtcblxuICAgIHB1YmxpYyBVc2VyU2Vzc2lvbigpIHtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIFVzZXIgZ2V0Q3VycmVudFVzZXIoKSB7XG4gICAgICAgIHJldHVybiBjdXJyZW50VXNlcjtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIHZvaWQgc2V0Q3VycmVudFVzZXIoVXNlciBjdXJyZW50VXNlcikge1xuICAgICAgICBVc2VyU2Vzc2lvbi5jdXJyZW50VXNlciA9IGN1cnJlbnRVc2VyO1xuICAgIH1cbiAgICBcbiAgICBcbn1cbi4uLlxuUGF0aDogc3JjL0RBTy9Vc2VyREFPLmphdmFcbi8qXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0xpY2Vuc2VzL2xpY2Vuc2UtZGVmYXVsdC50eHQgdG8gY2hhbmdlIHRoaXMgbGljZW5zZVxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NsYXNzLmphdmEgdG8gZWRpdCB0aGlzIHRlbXBsYXRlXG4gKi9cbnBhY2thZ2UgREFPO1xuXG5pbXBvcnQgTW9kZWwuVXNlcjtcbmltcG9ydCBqYXZhLnV0aWwuTGlzdDtcblxuLyoqXG4gKlxuICogQGF1dGhvciBOZ29jIFRoYW9cbiAqL1xucHVibGljIGNsYXNzIFVzZXJEQU97XG5cbiAgICBwdWJsaWMgc3RhdGljIHZvaWQgaW5zZXJ0KFVzZXIgb2JqKSB7XG4gICAgICAgIFxuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgdm9pZCB1cGRhdGUoVXNlciBvYmopIHtcbiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpOyAvLyBHZW5lcmF0ZWQgZnJvbSBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ29kZS9HZW5lcmF0ZWRNZXRob2RCb2R5XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyB2b2lkIGRlbGV0ZShpbnQgaWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpOyAvLyBHZW5lcmF0ZWQgZnJvbSBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ29kZS9HZW5lcmF0ZWRNZXRob2RCb2R5XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBVc2VyIGdldEJ5SWQoaW50IGlkKSB7XG4gICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbihcIk5vdCBzdXBwb3J0ZWQgeWV0LlwiKTsgLy8gR2VuZXJhdGVkIGZyb20gbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NvZGUvR2VuZXJhdGVkTWV0aG9kQm9keVxuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxVc2VyPiBnZXRBbGwoKSB7XG4gICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbihcIk5vdCBzdXBwb3J0ZWQgeWV0LlwiKTsgLy8gR2VuZXJhdGVkIGZyb20gbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NvZGUvR2VuZXJhdGVkTWV0aG9kQm9keVxuICAgIH1cbiAgICBcbn1cbi4uLlxuUGF0aDogc3JjL01vZGVsL1VzZXIuamF2YVxuLypcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvTGljZW5zZXMvbGljZW5zZS1kZWZhdWx0LnR4dCB0byBjaGFuZ2UgdGhpcyBsaWNlbnNlXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ2xhc3MuamF2YSB0byBlZGl0IHRoaXMgdGVtcGxhdGVcbiAqL1xucGFja2FnZSBNb2RlbDtcblxuaW1wb3J0IGphdmEudGltZS5Mb2NhbERhdGVUaW1lO1xuLyoqXG4gKlxuICogQGF1dGhvciBOZ29jIFRoYW9cbiAqL1xucHVibGljIGNsYXNzIFVzZXIge1xuICAgIHByaXZhdGUgaW50IHVzZXJfaWQ7XG4gICAgcHJpdmF0ZSBTdHJpbmcgdXNlcm5hbWU7XG4gICAgcHJpdmF0ZSBTdHJpbmcgcGFzc3dvcmQ7XG4gICAgcHJpdmF0ZSBTdHJpbmcgcm9sZTtcbiAgICBwcml2YXRlIExvY2FsRGF0ZVRpbWUgY3JlYXRlX2F0O1xuICAgIHByaXZhdGUgYm9vbGVhbiBpc0FjdGl2ZTtcblxuICAgIHB1YmxpYyBVc2VyKCkge1xuICAgIH1cblxuICAgIHB1YmxpYyBVc2VyKGludCB1c2VyX2lkLCBTdHJpbmcgdXNlcm5hbWUsIFN0cmluZyBwYXNzd29yZCwgU3RyaW5nIHJvbGUsIExvY2FsRGF0ZVRpbWUgY3JlYXRlX2F0LCBib29sZWFuIGlzQWN0aXZlKSB7XG4gICAgICAgIHRoaXMudXNlcl9pZCA9IHVzZXJfaWQ7XG4gICAgICAgIHRoaXMudXNlcm5hbWUgPSB1c2VybmFtZTtcbiAgICAgICAgdGhpcy5wYXNzd29yZCA9IHBhc3N3b3JkO1xuICAgICAgICB0aGlzLnJvbGUgPSByb2xlO1xuICAgICAgICB0aGlzLmNyZWF0ZV9hdCA9IGNyZWF0ZV9hdDtcbiAgICAgICAgdGhpcy5pc0FjdGl2ZSA9IGlzQWN0aXZlO1xuICAgIH1cblxuICAgIHB1YmxpYyBpbnQgZ2V0VXNlcl9pZCgpIHtcbiAgICAgICAgcmV0dXJuIHVzZXJfaWQ7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgc2V0VXNlcl9pZChpbnQgdXNlcl9pZCkge1xuICAgICAgICB0aGlzLnVzZXJfaWQgPSB1c2VyX2lkO1xuICAgIH1cblxuICAgIHB1YmxpYyBTdHJpbmcgZ2V0VXNlcm5hbWUoKSB7XG4gICAgICAgIHJldHVybiB1c2VybmFtZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXRVc2VybmFtZShTdHJpbmcgdXNlcm5hbWUpIHtcbiAgICAgICAgdGhpcy51c2VybmFtZSA9IHVzZXJuYW1lO1xuICAgIH1cblxuICAgIHB1YmxpYyBTdHJpbmcgZ2V0UGFzc3dvcmQoKSB7XG4gICAgICAgIHJldHVybiBwYXNzd29yZDtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXRQYXNzd29yZChTdHJpbmcgcGFzc3dvcmQpIHtcbiAgICAgICAgdGhpcy5wYXNzd29yZCA9IHBhc3N3b3JkO1xuICAgIH1cblxuICAgIHB1YmxpYyBTdHJpbmcgZ2V0Um9sZSgpIHtcbiAgICAgICAgcmV0dXJuIHJvbGU7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgc2V0Um9sZShTdHJpbmcgcm9sZSkge1xuICAgICAgICB0aGlzLnJvbGUgPSByb2xlO1xuICAgIH1cblxuICAgIHB1YmxpYyBMb2NhbERhdGVUaW1lIGdldENyZWF0ZV9hdCgpIHtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZV9hdDtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXRDcmVhdGVfYXQoTG9jYWxEYXRlVGltZSBjcmVhdGVfYXQpIHtcbiAgICAgICAgdGhpcy5jcmVhdGVfYXQgPSBjcmVhdGVfYXQ7XG4gICAgfVxuXG4gICAgcHVibGljIGJvb2xlYW4gaXNJc0FjdGl2ZSgpIHtcbiAgICAgICAgcmV0dXJuIGlzQWN0aXZlO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHNldElzQWN0aXZlKGJvb2xlYW4gaXNBY3RpdmUpIHtcbiAgICAgICAgdGhpcy5pc0FjdGl2ZSA9IGlzQWN0aXZlO1xuICAgIH1cbiAgICBcbn1cbi4uLlxuUGF0aDogc3JjL01vZGVsL1N1YnNjcmliZXIuamF2YVxuLi4uXG5cbi8qKlxuICpcbiAqIEBhdXRob3IgTmdvYyBUaGFvXG4gKi9cbnB1YmxpYyBjbGFzcyBTdWJzY3JpYmVyIGV4dGVuZHMgVXNlciB7XG4gICAgcHJpdmF0ZSBpbnQgc3Vic2NyaWJlcl9pZDtcbiAgICBwcml2YXRlIFN0cmluZyBmdWxsTmFtZTtcbiAgICBwcml2YXRlIFN0cmluZyBhZGRyZXNzO1xuICAgIHByaXZhdGUgU3RyaW5nIHBob25lO1xuICAgIFxuICAgIHB1YmxpYyBTdWJzY3JpYmVyKCkge1xuICAgIH1cblxuICAgIHB1YmxpYyBTdWJzY3JpYmVyKGludCBzdWJzY3JpYmVyX2lkLCBTdHJpbmcgZnVsbE5hbWUsIFN0cmluZyBhZGRyZXNzLCBTdHJpbmcgcGhvbmUpIHtcbiAgICAgICAgdGhpcy5zdWJzY3JpYmVyX2lkID0gc3Vic2NyaWJlcl9pZDtcbiAgICAgICAgdGhpcy5mdWxsTmFtZSA9IGZ1bGxOYW1lO1xuICAgICAgICB0aGlzLmFkZHJlc3MgPSBhZGRyZXNzO1xuICAgICAgICB0aGlzLnBob25lID0gcGhvbmU7XG4gICAgfVxuXG4gICAgcHVibGljIFN1YnNjcmliZXIoaW50IHN1YnNjcmliZXJfaWQsIFN0cmluZyBmdWxsTmFtZSwgU3RyaW5nIGFkZHJlc3MsIFN0cmluZyBwaG9uZSwgaW50IHVzZXJfaWQsIFN0cmluZyB1c2VybmFtZSwgU3RyaW5nIHBhc3N3b3JkLCBTdHJpbmcgcm9sZSwgTG9jYWxEYXRlVGltZSBjcmVhdGVfYXQsIGJvb2xlYW4gaXNBY3RpdmUpIHtcbiAgICAgICAgc3VwZXIodXNlcl9pZCwgdXNlcm5hbWUsIHBhc3N3b3JkLCByb2xlLCBjcmVhdGVfYXQsIGlzQWN0aXZlKTtcbiAgICAgICAgdGhpcy5zdWJzY3JpYmVyX2lkID0gc3Vic2NyaWJlcl9pZDtcbiAgICAgICAgdGhpcy5mdWxsTmFtZSA9IGZ1bGxOYW1lO1xuICAgICAgICB0aGlzLmFkZHJlc3MgPSBhZGRyZXNzO1xuICAgICAgICB0aGlzLnBob25lID0gcGhvbmU7XG4gICAgfVxuLi4uXG5QYXRoOiBzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9TaWduVXAuamF2YVxuLi4uXG5cbiAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5SZXR1cm5BY3Rpb25QZXJmb3JtZWRcblxuICAgIHByaXZhdGUgdm9pZCBidG5TaWdudXBBY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuU2lnbnVwQWN0aW9uUGVyZm9ybWVkXG4gICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxuICAgICAgICBpZiAodmFsaWRhdGVGaWVsZHMoKSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBTdWJzY3JpYmVyIHN1YiA9IG5ldyBTdWJzY3JpYmVyKCk7XG4gICAgICAgICAgICAgICAgc3ViLnNldEZ1bGxOYW1lKHR4dE5hbWUuZ2V0VGV4dCgpKTtcbiAgICAgICAgICAgICAgICBzdWIuc2V0VXNlcm5hbWUodHh0VXNlck5hbWUuZ2V0VGV4dCgpKTtcbiAgICAgICAgICAgICAgICBzdWIuc2V0UGFzc3dvcmQodHh0UGFzc3dvcmQuZ2V0VGV4dCgpKTtcbiAgICAgICAgICAgICAgICBzdWIuc2V0Um9sZShERUZBVUxUX1JPTEUpO1xuICAgICAgICAgICAgICAgIHN1Yi5zZXRBZGRyZXNzKHR4dEFkZHJlc3MuZ2V0VGV4dCgpKTtcbiAgICAgICAgICAgICAgICBzdWIuc2V0UGhvbmUodHh0UGhvbmUuZ2V0VGV4dCgpKTtcbiAgICAgICAgICAgICAgICBzdWIuc2V0Q3JlYXRlX2F0KExvY2FsRGF0ZVRpbWUubm93KCkpO1xuICAgICAgICAgICAgICAgIFN1YnNjcmliZXJEQU8uaW5zZXJ0KHN1Yik7XG4gICAgICAgICAgICAgICAgY2xlYXIoKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBleCkge1xuICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwiTOG7l2k6IFwiICsgLi4uIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV8wMVlMdFJDYzZlU25FZzRKamVZcmtLNXIifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJFOi9Ib2NUYXAvMDJfSkFWQS8wM19Qcm9qZWN0L0ludGVybmV0IE1hbmdlbWVudCBTeXN0ZW0iLCJmb2xkZXJSb290IjoiRTovSG9jVGFwLzAyX0pBVkEvMDNfUHJvamVjdC9JbnRlcm5ldCBNYW5nZW1lbnQgU3lzdGVtIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwidGltZXN0YW1wIjoiMjAyNS0wNS0xM1QxMjo1OToyNC44MjRaIiwicmVzcG9uc2VfdGV4dCI6IkxldCBtZSBjaGVjayB0aGUgaW1wbGVtZW50YXRpb24gb2YgdGhlIFVzZXJEQU8ubG9naW4gbWV0aG9kOlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6ImI0M2ViOTcxLTk3MGItNGJmYi1iNWEzLWI3ZTM0YjJlNTYzYSIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfMDE5cndyTlVDNUtrZ0xWR0drUktNVDI4IiwidG9vbF9uYW1lIjoiY29kZWJhc2UtcmV0cmlldmFsIiwiaW5wdXRfanNvbiI6IntcImluZm9ybWF0aW9uX3JlcXVlc3RcIjogXCJGaW5kIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiBVc2VyREFPLmxvZ2luIG1ldGhvZCBhbmQgdGhlIE1haW5GcmFtZSBjbGFzcyB0aGF0IHNob3VsZCBiZSBkaXNwbGF5ZWQgYWZ0ZXIgc3VjY2Vzc2Z1bCBsb2dpbi5cIn0iLCJtY3Bfc2VydmVyX25hbWUiOiIiLCJtY3BfdG9vbF9uYW1lIjoiIn19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiJMZXQgbWUgY2hlY2sgZm9yIHRoZSBNYWluRnJhbWUgY2xhc3MgYW5kIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiBVc2VyREFPLmxvZ2luOlxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiVGhlIGZvbGxvd2luZyBjb2RlIHNlY3Rpb25zIHdlcmUgcmV0cmlldmVkOlxuUGF0aDogc3JjL21haW4vamF2YS9jb20vc3RvcmUvYXBwL3BldHN0b3JlL0NvbnRyb2xsZXJzL0xvZ2luQ29udHJvbGxlci5qYXZhXG4uLi5cblxuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuREFPLlVzZXJEQU87XG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5EQU8uU3RhZmZEQU87XG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5Nb2RlbHMuRW50aXRpZXMuVXNlcjtcbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLk1vZGVscy5FbnRpdGllcy5TdGFmZjtcbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLlNlc3Npb25zLlNlc3Npb25NYW5hZ2VyO1xuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuVmlld3MuQWRtaW5GYWN0b3J5O1xuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuVmlld3MuVmlld0ZhY3Rvcnk7XG5pbXBvcnQgZGUuamVuc2QuZnguZ2x5cGhzLmZvbnRhd2Vzb21lLkZvbnRBd2Vzb21lSWNvbjtcbmltcG9ydCBkZS5qZW5zZC5meC5nbHlwaHMuZm9udGF3ZXNvbWUuRm9udEF3ZXNvbWVJY29uVmlldztcbmltcG9ydCBqYXZhZnguZnhtbC5GWE1MO1xuaW1wb3J0IGphdmFmeC5meG1sLkluaXRpYWxpemFibGU7XG5pbXBvcnQgamF2YWZ4LnNjZW5lLmNvbnRyb2wuKjtcbmltcG9ydCBqYXZhZnguc2NlbmUuaW5wdXQuTW91c2VFdmVudDtcbmltcG9ydCBqYXZhZnguc3RhZ2UuU3RhZ2U7XG5pbXBvcnQgamF2YWZ4LnNjZW5lLmltYWdlLkltYWdlO1xuaW1wb3J0IGphdmFmeC5zY2VuZS5pbWFnZS5JbWFnZVZpZXc7XG5pbXBvcnQgamF2YWZ4LnNjZW5lLnBhaW50LkltYWdlUGF0dGVybjtcbmltcG9ydCBqYXZhLnV0aWwuT2JqZWN0cztcbi4uLlxuXG5wdWJsaWMgY2xhc3MgTG9naW5Db250cm9sbGVyIGltcGxlbWVudHMgSW5pdGlhbGl6YWJsZSB7XG5cbiAgICBARlhNTFxuICAgIHByaXZhdGUgRm9udEF3ZXNvbWVJY29uVmlldyBleWVJY29uO1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIFRleHRGaWVsZCBzaG93UGFzc3dvcmQ7XG5cbiAgICBARlhNTFxuICAgIHByaXZhdGUgUGFzc3dvcmRGaWVsZCBwYXNzd29yZEZpZWxkO1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIFRleHRGaWVsZCB1c2VybmFtZUZpZWxkO1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIEJ1dHRvbiBsb2dpbkJ1dHRvbjtcblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBMYWJlbCBlcnJvckxhYmVsO1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIEh5cGVybGluayBmb3Jnb3RQYXNzd29yZExpbms7XG5cbiAgICBARlhNTFxuICAgIHByaXZhdGUgSW1hZ2VWaWV3IHVzZXJJbWFnZTtcblxuICAgIHByaXZhdGUgZG91YmxlIHgsIHk7XG5cbiAgICBVc2VyREFPIHVzZXJEQU8gPSBuZXcgVXNlckRBTygpO1xuICAgIFN0YWZmREFPIHN0YWZmREFPID0gU3RhZmZEQU8uZ2V0SW5zdGFuY2UoKTtcbiAgICBwdWJsaWMgc3RhdGljIGludCBpZFN0YWZmQ3VycmVudDtcbiAgICBwdWJsaWMgc3RhdGljIGludCBpZEFkbWluQ3VycmVudDtcblxuICAgIHByaXZhdGUgU2Vzc2lvbk1hbmFnZXIgc2Vzc2lvbk1hbmFnZXIgPSBuZXcgU2Vzc2lvbk1hbmFnZXIoKTtcbi4uLlxuXG4gICAgcHJpdmF0ZSB2b2lkIHNldHVwTG9naW5CdXR0b24oKSB7XG4gICAgICAgIGxvZ2luQnV0dG9uLnNldE9uQWN0aW9uKGV2ZW50IC0+IGhhbmRsZUxvZ2luKCkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgdm9pZCBzZXR1cEZvcmdvdFBhc3N3b3JkTGluaygpIHtcbiAgICAgICAgZm9yZ290UGFzc3dvcmRMaW5rLnNldE9uQWN0aW9uKGV2ZW50IC0+IHtcbiAgICAgICAgICAgIFN0YWdlIGN1cnJlbnRTdGFnZSA9IChTdGFnZSkgdXNlcm5hbWVGaWVsZC5nZXRTY2VuZSgpLmdldFdpbmRvdygpO1xuICAgICAgICAgICAgVmlld0ZhY3RvcnkuZ2V0SW5zdGFuY2UoKS5zd2l0Y2hDb250ZW50KFwiZm9yZ290cGFzc3dvcmRcIiwgY3VycmVudFN0YWdlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIHZvaWQgaGFuZGxlRHJhZ2dlZChNb3VzZUV2ZW50IGV2ZW50KSB7XG4gICAgICAgIFN0YWdlIHN0YWdlID0gKFN0YWdlKSB1c2VybmFtZUZpZWxkLmdldFNjZW5lKCkuZ2V0V2luZG93KCk7XG4gICAgICAgIHN0YWdlLnNldFgoZXZlbnQuZ2V0U2NyZWVuWCgpIC0geCk7XG4gICAgICAgIHN0YWdlLnNldFkoZXZlbnQuZ2V0U2NyZWVuWSgpIC0geSk7XG4gICAgfVxuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIHZvaWQgaGFuZGxlUHJlc3NlZChNb3VzZUV2ZW50IGV2ZW50KSB7XG4gICAgICAgIHggPSBldmVudC5nZXRTY3JlZW5YKCk7XG4gICAgICAgIHkgPSBldmVudC5nZXRTY3JlZW5ZKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB2b2lkIGhhbmRsZUxvZ2luKCkge1xuICAgICAgICBTdHJpbmcgdXNlcm5hbWUgPSB1c2VybmFtZUZpZWxkLmdldFRleHQoKTtcbiAgICAgICAgU3RyaW5nIHBhc3N3b3JkID0gcGFzc3dvcmRGaWVsZC5nZXRUZXh0KCk7XG5cbiAgICAgICAgaWYodXNlcm5hbWUuaXNFbXB0eSgpIHx8IHBhc3N3b3JkLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgQ29udHJvbGxlclV0aWxzLnNob3dBbGVydChBbGVydC5BbGVydFR5cGUuRVJST1IsIFwiTOG7l2lcIiwgXCJWdWkgbMOybmcgbmjhuq1wIHTDqm4gxJHEg25nIG5o4bqtcCB2w6AgbeG6rXQga2jhuql1XCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFTDrG0gdXNlciB0aGVvIHVzZXJuYW1lXG4gICAgICAgICAgICBVc2VyIHVzZXIgPSB1c2VyREFPLmZpbmRCeVVzZXJuYW1lKHVzZXJuYW1lKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYodXNlciA9PSBudWxsIHx8IHVzZXIuZ2V0VXNlcm5hbWUoKSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgQ29udHJvbGxlclV0aWxzLnNob3dBbGVydChBbGVydC5BbGVydFR5cGUuRVJST1IsIFwiTOG7l2lcIiwgXCJUw6puIMSRxINuZyBuaOG6rXAga2jDtG5nIMSRw7puZ1wiKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEtp4buDbSB0cmEgdMOqbiDEkcSDbmcgbmjhuq1wXG4gICAgICAgICAgICBpZiAoIXVzZXIuZ2V0VXNlcm5hbWUoKS5lcXVhbHModXNlcm5hbWUpKSB7XG4gICAgICAgICAgICAgICAgQ29udHJvbGxlclV0aWxzLnNob3dBbGVydChBbGVydC5BbGVydFR5cGUuRVJST1IsIFwiTOG7l2lcIiwgXCJUw6puIMSRxINuZyBuaOG6rXAga2jDtG5nIMSRw7puZ1wiKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEtp4buDbSB0cmEgbeG6rXQga2jhuql1XG4gICAgICAgICAgICBpZighQkNyeXB0LmNoZWNrcHcocGFzc3dvcmQsIHVzZXIuZ2V0UGFzc3dvcmQoKSkpIHtcbiAgICAgICAgICAgICAgICBDb250cm9sbGVyVXRpbHMuc2hvd0FsZXJ0KEFsZXJ0LkFsZXJ0VHlwZS5FUlJPUiwgXCJM4buXaVwiLCBcIk3huq10IGto4bqpdSBraMO0bmcgxJHDum5nXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc2Vzc2lvbk1hbmFnZXIuc2V0Q3VycmVudFVzZXIodXNlcik7XG5cbiAgICAgICAgICAgIFN0YWdlIGN1cnJlbnRTdGFnZSA9IChTdGFnZSkgdXNlcm5hbWVGaWVsZC5nZXRTY2VuZSgpLmdldFdpbmRvdygpO1xuXG4gICAgICAgICAgICBpZih1c2VyLmdldFJvbGUoKS5lcXVhbHMoVXNlci5ST0xFX0FETUlOKSkge1xuICAgICAgICAgICAgICAgIGlkQWRtaW5DdXJyZW50ID0gdXNlci5nZXRVc2VySWQoKTtcbiAgICAgICAgICAgICAgICBBZG1pbkZhY3RvcnkuZ2V0SW5zdGFuY2UoKS5zd2l0Y2hDb250ZW50KFwiZGFzaGJvYXJkXCIsIGN1cnJlbnRTdGFnZSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYodXNlci5nZXRSb2xlKCkuZXF1YWxzKFVzZXIuUk9MRV9VU0VSKSkge1xuICAgICAgICAgICAgICAgIGlkU3RhZmZDdXJyZW50ID0gdXNlci5nZXRVc2VySWQoKTtcbiAgICAgICAgICAgICAgICBTdGFmZiBzdGFmZiA9IHN0YWZmREFPLmZpbmRCeVVzZXJJZCh1c2VyLmdldFVzZXJJZCgpKTtcbiAgICAgICAgICAgICAgICBpZiAoc3RhZmYgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBzZXNzaW9uTWFuYWdlci5zZXRDdXJyZW50U3RhZmYoc3RhZmYpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBWaWV3RmFjdG9yeS5nZXRJbnN0YW5jZSgpLnN3aXRjaENvbnRlbnQoXCJkYXNoYm9hcmRcIiwgY3VycmVudFN0YWdlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgQ29udHJvbGxlclV0aWxzLnNob3dBbGVydChBbGVydC5BbGVydFR5cGUuRVJST1IsIFwiTOG7l2lcIiwgXCJWYWkgdHLDsiBuZ8aw4budaSBkw7luZyBraMO0bmcgaOG7o3AgbOG7h1wiKTtcbiAgICAgICAgICAgICAgICBzZXNzaW9uTWFuYWdlci5jbGVhcigpO1xuICAgICAgICAgICAgfVxuLi4uXG5QYXRoOiBzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9Mb2dpbi5qYXZhXG4vKlxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9MaWNlbnNlcy9saWNlbnNlLWRlZmF1bHQudHh0IHRvIGNoYW5nZSB0aGlzIGxpY2Vuc2VcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvR1VJRm9ybXMvSkZyYW1lLmphdmEgdG8gZWRpdCB0aGlzIHRlbXBsYXRlXG4gKi9cbnBhY2thZ2UgaW50ZXJuZXQubWFuZ2VtZW50LnN5c3RlbTtcblxuaW1wb3J0IERBTy5Vc2VyREFPO1xuaW1wb3J0IE1vZGVsLlVzZXI7XG5pbXBvcnQgamF2YXguc3dpbmcuSk9wdGlvblBhbmU7XG5cbi8qKlxuICpcbiAqIEBhdXRob3IgTmdvYyBUaGFvXG4gKi9cbnB1YmxpYyBjbGFzcyBMb2dpbiBleHRlbmRzIGphdmF4LnN3aW5nLkpGcmFtZSB7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIG5ldyBmb3JtIExvZ2luXG4gICAgICovXG4gICAgcHVibGljIExvZ2luKCkge1xuICAgICAgICBpbml0Q29tcG9uZW50cygpO1xuICAgICAgICBzZXRUaXRsZShcIsSQxINuZyBrw71cIik7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgY2xlYXIoKXtcbiAgICAgICAgdHh0VXNlck5hbWUuc2V0VGV4dChcIlwiKTtcbiAgICAgICAgdHh0UGFzc3dvcmQuc2V0VGV4dChcIlwiKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYm9vbGVhbiB2YWxpZGF0ZUZpZWxkcygpe1xuICAgICAgICBTdHJpbmcgdXNlck5hbWUgPSB0eHRVc2VyTmFtZS5nZXRUZXh0KCk7XG4gICAgICAgIFN0cmluZyBwYXNzd29yZCA9IHR4dFBhc3N3b3JkLmdldFRleHQoKTtcblxuICAgICAgICBpZih1c2VyTmFtZS5pc0VtcHR5KCkgfHwgcGFzc3dvcmQuaXNFbXB0eSgpKXtcbiAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwiVnVpIGzDsm5nIGtow7RuZyBi4buPIHRy4buRbmchXCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuLi4uXG5cbiAgICBwcml2YXRlIHZvaWQgYnRuTG9naW5BY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuTG9naW5BY3Rpb25QZXJmb3JtZWRcbiAgICAgICAgLy8gVE9ETyBhZGQgeW91ciBoYW5kbGluZyBjb2RlIGhlcmU6XG4gICAgICAgIGlmKHZhbGlkYXRlRmllbGRzKCkpIHtcbiAgICAgICAgICAgIHRyeXtcbiAgICAgICAgICAgICAgICBTdHJpbmcgdXNlcm5hbWUgPSB0eHRVc2VyTmFtZS5nZXRUZXh0KCkudHJpbSgpO1xuICAgICAgICAgICAgICAgIFN0cmluZyBwYXNzd29yZCA9IHR4dFBhc3N3b3JkLmdldFRleHQoKS50cmltKCk7XG5cbiAgICAgICAgICAgICAgICBVc2VyIHVzZXIgPSBudWxsO1xuICAgICAgICAgICAgICAgIGJvb2xlYW4gaXNTdWNjZXNzID0gVXNlckRBTy5sb2dpbih1c2VybmFtZSwgcGFzc3dvcmQpO1xuXG4gICAgICAgICAgICAgICAgaWYoaXNTdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKHRoaXMsIFwixJDEg25nIG5o4bqtcCB0aMOgbmggY8O0bmchXCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuSU5GT1JNQVRJT05fTUVTU0FHRSk7XG4vLyAgICAgICAgICAgICAgICAgICAgbmV3IE1haW5GcmFtZSgpLnNldFZpc2libGUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcG9zZSgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKHRoaXMsIFwiU2FpIHTDqm4gxJHEg25nIG5o4bqtcCBob+G6t2MgbeG6rXQga2jhuql1LlwiLCBcIkzhu5dpXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2goRXhjZXB0aW9uIGV4KSB7XG4gICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXCJM4buXaTogXCIgKyBleC5nZXRNZXNzYWdlKCksIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuXG4gICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuTG9naW5BY3Rpb25QZXJmb3JtZWRcblxuICAgIHByaXZhdGUgdm9pZCBidG5Gb3Jnb3RQYXNzd29yZEFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5Gb3Jnb3RQYXNzd29yZEFjdGlvblBlcmZvcm1lZFxuICAgICAgICAvLyBPcGVuIHRoZSBGb3Jnb3RQYXNzd29yZCBkaWFsb2dcbiAgICAgICAgRm9yZ290UGFzc3dvcmQgZm9yZ290UGFzc3dvcmREaWFsb2cgPSBuZXcgRm9yZ290UGFzc3dvcmQodGhpcywgdHJ1ZSk7XG4gICAgICAgIGZvcmdvdFBhc3N3b3JkRGlhbG9nLnNldFZpc2libGUodHJ1ZSk7XG4gICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuRm9yZ290UGFzc3dvcmRBY3Rpb25QZXJmb3JtZWRcblxuICAgIHByaXZhdGUgdm9pZCBidG5FeGl0QWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkV4aXRBY3Rpb25QZXJmb3JtZWRcbiAgICAgICAgLy8gVE9ETyBhZGQgeW91ciBoYW5kbGluZyBjb2RlIGhlcmU6XG4gICAgICAgIGludCByZXN1bHQgPSBKT3B0aW9uUGFuZS5zaG93Q29uZmlybURpYWxvZyhudWxsLCBcIkLhuqFuIGPDsyBjaOG6r2MgY2jhuq9uIG114buRbiB0aG/DoXQga2jDtG5nP1wiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLllFU19OT19PUFRJT04sIEpPcHRpb25QYW5lLlFVRVNUSU9OX01FU1NBR0UpO1xuXG4gICAgICAgIGlmIChyZXN1bHQgPT0gSk9wdGlvblBhbmUuWUVTX09QVElPTikge1xuICAgICAgICAgICAgU3lzdGVtLmV4aXQoMCk7XG4gICAgICAgIH1cbiAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5FeGl0QWN0aW9uUGVyZm9ybWVkXG5cbiAgICBwcml2YXRlIHZvaWQgYnRuU2lnbnVwQWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0blNpZ251cEFjdGlvblBlcmZvcm1lZFxuICAgICAgICAvLyBUT0RPIGFkZCB5b3VyIGhhbmRsaW5nIGNvZGUgaGVyZTpcbiAgICAgICAgc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgICAgIG5ldyBTaWduVXAoKS5zZXRWaXNpYmxlKHRydWUpO1xuICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0blNpZ251cEFjdGlvblBlcmZvcm1lZFxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL2NvbS9zdG9yZS9hcHAvcGV0c3RvcmUvQ29udHJvbGxlcnMvQWRtaW4vRGFzaGJvYXJkQ29udHJvbGxlci5qYXZhXG4uLi5cblxuICAgIHByaXZhdGUgdm9pZCBuYXZpZ2F0ZVRvKFN0cmluZyB2aWV3TmFtZSkge1xuICAgICAgICBTdGFnZSBjdXJyZW50U3RhZ2UgPSAoU3RhZ2UpIGxvZ291dEJ1dHRvbi5nZXRTY2VuZSgpLmdldFdpbmRvdygpO1xuICAgICAgICBBZG1pbkZhY3RvcnkuZ2V0SW5zdGFuY2UoKS5zd2l0Y2hDb250ZW50KHZpZXdOYW1lLCBjdXJyZW50U3RhZ2UpO1xuICAgIH1cblxuICAgIHByaXZhdGUgdm9pZCBoYW5kbGVMb2dvdXQoKSB7XG4gICAgICAgIC8vIFN0b3AgYXV0by1yZWZyZXNoIGlmIGFjdGl2ZVxuICAgICAgICBzdG9wQXV0b1JlZnJlc2goKTtcblxuICAgICAgICBTdGFnZSBjdXJyZW50U3RhZ2UgPSAoU3RhZ2UpIGxvZ291dEJ1dHRvbi5nZXRTY2VuZSgpLmdldFdpbmRvdygpO1xuICAgICAgICBpZiAoQ29udHJvbGxlclV0aWxzLnNob3dDb25maXJtYXRpb25BbmRXYWl0KFwixJDEg25nIHh14bqldFwiLCBcIkLhuqFuIGPDsyBjaOG6r2MgY2jhuq9uIG114buRbiDEkcSDbmcgeHXhuqV0IGtow7RuZz9cXG5OaOG6pW4gT0sgxJHhu4MgeMOhYyBuaOG6rW4uXCIpKSB7XG4gICAgICAgICAgICBTZXNzaW9uTWFuYWdlci5jbGVhcigpO1xuICAgICAgICAgICAgVmlld0ZhY3RvcnkuZ2V0SW5zdGFuY2UoKS5zd2l0Y2hDb250ZW50KFwibG9naW5cIiwgY3VycmVudFN0YWdlKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG59XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvY29tL3N0b3JlL2FwcC9wZXRzdG9yZS9QZXRTdG9yZUFwcGxpY2F0aW9uLmphdmFcbnBhY2thZ2UgY29tLnN0b3JlLmFwcC5wZXRzdG9yZTtcblxuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuTW9kZWxzLkRhdGFiYXNlTWFuYWdlcjtcbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLlZpZXdzLk1vZGVsVmlldztcbmltcG9ydCBqYXZhZnguYXBwbGljYXRpb24uQXBwbGljYXRpb247XG5pbXBvcnQgamF2YWZ4LmZ4bWwuRlhNTExvYWRlcjtcbmltcG9ydCBqYXZhZnguc2NlbmUuUGFyZW50O1xuaW1wb3J0IGphdmFmeC5zY2VuZS5TY2VuZTtcbmltcG9ydCBqYXZhZnguc3RhZ2UuU3RhZ2U7XG5cbmltcG9ydCBqYXZhLmlvLklPRXhjZXB0aW9uO1xuXG5wdWJsaWMgY2xhc3MgUGV0U3RvcmVBcHBsaWNhdGlvbiBleHRlbmRzIEFwcGxpY2F0aW9uIHtcbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgdm9pZCBzdGFydChTdGFnZSBwcmltYXJ5U3RhZ2UpIHtcbiAgICAgICAgRGF0YWJhc2VNYW5hZ2VyLmNvbm5lY3QoKTtcbiAgICAgICAgTW9kZWxWaWV3LmdldEluc3RhbmNlKCkuZ2V0Vmlld0ZhY3RvcnkoKS5zaG93V2luZG93KFwibG9naW5cIik7XG4uLi5cblBhdGg6IHNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL0ZvcmdvdFBhc3N3b3JkLmphdmFcbi4uLlxuXG4gICAgcHJpdmF0ZSB2b2lkIGJ0bkNoYW5nZUFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5DaGFuZ2VBY3Rpb25QZXJmb3JtZWRcbiAgICAgICAgaWYgKHZhbGlkYXRlRmllbGRzKCkgJiYgY3VycmVudFN1YnNjcmliZXIgIT0gbnVsbCkge1xuICAgICAgICAgICAgU3RyaW5nIG5ld1Bhc3N3b3JkID0gdHh0UGFzc3dvcmQuZ2V0VGV4dCgpO1xuXG4gICAgICAgICAgICBib29sZWFuIHN1Y2Nlc3MgPSBTdWJzY3JpYmVyREFPLnVwZGF0ZVBhc3N3b3JkKGN1cnJlbnRTdWJzY3JpYmVyLmdldFVzZXJfaWQoKSwgbmV3UGFzc3dvcmQpO1xuXG4gICAgICAgICAgICBpZiAoc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwixJDhu5VpIG3huq10IGto4bqpdSB0aMOgbmggY8O0bmchIFZ1aSBsw7JuZyDEkcSDbmcgbmjhuq1wIGzhuqFpLlwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLklORk9STUFUSU9OX01FU1NBR0UpO1xuICAgICAgICAgICAgICAgIG5ldyBMb2dpbigpLnNldFZpc2libGUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwb3NlKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwixJDhu5VpIG3huq10IGto4bqpdSB0aOG6pXQgYuG6oWkhIFZ1aSBsw7JuZyB0aOG7rSBs4bqhaSBzYXUuXCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5DaGFuZ2VBY3Rpb25QZXJmb3JtZWRcbi4uLlxuUGF0aDogc3JjL0RBTy9Vc2VyREFPLmphdmFcbi8qXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0xpY2Vuc2VzL2xpY2Vuc2UtZGVmYXVsdC50eHQgdG8gY2hhbmdlIHRoaXMgbGljZW5zZVxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NsYXNzLmphdmEgdG8gZWRpdCB0aGlzIHRlbXBsYXRlXG4gKi9cbnBhY2thZ2UgREFPO1xuXG5pbXBvcnQgTW9kZWwuVXNlcjtcbmltcG9ydCBqYXZhLnV0aWwuTGlzdDtcblxuLyoqXG4gKlxuICogQGF1dGhvciBOZ29jIFRoYW9cbiAqL1xucHVibGljIGNsYXNzIFVzZXJEQU97XG5cbiAgICBwdWJsaWMgc3RhdGljIHZvaWQgaW5zZXJ0KFVzZXIgb2JqKSB7XG4gICAgICAgIFxuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgdm9pZCB1cGRhdGUoVXNlciBvYmopIHtcbiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpOyAvLyBHZW5lcmF0ZWQgZnJvbSBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ29kZS9HZW5lcmF0ZWRNZXRob2RCb2R5XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyB2b2lkIGRlbGV0ZShpbnQgaWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpOyAvLyBHZW5lcmF0ZWQgZnJvbSBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ29kZS9HZW5lcmF0ZWRNZXRob2RCb2R5XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBVc2VyIGdldEJ5SWQoaW50IGlkKSB7XG4gICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbihcIk5vdCBzdXBwb3J0ZWQgeWV0LlwiKTsgLy8gR2VuZXJhdGVkIGZyb20gbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NvZGUvR2VuZXJhdGVkTWV0aG9kQm9keVxuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxVc2VyPiBnZXRBbGwoKSB7XG4gICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbihcIk5vdCBzdXBwb3J0ZWQgeWV0LlwiKTsgLy8gR2VuZXJhdGVkIGZyb20gbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NvZGUvR2VuZXJhdGVkTWV0aG9kQm9keVxuICAgIH1cbiAgICBcbn1cbi4uLlxuUGF0aDogc3JjL21haW4vcmVzb3VyY2VzL0ZYTUwvQWRtaW4vQWRtaW5NZW51LmZ4bWxcbi4uLlxuXG48QW5jaG9yUGFuZSBmeDppZD1cInJvb3RcIiBwcmVmSGVpZ2h0PVwiNzAuMFwiIHByZWZXaWR0aD1cIjk5MC4wXCIgc3R5bGVDbGFzcz1cIm5hdi1jb250YWluZXJcIiBzdHlsZXNoZWV0cz1cIkAuLi8uLi9TdHlsZXMvQWRtaW4vQWRtaW5NZW51LmNzc1wiIHhtbG5zPVwiaHR0cDovL2phdmFmeC5jb20vamF2YWZ4LzIzLjAuMVwiIHhtbG5zOmZ4PVwiaHR0cDovL2phdmFmeC5jb20vZnhtbC8xXCIgZng6Y29udHJvbGxlcj1cImNvbS5zdG9yZS5hcHAucGV0c3RvcmUuQ29udHJvbGxlcnMuQWRtaW4uQWRtaW5NZW51Q29udHJvbGxlclwiPlxuICAgPGNoaWxkcmVuPlxuICAgICAgPEltYWdlVmlldyBmaXRIZWlnaHQ9XCI0MC4wXCIgZml0V2lkdGg9XCIxNTMuMFwiIGxheW91dFg9XCIyNC4wXCIgbGF5b3V0WT1cIjIxLjBcIiBwaWNrT25Cb3VuZHM9XCJ0cnVlXCIgcHJlc2VydmVSYXRpbz1cInRydWVcIiBBbmNob3JQYW5lLmxlZnRBbmNob3I9XCIxNS4wXCIgQW5jaG9yUGFuZS50b3BBbmNob3I9XCIxNS4wXCI+XG4gICAgICAgICA8aW1hZ2U+XG4gICAgICAgICAgICA8SW1hZ2UgdXJsPVwiQC4uLy4uL0ltYWdlcy9sb2dvMS5wbmdcIiAvPlxuICAgICAgICAgPC9pbWFnZT5cbiAgICAgIDwvSW1hZ2VWaWV3PlxuICAgICAgPExhYmVsIGZ4OmlkPVwidXNlcm5hbWVMYWJlbFwiIGNvbnRlbnREaXNwbGF5PVwiUklHSFRcIiBsYXlvdXRYPVwiODU4LjBcIiBsYXlvdXRZPVwiMjEuMFwiIHN0eWxlQ2xhc3M9XCJsYWJlbC11c2VybmFtZVwiIHRleHQ9XCJhZG1pbjEyM1wiIHRleHRBbGlnbm1lbnQ9XCJSSUdIVFwiIC8+XG4uLi5cblBhdGg6IHNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL0FkbWluL0Rhc2hib2FyZC5qYXZhXG4vKlxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9MaWNlbnNlcy9saWNlbnNlLWRlZmF1bHQudHh0IHRvIGNoYW5nZSB0aGlzIGxpY2Vuc2VcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvR1VJRm9ybXMvSkZyYW1lLmphdmEgdG8gZWRpdCB0aGlzIHRlbXBsYXRlXG4gKi9cbnBhY2thZ2UgaW50ZXJuZXQubWFuZ2VtZW50LnN5c3RlbS5BZG1pbjtcblxuaW1wb3J0IE1vZGVsLlVzZXI7XG5pbXBvcnQgaW50ZXJuZXQubWFuZ2VtZW50LnN5c3RlbS5TZXNzaW9uLlVzZXJTZXNzaW9uO1xuaW1wb3J0IGphdmEudGltZS5Mb2NhbFRpbWU7XG5pbXBvcnQgamF2YXguc3dpbmcuSk9wdGlvblBhbmU7XG5cbi8qKlxuICpcbiAqIEBhdXRob3IgTmdvYyBUaGFvXG4gKi9cbnB1YmxpYyBjbGFzcyBEYXNoYm9hcmQgZXh0ZW5kcyBqYXZheC5zd2luZy5KRnJhbWUge1xuXG4gICAgVXNlciBhZG1pbiA9IFVzZXJTZXNzaW9uLmdldEN1cnJlbnRVc2VyKCk7XG4gICAgXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBuZXcgZm9ybSBEYXNoYm9hcmRcbiAgICAgKi9cbiAgICBwdWJsaWMgRGFzaGJvYXJkKCkge1xuICAgICAgICBpbml0Q29tcG9uZW50cygpO1xuICAgICAgICBzZXR1cEhlbGxvKCk7XG4gICAgICAgIHNldHVwVXNlcm5hbWUoKTtcbiAgICB9XG4gICAgXG4gICAgcHJpdmF0ZSB2b2lkIHNldHVwSGVsbG8oKSB7XG4gICAgICAgIExvY2FsVGltZSBub3cgPSBMb2NhbFRpbWUubm93KCk7XG4gICAgICAgIGludCBob3VyID0gbm93LmdldEhvdXIoKTtcbiAgICAgICAgXG4gICAgICAgIFN0cmluZyBncmVldGluZztcblxuICAgICAgICBpZiAoaG91ciA+PSA1ICYmIGhvdXIgPCAxMSkge1xuICAgICAgICAgICAgZ3JlZXRpbmcgPSBcIkNow6BvIGJ14buVaSBzw6FuZyxcIjtcbiAgICAgICAgfSBlbHNlIGlmIChob3VyID49IDExICYmIGhvdXIgPCAxNSkge1xuICAgICAgICAgICAgZ3JlZXRpbmcgPSBcIkNow6BvIGJ14buVaSB0csawYSxcIjtcbiAgICAgICAgfSBlbHNlIGlmIChob3VyID49IDE1ICYmIGhvdXIgPCAxNykge1xuICAgICAgICAgICAgZ3JlZXRpbmcgPSBcIkNow6BvIGJ14buVaSBjaGnhu4F1LFwiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZ3JlZXRpbmcgPSBcIkNow6BvIGJ14buVaSB04buRaSxcIjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgbGJIZWxsby5zZXRUZXh0KGdyZWV0aW5nKTtcbiAgICB9XG4gICAgXG4gICAgcHJpdmF0ZSB2b2lkIHNldHVwVXNlcm5hbWUoKSB7XG4gICAgICAgIGxiVXNlck5hbWUuc2V0VGV4dChhZG1pbi5nZXRVc2VybmFtZSgpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBjYWxsZWQgZnJvbSB3aXRoaW4gdGhlIGNvbnN0cnVjdG9yIHRvIGluaXRpYWxpemUgdGhlIGZvcm0uXG4gICAgICogV0FSTklORzogRG8gTk9UIG1vZGlmeSB0aGlzIGNvZGUuIFRoZSBjb250ZW50IG9mIHRoaXMgbWV0aG9kIGlzIGFsd2F5c1xuICAgICAqIHJlZ2VuZXJhdGVkIGJ5IHRoZSBGb3JtIEVkaXRvci5cbiAgICAgKi9cbiAgICBAU3VwcHJlc3NXYXJuaW5ncyhcInVuY2hlY2tlZFwiKVxuICAgIC8vIDxlZGl0b3ItZm9sZCBkZWZhdWx0c3RhdGU9XCJjb2xsYXBzZWRcIiBkZXNjPVwiR2VuZXJhdGVkIENvZGVcIj4vL0dFTi1CRUdJTjppbml0Q29tcG9uZW50c1xuICAgIHByaXZhdGUgdm9pZCBpbml0Q29tcG9uZW50cygpIHtcblxuICAgICAgICBidG5Vc2VyID0gbmV3IGphdmF4LnN3aW5nLkpCdXR0b24oKTtcbiAgICAgICAgYnRuQ3VzdG9tZXIgPSBuZXcgamF2YXguc3dpbmcuSkJ1dHRvbigpO1xuICAgICAgICBidG5QbGFuID0gbmV3IGphdmF4LnN3aW5nLkpCdXR0b24oKTtcbiAgICAgICAgYnRuQ29udHJhY3QgPSBuZXcgamF2YXguc3dpbmcuSkJ1dHRvbigpO1xuICAgICAgICBidG5IaXN0b3J5ID0gbmV3IGphdmF4LnN3aW5nLkpCdXR0b24oKTtcbiAgICAgICAgYnRuU3RhdGlzdGljID0gbmV3IGphdmF4LnN3aW5nLkpCdXR0b24oKTtcbiAgICAgICAgYnRuRXhpdCA9IG5ldyBqYXZheC5zd2luZy5KQnV0dG9uKCk7XG4gICAgICAgIGpTZXBhcmF0b3IxID0gbmV3IGphdmF4LnN3aW5nLkpTZXBhcmF0b3IoKTtcbiAgICAgICAgbGJVc2VyTmFtZSA9IG5ldyBqYXZheC5zd2luZy5KTGFiZWwoKTtcbiAgICAgICAgbGJIZWxsbyA9IG5ldyBqYXZheC5zd2luZy5KTGFiZWwoKTtcbi4uLlxuICAgICAgICAvLzwvZWRpdG9yLWZvbGQ+XG5cbiAgICAgICAgLyogQ3JlYXRlIGFuZCBkaXNwbGF5IHRoZSBmb3JtICovXG4gICAgICAgIGphdmEuYXd0LkV2ZW50UXVldWUuaW52b2tlTGF0ZXIobmV3IFJ1bm5hYmxlKCkge1xuICAgICAgICAgICAgcHVibGljIHZvaWQgcnVuKCkge1xuICAgICAgICAgICAgICAgIG5ldyBEYXNoYm9hcmQoKS5zZXRWaXNpYmxlKHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBWYXJpYWJsZXMgZGVjbGFyYXRpb24gLSBkbyBub3QgbW9kaWZ5Ly9HRU4tQkVHSU46dmFyaWFibGVzXG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KQnV0dG9uIGJ0bkNvbnRyYWN0O1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkJ1dHRvbiBidG5DdXN0b21lcjtcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpCdXR0b24gYnRuRXhpdDtcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpCdXR0b24gYnRuSGlzdG9yeTtcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpCdXR0b24gYnRuUGxhbjtcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpCdXR0b24gYnRuU3RhdGlzdGljO1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkJ1dHRvbiBidG5Vc2VyO1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSlNlcGFyYXRvciBqU2VwYXJhdG9yMTtcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpMYWJlbCBsYkhlbGxvO1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkxhYmVsIGxiVXNlck5hbWU7XG4gICAgLy8gRW5kIG9mIHZhcmlhYmxlcyBkZWNsYXJhdGlvbi8vR0VOLUVORDp2YXJpYWJsZXNcbn1cbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9jb20vc3RvcmUvYXBwL3BldHN0b3JlL1ZpZXdzL0FkbWluRmFjdG9yeS5qYXZhXG4uLi5cblxuICAgIHB1YmxpYyB2b2lkIHNob3dXaW5kb3coU3RyaW5nIGZ4bWxOYW1lKSB7XG4gICAgICAgIFN0YWdlIHN0YWdlID0gbmV3IFN0YWdlKCk7XG4gICAgICAgIFBhcmVudCByb290ID0gbnVsbDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHN3aXRjaCAoZnhtbE5hbWUudG9Mb3dlckNhc2UoKSkge1xuICAgICAgICAgICAgICAgIGNhc2UgXCJkYXNoYm9hcmRcIjpcbiAgICAgICAgICAgICAgICAgICAgcm9vdCA9IGxvYWRGWE1MKERBU0hCT0FSRF9GWE1MKTtcbiAgICAgICAgICAgICAgICAgICAgc3RhZ2Uuc2V0VGl0bGUoXCJC4bqjbmcgxJFp4buBdSBraGnhu4NuIEFkbWluXCIpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwidXNlcm1hbmFnZW1lbnRcIjpcbiAgICAgICAgICAgICAgICAgICAgcm9vdCA9IGxvYWRGWE1MKFVTRVJNQU5BR0VNRU5UX0ZYTUwpO1xuICAgICAgICAgICAgICAgICAgICBzdGFnZS5zZXRUaXRsZShcIlF14bqjbiBsw70gdMOgaSBraG/huqNuXCIpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiY3VzdG9tZXJtYW5hZ2VtZW50XCI6XG4gICAgICAgICAgICAgICAgICAgIHJvb3QgPSBsb2FkRlhNTChDVVNUT01FUk1BTkFHRU1FTlRfRlhNTCk7XG4gICAgICAgICAgICAgICAgICAgIHN0YWdlLnNldFRpdGxlKFwiUXXhuqNuIGzDvSBraMOhY2ggaMOgbmdcIik7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJkaXNjb3VudG1hbmFnZW1lbnRcIjpcbiAgICAgICAgICAgICAgICAgICAgcm9vdCA9IGxvYWRGWE1MKERJU0NPVU5UTUFOQUdFTUVOVF9GWE1MKTtcbiAgICAgICAgICAgICAgICAgICAgc3RhZ2Uuc2V0VGl0bGUoXCJRdeG6o24gbMO9IGtodXnhur9uIG3Do2lcIik7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJwZXRtYW5hZ2VtZW50XCI6XG4gICAgICAgICAgICAgICAgICAgIHJvb3QgPSBsb2FkRlhNTChQRVRNQU5BR0VNRU5UX0ZYTUwpO1xuICAgICAgICAgICAgICAgICAgICBzdGFnZS5zZXRUaXRsZShcIlF14bqjbiBsw70gdGjDuiBjxrBuZ1wiKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcInByb2R1Y3RtYW5hZ2VtZW50XCI6XG4gICAgICAgICAgICAgICAgICAgIHJvb3QgPSBsb2FkRlhNTChQUk9EVUNUTUFOQUdFTUVOVF9GWE1MKTtcbiAgICAgICAgICAgICAgICAgICAgc3RhZ2Uuc2V0VGl0bGUoXCJRdeG6o24gbMO9IHPhuqNuIHBo4bqpbVwiKTtcbi4uLlxuXG4gICAgcHVibGljIHZvaWQgc3dpdGNoQ29udGVudChTdHJpbmcgZnhtbE5hbWUsIFN0YWdlIGN1cnJlbnRTdGFnZSkge1xuICAgICAgICBQYXJlbnQgcm9vdCA9IG51bGw7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBzd2l0Y2ggKGZ4bWxOYW1lLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICAgICAgICBjYXNlIFwiZGFzaGJvYXJkXCI6XG4gICAgICAgICAgICAgICAgICAgIHJvb3QgPSBsb2FkRlhNTChEQVNIQk9BUkRfRlhNTCk7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdGFnZS5zZXRUaXRsZShcIkLhuqNuZyDEkWnhu4F1IGtoaeG7g24gQWRtaW5cIik7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJ1c2VybWFuYWdlbWVudFwiOlxuICAgICAgICAgICAgICAgICAgICByb290ID0gbG9hZEZYTUwoVVNFUk1BTkFHRU1FTlRfRlhNTCk7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdGFnZS5zZXRUaXRsZShcIlF14bqjbiBsw70gdMOgaSBraG/huqNuXCIpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiY3VzdG9tZXJtYW5hZ2VtZW50XCI6XG4gICAgICAgICAgICAgICAgICAgIHJvb3QgPSBsb2FkRlhNTChDVVNUT01FUk1BTkFHRU1FTlRfRlhNTCk7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdGFnZS5zZXRUaXRsZShcIlF14bqjbiBsw70ga2jDoWNoIGjDoG5nXCIpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiZGlzY291bnRtYW5hZ2VtZW50XCI6XG4gICAgICAgICAgICAgICAgICAgIHJvb3QgPSBsb2FkRlhNTChESVNDT1VOVE1BTkFHRU1FTlRfRlhNTCk7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdGFnZS5zZXRUaXRsZShcIlF14bqjbiBsw70ga2h1eeG6v24gbcOjaVwiKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcInBldG1hbmFnZW1lbnRcIjpcbiAgICAgICAgICAgICAgICAgICAgcm9vdCA9IGxvYWRGWE1MKFBFVE1BTkFHRU1FTlRfRlhNTCk7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdGFnZS5zZXRUaXRsZShcIlF14bqjbiBsw70gdGjDuiBjxrBuZ1wiKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcInByb2R1Y3RtYW5hZ2VtZW50XCI6XG4gICAgICAgICAgICAgICAgICAgIHJvb3QgPSBsb2FkRlhNTChQUk9EVUNUTUFOQUdFTUVOVF9GWE1MKTtcbi4uLlxuUGF0aDogc3JjL21haW4vcmVzb3VyY2VzL0ZYTUwvQWRtaW4vRGFzaGJvYXJkLmZ4bWxcbi4uLlxuXG48VkJveCBwcmVmSGVpZ2h0PVwiNTEyLjBcIiBwcmVmV2lkdGg9XCI5OTAuMFwiIHN0eWxlc2hlZXRzPVwiQC4uLy4uL1N0eWxlcy9BZG1pbi9EYXNoYm9hcmQuY3NzXCIgeG1sbnM9XCJodHRwOi8vamF2YWZ4LmNvbS9qYXZhZngvMjMuMC4xXCIgeG1sbnM6Zng9XCJodHRwOi8vamF2YWZ4LmNvbS9meG1sLzFcIiBmeDpjb250cm9sbGVyPVwiY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5Db250cm9sbGVycy5BZG1pbi5EYXNoYm9hcmRDb250cm9sbGVyXCI+XG4gICAgPGNoaWxkcmVuPlxuICAgICAgICA8Zng6aW5jbHVkZSBzb3VyY2U9XCJBZG1pbk1lbnUuZnhtbFwiIC8+XG4gICAgICAgIDxTY3JvbGxQYW5lIGZpdFRvV2lkdGg9XCJ0cnVlXCIgcHJlZkhlaWdodD1cIjQ0Mi4wXCIgcHJlZldpZHRoPVwiOTkwLjBcIiBzdHlsZUNsYXNzPVwiZGFzaGJvYXJkLWNvbnRhaW5lclwiPlxuICAgICAgICAgICAgPGNvbnRlbnQ+XG4gICAgICAgICAgICAgICAgPFZCb3ggc3BhY2luZz1cIjIwLjBcIj5cbiAgICAgICAgICAgICAgICAgICAgPHBhZGRpbmc+XG4gICAgICAgICAgICAgICAgICAgICAgICA8SW5zZXRzIGJvdHRvbT1cIjIwLjBcIiBsZWZ0PVwiMjAuMFwiIHJpZ2h0PVwiMjAuMFwiIHRvcD1cIjIwLjBcIiAvPlxuICAgICAgICAgICAgICAgICAgICA8L3BhZGRpbmc+XG4gICAgICAgICAgICAgICAgICAgIDxjaGlsZHJlbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwhLS0gV2VsY29tZSBTZWN0aW9uIC0tPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEhCb3ggYWxpZ25tZW50PVwiQ0VOVEVSXCIgc3R5bGVDbGFzcz1cIndlbGNvbWUtc2VjdGlvblwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxjaGlsZHJlbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPExhYmVsIHN0eWxlQ2xhc3M9XCJ3ZWxjb21lLXRleHRcIiB0ZXh0PVwiWGluIGNow6BvIFF14bqjbiB0cuG7iyB2acOqblwiIEhCb3guaGdyb3c9XCJBTFdBWVNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxmb250PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb250IG5hbWU9XCJTeXN0ZW0gQm9sZFwiIHNpemU9XCIyNC4wXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZm9udD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxIQm94Lm1hcmdpbj5cbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9jb20vc3RvcmUvYXBwL3BldHN0b3JlL0RBTy9Vc2VyREFPLmphdmFcbnBhY2thZ2UgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5EQU87XG5cbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLk1vZGVscy5FbnRpdGllcy5Vc2VyO1xuaW1wb3J0IG9yZy5taW5kcm90LmpiY3J5cHQuQkNyeXB0O1xuXG5pbXBvcnQgamF2YS5zcWwuKjtcbmltcG9ydCBqYXZhLnV0aWwuQXJyYXlMaXN0O1xuaW1wb3J0IGphdmEudXRpbC5CYXNlNjQ7XG5cbnB1YmxpYyBjbGFzcyBVc2VyREFPIGltcGxlbWVudHMgQmFzZURBTzxVc2VyLCBJbnRlZ2VyPiB7XG4gICAgcHVibGljIHN0YXRpYyBmaW5hbCBpbnQgaXNEdXBsaWNhdGUgPSAtMTtcblxuICAgIHB1YmxpYyBzdGF0aWMgVXNlckRBTyBnZXRJbnN0YW5jZSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBVc2VyREFPKCk7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBTdHJpbmcgZW5jb2RlKFN0cmluZyBwYXNzd29yZCkge1xuLy8gICAgICAgIHJldHVybiBCYXNlNjQuZ2V0RW5jb2RlcigpLmVuY29kZVRvU3RyaW5nKHBhc3N3b3JkLmdldEJ5dGVzKCkpO1xuICAgICAgICByZXR1cm4gQkNyeXB0Lmhhc2hwdyhwYXNzd29yZCwgQkNyeXB0LmdlbnNhbHQoKSk7XG4gICAgfVxuLi4uXG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbm4gPSBEYXRhYmFzZVV0aWwuZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgICAgICAgU3RyaW5nIHNxbCA9IFwiSU5TRVJUIElOVE8gVXNlcnMgKHVzZXJuYW1lLCBwYXNzd29yZCwgcm9sZSwgaW1hZ2VfdXJsLCBpc0FjdGl2ZSkgVkFMVUVTICg/LCA/LCA/LCA/LCA/KVwiO1xuICAgICAgICAgICAgc3RtdCA9IGNvbm4ucHJlcGFyZVN0YXRlbWVudChzcWwsIFN0YXRlbWVudC5SRVRVUk5fR0VORVJBVEVEX0tFWVMpO1xuXG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygxLCBlbnRpdHkuZ2V0VXNlcm5hbWUoKSk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygyLCBlbmNvZGUoZW50aXR5LmdldFBhc3N3b3JkKCkpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDMsIGVudGl0eS5nZXRSb2xlKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoNCwgZW50aXR5LmdldEltYWdlVXJsKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRCb29sZWFuKDUsIGVudGl0eS5pc0FjdGl2ZSgpKTtcblxuICAgICAgICAgICAgaW50IGFmZmVjdGVkUm93cyA9IHN0bXQuZXhlY3V0ZVVwZGF0ZSgpO1xuICAgICAgICAgICAgaWYgKGFmZmVjdGVkUm93cyA9PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRyeSAoUmVzdWx0U2V0IGdlbmVyYXRlZEtleXMgPSBzdG10LmdldEdlbmVyYXRlZEtleXMoKSkge1xuICAgICAgICAgICAgICAgIGlmIChnZW5lcmF0ZS4uLiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfMDFVcWFzZ2tQWTRXRWNibWdTVHpVOFlMIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiRTovSG9jVGFwLzAyX0pBVkEvMDNfUHJvamVjdC9JbnRlcm5ldCBNYW5nZW1lbnQgU3lzdGVtIiwiZm9sZGVyUm9vdCI6IkU6L0hvY1RhcC8wMl9KQVZBLzAzX1Byb2plY3QvSW50ZXJuZXQgTWFuZ2VtZW50IFN5c3RlbSJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInRpbWVzdGFtcCI6IjIwMjUtMDUtMTNUMTI6NTk6NDUuNDM5WiIsInJlc3BvbnNlX3RleHQiOiJMZXQgbWUgY2hlY2sgZm9yIHRoZSBNYWluRnJhbWUgY2xhc3MgYW5kIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiBVc2VyREFPLmxvZ2luOlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6ImM4NWE1M2I0LTVmNmItNDg0MC04ZjljLTE2NWY4NDMyZWRmOSIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfMDFYZ29ZMlhCYzVuZ1lOZXFWQmFLR1JkIiwidG9vbF9uYW1lIjoiY29kZWJhc2UtcmV0cmlldmFsIiwiaW5wdXRfanNvbiI6IntcImluZm9ybWF0aW9uX3JlcXVlc3RcIjogXCJGaW5kIHRoZSBNYWluRnJhbWUgY2xhc3MgdGhhdCBzaG91bGQgYmUgZGlzcGxheWVkIGFmdGVyIHN1Y2Nlc3NmdWwgbG9naW4uIEFsc28gbG9vayBmb3IgYW55IGltcGxlbWVudGF0aW9uIG9mIFVzZXJEQU8ubG9naW4gbWV0aG9kLlwifSIsIm1jcF9zZXJ2ZXJfbmFtZSI6IiIsIm1jcF90b29sX25hbWUiOiIifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IkxldCBtZSBjaGVjayBmb3IgdGhlIE1haW5GcmFtZSBjbGFzczpcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IlRoZSBmb2xsb3dpbmcgY29kZSBzZWN0aW9ucyB3ZXJlIHJldHJpZXZlZDpcblBhdGg6IHNyYy9tYWluL2phdmEvY29tL3N0b3JlL2FwcC9wZXRzdG9yZS9Db250cm9sbGVycy9Mb2dpbkNvbnRyb2xsZXIuamF2YVxuLi4uXG5cbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLkRBTy5Vc2VyREFPO1xuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuREFPLlN0YWZmREFPO1xuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuTW9kZWxzLkVudGl0aWVzLlVzZXI7XG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5Nb2RlbHMuRW50aXRpZXMuU3RhZmY7XG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5TZXNzaW9ucy5TZXNzaW9uTWFuYWdlcjtcbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLlZpZXdzLkFkbWluRmFjdG9yeTtcbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLlZpZXdzLlZpZXdGYWN0b3J5O1xuaW1wb3J0IGRlLmplbnNkLmZ4LmdseXBocy5mb250YXdlc29tZS5Gb250QXdlc29tZUljb247XG5pbXBvcnQgZGUuamVuc2QuZnguZ2x5cGhzLmZvbnRhd2Vzb21lLkZvbnRBd2Vzb21lSWNvblZpZXc7XG5pbXBvcnQgamF2YWZ4LmZ4bWwuRlhNTDtcbmltcG9ydCBqYXZhZnguZnhtbC5Jbml0aWFsaXphYmxlO1xuaW1wb3J0IGphdmFmeC5zY2VuZS5jb250cm9sLio7XG5pbXBvcnQgamF2YWZ4LnNjZW5lLmlucHV0Lk1vdXNlRXZlbnQ7XG5pbXBvcnQgamF2YWZ4LnN0YWdlLlN0YWdlO1xuaW1wb3J0IGphdmFmeC5zY2VuZS5pbWFnZS5JbWFnZTtcbmltcG9ydCBqYXZhZnguc2NlbmUuaW1hZ2UuSW1hZ2VWaWV3O1xuaW1wb3J0IGphdmFmeC5zY2VuZS5wYWludC5JbWFnZVBhdHRlcm47XG5pbXBvcnQgamF2YS51dGlsLk9iamVjdHM7XG4uLi5cblxucHVibGljIGNsYXNzIExvZ2luQ29udHJvbGxlciBpbXBsZW1lbnRzIEluaXRpYWxpemFibGUge1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIEZvbnRBd2Vzb21lSWNvblZpZXcgZXllSWNvbjtcblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBUZXh0RmllbGQgc2hvd1Bhc3N3b3JkO1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIFBhc3N3b3JkRmllbGQgcGFzc3dvcmRGaWVsZDtcblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBUZXh0RmllbGQgdXNlcm5hbWVGaWVsZDtcblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBCdXR0b24gbG9naW5CdXR0b247XG5cbiAgICBARlhNTFxuICAgIHByaXZhdGUgTGFiZWwgZXJyb3JMYWJlbDtcblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBIeXBlcmxpbmsgZm9yZ290UGFzc3dvcmRMaW5rO1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIEltYWdlVmlldyB1c2VySW1hZ2U7XG5cbiAgICBwcml2YXRlIGRvdWJsZSB4LCB5O1xuXG4gICAgVXNlckRBTyB1c2VyREFPID0gbmV3IFVzZXJEQU8oKTtcbiAgICBTdGFmZkRBTyBzdGFmZkRBTyA9IFN0YWZmREFPLmdldEluc3RhbmNlKCk7XG4gICAgcHVibGljIHN0YXRpYyBpbnQgaWRTdGFmZkN1cnJlbnQ7XG4gICAgcHVibGljIHN0YXRpYyBpbnQgaWRBZG1pbkN1cnJlbnQ7XG5cbiAgICBwcml2YXRlIFNlc3Npb25NYW5hZ2VyIHNlc3Npb25NYW5hZ2VyID0gbmV3IFNlc3Npb25NYW5hZ2VyKCk7XG4uLi5cblxuICAgIHByaXZhdGUgdm9pZCBzZXR1cExvZ2luQnV0dG9uKCkge1xuICAgICAgICBsb2dpbkJ1dHRvbi5zZXRPbkFjdGlvbihldmVudCAtPiBoYW5kbGVMb2dpbigpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHZvaWQgc2V0dXBGb3Jnb3RQYXNzd29yZExpbmsoKSB7XG4gICAgICAgIGZvcmdvdFBhc3N3b3JkTGluay5zZXRPbkFjdGlvbihldmVudCAtPiB7XG4gICAgICAgICAgICBTdGFnZSBjdXJyZW50U3RhZ2UgPSAoU3RhZ2UpIHVzZXJuYW1lRmllbGQuZ2V0U2NlbmUoKS5nZXRXaW5kb3coKTtcbiAgICAgICAgICAgIFZpZXdGYWN0b3J5LmdldEluc3RhbmNlKCkuc3dpdGNoQ29udGVudChcImZvcmdvdHBhc3N3b3JkXCIsIGN1cnJlbnRTdGFnZSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSB2b2lkIGhhbmRsZURyYWdnZWQoTW91c2VFdmVudCBldmVudCkge1xuICAgICAgICBTdGFnZSBzdGFnZSA9IChTdGFnZSkgdXNlcm5hbWVGaWVsZC5nZXRTY2VuZSgpLmdldFdpbmRvdygpO1xuICAgICAgICBzdGFnZS5zZXRYKGV2ZW50LmdldFNjcmVlblgoKSAtIHgpO1xuICAgICAgICBzdGFnZS5zZXRZKGV2ZW50LmdldFNjcmVlblkoKSAtIHkpO1xuICAgIH1cblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSB2b2lkIGhhbmRsZVByZXNzZWQoTW91c2VFdmVudCBldmVudCkge1xuICAgICAgICB4ID0gZXZlbnQuZ2V0U2NyZWVuWCgpO1xuICAgICAgICB5ID0gZXZlbnQuZ2V0U2NyZWVuWSgpO1xuICAgIH1cbi4uLlxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBUw6xtIHVzZXIgdGhlbyB1c2VybmFtZVxuICAgICAgICAgICAgVXNlciB1c2VyID0gdXNlckRBTy5maW5kQnlVc2VybmFtZSh1c2VybmFtZSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmKHVzZXIgPT0gbnVsbCB8fCB1c2VyLmdldFVzZXJuYW1lKCkgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIENvbnRyb2xsZXJVdGlscy5zaG93QWxlcnQoQWxlcnQuQWxlcnRUeXBlLkVSUk9SLCBcIkzhu5dpXCIsIFwiVMOqbiDEkcSDbmcgbmjhuq1wIGtow7RuZyDEkcO6bmdcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBLaeG7g20gdHJhIHTDqm4gxJHEg25nIG5o4bqtcFxuICAgICAgICAgICAgaWYgKCF1c2VyLmdldFVzZXJuYW1lKCkuZXF1YWxzKHVzZXJuYW1lKSkge1xuICAgICAgICAgICAgICAgIENvbnRyb2xsZXJVdGlscy5zaG93QWxlcnQoQWxlcnQuQWxlcnRUeXBlLkVSUk9SLCBcIkzhu5dpXCIsIFwiVMOqbiDEkcSDbmcgbmjhuq1wIGtow7RuZyDEkcO6bmdcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBLaeG7g20gdHJhIG3huq10IGto4bqpdVxuICAgICAgICAgICAgaWYoIUJDcnlwdC5jaGVja3B3KHBhc3N3b3JkLCB1c2VyLmdldFBhc3N3b3JkKCkpKSB7XG4gICAgICAgICAgICAgICAgQ29udHJvbGxlclV0aWxzLnNob3dBbGVydChBbGVydC5BbGVydFR5cGUuRVJST1IsIFwiTOG7l2lcIiwgXCJN4bqtdCBraOG6qXUga2jDtG5nIMSRw7puZ1wiKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNlc3Npb25NYW5hZ2VyLnNldEN1cnJlbnRVc2VyKHVzZXIpO1xuXG4gICAgICAgICAgICBTdGFnZSBjdXJyZW50U3RhZ2UgPSAoU3RhZ2UpIHVzZXJuYW1lRmllbGQuZ2V0U2NlbmUoKS5nZXRXaW5kb3coKTtcblxuICAgICAgICAgICAgaWYodXNlci5nZXRSb2xlKCkuZXF1YWxzKFVzZXIuUk9MRV9BRE1JTikpIHtcbiAgICAgICAgICAgICAgICBpZEFkbWluQ3VycmVudCA9IHVzZXIuZ2V0VXNlcklkKCk7XG4gICAgICAgICAgICAgICAgQWRtaW5GYWN0b3J5LmdldEluc3RhbmNlKCkuc3dpdGNoQ29udGVudChcImRhc2hib2FyZFwiLCBjdXJyZW50U3RhZ2UpO1xuICAgICAgICAgICAgfSBlbHNlIGlmKHVzZXIuZ2V0Um9sZSgpLmVxdWFscyhVc2VyLlJPTEVfVVNFUikpIHtcbiAgICAgICAgICAgICAgICBpZFN0YWZmQ3VycmVudCA9IHVzZXIuZ2V0VXNlcklkKCk7XG4gICAgICAgICAgICAgICAgU3RhZmYgc3RhZmYgPSBzdGFmZkRBTy5maW5kQnlVc2VySWQodXNlci5nZXRVc2VySWQoKSk7XG4gICAgICAgICAgICAgICAgaWYgKHN0YWZmICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbk1hbmFnZXIuc2V0Q3VycmVudFN0YWZmKHN0YWZmKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgVmlld0ZhY3RvcnkuZ2V0SW5zdGFuY2UoKS5zd2l0Y2hDb250ZW50KFwiZGFzaGJvYXJkXCIsIGN1cnJlbnRTdGFnZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIENvbnRyb2xsZXJVdGlscy5zaG93QWxlcnQoQWxlcnQuQWxlcnRUeXBlLkVSUk9SLCBcIkzhu5dpXCIsIFwiVmFpIHRyw7IgbmfGsOG7nWkgZMO5bmcga2jDtG5nIGjhu6NwIGzhu4dcIik7XG4gICAgICAgICAgICAgICAgc2Vzc2lvbk1hbmFnZXIuY2xlYXIoKTtcbiAgICAgICAgICAgIH1cbi4uLlxuUGF0aDogc3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vTG9naW4uamF2YVxuLypcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvTGljZW5zZXMvbGljZW5zZS1kZWZhdWx0LnR4dCB0byBjaGFuZ2UgdGhpcyBsaWNlbnNlXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0dVSUZvcm1zL0pGcmFtZS5qYXZhIHRvIGVkaXQgdGhpcyB0ZW1wbGF0ZVxuICovXG5wYWNrYWdlIGludGVybmV0Lm1hbmdlbWVudC5zeXN0ZW07XG5cbmltcG9ydCBEQU8uVXNlckRBTztcbmltcG9ydCBNb2RlbC5Vc2VyO1xuaW1wb3J0IGphdmF4LnN3aW5nLkpPcHRpb25QYW5lO1xuLi4uXG5cbiAgICBwcml2YXRlIHZvaWQgYnRuTG9naW5BY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuTG9naW5BY3Rpb25QZXJmb3JtZWRcbiAgICAgICAgLy8gVE9ETyBhZGQgeW91ciBoYW5kbGluZyBjb2RlIGhlcmU6XG4gICAgICAgIGlmKHZhbGlkYXRlRmllbGRzKCkpIHtcbiAgICAgICAgICAgIHRyeXtcbiAgICAgICAgICAgICAgICBTdHJpbmcgdXNlcm5hbWUgPSB0eHRVc2VyTmFtZS5nZXRUZXh0KCkudHJpbSgpO1xuICAgICAgICAgICAgICAgIFN0cmluZyBwYXNzd29yZCA9IHR4dFBhc3N3b3JkLmdldFRleHQoKS50cmltKCk7XG5cbiAgICAgICAgICAgICAgICBVc2VyIHVzZXIgPSBudWxsO1xuICAgICAgICAgICAgICAgIGJvb2xlYW4gaXNTdWNjZXNzID0gVXNlckRBTy5sb2dpbih1c2VybmFtZSwgcGFzc3dvcmQpO1xuXG4gICAgICAgICAgICAgICAgaWYoaXNTdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKHRoaXMsIFwixJDEg25nIG5o4bqtcCB0aMOgbmggY8O0bmchXCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuSU5GT1JNQVRJT05fTUVTU0FHRSk7XG4vLyAgICAgICAgICAgICAgICAgICAgbmV3IE1haW5GcmFtZSgpLnNldFZpc2libGUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcG9zZSgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKHRoaXMsIFwiU2FpIHTDqm4gxJHEg25nIG5o4bqtcCBob+G6t2MgbeG6rXQga2jhuql1LlwiLCBcIkzhu5dpXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2goRXhjZXB0aW9uIGV4KSB7XG4gICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXCJM4buXaTogXCIgKyBleC5nZXRNZXNzYWdlKCksIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuXG4gICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuTG9naW5BY3Rpb25QZXJmb3JtZWRcblxuICAgIHByaXZhdGUgdm9pZCBidG5Gb3Jnb3RQYXNzd29yZEFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5Gb3Jnb3RQYXNzd29yZEFjdGlvblBlcmZvcm1lZFxuICAgICAgICAvLyBPcGVuIHRoZSBGb3Jnb3RQYXNzd29yZCBkaWFsb2dcbiAgICAgICAgRm9yZ290UGFzc3dvcmQgZm9yZ290UGFzc3dvcmREaWFsb2cgPSBuZXcgRm9yZ290UGFzc3dvcmQodGhpcywgdHJ1ZSk7XG4gICAgICAgIGZvcmdvdFBhc3N3b3JkRGlhbG9nLnNldFZpc2libGUodHJ1ZSk7XG4gICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuRm9yZ290UGFzc3dvcmRBY3Rpb25QZXJmb3JtZWRcblxuICAgIHByaXZhdGUgdm9pZCBidG5FeGl0QWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkV4aXRBY3Rpb25QZXJmb3JtZWRcbiAgICAgICAgLy8gVE9ETyBhZGQgeW91ciBoYW5kbGluZyBjb2RlIGhlcmU6XG4gICAgICAgIGludCByZXN1bHQgPSBKT3B0aW9uUGFuZS5zaG93Q29uZmlybURpYWxvZyhudWxsLCBcIkLhuqFuIGPDsyBjaOG6r2MgY2jhuq9uIG114buRbiB0aG/DoXQga2jDtG5nP1wiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLllFU19OT19PUFRJT04sIEpPcHRpb25QYW5lLlFVRVNUSU9OX01FU1NBR0UpO1xuXG4gICAgICAgIGlmIChyZXN1bHQgPT0gSk9wdGlvblBhbmUuWUVTX09QVElPTikge1xuICAgICAgICAgICAgU3lzdGVtLmV4aXQoMCk7XG4gICAgICAgIH1cbiAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5FeGl0QWN0aW9uUGVyZm9ybWVkXG5cbiAgICBwcml2YXRlIHZvaWQgYnRuU2lnbnVwQWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0blNpZ251cEFjdGlvblBlcmZvcm1lZFxuICAgICAgICAvLyBUT0RPIGFkZCB5b3VyIGhhbmRsaW5nIGNvZGUgaGVyZTpcbiAgICAgICAgc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgICAgIG5ldyBTaWduVXAoKS5zZXRWaXNpYmxlKHRydWUpO1xuICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0blNpZ251cEFjdGlvblBlcmZvcm1lZFxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL2NvbS9zdG9yZS9hcHAvcGV0c3RvcmUvQ29udHJvbGxlcnMvQWRtaW4vRGFzaGJvYXJkQ29udHJvbGxlci5qYXZhXG4uLi5cblxuICAgIHByaXZhdGUgdm9pZCBuYXZpZ2F0ZVRvKFN0cmluZyB2aWV3TmFtZSkge1xuICAgICAgICBTdGFnZSBjdXJyZW50U3RhZ2UgPSAoU3RhZ2UpIGxvZ291dEJ1dHRvbi5nZXRTY2VuZSgpLmdldFdpbmRvdygpO1xuICAgICAgICBBZG1pbkZhY3RvcnkuZ2V0SW5zdGFuY2UoKS5zd2l0Y2hDb250ZW50KHZpZXdOYW1lLCBjdXJyZW50U3RhZ2UpO1xuICAgIH1cblxuICAgIHByaXZhdGUgdm9pZCBoYW5kbGVMb2dvdXQoKSB7XG4gICAgICAgIC8vIFN0b3AgYXV0by1yZWZyZXNoIGlmIGFjdGl2ZVxuICAgICAgICBzdG9wQXV0b1JlZnJlc2goKTtcblxuICAgICAgICBTdGFnZSBjdXJyZW50U3RhZ2UgPSAoU3RhZ2UpIGxvZ291dEJ1dHRvbi5nZXRTY2VuZSgpLmdldFdpbmRvdygpO1xuICAgICAgICBpZiAoQ29udHJvbGxlclV0aWxzLnNob3dDb25maXJtYXRpb25BbmRXYWl0KFwixJDEg25nIHh14bqldFwiLCBcIkLhuqFuIGPDsyBjaOG6r2MgY2jhuq9uIG114buRbiDEkcSDbmcgeHXhuqV0IGtow7RuZz9cXG5OaOG6pW4gT0sgxJHhu4MgeMOhYyBuaOG6rW4uXCIpKSB7XG4gICAgICAgICAgICBTZXNzaW9uTWFuYWdlci5jbGVhcigpO1xuICAgICAgICAgICAgVmlld0ZhY3RvcnkuZ2V0SW5zdGFuY2UoKS5zd2l0Y2hDb250ZW50KFwibG9naW5cIiwgY3VycmVudFN0YWdlKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG59XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvY29tL3N0b3JlL2FwcC9wZXRzdG9yZS9QZXRTdG9yZUFwcGxpY2F0aW9uLmphdmFcbnBhY2thZ2UgY29tLnN0b3JlLmFwcC5wZXRzdG9yZTtcblxuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuTW9kZWxzLkRhdGFiYXNlTWFuYWdlcjtcbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLlZpZXdzLk1vZGVsVmlldztcbmltcG9ydCBqYXZhZnguYXBwbGljYXRpb24uQXBwbGljYXRpb247XG5pbXBvcnQgamF2YWZ4LmZ4bWwuRlhNTExvYWRlcjtcbmltcG9ydCBqYXZhZnguc2NlbmUuUGFyZW50O1xuaW1wb3J0IGphdmFmeC5zY2VuZS5TY2VuZTtcbmltcG9ydCBqYXZhZnguc3RhZ2UuU3RhZ2U7XG5cbmltcG9ydCBqYXZhLmlvLklPRXhjZXB0aW9uO1xuXG5wdWJsaWMgY2xhc3MgUGV0U3RvcmVBcHBsaWNhdGlvbiBleHRlbmRzIEFwcGxpY2F0aW9uIHtcbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgdm9pZCBzdGFydChTdGFnZSBwcmltYXJ5U3RhZ2UpIHtcbiAgICAgICAgRGF0YWJhc2VNYW5hZ2VyLmNvbm5lY3QoKTtcbiAgICAgICAgTW9kZWxWaWV3LmdldEluc3RhbmNlKCkuZ2V0Vmlld0ZhY3RvcnkoKS5zaG93V2luZG93KFwibG9naW5cIik7XG4uLi5cblBhdGg6IHNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL0ZvcmdvdFBhc3N3b3JkLmphdmFcbi8qXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0xpY2Vuc2VzL2xpY2Vuc2UtZGVmYXVsdC50eHQgdG8gY2hhbmdlIHRoaXMgbGljZW5zZVxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9HVUlGb3Jtcy9KRnJhbWUuamF2YSB0byBlZGl0IHRoaXMgdGVtcGxhdGVcbiAqL1xucGFja2FnZSBpbnRlcm5ldC5tYW5nZW1lbnQuc3lzdGVtO1xuXG5pbXBvcnQgREFPLlN1YnNjcmliZXJEQU87XG5pbXBvcnQgTW9kZWwuU3Vic2NyaWJlcjtcbmltcG9ydCBqYXZheC5zd2luZy5KT3B0aW9uUGFuZTtcbmltcG9ydCBpbnRlcm5ldC5tYW5nZW1lbnQuc3lzdGVtLkxvZ2luO1xuLi4uXG5cbiAgICBwcml2YXRlIHZvaWQgYnRuQ2hhbmdlQWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkNoYW5nZUFjdGlvblBlcmZvcm1lZFxuICAgICAgICBpZiAodmFsaWRhdGVGaWVsZHMoKSAmJiBjdXJyZW50U3Vic2NyaWJlciAhPSBudWxsKSB7XG4gICAgICAgICAgICBTdHJpbmcgbmV3UGFzc3dvcmQgPSB0eHRQYXNzd29yZC5nZXRUZXh0KCk7XG5cbiAgICAgICAgICAgIGJvb2xlYW4gc3VjY2VzcyA9IFN1YnNjcmliZXJEQU8udXBkYXRlUGFzc3dvcmQoY3VycmVudFN1YnNjcmliZXIuZ2V0VXNlcl9pZCgpLCBuZXdQYXNzd29yZCk7XG5cbiAgICAgICAgICAgIGlmIChzdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXCLEkOG7lWkgbeG6rXQga2jhuql1IHRow6BuaCBjw7RuZyEgVnVpIGzDsm5nIMSRxINuZyBuaOG6rXAgbOG6oWkuXCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuSU5GT1JNQVRJT05fTUVTU0FHRSk7XG4gICAgICAgICAgICAgICAgbmV3IExvZ2luKCkuc2V0VmlzaWJsZSh0cnVlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXCLEkOG7lWkgbeG6rXQga2jhuql1IHRo4bqldCBi4bqhaSEgVnVpIGzDsm5nIHRo4butIGzhuqFpIHNhdS5cIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0bkNoYW5nZUFjdGlvblBlcmZvcm1lZFxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL2NvbS9zdG9yZS9hcHAvcGV0c3RvcmUvQ29udHJvbGxlcnMvQWRtaW4vQWRtaW5NZW51Q29udHJvbGxlci5qYXZhXG4uLi5cblxuICAgICAgICBNZW51SXRlbSBsb2dvdXRNZW51SXRlbSA9IG5ldyBNZW51SXRlbShcIsSQxINuZyB4deG6pXRcIik7XG4gICAgICAgIGxvZ291dE1lbnVJdGVtLnNldE9uQWN0aW9uKGUgLT4gaGFuZGxlTG9nb3V0KG51bGwpKTtcbiAgICAgICAgbWVudUxvZ291dC5nZXRJdGVtcygpLmFkZChsb2dvdXRNZW51SXRlbSk7XG4gICAgfVxuXG4gICAgQEZYTUxcbiAgICB2b2lkIGhhbmRsZUxvZ291dChBY3Rpb25FdmVudCBldmVudCkge1xuICAgICAgICBTdGFnZSBjdXJyZW50U3RhZ2UgPSAoU3RhZ2UpIHJvb3QuZ2V0U2NlbmUoKS5nZXRXaW5kb3coKTtcbiAgICAgICAgaWYgKENvbnRyb2xsZXJVdGlscy5zaG93Q29uZmlybWF0aW9uQW5kV2FpdChcIsSQxINuZyB4deG6pXRcIiwgXCJC4bqhbiBjw7MgY2jhuq9jIGNo4bqvbiBtdeG7kW4gxJHEg25nIHh14bqldCBraMO0bmc/XFxuTmjhuqVuIE9LIMSR4buDIHjDoWMgbmjhuq1uLlwiKSkge1xuICAgICAgICAgICAgU2Vzc2lvbk1hbmFnZXIuY2xlYXIoKTtcbiAgICAgICAgICAgIFZpZXdGYWN0b3J5LmdldEluc3RhbmNlKCkuc3dpdGNoQ29udGVudChcImxvZ2luXCIsIGN1cnJlbnRTdGFnZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBDb250cm9sbGVyVXRpbHMuc2hvd0FsZXJ0KEFsZXJ0LkFsZXJ0VHlwZS5JTkZPUk1BVElPTiwgXCJUaMO0bmcgYsOhb1wiLCBcIsSQxINuZyB4deG6pXQga2jDtG5nIHRow6BuaCBjw7RuZ1wiKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi4uLlxuUGF0aDogc3JjL0RBTy9Vc2VyREFPLmphdmFcbi8qXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0xpY2Vuc2VzL2xpY2Vuc2UtZGVmYXVsdC50eHQgdG8gY2hhbmdlIHRoaXMgbGljZW5zZVxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NsYXNzLmphdmEgdG8gZWRpdCB0aGlzIHRlbXBsYXRlXG4gKi9cbnBhY2thZ2UgREFPO1xuXG5pbXBvcnQgTW9kZWwuVXNlcjtcbmltcG9ydCBqYXZhLnV0aWwuTGlzdDtcblxuLyoqXG4gKlxuICogQGF1dGhvciBOZ29jIFRoYW9cbiAqL1xucHVibGljIGNsYXNzIFVzZXJEQU97XG5cbiAgICBwdWJsaWMgc3RhdGljIHZvaWQgaW5zZXJ0KFVzZXIgb2JqKSB7XG4gICAgICAgIFxuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgdm9pZCB1cGRhdGUoVXNlciBvYmopIHtcbiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpOyAvLyBHZW5lcmF0ZWQgZnJvbSBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ29kZS9HZW5lcmF0ZWRNZXRob2RCb2R5XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyB2b2lkIGRlbGV0ZShpbnQgaWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpOyAvLyBHZW5lcmF0ZWQgZnJvbSBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ29kZS9HZW5lcmF0ZWRNZXRob2RCb2R5XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBVc2VyIGdldEJ5SWQoaW50IGlkKSB7XG4gICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbihcIk5vdCBzdXBwb3J0ZWQgeWV0LlwiKTsgLy8gR2VuZXJhdGVkIGZyb20gbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NvZGUvR2VuZXJhdGVkTWV0aG9kQm9keVxuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxVc2VyPiBnZXRBbGwoKSB7XG4gICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbihcIk5vdCBzdXBwb3J0ZWQgeWV0LlwiKTsgLy8gR2VuZXJhdGVkIGZyb20gbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NvZGUvR2VuZXJhdGVkTWV0aG9kQm9keVxuICAgIH1cbiAgICBcbn1cbi4uLlxuUGF0aDogc3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vQWRtaW4vRGFzaGJvYXJkLmphdmFcbi4uLlxuXG4vKipcbiAqXG4gKiBAYXV0aG9yIE5nb2MgVGhhb1xuICovXG5wdWJsaWMgY2xhc3MgRGFzaGJvYXJkIGV4dGVuZHMgamF2YXguc3dpbmcuSkZyYW1lIHtcblxuICAgIFVzZXIgYWRtaW4gPSBVc2VyU2Vzc2lvbi5nZXRDdXJyZW50VXNlcigpO1xuICAgIFxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgbmV3IGZvcm0gRGFzaGJvYXJkXG4gICAgICovXG4gICAgcHVibGljIERhc2hib2FyZCgpIHtcbiAgICAgICAgaW5pdENvbXBvbmVudHMoKTtcbiAgICAgICAgc2V0dXBIZWxsbygpO1xuICAgICAgICBzZXR1cFVzZXJuYW1lKCk7XG4gICAgfVxuICAgIFxuICAgIHByaXZhdGUgdm9pZCBzZXR1cEhlbGxvKCkge1xuICAgICAgICBMb2NhbFRpbWUgbm93ID0gTG9jYWxUaW1lLm5vdygpO1xuICAgICAgICBpbnQgaG91ciA9IG5vdy5nZXRIb3VyKCk7XG4gICAgICAgIFxuICAgICAgICBTdHJpbmcgZ3JlZXRpbmc7XG5cbiAgICAgICAgaWYgKGhvdXIgPj0gNSAmJiBob3VyIDwgMTEpIHtcbiAgICAgICAgICAgIGdyZWV0aW5nID0gXCJDaMOgbyBideG7lWkgc8OhbmcsXCI7XG4gICAgICAgIH0gZWxzZSBpZiAoaG91ciA+PSAxMSAmJiBob3VyIDwgMTUpIHtcbiAgICAgICAgICAgIGdyZWV0aW5nID0gXCJDaMOgbyBideG7lWkgdHLGsGEsXCI7XG4gICAgICAgIH0gZWxzZSBpZiAoaG91ciA+PSAxNSAmJiBob3VyIDwgMTcpIHtcbiAgICAgICAgICAgIGdyZWV0aW5nID0gXCJDaMOgbyBideG7lWkgY2hp4buBdSxcIjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGdyZWV0aW5nID0gXCJDaMOgbyBideG7lWkgdOG7kWksXCI7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGxiSGVsbG8uc2V0VGV4dChncmVldGluZyk7XG4gICAgfVxuICAgIFxuICAgIHByaXZhdGUgdm9pZCBzZXR1cFVzZXJuYW1lKCkge1xuICAgICAgICBsYlVzZXJOYW1lLnNldFRleHQoYWRtaW4uZ2V0VXNlcm5hbWUoKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgaXMgY2FsbGVkIGZyb20gd2l0aGluIHRoZSBjb25zdHJ1Y3RvciB0byBpbml0aWFsaXplIHRoZSBmb3JtLlxuICAgICAqIFdBUk5JTkc6IERvIE5PVCBtb2RpZnkgdGhpcyBjb2RlLiBUaGUgY29udGVudCBvZiB0aGlzIG1ldGhvZCBpcyBhbHdheXNcbiAgICAgKiByZWdlbmVyYXRlZCBieSB0aGUgRm9ybSBFZGl0b3IuXG4gICAgICovXG4gICAgQFN1cHByZXNzV2FybmluZ3MoXCJ1bmNoZWNrZWRcIilcbiAgICAvLyA8ZWRpdG9yLWZvbGQgZGVmYXVsdHN0YXRlPVwiY29sbGFwc2VkXCIgZGVzYz1cIkdlbmVyYXRlZCBDb2RlXCI+Ly9HRU4tQkVHSU46aW5pdENvbXBvbmVudHNcbiAgICBwcml2YXRlIHZvaWQgaW5pdENvbXBvbmVudHMoKSB7XG5cbiAgICAgICAgYnRuVXNlciA9IG5ldyBqYXZheC5zd2luZy5KQnV0dG9uKCk7XG4gICAgICAgIGJ0bkN1c3RvbWVyID0gbmV3IGphdmF4LnN3aW5nLkpCdXR0b24oKTtcbiAgICAgICAgYnRuUGxhbiA9IG5ldyBqYXZheC5zd2luZy5KQnV0dG9uKCk7XG4gICAgICAgIGJ0bkNvbnRyYWN0ID0gbmV3IGphdmF4LnN3aW5nLkpCdXR0b24oKTtcbiAgICAgICAgYnRuSGlzdG9yeSA9IG5ldyBqYXZheC5zd2luZy5KQnV0dG9uKCk7XG4gICAgICAgIGJ0blN0YXRpc3RpYyA9IG5ldyBqYXZheC5zd2luZy5KQnV0dG9uKCk7XG4gICAgICAgIGJ0bkV4aXQgPSBuZXcgamF2YXguc3dpbmcuSkJ1dHRvbigpO1xuICAgICAgICBqU2VwYXJhdG9yMSA9IG5ldyBqYXZheC5zd2luZy5KU2VwYXJhdG9yKCk7XG4gICAgICAgIGxiVXNlck5hbWUgPSBuZXcgamF2YXguc3dpbmcuSkxhYmVsKCk7XG4gICAgICAgIGxiSGVsbG8gPSBuZXcgamF2YXguc3dpbmcuSkxhYmVsKCk7XG5cbiAgICAgICAgc2V0RGVmYXVsdENsb3NlT3BlcmF0aW9uKGphdmF4LnN3aW5nLldpbmRvd0NvbnN0YW50cy5FWElUX09OX0NMT1NFKTtcblxuICAgICAgICBidG5Vc2VyLnNldEZvbnQobmV3IGphdmEuYXd0LkZvbnQoXCJBcmlhbFwiLCAxLCAyNCkpOyAvLyBOT0kxOE5cbiAgICAgICAgYnRuVXNlci5zZXRJY29uKG5ldyBqYXZheC5zd2luZy5JbWFnZUljb24oZ2V0Q2xhc3MoKS5nZXRSZXNvdXJjZShcIi9JbWFnZXMvdXNlci5wbmdcIikpKTsgLy8gTk9JMThOXG4gICAgICAgIGJ0blVzZXIuc2V0VGV4dChcIlF14bqjbiBsw70gbmfGsOG7nWkgZMO5bmdcIik7XG4gICAgICAgIGJ0blVzZXIuc2V0Q3Vyc29yKG5ldyBqYXZhLmF3dC5DdXJzb3IoamF2YS5hd3QuQ3Vyc29yLkhBTkRfQ1VSU09SKSk7XG4gICAgICAgIGJ0blVzZXIuc2V0SG9yaXpvbnRhbEFsaWdubWVudChqYXZheC5zd2luZy5Td2luZ0NvbnN0YW50cy5MRUZUKTtcbiAgICAgICAgYnRuVXNlci5hZGRBY3Rpb25MaXN0ZW5lcihuZXcgamF2YS5hd3QuZXZlbnQuQWN0aW9uTGlzdGVuZXIoKSB7XG4gICAgICAgICAgICBwdWJsaWMgdm9pZCBhY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7XG4gICAgICAgICAgICAgICAgYnRuVXNlckFjdGlvblBlcmZvcm1lZChldnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbi4uLlxuXG4gICAgcHJpdmF0ZSB2b2lkIGJ0blN0YXRpc3RpY0FjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5TdGF0aXN0aWNBY3Rpb25QZXJmb3JtZWRcbiAgICAgICAgLy8gVE9ETyBhZGQgeW91ciBoYW5kbGluZyBjb2RlIGhlcmU6XG4gICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuU3RhdGlzdGljQWN0aW9uUGVyZm9ybWVkXG5cbiAgICBwcml2YXRlIHZvaWQgYnRuRXhpdEFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5FeGl0QWN0aW9uUGVyZm9ybWVkXG4gICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxuICAgICAgICBpbnQgcmVzdWx0ID0gSk9wdGlvblBhbmUuc2hvd0NvbmZpcm1EaWFsb2cobnVsbCwgXCJC4bqhbiBjw7MgY2jhuq9jIGNo4bqvbiBtdeG7kW4gdGhvw6F0IGtow7RuZz9cIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5ZRVNfTk9fT1BUSU9OLCBKT3B0aW9uUGFuZS5RVUVTVElPTl9NRVNTQUdFKTtcblxuICAgICAgICBpZiAocmVzdWx0ID09IEpPcHRpb25QYW5lLllFU19PUFRJT04pIHtcbiAgICAgICAgICAgIFN5c3RlbS5leGl0KDApO1xuICAgICAgICB9XG4gICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuRXhpdEFjdGlvblBlcmZvcm1lZFxuLi4uXG4gICAgICAgIC8vPC9lZGl0b3ItZm9sZD5cblxuICAgICAgICAvKiBDcmVhdGUgYW5kIGRpc3BsYXkgdGhlIGZvcm0gKi9cbiAgICAgICAgamF2YS5hd3QuRXZlbnRRdWV1ZS5pbnZva2VMYXRlcihuZXcgUnVubmFibGUoKSB7XG4gICAgICAgICAgICBwdWJsaWMgdm9pZCBydW4oKSB7XG4gICAgICAgICAgICAgICAgbmV3IERhc2hib2FyZCgpLnNldFZpc2libGUodHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFZhcmlhYmxlcyBkZWNsYXJhdGlvbiAtIGRvIG5vdCBtb2RpZnkvL0dFTi1CRUdJTjp2YXJpYWJsZXNcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpCdXR0b24gYnRuQ29udHJhY3Q7XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KQnV0dG9uIGJ0bkN1c3RvbWVyO1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkJ1dHRvbiBidG5FeGl0O1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkJ1dHRvbiBidG5IaXN0b3J5O1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkJ1dHRvbiBidG5QbGFuO1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkJ1dHRvbiBidG5TdGF0aXN0aWM7XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KQnV0dG9uIGJ0blVzZXI7XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KU2VwYXJhdG9yIGpTZXBhcmF0b3IxO1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkxhYmVsIGxiSGVsbG87XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KTGFiZWwgbGJVc2VyTmFtZTtcbiAgICAvLyBFbmQgb2YgdmFyaWFibGVzIGRlY2xhcmF0aW9uLy9HRU4tRU5EOnZhcmlhYmxlc1xufVxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL2NvbS9zdG9yZS9hcHAvcGV0c3RvcmUvREFPL1VzZXJEQU8uamF2YVxucGFja2FnZSBjb20uc3RvcmUuYXBwLnBldHN0b3JlLkRBTztcblxuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuTW9kZWxzLkVudGl0aWVzLlVzZXI7XG5pbXBvcnQgb3JnLm1pbmRyb3QuamJjcnlwdC5CQ3J5cHQ7XG5cbmltcG9ydCBqYXZhLnNxbC4qO1xuaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7XG5pbXBvcnQgamF2YS51dGlsLkJhc2U2NDtcblxucHVibGljIGNsYXNzIFVzZXJEQU8gaW1wbGVtZW50cyBCYXNlREFPPFVzZXIsIEludGVnZXI+IHtcbiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIGludCBpc0R1cGxpY2F0ZSA9IC0xO1xuXG4gICAgcHVibGljIHN0YXRpYyBVc2VyREFPIGdldEluc3RhbmNlKCkge1xuICAgICAgICByZXR1cm4gbmV3IFVzZXJEQU8oKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIFN0cmluZyBlbmNvZGUoU3RyaW5nIHBhc3N3b3JkKSB7XG4vLyAgICAgICAgcmV0dXJuIEJhc2U2NC5nZXRFbmNvZGVyKCkuZW5jb2RlVG9TdHJpbmcocGFzc3dvcmQuZ2V0Qnl0ZXMoKSk7XG4gICAgICAgIHJldHVybiBCQ3J5cHQuaGFzaHB3KHBhc3N3b3JkLCBCQ3J5cHQuZ2Vuc2FsdCgpKTtcbiAgICB9XG5cbi8vICAgIHB1YmxpYyBzdGF0aWMgU3RyaW5nIGRlY29kZShTdHJpbmcgcGFzc3dvcmQpIHtcbi8vICAgICAgICByZXR1cm4gbmV3IFN0cmluZyhCYXNlNjQuZ2V0RGVjb2RlcigpLmRlY29kZShwYXNzd29yZCkpO1xuLy8gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBib29sZWFuIHZlcmlmeShTdHJpbmcgcGFzc3dvcmQsIFN0cmluZyBoYXNoZWQpIHtcbiAgICAgICAgcmV0dXJuIEJDcnlwdC5jaGVja3B3KHBhc3N3b3JkLCBoYXNoZWQpO1xuICAgIH1cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBpbnQgaW5zZXJ0KFVzZXIgZW50aXR5KSB7XG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuICAgICAgICBSZXN1bHRTZXQgcnMgPSBudWxsO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25uID0gRGF0YWJhc2VVdGlsLmdldENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgIFN0cmluZyBzcWwgPSBcIklOU0VSVCBJTlRPIFVzZXJzICh1c2VybmFtZSwgcGFzc3dvcmQsIHJvbGUsIGltYWdlX3VybCwgaXNBY3RpdmUpIFZBTFVFUyAoPywgPywgPywgPywgPylcIjtcbiAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsLCBTdGF0ZW1lbnQuUkVUVVJOX0dFTkVSQVRFRF9LRVlTKTtcblxuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMSwgZW50aXR5LmdldFVzZXJuYW1lKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMiwgZW5jb2RlKGVudGl0eS5nZXRQYXNzd29yZCgpKSk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygzLCBlbnRpdHkuZ2V0Um9sZSgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDQsIGVudGl0eS5nZXRJbWFnZVVybCgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0Qm9vbGVhbig1LCBlbnRpdHkuaXNBY3RpdmUoKSk7XG5cbiAgICAgICAgICAgIGludCBhZmZlY3RlZFJvd3MgPSBzdG10LmV4ZWN1dGVVcGRhdGUoKTtcbiAgICAgICAgICAgIGlmIChhZmZlY3RlZFJvd3MgPT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0cnkgKFJlc3VsdFNldCBnZW5lcmF0ZWRLZXlzID0gc3RtdC5nZXRHZW5lcmF0ZWRLZXlzKCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoZ2VuZXJhdGVkS2V5cy5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdlbmVyYXRlZEtleXMuZ2V0SW50KDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgRGF0YWJhc2VVdGlsLmNsb3NlUmVzb3VyY2VzKHJzLCBzdG10LCBjb25uKTtcbiAgICAgICAgfVxuICAgIH1cbi4uLlxuXG4gICAgcHVibGljIFVzZXIgZmluZEJ5VXNlcm5hbWUoU3RyaW5nIHVzZXJuYW1lKSB7XG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuICAgICAgICBSZXN1bHRTZXQgcnMgPSBudWxsO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25uID0gRGF0YWJhc2VVdGlsLmdldENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgIFN0cmluZyBzcWwgPSBcIlNFTEVDVCAqIEZST00gVXNlcnMgV0hFUkUgdXNlcm5hbWUgPSA/XCI7XG4gICAgICAgICAgICBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHNxbCk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygxLCB1c2VybmFtZSk7XG4gICAgICAgICAgICBycyA9IHN0bXQuZXhlY3V0ZVF1ZXJ5KCk7XG5cbiAgICAgICAgICAgIGlmIChycy5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICBVc2VyIHVzZXIgPSBuZXcgVXNlcigpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0VXNlcklkKHJzLmdldEludChcInVzZXJfaWRcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0VXNlcm5hbWUocnMuZ2V0U3RyaW5nKFwidXNlcm5hbWVcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0UGFzc3dvcmQocnMuZ2V0U3RyaW5nKFwicGFzc3dvcmRcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0Um9sZShycy5nZXRTdHJpbmcoXCJyb2xlXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldEltYWdlVXJsKHJzLmdldFN0cmluZyhcImltYWdlX3VybFwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRBY3RpdmUocnMuZ2V0Qm9vbGVhbihcImlzQWN0aXZlXCIpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdXNlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBEYXRhYmFzZVV0aWwuY2xvc2VSZXNvdXJjZXMocnMsIHN0bXQsIGNvbm4pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHB1YmxpYyBVc2VyIGZpbmRCeUVtYWlsKFN0cmluZyBlbWFpbCkge1xuICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgICAgICBQcmVwYXJlZFN0YXRlbWVudCBzdG10ID0gbnVsbDtcbiAgICAgICAgUmVzdWx0U2V0IHJzID0gbnVsbDtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gS2nhu4NtIHRyYSBlbWFpbCBjw7MgdOG7k24gdOG6oWkgdHJvbmcgYuG6o25nIFN0YWZmcyBraMO0bmdcbiAgICAgICAgICAgIGNvbm4gPSBEYXRhYmFzZVV0aWwuZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgICAgICAgU3RyaW5nIGNoZWNrU3FsID0gXCJTRUxFQ1QgKiBGUk9NIFN0YWZmcyBXSEVSRSBlbWFpbCA9ID9cIjtcbiAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoY2hlY2tTcWwpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMSwgZW1haWwpO1xuICAgICAgICAgICAgcnMgPSBzdG10LmV4ZWN1dGVRdWVyeSgpO1xuXG4gICAgICAgICAgICAvLyBO4bq/dSBlbWFpbCB04buTbiB04bqhaSwgbOG6pXkgdGjDtG5nIHRpbiB1c2VyXG4gICAgICAgICAgICBTdHJpbmcgc3FsID0gXCJTRUxFQ1QgdS4qIEZST00gVXNlcnMgdSBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICBcIkpPSU4gU3RhZmZzIHMgT04gdS51c2VyX2lkID0gcy51c2VyX2lkIFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiV0hFUkUgcy5lbWFpbCA9ID9cIjtcbiAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDEsIGVtYWlsKTtcblxuICAgICAgICAgICAgcnMgPSBzdG10LmV4ZWN1dGVRdWVyeSgpO1xuLi4uXG5QYXRoOiBzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9BZG1pbi9EYXNoYm9hcmQuZm9ybVxuLi4uXG5cbiAgPExheW91dD5cbiAgICA8RGltZW5zaW9uTGF5b3V0IGRpbT1cIjBcIj5cbiAgICAgIDxHcm91cCB0eXBlPVwiMTAzXCIgZ3JvdXBBbGlnbm1lbnQ9XCIwXCIgYXR0cmlidXRlcz1cIjBcIj5cbiAgICAgICAgICA8R3JvdXAgdHlwZT1cIjEwMlwiIGFsaWdubWVudD1cIjBcIiBhdHRyaWJ1dGVzPVwiMFwiPlxuICAgICAgICAgICAgICA8RW1wdHlTcGFjZSBtaW49XCItMlwiIHByZWY9XCIxODNcIiBtYXg9XCItMlwiIGF0dHJpYnV0ZXM9XCIwXCIvPlxuICAgICAgICAgICAgICA8R3JvdXAgdHlwZT1cIjEwM1wiIGdyb3VwQWxpZ25tZW50PVwiMFwiIGF0dHJpYnV0ZXM9XCIwXCI+XG4gICAgICAgICAgICAgICAgICA8R3JvdXAgdHlwZT1cIjEwMlwiIGF0dHJpYnV0ZXM9XCIwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPENvbXBvbmVudCBpZD1cImxiSGVsbG9cIiBtaW49XCItMlwiIG1heD1cIi0yXCIgYXR0cmlidXRlcz1cIjBcIi8+XG4gICAgICAgICAgICAgICAgICAgICAgPEVtcHR5U3BhY2UgbWF4PVwiLTJcIiBhdHRyaWJ1dGVzPVwiMFwiLz5cbiAgICAgICAgICAgICAgICAgICAgICA8Q29tcG9uZW50IGlkPVwibGJVc2VyTmFtZVwiIG1pbj1cIi0yXCIgbWF4PVwiLTJcIiBhdHRyaWJ1dGVzPVwiMFwiLz5cbiAgICAgICAgICAgICAgICAgIDwvR3JvdXA+XG4gICAgICAgICAgICAgICAgICA8R3JvdXAgdHlwZT1cIjEwM1wiIGdyb3VwQWxpZ25tZW50PVwiMFwiIG1heD1cIi0yXCIgYXR0cmlidXRlcz1cIjBcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8R3JvdXAgdHlwZT1cIjEwMlwiIGF0dHJpYnV0ZXM9XCIwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxHcm91cCB0eXBlPVwiMTAzXCIgZ3JvdXBBbGlnbm1lbnQ9XCIxLi4uIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV8wMTlyd3JOVUM1S2tnTFZHR2tSS01UMjgifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJFOi9Ib2NUYXAvMDJfSkFWQS8wM19Qcm9qZWN0L0ludGVybmV0IE1hbmdlbWVudCBTeXN0ZW0iLCJmb2xkZXJSb290IjoiRTovSG9jVGFwLzAyX0pBVkEvMDNfUHJvamVjdC9JbnRlcm5ldCBNYW5nZW1lbnQgU3lzdGVtIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwidGltZXN0YW1wIjoiMjAyNS0wNS0xM1QxMjo1OTo1OC40MzhaIiwicmVzcG9uc2VfdGV4dCI6IkxldCBtZSBjaGVjayBmb3IgdGhlIE1haW5GcmFtZSBjbGFzczpcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiI1MGE4YzViNC0wYmE3LTQwNjMtODAwMy1hZmM2NDJiNzhiZTYiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1XzAxOTYzWk00VGF4eERoWFdDRGh5RmRQUCIsInRvb2xfbmFtZSI6ImNvZGViYXNlLXJldHJpZXZhbCIsImlucHV0X2pzb24iOiJ7XCJpbmZvcm1hdGlvbl9yZXF1ZXN0XCI6IFwiRmluZCB0aGUgaW1wbGVtZW50YXRpb24gb2YgVXNlckRBTy5sb2dpbiBtZXRob2QgdGhhdCBpcyB1c2VkIGluIHRoZSBMb2dpbi5qYXZhIGZpbGUuIEFsc28gbG9vayBmb3IgYW55IE1haW5GcmFtZSBjbGFzcyBvciB0aGUgY2xhc3MgdGhhdCBzaG91bGQgYmUgZGlzcGxheWVkIGFmdGVyIHN1Y2Nlc3NmdWwgbG9naW4uXCJ9IiwibWNwX3NlcnZlcl9uYW1lIjoiIiwibWNwX3Rvb2xfbmFtZSI6IiJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiTGV0IG1lIGNoZWNrIGZvciB0aGUgaW1wbGVtZW50YXRpb24gb2YgVXNlckRBTy5sb2dpbiBtZXRob2Q6XG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJUaGUgZm9sbG93aW5nIGNvZGUgc2VjdGlvbnMgd2VyZSByZXRyaWV2ZWQ6XG5QYXRoOiBzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9Mb2dpbi5qYXZhXG4vKlxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9MaWNlbnNlcy9saWNlbnNlLWRlZmF1bHQudHh0IHRvIGNoYW5nZSB0aGlzIGxpY2Vuc2VcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvR1VJRm9ybXMvSkZyYW1lLmphdmEgdG8gZWRpdCB0aGlzIHRlbXBsYXRlXG4gKi9cbnBhY2thZ2UgaW50ZXJuZXQubWFuZ2VtZW50LnN5c3RlbTtcblxuaW1wb3J0IERBTy5Vc2VyREFPO1xuaW1wb3J0IE1vZGVsLlVzZXI7XG5pbXBvcnQgamF2YXguc3dpbmcuSk9wdGlvblBhbmU7XG4uLi5cblxuICAgIHByaXZhdGUgdm9pZCBidG5Mb2dpbkFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5Mb2dpbkFjdGlvblBlcmZvcm1lZFxuICAgICAgICAvLyBUT0RPIGFkZCB5b3VyIGhhbmRsaW5nIGNvZGUgaGVyZTpcbiAgICAgICAgaWYodmFsaWRhdGVGaWVsZHMoKSkge1xuICAgICAgICAgICAgdHJ5e1xuICAgICAgICAgICAgICAgIFN0cmluZyB1c2VybmFtZSA9IHR4dFVzZXJOYW1lLmdldFRleHQoKS50cmltKCk7XG4gICAgICAgICAgICAgICAgU3RyaW5nIHBhc3N3b3JkID0gdHh0UGFzc3dvcmQuZ2V0VGV4dCgpLnRyaW0oKTtcblxuICAgICAgICAgICAgICAgIFVzZXIgdXNlciA9IG51bGw7XG4gICAgICAgICAgICAgICAgYm9vbGVhbiBpc1N1Y2Nlc3MgPSBVc2VyREFPLmxvZ2luKHVzZXJuYW1lLCBwYXNzd29yZCk7XG5cbiAgICAgICAgICAgICAgICBpZihpc1N1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2codGhpcywgXCLEkMSDbmcgbmjhuq1wIHRow6BuaCBjw7RuZyFcIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5JTkZPUk1BVElPTl9NRVNTQUdFKTtcbi8vICAgICAgICAgICAgICAgICAgICBuZXcgTWFpbkZyYW1lKCkuc2V0VmlzaWJsZSh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwb3NlKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2codGhpcywgXCJTYWkgdMOqbiDEkcSDbmcgbmjhuq1wIGhv4bq3YyBt4bqtdCBraOG6qXUuXCIsIFwiTOG7l2lcIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaChFeGNlcHRpb24gZXgpIHtcbiAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcIkzhu5dpOiBcIiArIGV4LmdldE1lc3NhZ2UoKSwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG5cbiAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5Mb2dpbkFjdGlvblBlcmZvcm1lZFxuXG4gICAgcHJpdmF0ZSB2b2lkIGJ0bkZvcmdvdFBhc3N3b3JkQWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkZvcmdvdFBhc3N3b3JkQWN0aW9uUGVyZm9ybWVkXG4gICAgICAgIC8vIE9wZW4gdGhlIEZvcmdvdFBhc3N3b3JkIGRpYWxvZ1xuICAgICAgICBGb3Jnb3RQYXNzd29yZCBmb3Jnb3RQYXNzd29yZERpYWxvZyA9IG5ldyBGb3Jnb3RQYXNzd29yZCh0aGlzLCB0cnVlKTtcbiAgICAgICAgZm9yZ290UGFzc3dvcmREaWFsb2cuc2V0VmlzaWJsZSh0cnVlKTtcbiAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5Gb3Jnb3RQYXNzd29yZEFjdGlvblBlcmZvcm1lZFxuXG4gICAgcHJpdmF0ZSB2b2lkIGJ0bkV4aXRBY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuRXhpdEFjdGlvblBlcmZvcm1lZFxuICAgICAgICAvLyBUT0RPIGFkZCB5b3VyIGhhbmRsaW5nIGNvZGUgaGVyZTpcbiAgICAgICAgaW50IHJlc3VsdCA9IEpPcHRpb25QYW5lLnNob3dDb25maXJtRGlhbG9nKG51bGwsIFwiQuG6oW4gY8OzIGNo4bqvYyBjaOG6r24gbXXhu5FuIHRob8OhdCBraMO0bmc/XCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuWUVTX05PX09QVElPTiwgSk9wdGlvblBhbmUuUVVFU1RJT05fTUVTU0FHRSk7XG5cbiAgICAgICAgaWYgKHJlc3VsdCA9PSBKT3B0aW9uUGFuZS5ZRVNfT1BUSU9OKSB7XG4gICAgICAgICAgICBTeXN0ZW0uZXhpdCgwKTtcbiAgICAgICAgfVxuICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0bkV4aXRBY3Rpb25QZXJmb3JtZWRcblxuICAgIHByaXZhdGUgdm9pZCBidG5TaWdudXBBY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuU2lnbnVwQWN0aW9uUGVyZm9ybWVkXG4gICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxuICAgICAgICBzZXRWaXNpYmxlKGZhbHNlKTtcbiAgICAgICAgbmV3IFNpZ25VcCgpLnNldFZpc2libGUodHJ1ZSk7XG4gICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuU2lnbnVwQWN0aW9uUGVyZm9ybWVkXG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvY29tL3N0b3JlL2FwcC9wZXRzdG9yZS9Db250cm9sbGVycy9Mb2dpbkNvbnRyb2xsZXIuamF2YVxuLi4uXG5cbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLkRBTy5Vc2VyREFPO1xuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuREFPLlN0YWZmREFPO1xuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuTW9kZWxzLkVudGl0aWVzLlVzZXI7XG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5Nb2RlbHMuRW50aXRpZXMuU3RhZmY7XG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5TZXNzaW9ucy5TZXNzaW9uTWFuYWdlcjtcbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLlZpZXdzLkFkbWluRmFjdG9yeTtcbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLlZpZXdzLlZpZXdGYWN0b3J5O1xuaW1wb3J0IGRlLmplbnNkLmZ4LmdseXBocy5mb250YXdlc29tZS5Gb250QXdlc29tZUljb247XG5pbXBvcnQgZGUuamVuc2QuZnguZ2x5cGhzLmZvbnRhd2Vzb21lLkZvbnRBd2Vzb21lSWNvblZpZXc7XG5pbXBvcnQgamF2YWZ4LmZ4bWwuRlhNTDtcbmltcG9ydCBqYXZhZnguZnhtbC5Jbml0aWFsaXphYmxlO1xuaW1wb3J0IGphdmFmeC5zY2VuZS5jb250cm9sLio7XG5pbXBvcnQgamF2YWZ4LnNjZW5lLmlucHV0Lk1vdXNlRXZlbnQ7XG5pbXBvcnQgamF2YWZ4LnN0YWdlLlN0YWdlO1xuaW1wb3J0IGphdmFmeC5zY2VuZS5pbWFnZS5JbWFnZTtcbmltcG9ydCBqYXZhZnguc2NlbmUuaW1hZ2UuSW1hZ2VWaWV3O1xuaW1wb3J0IGphdmFmeC5zY2VuZS5wYWludC5JbWFnZVBhdHRlcm47XG5pbXBvcnQgamF2YS51dGlsLk9iamVjdHM7XG4uLi5cblxucHVibGljIGNsYXNzIExvZ2luQ29udHJvbGxlciBpbXBsZW1lbnRzIEluaXRpYWxpemFibGUge1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIEZvbnRBd2Vzb21lSWNvblZpZXcgZXllSWNvbjtcblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBUZXh0RmllbGQgc2hvd1Bhc3N3b3JkO1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIFBhc3N3b3JkRmllbGQgcGFzc3dvcmRGaWVsZDtcblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBUZXh0RmllbGQgdXNlcm5hbWVGaWVsZDtcblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBCdXR0b24gbG9naW5CdXR0b247XG5cbiAgICBARlhNTFxuICAgIHByaXZhdGUgTGFiZWwgZXJyb3JMYWJlbDtcblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBIeXBlcmxpbmsgZm9yZ290UGFzc3dvcmRMaW5rO1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIEltYWdlVmlldyB1c2VySW1hZ2U7XG5cbiAgICBwcml2YXRlIGRvdWJsZSB4LCB5O1xuXG4gICAgVXNlckRBTyB1c2VyREFPID0gbmV3IFVzZXJEQU8oKTtcbiAgICBTdGFmZkRBTyBzdGFmZkRBTyA9IFN0YWZmREFPLmdldEluc3RhbmNlKCk7XG4gICAgcHVibGljIHN0YXRpYyBpbnQgaWRTdGFmZkN1cnJlbnQ7XG4gICAgcHVibGljIHN0YXRpYyBpbnQgaWRBZG1pbkN1cnJlbnQ7XG5cbiAgICBwcml2YXRlIFNlc3Npb25NYW5hZ2VyIHNlc3Npb25NYW5hZ2VyID0gbmV3IFNlc3Npb25NYW5hZ2VyKCk7XG4uLi5cblxuICAgIHByaXZhdGUgdm9pZCBzZXR1cExvZ2luQnV0dG9uKCkge1xuICAgICAgICBsb2dpbkJ1dHRvbi5zZXRPbkFjdGlvbihldmVudCAtPiBoYW5kbGVMb2dpbigpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHZvaWQgc2V0dXBGb3Jnb3RQYXNzd29yZExpbmsoKSB7XG4gICAgICAgIGZvcmdvdFBhc3N3b3JkTGluay5zZXRPbkFjdGlvbihldmVudCAtPiB7XG4gICAgICAgICAgICBTdGFnZSBjdXJyZW50U3RhZ2UgPSAoU3RhZ2UpIHVzZXJuYW1lRmllbGQuZ2V0U2NlbmUoKS5nZXRXaW5kb3coKTtcbiAgICAgICAgICAgIFZpZXdGYWN0b3J5LmdldEluc3RhbmNlKCkuc3dpdGNoQ29udGVudChcImZvcmdvdHBhc3N3b3JkXCIsIGN1cnJlbnRTdGFnZSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSB2b2lkIGhhbmRsZURyYWdnZWQoTW91c2VFdmVudCBldmVudCkge1xuICAgICAgICBTdGFnZSBzdGFnZSA9IChTdGFnZSkgdXNlcm5hbWVGaWVsZC5nZXRTY2VuZSgpLmdldFdpbmRvdygpO1xuICAgICAgICBzdGFnZS5zZXRYKGV2ZW50LmdldFNjcmVlblgoKSAtIHgpO1xuICAgICAgICBzdGFnZS5zZXRZKGV2ZW50LmdldFNjcmVlblkoKSAtIHkpO1xuICAgIH1cblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSB2b2lkIGhhbmRsZVByZXNzZWQoTW91c2VFdmVudCBldmVudCkge1xuICAgICAgICB4ID0gZXZlbnQuZ2V0U2NyZWVuWCgpO1xuICAgICAgICB5ID0gZXZlbnQuZ2V0U2NyZWVuWSgpO1xuICAgIH1cbi4uLlxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBUw6xtIHVzZXIgdGhlbyB1c2VybmFtZVxuICAgICAgICAgICAgVXNlciB1c2VyID0gdXNlckRBTy5maW5kQnlVc2VybmFtZSh1c2VybmFtZSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmKHVzZXIgPT0gbnVsbCB8fCB1c2VyLmdldFVzZXJuYW1lKCkgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIENvbnRyb2xsZXJVdGlscy5zaG93QWxlcnQoQWxlcnQuQWxlcnRUeXBlLkVSUk9SLCBcIkzhu5dpXCIsIFwiVMOqbiDEkcSDbmcgbmjhuq1wIGtow7RuZyDEkcO6bmdcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBLaeG7g20gdHJhIHTDqm4gxJHEg25nIG5o4bqtcFxuICAgICAgICAgICAgaWYgKCF1c2VyLmdldFVzZXJuYW1lKCkuZXF1YWxzKHVzZXJuYW1lKSkge1xuICAgICAgICAgICAgICAgIENvbnRyb2xsZXJVdGlscy5zaG93QWxlcnQoQWxlcnQuQWxlcnRUeXBlLkVSUk9SLCBcIkzhu5dpXCIsIFwiVMOqbiDEkcSDbmcgbmjhuq1wIGtow7RuZyDEkcO6bmdcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBLaeG7g20gdHJhIG3huq10IGto4bqpdVxuICAgICAgICAgICAgaWYoIUJDcnlwdC5jaGVja3B3KHBhc3N3b3JkLCB1c2VyLmdldFBhc3N3b3JkKCkpKSB7XG4gICAgICAgICAgICAgICAgQ29udHJvbGxlclV0aWxzLnNob3dBbGVydChBbGVydC5BbGVydFR5cGUuRVJST1IsIFwiTOG7l2lcIiwgXCJN4bqtdCBraOG6qXUga2jDtG5nIMSRw7puZ1wiKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNlc3Npb25NYW5hZ2VyLnNldEN1cnJlbnRVc2VyKHVzZXIpO1xuXG4gICAgICAgICAgICBTdGFnZSBjdXJyZW50U3RhZ2UgPSAoU3RhZ2UpIHVzZXJuYW1lRmllbGQuZ2V0U2NlbmUoKS5nZXRXaW5kb3coKTtcblxuICAgICAgICAgICAgaWYodXNlci5nZXRSb2xlKCkuZXF1YWxzKFVzZXIuUk9MRV9BRE1JTikpIHtcbiAgICAgICAgICAgICAgICBpZEFkbWluQ3VycmVudCA9IHVzZXIuZ2V0VXNlcklkKCk7XG4gICAgICAgICAgICAgICAgQWRtaW5GYWN0b3J5LmdldEluc3RhbmNlKCkuc3dpdGNoQ29udGVudChcImRhc2hib2FyZFwiLCBjdXJyZW50U3RhZ2UpO1xuICAgICAgICAgICAgfSBlbHNlIGlmKHVzZXIuZ2V0Um9sZSgpLmVxdWFscyhVc2VyLlJPTEVfVVNFUikpIHtcbiAgICAgICAgICAgICAgICBpZFN0YWZmQ3VycmVudCA9IHVzZXIuZ2V0VXNlcklkKCk7XG4gICAgICAgICAgICAgICAgU3RhZmYgc3RhZmYgPSBzdGFmZkRBTy5maW5kQnlVc2VySWQodXNlci5nZXRVc2VySWQoKSk7XG4gICAgICAgICAgICAgICAgaWYgKHN0YWZmICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbk1hbmFnZXIuc2V0Q3VycmVudFN0YWZmKHN0YWZmKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgVmlld0ZhY3RvcnkuZ2V0SW5zdGFuY2UoKS5zd2l0Y2hDb250ZW50KFwiZGFzaGJvYXJkXCIsIGN1cnJlbnRTdGFnZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIENvbnRyb2xsZXJVdGlscy5zaG93QWxlcnQoQWxlcnQuQWxlcnRUeXBlLkVSUk9SLCBcIkzhu5dpXCIsIFwiVmFpIHRyw7IgbmfGsOG7nWkgZMO5bmcga2jDtG5nIGjhu6NwIGzhu4dcIik7XG4gICAgICAgICAgICAgICAgc2Vzc2lvbk1hbmFnZXIuY2xlYXIoKTtcbiAgICAgICAgICAgIH1cbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9jb20vc3RvcmUvYXBwL3BldHN0b3JlL1BldFN0b3JlQXBwbGljYXRpb24uamF2YVxucGFja2FnZSBjb20uc3RvcmUuYXBwLnBldHN0b3JlO1xuXG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5Nb2RlbHMuRGF0YWJhc2VNYW5hZ2VyO1xuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuVmlld3MuTW9kZWxWaWV3O1xuaW1wb3J0IGphdmFmeC5hcHBsaWNhdGlvbi5BcHBsaWNhdGlvbjtcbmltcG9ydCBqYXZhZnguZnhtbC5GWE1MTG9hZGVyO1xuaW1wb3J0IGphdmFmeC5zY2VuZS5QYXJlbnQ7XG5pbXBvcnQgamF2YWZ4LnNjZW5lLlNjZW5lO1xuaW1wb3J0IGphdmFmeC5zdGFnZS5TdGFnZTtcblxuaW1wb3J0IGphdmEuaW8uSU9FeGNlcHRpb247XG5cbnB1YmxpYyBjbGFzcyBQZXRTdG9yZUFwcGxpY2F0aW9uIGV4dGVuZHMgQXBwbGljYXRpb24ge1xuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyB2b2lkIHN0YXJ0KFN0YWdlIHByaW1hcnlTdGFnZSkge1xuICAgICAgICBEYXRhYmFzZU1hbmFnZXIuY29ubmVjdCgpO1xuICAgICAgICBNb2RlbFZpZXcuZ2V0SW5zdGFuY2UoKS5nZXRWaWV3RmFjdG9yeSgpLnNob3dXaW5kb3coXCJsb2dpblwiKTtcbi4uLlxuUGF0aDogc3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vRm9yZ290UGFzc3dvcmQuamF2YVxuLypcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvTGljZW5zZXMvbGljZW5zZS1kZWZhdWx0LnR4dCB0byBjaGFuZ2UgdGhpcyBsaWNlbnNlXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0dVSUZvcm1zL0pGcmFtZS5qYXZhIHRvIGVkaXQgdGhpcyB0ZW1wbGF0ZVxuICovXG5wYWNrYWdlIGludGVybmV0Lm1hbmdlbWVudC5zeXN0ZW07XG5cbmltcG9ydCBEQU8uU3Vic2NyaWJlckRBTztcbmltcG9ydCBNb2RlbC5TdWJzY3JpYmVyO1xuaW1wb3J0IGphdmF4LnN3aW5nLkpPcHRpb25QYW5lO1xuaW1wb3J0IGludGVybmV0Lm1hbmdlbWVudC5zeXN0ZW0uTG9naW47XG4uLi5cblxuICAgIHByaXZhdGUgdm9pZCBidG5FeGl0QWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkV4aXRBY3Rpb25QZXJmb3JtZWRcbiAgICAgICAgLy8gVE9ETyBhZGQgeW91ciBoYW5kbGluZyBjb2RlIGhlcmU6XG4gICAgICAgIGludCByZXN1bHQgPSBKT3B0aW9uUGFuZS5zaG93Q29uZmlybURpYWxvZyhudWxsLCBcIkLhuqFuIGPDsyBjaOG6r2MgY2jhuq9uIG114buRbiB0aG/DoXQga2jDtG5nP1wiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLllFU19OT19PUFRJT04sIEpPcHRpb25QYW5lLlFVRVNUSU9OX01FU1NBR0UpO1xuXG4gICAgICAgIGlmIChyZXN1bHQgPT0gSk9wdGlvblBhbmUuWUVTX09QVElPTikge1xuICAgICAgICAgICAgbmV3IExvZ2luKCkuc2V0VmlzaWJsZSh0cnVlKTtcbiAgICAgICAgICAgIHRoaXMuZGlzcG9zZSgpO1xuICAgICAgICB9XG4gICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuRXhpdEFjdGlvblBlcmZvcm1lZFxuXG4gICAgcHJpdmF0ZSB2b2lkIGJ0bkNoZWNrQWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkNoZWNrQWN0aW9uUGVyZm9ybWVkXG4gICAgICAgIFN5c3RlbS5vdXQucHJpbnQoXCJIZWxsb1wiKTtcbiAgICAgICAgaWYgKHZhbGlkYXRlUGhvbmUoKSkge1xuICAgICAgICAgICAgU3RyaW5nIHBob25lID0gdHh0UGhvbmUuZ2V0VGV4dCgpO1xuICAgICAgICAgICAgY3VycmVudFN1YnNjcmliZXIgPSBTdWJzY3JpYmVyREFPLmdldEJ5UGhvbmUocGhvbmUpO1xuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL2NvbS9zdG9yZS9hcHAvcGV0c3RvcmUvREFPL1VzZXJEQU8uamF2YVxucGFja2FnZSBjb20uc3RvcmUuYXBwLnBldHN0b3JlLkRBTztcblxuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuTW9kZWxzLkVudGl0aWVzLlVzZXI7XG5pbXBvcnQgb3JnLm1pbmRyb3QuamJjcnlwdC5CQ3J5cHQ7XG5cbmltcG9ydCBqYXZhLnNxbC4qO1xuaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7XG5pbXBvcnQgamF2YS51dGlsLkJhc2U2NDtcblxucHVibGljIGNsYXNzIFVzZXJEQU8gaW1wbGVtZW50cyBCYXNlREFPPFVzZXIsIEludGVnZXI+IHtcbiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIGludCBpc0R1cGxpY2F0ZSA9IC0xO1xuXG4gICAgcHVibGljIHN0YXRpYyBVc2VyREFPIGdldEluc3RhbmNlKCkge1xuICAgICAgICByZXR1cm4gbmV3IFVzZXJEQU8oKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIFN0cmluZyBlbmNvZGUoU3RyaW5nIHBhc3N3b3JkKSB7XG4vLyAgICAgICAgcmV0dXJuIEJhc2U2NC5nZXRFbmNvZGVyKCkuZW5jb2RlVG9TdHJpbmcocGFzc3dvcmQuZ2V0Qnl0ZXMoKSk7XG4gICAgICAgIHJldHVybiBCQ3J5cHQuaGFzaHB3KHBhc3N3b3JkLCBCQ3J5cHQuZ2Vuc2FsdCgpKTtcbiAgICB9XG5cbi8vICAgIHB1YmxpYyBzdGF0aWMgU3RyaW5nIGRlY29kZShTdHJpbmcgcGFzc3dvcmQpIHtcbi8vICAgICAgICByZXR1cm4gbmV3IFN0cmluZyhCYXNlNjQuZ2V0RGVjb2RlcigpLmRlY29kZShwYXNzd29yZCkpO1xuLy8gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBib29sZWFuIHZlcmlmeShTdHJpbmcgcGFzc3dvcmQsIFN0cmluZyBoYXNoZWQpIHtcbiAgICAgICAgcmV0dXJuIEJDcnlwdC5jaGVja3B3KHBhc3N3b3JkLCBoYXNoZWQpO1xuICAgIH1cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBpbnQgaW5zZXJ0KFVzZXIgZW50aXR5KSB7XG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuICAgICAgICBSZXN1bHRTZXQgcnMgPSBudWxsO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25uID0gRGF0YWJhc2VVdGlsLmdldENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgIFN0cmluZyBzcWwgPSBcIklOU0VSVCBJTlRPIFVzZXJzICh1c2VybmFtZSwgcGFzc3dvcmQsIHJvbGUsIGltYWdlX3VybCwgaXNBY3RpdmUpIFZBTFVFUyAoPywgPywgPywgPywgPylcIjtcbiAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsLCBTdGF0ZW1lbnQuUkVUVVJOX0dFTkVSQVRFRF9LRVlTKTtcblxuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMSwgZW50aXR5LmdldFVzZXJuYW1lKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMiwgZW5jb2RlKGVudGl0eS5nZXRQYXNzd29yZCgpKSk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygzLCBlbnRpdHkuZ2V0Um9sZSgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDQsIGVudGl0eS5nZXRJbWFnZVVybCgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0Qm9vbGVhbig1LCBlbnRpdHkuaXNBY3RpdmUoKSk7XG5cbiAgICAgICAgICAgIGludCBhZmZlY3RlZFJvd3MgPSBzdG10LmV4ZWN1dGVVcGRhdGUoKTtcbiAgICAgICAgICAgIGlmIChhZmZlY3RlZFJvd3MgPT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0cnkgKFJlc3VsdFNldCBnZW5lcmF0ZWRLZXlzID0gc3RtdC5nZXRHZW5lcmF0ZWRLZXlzKCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoZ2VuZXJhdGVkS2V5cy5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdlbmVyYXRlZEtleXMuZ2V0SW50KDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgRGF0YWJhc2VVdGlsLmNsb3NlUmVzb3VyY2VzKHJzLCBzdG10LCBjb25uKTtcbiAgICAgICAgfVxuICAgIH1cbi4uLlxuXG4gICAgcHVibGljIFVzZXIgZmluZEJ5VXNlcm5hbWUoU3RyaW5nIHVzZXJuYW1lKSB7XG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuICAgICAgICBSZXN1bHRTZXQgcnMgPSBudWxsO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25uID0gRGF0YWJhc2VVdGlsLmdldENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgIFN0cmluZyBzcWwgPSBcIlNFTEVDVCAqIEZST00gVXNlcnMgV0hFUkUgdXNlcm5hbWUgPSA/XCI7XG4gICAgICAgICAgICBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHNxbCk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygxLCB1c2VybmFtZSk7XG4gICAgICAgICAgICBycyA9IHN0bXQuZXhlY3V0ZVF1ZXJ5KCk7XG5cbiAgICAgICAgICAgIGlmIChycy5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICBVc2VyIHVzZXIgPSBuZXcgVXNlcigpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0VXNlcklkKHJzLmdldEludChcInVzZXJfaWRcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0VXNlcm5hbWUocnMuZ2V0U3RyaW5nKFwidXNlcm5hbWVcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0UGFzc3dvcmQocnMuZ2V0U3RyaW5nKFwicGFzc3dvcmRcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0Um9sZShycy5nZXRTdHJpbmcoXCJyb2xlXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldEltYWdlVXJsKHJzLmdldFN0cmluZyhcImltYWdlX3VybFwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRBY3RpdmUocnMuZ2V0Qm9vbGVhbihcImlzQWN0aXZlXCIpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdXNlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBEYXRhYmFzZVV0aWwuY2xvc2VSZXNvdXJjZXMocnMsIHN0bXQsIGNvbm4pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9jb20vc3RvcmUvYXBwL3BldHN0b3JlL0NvbnRyb2xsZXJzL0FkbWluL0Rhc2hib2FyZENvbnRyb2xsZXIuamF2YVxuLi4uXG5cbiAgICBwcml2YXRlIHZvaWQgbmF2aWdhdGVUbyhTdHJpbmcgdmlld05hbWUpIHtcbiAgICAgICAgU3RhZ2UgY3VycmVudFN0YWdlID0gKFN0YWdlKSBsb2dvdXRCdXR0b24uZ2V0U2NlbmUoKS5nZXRXaW5kb3coKTtcbiAgICAgICAgQWRtaW5GYWN0b3J5LmdldEluc3RhbmNlKCkuc3dpdGNoQ29udGVudCh2aWV3TmFtZSwgY3VycmVudFN0YWdlKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHZvaWQgaGFuZGxlTG9nb3V0KCkge1xuICAgICAgICAvLyBTdG9wIGF1dG8tcmVmcmVzaCBpZiBhY3RpdmVcbiAgICAgICAgc3RvcEF1dG9SZWZyZXNoKCk7XG5cbiAgICAgICAgU3RhZ2UgY3VycmVudFN0YWdlID0gKFN0YWdlKSBsb2dvdXRCdXR0b24uZ2V0U2NlbmUoKS5nZXRXaW5kb3coKTtcbiAgICAgICAgaWYgKENvbnRyb2xsZXJVdGlscy5zaG93Q29uZmlybWF0aW9uQW5kV2FpdChcIsSQxINuZyB4deG6pXRcIiwgXCJC4bqhbiBjw7MgY2jhuq9jIGNo4bqvbiBtdeG7kW4gxJHEg25nIHh14bqldCBraMO0bmc/XFxuTmjhuqVuIE9LIMSR4buDIHjDoWMgbmjhuq1uLlwiKSkge1xuICAgICAgICAgICAgU2Vzc2lvbk1hbmFnZXIuY2xlYXIoKTtcbiAgICAgICAgICAgIFZpZXdGYWN0b3J5LmdldEluc3RhbmNlKCkuc3dpdGNoQ29udGVudChcImxvZ2luXCIsIGN1cnJlbnRTdGFnZSk7XG4gICAgICAgIH1cbiAgICB9XG5cblxufVxuLi4uXG5QYXRoOiBzcmMvbWFpbi9yZXNvdXJjZXMvRlhNTC9BZG1pbi9BZG1pbk1lbnUuZnhtbFxuLi4uXG5cbjxBbmNob3JQYW5lIGZ4OmlkPVwicm9vdFwiIHByZWZIZWlnaHQ9XCI3MC4wXCIgcHJlZldpZHRoPVwiOTkwLjBcIiBzdHlsZUNsYXNzPVwibmF2LWNvbnRhaW5lclwiIHN0eWxlc2hlZXRzPVwiQC4uLy4uL1N0eWxlcy9BZG1pbi9BZG1pbk1lbnUuY3NzXCIgeG1sbnM9XCJodHRwOi8vamF2YWZ4LmNvbS9qYXZhZngvMjMuMC4xXCIgeG1sbnM6Zng9XCJodHRwOi8vamF2YWZ4LmNvbS9meG1sLzFcIiBmeDpjb250cm9sbGVyPVwiY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5Db250cm9sbGVycy5BZG1pbi5BZG1pbk1lbnVDb250cm9sbGVyXCI+XG4gICA8Y2hpbGRyZW4+XG4gICAgICA8SW1hZ2VWaWV3IGZpdEhlaWdodD1cIjQwLjBcIiBmaXRXaWR0aD1cIjE1My4wXCIgbGF5b3V0WD1cIjI0LjBcIiBsYXlvdXRZPVwiMjEuMFwiIHBpY2tPbkJvdW5kcz1cInRydWVcIiBwcmVzZXJ2ZVJhdGlvPVwidHJ1ZVwiIEFuY2hvclBhbmUubGVmdEFuY2hvcj1cIjE1LjBcIiBBbmNob3JQYW5lLnRvcEFuY2hvcj1cIjE1LjBcIj5cbiAgICAgICAgIDxpbWFnZT5cbiAgICAgICAgICAgIDxJbWFnZSB1cmw9XCJALi4vLi4vSW1hZ2VzL2xvZ28xLnBuZ1wiIC8+XG4gICAgICAgICA8L2ltYWdlPlxuICAgICAgPC9JbWFnZVZpZXc+XG4gICAgICA8TGFiZWwgZng6aWQ9XCJ1c2VybmFtZUxhYmVsXCIgY29udGVudERpc3BsYXk9XCJSSUdIVFwiIGxheW91dFg9XCI4NTguMFwiIGxheW91dFk9XCIyMS4wXCIgc3R5bGVDbGFzcz1cImxhYmVsLXVzZXJuYW1lXCIgdGV4dD1cImFkbWluMTIzXCIgdGV4dEFsaWdubWVudD1cIlJJR0hUXCIgLz5cbiAgICAgIDxMYWJlbCBmeDppZD1cIm5hbWVMYWJlbFwiIGNvbnRlbnREaXNwbGF5PVwiUklHSFRcIiBsYXlvdXRYPVwiODQ1LjBcIiBsYXlvdXRZPVwiMzguMFwiIHN0eWxlQ2xhc3M9XCJsYWJlbC1uYW1lXCIgdGV4dD1cIlF14bqjbiB0cuG7iyB2acOqblwiIHRleHRBbGlnbm1lbnQ9XCJSSUdIVFwiIC8+XG4gICAgICA8Q2lyY2xlIGZ4OmlkPVwidXNlckltYWdlXCIgZmlsbD1cIkRPREdFUkJMVUVcIiBsYXlvdXRYPVwiOTU2LjBcIiBsYXlvdXRZPVwiMzUuMFwiIHJhZGl1cz1cIjIwLjBcIiBzdHJva2U9XCJCTEFDS1wiIHN0cm9rZVR5cGU9XCJJTlNJREVcIiBzdHlsZUNsYXNzPVwidXNlci1pbWFnZVwiIEFuY2hvclBhbmUucmlnaHRBbmNob3I9XCIxOC4wXCIgQW5jaG9yUGFuZS50b3BBbmNob3I9XCIxOC4wXCIgLz5cbiAgICAgIDxNZW51QmFyIGZ4OmlkPVwibWVudUJhclwiIGxheW91dFg9XCIyNDUuMFwiIGxheW91dFk9XCIyNC4wXCIgcHJlZkhlaWdodD1cIjM2LjBcIiBwcmVmV2lkdGg9XCI1ODAuMFwiPlxuICAgICAgICA8bWVudXM+XG4gICAgICAgICAgICA8TWVudSBmeDppZD1cIm1lbnVIb21lXCIgbW5lbW9uaWNQYXJzaW5nPVwiZmFsc2VcIiB0ZXh0PVwiVHJhbmcgY2jhu6dcIiAvPlxuICAgICAgICAgIDxNZW51IGZ4OmlkPVwibWVudVN0YXRpc3RpY3NcIiBtbmVtb25pY1BhcnNpbmc9XCJmYWxzZVwiIHRleHQ9XCJUaOG7kW5nIGvDqlwiPlxuICAgICAgICAgICAgPGl0ZW1zPlxuICAgICAgICAgICAgICAgICAgPE1lbnVJdGVtIGZ4OmlkPVwibWVudUl0ZW1PdmVydmlld1wiIG1uZW1vbmljUGFyc2luZz1cImZhbHNlXCIgdGV4dD1cIlThu5VuZyBxdcOhdFwiIC8+XG4gICAgICAgICAgICAgIDxNZW51SXRlbSBmeDppZD1cIm1lbnVJdGVtUmV2ZW51ZVwiIG1uZW1vbmljUGFyc2luZz1cImZhbHNlXCIgdGV4dD1cIkRvYW5oIHRodVwiIC8+XG4uLi5cbiAgICAgICAgICAgIDxNZW51IGZ4OmlkPVwibWVudVJlcG9ydHNcIiBtbmVtb25pY1BhcnNpbmc9XCJmYWxzZVwiIHRleHQ9XCJCw6FvIGPDoW9cIiAvPlxuICAgICAgICAgICAgPE1lbnUgZng6aWQ9XCJtZW51TG9nb3V0XCIgbW5lbW9uaWNQYXJzaW5nPVwiZmFsc2VcIiB0ZXh0PVwixJDEg25nIHh14bqldFwiIC8+XG4gICAgICAgIDwvbWVudXM+XG4gICAgICAgICA8Y3Vyc29yPlxuICAgICAgICAgICAgPEN1cnNvciBmeDpjb25zdGFudD1cIkhBTkRcIiAvPlxuICAgICAgICAgPC9jdXJzb3I+XG4gICAgICA8L01lbnVCYXI+XG4gICA8L2NoaWxkcmVuPlxuPC9BbmNob3JQYW5lPlxuLi4uXG5QYXRoOiBzcmMvREFPL1VzZXJEQU8uamF2YVxuLypcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvTGljZW5zZXMvbGljZW5zZS1kZWZhdWx0LnR4dCB0byBjaGFuZ2UgdGhpcyBsaWNlbnNlXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ2xhc3MuamF2YSB0byBlZGl0IHRoaXMgdGVtcGxhdGVcbiAqL1xucGFja2FnZSBEQU87XG5cbmltcG9ydCBNb2RlbC5Vc2VyO1xuaW1wb3J0IGphdmEudXRpbC5MaXN0O1xuXG4vKipcbiAqXG4gKiBAYXV0aG9yIE5nb2MgVGhhb1xuICovXG5wdWJsaWMgY2xhc3MgVXNlckRBT3tcblxuICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBpbnNlcnQoVXNlciBvYmopIHtcbiAgICAgICAgXG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyB2b2lkIHVwZGF0ZShVc2VyIG9iaikge1xuICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oXCJOb3Qgc3VwcG9ydGVkIHlldC5cIik7IC8vIEdlbmVyYXRlZCBmcm9tIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9Db2RlL0dlbmVyYXRlZE1ldGhvZEJvZHlcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIHZvaWQgZGVsZXRlKGludCBpZCkge1xuICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oXCJOb3Qgc3VwcG9ydGVkIHlldC5cIik7IC8vIEdlbmVyYXRlZCBmcm9tIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9Db2RlL0dlbmVyYXRlZE1ldGhvZEJvZHlcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIFVzZXIgZ2V0QnlJZChpbnQgaWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpOyAvLyBHZW5lcmF0ZWQgZnJvbSBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ29kZS9HZW5lcmF0ZWRNZXRob2RCb2R5XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBMaXN0PFVzZXI+IGdldEFsbCgpIHtcbiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpOyAvLyBHZW5lcmF0ZWQgZnJvbSBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ29kZS9HZW5lcmF0ZWRNZXRob2RCb2R5XG4gICAgfVxuICAgIFxufVxuLi4uXG5QYXRoOiBzcmMvbWFpbi9yZXNvdXJjZXMvRlhNTC9BZG1pbi9EYXNoYm9hcmQuZnhtbFxuLi4uXG5cbjxWQm94IHByZWZIZWlnaHQ9XCI1MTIuMFwiIHByZWZXaWR0aD1cIjk5MC4wXCIgc3R5bGVzaGVldHM9XCJALi4vLi4vU3R5bGVzL0FkbWluL0Rhc2hib2FyZC5jc3NcIiB4bWxucz1cImh0dHA6Ly9qYXZhZnguY29tL2phdmFmeC8yMy4wLjFcIiB4bWxuczpmeD1cImh0dHA6Ly9qYXZhZnguY29tL2Z4bWwvMVwiIGZ4OmNvbnRyb2xsZXI9XCJjb20uc3RvcmUuYXBwLnBldHN0b3JlLkNvbnRyb2xsZXJzLkFkbWluLkRhc2hib2FyZENvbnRyb2xsZXJcIj5cbiAgICA8Y2hpbGRyZW4+XG4gICAgICAgIDxmeDppbmNsdWRlIHNvdXJjZT1cIkFkbWluTWVudS5meG1sXCIgLz5cbiAgICAgICAgPFNjcm9sbFBhbmUgZml0VG9XaWR0aD1cInRydWVcIiBwcmVmSGVpZ2h0PVwiNDQyLjBcIiBwcmVmV2lkdGg9XCI5OTAuMFwiIHN0eWxlQ2xhc3M9XCJkYXNoYm9hcmQtY29udGFpbmVyXCI+XG4gICAgICAgICAgICA8Y29udGVudD5cbiAgICAgICAgICAgICAgICA8VkJveCBzcGFjaW5nPVwiMjAuMFwiPlxuICAgICAgICAgICAgICAgICAgICA8cGFkZGluZz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxJbnNldHMgYm90dG9tPVwiMjAuMFwiIGxlZnQ9XCIyMC4wXCIgcmlnaHQ9XCIyMC4wXCIgdG9wPVwiMjAuMFwiIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvcGFkZGluZz5cbiAgICAgICAgICAgICAgICAgICAgPGNoaWxkcmVuPlxuICAgICAgICAgICAgICAgICAgICAgICAgPCEtLSBXZWxjb21lIFNlY3Rpb24gLS0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8SEJveCBhbGlnbm1lbnQ9XCJDRU5URVJcIiBzdHlsZUNsYXNzPVwid2VsY29tZS1zZWN0aW9uXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGNoaWxkcmVuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8TGFiZWwgc3R5bGVDbGFzcz1cIndlbGNvbWUtdGV4dFwiIHRleHQ9XCJYaW4gY2jDoG8gUXXhuqNuIHRy4buLIHZpw6puXCIgSEJveC5oZ3Jvdz1cIkFMV0FZU1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGZvbnQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvbnQgbmFtZT1cIlN5c3RlbSBCb2xkXCIgc2l6ZT1cIjI0LjBcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9mb250PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEhCb3gubWFyZ2luPlxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL2NvbS9zdG9yZS9hcHAvcGV0c3RvcmUvVmlld3MvQWRtaW5GYWN0b3J5LmphdmFcbi4uLlxuXG4gICAgcHVibGljIHZvaWQgc2hvd1dpbmRvdyhTdHJpbmcgZnhtbE5hbWUpIHtcbiAgICAgICAgU3RhZ2Ugc3RhZ2UgPSBuZXcgU3RhZ2UoKTtcbiAgICAgICAgUGFyZW50IHJvb3QgPSBudWxsO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgc3dpdGNoIChmeG1sTmFtZS50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBcImRhc2hib2FyZFwiOlxuICAgICAgICAgICAgICAgICAgICByb290ID0gbG9hZEZYTUwoREFTSEJPQVJEX0ZYTUwpO1xuICAgICAgICAgICAgICAgICAgICBzdGFnZS5zZXRUaXRsZShcIkLhuqNuZyDEkWnhu4F1IGtoaeG7g24gQWRtaW5cIik7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJ1c2VybWFuYWdlbWVudFwiOlxuICAgICAgICAgICAgICAgICAgICByb290ID0gbG9hZEZYTUwoVVNFUk1BTkFHRU1FTlRfRlhNTCk7XG4gICAgICAgICAgICAgICAgICAgIHN0YWdlLnNldFRpdGxlKFwiUXXhuqNuIGzDvSB0w6BpIGtob+G6o25cIik7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJjdXN0b21lcm1hbmFnZW1lbnRcIjpcbiAgICAgICAgICAgICAgICAgICAgcm9vdCA9IGxvYWRGWE1MKENVU1RPTUVSTUFOQUdFTUVOVF9GWE1MKTtcbiAgICAgICAgICAgICAgICAgICAgc3RhZ2Uuc2V0VGl0bGUoXCJRdeG6o24gbMO9IGtow6FjaCBow6BuZ1wiKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcImRpc2NvdW50bWFuYWdlbWVudFwiOlxuICAgICAgICAgICAgICAgICAgICByb290ID0gbG9hZEZYTUwoRElTQ09VTlRNQU5BR0VNRU5UX0ZYTUwpO1xuICAgICAgICAgICAgICAgICAgICBzdGFnZS5zZXRUaXRsZShcIlF14bqjbiBsw70ga2h1eeG6v24gbcOjaVwiKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcInBldG1hbmFnZW1lbnRcIjpcbiAgICAgICAgICAgICAgICAgICAgcm9vdCA9IGxvYWRGWE1MKFBFVE1BTkFHRU1FTlRfRlhNTCk7XG4gICAgICAgICAgICAgICAgICAgIHN0YWdlLnNldFRpdGxlKFwiUXXhuqNuIGzDvSB0aMO6IGPGsG5nXCIpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwicHJvZHVjdG1hbmFnZW1lbnRcIjpcbiAgICAgICAgICAgICAgICAgICAgcm9vdCA9IGxvYWRGWE1MKFBST0RVQ1RNQU5BR0VNRU5UX0ZYTUwpO1xuICAgICAgICAgICAgICAgICAgICBzdGFnZS5zZXRUaXRsZShcIlF14bqjbiBsw70gc+G6o24gcGjhuqltXCIpO1xuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL2NvbS9zdG9yZS9hcHAvcGV0c3RvcmUvQ29udHJvbGxlcnMvQWRtaW4vQWRtaW5NZW51Q29udHJvbGxlci5qYXZhXG4uLi5cblxucHVibGljIGNsYXNzIEFkbWluTWVudUNvbnRyb2xsZXIgaW1wbGVtZW50cyBJbml0aWFsaXphYmxlIHtcbiAgICBARlhNTFxuICAgIHByaXZhdGUgTWVudUJhciBtZW51QmFyO1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIE1lbnUgbWVudUhvbWU7XG5cbiAgICBARlhNTFxuICAgIHByaXZhdGUgTWVudUl0ZW0gbWVudUl0ZW1BY2NvdW50cztcblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBNZW51SXRlbSBtZW51SXRlbUJlc3RTZWxsaW5nO1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIE1lbnVJdGVtIG1lbnVJdGVtQ3VzdG9tZXJzO1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIE1lbnVJdGVtIG1lbnVJdGVtRGlzY291bnRzO1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIE1lbnVJdGVtIG1lbnVJdGVtT3ZlcnZpZXc7XG5cbiAgICBARlhNTFxuICAgIHByaXZhdGUgTWVudUl0ZW0gbWVudUl0ZW1QZXRzO1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIE1lbnVJdGVtIG1lbnVJdGVtUHJvZHVjdHM7XG5cbiAgICBARlhNTFxuICAgIHByaXZhdGUgTWVudUl0ZW0gbWVudUl0ZW1SZXZlbnVlO1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIE1lbnVJdGVtIG1lbnVJdGVtU3RhZmY7XG5cbiAgICBARlhNTFxuICAgIHByaXZhdGUgTWVudSBtZW51TG9nb3V0O1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIE1lbnUgbWVudU1hbmFnZW1lbnQ7XG5cbiAgICBARlhNTFxuICAgIHByaXZhdGUgTWVudSBtZW51UmVwb3J0cztcblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBNZW51IG1lbnVSZXZlbnVlO1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIE1lbnUgbWVudVN0YXRpc3RpY3M7XG5cbiAgICBARlhNTFxuICAgIHByaXZhdGUgTGFiZWwgbmFtZUxhYmVsO1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIEFuY2hvclBhbmUgcm9vdDtcblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBDaXJjbGUgdXNlckltYWdlO1xuLi4uXG5QYXRoOiBzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9BZG1pbi9EYXNoYm9hcmQuamF2YVxuLi4uXG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gYXJncyB0aGUgY29tbWFuZCBsaW5lIGFyZ3VtZW50c1xuICAgICAqL1xuICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBtYWluKFN0cmluZyBhcmdzW10pIHtcbiAgICAgICAgLyogU2V0IHRoZSBOaW1idXMgbG9vayBhbmQgZmVlbCAqL1xuICAgICAgICAvLzxlZGl0b3ItZm9sZCBkZWZhdWx0c3RhdGU9XCJjb2xsYXBzZWRcIiBkZXNjPVwiIExvb2sgYW5kIGZlZWwgc2V0dGluZyBjb2RlIChvcHRpb25hbCkgXCI+XG4gICAgICAgIC8qIElmIE5pbWJ1cyAoaW50cm9kdWNlZCBpbiBKYXZhIFNFIDYpIGlzIG5vdCBhdmFpbGFibGUsIHN0YXkgd2l0aCB0aGUgZGVmYXVsdCBsb29rIGFuZCBmZWVsLlxuICAgICAgICAgKiBGb3IgZGV0YWlscyBzZWUgaHR0cDovL2Rvd25sb2FkLm9yYWNsZS5jb20vamF2YXNlL3R1dG9yaWFsL3Vpc3dpbmcvbG9va2FuZGZlZWwvcGxhZi5odG1sIFxuICAgICAgICAgKi9cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGZvciAoamF2YXguc3dpbmcuVUlNYW5hZ2VyLkxvb2tBbmRGZWVsSW5mbyBpbmZvIDogamF2YXguc3dpbmcuVUlNYW5hZ2VyLmdldEluc3RhbGxlZExvb2tBbmRGZWVscygpKSB7XG4gICAgICAgICAgICAgICAgaWYgKFwiTmltYnVzXCIuZXF1YWxzKGluZm8uZ2V0TmFtZSgpKSkge1xuICAgICAgICAgICAgICAgICAgICBqYXZheC5zd2luZy5VSU1hbmFnZXIuc2V0TG9va0FuZEZlZWwoaW5mby5nZXRDbGFzc05hbWUoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbi4uLlxuICAgICAgICAvLzwvZWRpdG9yLWZvbGQ+XG5cbiAgICAgICAgLyogQ3JlYXRlIGFuZCBkaXNwbGF5IHRoZSBmb3JtICovXG4gICAgICAgIGphdmEuYXd0LkV2ZW50UXVldWUuaW52b2tlTGF0ZXIobmV3IFJ1bm5hYmxlKCkuLi4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1XzAxWGdvWTJYQmM1bmdZTmVxVkJhS0dSZCJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkU6L0hvY1RhcC8wMl9KQVZBLzAzX1Byb2plY3QvSW50ZXJuZXQgTWFuZ2VtZW50IFN5c3RlbSIsImZvbGRlclJvb3QiOiJFOi9Ib2NUYXAvMDJfSkFWQS8wM19Qcm9qZWN0L0ludGVybmV0IE1hbmdlbWVudCBTeXN0ZW0ifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJ0aW1lc3RhbXAiOiIyMDI1LTA1LTEzVDEzOjAwOjEzLjEwNFoiLCJyZXNwb25zZV90ZXh0IjoiTGV0IG1lIGNoZWNrIGZvciB0aGUgaW1wbGVtZW50YXRpb24gb2YgVXNlckRBTy5sb2dpbiBtZXRob2Q6XG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiODk4YTEyYzAtYTk2Mi00NTIxLWI4NTAtOGI2YzBhNTk2NWJiIiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV8wMUt3SlBYcDhicEJ2QW9TYUxrN2FXMjYiLCJ0b29sX25hbWUiOiJjb2RlYmFzZS1yZXRyaWV2YWwiLCJpbnB1dF9qc29uIjoie1wiaW5mb3JtYXRpb25fcmVxdWVzdFwiOiBcIkZpbmQgdGhlIGltcGxlbWVudGF0aW9uIG9mIFVzZXJEQU8ubG9naW4gbWV0aG9kIGluIHRoZSBwcm9qZWN0LiBBbHNvIGxvb2sgZm9yIGFueSBNYWluRnJhbWUgY2xhc3Mgb3IgdGhlIGNsYXNzIHRoYXQgc2hvdWxkIGJlIGRpc3BsYXllZCBhZnRlciBzdWNjZXNzZnVsIGxvZ2luIGluIHRoZSBpbnRlcm5ldC5tYW5nZW1lbnQuc3lzdGVtIHBhY2thZ2UuXCJ9IiwibWNwX3NlcnZlcl9uYW1lIjoiIiwibWNwX3Rvb2xfbmFtZSI6IiJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiTGV0IG1lIGNoZWNrIGZvciB0aGUgaW1wbGVtZW50YXRpb24gb2YgVXNlckRBTy5sb2dpbiBtZXRob2QgaW4gdGhlIHByb2plY3Q6XG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJUaGUgZm9sbG93aW5nIGNvZGUgc2VjdGlvbnMgd2VyZSByZXRyaWV2ZWQ6XG5QYXRoOiBzcmMvbWFpbi9qYXZhL2NvbS9zdG9yZS9hcHAvcGV0c3RvcmUvQ29udHJvbGxlcnMvTG9naW5Db250cm9sbGVyLmphdmFcbi4uLlxuXG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5EQU8uVXNlckRBTztcbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLkRBTy5TdGFmZkRBTztcbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLk1vZGVscy5FbnRpdGllcy5Vc2VyO1xuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuTW9kZWxzLkVudGl0aWVzLlN0YWZmO1xuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuU2Vzc2lvbnMuU2Vzc2lvbk1hbmFnZXI7XG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5WaWV3cy5BZG1pbkZhY3Rvcnk7XG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5WaWV3cy5WaWV3RmFjdG9yeTtcbmltcG9ydCBkZS5qZW5zZC5meC5nbHlwaHMuZm9udGF3ZXNvbWUuRm9udEF3ZXNvbWVJY29uO1xuaW1wb3J0IGRlLmplbnNkLmZ4LmdseXBocy5mb250YXdlc29tZS5Gb250QXdlc29tZUljb25WaWV3O1xuaW1wb3J0IGphdmFmeC5meG1sLkZYTUw7XG5pbXBvcnQgamF2YWZ4LmZ4bWwuSW5pdGlhbGl6YWJsZTtcbmltcG9ydCBqYXZhZnguc2NlbmUuY29udHJvbC4qO1xuaW1wb3J0IGphdmFmeC5zY2VuZS5pbnB1dC5Nb3VzZUV2ZW50O1xuaW1wb3J0IGphdmFmeC5zdGFnZS5TdGFnZTtcbmltcG9ydCBqYXZhZnguc2NlbmUuaW1hZ2UuSW1hZ2U7XG5pbXBvcnQgamF2YWZ4LnNjZW5lLmltYWdlLkltYWdlVmlldztcbmltcG9ydCBqYXZhZnguc2NlbmUucGFpbnQuSW1hZ2VQYXR0ZXJuO1xuaW1wb3J0IGphdmEudXRpbC5PYmplY3RzO1xuLi4uXG5cbnB1YmxpYyBjbGFzcyBMb2dpbkNvbnRyb2xsZXIgaW1wbGVtZW50cyBJbml0aWFsaXphYmxlIHtcblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBGb250QXdlc29tZUljb25WaWV3IGV5ZUljb247XG5cbiAgICBARlhNTFxuICAgIHByaXZhdGUgVGV4dEZpZWxkIHNob3dQYXNzd29yZDtcblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBQYXNzd29yZEZpZWxkIHBhc3N3b3JkRmllbGQ7XG5cbiAgICBARlhNTFxuICAgIHByaXZhdGUgVGV4dEZpZWxkIHVzZXJuYW1lRmllbGQ7XG5cbiAgICBARlhNTFxuICAgIHByaXZhdGUgQnV0dG9uIGxvZ2luQnV0dG9uO1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIExhYmVsIGVycm9yTGFiZWw7XG5cbiAgICBARlhNTFxuICAgIHByaXZhdGUgSHlwZXJsaW5rIGZvcmdvdFBhc3N3b3JkTGluaztcblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBJbWFnZVZpZXcgdXNlckltYWdlO1xuXG4gICAgcHJpdmF0ZSBkb3VibGUgeCwgeTtcblxuICAgIFVzZXJEQU8gdXNlckRBTyA9IG5ldyBVc2VyREFPKCk7XG4gICAgU3RhZmZEQU8gc3RhZmZEQU8gPSBTdGFmZkRBTy5nZXRJbnN0YW5jZSgpO1xuICAgIHB1YmxpYyBzdGF0aWMgaW50IGlkU3RhZmZDdXJyZW50O1xuICAgIHB1YmxpYyBzdGF0aWMgaW50IGlkQWRtaW5DdXJyZW50O1xuXG4gICAgcHJpdmF0ZSBTZXNzaW9uTWFuYWdlciBzZXNzaW9uTWFuYWdlciA9IG5ldyBTZXNzaW9uTWFuYWdlcigpO1xuLi4uXG5cbiAgICBwcml2YXRlIHZvaWQgc2V0dXBMb2dpbkJ1dHRvbigpIHtcbiAgICAgICAgbG9naW5CdXR0b24uc2V0T25BY3Rpb24oZXZlbnQgLT4gaGFuZGxlTG9naW4oKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB2b2lkIHNldHVwRm9yZ290UGFzc3dvcmRMaW5rKCkge1xuICAgICAgICBmb3Jnb3RQYXNzd29yZExpbmsuc2V0T25BY3Rpb24oZXZlbnQgLT4ge1xuICAgICAgICAgICAgU3RhZ2UgY3VycmVudFN0YWdlID0gKFN0YWdlKSB1c2VybmFtZUZpZWxkLmdldFNjZW5lKCkuZ2V0V2luZG93KCk7XG4gICAgICAgICAgICBWaWV3RmFjdG9yeS5nZXRJbnN0YW5jZSgpLnN3aXRjaENvbnRlbnQoXCJmb3Jnb3RwYXNzd29yZFwiLCBjdXJyZW50U3RhZ2UpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBARlhNTFxuICAgIHByaXZhdGUgdm9pZCBoYW5kbGVEcmFnZ2VkKE1vdXNlRXZlbnQgZXZlbnQpIHtcbiAgICAgICAgU3RhZ2Ugc3RhZ2UgPSAoU3RhZ2UpIHVzZXJuYW1lRmllbGQuZ2V0U2NlbmUoKS5nZXRXaW5kb3coKTtcbiAgICAgICAgc3RhZ2Uuc2V0WChldmVudC5nZXRTY3JlZW5YKCkgLSB4KTtcbiAgICAgICAgc3RhZ2Uuc2V0WShldmVudC5nZXRTY3JlZW5ZKCkgLSB5KTtcbiAgICB9XG5cbiAgICBARlhNTFxuICAgIHByaXZhdGUgdm9pZCBoYW5kbGVQcmVzc2VkKE1vdXNlRXZlbnQgZXZlbnQpIHtcbiAgICAgICAgeCA9IGV2ZW50LmdldFNjcmVlblgoKTtcbiAgICAgICAgeSA9IGV2ZW50LmdldFNjcmVlblkoKTtcbiAgICB9XG4uLi5cblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gVMOsbSB1c2VyIHRoZW8gdXNlcm5hbWVcbiAgICAgICAgICAgIFVzZXIgdXNlciA9IHVzZXJEQU8uZmluZEJ5VXNlcm5hbWUodXNlcm5hbWUpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZih1c2VyID09IG51bGwgfHwgdXNlci5nZXRVc2VybmFtZSgpID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBDb250cm9sbGVyVXRpbHMuc2hvd0FsZXJ0KEFsZXJ0LkFsZXJ0VHlwZS5FUlJPUiwgXCJM4buXaVwiLCBcIlTDqm4gxJHEg25nIG5o4bqtcCBraMO0bmcgxJHDum5nXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gS2nhu4NtIHRyYSB0w6puIMSRxINuZyBuaOG6rXBcbiAgICAgICAgICAgIGlmICghdXNlci5nZXRVc2VybmFtZSgpLmVxdWFscyh1c2VybmFtZSkpIHtcbiAgICAgICAgICAgICAgICBDb250cm9sbGVyVXRpbHMuc2hvd0FsZXJ0KEFsZXJ0LkFsZXJ0VHlwZS5FUlJPUiwgXCJM4buXaVwiLCBcIlTDqm4gxJHEg25nIG5o4bqtcCBraMO0bmcgxJHDum5nXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gS2nhu4NtIHRyYSBt4bqtdCBraOG6qXVcbiAgICAgICAgICAgIGlmKCFCQ3J5cHQuY2hlY2twdyhwYXNzd29yZCwgdXNlci5nZXRQYXNzd29yZCgpKSkge1xuICAgICAgICAgICAgICAgIENvbnRyb2xsZXJVdGlscy5zaG93QWxlcnQoQWxlcnQuQWxlcnRUeXBlLkVSUk9SLCBcIkzhu5dpXCIsIFwiTeG6rXQga2jhuql1IGtow7RuZyDEkcO6bmdcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzZXNzaW9uTWFuYWdlci5zZXRDdXJyZW50VXNlcih1c2VyKTtcblxuICAgICAgICAgICAgU3RhZ2UgY3VycmVudFN0YWdlID0gKFN0YWdlKSB1c2VybmFtZUZpZWxkLmdldFNjZW5lKCkuZ2V0V2luZG93KCk7XG5cbiAgICAgICAgICAgIGlmKHVzZXIuZ2V0Um9sZSgpLmVxdWFscyhVc2VyLlJPTEVfQURNSU4pKSB7XG4gICAgICAgICAgICAgICAgaWRBZG1pbkN1cnJlbnQgPSB1c2VyLmdldFVzZXJJZCgpO1xuICAgICAgICAgICAgICAgIEFkbWluRmFjdG9yeS5nZXRJbnN0YW5jZSgpLnN3aXRjaENvbnRlbnQoXCJkYXNoYm9hcmRcIiwgY3VycmVudFN0YWdlKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZih1c2VyLmdldFJvbGUoKS5lcXVhbHMoVXNlci5ST0xFX1VTRVIpKSB7XG4gICAgICAgICAgICAgICAgaWRTdGFmZkN1cnJlbnQgPSB1c2VyLmdldFVzZXJJZCgpO1xuICAgICAgICAgICAgICAgIFN0YWZmIHN0YWZmID0gc3RhZmZEQU8uZmluZEJ5VXNlcklkKHVzZXIuZ2V0VXNlcklkKCkpO1xuICAgICAgICAgICAgICAgIGlmIChzdGFmZiAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlc3Npb25NYW5hZ2VyLnNldEN1cnJlbnRTdGFmZihzdGFmZik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFZpZXdGYWN0b3J5LmdldEluc3RhbmNlKCkuc3dpdGNoQ29udGVudChcImRhc2hib2FyZFwiLCBjdXJyZW50U3RhZ2UpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBDb250cm9sbGVyVXRpbHMuc2hvd0FsZXJ0KEFsZXJ0LkFsZXJ0VHlwZS5FUlJPUiwgXCJM4buXaVwiLCBcIlZhaSB0csOyIG5nxrDhu51pIGTDuW5nIGtow7RuZyBo4bujcCBs4buHXCIpO1xuICAgICAgICAgICAgICAgIHNlc3Npb25NYW5hZ2VyLmNsZWFyKCk7XG4gICAgICAgICAgICB9XG4uLi5cblBhdGg6IHNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL0xvZ2luLmphdmFcbi8qXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0xpY2Vuc2VzL2xpY2Vuc2UtZGVmYXVsdC50eHQgdG8gY2hhbmdlIHRoaXMgbGljZW5zZVxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9HVUlGb3Jtcy9KRnJhbWUuamF2YSB0byBlZGl0IHRoaXMgdGVtcGxhdGVcbiAqL1xucGFja2FnZSBpbnRlcm5ldC5tYW5nZW1lbnQuc3lzdGVtO1xuXG5pbXBvcnQgREFPLlVzZXJEQU87XG5pbXBvcnQgTW9kZWwuVXNlcjtcbmltcG9ydCBqYXZheC5zd2luZy5KT3B0aW9uUGFuZTtcblxuLyoqXG4gKlxuICogQGF1dGhvciBOZ29jIFRoYW9cbiAqL1xucHVibGljIGNsYXNzIExvZ2luIGV4dGVuZHMgamF2YXguc3dpbmcuSkZyYW1lIHtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgbmV3IGZvcm0gTG9naW5cbiAgICAgKi9cbiAgICBwdWJsaWMgTG9naW4oKSB7XG4gICAgICAgIGluaXRDb21wb25lbnRzKCk7XG4gICAgICAgIHNldFRpdGxlKFwixJDEg25nIGvDvVwiKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBjbGVhcigpe1xuICAgICAgICB0eHRVc2VyTmFtZS5zZXRUZXh0KFwiXCIpO1xuICAgICAgICB0eHRQYXNzd29yZC5zZXRUZXh0KFwiXCIpO1xuICAgIH1cblxuICAgIHB1YmxpYyBib29sZWFuIHZhbGlkYXRlRmllbGRzKCl7XG4gICAgICAgIFN0cmluZyB1c2VyTmFtZSA9IHR4dFVzZXJOYW1lLmdldFRleHQoKTtcbiAgICAgICAgU3RyaW5nIHBhc3N3b3JkID0gdHh0UGFzc3dvcmQuZ2V0VGV4dCgpO1xuXG4gICAgICAgIGlmKHVzZXJOYW1lLmlzRW1wdHkoKSB8fCBwYXNzd29yZC5pc0VtcHR5KCkpe1xuICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXCJWdWkgbMOybmcga2jDtG5nIGLhu48gdHLhu5FuZyFcIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4uLi5cblxuICAgIHByaXZhdGUgdm9pZCBidG5Mb2dpbkFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5Mb2dpbkFjdGlvblBlcmZvcm1lZFxuICAgICAgICAvLyBUT0RPIGFkZCB5b3VyIGhhbmRsaW5nIGNvZGUgaGVyZTpcbiAgICAgICAgaWYodmFsaWRhdGVGaWVsZHMoKSkge1xuICAgICAgICAgICAgdHJ5e1xuICAgICAgICAgICAgICAgIFN0cmluZyB1c2VybmFtZSA9IHR4dFVzZXJOYW1lLmdldFRleHQoKS50cmltKCk7XG4gICAgICAgICAgICAgICAgU3RyaW5nIHBhc3N3b3JkID0gdHh0UGFzc3dvcmQuZ2V0VGV4dCgpLnRyaW0oKTtcblxuICAgICAgICAgICAgICAgIFVzZXIgdXNlciA9IG51bGw7XG4gICAgICAgICAgICAgICAgYm9vbGVhbiBpc1N1Y2Nlc3MgPSBVc2VyREFPLmxvZ2luKHVzZXJuYW1lLCBwYXNzd29yZCk7XG5cbiAgICAgICAgICAgICAgICBpZihpc1N1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2codGhpcywgXCLEkMSDbmcgbmjhuq1wIHRow6BuaCBjw7RuZyFcIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5JTkZPUk1BVElPTl9NRVNTQUdFKTtcbi8vICAgICAgICAgICAgICAgICAgICBuZXcgTWFpbkZyYW1lKCkuc2V0VmlzaWJsZSh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwb3NlKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2codGhpcywgXCJTYWkgdMOqbiDEkcSDbmcgbmjhuq1wIGhv4bq3YyBt4bqtdCBraOG6qXUuXCIsIFwiTOG7l2lcIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaChFeGNlcHRpb24gZXgpIHtcbiAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcIkzhu5dpOiBcIiArIGV4LmdldE1lc3NhZ2UoKSwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG5cbiAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5Mb2dpbkFjdGlvblBlcmZvcm1lZFxuXG4gICAgcHJpdmF0ZSB2b2lkIGJ0bkZvcmdvdFBhc3N3b3JkQWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkZvcmdvdFBhc3N3b3JkQWN0aW9uUGVyZm9ybWVkXG4gICAgICAgIC8vIE9wZW4gdGhlIEZvcmdvdFBhc3N3b3JkIGRpYWxvZ1xuICAgICAgICBGb3Jnb3RQYXNzd29yZCBmb3Jnb3RQYXNzd29yZERpYWxvZyA9IG5ldyBGb3Jnb3RQYXNzd29yZCh0aGlzLCB0cnVlKTtcbiAgICAgICAgZm9yZ290UGFzc3dvcmREaWFsb2cuc2V0VmlzaWJsZSh0cnVlKTtcbiAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5Gb3Jnb3RQYXNzd29yZEFjdGlvblBlcmZvcm1lZFxuXG4gICAgcHJpdmF0ZSB2b2lkIGJ0bkV4aXRBY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuRXhpdEFjdGlvblBlcmZvcm1lZFxuICAgICAgICAvLyBUT0RPIGFkZCB5b3VyIGhhbmRsaW5nIGNvZGUgaGVyZTpcbiAgICAgICAgaW50IHJlc3VsdCA9IEpPcHRpb25QYW5lLnNob3dDb25maXJtRGlhbG9nKG51bGwsIFwiQuG6oW4gY8OzIGNo4bqvYyBjaOG6r24gbXXhu5FuIHRob8OhdCBraMO0bmc/XCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuWUVTX05PX09QVElPTiwgSk9wdGlvblBhbmUuUVVFU1RJT05fTUVTU0FHRSk7XG5cbiAgICAgICAgaWYgKHJlc3VsdCA9PSBKT3B0aW9uUGFuZS5ZRVNfT1BUSU9OKSB7XG4gICAgICAgICAgICBTeXN0ZW0uZXhpdCgwKTtcbiAgICAgICAgfVxuICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0bkV4aXRBY3Rpb25QZXJmb3JtZWRcblxuICAgIHByaXZhdGUgdm9pZCBidG5TaWdudXBBY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuU2lnbnVwQWN0aW9uUGVyZm9ybWVkXG4gICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxuICAgICAgICBzZXRWaXNpYmxlKGZhbHNlKTtcbiAgICAgICAgbmV3IFNpZ25VcCgpLnNldFZpc2libGUodHJ1ZSk7XG4gICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuU2lnbnVwQWN0aW9uUGVyZm9ybWVkXG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvY29tL3N0b3JlL2FwcC9wZXRzdG9yZS9Db250cm9sbGVycy9BZG1pbi9EYXNoYm9hcmRDb250cm9sbGVyLmphdmFcbi4uLlxuXG4gICAgcHJpdmF0ZSB2b2lkIG5hdmlnYXRlVG8oU3RyaW5nIHZpZXdOYW1lKSB7XG4gICAgICAgIFN0YWdlIGN1cnJlbnRTdGFnZSA9IChTdGFnZSkgbG9nb3V0QnV0dG9uLmdldFNjZW5lKCkuZ2V0V2luZG93KCk7XG4gICAgICAgIEFkbWluRmFjdG9yeS5nZXRJbnN0YW5jZSgpLnN3aXRjaENvbnRlbnQodmlld05hbWUsIGN1cnJlbnRTdGFnZSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB2b2lkIGhhbmRsZUxvZ291dCgpIHtcbiAgICAgICAgLy8gU3RvcCBhdXRvLXJlZnJlc2ggaWYgYWN0aXZlXG4gICAgICAgIHN0b3BBdXRvUmVmcmVzaCgpO1xuXG4gICAgICAgIFN0YWdlIGN1cnJlbnRTdGFnZSA9IChTdGFnZSkgbG9nb3V0QnV0dG9uLmdldFNjZW5lKCkuZ2V0V2luZG93KCk7XG4gICAgICAgIGlmIChDb250cm9sbGVyVXRpbHMuc2hvd0NvbmZpcm1hdGlvbkFuZFdhaXQoXCLEkMSDbmcgeHXhuqV0XCIsIFwiQuG6oW4gY8OzIGNo4bqvYyBjaOG6r24gbXXhu5FuIMSRxINuZyB4deG6pXQga2jDtG5nP1xcbk5o4bqlbiBPSyDEkeG7gyB4w6FjIG5o4bqtbi5cIikpIHtcbiAgICAgICAgICAgIFNlc3Npb25NYW5hZ2VyLmNsZWFyKCk7XG4gICAgICAgICAgICBWaWV3RmFjdG9yeS5nZXRJbnN0YW5jZSgpLnN3aXRjaENvbnRlbnQoXCJsb2dpblwiLCBjdXJyZW50U3RhZ2UpO1xuICAgICAgICB9XG4gICAgfVxuXG5cbn1cbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9jb20vc3RvcmUvYXBwL3BldHN0b3JlL1BldFN0b3JlQXBwbGljYXRpb24uamF2YVxucGFja2FnZSBjb20uc3RvcmUuYXBwLnBldHN0b3JlO1xuXG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5Nb2RlbHMuRGF0YWJhc2VNYW5hZ2VyO1xuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuVmlld3MuTW9kZWxWaWV3O1xuaW1wb3J0IGphdmFmeC5hcHBsaWNhdGlvbi5BcHBsaWNhdGlvbjtcbmltcG9ydCBqYXZhZnguZnhtbC5GWE1MTG9hZGVyO1xuaW1wb3J0IGphdmFmeC5zY2VuZS5QYXJlbnQ7XG5pbXBvcnQgamF2YWZ4LnNjZW5lLlNjZW5lO1xuaW1wb3J0IGphdmFmeC5zdGFnZS5TdGFnZTtcblxuaW1wb3J0IGphdmEuaW8uSU9FeGNlcHRpb247XG5cbnB1YmxpYyBjbGFzcyBQZXRTdG9yZUFwcGxpY2F0aW9uIGV4dGVuZHMgQXBwbGljYXRpb24ge1xuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyB2b2lkIHN0YXJ0KFN0YWdlIHByaW1hcnlTdGFnZSkge1xuICAgICAgICBEYXRhYmFzZU1hbmFnZXIuY29ubmVjdCgpO1xuICAgICAgICBNb2RlbFZpZXcuZ2V0SW5zdGFuY2UoKS5nZXRWaWV3RmFjdG9yeSgpLnNob3dXaW5kb3coXCJsb2dpblwiKTtcbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9jb20vc3RvcmUvYXBwL3BldHN0b3JlL0NvbnRyb2xsZXJzL0FkbWluL0FkbWluTWVudUNvbnRyb2xsZXIuamF2YVxuLi4uXG5cbiAgICAgICAgTWVudUl0ZW0gbG9nb3V0TWVudUl0ZW0gPSBuZXcgTWVudUl0ZW0oXCLEkMSDbmcgeHXhuqV0XCIpO1xuICAgICAgICBsb2dvdXRNZW51SXRlbS5zZXRPbkFjdGlvbihlIC0+IGhhbmRsZUxvZ291dChudWxsKSk7XG4gICAgICAgIG1lbnVMb2dvdXQuZ2V0SXRlbXMoKS5hZGQobG9nb3V0TWVudUl0ZW0pO1xuICAgIH1cblxuICAgIEBGWE1MXG4gICAgdm9pZCBoYW5kbGVMb2dvdXQoQWN0aW9uRXZlbnQgZXZlbnQpIHtcbiAgICAgICAgU3RhZ2UgY3VycmVudFN0YWdlID0gKFN0YWdlKSByb290LmdldFNjZW5lKCkuZ2V0V2luZG93KCk7XG4gICAgICAgIGlmIChDb250cm9sbGVyVXRpbHMuc2hvd0NvbmZpcm1hdGlvbkFuZFdhaXQoXCLEkMSDbmcgeHXhuqV0XCIsIFwiQuG6oW4gY8OzIGNo4bqvYyBjaOG6r24gbXXhu5FuIMSRxINuZyB4deG6pXQga2jDtG5nP1xcbk5o4bqlbiBPSyDEkeG7gyB4w6FjIG5o4bqtbi5cIikpIHtcbiAgICAgICAgICAgIFNlc3Npb25NYW5hZ2VyLmNsZWFyKCk7XG4gICAgICAgICAgICBWaWV3RmFjdG9yeS5nZXRJbnN0YW5jZSgpLnN3aXRjaENvbnRlbnQoXCJsb2dpblwiLCBjdXJyZW50U3RhZ2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgQ29udHJvbGxlclV0aWxzLnNob3dBbGVydChBbGVydC5BbGVydFR5cGUuSU5GT1JNQVRJT04sIFwiVGjDtG5nIGLDoW9cIiwgXCLEkMSDbmcgeHXhuqV0IGtow7RuZyB0aMOgbmggY8O0bmdcIik7XG4gICAgICAgIH1cbiAgICB9XG59XG4uLi5cblBhdGg6IHNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL0ZvcmdvdFBhc3N3b3JkLmphdmFcbi4uLlxuXG4gICAgcHJpdmF0ZSB2b2lkIGJ0bkV4aXRBY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuRXhpdEFjdGlvblBlcmZvcm1lZFxuICAgICAgICAvLyBUT0RPIGFkZCB5b3VyIGhhbmRsaW5nIGNvZGUgaGVyZTpcbiAgICAgICAgaW50IHJlc3VsdCA9IEpPcHRpb25QYW5lLnNob3dDb25maXJtRGlhbG9nKG51bGwsIFwiQuG6oW4gY8OzIGNo4bqvYyBjaOG6r24gbXXhu5FuIHRob8OhdCBraMO0bmc/XCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuWUVTX05PX09QVElPTiwgSk9wdGlvblBhbmUuUVVFU1RJT05fTUVTU0FHRSk7XG5cbiAgICAgICAgaWYgKHJlc3VsdCA9PSBKT3B0aW9uUGFuZS5ZRVNfT1BUSU9OKSB7XG4gICAgICAgICAgICBuZXcgTG9naW4oKS5zZXRWaXNpYmxlKHRydWUpO1xuICAgICAgICAgICAgdGhpcy5kaXNwb3NlKCk7XG4gICAgICAgIH1cbiAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5FeGl0QWN0aW9uUGVyZm9ybWVkXG5cbiAgICBwcml2YXRlIHZvaWQgYnRuQ2hlY2tBY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuQ2hlY2tBY3Rpb25QZXJmb3JtZWRcbiAgICAgICAgU3lzdGVtLm91dC5wcmludChcIkhlbGxvXCIpO1xuICAgICAgICBpZiAodmFsaWRhdGVQaG9uZSgpKSB7XG4gICAgICAgICAgICBTdHJpbmcgcGhvbmUgPSB0eHRQaG9uZS5nZXRUZXh0KCk7XG4gICAgICAgICAgICBjdXJyZW50U3Vic2NyaWJlciA9IFN1YnNjcmliZXJEQU8uZ2V0QnlQaG9uZShwaG9uZSk7XG4uLi5cblBhdGg6IHNyYy9EQU8vVXNlckRBTy5qYXZhXG4vKlxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9MaWNlbnNlcy9saWNlbnNlLWRlZmF1bHQudHh0IHRvIGNoYW5nZSB0aGlzIGxpY2Vuc2VcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9DbGFzcy5qYXZhIHRvIGVkaXQgdGhpcyB0ZW1wbGF0ZVxuICovXG5wYWNrYWdlIERBTztcblxuaW1wb3J0IE1vZGVsLlVzZXI7XG5pbXBvcnQgamF2YS51dGlsLkxpc3Q7XG5cbi8qKlxuICpcbiAqIEBhdXRob3IgTmdvYyBUaGFvXG4gKi9cbnB1YmxpYyBjbGFzcyBVc2VyREFPe1xuXG4gICAgcHVibGljIHN0YXRpYyB2b2lkIGluc2VydChVc2VyIG9iaikge1xuICAgICAgICBcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIHZvaWQgdXBkYXRlKFVzZXIgb2JqKSB7XG4gICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbihcIk5vdCBzdXBwb3J0ZWQgeWV0LlwiKTsgLy8gR2VuZXJhdGVkIGZyb20gbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NvZGUvR2VuZXJhdGVkTWV0aG9kQm9keVxuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBkZWxldGUoaW50IGlkKSB7XG4gICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbihcIk5vdCBzdXBwb3J0ZWQgeWV0LlwiKTsgLy8gR2VuZXJhdGVkIGZyb20gbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NvZGUvR2VuZXJhdGVkTWV0aG9kQm9keVxuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgVXNlciBnZXRCeUlkKGludCBpZCkge1xuICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oXCJOb3Qgc3VwcG9ydGVkIHlldC5cIik7IC8vIEdlbmVyYXRlZCBmcm9tIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9Db2RlL0dlbmVyYXRlZE1ldGhvZEJvZHlcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIExpc3Q8VXNlcj4gZ2V0QWxsKCkge1xuICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oXCJOb3Qgc3VwcG9ydGVkIHlldC5cIik7IC8vIEdlbmVyYXRlZCBmcm9tIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9Db2RlL0dlbmVyYXRlZE1ldGhvZEJvZHlcbiAgICB9XG4gICAgXG59XG4uLi5cblBhdGg6IHNyYy9tYWluL3Jlc291cmNlcy9GWE1ML0FkbWluL0FkbWluTWVudS5meG1sXG4uLi5cblxuPEFuY2hvclBhbmUgZng6aWQ9XCJyb290XCIgcHJlZkhlaWdodD1cIjcwLjBcIiBwcmVmV2lkdGg9XCI5OTAuMFwiIHN0eWxlQ2xhc3M9XCJuYXYtY29udGFpbmVyXCIgc3R5bGVzaGVldHM9XCJALi4vLi4vU3R5bGVzL0FkbWluL0FkbWluTWVudS5jc3NcIiB4bWxucz1cImh0dHA6Ly9qYXZhZnguY29tL2phdmFmeC8yMy4wLjFcIiB4bWxuczpmeD1cImh0dHA6Ly9qYXZhZnguY29tL2Z4bWwvMVwiIGZ4OmNvbnRyb2xsZXI9XCJjb20uc3RvcmUuYXBwLnBldHN0b3JlLkNvbnRyb2xsZXJzLkFkbWluLkFkbWluTWVudUNvbnRyb2xsZXJcIj5cbiAgIDxjaGlsZHJlbj5cbiAgICAgIDxJbWFnZVZpZXcgZml0SGVpZ2h0PVwiNDAuMFwiIGZpdFdpZHRoPVwiMTUzLjBcIiBsYXlvdXRYPVwiMjQuMFwiIGxheW91dFk9XCIyMS4wXCIgcGlja09uQm91bmRzPVwidHJ1ZVwiIHByZXNlcnZlUmF0aW89XCJ0cnVlXCIgQW5jaG9yUGFuZS5sZWZ0QW5jaG9yPVwiMTUuMFwiIEFuY2hvclBhbmUudG9wQW5jaG9yPVwiMTUuMFwiPlxuICAgICAgICAgPGltYWdlPlxuICAgICAgICAgICAgPEltYWdlIHVybD1cIkAuLi8uLi9JbWFnZXMvbG9nbzEucG5nXCIgLz5cbiAgICAgICAgIDwvaW1hZ2U+XG4gICAgICA8L0ltYWdlVmlldz5cbiAgICAgIDxMYWJlbCBmeDppZD1cInVzZXJuYW1lTGFiZWxcIiBjb250ZW50RGlzcGxheT1cIlJJR0hUXCIgbGF5b3V0WD1cIjg1OC4wXCIgbGF5b3V0WT1cIjIxLjBcIiBzdHlsZUNsYXNzPVwibGFiZWwtdXNlcm5hbWVcIiB0ZXh0PVwiYWRtaW4xMjNcIiB0ZXh0QWxpZ25tZW50PVwiUklHSFRcIiAvPlxuLi4uXG5QYXRoOiBzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9BZG1pbi9EYXNoYm9hcmQuamF2YVxuLypcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvTGljZW5zZXMvbGljZW5zZS1kZWZhdWx0LnR4dCB0byBjaGFuZ2UgdGhpcyBsaWNlbnNlXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0dVSUZvcm1zL0pGcmFtZS5qYXZhIHRvIGVkaXQgdGhpcyB0ZW1wbGF0ZVxuICovXG5wYWNrYWdlIGludGVybmV0Lm1hbmdlbWVudC5zeXN0ZW0uQWRtaW47XG5cbmltcG9ydCBNb2RlbC5Vc2VyO1xuaW1wb3J0IGludGVybmV0Lm1hbmdlbWVudC5zeXN0ZW0uU2Vzc2lvbi5Vc2VyU2Vzc2lvbjtcbmltcG9ydCBqYXZhLnRpbWUuTG9jYWxUaW1lO1xuaW1wb3J0IGphdmF4LnN3aW5nLkpPcHRpb25QYW5lO1xuXG4vKipcbiAqXG4gKiBAYXV0aG9yIE5nb2MgVGhhb1xuICovXG5wdWJsaWMgY2xhc3MgRGFzaGJvYXJkIGV4dGVuZHMgamF2YXguc3dpbmcuSkZyYW1lIHtcblxuICAgIFVzZXIgYWRtaW4gPSBVc2VyU2Vzc2lvbi5nZXRDdXJyZW50VXNlcigpO1xuICAgIFxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgbmV3IGZvcm0gRGFzaGJvYXJkXG4gICAgICovXG4gICAgcHVibGljIERhc2hib2FyZCgpIHtcbiAgICAgICAgaW5pdENvbXBvbmVudHMoKTtcbiAgICAgICAgc2V0dXBIZWxsbygpO1xuICAgICAgICBzZXR1cFVzZXJuYW1lKCk7XG4gICAgfVxuICAgIFxuICAgIHByaXZhdGUgdm9pZCBzZXR1cEhlbGxvKCkge1xuICAgICAgICBMb2NhbFRpbWUgbm93ID0gTG9jYWxUaW1lLm5vdygpO1xuICAgICAgICBpbnQgaG91ciA9IG5vdy5nZXRIb3VyKCk7XG4gICAgICAgIFxuICAgICAgICBTdHJpbmcgZ3JlZXRpbmc7XG5cbiAgICAgICAgaWYgKGhvdXIgPj0gNSAmJiBob3VyIDwgMTEpIHtcbiAgICAgICAgICAgIGdyZWV0aW5nID0gXCJDaMOgbyBideG7lWkgc8OhbmcsXCI7XG4gICAgICAgIH0gZWxzZSBpZiAoaG91ciA+PSAxMSAmJiBob3VyIDwgMTUpIHtcbiAgICAgICAgICAgIGdyZWV0aW5nID0gXCJDaMOgbyBideG7lWkgdHLGsGEsXCI7XG4gICAgICAgIH0gZWxzZSBpZiAoaG91ciA+PSAxNSAmJiBob3VyIDwgMTcpIHtcbiAgICAgICAgICAgIGdyZWV0aW5nID0gXCJDaMOgbyBideG7lWkgY2hp4buBdSxcIjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGdyZWV0aW5nID0gXCJDaMOgbyBideG7lWkgdOG7kWksXCI7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGxiSGVsbG8uc2V0VGV4dChncmVldGluZyk7XG4gICAgfVxuICAgIFxuICAgIHByaXZhdGUgdm9pZCBzZXR1cFVzZXJuYW1lKCkge1xuICAgICAgICBsYlVzZXJOYW1lLnNldFRleHQoYWRtaW4uZ2V0VXNlcm5hbWUoKSk7XG4gICAgfVxuLi4uXG5cbiAgICAgICAgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQgbGF5b3V0ID0gbmV3IGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0KGdldENvbnRlbnRQYW5lKCkpO1xuICAgICAgICBnZXRDb250ZW50UGFuZSgpLnNldExheW91dChsYXlvdXQpO1xuICAgICAgICBsYXlvdXQuc2V0SG9yaXpvbnRhbEdyb3VwKFxuICAgICAgICAgICAgbGF5b3V0LmNyZWF0ZVBhcmFsbGVsR3JvdXAoamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuQWxpZ25tZW50LkxFQURJTkcpXG4gICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVNlcXVlbnRpYWxHcm91cCgpXG4gICAgICAgICAgICAgICAgLmFkZEdhcCgxODMsIDE4MywgMTgzKVxuICAgICAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlUGFyYWxsZWxHcm91cChqYXZheC5zd2luZy5Hcm91cExheW91dC5BbGlnbm1lbnQuTEVBRElORylcbiAgICAgICAgICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVTZXF1ZW50aWFsR3JvdXAoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChsYkhlbGxvKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZFByZWZlcnJlZEdhcChqYXZheC5zd2luZy5MYXlvdXRTdHlsZS5Db21wb25lbnRQbGFjZW1lbnQuUkVMQVRFRClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQobGJVc2VyTmFtZSkpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlUGFyYWxsZWxHcm91cChqYXZheC5zd2luZy5Hcm91cExheW91dC5BbGlnbm1lbnQuTEVBRElORywgZmFsc2UpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVNlcXVlbnRpYWxHcm91cCgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVQYXJhbGxlbEdyb3VwKGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LkFsaWdubWVudC5UUkFJTElORywgZmFsc2UpXG4uLi5cbiAgICAgICAgLy88L2VkaXRvci1mb2xkPlxuXG4gICAgICAgIC8qIENyZWF0ZSBhbmQgZGlzcGxheSB0aGUgZm9ybSAqL1xuICAgICAgICBqYXZhLmF3dC5FdmVudFF1ZXVlLmludm9rZUxhdGVyKG5ldyBSdW5uYWJsZSgpIHtcbiAgICAgICAgICAgIHB1YmxpYyB2b2lkIHJ1bigpIHtcbiAgICAgICAgICAgICAgICBuZXcgRGFzaGJvYXJkKCkuc2V0VmlzaWJsZSh0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gVmFyaWFibGVzIGRlY2xhcmF0aW9uIC0gZG8gbm90IG1vZGlmeS8vR0VOLUJFR0lOOnZhcmlhYmxlc1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkJ1dHRvbiBidG5Db250cmFjdDtcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpCdXR0b24gYnRuQ3VzdG9tZXI7XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KQnV0dG9uIGJ0bkV4aXQ7XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KQnV0dG9uIGJ0bkhpc3Rvcnk7XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KQnV0dG9uIGJ0blBsYW47XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KQnV0dG9uIGJ0blN0YXRpc3RpYztcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpCdXR0b24gYnRuVXNlcjtcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpTZXBhcmF0b3IgalNlcGFyYXRvcjE7XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KTGFiZWwgbGJIZWxsbztcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpMYWJlbCBsYlVzZXJOYW1lO1xuICAgIC8vIEVuZCBvZiB2YXJpYWJsZXMgZGVjbGFyYXRpb24vL0dFTi1FTkQ6dmFyaWFibGVzXG59XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvY29tL3N0b3JlL2FwcC9wZXRzdG9yZS9WaWV3cy9BZG1pbkZhY3RvcnkuamF2YVxuLi4uXG5cbiAgICBwdWJsaWMgdm9pZCBzaG93V2luZG93KFN0cmluZyBmeG1sTmFtZSkge1xuICAgICAgICBTdGFnZSBzdGFnZSA9IG5ldyBTdGFnZSgpO1xuICAgICAgICBQYXJlbnQgcm9vdCA9IG51bGw7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBzd2l0Y2ggKGZ4bWxOYW1lLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICAgICAgICBjYXNlIFwiZGFzaGJvYXJkXCI6XG4gICAgICAgICAgICAgICAgICAgIHJvb3QgPSBsb2FkRlhNTChEQVNIQk9BUkRfRlhNTCk7XG4gICAgICAgICAgICAgICAgICAgIHN0YWdlLnNldFRpdGxlKFwiQuG6o25nIMSRaeG7gXUga2hp4buDbiBBZG1pblwiKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcInVzZXJtYW5hZ2VtZW50XCI6XG4gICAgICAgICAgICAgICAgICAgIHJvb3QgPSBsb2FkRlhNTChVU0VSTUFOQUdFTUVOVF9GWE1MKTtcbiAgICAgICAgICAgICAgICAgICAgc3RhZ2Uuc2V0VGl0bGUoXCJRdeG6o24gbMO9IHTDoGkga2hv4bqjblwiKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcImN1c3RvbWVybWFuYWdlbWVudFwiOlxuICAgICAgICAgICAgICAgICAgICByb290ID0gbG9hZEZYTUwoQ1VTVE9NRVJNQU5BR0VNRU5UX0ZYTUwpO1xuICAgICAgICAgICAgICAgICAgICBzdGFnZS5zZXRUaXRsZShcIlF14bqjbiBsw70ga2jDoWNoIGjDoG5nXCIpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiZGlzY291bnRtYW5hZ2VtZW50XCI6XG4gICAgICAgICAgICAgICAgICAgIHJvb3QgPSBsb2FkRlhNTChESVNDT1VOVE1BTkFHRU1FTlRfRlhNTCk7XG4gICAgICAgICAgICAgICAgICAgIHN0YWdlLnNldFRpdGxlKFwiUXXhuqNuIGzDvSBraHV54bq/biBtw6NpXCIpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwicGV0bWFuYWdlbWVudFwiOlxuICAgICAgICAgICAgICAgICAgICByb290ID0gbG9hZEZYTUwoUEVUTUFOQUdFTUVOVF9GWE1MKTtcbiAgICAgICAgICAgICAgICAgICAgc3RhZ2Uuc2V0VGl0bGUoXCJRdeG6o24gbMO9IHRow7ogY8awbmdcIik7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJwcm9kdWN0bWFuYWdlbWVudFwiOlxuICAgICAgICAgICAgICAgICAgICByb290ID0gbG9hZEZYTUwoUFJPRFVDVE1BTkFHRU1FTlRfRlhNTCk7XG4gICAgICAgICAgICAgICAgICAgIHN0YWdlLnNldFRpdGxlKFwiUXXhuqNuIGzDvSBz4bqjbiBwaOG6qW1cIik7XG4uLi5cblBhdGg6IHNyYy9tYWluL3Jlc291cmNlcy9GWE1ML0FkbWluL0Rhc2hib2FyZC5meG1sXG4uLi5cblxuPFZCb3ggcHJlZkhlaWdodD1cIjUxMi4wXCIgcHJlZldpZHRoPVwiOTkwLjBcIiBzdHlsZXNoZWV0cz1cIkAuLi8uLi9TdHlsZXMvQWRtaW4vRGFzaGJvYXJkLmNzc1wiIHhtbG5zPVwiaHR0cDovL2phdmFmeC5jb20vamF2YWZ4LzIzLjAuMVwiIHhtbG5zOmZ4PVwiaHR0cDovL2phdmFmeC5jb20vZnhtbC8xXCIgZng6Y29udHJvbGxlcj1cImNvbS5zdG9yZS5hcHAucGV0c3RvcmUuQ29udHJvbGxlcnMuQWRtaW4uRGFzaGJvYXJkQ29udHJvbGxlclwiPlxuICAgIDxjaGlsZHJlbj5cbiAgICAgICAgPGZ4OmluY2x1ZGUgc291cmNlPVwiQWRtaW5NZW51LmZ4bWxcIiAvPlxuICAgICAgICA8U2Nyb2xsUGFuZSBmaXRUb1dpZHRoPVwidHJ1ZVwiIHByZWZIZWlnaHQ9XCI0NDIuMFwiIHByZWZXaWR0aD1cIjk5MC4wXCIgc3R5bGVDbGFzcz1cImRhc2hib2FyZC1jb250YWluZXJcIj5cbiAgICAgICAgICAgIDxjb250ZW50PlxuICAgICAgICAgICAgICAgIDxWQm94IHNwYWNpbmc9XCIyMC4wXCI+XG4gICAgICAgICAgICAgICAgICAgIDxwYWRkaW5nPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEluc2V0cyBib3R0b209XCIyMC4wXCIgbGVmdD1cIjIwLjBcIiByaWdodD1cIjIwLjBcIiB0b3A9XCIyMC4wXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9wYWRkaW5nPlxuICAgICAgICAgICAgICAgICAgICA8Y2hpbGRyZW4+XG4gICAgICAgICAgICAgICAgICAgICAgICA8IS0tIFdlbGNvbWUgU2VjdGlvbiAtLT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxIQm94IGFsaWdubWVudD1cIkNFTlRFUlwiIHN0eWxlQ2xhc3M9XCJ3ZWxjb21lLXNlY3Rpb25cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Y2hpbGRyZW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxMYWJlbCBzdHlsZUNsYXNzPVwid2VsY29tZS10ZXh0XCIgdGV4dD1cIlhpbiBjaMOgbyBRdeG6o24gdHLhu4sgdmnDqm5cIiBIQm94Lmhncm93PVwiQUxXQVlTXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Zm9udD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9udCBuYW1lPVwiU3lzdGVtIEJvbGRcIiBzaXplPVwiMjQuMFwiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2ZvbnQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SEJveC5tYXJnaW4+XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvY29tL3N0b3JlL2FwcC9wZXRzdG9yZS9EQU8vVXNlckRBTy5qYXZhXG5wYWNrYWdlIGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuREFPO1xuXG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5Nb2RlbHMuRW50aXRpZXMuVXNlcjtcbmltcG9ydCBvcmcubWluZHJvdC5qYmNyeXB0LkJDcnlwdDtcblxuaW1wb3J0IGphdmEuc3FsLio7XG5pbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDtcbmltcG9ydCBqYXZhLnV0aWwuQmFzZTY0O1xuXG5wdWJsaWMgY2xhc3MgVXNlckRBTyBpbXBsZW1lbnRzIEJhc2VEQU88VXNlciwgSW50ZWdlcj4ge1xuICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgaW50IGlzRHVwbGljYXRlID0gLTE7XG5cbiAgICBwdWJsaWMgc3RhdGljIFVzZXJEQU8gZ2V0SW5zdGFuY2UoKSB7XG4gICAgICAgIHJldHVybiBuZXcgVXNlckRBTygpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgU3RyaW5nIGVuY29kZShTdHJpbmcgcGFzc3dvcmQpIHtcbi8vICAgICAgICByZXR1cm4gQmFzZTY0LmdldEVuY29kZXIoKS5lbmNvZGVUb1N0cmluZyhwYXNzd29yZC5nZXRCeXRlcygpKTtcbiAgICAgICAgcmV0dXJuIEJDcnlwdC5oYXNocHcocGFzc3dvcmQsIEJDcnlwdC5nZW5zYWx0KCkpO1xuICAgIH1cbi4uLlxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25uID0gRGF0YWJhc2VVdGlsLmdldENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgIFN0cmluZyBzcWwgPSBcIklOU0VSVCBJTlRPIFVzZXJzICh1c2VybmFtZSwgcGFzc3dvcmQsIHJvbGUsIGltYWdlX3VybCwgaXNBY3RpdmUpIFZBTFVFUyAoPywgPywgPywgPywgPylcIjtcbiAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsLCBTdGF0ZW1lbnQuUkVUVVJOX0dFTkVSQVRFRF9LRVlTKTtcblxuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMSwgZW50aXR5LmdldFVzZXJuYW1lKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMiwgZW5jb2RlKGVudGl0eS5nZXRQYXNzd29yZCgpKSk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygzLCBlbnRpdHkuZ2V0Um9sZSgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDQsIGVudGl0eS5nZXRJbWFnZVVybCgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0Qm9vbGVhbig1LCBlbnRpdHkuaXNBY3RpdmUoKSk7XG5cbiAgICAgICAgICAgIGludCBhZmZlY3RlZFJvd3MgPSBzdG10LmV4ZWN1dGVVcGRhdGUoKTtcbiAgICAgICAgICAgIGlmIChhZmZlY3RlZFJvd3MgPT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0cnkgKFJlc3VsdFNldCBnZW5lcmF0ZWRLZXlzID0gc3RtdC5nZXRHZW5lcmF0ZWRLZXlzKCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoZ2VuZXJhdGVkS2V5cy5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdlbmVyYXRlZEtleXMuZ2V0SW50KDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgRGF0YWJhc2VVdGlsLmNsb3NlUmVzb3VyY2VzKHJzLCBzdG10LCBjb25uKTtcbiAgICAgICAgfVxuICAgIH1cbi4uLlxuIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV8wMTk2M1pNNFRheHhEaFhXQ0RoeUZkUFAifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJFOi9Ib2NUYXAvMDJfSkFWQS8wM19Qcm9qZWN0L0ludGVybmV0IE1hbmdlbWVudCBTeXN0ZW0iLCJmb2xkZXJSb290IjoiRTovSG9jVGFwLzAyX0pBVkEvMDNfUHJvamVjdC9JbnRlcm5ldCBNYW5nZW1lbnQgU3lzdGVtIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwidGltZXN0YW1wIjoiMjAyNS0wNS0xM1QxMzowMDoyOC44MzlaIiwicmVzcG9uc2VfdGV4dCI6IkxldCBtZSBjaGVjayBmb3IgdGhlIGltcGxlbWVudGF0aW9uIG9mIFVzZXJEQU8ubG9naW4gbWV0aG9kIGluIHRoZSBwcm9qZWN0OlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6ImM1YmUxZTk0LTczMWYtNDNmNy04MTViLWE3NjYyMzIwZDQ1NCIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfMDFKMmJGbnQ0ZGJ4dEtuWjhYNmdDV1ZnIiwidG9vbF9uYW1lIjoiY29kZWJhc2UtcmV0cmlldmFsIiwiaW5wdXRfanNvbiI6IntcImluZm9ybWF0aW9uX3JlcXVlc3RcIjogXCJGaW5kIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgVXNlckRBTy5sb2dpbiBtZXRob2QgaW4gdGhlIERBTyBwYWNrYWdlLiBBbHNvIGxvb2sgZm9yIGFueSBNYWluRnJhbWUgY2xhc3Mgb3IgdGhlIGNsYXNzIHRoYXQgc2hvdWxkIGJlIGRpc3BsYXllZCBhZnRlciBzdWNjZXNzZnVsIGxvZ2luIGluIHRoZSBpbnRlcm5ldC5tYW5nZW1lbnQuc3lzdGVtIHBhY2thZ2UuXCJ9IiwibWNwX3NlcnZlcl9uYW1lIjoiIiwibWNwX3Rvb2xfbmFtZSI6IiJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiQmFzZWQgb24gdGhlIGluZm9ybWF0aW9uIGdhdGhlcmVkLCBsZXQgbWUgbm93IGxvb2sgZm9yIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgVXNlckRBTy5sb2dpbiBtZXRob2Q6XG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJUaGUgZm9sbG93aW5nIGNvZGUgc2VjdGlvbnMgd2VyZSByZXRyaWV2ZWQ6XG5QYXRoOiBzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9Mb2dpbi5qYXZhXG4vKlxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9MaWNlbnNlcy9saWNlbnNlLWRlZmF1bHQudHh0IHRvIGNoYW5nZSB0aGlzIGxpY2Vuc2VcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvR1VJRm9ybXMvSkZyYW1lLmphdmEgdG8gZWRpdCB0aGlzIHRlbXBsYXRlXG4gKi9cbnBhY2thZ2UgaW50ZXJuZXQubWFuZ2VtZW50LnN5c3RlbTtcblxuaW1wb3J0IERBTy5Vc2VyREFPO1xuaW1wb3J0IE1vZGVsLlVzZXI7XG5pbXBvcnQgamF2YXguc3dpbmcuSk9wdGlvblBhbmU7XG4uLi5cblxuICAgIHByaXZhdGUgdm9pZCBidG5Mb2dpbkFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5Mb2dpbkFjdGlvblBlcmZvcm1lZFxuICAgICAgICAvLyBUT0RPIGFkZCB5b3VyIGhhbmRsaW5nIGNvZGUgaGVyZTpcbiAgICAgICAgaWYodmFsaWRhdGVGaWVsZHMoKSkge1xuICAgICAgICAgICAgdHJ5e1xuICAgICAgICAgICAgICAgIFN0cmluZyB1c2VybmFtZSA9IHR4dFVzZXJOYW1lLmdldFRleHQoKS50cmltKCk7XG4gICAgICAgICAgICAgICAgU3RyaW5nIHBhc3N3b3JkID0gdHh0UGFzc3dvcmQuZ2V0VGV4dCgpLnRyaW0oKTtcblxuICAgICAgICAgICAgICAgIFVzZXIgdXNlciA9IG51bGw7XG4gICAgICAgICAgICAgICAgYm9vbGVhbiBpc1N1Y2Nlc3MgPSBVc2VyREFPLmxvZ2luKHVzZXJuYW1lLCBwYXNzd29yZCk7XG5cbiAgICAgICAgICAgICAgICBpZihpc1N1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2codGhpcywgXCLEkMSDbmcgbmjhuq1wIHRow6BuaCBjw7RuZyFcIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5JTkZPUk1BVElPTl9NRVNTQUdFKTtcbi8vICAgICAgICAgICAgICAgICAgICBuZXcgTWFpbkZyYW1lKCkuc2V0VmlzaWJsZSh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwb3NlKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2codGhpcywgXCJTYWkgdMOqbiDEkcSDbmcgbmjhuq1wIGhv4bq3YyBt4bqtdCBraOG6qXUuXCIsIFwiTOG7l2lcIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaChFeGNlcHRpb24gZXgpIHtcbiAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcIkzhu5dpOiBcIiArIGV4LmdldE1lc3NhZ2UoKSwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG5cbiAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5Mb2dpbkFjdGlvblBlcmZvcm1lZFxuXG4gICAgcHJpdmF0ZSB2b2lkIGJ0bkZvcmdvdFBhc3N3b3JkQWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkZvcmdvdFBhc3N3b3JkQWN0aW9uUGVyZm9ybWVkXG4gICAgICAgIC8vIE9wZW4gdGhlIEZvcmdvdFBhc3N3b3JkIGRpYWxvZ1xuICAgICAgICBGb3Jnb3RQYXNzd29yZCBmb3Jnb3RQYXNzd29yZERpYWxvZyA9IG5ldyBGb3Jnb3RQYXNzd29yZCh0aGlzLCB0cnVlKTtcbiAgICAgICAgZm9yZ290UGFzc3dvcmREaWFsb2cuc2V0VmlzaWJsZSh0cnVlKTtcbiAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5Gb3Jnb3RQYXNzd29yZEFjdGlvblBlcmZvcm1lZFxuXG4gICAgcHJpdmF0ZSB2b2lkIGJ0bkV4aXRBY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuRXhpdEFjdGlvblBlcmZvcm1lZFxuICAgICAgICAvLyBUT0RPIGFkZCB5b3VyIGhhbmRsaW5nIGNvZGUgaGVyZTpcbiAgICAgICAgaW50IHJlc3VsdCA9IEpPcHRpb25QYW5lLnNob3dDb25maXJtRGlhbG9nKG51bGwsIFwiQuG6oW4gY8OzIGNo4bqvYyBjaOG6r24gbXXhu5FuIHRob8OhdCBraMO0bmc/XCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuWUVTX05PX09QVElPTiwgSk9wdGlvblBhbmUuUVVFU1RJT05fTUVTU0FHRSk7XG5cbiAgICAgICAgaWYgKHJlc3VsdCA9PSBKT3B0aW9uUGFuZS5ZRVNfT1BUSU9OKSB7XG4gICAgICAgICAgICBTeXN0ZW0uZXhpdCgwKTtcbiAgICAgICAgfVxuICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0bkV4aXRBY3Rpb25QZXJmb3JtZWRcblxuICAgIHByaXZhdGUgdm9pZCBidG5TaWdudXBBY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuU2lnbnVwQWN0aW9uUGVyZm9ybWVkXG4gICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxuICAgICAgICBzZXRWaXNpYmxlKGZhbHNlKTtcbiAgICAgICAgbmV3IFNpZ25VcCgpLnNldFZpc2libGUodHJ1ZSk7XG4gICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuU2lnbnVwQWN0aW9uUGVyZm9ybWVkXG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvY29tL3N0b3JlL2FwcC9wZXRzdG9yZS9Db250cm9sbGVycy9Mb2dpbkNvbnRyb2xsZXIuamF2YVxuLi4uXG5cbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLkRBTy5Vc2VyREFPO1xuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuREFPLlN0YWZmREFPO1xuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuTW9kZWxzLkVudGl0aWVzLlVzZXI7XG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5Nb2RlbHMuRW50aXRpZXMuU3RhZmY7XG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5TZXNzaW9ucy5TZXNzaW9uTWFuYWdlcjtcbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLlZpZXdzLkFkbWluRmFjdG9yeTtcbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLlZpZXdzLlZpZXdGYWN0b3J5O1xuaW1wb3J0IGRlLmplbnNkLmZ4LmdseXBocy5mb250YXdlc29tZS5Gb250QXdlc29tZUljb247XG5pbXBvcnQgZGUuamVuc2QuZnguZ2x5cGhzLmZvbnRhd2Vzb21lLkZvbnRBd2Vzb21lSWNvblZpZXc7XG5pbXBvcnQgamF2YWZ4LmZ4bWwuRlhNTDtcbmltcG9ydCBqYXZhZnguZnhtbC5Jbml0aWFsaXphYmxlO1xuaW1wb3J0IGphdmFmeC5zY2VuZS5jb250cm9sLio7XG5pbXBvcnQgamF2YWZ4LnNjZW5lLmlucHV0Lk1vdXNlRXZlbnQ7XG5pbXBvcnQgamF2YWZ4LnN0YWdlLlN0YWdlO1xuaW1wb3J0IGphdmFmeC5zY2VuZS5pbWFnZS5JbWFnZTtcbmltcG9ydCBqYXZhZnguc2NlbmUuaW1hZ2UuSW1hZ2VWaWV3O1xuaW1wb3J0IGphdmFmeC5zY2VuZS5wYWludC5JbWFnZVBhdHRlcm47XG5pbXBvcnQgamF2YS51dGlsLk9iamVjdHM7XG4uLi5cblxucHVibGljIGNsYXNzIExvZ2luQ29udHJvbGxlciBpbXBsZW1lbnRzIEluaXRpYWxpemFibGUge1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIEZvbnRBd2Vzb21lSWNvblZpZXcgZXllSWNvbjtcblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBUZXh0RmllbGQgc2hvd1Bhc3N3b3JkO1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIFBhc3N3b3JkRmllbGQgcGFzc3dvcmRGaWVsZDtcblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBUZXh0RmllbGQgdXNlcm5hbWVGaWVsZDtcblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBCdXR0b24gbG9naW5CdXR0b247XG5cbiAgICBARlhNTFxuICAgIHByaXZhdGUgTGFiZWwgZXJyb3JMYWJlbDtcblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBIeXBlcmxpbmsgZm9yZ290UGFzc3dvcmRMaW5rO1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIEltYWdlVmlldyB1c2VySW1hZ2U7XG5cbiAgICBwcml2YXRlIGRvdWJsZSB4LCB5O1xuXG4gICAgVXNlckRBTyB1c2VyREFPID0gbmV3IFVzZXJEQU8oKTtcbiAgICBTdGFmZkRBTyBzdGFmZkRBTyA9IFN0YWZmREFPLmdldEluc3RhbmNlKCk7XG4gICAgcHVibGljIHN0YXRpYyBpbnQgaWRTdGFmZkN1cnJlbnQ7XG4gICAgcHVibGljIHN0YXRpYyBpbnQgaWRBZG1pbkN1cnJlbnQ7XG5cbiAgICBwcml2YXRlIFNlc3Npb25NYW5hZ2VyIHNlc3Npb25NYW5hZ2VyID0gbmV3IFNlc3Npb25NYW5hZ2VyKCk7XG4uLi5cblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gVMOsbSB1c2VyIHRoZW8gdXNlcm5hbWVcbiAgICAgICAgICAgIFVzZXIgdXNlciA9IHVzZXJEQU8uZmluZEJ5VXNlcm5hbWUodXNlcm5hbWUpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZih1c2VyID09IG51bGwgfHwgdXNlci5nZXRVc2VybmFtZSgpID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBDb250cm9sbGVyVXRpbHMuc2hvd0FsZXJ0KEFsZXJ0LkFsZXJ0VHlwZS5FUlJPUiwgXCJM4buXaVwiLCBcIlTDqm4gxJHEg25nIG5o4bqtcCBraMO0bmcgxJHDum5nXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gS2nhu4NtIHRyYSB0w6puIMSRxINuZyBuaOG6rXBcbiAgICAgICAgICAgIGlmICghdXNlci5nZXRVc2VybmFtZSgpLmVxdWFscyh1c2VybmFtZSkpIHtcbiAgICAgICAgICAgICAgICBDb250cm9sbGVyVXRpbHMuc2hvd0FsZXJ0KEFsZXJ0LkFsZXJ0VHlwZS5FUlJPUiwgXCJM4buXaVwiLCBcIlTDqm4gxJHEg25nIG5o4bqtcCBraMO0bmcgxJHDum5nXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gS2nhu4NtIHRyYSBt4bqtdCBraOG6qXVcbiAgICAgICAgICAgIGlmKCFCQ3J5cHQuY2hlY2twdyhwYXNzd29yZCwgdXNlci5nZXRQYXNzd29yZCgpKSkge1xuICAgICAgICAgICAgICAgIENvbnRyb2xsZXJVdGlscy5zaG93QWxlcnQoQWxlcnQuQWxlcnRUeXBlLkVSUk9SLCBcIkzhu5dpXCIsIFwiTeG6rXQga2jhuql1IGtow7RuZyDEkcO6bmdcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzZXNzaW9uTWFuYWdlci5zZXRDdXJyZW50VXNlcih1c2VyKTtcblxuICAgICAgICAgICAgU3RhZ2UgY3VycmVudFN0YWdlID0gKFN0YWdlKSB1c2VybmFtZUZpZWxkLmdldFNjZW5lKCkuZ2V0V2luZG93KCk7XG5cbiAgICAgICAgICAgIGlmKHVzZXIuZ2V0Um9sZSgpLmVxdWFscyhVc2VyLlJPTEVfQURNSU4pKSB7XG4gICAgICAgICAgICAgICAgaWRBZG1pbkN1cnJlbnQgPSB1c2VyLmdldFVzZXJJZCgpO1xuICAgICAgICAgICAgICAgIEFkbWluRmFjdG9yeS5nZXRJbnN0YW5jZSgpLnN3aXRjaENvbnRlbnQoXCJkYXNoYm9hcmRcIiwgY3VycmVudFN0YWdlKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZih1c2VyLmdldFJvbGUoKS5lcXVhbHMoVXNlci5ST0xFX1VTRVIpKSB7XG4gICAgICAgICAgICAgICAgaWRTdGFmZkN1cnJlbnQgPSB1c2VyLmdldFVzZXJJZCgpO1xuICAgICAgICAgICAgICAgIFN0YWZmIHN0YWZmID0gc3RhZmZEQU8uZmluZEJ5VXNlcklkKHVzZXIuZ2V0VXNlcklkKCkpO1xuICAgICAgICAgICAgICAgIGlmIChzdGFmZiAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlc3Npb25NYW5hZ2VyLnNldEN1cnJlbnRTdGFmZihzdGFmZik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFZpZXdGYWN0b3J5LmdldEluc3RhbmNlKCkuc3dpdGNoQ29udGVudChcImRhc2hib2FyZFwiLCBjdXJyZW50U3RhZ2UpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBDb250cm9sbGVyVXRpbHMuc2hvd0FsZXJ0KEFsZXJ0LkFsZXJ0VHlwZS5FUlJPUiwgXCJM4buXaVwiLCBcIlZhaSB0csOyIG5nxrDhu51pIGTDuW5nIGtow7RuZyBo4bujcCBs4buHXCIpO1xuICAgICAgICAgICAgICAgIHNlc3Npb25NYW5hZ2VyLmNsZWFyKCk7XG4gICAgICAgICAgICB9XG4uLi5cblBhdGg6IHNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL0ZvcmdvdFBhc3N3b3JkLmphdmFcbi8qXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0xpY2Vuc2VzL2xpY2Vuc2UtZGVmYXVsdC50eHQgdG8gY2hhbmdlIHRoaXMgbGljZW5zZVxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9HVUlGb3Jtcy9KRnJhbWUuamF2YSB0byBlZGl0IHRoaXMgdGVtcGxhdGVcbiAqL1xucGFja2FnZSBpbnRlcm5ldC5tYW5nZW1lbnQuc3lzdGVtO1xuXG5pbXBvcnQgREFPLlN1YnNjcmliZXJEQU87XG5pbXBvcnQgTW9kZWwuU3Vic2NyaWJlcjtcbmltcG9ydCBqYXZheC5zd2luZy5KT3B0aW9uUGFuZTtcbmltcG9ydCBpbnRlcm5ldC5tYW5nZW1lbnQuc3lzdGVtLkxvZ2luO1xuLi4uXG5cbiAgICBwcml2YXRlIHZvaWQgYnRuRXhpdEFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5FeGl0QWN0aW9uUGVyZm9ybWVkXG4gICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxuICAgICAgICBpbnQgcmVzdWx0ID0gSk9wdGlvblBhbmUuc2hvd0NvbmZpcm1EaWFsb2cobnVsbCwgXCJC4bqhbiBjw7MgY2jhuq9jIGNo4bqvbiBtdeG7kW4gdGhvw6F0IGtow7RuZz9cIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5ZRVNfTk9fT1BUSU9OLCBKT3B0aW9uUGFuZS5RVUVTVElPTl9NRVNTQUdFKTtcblxuICAgICAgICBpZiAocmVzdWx0ID09IEpPcHRpb25QYW5lLllFU19PUFRJT04pIHtcbiAgICAgICAgICAgIG5ldyBMb2dpbigpLnNldFZpc2libGUodHJ1ZSk7XG4gICAgICAgICAgICB0aGlzLmRpc3Bvc2UoKTtcbiAgICAgICAgfVxuICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0bkV4aXRBY3Rpb25QZXJmb3JtZWRcblxuICAgIHByaXZhdGUgdm9pZCBidG5DaGVja0FjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5DaGVja0FjdGlvblBlcmZvcm1lZFxuICAgICAgICBTeXN0ZW0ub3V0LnByaW50KFwiSGVsbG9cIik7XG4gICAgICAgIGlmICh2YWxpZGF0ZVBob25lKCkpIHtcbiAgICAgICAgICAgIFN0cmluZyBwaG9uZSA9IHR4dFBob25lLmdldFRleHQoKTtcbiAgICAgICAgICAgIGN1cnJlbnRTdWJzY3JpYmVyID0gU3Vic2NyaWJlckRBTy5nZXRCeVBob25lKHBob25lKTtcbi4uLlxuXG4gICAgcHJpdmF0ZSB2b2lkIGJ0bkNoYW5nZUFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5DaGFuZ2VBY3Rpb25QZXJmb3JtZWRcbiAgICAgICAgaWYgKHZhbGlkYXRlRmllbGRzKCkgJiYgY3VycmVudFN1YnNjcmliZXIgIT0gbnVsbCkge1xuICAgICAgICAgICAgU3RyaW5nIG5ld1Bhc3N3b3JkID0gdHh0UGFzc3dvcmQuZ2V0VGV4dCgpO1xuXG4gICAgICAgICAgICBib29sZWFuIHN1Y2Nlc3MgPSBTdWJzY3JpYmVyREFPLnVwZGF0ZVBhc3N3b3JkKGN1cnJlbnRTdWJzY3JpYmVyLmdldFVzZXJfaWQoKSwgbmV3UGFzc3dvcmQpO1xuXG4gICAgICAgICAgICBpZiAoc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwixJDhu5VpIG3huq10IGto4bqpdSB0aMOgbmggY8O0bmchIFZ1aSBsw7JuZyDEkcSDbmcgbmjhuq1wIGzhuqFpLlwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLklORk9STUFUSU9OX01FU1NBR0UpO1xuICAgICAgICAgICAgICAgIG5ldyBMb2dpbigpLnNldFZpc2libGUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwb3NlKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwixJDhu5VpIG3huq10IGto4bqpdSB0aOG6pXQgYuG6oWkhIFZ1aSBsw7JuZyB0aOG7rSBs4bqhaSBzYXUuXCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5DaGFuZ2VBY3Rpb25QZXJmb3JtZWRcbi4uLlxuUGF0aDogc3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vU2lnblVwLmphdmFcbi8qXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0xpY2Vuc2VzL2xpY2Vuc2UtZGVmYXVsdC50eHQgdG8gY2hhbmdlIHRoaXMgbGljZW5zZVxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9HVUlGb3Jtcy9KRnJhbWUuamF2YSB0byBlZGl0IHRoaXMgdGVtcGxhdGVcbiAqL1xucGFja2FnZSBpbnRlcm5ldC5tYW5nZW1lbnQuc3lzdGVtO1xuXG5pbXBvcnQgREFPLlN1YnNjcmliZXJEQU87XG5pbXBvcnQgTW9kZWwuU3Vic2NyaWJlcjtcbmltcG9ydCBqYXZhLnRpbWUuTG9jYWxEYXRlVGltZTtcbmltcG9ydCBqYXZheC5zd2luZy5KT3B0aW9uUGFuZTtcblxuLyoqXG4gKlxuICogQGF1dGhvciBOZ29jIFRoYW9cbiAqL1xucHVibGljIGNsYXNzIFNpZ25VcCBleHRlbmRzIGphdmF4LnN3aW5nLkpGcmFtZSB7XG5cbiAgICBwdWJsaWMgU3RyaW5nIHBob25lUGF0dGVybiA9IFwiXlswLTldKiRcIjtcbiAgICBwcml2YXRlIFN0cmluZyBERUZBVUxUX1JPTEUgPSBcInVzZXJcIjtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIG5ldyBmb3JtIFNpZ25JblxuICAgICAqL1xuICAgIHB1YmxpYyBTaWduVXAoKSB7XG4gICAgICAgIGluaXRDb21wb25lbnRzKCk7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgY2xlYXIoKXtcbiAgICAgICAgdHh0TmFtZS5zZXRUZXh0KFwiXCIpO1xuICAgICAgICB0eHRVc2VyTmFtZS5zZXRUZXh0KFwiXCIpO1xuICAgICAgICB0eHRQYXNzd29yZC5zZXRUZXh0KFwiXCIpO1xuICAgICAgICB0eHRBZGRyZXNzLnNldFRleHQoXCJcIik7XG4gICAgICAgIHR4dFBob25lLnNldFRleHQoXCJcIik7XG4gICAgfVxuLi4uXG5cbiAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5SZXR1cm5BY3Rpb25QZXJmb3JtZWRcblxuICAgIHByaXZhdGUgdm9pZCBidG5TaWdudXBBY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuU2lnbnVwQWN0aW9uUGVyZm9ybWVkXG4gICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxuICAgICAgICBpZiAodmFsaWRhdGVGaWVsZHMoKSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBTdWJzY3JpYmVyIHN1YiA9IG5ldyBTdWJzY3JpYmVyKCk7XG4gICAgICAgICAgICAgICAgc3ViLnNldEZ1bGxOYW1lKHR4dE5hbWUuZ2V0VGV4dCgpKTtcbiAgICAgICAgICAgICAgICBzdWIuc2V0VXNlcm5hbWUodHh0VXNlck5hbWUuZ2V0VGV4dCgpKTtcbiAgICAgICAgICAgICAgICBzdWIuc2V0UGFzc3dvcmQodHh0UGFzc3dvcmQuZ2V0VGV4dCgpKTtcbiAgICAgICAgICAgICAgICBzdWIuc2V0Um9sZShERUZBVUxUX1JPTEUpO1xuICAgICAgICAgICAgICAgIHN1Yi5zZXRBZGRyZXNzKHR4dEFkZHJlc3MuZ2V0VGV4dCgpKTtcbiAgICAgICAgICAgICAgICBzdWIuc2V0UGhvbmUodHh0UGhvbmUuZ2V0VGV4dCgpKTtcbiAgICAgICAgICAgICAgICBzdWIuc2V0Q3JlYXRlX2F0KExvY2FsRGF0ZVRpbWUubm93KCkpO1xuICAgICAgICAgICAgICAgIFN1YnNjcmliZXJEQU8uaW5zZXJ0KHN1Yik7XG4gICAgICAgICAgICAgICAgY2xlYXIoKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBleCkge1xuICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwiTOG7l2k6IFwiICsgZXguZ2V0TWVzc2FnZSgpLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuU2lnbnVwQWN0aW9uUGVyZm9ybWVkXG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvY29tL3N0b3JlL2FwcC9wZXRzdG9yZS9Db250cm9sbGVycy9BZG1pbi9EYXNoYm9hcmRDb250cm9sbGVyLmphdmFcbi4uLlxuXG4gICAgcHJpdmF0ZSB2b2lkIG5hdmlnYXRlVG8oU3RyaW5nIHZpZXdOYW1lKSB7XG4gICAgICAgIFN0YWdlIGN1cnJlbnRTdGFnZSA9IChTdGFnZSkgbG9nb3V0QnV0dG9uLmdldFNjZW5lKCkuZ2V0V2luZG93KCk7XG4gICAgICAgIEFkbWluRmFjdG9yeS5nZXRJbnN0YW5jZSgpLnN3aXRjaENvbnRlbnQodmlld05hbWUsIGN1cnJlbnRTdGFnZSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB2b2lkIGhhbmRsZUxvZ291dCgpIHtcbiAgICAgICAgLy8gU3RvcCBhdXRvLXJlZnJlc2ggaWYgYWN0aXZlXG4gICAgICAgIHN0b3BBdXRvUmVmcmVzaCgpO1xuXG4gICAgICAgIFN0YWdlIGN1cnJlbnRTdGFnZSA9IChTdGFnZSkgbG9nb3V0QnV0dG9uLmdldFNjZW5lKCkuZ2V0V2luZG93KCk7XG4gICAgICAgIGlmIChDb250cm9sbGVyVXRpbHMuc2hvd0NvbmZpcm1hdGlvbkFuZFdhaXQoXCLEkMSDbmcgeHXhuqV0XCIsIFwiQuG6oW4gY8OzIGNo4bqvYyBjaOG6r24gbXXhu5FuIMSRxINuZyB4deG6pXQga2jDtG5nP1xcbk5o4bqlbiBPSyDEkeG7gyB4w6FjIG5o4bqtbi5cIikpIHtcbiAgICAgICAgICAgIFNlc3Npb25NYW5hZ2VyLmNsZWFyKCk7XG4gICAgICAgICAgICBWaWV3RmFjdG9yeS5nZXRJbnN0YW5jZSgpLnN3aXRjaENvbnRlbnQoXCJsb2dpblwiLCBjdXJyZW50U3RhZ2UpO1xuICAgICAgICB9XG4gICAgfVxuXG5cbn1cbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9jb20vc3RvcmUvYXBwL3BldHN0b3JlL0NvbnRyb2xsZXJzL0FkbWluL0FkbWluTWVudUNvbnRyb2xsZXIuamF2YVxuLi4uXG5cbiAgICAgICAgTWVudUl0ZW0gbG9nb3V0TWVudUl0ZW0gPSBuZXcgTWVudUl0ZW0oXCLEkMSDbmcgeHXhuqV0XCIpO1xuICAgICAgICBsb2dvdXRNZW51SXRlbS5zZXRPbkFjdGlvbihlIC0+IGhhbmRsZUxvZ291dChudWxsKSk7XG4gICAgICAgIG1lbnVMb2dvdXQuZ2V0SXRlbXMoKS5hZGQobG9nb3V0TWVudUl0ZW0pO1xuICAgIH1cblxuICAgIEBGWE1MXG4gICAgdm9pZCBoYW5kbGVMb2dvdXQoQWN0aW9uRXZlbnQgZXZlbnQpIHtcbiAgICAgICAgU3RhZ2UgY3VycmVudFN0YWdlID0gKFN0YWdlKSByb290LmdldFNjZW5lKCkuZ2V0V2luZG93KCk7XG4gICAgICAgIGlmIChDb250cm9sbGVyVXRpbHMuc2hvd0NvbmZpcm1hdGlvbkFuZFdhaXQoXCLEkMSDbmcgeHXhuqV0XCIsIFwiQuG6oW4gY8OzIGNo4bqvYyBjaOG6r24gbXXhu5FuIMSRxINuZyB4deG6pXQga2jDtG5nP1xcbk5o4bqlbiBPSyDEkeG7gyB4w6FjIG5o4bqtbi5cIikpIHtcbiAgICAgICAgICAgIFNlc3Npb25NYW5hZ2VyLmNsZWFyKCk7XG4gICAgICAgICAgICBWaWV3RmFjdG9yeS5nZXRJbnN0YW5jZSgpLnN3aXRjaENvbnRlbnQoXCJsb2dpblwiLCBjdXJyZW50U3RhZ2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgQ29udHJvbGxlclV0aWxzLnNob3dBbGVydChBbGVydC5BbGVydFR5cGUuSU5GT1JNQVRJT04sIFwiVGjDtG5nIGLDoW9cIiwgXCLEkMSDbmcgeHXhuqV0IGtow7RuZyB0aMOgbmggY8O0bmdcIik7XG4gICAgICAgIH1cbiAgICB9XG59XG4uLi5cblBhdGg6IHNyYy9EQU8vVXNlckRBTy5qYXZhXG4vKlxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9MaWNlbnNlcy9saWNlbnNlLWRlZmF1bHQudHh0IHRvIGNoYW5nZSB0aGlzIGxpY2Vuc2VcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9DbGFzcy5qYXZhIHRvIGVkaXQgdGhpcyB0ZW1wbGF0ZVxuICovXG5wYWNrYWdlIERBTztcblxuaW1wb3J0IE1vZGVsLlVzZXI7XG5pbXBvcnQgamF2YS51dGlsLkxpc3Q7XG5cbi8qKlxuICpcbiAqIEBhdXRob3IgTmdvYyBUaGFvXG4gKi9cbnB1YmxpYyBjbGFzcyBVc2VyREFPe1xuXG4gICAgcHVibGljIHN0YXRpYyB2b2lkIGluc2VydChVc2VyIG9iaikge1xuICAgICAgICBcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIHZvaWQgdXBkYXRlKFVzZXIgb2JqKSB7XG4gICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbihcIk5vdCBzdXBwb3J0ZWQgeWV0LlwiKTsgLy8gR2VuZXJhdGVkIGZyb20gbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NvZGUvR2VuZXJhdGVkTWV0aG9kQm9keVxuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBkZWxldGUoaW50IGlkKSB7XG4gICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbihcIk5vdCBzdXBwb3J0ZWQgeWV0LlwiKTsgLy8gR2VuZXJhdGVkIGZyb20gbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NvZGUvR2VuZXJhdGVkTWV0aG9kQm9keVxuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgVXNlciBnZXRCeUlkKGludCBpZCkge1xuICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oXCJOb3Qgc3VwcG9ydGVkIHlldC5cIik7IC8vIEdlbmVyYXRlZCBmcm9tIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9Db2RlL0dlbmVyYXRlZE1ldGhvZEJvZHlcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIExpc3Q8VXNlcj4gZ2V0QWxsKCkge1xuICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oXCJOb3Qgc3VwcG9ydGVkIHlldC5cIik7IC8vIEdlbmVyYXRlZCBmcm9tIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9Db2RlL0dlbmVyYXRlZE1ldGhvZEJvZHlcbiAgICB9XG4gICAgXG59XG4uLi5cblBhdGg6IHNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL0ludGVybmV0TWFuZ2VtZW50U3lzdGVtLmphdmFcbi8qXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0xpY2Vuc2VzL2xpY2Vuc2UtZGVmYXVsdC50eHQgdG8gY2hhbmdlIHRoaXMgbGljZW5zZVxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL01haW4uamF2YSB0byBlZGl0IHRoaXMgdGVtcGxhdGVcbiAqL1xucGFja2FnZSBpbnRlcm5ldC5tYW5nZW1lbnQuc3lzdGVtO1xuXG4vKipcbiAqXG4gKiBAYXV0aG9yIE5nb2MgVGhhb1xuICovXG5wdWJsaWMgY2xhc3MgSW50ZXJuZXRNYW5nZW1lbnRTeXN0ZW0ge1xuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIGFyZ3MgdGhlIGNvbW1hbmQgbGluZSBhcmd1bWVudHNcbiAgICAgKi9cbiAgICBwdWJsaWMgc3RhdGljIHZvaWQgbWFpbihTdHJpbmdbXSBhcmdzKSB7XG4gICAgICAgIC8vIFRPRE8gY29kZSBhcHBsaWNhdGlvbiBsb2dpYyBoZXJlXG4gICAgfVxuICAgIFxufVxuLi4uXG5QYXRoOiBzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9BZG1pbi9EYXNoYm9hcmQuamF2YVxuLypcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvTGljZW5zZXMvbGljZW5zZS1kZWZhdWx0LnR4dCB0byBjaGFuZ2UgdGhpcyBsaWNlbnNlXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0dVSUZvcm1zL0pGcmFtZS5qYXZhIHRvIGVkaXQgdGhpcyB0ZW1wbGF0ZVxuICovXG5wYWNrYWdlIGludGVybmV0Lm1hbmdlbWVudC5zeXN0ZW0uQWRtaW47XG5cbmltcG9ydCBNb2RlbC5Vc2VyO1xuaW1wb3J0IGludGVybmV0Lm1hbmdlbWVudC5zeXN0ZW0uU2Vzc2lvbi5Vc2VyU2Vzc2lvbjtcbmltcG9ydCBqYXZhLnRpbWUuTG9jYWxUaW1lO1xuaW1wb3J0IGphdmF4LnN3aW5nLkpPcHRpb25QYW5lO1xuXG4vKipcbiAqXG4gKiBAYXV0aG9yIE5nb2MgVGhhb1xuICovXG5wdWJsaWMgY2xhc3MgRGFzaGJvYXJkIGV4dGVuZHMgamF2YXguc3dpbmcuSkZyYW1lIHtcblxuICAgIFVzZXIgYWRtaW4gPSBVc2VyU2Vzc2lvbi5nZXRDdXJyZW50VXNlcigpO1xuICAgIFxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgbmV3IGZvcm0gRGFzaGJvYXJkXG4gICAgICovXG4gICAgcHVibGljIERhc2hib2FyZCgpIHtcbiAgICAgICAgaW5pdENvbXBvbmVudHMoKTtcbiAgICAgICAgc2V0dXBIZWxsbygpO1xuICAgICAgICBzZXR1cFVzZXJuYW1lKCk7XG4gICAgfVxuICAgIFxuICAgIHByaXZhdGUgdm9pZCBzZXR1cEhlbGxvKCkge1xuICAgICAgICBMb2NhbFRpbWUgbm93ID0gTG9jYWxUaW1lLm5vdygpO1xuICAgICAgICBpbnQgaG91ciA9IG5vdy5nZXRIb3VyKCk7XG4gICAgICAgIFxuICAgICAgICBTdHJpbmcgZ3JlZXRpbmc7XG5cbiAgICAgICAgaWYgKGhvdXIgPj0gNSAmJiBob3VyIDwgMTEpIHtcbiAgICAgICAgICAgIGdyZWV0aW5nID0gXCJDaMOgbyBideG7lWkgc8OhbmcsXCI7XG4gICAgICAgIH0gZWxzZSBpZiAoaG91ciA+PSAxMSAmJiBob3VyIDwgMTUpIHtcbiAgICAgICAgICAgIGdyZWV0aW5nID0gXCJDaMOgbyBideG7lWkgdHLGsGEsXCI7XG4gICAgICAgIH0gZWxzZSBpZiAoaG91ciA+PSAxNSAmJiBob3VyIDwgMTcpIHtcbiAgICAgICAgICAgIGdyZWV0aW5nID0gXCJDaMOgbyBideG7lWkgY2hp4buBdSxcIjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGdyZWV0aW5nID0gXCJDaMOgbyBideG7lWkgdOG7kWksXCI7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGxiSGVsbG8uc2V0VGV4dChncmVldGluZyk7XG4gICAgfVxuICAgIFxuICAgIHByaXZhdGUgdm9pZCBzZXR1cFVzZXJuYW1lKCkge1xuICAgICAgICBsYlVzZXJOYW1lLnNldFRleHQoYWRtaW4uZ2V0VXNlcm5hbWUoKSk7XG4gICAgfVxuLi4uXG5cbiAgICAgICAgc2V0RGVmYXVsdENsb3NlT3BlcmF0aW9uKGphdmF4LnN3aW5nLldpbmRvd0NvbnN0YW50cy5FWElUX09OX0NMT1NFKTtcblxuICAgICAgICBidG5Vc2VyLnNldEZvbnQobmV3IGphdmEuYXd0LkZvbnQoXCJBcmlhbFwiLCAxLCAyNCkpOyAvLyBOT0kxOE5cbiAgICAgICAgYnRuVXNlci5zZXRJY29uKG5ldyBqYXZheC5zd2luZy5JbWFnZUljb24oZ2V0Q2xhc3MoKS5nZXRSZXNvdXJjZShcIi9JbWFnZXMvdXNlci5wbmdcIikpKTsgLy8gTk9JMThOXG4gICAgICAgIGJ0blVzZXIuc2V0VGV4dChcIlF14bqjbiBsw70gbmfGsOG7nWkgZMO5bmdcIik7XG4gICAgICAgIGJ0blVzZXIuc2V0Q3Vyc29yKG5ldyBqYXZhLmF3dC5DdXJzb3IoamF2YS5hd3QuQ3Vyc29yLkhBTkRfQ1VSU09SKSk7XG4gICAgICAgIGJ0blVzZXIuc2V0SG9yaXpvbnRhbEFsaWdubWVudChqYXZheC5zd2luZy5Td2luZ0NvbnN0YW50cy5MRUZUKTtcbiAgICAgICAgYnRuVXNlci5hZGRBY3Rpb25MaXN0ZW5lcihuZXcgamF2YS5hd3QuZXZlbnQuQWN0aW9uTGlzdGVuZXIoKSB7XG4gICAgICAgICAgICBwdWJsaWMgdm9pZCBhY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7XG4gICAgICAgICAgICAgICAgYnRuVXNlckFjdGlvblBlcmZvcm1lZChldnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbi4uLlxuXG4gICAgICAgIGxiVXNlck5hbWUuc2V0Rm9udChuZXcgamF2YS5hd3QuRm9udChcIkFyaWFsXCIsIDMsIDE4KSk7IC8vIE5PSTE4TlxuICAgICAgICBsYlVzZXJOYW1lLnNldEZvcmVncm91bmQoamF2YXguc3dpbmcuVUlNYW5hZ2VyLmdldERlZmF1bHRzKCkuZ2V0Q29sb3IoXCJBY3Rpb25zLkdyZWVuXCIpKTtcbiAgICAgICAgbGJVc2VyTmFtZS5zZXRUZXh0KFwidXNlcm5hbWUhXCIpO1xuXG4gICAgICAgIGxiSGVsbG8uc2V0Rm9udChuZXcgamF2YS5hd3QuRm9udChcIkFyaWFsXCIsIDIsIDE4KSk7IC8vIE5PSTE4TlxuICAgICAgICBsYkhlbGxvLnNldFRleHQoXCJDaMOgbyBideG7lWkgc8OhbmcsXCIpO1xuXG4gICAgICAgIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0IGxheW91dCA9IG5ldyBqYXZheC5zd2luZy5Hcm91cExheW91dChnZXRDb250ZW50UGFuZSgpKTtcbiAgICAgICAgZ2V0Q29udGVudFBhbmUoKS5zZXRMYXlvdXQobGF5b3V0KTtcbiAgICAgICAgbGF5b3V0LnNldEhvcml6b250YWxHcm91cChcbiAgICAgICAgICAgIGxheW91dC5jcmVhdGVQYXJhbGxlbEdyb3VwKGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LkFsaWdubWVudC5MRUFESU5HKVxuICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVTZXF1ZW50aWFsR3JvdXAoKVxuICAgICAgICAgICAgICAgIC5hZGRHYXAoMTgzLCAxODMsIDE4MylcbiAgICAgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVBhcmFsbGVsR3JvdXAoamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuQWxpZ25tZW50LkxFQURJTkcpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlU2VxdWVudGlhbEdyb3VwKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQobGJIZWxsbylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRQcmVmZXJyZWRHYXAoamF2YXguc3dpbmcuTGF5b3V0U3R5bGUuQ29tcG9uZW50UGxhY2VtZW50LlJFTEFURUQpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGxiVXNlck5hbWUpKVxuICAgICAgICAgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVBhcmFsbGVsR3JvdXAoamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuQWxpZ25tZW50LkxFQURJTkcsIGZhbHNlKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVTZXF1ZW50aWFsR3JvdXAoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlUGFyYWxsZWxHcm91cChqYXZheC5zd2luZy5Hcm91cExheW91dC5BbGlnbm1lbnQuVFJBSUxJTkcsIGZhbHNlKVxuLi4uXG4gICAgICAgIC8vPC9lZGl0b3ItZm9sZD5cblxuICAgICAgICAvKiBDcmVhdGUgYW5kIGRpc3BsYXkgdGhlIGZvcm0gKi9cbiAgICAgICAgamF2YS5hd3QuRXZlbnRRdWV1ZS5pbnZva2VMYXRlcihuZXcgUnVubmFibGUoKSB7XG4gICAgICAgICAgICBwdWJsaWMgdm9pZCBydW4oKSB7XG4gICAgICAgICAgICAgICAgbmV3IERhc2hib2FyZCgpLnNldFZpc2libGUodHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFZhcmlhYmxlcyBkZWNsYXJhdGlvbiAtIGRvIG5vdCBtb2RpZnkvL0dFTi1CRUdJTjp2YXJpYWJsZXNcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpCdXR0b24gYnRuQ29udHJhY3Q7XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KQnV0dG9uIGJ0bkN1c3RvbWVyO1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkJ1dHRvbiBidG5FeGl0O1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkJ1dHRvbiBidG5IaXN0b3J5O1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkJ1dHRvbiBidG5QbGFuO1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkJ1dHRvbiBidG5TdGF0aXN0aWM7XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KQnV0dG9uIGJ0blVzZXI7XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KU2VwYXJhdG9yIGpTZXBhcmF0b3IxO1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkxhYmVsIGxiSGVsbG87XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KTGFiZWwgbGJVc2VyTmFtZTtcbiAgICAvLyBFbmQgb2YgdmFyaWFibGVzIGRlY2xhcmF0aW9uLy9HRU4tRU5EOnZhcmlhYmxlc1xufVxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL2NvbS9zdG9yZS9hcHAvcGV0c3RvcmUvREFPL1VzZXJEQU8uamF2YVxucGFja2FnZSBjb20uc3RvcmUuYXBwLnBldHN0b3JlLkRBTztcblxuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuTW9kZWxzLkVudGl0aWVzLlVzZXI7XG5pbXBvcnQgb3JnLm1pbmRyb3QuamJjcnlwdC5CQ3J5cHQ7XG5cbmltcG9ydCBqYXZhLnNxbC4qO1xuaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7XG5pbXBvcnQgamF2YS51dGlsLkJhc2U2NDtcblxucHVibGljIGNsYXNzIFVzZXJEQU8gaW1wbGVtZW50cyBCYXNlREFPPFVzZXIsIEludGVnZXI+IHtcbiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIGludCBpc0R1cGxpY2F0ZSA9IC0xO1xuXG4gICAgcHVibGljIHN0YXRpYyBVc2VyREFPIGdldEluc3RhbmNlKCkge1xuICAgICAgICByZXR1cm4gbmV3IFVzZXJEQU8oKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIFN0cmluZyBlbmNvZGUoU3RyaW5nIHBhc3N3b3JkKSB7XG4vLyAgICAgICAgcmV0dXJuIEJhc2U2NC5nZXRFbmNvZGVyKCkuZW5jb2RlVG9TdHJpbmcocGFzc3dvcmQuZ2V0Qnl0ZXMoKSk7XG4gICAgICAgIHJldHVybiBCQ3J5cHQuaGFzaHB3KHBhc3N3b3JkLCBCQ3J5cHQuZ2Vuc2FsdCgpKTtcbiAgICB9XG4uLi5cblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29ubiA9IERhdGFiYXNlVXRpbC5nZXRDb25uZWN0aW9uKCk7XG4gICAgICAgICAgICBTdHJpbmcgc3FsID0gXCJJTlNFUlQgSU5UTyBVc2VycyAodXNlcm5hbWUsIHBhc3N3b3JkLCByb2xlLCBpbWFnZV91cmwsIGlzQWN0aXZlKSBWQUxVRVMgKD8sID8sID8sID8sID8pXCI7XG4gICAgICAgICAgICBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHNxbCwgU3RhdGVtZW50LlJFVFVSTl9HRU5FUkFURURfS0VZUyk7XG5cbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDEsIGVudGl0eS5nZXRVc2VybmFtZSgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDIsIGVuY29kZShlbnRpdHkuZ2V0UGFzc3dvcmQoKSkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMywgZW50aXR5LmdldFJvbGUoKSk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZyg0LCBlbnRpdHkuZ2V0SW1hZ2VVcmwoKSk7XG4gICAgICAgICAgICBzdG10LnNldEJvb2xlYW4oNSwgZW50aXR5LmlzQWN0aXZlKCkpO1xuXG4gICAgICAgICAgICBpbnQgYWZmZWN0ZWRSb3dzID0gc3RtdC5leGVjdXRlVXBkYXRlKCk7XG4gICAgICAgICAgICBpZiAoYWZmZWN0ZWRSb3dzID09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdHJ5IChSZXN1bHRTZXQgZ2VuZXJhdGVkS2V5cyA9IHN0bXQuZ2V0R2VuZXJhdGVkS2V5cygpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGdlbmVyYXRlZEtleXMubmV4dCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBnZW5lcmF0ZWRLZXlzLmdldEludCgxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIERhdGFiYXNlVXRpbC5jbG9zZVJlc291cmNlcyhycywgc3RtdCwgY29ubik7XG4gICAgICAgIH1cbiAgICB9XG4uLi5cblBhdGg6IHNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL0xvZ2luLmZvcm1cbjw/eG1sIHZlcnNpb249XCIxLjBcIiBlbmNvZGluZz1cIlVURi04XCIgPz5cblxuPEZvcm0gdmVyc2lvbj1cIjEuM1wiIG1heFZlcnNpb249XCIxLjlcIiB0eXBlPVwib3JnLm5ldGJlYW5zLm1vZHVsZXMuZm9ybS5mb3JtaW5mby5KRnJhbWVGb3JtSW5mb1wiPlxuICA8UHJvcGVydGllcz5cbiAgICA8UHJvcGVydHkgbmFtZT1cImRlZmF1bHRDbG9zZU9wZXJhdGlvblwiIHR5cGU9XCJpbnRcIiB2YWx1ZT1cIjNcIi8+XG4gIDwvUHJvcGVydGllcz5cbiAgPFN5bnRoZXRpY1Byb3BlcnRpZXM+XG4gICAgPFN5bnRoZXRpY1Byb3BlcnR5IG5hbWU9XCJmb3JtU2l6ZVBvbGljeVwiIHR5cGU9XCJpbnRcIiB2YWx1ZT1cIjFcIi8+XG4gICAgPFN5bnRoZXRpY1Byb3BlcnR5IG5hbWU9XCJnZW5lcmF0ZUNlbnRlclwiIHR5cGU9XCJib29sZWFuXCIgdmFsdWU9XCJmYWxzZVwiLz5cbiAgPC9TeW50aGV0aWNQcm9wZXJ0aWVzPlxuICA8QXV4VmFsdWVzPlxuICAgIDxBdXhWYWx1ZSBuYW1lPVwiRm9ybVNldHRpbmdzX2F1dG9SZXNvdXJjaW5nXCIgdHlwZT1cImphdmEubGFuZy5JbnRlZ2VyXCIgdmFsdWU9XCIwXCIvPlxuICAgIDxBdXhWYWx1ZSBuYW1lPVwiRm9ybVNldHRpbmdzX2F1dG9TZXRDb21wb25lbnROYW1lXCIgdHlwZT1cImphdmEubGFuZy5Cb29sZWFuXCIgdmFsdWU9XCJmYWxzZVwiLz5cbiAgICA8QXV4VmFsdWUgbmFtZT1cIkZvcm1TZXR0aW5nc19nZW5lcmF0ZUZRTlwiIHR5cGU9XCJqYXZhLmxhbmcuQm9vbGVhblwiIHZhbHVlPVwidHJ1ZVwiLz5cbiAgICA8QXV4VmFsdWUgbmFtZT1cIkZvcm1TZXR0aW5nc19nZW5lcmF0ZU1uZW1vbmljc0NvZGVcIiB0eXBlPVwiamF2YS5sYW5nLkJvb2xlYW5cIiB2YWx1ZT1cImZhbHNlXCIvPlxuLi4uXG5QYXRoOiBzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9BZG1pbi9EYXNoYm9hcmQuZm9ybVxuPD94bWwgdmVyc2lvbj1cIjEuMFwiIGVuY29kaW5nPVwiVVRGLThcIiA/PlxuXG48Rm9ybSB2ZXJzaW9uPVwiMS4zXCIgbWF4VmVyc2lvbj1cIjEuOVwiIHR5cGU9XCJvcmcubmV0YmVhbnMubW9kdWxlcy5mb3JtLmZvcm1pbmZvLkpGcmFtZUZvcm1JbmZvXCI+XG4gIDxQcm9wZXJ0aWVzPlxuICAgIDxQcm9wZXJ0eSBuYW1lPVwiZGVmYXVsdENsb3NlT3BlcmF0aW9uXCIgdHlwZT1cImludFwiIHZhbHVlPVwiM1wiLz5cbiAgPC9Qcm9wZXJ0aWVzLi4uIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV8wMUt3SlBYcDhicEJ2QW9TYUxrN2FXMjYifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJFOi9Ib2NUYXAvMDJfSkFWQS8wM19Qcm9qZWN0L0ludGVybmV0IE1hbmdlbWVudCBTeXN0ZW0iLCJmb2xkZXJSb290IjoiRTovSG9jVGFwLzAyX0pBVkEvMDNfUHJvamVjdC9JbnRlcm5ldCBNYW5nZW1lbnQgU3lzdGVtIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwidGltZXN0YW1wIjoiMjAyNS0wNS0xM1QxMzowMDo0MC4xMDZaIiwicmVzcG9uc2VfdGV4dCI6IkJhc2VkIG9uIHRoZSBpbmZvcm1hdGlvbiBnYXRoZXJlZCwgbGV0IG1lIG5vdyBsb29rIGZvciB0aGUgaW1wbGVtZW50YXRpb24gb2YgdGhlIFVzZXJEQU8ubG9naW4gbWV0aG9kOlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6ImZkOTRhMzJhLTQzNGYtNDc4My1hYjQzLTM0YjdlODU0ZmIzYSIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfMDEyejhjaUpMazhLZ2FmYVlaZzFYYzZjIiwidG9vbF9uYW1lIjoiY29kZWJhc2UtcmV0cmlldmFsIiwiaW5wdXRfanNvbiI6IntcImluZm9ybWF0aW9uX3JlcXVlc3RcIjogXCJGaW5kIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgVXNlckRBTy5sb2dpbiBtZXRob2QgaW4gdGhlIHByb2plY3QuIEFsc28gbG9vayBmb3IgYW55IE1haW5GcmFtZSBjbGFzcyBvciB0aGUgY2xhc3MgdGhhdCBzaG91bGQgYmUgZGlzcGxheWVkIGFmdGVyIHN1Y2Nlc3NmdWwgbG9naW4gaW4gdGhlIGludGVybmV0Lm1hbmdlbWVudC5zeXN0ZW0gcGFja2FnZS4gTG9vayBmb3IgYW55IGZpbGVzIHRoYXQgbWlnaHQgY29udGFpbiB0aGUgaW1wbGVtZW50YXRpb24gb2YgdGhlIGxvZ2luIG1ldGhvZC5cIn0iLCJtY3Bfc2VydmVyX25hbWUiOiIiLCJtY3BfdG9vbF9uYW1lIjoiIn19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiJMZXQgbWUgY2hlY2sgZm9yIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgVXNlckRBTy5sb2dpbiBtZXRob2QgaW4gdGhlIHByb2plY3Q6XG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJUaGUgZm9sbG93aW5nIGNvZGUgc2VjdGlvbnMgd2VyZSByZXRyaWV2ZWQ6XG5QYXRoOiBzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9Mb2dpbi5qYXZhXG4vKlxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9MaWNlbnNlcy9saWNlbnNlLWRlZmF1bHQudHh0IHRvIGNoYW5nZSB0aGlzIGxpY2Vuc2VcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvR1VJRm9ybXMvSkZyYW1lLmphdmEgdG8gZWRpdCB0aGlzIHRlbXBsYXRlXG4gKi9cbnBhY2thZ2UgaW50ZXJuZXQubWFuZ2VtZW50LnN5c3RlbTtcblxuaW1wb3J0IERBTy5Vc2VyREFPO1xuaW1wb3J0IE1vZGVsLlVzZXI7XG5pbXBvcnQgamF2YXguc3dpbmcuSk9wdGlvblBhbmU7XG4uLi5cblxuICAgIHByaXZhdGUgdm9pZCBidG5Mb2dpbkFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5Mb2dpbkFjdGlvblBlcmZvcm1lZFxuICAgICAgICAvLyBUT0RPIGFkZCB5b3VyIGhhbmRsaW5nIGNvZGUgaGVyZTpcbiAgICAgICAgaWYodmFsaWRhdGVGaWVsZHMoKSkge1xuICAgICAgICAgICAgdHJ5e1xuICAgICAgICAgICAgICAgIFN0cmluZyB1c2VybmFtZSA9IHR4dFVzZXJOYW1lLmdldFRleHQoKS50cmltKCk7XG4gICAgICAgICAgICAgICAgU3RyaW5nIHBhc3N3b3JkID0gdHh0UGFzc3dvcmQuZ2V0VGV4dCgpLnRyaW0oKTtcblxuICAgICAgICAgICAgICAgIFVzZXIgdXNlciA9IG51bGw7XG4gICAgICAgICAgICAgICAgYm9vbGVhbiBpc1N1Y2Nlc3MgPSBVc2VyREFPLmxvZ2luKHVzZXJuYW1lLCBwYXNzd29yZCk7XG5cbiAgICAgICAgICAgICAgICBpZihpc1N1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2codGhpcywgXCLEkMSDbmcgbmjhuq1wIHRow6BuaCBjw7RuZyFcIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5JTkZPUk1BVElPTl9NRVNTQUdFKTtcbi8vICAgICAgICAgICAgICAgICAgICBuZXcgTWFpbkZyYW1lKCkuc2V0VmlzaWJsZSh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwb3NlKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2codGhpcywgXCJTYWkgdMOqbiDEkcSDbmcgbmjhuq1wIGhv4bq3YyBt4bqtdCBraOG6qXUuXCIsIFwiTOG7l2lcIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaChFeGNlcHRpb24gZXgpIHtcbiAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcIkzhu5dpOiBcIiArIGV4LmdldE1lc3NhZ2UoKSwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG5cbiAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5Mb2dpbkFjdGlvblBlcmZvcm1lZFxuXG4gICAgcHJpdmF0ZSB2b2lkIGJ0bkZvcmdvdFBhc3N3b3JkQWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkZvcmdvdFBhc3N3b3JkQWN0aW9uUGVyZm9ybWVkXG4gICAgICAgIC8vIE9wZW4gdGhlIEZvcmdvdFBhc3N3b3JkIGRpYWxvZ1xuICAgICAgICBGb3Jnb3RQYXNzd29yZCBmb3Jnb3RQYXNzd29yZERpYWxvZyA9IG5ldyBGb3Jnb3RQYXNzd29yZCh0aGlzLCB0cnVlKTtcbiAgICAgICAgZm9yZ290UGFzc3dvcmREaWFsb2cuc2V0VmlzaWJsZSh0cnVlKTtcbiAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5Gb3Jnb3RQYXNzd29yZEFjdGlvblBlcmZvcm1lZFxuXG4gICAgcHJpdmF0ZSB2b2lkIGJ0bkV4aXRBY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuRXhpdEFjdGlvblBlcmZvcm1lZFxuICAgICAgICAvLyBUT0RPIGFkZCB5b3VyIGhhbmRsaW5nIGNvZGUgaGVyZTpcbiAgICAgICAgaW50IHJlc3VsdCA9IEpPcHRpb25QYW5lLnNob3dDb25maXJtRGlhbG9nKG51bGwsIFwiQuG6oW4gY8OzIGNo4bqvYyBjaOG6r24gbXXhu5FuIHRob8OhdCBraMO0bmc/XCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuWUVTX05PX09QVElPTiwgSk9wdGlvblBhbmUuUVVFU1RJT05fTUVTU0FHRSk7XG5cbiAgICAgICAgaWYgKHJlc3VsdCA9PSBKT3B0aW9uUGFuZS5ZRVNfT1BUSU9OKSB7XG4gICAgICAgICAgICBTeXN0ZW0uZXhpdCgwKTtcbiAgICAgICAgfVxuICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0bkV4aXRBY3Rpb25QZXJmb3JtZWRcblxuICAgIHByaXZhdGUgdm9pZCBidG5TaWdudXBBY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuU2lnbnVwQWN0aW9uUGVyZm9ybWVkXG4gICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxuICAgICAgICBzZXRWaXNpYmxlKGZhbHNlKTtcbiAgICAgICAgbmV3IFNpZ25VcCgpLnNldFZpc2libGUodHJ1ZSk7XG4gICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuU2lnbnVwQWN0aW9uUGVyZm9ybWVkXG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvY29tL3N0b3JlL2FwcC9wZXRzdG9yZS9Db250cm9sbGVycy9Mb2dpbkNvbnRyb2xsZXIuamF2YVxuLi4uXG5cbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLkRBTy5Vc2VyREFPO1xuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuREFPLlN0YWZmREFPO1xuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuTW9kZWxzLkVudGl0aWVzLlVzZXI7XG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5Nb2RlbHMuRW50aXRpZXMuU3RhZmY7XG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5TZXNzaW9ucy5TZXNzaW9uTWFuYWdlcjtcbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLlZpZXdzLkFkbWluRmFjdG9yeTtcbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLlZpZXdzLlZpZXdGYWN0b3J5O1xuaW1wb3J0IGRlLmplbnNkLmZ4LmdseXBocy5mb250YXdlc29tZS5Gb250QXdlc29tZUljb247XG5pbXBvcnQgZGUuamVuc2QuZnguZ2x5cGhzLmZvbnRhd2Vzb21lLkZvbnRBd2Vzb21lSWNvblZpZXc7XG5pbXBvcnQgamF2YWZ4LmZ4bWwuRlhNTDtcbmltcG9ydCBqYXZhZnguZnhtbC5Jbml0aWFsaXphYmxlO1xuaW1wb3J0IGphdmFmeC5zY2VuZS5jb250cm9sLio7XG5pbXBvcnQgamF2YWZ4LnNjZW5lLmlucHV0Lk1vdXNlRXZlbnQ7XG5pbXBvcnQgamF2YWZ4LnN0YWdlLlN0YWdlO1xuaW1wb3J0IGphdmFmeC5zY2VuZS5pbWFnZS5JbWFnZTtcbmltcG9ydCBqYXZhZnguc2NlbmUuaW1hZ2UuSW1hZ2VWaWV3O1xuaW1wb3J0IGphdmFmeC5zY2VuZS5wYWludC5JbWFnZVBhdHRlcm47XG5pbXBvcnQgamF2YS51dGlsLk9iamVjdHM7XG4uLi5cblxucHVibGljIGNsYXNzIExvZ2luQ29udHJvbGxlciBpbXBsZW1lbnRzIEluaXRpYWxpemFibGUge1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIEZvbnRBd2Vzb21lSWNvblZpZXcgZXllSWNvbjtcblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBUZXh0RmllbGQgc2hvd1Bhc3N3b3JkO1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIFBhc3N3b3JkRmllbGQgcGFzc3dvcmRGaWVsZDtcblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBUZXh0RmllbGQgdXNlcm5hbWVGaWVsZDtcblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBCdXR0b24gbG9naW5CdXR0b247XG5cbiAgICBARlhNTFxuICAgIHByaXZhdGUgTGFiZWwgZXJyb3JMYWJlbDtcblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBIeXBlcmxpbmsgZm9yZ290UGFzc3dvcmRMaW5rO1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIEltYWdlVmlldyB1c2VySW1hZ2U7XG5cbiAgICBwcml2YXRlIGRvdWJsZSB4LCB5O1xuXG4gICAgVXNlckRBTyB1c2VyREFPID0gbmV3IFVzZXJEQU8oKTtcbiAgICBTdGFmZkRBTyBzdGFmZkRBTyA9IFN0YWZmREFPLmdldEluc3RhbmNlKCk7XG4gICAgcHVibGljIHN0YXRpYyBpbnQgaWRTdGFmZkN1cnJlbnQ7XG4gICAgcHVibGljIHN0YXRpYyBpbnQgaWRBZG1pbkN1cnJlbnQ7XG5cbiAgICBwcml2YXRlIFNlc3Npb25NYW5hZ2VyIHNlc3Npb25NYW5hZ2VyID0gbmV3IFNlc3Npb25NYW5hZ2VyKCk7XG4uLi5cblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gVMOsbSB1c2VyIHRoZW8gdXNlcm5hbWVcbiAgICAgICAgICAgIFVzZXIgdXNlciA9IHVzZXJEQU8uZmluZEJ5VXNlcm5hbWUodXNlcm5hbWUpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZih1c2VyID09IG51bGwgfHwgdXNlci5nZXRVc2VybmFtZSgpID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBDb250cm9sbGVyVXRpbHMuc2hvd0FsZXJ0KEFsZXJ0LkFsZXJ0VHlwZS5FUlJPUiwgXCJM4buXaVwiLCBcIlTDqm4gxJHEg25nIG5o4bqtcCBraMO0bmcgxJHDum5nXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gS2nhu4NtIHRyYSB0w6puIMSRxINuZyBuaOG6rXBcbiAgICAgICAgICAgIGlmICghdXNlci5nZXRVc2VybmFtZSgpLmVxdWFscyh1c2VybmFtZSkpIHtcbiAgICAgICAgICAgICAgICBDb250cm9sbGVyVXRpbHMuc2hvd0FsZXJ0KEFsZXJ0LkFsZXJ0VHlwZS5FUlJPUiwgXCJM4buXaVwiLCBcIlTDqm4gxJHEg25nIG5o4bqtcCBraMO0bmcgxJHDum5nXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gS2nhu4NtIHRyYSBt4bqtdCBraOG6qXVcbiAgICAgICAgICAgIGlmKCFCQ3J5cHQuY2hlY2twdyhwYXNzd29yZCwgdXNlci5nZXRQYXNzd29yZCgpKSkge1xuICAgICAgICAgICAgICAgIENvbnRyb2xsZXJVdGlscy5zaG93QWxlcnQoQWxlcnQuQWxlcnRUeXBlLkVSUk9SLCBcIkzhu5dpXCIsIFwiTeG6rXQga2jhuql1IGtow7RuZyDEkcO6bmdcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzZXNzaW9uTWFuYWdlci5zZXRDdXJyZW50VXNlcih1c2VyKTtcblxuICAgICAgICAgICAgU3RhZ2UgY3VycmVudFN0YWdlID0gKFN0YWdlKSB1c2VybmFtZUZpZWxkLmdldFNjZW5lKCkuZ2V0V2luZG93KCk7XG5cbiAgICAgICAgICAgIGlmKHVzZXIuZ2V0Um9sZSgpLmVxdWFscyhVc2VyLlJPTEVfQURNSU4pKSB7XG4gICAgICAgICAgICAgICAgaWRBZG1pbkN1cnJlbnQgPSB1c2VyLmdldFVzZXJJZCgpO1xuICAgICAgICAgICAgICAgIEFkbWluRmFjdG9yeS5nZXRJbnN0YW5jZSgpLnN3aXRjaENvbnRlbnQoXCJkYXNoYm9hcmRcIiwgY3VycmVudFN0YWdlKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZih1c2VyLmdldFJvbGUoKS5lcXVhbHMoVXNlci5ST0xFX1VTRVIpKSB7XG4gICAgICAgICAgICAgICAgaWRTdGFmZkN1cnJlbnQgPSB1c2VyLmdldFVzZXJJZCgpO1xuICAgICAgICAgICAgICAgIFN0YWZmIHN0YWZmID0gc3RhZmZEQU8uZmluZEJ5VXNlcklkKHVzZXIuZ2V0VXNlcklkKCkpO1xuICAgICAgICAgICAgICAgIGlmIChzdGFmZiAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlc3Npb25NYW5hZ2VyLnNldEN1cnJlbnRTdGFmZihzdGFmZik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFZpZXdGYWN0b3J5LmdldEluc3RhbmNlKCkuc3dpdGNoQ29udGVudChcImRhc2hib2FyZFwiLCBjdXJyZW50U3RhZ2UpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBDb250cm9sbGVyVXRpbHMuc2hvd0FsZXJ0KEFsZXJ0LkFsZXJ0VHlwZS5FUlJPUiwgXCJM4buXaVwiLCBcIlZhaSB0csOyIG5nxrDhu51pIGTDuW5nIGtow7RuZyBo4bujcCBs4buHXCIpO1xuICAgICAgICAgICAgICAgIHNlc3Npb25NYW5hZ2VyLmNsZWFyKCk7XG4gICAgICAgICAgICB9XG4uLi5cblBhdGg6IHNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL0ZvcmdvdFBhc3N3b3JkLmphdmFcbi8qXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0xpY2Vuc2VzL2xpY2Vuc2UtZGVmYXVsdC50eHQgdG8gY2hhbmdlIHRoaXMgbGljZW5zZVxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9HVUlGb3Jtcy9KRnJhbWUuamF2YSB0byBlZGl0IHRoaXMgdGVtcGxhdGVcbiAqL1xucGFja2FnZSBpbnRlcm5ldC5tYW5nZW1lbnQuc3lzdGVtO1xuXG5pbXBvcnQgREFPLlN1YnNjcmliZXJEQU87XG5pbXBvcnQgTW9kZWwuU3Vic2NyaWJlcjtcbmltcG9ydCBqYXZheC5zd2luZy5KT3B0aW9uUGFuZTtcbmltcG9ydCBpbnRlcm5ldC5tYW5nZW1lbnQuc3lzdGVtLkxvZ2luO1xuLi4uXG5cbiAgICBwcml2YXRlIHZvaWQgYnRuRXhpdEFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5FeGl0QWN0aW9uUGVyZm9ybWVkXG4gICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxuICAgICAgICBpbnQgcmVzdWx0ID0gSk9wdGlvblBhbmUuc2hvd0NvbmZpcm1EaWFsb2cobnVsbCwgXCJC4bqhbiBjw7MgY2jhuq9jIGNo4bqvbiBtdeG7kW4gdGhvw6F0IGtow7RuZz9cIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5ZRVNfTk9fT1BUSU9OLCBKT3B0aW9uUGFuZS5RVUVTVElPTl9NRVNTQUdFKTtcblxuICAgICAgICBpZiAocmVzdWx0ID09IEpPcHRpb25QYW5lLllFU19PUFRJT04pIHtcbiAgICAgICAgICAgIG5ldyBMb2dpbigpLnNldFZpc2libGUodHJ1ZSk7XG4gICAgICAgICAgICB0aGlzLmRpc3Bvc2UoKTtcbiAgICAgICAgfVxuICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0bkV4aXRBY3Rpb25QZXJmb3JtZWRcblxuICAgIHByaXZhdGUgdm9pZCBidG5DaGVja0FjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5DaGVja0FjdGlvblBlcmZvcm1lZFxuICAgICAgICBTeXN0ZW0ub3V0LnByaW50KFwiSGVsbG9cIik7XG4gICAgICAgIGlmICh2YWxpZGF0ZVBob25lKCkpIHtcbiAgICAgICAgICAgIFN0cmluZyBwaG9uZSA9IHR4dFBob25lLmdldFRleHQoKTtcbiAgICAgICAgICAgIGN1cnJlbnRTdWJzY3JpYmVyID0gU3Vic2NyaWJlckRBTy5nZXRCeVBob25lKHBob25lKTtcbi4uLlxuXG4gICAgcHJpdmF0ZSB2b2lkIGJ0bkNoYW5nZUFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5DaGFuZ2VBY3Rpb25QZXJmb3JtZWRcbiAgICAgICAgaWYgKHZhbGlkYXRlRmllbGRzKCkgJiYgY3VycmVudFN1YnNjcmliZXIgIT0gbnVsbCkge1xuICAgICAgICAgICAgU3RyaW5nIG5ld1Bhc3N3b3JkID0gdHh0UGFzc3dvcmQuZ2V0VGV4dCgpO1xuXG4gICAgICAgICAgICBib29sZWFuIHN1Y2Nlc3MgPSBTdWJzY3JpYmVyREFPLnVwZGF0ZVBhc3N3b3JkKGN1cnJlbnRTdWJzY3JpYmVyLmdldFVzZXJfaWQoKSwgbmV3UGFzc3dvcmQpO1xuXG4gICAgICAgICAgICBpZiAoc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwixJDhu5VpIG3huq10IGto4bqpdSB0aMOgbmggY8O0bmchIFZ1aSBsw7JuZyDEkcSDbmcgbmjhuq1wIGzhuqFpLlwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLklORk9STUFUSU9OX01FU1NBR0UpO1xuICAgICAgICAgICAgICAgIG5ldyBMb2dpbigpLnNldFZpc2libGUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwb3NlKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwixJDhu5VpIG3huq10IGto4bqpdSB0aOG6pXQgYuG6oWkhIFZ1aSBsw7JuZyB0aOG7rSBs4bqhaSBzYXUuXCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5DaGFuZ2VBY3Rpb25QZXJmb3JtZWRcbi4uLlxuUGF0aDogc3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vU2lnblVwLmphdmFcbi8qXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0xpY2Vuc2VzL2xpY2Vuc2UtZGVmYXVsdC50eHQgdG8gY2hhbmdlIHRoaXMgbGljZW5zZVxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9HVUlGb3Jtcy9KRnJhbWUuamF2YSB0byBlZGl0IHRoaXMgdGVtcGxhdGVcbiAqL1xucGFja2FnZSBpbnRlcm5ldC5tYW5nZW1lbnQuc3lzdGVtO1xuXG5pbXBvcnQgREFPLlN1YnNjcmliZXJEQU87XG5pbXBvcnQgTW9kZWwuU3Vic2NyaWJlcjtcbmltcG9ydCBqYXZhLnRpbWUuTG9jYWxEYXRlVGltZTtcbmltcG9ydCBqYXZheC5zd2luZy5KT3B0aW9uUGFuZTtcblxuLyoqXG4gKlxuICogQGF1dGhvciBOZ29jIFRoYW9cbiAqL1xucHVibGljIGNsYXNzIFNpZ25VcCBleHRlbmRzIGphdmF4LnN3aW5nLkpGcmFtZSB7XG5cbiAgICBwdWJsaWMgU3RyaW5nIHBob25lUGF0dGVybiA9IFwiXlswLTldKiRcIjtcbiAgICBwcml2YXRlIFN0cmluZyBERUZBVUxUX1JPTEUgPSBcInVzZXJcIjtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIG5ldyBmb3JtIFNpZ25JblxuICAgICAqL1xuICAgIHB1YmxpYyBTaWduVXAoKSB7XG4gICAgICAgIGluaXRDb21wb25lbnRzKCk7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgY2xlYXIoKXtcbiAgICAgICAgdHh0TmFtZS5zZXRUZXh0KFwiXCIpO1xuICAgICAgICB0eHRVc2VyTmFtZS5zZXRUZXh0KFwiXCIpO1xuICAgICAgICB0eHRQYXNzd29yZC5zZXRUZXh0KFwiXCIpO1xuICAgICAgICB0eHRBZGRyZXNzLnNldFRleHQoXCJcIik7XG4gICAgICAgIHR4dFBob25lLnNldFRleHQoXCJcIik7XG4gICAgfVxuLi4uXG5cbiAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5SZXR1cm5BY3Rpb25QZXJmb3JtZWRcblxuICAgIHByaXZhdGUgdm9pZCBidG5TaWdudXBBY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuU2lnbnVwQWN0aW9uUGVyZm9ybWVkXG4gICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxuICAgICAgICBpZiAodmFsaWRhdGVGaWVsZHMoKSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBTdWJzY3JpYmVyIHN1YiA9IG5ldyBTdWJzY3JpYmVyKCk7XG4gICAgICAgICAgICAgICAgc3ViLnNldEZ1bGxOYW1lKHR4dE5hbWUuZ2V0VGV4dCgpKTtcbiAgICAgICAgICAgICAgICBzdWIuc2V0VXNlcm5hbWUodHh0VXNlck5hbWUuZ2V0VGV4dCgpKTtcbiAgICAgICAgICAgICAgICBzdWIuc2V0UGFzc3dvcmQodHh0UGFzc3dvcmQuZ2V0VGV4dCgpKTtcbiAgICAgICAgICAgICAgICBzdWIuc2V0Um9sZShERUZBVUxUX1JPTEUpO1xuICAgICAgICAgICAgICAgIHN1Yi5zZXRBZGRyZXNzKHR4dEFkZHJlc3MuZ2V0VGV4dCgpKTtcbiAgICAgICAgICAgICAgICBzdWIuc2V0UGhvbmUodHh0UGhvbmUuZ2V0VGV4dCgpKTtcbiAgICAgICAgICAgICAgICBzdWIuc2V0Q3JlYXRlX2F0KExvY2FsRGF0ZVRpbWUubm93KCkpO1xuICAgICAgICAgICAgICAgIFN1YnNjcmliZXJEQU8uaW5zZXJ0KHN1Yik7XG4gICAgICAgICAgICAgICAgY2xlYXIoKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBleCkge1xuICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwiTOG7l2k6IFwiICsgZXguZ2V0TWVzc2FnZSgpLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuU2lnbnVwQWN0aW9uUGVyZm9ybWVkXG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvY29tL3N0b3JlL2FwcC9wZXRzdG9yZS9Db250cm9sbGVycy9BZG1pbi9EYXNoYm9hcmRDb250cm9sbGVyLmphdmFcbi4uLlxuXG4gICAgcHJpdmF0ZSB2b2lkIG5hdmlnYXRlVG8oU3RyaW5nIHZpZXdOYW1lKSB7XG4gICAgICAgIFN0YWdlIGN1cnJlbnRTdGFnZSA9IChTdGFnZSkgbG9nb3V0QnV0dG9uLmdldFNjZW5lKCkuZ2V0V2luZG93KCk7XG4gICAgICAgIEFkbWluRmFjdG9yeS5nZXRJbnN0YW5jZSgpLnN3aXRjaENvbnRlbnQodmlld05hbWUsIGN1cnJlbnRTdGFnZSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB2b2lkIGhhbmRsZUxvZ291dCgpIHtcbiAgICAgICAgLy8gU3RvcCBhdXRvLXJlZnJlc2ggaWYgYWN0aXZlXG4gICAgICAgIHN0b3BBdXRvUmVmcmVzaCgpO1xuXG4gICAgICAgIFN0YWdlIGN1cnJlbnRTdGFnZSA9IChTdGFnZSkgbG9nb3V0QnV0dG9uLmdldFNjZW5lKCkuZ2V0V2luZG93KCk7XG4gICAgICAgIGlmIChDb250cm9sbGVyVXRpbHMuc2hvd0NvbmZpcm1hdGlvbkFuZFdhaXQoXCLEkMSDbmcgeHXhuqV0XCIsIFwiQuG6oW4gY8OzIGNo4bqvYyBjaOG6r24gbXXhu5FuIMSRxINuZyB4deG6pXQga2jDtG5nP1xcbk5o4bqlbiBPSyDEkeG7gyB4w6FjIG5o4bqtbi5cIikpIHtcbiAgICAgICAgICAgIFNlc3Npb25NYW5hZ2VyLmNsZWFyKCk7XG4gICAgICAgICAgICBWaWV3RmFjdG9yeS5nZXRJbnN0YW5jZSgpLnN3aXRjaENvbnRlbnQoXCJsb2dpblwiLCBjdXJyZW50U3RhZ2UpO1xuICAgICAgICB9XG4gICAgfVxuXG5cbn1cbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9jb20vc3RvcmUvYXBwL3BldHN0b3JlL0NvbnRyb2xsZXJzL0FkbWluL0FkbWluTWVudUNvbnRyb2xsZXIuamF2YVxuLi4uXG5cbiAgICAgICAgTWVudUl0ZW0gbG9nb3V0TWVudUl0ZW0gPSBuZXcgTWVudUl0ZW0oXCLEkMSDbmcgeHXhuqV0XCIpO1xuICAgICAgICBsb2dvdXRNZW51SXRlbS5zZXRPbkFjdGlvbihlIC0+IGhhbmRsZUxvZ291dChudWxsKSk7XG4gICAgICAgIG1lbnVMb2dvdXQuZ2V0SXRlbXMoKS5hZGQobG9nb3V0TWVudUl0ZW0pO1xuICAgIH1cblxuICAgIEBGWE1MXG4gICAgdm9pZCBoYW5kbGVMb2dvdXQoQWN0aW9uRXZlbnQgZXZlbnQpIHtcbiAgICAgICAgU3RhZ2UgY3VycmVudFN0YWdlID0gKFN0YWdlKSByb290LmdldFNjZW5lKCkuZ2V0V2luZG93KCk7XG4gICAgICAgIGlmIChDb250cm9sbGVyVXRpbHMuc2hvd0NvbmZpcm1hdGlvbkFuZFdhaXQoXCLEkMSDbmcgeHXhuqV0XCIsIFwiQuG6oW4gY8OzIGNo4bqvYyBjaOG6r24gbXXhu5FuIMSRxINuZyB4deG6pXQga2jDtG5nP1xcbk5o4bqlbiBPSyDEkeG7gyB4w6FjIG5o4bqtbi5cIikpIHtcbiAgICAgICAgICAgIFNlc3Npb25NYW5hZ2VyLmNsZWFyKCk7XG4gICAgICAgICAgICBWaWV3RmFjdG9yeS5nZXRJbnN0YW5jZSgpLnN3aXRjaENvbnRlbnQoXCJsb2dpblwiLCBjdXJyZW50U3RhZ2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgQ29udHJvbGxlclV0aWxzLnNob3dBbGVydChBbGVydC5BbGVydFR5cGUuSU5GT1JNQVRJT04sIFwiVGjDtG5nIGLDoW9cIiwgXCLEkMSDbmcgeHXhuqV0IGtow7RuZyB0aMOgbmggY8O0bmdcIik7XG4gICAgICAgIH1cbiAgICB9XG59XG4uLi5cblBhdGg6IHNyYy9EQU8vVXNlckRBTy5qYXZhXG4vKlxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9MaWNlbnNlcy9saWNlbnNlLWRlZmF1bHQudHh0IHRvIGNoYW5nZSB0aGlzIGxpY2Vuc2VcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9DbGFzcy5qYXZhIHRvIGVkaXQgdGhpcyB0ZW1wbGF0ZVxuICovXG5wYWNrYWdlIERBTztcblxuaW1wb3J0IE1vZGVsLlVzZXI7XG5pbXBvcnQgamF2YS51dGlsLkxpc3Q7XG5cbi8qKlxuICpcbiAqIEBhdXRob3IgTmdvYyBUaGFvXG4gKi9cbnB1YmxpYyBjbGFzcyBVc2VyREFPe1xuXG4gICAgcHVibGljIHN0YXRpYyB2b2lkIGluc2VydChVc2VyIG9iaikge1xuICAgICAgICBcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIHZvaWQgdXBkYXRlKFVzZXIgb2JqKSB7XG4gICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbihcIk5vdCBzdXBwb3J0ZWQgeWV0LlwiKTsgLy8gR2VuZXJhdGVkIGZyb20gbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NvZGUvR2VuZXJhdGVkTWV0aG9kQm9keVxuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBkZWxldGUoaW50IGlkKSB7XG4gICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbihcIk5vdCBzdXBwb3J0ZWQgeWV0LlwiKTsgLy8gR2VuZXJhdGVkIGZyb20gbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NvZGUvR2VuZXJhdGVkTWV0aG9kQm9keVxuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgVXNlciBnZXRCeUlkKGludCBpZCkge1xuICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oXCJOb3Qgc3VwcG9ydGVkIHlldC5cIik7IC8vIEdlbmVyYXRlZCBmcm9tIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9Db2RlL0dlbmVyYXRlZE1ldGhvZEJvZHlcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIExpc3Q8VXNlcj4gZ2V0QWxsKCkge1xuICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oXCJOb3Qgc3VwcG9ydGVkIHlldC5cIik7IC8vIEdlbmVyYXRlZCBmcm9tIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9Db2RlL0dlbmVyYXRlZE1ldGhvZEJvZHlcbiAgICB9XG4gICAgXG59XG4uLi5cblBhdGg6IHNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL0ludGVybmV0TWFuZ2VtZW50U3lzdGVtLmphdmFcbi8qXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0xpY2Vuc2VzL2xpY2Vuc2UtZGVmYXVsdC50eHQgdG8gY2hhbmdlIHRoaXMgbGljZW5zZVxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL01haW4uamF2YSB0byBlZGl0IHRoaXMgdGVtcGxhdGVcbiAqL1xucGFja2FnZSBpbnRlcm5ldC5tYW5nZW1lbnQuc3lzdGVtO1xuXG4vKipcbiAqXG4gKiBAYXV0aG9yIE5nb2MgVGhhb1xuICovXG5wdWJsaWMgY2xhc3MgSW50ZXJuZXRNYW5nZW1lbnRTeXN0ZW0ge1xuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIGFyZ3MgdGhlIGNvbW1hbmQgbGluZSBhcmd1bWVudHNcbiAgICAgKi9cbiAgICBwdWJsaWMgc3RhdGljIHZvaWQgbWFpbihTdHJpbmdbXSBhcmdzKSB7XG4gICAgICAgIC8vIFRPRE8gY29kZSBhcHBsaWNhdGlvbiBsb2dpYyBoZXJlXG4gICAgfVxuICAgIFxufVxuLi4uXG5QYXRoOiBzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9BZG1pbi9EYXNoYm9hcmQuamF2YVxuLi4uXG5cbi8qKlxuICpcbiAqIEBhdXRob3IgTmdvYyBUaGFvXG4gKi9cbnB1YmxpYyBjbGFzcyBEYXNoYm9hcmQgZXh0ZW5kcyBqYXZheC5zd2luZy5KRnJhbWUge1xuXG4gICAgVXNlciBhZG1pbiA9IFVzZXJTZXNzaW9uLmdldEN1cnJlbnRVc2VyKCk7XG4gICAgXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBuZXcgZm9ybSBEYXNoYm9hcmRcbiAgICAgKi9cbiAgICBwdWJsaWMgRGFzaGJvYXJkKCkge1xuICAgICAgICBpbml0Q29tcG9uZW50cygpO1xuICAgICAgICBzZXR1cEhlbGxvKCk7XG4gICAgICAgIHNldHVwVXNlcm5hbWUoKTtcbiAgICB9XG4gICAgXG4gICAgcHJpdmF0ZSB2b2lkIHNldHVwSGVsbG8oKSB7XG4gICAgICAgIExvY2FsVGltZSBub3cgPSBMb2NhbFRpbWUubm93KCk7XG4gICAgICAgIGludCBob3VyID0gbm93LmdldEhvdXIoKTtcbiAgICAgICAgXG4gICAgICAgIFN0cmluZyBncmVldGluZztcblxuICAgICAgICBpZiAoaG91ciA+PSA1ICYmIGhvdXIgPCAxMSkge1xuICAgICAgICAgICAgZ3JlZXRpbmcgPSBcIkNow6BvIGJ14buVaSBzw6FuZyxcIjtcbiAgICAgICAgfSBlbHNlIGlmIChob3VyID49IDExICYmIGhvdXIgPCAxNSkge1xuICAgICAgICAgICAgZ3JlZXRpbmcgPSBcIkNow6BvIGJ14buVaSB0csawYSxcIjtcbiAgICAgICAgfSBlbHNlIGlmIChob3VyID49IDE1ICYmIGhvdXIgPCAxNykge1xuICAgICAgICAgICAgZ3JlZXRpbmcgPSBcIkNow6BvIGJ14buVaSBjaGnhu4F1LFwiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZ3JlZXRpbmcgPSBcIkNow6BvIGJ14buVaSB04buRaSxcIjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgbGJIZWxsby5zZXRUZXh0KGdyZWV0aW5nKTtcbiAgICB9XG4gICAgXG4gICAgcHJpdmF0ZSB2b2lkIHNldHVwVXNlcm5hbWUoKSB7XG4gICAgICAgIGxiVXNlck5hbWUuc2V0VGV4dChhZG1pbi5nZXRVc2VybmFtZSgpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBjYWxsZWQgZnJvbSB3aXRoaW4gdGhlIGNvbnN0cnVjdG9yIHRvIGluaXRpYWxpemUgdGhlIGZvcm0uXG4gICAgICogV0FSTklORzogRG8gTk9UIG1vZGlmeSB0aGlzIGNvZGUuIFRoZSBjb250ZW50IG9mIHRoaXMgbWV0aG9kIGlzIGFsd2F5c1xuICAgICAqIHJlZ2VuZXJhdGVkIGJ5IHRoZSBGb3JtIEVkaXRvci5cbiAgICAgKi9cbiAgICBAU3VwcHJlc3NXYXJuaW5ncyhcInVuY2hlY2tlZFwiKVxuICAgIC8vIDxlZGl0b3ItZm9sZCBkZWZhdWx0c3RhdGU9XCJjb2xsYXBzZWRcIiBkZXNjPVwiR2VuZXJhdGVkIENvZGVcIj4vL0dFTi1CRUdJTjppbml0Q29tcG9uZW50c1xuICAgIHByaXZhdGUgdm9pZCBpbml0Q29tcG9uZW50cygpIHtcblxuICAgICAgICBidG5Vc2VyID0gbmV3IGphdmF4LnN3aW5nLkpCdXR0b24oKTtcbiAgICAgICAgYnRuQ3VzdG9tZXIgPSBuZXcgamF2YXguc3dpbmcuSkJ1dHRvbigpO1xuICAgICAgICBidG5QbGFuID0gbmV3IGphdmF4LnN3aW5nLkpCdXR0b24oKTtcbiAgICAgICAgYnRuQ29udHJhY3QgPSBuZXcgamF2YXguc3dpbmcuSkJ1dHRvbigpO1xuICAgICAgICBidG5IaXN0b3J5ID0gbmV3IGphdmF4LnN3aW5nLkpCdXR0b24oKTtcbiAgICAgICAgYnRuU3RhdGlzdGljID0gbmV3IGphdmF4LnN3aW5nLkpCdXR0b24oKTtcbiAgICAgICAgYnRuRXhpdCA9IG5ldyBqYXZheC5zd2luZy5KQnV0dG9uKCk7XG4gICAgICAgIGpTZXBhcmF0b3IxID0gbmV3IGphdmF4LnN3aW5nLkpTZXBhcmF0b3IoKTtcbiAgICAgICAgbGJVc2VyTmFtZSA9IG5ldyBqYXZheC5zd2luZy5KTGFiZWwoKTtcbiAgICAgICAgbGJIZWxsbyA9IG5ldyBqYXZheC5zd2luZy5KTGFiZWwoKTtcblxuICAgICAgICBzZXREZWZhdWx0Q2xvc2VPcGVyYXRpb24oamF2YXguc3dpbmcuV2luZG93Q29uc3RhbnRzLkVYSVRfT05fQ0xPU0UpO1xuXG4gICAgICAgIGJ0blVzZXIuc2V0Rm9udChuZXcgamF2YS5hd3QuRm9udChcIkFyaWFsXCIsIDEsIDI0KSk7IC8vIE5PSTE4TlxuICAgICAgICBidG5Vc2VyLnNldEljb24obmV3IGphdmF4LnN3aW5nLkltYWdlSWNvbihnZXRDbGFzcygpLmdldFJlc291cmNlKFwiL0ltYWdlcy91c2VyLnBuZ1wiKSkpOyAvLyBOT0kxOE5cbiAgICAgICAgYnRuVXNlci5zZXRUZXh0KFwiUXXhuqNuIGzDvSBuZ8aw4budaSBkw7luZ1wiKTtcbiAgICAgICAgYnRuVXNlci5zZXRDdXJzb3IobmV3IGphdmEuYXd0LkN1cnNvcihqYXZhLmF3dC5DdXJzb3IuSEFORF9DVVJTT1IpKTtcbiAgICAgICAgYnRuVXNlci5zZXRIb3Jpem9udGFsQWxpZ25tZW50KGphdmF4LnN3aW5nLlN3aW5nQ29uc3RhbnRzLkxFRlQpO1xuICAgICAgICBidG5Vc2VyLmFkZEFjdGlvbkxpc3RlbmVyKG5ldyBqYXZhLmF3dC5ldmVudC5BY3Rpb25MaXN0ZW5lcigpIHtcbiAgICAgICAgICAgIHB1YmxpYyB2b2lkIGFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHtcbiAgICAgICAgICAgICAgICBidG5Vc2VyQWN0aW9uUGVyZm9ybWVkKGV2dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuLi4uXG4gICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQoYnRuQ3VzdG9tZXIsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LkRFRkFVTFRfU0laRSwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuREVGQVVMVF9TSVpFLCBTaG9ydC5NQVhfVkFMVUUpKVxuICAgICAgICAgICAgICAgIC5hZGRHYXAoMzUsIDM1LCAzNSlcbiAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGJ0bkV4aXQsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFLCA0MCwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUpXG4gICAgICAgICAgICAgICAgLmFkZEdhcCgyMDEsIDIwMSwgMjAxKSlcbiAgICAgICAgKTtcblxuICAgICAgICBwYWNrKCk7XG4gICAgfS8vIDwvZWRpdG9yLWZvbGQ+Ly9HRU4tRU5EOmluaXRDb21wb25lbnRzXG5cbiAgICBwcml2YXRlIHZvaWQgYnRuVXNlckFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5Vc2VyQWN0aW9uUGVyZm9ybWVkXG4gICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxuICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0blVzZXJBY3Rpb25QZXJmb3JtZWRcblxuICAgIHByaXZhdGUgdm9pZCBidG5DdXN0b21lckFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5DdXN0b21lckFjdGlvblBlcmZvcm1lZFxuICAgICAgICAvLyBUT0RPIGFkZCB5b3VyIGhhbmRsaW5nIGNvZGUgaGVyZTpcbiAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5DdXN0b21lckFjdGlvblBlcmZvcm1lZFxuLi4uXG4gICAgICAgIC8vPC9lZGl0b3ItZm9sZD5cblxuICAgICAgICAvKiBDcmVhdGUgYW5kIGRpc3BsYXkgdGhlIGZvcm0gKi9cbiAgICAgICAgamF2YS5hd3QuRXZlbnRRdWV1ZS5pbnZva2VMYXRlcihuZXcgUnVubmFibGUoKSB7XG4gICAgICAgICAgICBwdWJsaWMgdm9pZCBydW4oKSB7XG4gICAgICAgICAgICAgICAgbmV3IERhc2hib2FyZCgpLnNldFZpc2libGUodHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFZhcmlhYmxlcyBkZWNsYXJhdGlvbiAtIGRvIG5vdCBtb2RpZnkvL0dFTi1CRUdJTjp2YXJpYWJsZXNcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpCdXR0b24gYnRuQ29udHJhY3Q7XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KQnV0dG9uIGJ0bkN1c3RvbWVyO1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkJ1dHRvbiBidG5FeGl0O1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkJ1dHRvbiBidG5IaXN0b3J5O1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkJ1dHRvbiBidG5QbGFuO1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkJ1dHRvbiBidG5TdGF0aXN0aWM7XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KQnV0dG9uIGJ0blVzZXI7XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KU2VwYXJhdG9yIGpTZXBhcmF0b3IxO1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkxhYmVsIGxiSGVsbG87XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KTGFiZWwgbGJVc2VyTmFtZTtcbiAgICAvLyBFbmQgb2YgdmFyaWFibGVzIGRlY2xhcmF0aW9uLy9HRU4tRU5EOnZhcmlhYmxlc1xufVxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL2NvbS9zdG9yZS9hcHAvcGV0c3RvcmUvREFPL1VzZXJEQU8uamF2YVxucGFja2FnZSBjb20uc3RvcmUuYXBwLnBldHN0b3JlLkRBTztcblxuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuTW9kZWxzLkVudGl0aWVzLlVzZXI7XG5pbXBvcnQgb3JnLm1pbmRyb3QuamJjcnlwdC5CQ3J5cHQ7XG5cbmltcG9ydCBqYXZhLnNxbC4qO1xuaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7XG5pbXBvcnQgamF2YS51dGlsLkJhc2U2NDtcblxucHVibGljIGNsYXNzIFVzZXJEQU8gaW1wbGVtZW50cyBCYXNlREFPPFVzZXIsIEludGVnZXI+IHtcbiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIGludCBpc0R1cGxpY2F0ZSA9IC0xO1xuXG4gICAgcHVibGljIHN0YXRpYyBVc2VyREFPIGdldEluc3RhbmNlKCkge1xuICAgICAgICByZXR1cm4gbmV3IFVzZXJEQU8oKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIFN0cmluZyBlbmNvZGUoU3RyaW5nIHBhc3N3b3JkKSB7XG4vLyAgICAgICAgcmV0dXJuIEJhc2U2NC5nZXRFbmNvZGVyKCkuZW5jb2RlVG9TdHJpbmcocGFzc3dvcmQuZ2V0Qnl0ZXMoKSk7XG4gICAgICAgIHJldHVybiBCQ3J5cHQuaGFzaHB3KHBhc3N3b3JkLCBCQ3J5cHQuZ2Vuc2FsdCgpKTtcbiAgICB9XG4uLi5cblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29ubiA9IERhdGFiYXNlVXRpbC5nZXRDb25uZWN0aW9uKCk7XG4gICAgICAgICAgICBTdHJpbmcgc3FsID0gXCJJTlNFUlQgSU5UTyBVc2VycyAodXNlcm5hbWUsIHBhc3N3b3JkLCByb2xlLCBpbWFnZV91cmwsIGlzQWN0aXZlKSBWQUxVRVMgKD8sID8sID8sID8sID8pXCI7XG4gICAgICAgICAgICBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHNxbCwgU3RhdGVtZW50LlJFVFVSTl9HRU5FUkFURURfS0VZUyk7XG5cbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDEsIGVudGl0eS5nZXRVc2VybmFtZSgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDIsIGVuY29kZShlbnRpdHkuZ2V0UGFzc3dvcmQoKSkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMywgZW50aXR5LmdldFJvbGUoKSk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZyg0LCBlbnRpdHkuZ2V0SW1hZ2VVcmwoKSk7XG4gICAgICAgICAgICBzdG10LnNldEJvb2xlYW4oNSwgZW50aXR5LmlzQWN0aXZlKCkpO1xuXG4gICAgICAgICAgICBpbnQgYWZmZWN0ZWRSb3dzID0gc3RtdC5leGVjdXRlVXBkYXRlKCk7XG4gICAgICAgICAgICBpZiAoYWZmZWN0ZWRSb3dzID09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdHJ5IChSZXN1bHRTZXQgZ2VuZXJhdGVkS2V5cyA9IHN0bXQuZ2V0R2VuZXJhdGVkS2V5cygpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGdlbmVyYXRlZEtleXMubmV4dCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBnZW5lcmF0ZWRLZXlzLmdldEludCgxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIERhdGFiYXNlVXRpbC5jbG9zZVJlc291cmNlcyhycywgc3RtdCwgY29ubik7XG4gICAgICAgIH1cbiAgICB9XG4uLi5cblBhdGg6IHNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL0xvZ2luLmZvcm1cbjw/eG1sIHZlcnNpb249XCIxLjBcIiBlbmNvZGluZz1cIlVURi04XCIgPz5cblxuPEZvcm0gdmVyc2lvbj1cIjEuM1wiIG1heFZlcnNpb249XCIxLjlcIiB0eXBlPVwib3JnLm5ldGJlYW5zLm1vZHVsZXMuZm9ybS5mb3JtaW5mby5KRnJhbWVGb3JtSW5mb1wiPlxuICA8UHJvcGVydGllcz5cbiAgICA8UHJvcGVydHkgbmFtZT1cImRlZmF1bHRDbG9zZU9wZXJhdGlvblwiIHR5cGU9XCJpbnRcIiB2YWx1ZT1cIjNcIi8+XG4gIDwvUHJvcGVydGllcz5cbiAgPFN5bnRoZXRpY1Byb3BlcnRpZXM+XG4gICAgPFN5bnRoZXRpY1Byb3BlcnR5IG5hbWU9XCJmb3JtU2l6ZVBvbGljeVwiIHR5cGU9XCJpbnRcIiB2YWx1ZT1cIjFcIi8+XG4gICAgPFN5bnRoZXRpY1Byb3BlcnR5IG5hbWU9XCJnZW5lcmF0ZUNlbnRlclwiIHR5cGU9XCJib29sZWFuXCIgdmFsdWU9XCJmYWxzZVwiLz5cbiAgPC9TeW50aGV0aWNQcm9wZXJ0aWVzPlxuICA8QXV4VmFsdWVzPlxuICAgIDxBdXhWYWx1ZSBuYW1lPVwiRm9ybVNldHRpbmdzX2F1dG9SZXNvdXJjaW5nXCIgdHlwZT1cImphdmEubGFuZy5JbnRlZ2VyXCIgdmFsdWU9XCIwXCIvPlxuICAgIDxBdXhWYWx1ZSBuYW1lPVwiRm9ybVNldHRpbmdzX2F1dG9TZXRDb21wb25lbnROYW1lXCIgdHlwZT1cImphdmEubGFuZy5Cb29sZWFuXCIgdmFsdWU9XCJmYWxzZVwiLz5cbiAgICA8QXV4VmFsdWUgbmFtZT1cIkZvcm1TZXR0aW5nc19nZW5lcmF0ZUZRTlwiIHR5cGU9XCJqYXZhLmxhbmcuQm9vbGVhblwiIHZhbHVlPVwidHJ1ZVwiLz5cbiAgICA8QXV4VmFsdWUgbmFtZT1cIkZvcm1TZXR0aW5nc19nZW5lcmF0ZU1uZW1vbmljc0NvZGVcIiB0eXBlPVwiamF2YS5sYW5nLkJvb2xlYW5cIiB2YWx1ZT1cImZhbHNlXCIvPlxuLi4uXG5QYXRoOiBzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9BZG1pbi9EYXNoYm9hcmQuZm9ybVxuPD94bWwgdmVyc2lvbj1cIjEuMFwiIGVuY29kaW5nPVwiVVRGLThcIiA/PlxuXG48Rm9ybSB2ZXJzaW9uPVwiMS4zXCIgbWF4VmVyc2lvbj1cIjEuOVwiIHR5cGU9XCJvcmcubmV0YmVhbnMubW9kdWxlcy5mb3JtLmZvcm1pbmZvLkpGcmFtZUZvcm1JbmZvXCI+XG4gIDxQcm9wZXJ0aWVzPlxuICAgIDxQcm9wZXJ0eSBuYW1lPVwiZGVmYXVsdENsb3NlT3BlcmF0aW9uXCIgdHlwZT1cImludFwiIHZhbHVlPVwiM1wiLz5cbiAgPC8uLi4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1XzAxSjJiRm50NGRieHRLblo4WDZnQ1dWZyJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkU6L0hvY1RhcC8wMl9KQVZBLzAzX1Byb2plY3QvSW50ZXJuZXQgTWFuZ2VtZW50IFN5c3RlbSIsImZvbGRlclJvb3QiOiJFOi9Ib2NUYXAvMDJfSkFWQS8wM19Qcm9qZWN0L0ludGVybmV0IE1hbmdlbWVudCBTeXN0ZW0ifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJ0aW1lc3RhbXAiOiIyMDI1LTA1LTEzVDEzOjAwOjU0LjcyM1oiLCJyZXNwb25zZV90ZXh0IjoiTGV0IG1lIGNoZWNrIGZvciB0aGUgaW1wbGVtZW50YXRpb24gb2YgdGhlIFVzZXJEQU8ubG9naW4gbWV0aG9kIGluIHRoZSBwcm9qZWN0OlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6IjRlMGZkYTljLTllZGUtNDU4YS1hNjgyLWIwZTdiMjM4MzIyMiIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfMDFXeWN3Z3JFcm94OWpBR3FDZkM3NTJnIiwidG9vbF9uYW1lIjoiY29kZWJhc2UtcmV0cmlldmFsIiwiaW5wdXRfanNvbiI6IntcImluZm9ybWF0aW9uX3JlcXVlc3RcIjogXCJGaW5kIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgVXNlckRBTy5sb2dpbiBtZXRob2QgaW4gdGhlIHByb2plY3QuIEFsc28gbG9vayBmb3IgdGhlIFVzZXJTZXNzaW9uIGNsYXNzIGFuZCBob3cgaXQncyB1c2VkIHRvIHN0b3JlIHVzZXIgaW5mb3JtYXRpb24gYWZ0ZXIgbG9naW4uXCJ9IiwibWNwX3NlcnZlcl9uYW1lIjoiIiwibWNwX3Rvb2xfbmFtZSI6IiJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiTm93LCBsZXQgbWUgY2hlY2sgZm9yIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgVXNlckRBTy5sb2dpbiBtZXRob2QgYW5kIHRoZSBTZXNzaW9uIG1hbmFnZW1lbnQ6XG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJUaGUgZm9sbG93aW5nIGNvZGUgc2VjdGlvbnMgd2VyZSByZXRyaWV2ZWQ6XG5QYXRoOiBzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9Mb2dpbi5qYXZhXG4vKlxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9MaWNlbnNlcy9saWNlbnNlLWRlZmF1bHQudHh0IHRvIGNoYW5nZSB0aGlzIGxpY2Vuc2VcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvR1VJRm9ybXMvSkZyYW1lLmphdmEgdG8gZWRpdCB0aGlzIHRlbXBsYXRlXG4gKi9cbnBhY2thZ2UgaW50ZXJuZXQubWFuZ2VtZW50LnN5c3RlbTtcblxuaW1wb3J0IERBTy5Vc2VyREFPO1xuaW1wb3J0IE1vZGVsLlVzZXI7XG5pbXBvcnQgamF2YXguc3dpbmcuSk9wdGlvblBhbmU7XG4uLi5cblxuICAgIHByaXZhdGUgdm9pZCBidG5Mb2dpbkFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5Mb2dpbkFjdGlvblBlcmZvcm1lZFxuICAgICAgICAvLyBUT0RPIGFkZCB5b3VyIGhhbmRsaW5nIGNvZGUgaGVyZTpcbiAgICAgICAgaWYodmFsaWRhdGVGaWVsZHMoKSkge1xuICAgICAgICAgICAgdHJ5e1xuICAgICAgICAgICAgICAgIFN0cmluZyB1c2VybmFtZSA9IHR4dFVzZXJOYW1lLmdldFRleHQoKS50cmltKCk7XG4gICAgICAgICAgICAgICAgU3RyaW5nIHBhc3N3b3JkID0gdHh0UGFzc3dvcmQuZ2V0VGV4dCgpLnRyaW0oKTtcblxuICAgICAgICAgICAgICAgIFVzZXIgdXNlciA9IG51bGw7XG4gICAgICAgICAgICAgICAgYm9vbGVhbiBpc1N1Y2Nlc3MgPSBVc2VyREFPLmxvZ2luKHVzZXJuYW1lLCBwYXNzd29yZCk7XG5cbiAgICAgICAgICAgICAgICBpZihpc1N1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2codGhpcywgXCLEkMSDbmcgbmjhuq1wIHRow6BuaCBjw7RuZyFcIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5JTkZPUk1BVElPTl9NRVNTQUdFKTtcbi8vICAgICAgICAgICAgICAgICAgICBuZXcgTWFpbkZyYW1lKCkuc2V0VmlzaWJsZSh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwb3NlKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2codGhpcywgXCJTYWkgdMOqbiDEkcSDbmcgbmjhuq1wIGhv4bq3YyBt4bqtdCBraOG6qXUuXCIsIFwiTOG7l2lcIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaChFeGNlcHRpb24gZXgpIHtcbiAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcIkzhu5dpOiBcIiArIGV4LmdldE1lc3NhZ2UoKSwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG5cbiAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5Mb2dpbkFjdGlvblBlcmZvcm1lZFxuXG4gICAgcHJpdmF0ZSB2b2lkIGJ0bkZvcmdvdFBhc3N3b3JkQWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkZvcmdvdFBhc3N3b3JkQWN0aW9uUGVyZm9ybWVkXG4gICAgICAgIC8vIE9wZW4gdGhlIEZvcmdvdFBhc3N3b3JkIGRpYWxvZ1xuICAgICAgICBGb3Jnb3RQYXNzd29yZCBmb3Jnb3RQYXNzd29yZERpYWxvZyA9IG5ldyBGb3Jnb3RQYXNzd29yZCh0aGlzLCB0cnVlKTtcbiAgICAgICAgZm9yZ290UGFzc3dvcmREaWFsb2cuc2V0VmlzaWJsZSh0cnVlKTtcbiAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5Gb3Jnb3RQYXNzd29yZEFjdGlvblBlcmZvcm1lZFxuXG4gICAgcHJpdmF0ZSB2b2lkIGJ0bkV4aXRBY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuRXhpdEFjdGlvblBlcmZvcm1lZFxuICAgICAgICAvLyBUT0RPIGFkZCB5b3VyIGhhbmRsaW5nIGNvZGUgaGVyZTpcbiAgICAgICAgaW50IHJlc3VsdCA9IEpPcHRpb25QYW5lLnNob3dDb25maXJtRGlhbG9nKG51bGwsIFwiQuG6oW4gY8OzIGNo4bqvYyBjaOG6r24gbXXhu5FuIHRob8OhdCBraMO0bmc/XCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuWUVTX05PX09QVElPTiwgSk9wdGlvblBhbmUuUVVFU1RJT05fTUVTU0FHRSk7XG5cbiAgICAgICAgaWYgKHJlc3VsdCA9PSBKT3B0aW9uUGFuZS5ZRVNfT1BUSU9OKSB7XG4gICAgICAgICAgICBTeXN0ZW0uZXhpdCgwKTtcbiAgICAgICAgfVxuICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0bkV4aXRBY3Rpb25QZXJmb3JtZWRcblxuICAgIHByaXZhdGUgdm9pZCBidG5TaWdudXBBY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuU2lnbnVwQWN0aW9uUGVyZm9ybWVkXG4gICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxuICAgICAgICBzZXRWaXNpYmxlKGZhbHNlKTtcbiAgICAgICAgbmV3IFNpZ25VcCgpLnNldFZpc2libGUodHJ1ZSk7XG4gICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuU2lnbnVwQWN0aW9uUGVyZm9ybWVkXG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvY29tL3N0b3JlL2FwcC9wZXRzdG9yZS9Db250cm9sbGVycy9Mb2dpbkNvbnRyb2xsZXIuamF2YVxuLi4uXG5cbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLkRBTy5Vc2VyREFPO1xuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuREFPLlN0YWZmREFPO1xuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuTW9kZWxzLkVudGl0aWVzLlVzZXI7XG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5Nb2RlbHMuRW50aXRpZXMuU3RhZmY7XG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5TZXNzaW9ucy5TZXNzaW9uTWFuYWdlcjtcbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLlZpZXdzLkFkbWluRmFjdG9yeTtcbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLlZpZXdzLlZpZXdGYWN0b3J5O1xuaW1wb3J0IGRlLmplbnNkLmZ4LmdseXBocy5mb250YXdlc29tZS5Gb250QXdlc29tZUljb247XG5pbXBvcnQgZGUuamVuc2QuZnguZ2x5cGhzLmZvbnRhd2Vzb21lLkZvbnRBd2Vzb21lSWNvblZpZXc7XG5pbXBvcnQgamF2YWZ4LmZ4bWwuRlhNTDtcbmltcG9ydCBqYXZhZnguZnhtbC5Jbml0aWFsaXphYmxlO1xuaW1wb3J0IGphdmFmeC5zY2VuZS5jb250cm9sLio7XG5pbXBvcnQgamF2YWZ4LnNjZW5lLmlucHV0Lk1vdXNlRXZlbnQ7XG5pbXBvcnQgamF2YWZ4LnN0YWdlLlN0YWdlO1xuaW1wb3J0IGphdmFmeC5zY2VuZS5pbWFnZS5JbWFnZTtcbmltcG9ydCBqYXZhZnguc2NlbmUuaW1hZ2UuSW1hZ2VWaWV3O1xuaW1wb3J0IGphdmFmeC5zY2VuZS5wYWludC5JbWFnZVBhdHRlcm47XG5pbXBvcnQgamF2YS51dGlsLk9iamVjdHM7XG4uLi5cblxucHVibGljIGNsYXNzIExvZ2luQ29udHJvbGxlciBpbXBsZW1lbnRzIEluaXRpYWxpemFibGUge1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIEZvbnRBd2Vzb21lSWNvblZpZXcgZXllSWNvbjtcblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBUZXh0RmllbGQgc2hvd1Bhc3N3b3JkO1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIFBhc3N3b3JkRmllbGQgcGFzc3dvcmRGaWVsZDtcblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBUZXh0RmllbGQgdXNlcm5hbWVGaWVsZDtcblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBCdXR0b24gbG9naW5CdXR0b247XG5cbiAgICBARlhNTFxuICAgIHByaXZhdGUgTGFiZWwgZXJyb3JMYWJlbDtcblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBIeXBlcmxpbmsgZm9yZ290UGFzc3dvcmRMaW5rO1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIEltYWdlVmlldyB1c2VySW1hZ2U7XG5cbiAgICBwcml2YXRlIGRvdWJsZSB4LCB5O1xuXG4gICAgVXNlckRBTyB1c2VyREFPID0gbmV3IFVzZXJEQU8oKTtcbiAgICBTdGFmZkRBTyBzdGFmZkRBTyA9IFN0YWZmREFPLmdldEluc3RhbmNlKCk7XG4gICAgcHVibGljIHN0YXRpYyBpbnQgaWRTdGFmZkN1cnJlbnQ7XG4gICAgcHVibGljIHN0YXRpYyBpbnQgaWRBZG1pbkN1cnJlbnQ7XG5cbiAgICBwcml2YXRlIFNlc3Npb25NYW5hZ2VyIHNlc3Npb25NYW5hZ2VyID0gbmV3IFNlc3Npb25NYW5hZ2VyKCk7XG4uLi5cblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gVMOsbSB1c2VyIHRoZW8gdXNlcm5hbWVcbiAgICAgICAgICAgIFVzZXIgdXNlciA9IHVzZXJEQU8uZmluZEJ5VXNlcm5hbWUodXNlcm5hbWUpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZih1c2VyID09IG51bGwgfHwgdXNlci5nZXRVc2VybmFtZSgpID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBDb250cm9sbGVyVXRpbHMuc2hvd0FsZXJ0KEFsZXJ0LkFsZXJ0VHlwZS5FUlJPUiwgXCJM4buXaVwiLCBcIlTDqm4gxJHEg25nIG5o4bqtcCBraMO0bmcgxJHDum5nXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gS2nhu4NtIHRyYSB0w6puIMSRxINuZyBuaOG6rXBcbiAgICAgICAgICAgIGlmICghdXNlci5nZXRVc2VybmFtZSgpLmVxdWFscyh1c2VybmFtZSkpIHtcbiAgICAgICAgICAgICAgICBDb250cm9sbGVyVXRpbHMuc2hvd0FsZXJ0KEFsZXJ0LkFsZXJ0VHlwZS5FUlJPUiwgXCJM4buXaVwiLCBcIlTDqm4gxJHEg25nIG5o4bqtcCBraMO0bmcgxJHDum5nXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gS2nhu4NtIHRyYSBt4bqtdCBraOG6qXVcbiAgICAgICAgICAgIGlmKCFCQ3J5cHQuY2hlY2twdyhwYXNzd29yZCwgdXNlci5nZXRQYXNzd29yZCgpKSkge1xuICAgICAgICAgICAgICAgIENvbnRyb2xsZXJVdGlscy5zaG93QWxlcnQoQWxlcnQuQWxlcnRUeXBlLkVSUk9SLCBcIkzhu5dpXCIsIFwiTeG6rXQga2jhuql1IGtow7RuZyDEkcO6bmdcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzZXNzaW9uTWFuYWdlci5zZXRDdXJyZW50VXNlcih1c2VyKTtcblxuICAgICAgICAgICAgU3RhZ2UgY3VycmVudFN0YWdlID0gKFN0YWdlKSB1c2VybmFtZUZpZWxkLmdldFNjZW5lKCkuZ2V0V2luZG93KCk7XG5cbiAgICAgICAgICAgIGlmKHVzZXIuZ2V0Um9sZSgpLmVxdWFscyhVc2VyLlJPTEVfQURNSU4pKSB7XG4gICAgICAgICAgICAgICAgaWRBZG1pbkN1cnJlbnQgPSB1c2VyLmdldFVzZXJJZCgpO1xuICAgICAgICAgICAgICAgIEFkbWluRmFjdG9yeS5nZXRJbnN0YW5jZSgpLnN3aXRjaENvbnRlbnQoXCJkYXNoYm9hcmRcIiwgY3VycmVudFN0YWdlKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZih1c2VyLmdldFJvbGUoKS5lcXVhbHMoVXNlci5ST0xFX1VTRVIpKSB7XG4gICAgICAgICAgICAgICAgaWRTdGFmZkN1cnJlbnQgPSB1c2VyLmdldFVzZXJJZCgpO1xuICAgICAgICAgICAgICAgIFN0YWZmIHN0YWZmID0gc3RhZmZEQU8uZmluZEJ5VXNlcklkKHVzZXIuZ2V0VXNlcklkKCkpO1xuICAgICAgICAgICAgICAgIGlmIChzdGFmZiAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlc3Npb25NYW5hZ2VyLnNldEN1cnJlbnRTdGFmZihzdGFmZik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFZpZXdGYWN0b3J5LmdldEluc3RhbmNlKCkuc3dpdGNoQ29udGVudChcImRhc2hib2FyZFwiLCBjdXJyZW50U3RhZ2UpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBDb250cm9sbGVyVXRpbHMuc2hvd0FsZXJ0KEFsZXJ0LkFsZXJ0VHlwZS5FUlJPUiwgXCJM4buXaVwiLCBcIlZhaSB0csOyIG5nxrDhu51pIGTDuW5nIGtow7RuZyBo4bujcCBs4buHXCIpO1xuICAgICAgICAgICAgICAgIHNlc3Npb25NYW5hZ2VyLmNsZWFyKCk7XG4gICAgICAgICAgICB9XG4uLi5cblBhdGg6IHNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL1NpZ25VcC5qYXZhXG4vKlxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9MaWNlbnNlcy9saWNlbnNlLWRlZmF1bHQudHh0IHRvIGNoYW5nZSB0aGlzIGxpY2Vuc2VcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvR1VJRm9ybXMvSkZyYW1lLmphdmEgdG8gZWRpdCB0aGlzIHRlbXBsYXRlXG4gKi9cbnBhY2thZ2UgaW50ZXJuZXQubWFuZ2VtZW50LnN5c3RlbTtcblxuaW1wb3J0IERBTy5TdWJzY3JpYmVyREFPO1xuaW1wb3J0IE1vZGVsLlN1YnNjcmliZXI7XG5pbXBvcnQgamF2YS50aW1lLkxvY2FsRGF0ZVRpbWU7XG5pbXBvcnQgamF2YXguc3dpbmcuSk9wdGlvblBhbmU7XG5cbi8qKlxuICpcbiAqIEBhdXRob3IgTmdvYyBUaGFvXG4gKi9cbnB1YmxpYyBjbGFzcyBTaWduVXAgZXh0ZW5kcyBqYXZheC5zd2luZy5KRnJhbWUge1xuXG4gICAgcHVibGljIFN0cmluZyBwaG9uZVBhdHRlcm4gPSBcIl5bMC05XSokXCI7XG4gICAgcHJpdmF0ZSBTdHJpbmcgREVGQVVMVF9ST0xFID0gXCJ1c2VyXCI7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBuZXcgZm9ybSBTaWduSW5cbiAgICAgKi9cbiAgICBwdWJsaWMgU2lnblVwKCkge1xuICAgICAgICBpbml0Q29tcG9uZW50cygpO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIGNsZWFyKCl7XG4gICAgICAgIHR4dE5hbWUuc2V0VGV4dChcIlwiKTtcbiAgICAgICAgdHh0VXNlck5hbWUuc2V0VGV4dChcIlwiKTtcbiAgICAgICAgdHh0UGFzc3dvcmQuc2V0VGV4dChcIlwiKTtcbiAgICAgICAgdHh0QWRkcmVzcy5zZXRUZXh0KFwiXCIpO1xuICAgICAgICB0eHRQaG9uZS5zZXRUZXh0KFwiXCIpO1xuICAgIH1cbi4uLlxuXG4gICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuUmV0dXJuQWN0aW9uUGVyZm9ybWVkXG5cbiAgICBwcml2YXRlIHZvaWQgYnRuU2lnbnVwQWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0blNpZ251cEFjdGlvblBlcmZvcm1lZFxuICAgICAgICAvLyBUT0RPIGFkZCB5b3VyIGhhbmRsaW5nIGNvZGUgaGVyZTpcbiAgICAgICAgaWYgKHZhbGlkYXRlRmllbGRzKCkpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgU3Vic2NyaWJlciBzdWIgPSBuZXcgU3Vic2NyaWJlcigpO1xuICAgICAgICAgICAgICAgIHN1Yi5zZXRGdWxsTmFtZSh0eHROYW1lLmdldFRleHQoKSk7XG4gICAgICAgICAgICAgICAgc3ViLnNldFVzZXJuYW1lKHR4dFVzZXJOYW1lLmdldFRleHQoKSk7XG4gICAgICAgICAgICAgICAgc3ViLnNldFBhc3N3b3JkKHR4dFBhc3N3b3JkLmdldFRleHQoKSk7XG4gICAgICAgICAgICAgICAgc3ViLnNldFJvbGUoREVGQVVMVF9ST0xFKTtcbiAgICAgICAgICAgICAgICBzdWIuc2V0QWRkcmVzcyh0eHRBZGRyZXNzLmdldFRleHQoKSk7XG4gICAgICAgICAgICAgICAgc3ViLnNldFBob25lKHR4dFBob25lLmdldFRleHQoKSk7XG4gICAgICAgICAgICAgICAgc3ViLnNldENyZWF0ZV9hdChMb2NhbERhdGVUaW1lLm5vdygpKTtcbiAgICAgICAgICAgICAgICBTdWJzY3JpYmVyREFPLmluc2VydChzdWIpO1xuICAgICAgICAgICAgICAgIGNsZWFyKCk7XG4gICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZXgpIHtcbiAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcIkzhu5dpOiBcIiArIGV4LmdldE1lc3NhZ2UoKSwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0blNpZ251cEFjdGlvblBlcmZvcm1lZFxuLi4uXG5QYXRoOiBzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9Gb3Jnb3RQYXNzd29yZC5qYXZhXG4vKlxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9MaWNlbnNlcy9saWNlbnNlLWRlZmF1bHQudHh0IHRvIGNoYW5nZSB0aGlzIGxpY2Vuc2VcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvR1VJRm9ybXMvSkZyYW1lLmphdmEgdG8gZWRpdCB0aGlzIHRlbXBsYXRlXG4gKi9cbnBhY2thZ2UgaW50ZXJuZXQubWFuZ2VtZW50LnN5c3RlbTtcblxuaW1wb3J0IERBTy5TdWJzY3JpYmVyREFPO1xuaW1wb3J0IE1vZGVsLlN1YnNjcmliZXI7XG5pbXBvcnQgamF2YXguc3dpbmcuSk9wdGlvblBhbmU7XG5pbXBvcnQgaW50ZXJuZXQubWFuZ2VtZW50LnN5c3RlbS5Mb2dpbjtcbi4uLlxuXG4gICAgcHJpdmF0ZSB2b2lkIGJ0bkV4aXRBY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuRXhpdEFjdGlvblBlcmZvcm1lZFxuICAgICAgICAvLyBUT0RPIGFkZCB5b3VyIGhhbmRsaW5nIGNvZGUgaGVyZTpcbiAgICAgICAgaW50IHJlc3VsdCA9IEpPcHRpb25QYW5lLnNob3dDb25maXJtRGlhbG9nKG51bGwsIFwiQuG6oW4gY8OzIGNo4bqvYyBjaOG6r24gbXXhu5FuIHRob8OhdCBraMO0bmc/XCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuWUVTX05PX09QVElPTiwgSk9wdGlvblBhbmUuUVVFU1RJT05fTUVTU0FHRSk7XG5cbiAgICAgICAgaWYgKHJlc3VsdCA9PSBKT3B0aW9uUGFuZS5ZRVNfT1BUSU9OKSB7XG4gICAgICAgICAgICBuZXcgTG9naW4oKS5zZXRWaXNpYmxlKHRydWUpO1xuICAgICAgICAgICAgdGhpcy5kaXNwb3NlKCk7XG4gICAgICAgIH1cbiAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5FeGl0QWN0aW9uUGVyZm9ybWVkXG5cbiAgICBwcml2YXRlIHZvaWQgYnRuQ2hlY2tBY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuQ2hlY2tBY3Rpb25QZXJmb3JtZWRcbiAgICAgICAgU3lzdGVtLm91dC5wcmludChcIkhlbGxvXCIpO1xuICAgICAgICBpZiAodmFsaWRhdGVQaG9uZSgpKSB7XG4gICAgICAgICAgICBTdHJpbmcgcGhvbmUgPSB0eHRQaG9uZS5nZXRUZXh0KCk7XG4gICAgICAgICAgICBjdXJyZW50U3Vic2NyaWJlciA9IFN1YnNjcmliZXJEQU8uZ2V0QnlQaG9uZShwaG9uZSk7XG4uLi5cblxuICAgIHByaXZhdGUgdm9pZCBidG5DaGFuZ2VBY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuQ2hhbmdlQWN0aW9uUGVyZm9ybWVkXG4gICAgICAgIGlmICh2YWxpZGF0ZUZpZWxkcygpICYmIGN1cnJlbnRTdWJzY3JpYmVyICE9IG51bGwpIHtcbiAgICAgICAgICAgIFN0cmluZyBuZXdQYXNzd29yZCA9IHR4dFBhc3N3b3JkLmdldFRleHQoKTtcblxuICAgICAgICAgICAgYm9vbGVhbiBzdWNjZXNzID0gU3Vic2NyaWJlckRBTy51cGRhdGVQYXNzd29yZChjdXJyZW50U3Vic2NyaWJlci5nZXRVc2VyX2lkKCksIG5ld1Bhc3N3b3JkKTtcblxuICAgICAgICAgICAgaWYgKHN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcIsSQ4buVaSBt4bqtdCBraOG6qXUgdGjDoG5oIGPDtG5nISBWdWkgbMOybmcgxJHEg25nIG5o4bqtcCBs4bqhaS5cIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5JTkZPUk1BVElPTl9NRVNTQUdFKTtcbiAgICAgICAgICAgICAgICBuZXcgTG9naW4oKS5zZXRWaXNpYmxlKHRydWUpO1xuICAgICAgICAgICAgICAgIHRoaXMuZGlzcG9zZSgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcIsSQ4buVaSBt4bqtdCBraOG6qXUgdGjhuqV0IGLhuqFpISBWdWkgbMOybmcgdGjhu60gbOG6oWkgc2F1LlwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuQ2hhbmdlQWN0aW9uUGVyZm9ybWVkXG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvY29tL3N0b3JlL2FwcC9wZXRzdG9yZS9EQU8vVXNlckRBTy5qYXZhXG5wYWNrYWdlIGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuREFPO1xuXG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5Nb2RlbHMuRW50aXRpZXMuVXNlcjtcbmltcG9ydCBvcmcubWluZHJvdC5qYmNyeXB0LkJDcnlwdDtcblxuaW1wb3J0IGphdmEuc3FsLio7XG5pbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDtcbmltcG9ydCBqYXZhLnV0aWwuQmFzZTY0O1xuXG5wdWJsaWMgY2xhc3MgVXNlckRBTyBpbXBsZW1lbnRzIEJhc2VEQU88VXNlciwgSW50ZWdlcj4ge1xuICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgaW50IGlzRHVwbGljYXRlID0gLTE7XG5cbiAgICBwdWJsaWMgc3RhdGljIFVzZXJEQU8gZ2V0SW5zdGFuY2UoKSB7XG4gICAgICAgIHJldHVybiBuZXcgVXNlckRBTygpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgU3RyaW5nIGVuY29kZShTdHJpbmcgcGFzc3dvcmQpIHtcbi8vICAgICAgICByZXR1cm4gQmFzZTY0LmdldEVuY29kZXIoKS5lbmNvZGVUb1N0cmluZyhwYXNzd29yZC5nZXRCeXRlcygpKTtcbiAgICAgICAgcmV0dXJuIEJDcnlwdC5oYXNocHcocGFzc3dvcmQsIEJDcnlwdC5nZW5zYWx0KCkpO1xuICAgIH1cblxuLy8gICAgcHVibGljIHN0YXRpYyBTdHJpbmcgZGVjb2RlKFN0cmluZyBwYXNzd29yZCkge1xuLy8gICAgICAgIHJldHVybiBuZXcgU3RyaW5nKEJhc2U2NC5nZXREZWNvZGVyKCkuZGVjb2RlKHBhc3N3b3JkKSk7XG4vLyAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGJvb2xlYW4gdmVyaWZ5KFN0cmluZyBwYXNzd29yZCwgU3RyaW5nIGhhc2hlZCkge1xuICAgICAgICByZXR1cm4gQkNyeXB0LmNoZWNrcHcocGFzc3dvcmQsIGhhc2hlZCk7XG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIGludCBpbnNlcnQoVXNlciBlbnRpdHkpIHtcbiAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcbiAgICAgICAgUHJlcGFyZWRTdGF0ZW1lbnQgc3RtdCA9IG51bGw7XG4gICAgICAgIFJlc3VsdFNldCBycyA9IG51bGw7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbm4gPSBEYXRhYmFzZVV0aWwuZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgICAgICAgU3RyaW5nIHNxbCA9IFwiSU5TRVJUIElOVE8gVXNlcnMgKHVzZXJuYW1lLCBwYXNzd29yZCwgcm9sZSwgaW1hZ2VfdXJsLCBpc0FjdGl2ZSkgVkFMVUVTICg/LCA/LCA/LCA/LCA/KVwiO1xuICAgICAgICAgICAgc3RtdCA9IGNvbm4ucHJlcGFyZVN0YXRlbWVudChzcWwsIFN0YXRlbWVudC5SRVRVUk5fR0VORVJBVEVEX0tFWVMpO1xuXG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygxLCBlbnRpdHkuZ2V0VXNlcm5hbWUoKSk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygyLCBlbmNvZGUoZW50aXR5LmdldFBhc3N3b3JkKCkpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDMsIGVudGl0eS5nZXRSb2xlKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoNCwgZW50aXR5LmdldEltYWdlVXJsKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRCb29sZWFuKDUsIGVudGl0eS5pc0FjdGl2ZSgpKTtcblxuICAgICAgICAgICAgaW50IGFmZmVjdGVkUm93cyA9IHN0bXQuZXhlY3V0ZVVwZGF0ZSgpO1xuICAgICAgICAgICAgaWYgKGFmZmVjdGVkUm93cyA9PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRyeSAoUmVzdWx0U2V0IGdlbmVyYXRlZEtleXMgPSBzdG10LmdldEdlbmVyYXRlZEtleXMoKSkge1xuICAgICAgICAgICAgICAgIGlmIChnZW5lcmF0ZWRLZXlzLm5leHQoKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ2VuZXJhdGVkS2V5cy5nZXRJbnQoMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBEYXRhYmFzZVV0aWwuY2xvc2VSZXNvdXJjZXMocnMsIHN0bXQsIGNvbm4pO1xuICAgICAgICB9XG4gICAgfVxuLi4uXG5QYXRoOiBzcmMvREFPL1VzZXJEQU8uamF2YVxuLypcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvTGljZW5zZXMvbGljZW5zZS1kZWZhdWx0LnR4dCB0byBjaGFuZ2UgdGhpcyBsaWNlbnNlXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ2xhc3MuamF2YSB0byBlZGl0IHRoaXMgdGVtcGxhdGVcbiAqL1xucGFja2FnZSBEQU87XG5cbmltcG9ydCBNb2RlbC5Vc2VyO1xuaW1wb3J0IGphdmEudXRpbC5MaXN0O1xuXG4vKipcbiAqXG4gKiBAYXV0aG9yIE5nb2MgVGhhb1xuICovXG5wdWJsaWMgY2xhc3MgVXNlckRBT3tcblxuICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBpbnNlcnQoVXNlciBvYmopIHtcbiAgICAgICAgXG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyB2b2lkIHVwZGF0ZShVc2VyIG9iaikge1xuICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oXCJOb3Qgc3VwcG9ydGVkIHlldC5cIik7IC8vIEdlbmVyYXRlZCBmcm9tIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9Db2RlL0dlbmVyYXRlZE1ldGhvZEJvZHlcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIHZvaWQgZGVsZXRlKGludCBpZCkge1xuICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oXCJOb3Qgc3VwcG9ydGVkIHlldC5cIik7IC8vIEdlbmVyYXRlZCBmcm9tIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9Db2RlL0dlbmVyYXRlZE1ldGhvZEJvZHlcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIFVzZXIgZ2V0QnlJZChpbnQgaWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpOyAvLyBHZW5lcmF0ZWQgZnJvbSBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ29kZS9HZW5lcmF0ZWRNZXRob2RCb2R5XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBMaXN0PFVzZXI+IGdldEFsbCgpIHtcbiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpOyAvLyBHZW5lcmF0ZWQgZnJvbSBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ29kZS9HZW5lcmF0ZWRNZXRob2RCb2R5XG4gICAgfVxuICAgIFxufVxuLi4uXG5QYXRoOiBzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9JbnRlcm5ldE1hbmdlbWVudFN5c3RlbS5qYXZhXG4vKlxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9MaWNlbnNlcy9saWNlbnNlLWRlZmF1bHQudHh0IHRvIGNoYW5nZSB0aGlzIGxpY2Vuc2VcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9NYWluLmphdmEgdG8gZWRpdCB0aGlzIHRlbXBsYXRlXG4gKi9cbnBhY2thZ2UgaW50ZXJuZXQubWFuZ2VtZW50LnN5c3RlbTtcblxuLyoqXG4gKlxuICogQGF1dGhvciBOZ29jIFRoYW9cbiAqL1xucHVibGljIGNsYXNzIEludGVybmV0TWFuZ2VtZW50U3lzdGVtIHtcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSBhcmdzIHRoZSBjb21tYW5kIGxpbmUgYXJndW1lbnRzXG4gICAgICovXG4gICAgcHVibGljIHN0YXRpYyB2b2lkIG1haW4oU3RyaW5nW10gYXJncykge1xuICAgICAgICAvLyBUT0RPIGNvZGUgYXBwbGljYXRpb24gbG9naWMgaGVyZVxuICAgIH1cbiAgICBcbn1cbi4uLlxuUGF0aDogc3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vQWRtaW4vRGFzaGJvYXJkLmphdmFcbi8qXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0xpY2Vuc2VzL2xpY2Vuc2UtZGVmYXVsdC50eHQgdG8gY2hhbmdlIHRoaXMgbGljZW5zZVxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9HVUlGb3Jtcy9KRnJhbWUuamF2YSB0byBlZGl0IHRoaXMgdGVtcGxhdGVcbiAqL1xucGFja2FnZSBpbnRlcm5ldC5tYW5nZW1lbnQuc3lzdGVtLkFkbWluO1xuXG5pbXBvcnQgTW9kZWwuVXNlcjtcbmltcG9ydCBpbnRlcm5ldC5tYW5nZW1lbnQuc3lzdGVtLlNlc3Npb24uVXNlclNlc3Npb247XG5pbXBvcnQgamF2YS50aW1lLkxvY2FsVGltZTtcbmltcG9ydCBqYXZheC5zd2luZy5KT3B0aW9uUGFuZTtcblxuLyoqXG4gKlxuICogQGF1dGhvciBOZ29jIFRoYW9cbiAqL1xucHVibGljIGNsYXNzIERhc2hib2FyZCBleHRlbmRzIGphdmF4LnN3aW5nLkpGcmFtZSB7XG5cbiAgICBVc2VyIGFkbWluID0gVXNlclNlc3Npb24uZ2V0Q3VycmVudFVzZXIoKTtcbiAgICBcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIG5ldyBmb3JtIERhc2hib2FyZFxuICAgICAqL1xuICAgIHB1YmxpYyBEYXNoYm9hcmQoKSB7XG4gICAgICAgIGluaXRDb21wb25lbnRzKCk7XG4gICAgICAgIHNldHVwSGVsbG8oKTtcbiAgICAgICAgc2V0dXBVc2VybmFtZSgpO1xuICAgIH1cbiAgICBcbiAgICBwcml2YXRlIHZvaWQgc2V0dXBIZWxsbygpIHtcbiAgICAgICAgTG9jYWxUaW1lIG5vdyA9IExvY2FsVGltZS5ub3coKTtcbiAgICAgICAgaW50IGhvdXIgPSBub3cuZ2V0SG91cigpO1xuICAgICAgICBcbiAgICAgICAgU3RyaW5nIGdyZWV0aW5nO1xuXG4gICAgICAgIGlmIChob3VyID49IDUgJiYgaG91ciA8IDExKSB7XG4gICAgICAgICAgICBncmVldGluZyA9IFwiQ2jDoG8gYnXhu5VpIHPDoW5nLFwiO1xuICAgICAgICB9IGVsc2UgaWYgKGhvdXIgPj0gMTEgJiYgaG91ciA8IDE1KSB7XG4gICAgICAgICAgICBncmVldGluZyA9IFwiQ2jDoG8gYnXhu5VpIHRyxrBhLFwiO1xuICAgICAgICB9IGVsc2UgaWYgKGhvdXIgPj0gMTUgJiYgaG91ciA8IDE3KSB7XG4gICAgICAgICAgICBncmVldGluZyA9IFwiQ2jDoG8gYnXhu5VpIGNoaeG7gXUsXCI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBncmVldGluZyA9IFwiQ2jDoG8gYnXhu5VpIHThu5FpLFwiO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBsYkhlbGxvLnNldFRleHQoZ3JlZXRpbmcpO1xuICAgIH1cbiAgICBcbiAgICBwcml2YXRlIHZvaWQgc2V0dXBVc2VybmFtZSgpIHtcbiAgICAgICAgbGJVc2VyTmFtZS5zZXRUZXh0KGFkbWluLmdldFVzZXJuYW1lKCkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGNhbGxlZCBmcm9tIHdpdGhpbiB0aGUgY29uc3RydWN0b3IgdG8gaW5pdGlhbGl6ZSB0aGUgZm9ybS5cbiAgICAgKiBXQVJOSU5HOiBEbyBOT1QgbW9kaWZ5IHRoaXMgY29kZS4gVGhlIGNvbnRlbnQgb2YgdGhpcyBtZXRob2QgaXMgYWx3YXlzXG4gICAgICogcmVnZW5lcmF0ZWQgYnkgdGhlIEZvcm0gRWRpdG9yLlxuICAgICAqL1xuICAgIEBTdXBwcmVzc1dhcm5pbmdzKFwidW5jaGVja2VkXCIpXG4gICAgLy8gPGVkaXRvci1mb2xkIGRlZmF1bHRzdGF0ZT1cImNvbGxhcHNlZFwiIGRlc2M9XCJHZW5lcmF0ZWQgQ29kZVwiPi8vR0VOLUJFR0lOOmluaXRDb21wb25lbnRzXG4gICAgcHJpdmF0ZSB2b2lkIGluaXRDb21wb25lbnRzKCkge1xuXG4gICAgICAgIGJ0blVzZXIgPSBuZXcgamF2YXguc3dpbmcuSkJ1dHRvbigpO1xuICAgICAgICBidG5DdXN0b21lciA9IG5ldyBqYXZheC5zd2luZy5KQnV0dG9uKCk7XG4gICAgICAgIGJ0blBsYW4gPSBuZXcgamF2YXguc3dpbmcuSkJ1dHRvbigpO1xuICAgICAgICBidG5Db250cmFjdCA9IG5ldyBqYXZheC5zd2luZy5KQnV0dG9uKCk7XG4gICAgICAgIGJ0bkhpc3RvcnkgPSBuZXcgamF2YXguc3dpbmcuSkJ1dHRvbigpO1xuICAgICAgICBidG5TdGF0aXN0aWMgPSBuZXcgamF2YXguc3dpbmcuSkJ1dHRvbigpO1xuICAgICAgICBidG5FeGl0ID0gbmV3IGphdmF4LnN3aW5nLkpCdXR0b24oKTtcbiAgICAgICAgalNlcGFyYXRvcjEgPSBuZXcgamF2YXguc3dpbmcuSlNlcGFyYXRvcigpO1xuICAgICAgICBsYlVzZXJOYW1lID0gbmV3IGphdmF4LnN3aW5nLkpMYWJlbCgpO1xuICAgICAgICBsYkhlbGxvID0gbmV3IGphdmF4LnN3aW5nLkpMYWJlbCgpO1xuXG4gICAgICAgIHNldERlZmF1bHRDbG9zZU9wZXJhdGlvbihqYXZheC5zd2luZy5XaW5kb3dDb25zdGFudHMuRVhJVF9PTl9DTE9TRSk7XG5cbiAgICAgICAgYnRuVXNlci5zZXRGb250KG5ldyBqYXZhLmF3dC5Gb250KFwiQXJpYWxcIiwgMSwgMjQpKTsgLy8gTk9JMThOXG4gICAgICAgIGJ0blVzZXIuc2V0SWNvbihuZXcgamF2YXguc3dpbmcuSW1hZ2VJY29uKGdldENsYXNzKCkuZ2V0UmVzb3VyY2UoXCIvSW1hZ2VzL3VzZXIucG5nXCIpKSk7IC8vIE5PSTE4TlxuICAgICAgICBidG5Vc2VyLnNldFRleHQoXCJRdeG6o24gbMO9IG5nxrDhu51pIGTDuW5nXCIpO1xuICAgICAgICBidG5Vc2VyLnNldEN1cnNvcihuZXcgamF2YS5hd3QuQ3Vyc29yKGphdmEuYXd0LkN1cnNvci5IQU5EX0NVUlNPUikpO1xuICAgICAgICBidG5Vc2VyLnNldEhvcml6b250YWxBbGlnbm1lbnQoamF2YXguc3dpbmcuU3dpbmdDb25zdGFudHMuTEVGVCk7XG4gICAgICAgIGJ0blVzZXIuYWRkQWN0aW9uTGlzdGVuZXIobmV3IGphdmEuYXd0LmV2ZW50LkFjdGlvbkxpc3RlbmVyKCkge1xuICAgICAgICAgICAgcHVibGljIHZvaWQgYWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkge1xuICAgICAgICAgICAgICAgIGJ0blVzZXJBY3Rpb25QZXJmb3JtZWQoZXZ0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4uLi5cbiAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChidG5DdXN0b21lciwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuREVGQVVMVF9TSVpFLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5ERUZBVUxUX1NJWkUsIFNob3J0Lk1BWF9WQUxVRSkpXG4gICAgICAgICAgICAgICAgLmFkZEdhcCgzNSwgMzUsIDM1KVxuICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQoYnRuRXhpdCwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUsIDQwLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSlcbiAgICAgICAgICAgICAgICAuYWRkR2FwKDIwMSwgMjAxLCAyMDEpKVxuICAgICAgICApO1xuXG4gICAgICAgIHBhY2soKTtcbiAgICB9Ly8gPC9lZGl0b3ItZm9sZD4vL0dFTi1FTkQ6aW5pdENvbXBvbmVudHNcblxuICAgIHByaXZhdGUgdm9pZCBidG5Vc2VyQWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0blVzZXJBY3Rpb25QZXJmb3JtZWRcbiAgICAgICAgLy8gVE9ETyBhZGQgeW91ciBoYW5kbGluZyBjb2RlIGhlcmU6XG4gICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuVXNlckFjdGlvblBlcmZvcm1lZFxuXG4gICAgcHJpdmF0ZSB2b2lkIGJ0bkN1c3RvbWVyQWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkN1c3RvbWVyQWN0aW9uUGVyZm9ybWVkXG4gICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxuICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0bkN1c3RvbWVyQWN0aW9uUGVyZm9ybWVkXG4uLi5cbiAgICAgICAgLy88L2VkaXRvci1mb2xkPlxuXG4gICAgICAgIC8qIENyZWF0ZSBhbmQgZGlzcGxheSB0aGUgZm9ybSAqL1xuICAgICAgICBqYXZhLmF3dC5FdmVudFF1ZXVlLmludm9rZUxhdGVyKG5ldyBSdW5uYWJsZSgpIHtcbiAgICAgICAgICAgIHB1YmxpYyB2b2lkIHJ1bigpIHtcbiAgICAgICAgICAgICAgICBuZXcgRGFzaGJvYXJkKCkuc2V0VmlzaWJsZSh0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gVmFyaWFibGVzIGRlY2xhcmF0aW9uIC0gZG8gbm90IG1vZGlmeS8vR0VOLUJFR0lOOnZhcmlhYmxlc1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkJ1dHRvbiBidG5Db250cmFjdDtcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpCdXR0b24gYnRuQ3VzdG9tZXI7XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KQnV0dG9uIGJ0bkV4aXQ7XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KQnV0dG9uIGJ0bkhpc3Rvcnk7XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KQnV0dG9uIGJ0blBsYW47XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KQnV0dG9uIGJ0blN0YXRpc3RpYztcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpCdXR0b24gYnRuVXNlcjtcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpTZXBhcmF0b3IgalNlcGFyYXRvcjE7XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KTGFiZWwgbGJIZWxsbztcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpMYWJlbCBsYlVzZXJOYW1lO1xuICAgIC8vIEVuZCBvZiB2YXJpYWJsZXMgZGVjbGFyYXRpb24vL0dFTi1FTkQ6dmFyaWFibGVzXG59XG4uLi5cblBhdGg6IHNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL0xvZ2luLmZvcm1cbjw/eG1sIHZlcnNpb249XCIxLjBcIiBlbmNvZGluZz1cIlVURi04XCIgPz5cblxuPEZvcm0gdmVyc2lvbj1cIjEuM1wiIG1heFZlcnNpb249XCIxLjlcIiB0eXBlPVwib3JnLm5ldGJlYW5zLm1vZHVsZXMuZm9ybS5mb3JtaW5mby5KRnJhbWVGb3JtSW5mb1wiPlxuICA8UHJvcGVydGllcz5cbiAgICA8UHJvcGVydHkgbmFtZT1cImRlZmF1bHRDbG9zZU9wZXJhdGlvblwiIHR5cGU9XCJpbnRcIiB2YWx1ZT1cIjNcIi8+XG4gIDwvUHJvcGVydGllcz5cbiAgPFN5bnRoZXRpY1Byb3BlcnRpZXM+XG4gICAgPFN5bnRoZXRpY1Byb3BlcnR5IG5hbWU9XCJmb3JtU2l6ZVBvbGljeVwiIHR5cGU9XCJpbnRcIiB2YWx1ZT1cIjFcIi8+XG4gICAgPFN5bnRoZXRpY1Byb3BlcnR5IG5hbWU9XCJnZW5lcmF0ZUNlbnRlclwiIHR5cGU9XCJib29sZWFuXCIgdmFsdWU9XCJmYWxzZVwiLz5cbiAgPC9TeW50aGV0aWNQcm9wZXJ0aWVzPlxuICA8QXV4VmFsdWVzPlxuICAgIDxBdXhWYWx1ZSBuYW1lPVwiRm9ybVNldHRpbmdzX2F1dG9SZXNvdXJjaW5nXCIgdHlwZT1cImphdmEubGFuZy5JbnRlZ2VyXCIgdmFsdWU9XCIwXCIvPlxuICAgIDxBdXhWYWx1ZSBuYW1lPVwiRm9ybVNldHRpbmdzX2F1dG9TZXRDb21wb25lbnROYW1lXCIgdHlwZT1cImphdmEubGFuZy5Cb29sZWFuXCIgdmFsdWU9XCJmYWxzZVwiLz5cbiAgICA8QXV4VmFsdWUgbmFtZT1cIkZvcm1TZXR0aW5nc19nZW5lcmF0ZUZRTlwiIHR5cGU9XCJqYXZhLmxhbmcuQm9vbGVhblwiIHZhbHVlPVwidHJ1ZVwiLz5cbiAgICA8QXV4VmFsdWUgbmFtZT1cIkZvcm1TZXR0aW5nc19nZW5lcmF0ZU1uZW1vbmljc0NvZGVcIiB0eXBlPVwiamF2YS5sYW5nLkJvb2xlYW5cIiB2YWx1ZT1cImZhbHNlXCIvPlxuLi4uXG5QYXRoOiBzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9BZG1pbi9EYXNoYm9hcmQuZm9ybVxuPD94bWwgdmVyc2lvbj1cIjEuMFwiIGVuY29kaW5nPVwiVVRGLThcIiA/PlxuXG48Rm9ybSB2ZXJzaW9uPVwiMS4zXCIgbWF4VmVyc2lvbj1cIjEuOVwiIHR5cGU9XCJvcmcubmV0YmVhbnMubW9kdWxlcy5mb3JtLmZvcm1pbmZvLkpGcmFtZUZvcm1JbmZvXCI+XG4gIDxQcm9wZXJ0aWVzPlxuICAgIDxQcm9wZXJ0eSBuYW1lPVwiZGVmYXVsdENsb3NlT3BlcmF0aW9uXCIgdHlwZT1cImludFwiIHZhbHVlPVwiM1wiLz5cbiAgPC9Qcm9wZXJ0aWVzPlxuICA8U3ludGhldGljUHJvcGVydGllcz5cbiAgICA8U3ludGhldGljUHJvcGVydHkgbmFtZT1cImZvcm1TaXplUG9saWN5XCIgdHlwZT1cImludFwiIHZhbHVlPVwiMVwiLz5cbiAgICA8U3ludGhldGljUHJvcGVydHkgbmFtZT1cImdlbmVyYXRlQ2VudGVyXCIgdHlwZT1cImJvb2xlYW5cIiB2YWx1ZT1cImZhbHNlXCIvPlxuICA8L1N5bnRoZXRpY1Byb3BlcnRpZXM+XG4gIDxBdXhWYWx1ZXM+XG4gICAgPEF1eFZhbHVlIG5hbWU9XCJGb3JtU2V0dGluZ3NfYXV0b1Jlc291cmNpbmdcIiB0eXBlPVwiamF2YS5sYW5nLkludGVnZXJcIiB2YWx1ZT1cIjBcIi8+XG4gICAgPEF1eFZhbHVlIG5hbWU9XCJGb3JtU2V0dGluZ3NfYXV0b1NldENvbXBvbmVudE5hbWVcIiB0eXBlPVwiamF2YS5sYW5nLkJvb2xlYW5cIiB2YWx1ZT1cImZhbHNlXCIvPlxuICAgIDxBdXhWYWx1ZSBuYW1lPVwiRm9ybVNldHRpbmdzX2dlbmVyYXRlRlFOXCIgdHlwZT1cImphdmEubGFuZy5Cb29sZWFuXCIgdmFsdWU9XCJ0cnVlXCIvPlxuICAgIDxBdXhWYWx1ZSBuYW1lPVwiRm9ybVNldHRpbmdzX2dlbmVyYXRlTW5lbW9uaWNzQ29kZVwiIHR5cGU9XCJqYXZhLmxhbmcuQm9vbGVhblwiIHZhbHVlPVwiZmFsc2VcIi8+XG4uLi5cbiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfMDEyejhjaUpMazhLZ2FmYVlaZzFYYzZjIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiRTovSG9jVGFwLzAyX0pBVkEvMDNfUHJvamVjdC9JbnRlcm5ldCBNYW5nZW1lbnQgU3lzdGVtIiwiZm9sZGVyUm9vdCI6IkU6L0hvY1RhcC8wMl9KQVZBLzAzX1Byb2plY3QvSW50ZXJuZXQgTWFuZ2VtZW50IFN5c3RlbSJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInRpbWVzdGFtcCI6IjIwMjUtMDUtMTNUMTM6MDE6MDguMTU3WiIsInJlc3BvbnNlX3RleHQiOiJOb3csIGxldCBtZSBjaGVjayBmb3IgdGhlIGltcGxlbWVudGF0aW9uIG9mIHRoZSBVc2VyREFPLmxvZ2luIG1ldGhvZCBhbmQgdGhlIFNlc3Npb24gbWFuYWdlbWVudDpcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiIwODBkZjBmMS02ZjgxLTQzZDgtYWRlOS04YTAxNzRjNTFlYTUiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1XzAxRmpwVW5NTUJXUWdmU3A3TFpydFhSViIsInRvb2xfbmFtZSI6ImNvZGViYXNlLXJldHJpZXZhbCIsImlucHV0X2pzb24iOiJ7XCJpbmZvcm1hdGlvbl9yZXF1ZXN0XCI6IFwiRmluZCB0aGUgaW1wbGVtZW50YXRpb24gb2YgdGhlIFVzZXJEQU8ubG9naW4gbWV0aG9kIGluIHRoZSBEQU8gcGFja2FnZS4gSSBuZWVkIHRvIHNlZSB0aGUgZXhhY3QgaW1wbGVtZW50YXRpb24gdG8gdW5kZXJzdGFuZCBob3cgaXQgd29ya3MgYW5kIGhvdyBpdCBjYW4gYmUgbW9kaWZpZWQgdG8gcmV0cmlldmUgdXNlciBpbmZvcm1hdGlvbi5cIn0iLCJtY3Bfc2VydmVyX25hbWUiOiIiLCJtY3BfdG9vbF9uYW1lIjoiIn19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiJCYXNlZCBvbiB0aGUgaW5mb3JtYXRpb24gZ2F0aGVyZWQsIEknbGwgbm93IGltcGxlbWVudCB0aGUgZnVuY3Rpb25hbGl0eSB0byBnZXQgYWxsIHVzZXIgaW5mb3JtYXRpb24gd2hlbiBsb2dpbiBpcyBzdWNjZXNzZnVsLiBMZXQgbWUgZmlyc3QgY3JlYXRlIGEgcGxhbjpcblxuIyMgUGxhbiBmb3IgSW1wbGVtZW50aW5nIFVzZXIgSW5mb3JtYXRpb24gUmV0cmlldmFsIG9uIFN1Y2Nlc3NmdWwgTG9naW5cblxuMS4gRXhhbWluZSB0aGUgY3VycmVudCBsb2dpbiBwcm9jZXNzIGluIHRoZSBgTG9naW4uamF2YWAgZmlsZVxuMi4gSWRlbnRpZnkgd2hlcmUgdG8gYWRkIHRoZSBjb2RlIHRvIHJldHJpZXZlIGFuZCBzdG9yZSB1c2VyIGluZm9ybWF0aW9uIGFmdGVyIHN1Y2Nlc3NmdWwgbG9naW5cbjMuIEltcGxlbWVudCB0aGUgbmVjZXNzYXJ5IGNoYW5nZXMgdG8gcmV0cmlldmUgdXNlciBpbmZvcm1hdGlvbiBhbmQgc3RvcmUgaXQgaW4gdGhlIFVzZXJTZXNzaW9uXG40LiBVcGRhdGUgdGhlIGxvZ2luIG1ldGhvZCB0byBkaXNwbGF5IHRoZSBEYXNoYm9hcmQgYWZ0ZXIgc3VjY2Vzc2Z1bCBsb2dpblxuXG5MZXQncyBzdGFydCBieSBpbXBsZW1lbnRpbmcgdGhlc2UgY2hhbmdlczpcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IlRoZSBmb2xsb3dpbmcgY29kZSBzZWN0aW9ucyB3ZXJlIHJldHJpZXZlZDpcblBhdGg6IHNyYy9tYWluL2phdmEvY29tL3N0b3JlL2FwcC9wZXRzdG9yZS9Db250cm9sbGVycy9Mb2dpbkNvbnRyb2xsZXIuamF2YVxuLi4uXG5cbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLkRBTy5Vc2VyREFPO1xuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuREFPLlN0YWZmREFPO1xuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuTW9kZWxzLkVudGl0aWVzLlVzZXI7XG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5Nb2RlbHMuRW50aXRpZXMuU3RhZmY7XG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5TZXNzaW9ucy5TZXNzaW9uTWFuYWdlcjtcbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLlZpZXdzLkFkbWluRmFjdG9yeTtcbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLlZpZXdzLlZpZXdGYWN0b3J5O1xuaW1wb3J0IGRlLmplbnNkLmZ4LmdseXBocy5mb250YXdlc29tZS5Gb250QXdlc29tZUljb247XG5pbXBvcnQgZGUuamVuc2QuZnguZ2x5cGhzLmZvbnRhd2Vzb21lLkZvbnRBd2Vzb21lSWNvblZpZXc7XG5pbXBvcnQgamF2YWZ4LmZ4bWwuRlhNTDtcbmltcG9ydCBqYXZhZnguZnhtbC5Jbml0aWFsaXphYmxlO1xuaW1wb3J0IGphdmFmeC5zY2VuZS5jb250cm9sLio7XG5pbXBvcnQgamF2YWZ4LnNjZW5lLmlucHV0Lk1vdXNlRXZlbnQ7XG5pbXBvcnQgamF2YWZ4LnN0YWdlLlN0YWdlO1xuaW1wb3J0IGphdmFmeC5zY2VuZS5pbWFnZS5JbWFnZTtcbmltcG9ydCBqYXZhZnguc2NlbmUuaW1hZ2UuSW1hZ2VWaWV3O1xuaW1wb3J0IGphdmFmeC5zY2VuZS5wYWludC5JbWFnZVBhdHRlcm47XG5pbXBvcnQgamF2YS51dGlsLk9iamVjdHM7XG4uLi5cblxucHVibGljIGNsYXNzIExvZ2luQ29udHJvbGxlciBpbXBsZW1lbnRzIEluaXRpYWxpemFibGUge1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIEZvbnRBd2Vzb21lSWNvblZpZXcgZXllSWNvbjtcblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBUZXh0RmllbGQgc2hvd1Bhc3N3b3JkO1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIFBhc3N3b3JkRmllbGQgcGFzc3dvcmRGaWVsZDtcblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBUZXh0RmllbGQgdXNlcm5hbWVGaWVsZDtcblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBCdXR0b24gbG9naW5CdXR0b247XG5cbiAgICBARlhNTFxuICAgIHByaXZhdGUgTGFiZWwgZXJyb3JMYWJlbDtcblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBIeXBlcmxpbmsgZm9yZ290UGFzc3dvcmRMaW5rO1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIEltYWdlVmlldyB1c2VySW1hZ2U7XG5cbiAgICBwcml2YXRlIGRvdWJsZSB4LCB5O1xuXG4gICAgVXNlckRBTyB1c2VyREFPID0gbmV3IFVzZXJEQU8oKTtcbiAgICBTdGFmZkRBTyBzdGFmZkRBTyA9IFN0YWZmREFPLmdldEluc3RhbmNlKCk7XG4gICAgcHVibGljIHN0YXRpYyBpbnQgaWRTdGFmZkN1cnJlbnQ7XG4gICAgcHVibGljIHN0YXRpYyBpbnQgaWRBZG1pbkN1cnJlbnQ7XG5cbiAgICBwcml2YXRlIFNlc3Npb25NYW5hZ2VyIHNlc3Npb25NYW5hZ2VyID0gbmV3IFNlc3Npb25NYW5hZ2VyKCk7XG4uLi5cblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gVMOsbSB1c2VyIHRoZW8gdXNlcm5hbWVcbiAgICAgICAgICAgIFVzZXIgdXNlciA9IHVzZXJEQU8uZmluZEJ5VXNlcm5hbWUodXNlcm5hbWUpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZih1c2VyID09IG51bGwgfHwgdXNlci5nZXRVc2VybmFtZSgpID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBDb250cm9sbGVyVXRpbHMuc2hvd0FsZXJ0KEFsZXJ0LkFsZXJ0VHlwZS5FUlJPUiwgXCJM4buXaVwiLCBcIlTDqm4gxJHEg25nIG5o4bqtcCBraMO0bmcgxJHDum5nXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gS2nhu4NtIHRyYSB0w6puIMSRxINuZyBuaOG6rXBcbiAgICAgICAgICAgIGlmICghdXNlci5nZXRVc2VybmFtZSgpLmVxdWFscyh1c2VybmFtZSkpIHtcbiAgICAgICAgICAgICAgICBDb250cm9sbGVyVXRpbHMuc2hvd0FsZXJ0KEFsZXJ0LkFsZXJ0VHlwZS5FUlJPUiwgXCJM4buXaVwiLCBcIlTDqm4gxJHEg25nIG5o4bqtcCBraMO0bmcgxJHDum5nXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gS2nhu4NtIHRyYSBt4bqtdCBraOG6qXVcbiAgICAgICAgICAgIGlmKCFCQ3J5cHQuY2hlY2twdyhwYXNzd29yZCwgdXNlci5nZXRQYXNzd29yZCgpKSkge1xuICAgICAgICAgICAgICAgIENvbnRyb2xsZXJVdGlscy5zaG93QWxlcnQoQWxlcnQuQWxlcnRUeXBlLkVSUk9SLCBcIkzhu5dpXCIsIFwiTeG6rXQga2jhuql1IGtow7RuZyDEkcO6bmdcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzZXNzaW9uTWFuYWdlci5zZXRDdXJyZW50VXNlcih1c2VyKTtcblxuICAgICAgICAgICAgU3RhZ2UgY3VycmVudFN0YWdlID0gKFN0YWdlKSB1c2VybmFtZUZpZWxkLmdldFNjZW5lKCkuZ2V0V2luZG93KCk7XG5cbiAgICAgICAgICAgIGlmKHVzZXIuZ2V0Um9sZSgpLmVxdWFscyhVc2VyLlJPTEVfQURNSU4pKSB7XG4gICAgICAgICAgICAgICAgaWRBZG1pbkN1cnJlbnQgPSB1c2VyLmdldFVzZXJJZCgpO1xuICAgICAgICAgICAgICAgIEFkbWluRmFjdG9yeS5nZXRJbnN0YW5jZSgpLnN3aXRjaENvbnRlbnQoXCJkYXNoYm9hcmRcIiwgY3VycmVudFN0YWdlKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZih1c2VyLmdldFJvbGUoKS5lcXVhbHMoVXNlci5ST0xFX1VTRVIpKSB7XG4gICAgICAgICAgICAgICAgaWRTdGFmZkN1cnJlbnQgPSB1c2VyLmdldFVzZXJJZCgpO1xuICAgICAgICAgICAgICAgIFN0YWZmIHN0YWZmID0gc3RhZmZEQU8uZmluZEJ5VXNlcklkKHVzZXIuZ2V0VXNlcklkKCkpO1xuICAgICAgICAgICAgICAgIGlmIChzdGFmZiAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlc3Npb25NYW5hZ2VyLnNldEN1cnJlbnRTdGFmZihzdGFmZik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFZpZXdGYWN0b3J5LmdldEluc3RhbmNlKCkuc3dpdGNoQ29udGVudChcImRhc2hib2FyZFwiLCBjdXJyZW50U3RhZ2UpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBDb250cm9sbGVyVXRpbHMuc2hvd0FsZXJ0KEFsZXJ0LkFsZXJ0VHlwZS5FUlJPUiwgXCJM4buXaVwiLCBcIlZhaSB0csOyIG5nxrDhu51pIGTDuW5nIGtow7RuZyBo4bujcCBs4buHXCIpO1xuICAgICAgICAgICAgICAgIHNlc3Npb25NYW5hZ2VyLmNsZWFyKCk7XG4gICAgICAgICAgICB9XG4uLi5cblBhdGg6IHNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL0xvZ2luLmphdmFcbi8qXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0xpY2Vuc2VzL2xpY2Vuc2UtZGVmYXVsdC50eHQgdG8gY2hhbmdlIHRoaXMgbGljZW5zZVxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9HVUlGb3Jtcy9KRnJhbWUuamF2YSB0byBlZGl0IHRoaXMgdGVtcGxhdGVcbiAqL1xucGFja2FnZSBpbnRlcm5ldC5tYW5nZW1lbnQuc3lzdGVtO1xuXG5pbXBvcnQgREFPLlVzZXJEQU87XG5pbXBvcnQgTW9kZWwuVXNlcjtcbmltcG9ydCBqYXZheC5zd2luZy5KT3B0aW9uUGFuZTtcbi4uLlxuXG4gICAgcHJpdmF0ZSB2b2lkIGJ0bkxvZ2luQWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkxvZ2luQWN0aW9uUGVyZm9ybWVkXG4gICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxuICAgICAgICBpZih2YWxpZGF0ZUZpZWxkcygpKSB7XG4gICAgICAgICAgICB0cnl7XG4gICAgICAgICAgICAgICAgU3RyaW5nIHVzZXJuYW1lID0gdHh0VXNlck5hbWUuZ2V0VGV4dCgpLnRyaW0oKTtcbiAgICAgICAgICAgICAgICBTdHJpbmcgcGFzc3dvcmQgPSB0eHRQYXNzd29yZC5nZXRUZXh0KCkudHJpbSgpO1xuXG4gICAgICAgICAgICAgICAgVXNlciB1c2VyID0gbnVsbDtcbiAgICAgICAgICAgICAgICBib29sZWFuIGlzU3VjY2VzcyA9IFVzZXJEQU8ubG9naW4odXNlcm5hbWUsIHBhc3N3b3JkKTtcblxuICAgICAgICAgICAgICAgIGlmKGlzU3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyh0aGlzLCBcIsSQxINuZyBuaOG6rXAgdGjDoG5oIGPDtG5nIVwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLklORk9STUFUSU9OX01FU1NBR0UpO1xuLy8gICAgICAgICAgICAgICAgICAgIG5ldyBNYWluRnJhbWUoKS5zZXRWaXNpYmxlKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyh0aGlzLCBcIlNhaSB0w6puIMSRxINuZyBuaOG6rXAgaG/hurdjIG3huq10IGto4bqpdS5cIiwgXCJM4buXaVwiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgICAgICAgICAgICAgICB9XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvY29tL3N0b3JlL2FwcC9wZXRzdG9yZS9EQU8vVXNlckRBTy5qYXZhXG5wYWNrYWdlIGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuREFPO1xuXG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5Nb2RlbHMuRW50aXRpZXMuVXNlcjtcbmltcG9ydCBvcmcubWluZHJvdC5qYmNyeXB0LkJDcnlwdDtcblxuaW1wb3J0IGphdmEuc3FsLio7XG5pbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDtcbmltcG9ydCBqYXZhLnV0aWwuQmFzZTY0O1xuXG5wdWJsaWMgY2xhc3MgVXNlckRBTyBpbXBsZW1lbnRzIEJhc2VEQU88VXNlciwgSW50ZWdlcj4ge1xuICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgaW50IGlzRHVwbGljYXRlID0gLTE7XG5cbiAgICBwdWJsaWMgc3RhdGljIFVzZXJEQU8gZ2V0SW5zdGFuY2UoKSB7XG4gICAgICAgIHJldHVybiBuZXcgVXNlckRBTygpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgU3RyaW5nIGVuY29kZShTdHJpbmcgcGFzc3dvcmQpIHtcbi8vICAgICAgICByZXR1cm4gQmFzZTY0LmdldEVuY29kZXIoKS5lbmNvZGVUb1N0cmluZyhwYXNzd29yZC5nZXRCeXRlcygpKTtcbiAgICAgICAgcmV0dXJuIEJDcnlwdC5oYXNocHcocGFzc3dvcmQsIEJDcnlwdC5nZW5zYWx0KCkpO1xuICAgIH1cblxuLy8gICAgcHVibGljIHN0YXRpYyBTdHJpbmcgZGVjb2RlKFN0cmluZyBwYXNzd29yZCkge1xuLy8gICAgICAgIHJldHVybiBuZXcgU3RyaW5nKEJhc2U2NC5nZXREZWNvZGVyKCkuZGVjb2RlKHBhc3N3b3JkKSk7XG4vLyAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGJvb2xlYW4gdmVyaWZ5KFN0cmluZyBwYXNzd29yZCwgU3RyaW5nIGhhc2hlZCkge1xuICAgICAgICByZXR1cm4gQkNyeXB0LmNoZWNrcHcocGFzc3dvcmQsIGhhc2hlZCk7XG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIGludCBpbnNlcnQoVXNlciBlbnRpdHkpIHtcbiAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcbiAgICAgICAgUHJlcGFyZWRTdGF0ZW1lbnQgc3RtdCA9IG51bGw7XG4gICAgICAgIFJlc3VsdFNldCBycyA9IG51bGw7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbm4gPSBEYXRhYmFzZVV0aWwuZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgICAgICAgU3RyaW5nIHNxbCA9IFwiSU5TRVJUIElOVE8gVXNlcnMgKHVzZXJuYW1lLCBwYXNzd29yZCwgcm9sZSwgaW1hZ2VfdXJsLCBpc0FjdGl2ZSkgVkFMVUVTICg/LCA/LCA/LCA/LCA/KVwiO1xuICAgICAgICAgICAgc3RtdCA9IGNvbm4ucHJlcGFyZVN0YXRlbWVudChzcWwsIFN0YXRlbWVudC5SRVRVUk5fR0VORVJBVEVEX0tFWVMpO1xuXG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygxLCBlbnRpdHkuZ2V0VXNlcm5hbWUoKSk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygyLCBlbmNvZGUoZW50aXR5LmdldFBhc3N3b3JkKCkpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDMsIGVudGl0eS5nZXRSb2xlKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoNCwgZW50aXR5LmdldEltYWdlVXJsKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRCb29sZWFuKDUsIGVudGl0eS5pc0FjdGl2ZSgpKTtcblxuICAgICAgICAgICAgaW50IGFmZmVjdGVkUm93cyA9IHN0bXQuZXhlY3V0ZVVwZGF0ZSgpO1xuICAgICAgICAgICAgaWYgKGFmZmVjdGVkUm93cyA9PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRyeSAoUmVzdWx0U2V0IGdlbmVyYXRlZEtleXMgPSBzdG10LmdldEdlbmVyYXRlZEtleXMoKSkge1xuICAgICAgICAgICAgICAgIGlmIChnZW5lcmF0ZWRLZXlzLm5leHQoKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ2VuZXJhdGVkS2V5cy5nZXRJbnQoMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBEYXRhYmFzZVV0aWwuY2xvc2VSZXNvdXJjZXMocnMsIHN0bXQsIGNvbm4pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIGludCB1cGRhdGUoVXNlciBlbnRpdHkpIHtcbiAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcbiAgICAgICAgUHJlcGFyZWRTdGF0ZW1lbnQgc3RtdCA9IG51bGw7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbm4gPSBEYXRhYmFzZVV0aWwuZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgICAgICAgU3RyaW5nIHNxbCA9IFwiVVBEQVRFIFVzZXJzIFNFVCB1c2VybmFtZSA9ID8sIHBhc3N3b3JkID0gPywgcm9sZSA9ID8sIGltYWdlX3VybCA9ID8sIGlzQWN0aXZlID0gPyBXSEVSRSB1c2VyX2lkID0gP1wiO1xuICAgICAgICAgICAgc3RtdCA9IGNvbm4ucHJlcGFyZVN0YXRlbWVudChzcWwpO1xuXG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygxLCBlbnRpdHkuZ2V0VXNlcm5hbWUoKSk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygyLCBlbmNvZGUoZW50aXR5LmdldFBhc3N3b3JkKCkpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDMsIGVudGl0eS5nZXRSb2xlKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoNCwgZW50aXR5LmdldEltYWdlVXJsKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRCb29sZWFuKDUsIGVudGl0eS5pc0FjdGl2ZSgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0SW50KDYsIGVudGl0eS5nZXRVc2VySWQoKSk7XG5cbiAgICAgICAgICAgIHJldHVybiBzdG10LmV4ZWN1dGVVcGRhdGUoKTtcbiAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIERhdGFiYXNlVXRpbC5jbG9zZVJlc291cmNlcyhzdG10LCBjb25uKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBpbnQgdXBkYXRlKFVzZXIgZW50aXR5LCBib29sZWFuIGlzVXNlcm5hbWVDaGFuZ2VkKSB7XG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25uID0gRGF0YWJhc2VVdGlsLmdldENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgIFN0cmluZyBzcWwgPSBcIlVQREFURSBVc2VycyBTRVQgdXNlcm5hbWUgPSA/LCBwYXNzd29yZCA9ID8sIHJvbGUgPSA/LCBpbWFnZV91cmwgPSA/LCBpc0FjdGl2ZSA9ID8gV0hFUkUgdXNlcl9pZCA9ID9cIjtcbiAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsKTtcblxuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMSwgZW50aXR5LmdldFVzZXJuYW1lKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMiwgZW5jb2RlKGVudGl0eS5nZXRQYXNzd29yZCgpKSk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygzLCBlbnRpdHkuZ2V0Um9sZSgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDQsIGVudGl0eS5nZXRJbWFnZVVybCgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0Qm9vbGVhbig1LCBlbnRpdHkuaXNBY3RpdmUoKSk7XG4gICAgICAgICAgICBzdG10LnNldEludCg2LCBlbnRpdHkuZ2V0VXNlcklkKCkpO1xuXG4gICAgICAgICAgICByZXR1cm4gc3RtdC5leGVjdXRlVXBkYXRlKCk7XG4gICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBEYXRhYmFzZVV0aWwuY2xvc2VSZXNvdXJjZXMoc3RtdCwgY29ubik7XG4gICAgICAgIH1cbiAgICB9XG4uLi5cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBVc2VyIGZpbmRCeUlkKEludGVnZXIgaWQpIHtcbiAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcbiAgICAgICAgUHJlcGFyZWRTdGF0ZW1lbnQgc3RtdCA9IG51bGw7XG4gICAgICAgIFJlc3VsdFNldCBycyA9IG51bGw7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbm4gPSBEYXRhYmFzZVV0aWwuZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgICAgICAgU3RyaW5nIHNxbCA9IFwiU0VMRUNUICogRlJPTSBVc2VycyBXSEVSRSB1c2VyX2lkID0gP1wiO1xuICAgICAgICAgICAgc3RtdCA9IGNvbm4ucHJlcGFyZVN0YXRlbWVudChzcWwpO1xuICAgICAgICAgICAgc3RtdC5zZXRJbnQoMSwgaWQpO1xuICAgICAgICAgICAgcnMgPSBzdG10LmV4ZWN1dGVRdWVyeSgpO1xuXG4gICAgICAgICAgICBpZiAocnMubmV4dCgpKSB7XG4gICAgICAgICAgICAgICAgVXNlciB1c2VyID0gbmV3IFVzZXIoKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldFVzZXJJZChycy5nZXRJbnQoXCJ1c2VyX2lkXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldFVzZXJuYW1lKHJzLmdldFN0cmluZyhcInVzZXJuYW1lXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldFBhc3N3b3JkKHJzLmdldFN0cmluZyhcInBhc3N3b3JkXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldFJvbGUocnMuZ2V0U3RyaW5nKFwicm9sZVwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRJbWFnZVVybChycy5nZXRTdHJpbmcoXCJpbWFnZV91cmxcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0QWN0aXZlKHJzLmdldEJvb2xlYW4oXCJpc0FjdGl2ZVwiKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVzZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgRGF0YWJhc2VVdGlsLmNsb3NlUmVzb3VyY2VzKHJzLCBzdG10LCBjb25uKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4uLi5cblxuICAgIHB1YmxpYyBVc2VyIGZpbmRCeVVzZXJuYW1lKFN0cmluZyB1c2VybmFtZSkge1xuICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgICAgICBQcmVwYXJlZFN0YXRlbWVudCBzdG10ID0gbnVsbDtcbiAgICAgICAgUmVzdWx0U2V0IHJzID0gbnVsbDtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29ubiA9IERhdGFiYXNlVXRpbC5nZXRDb25uZWN0aW9uKCk7XG4gICAgICAgICAgICBTdHJpbmcgc3FsID0gXCJTRUxFQ1QgKiBGUk9NIFVzZXJzIFdIRVJFIHVzZXJuYW1lID0gP1wiO1xuICAgICAgICAgICAgc3RtdCA9IGNvbm4ucHJlcGFyZVN0YXRlbWVudChzcWwpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMSwgdXNlcm5hbWUpO1xuICAgICAgICAgICAgcnMgPSBzdG10LmV4ZWN1dGVRdWVyeSgpO1xuXG4gICAgICAgICAgICBpZiAocnMubmV4dCgpKSB7XG4gICAgICAgICAgICAgICAgVXNlciB1c2VyID0gbmV3IFVzZXIoKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldFVzZXJJZChycy5nZXRJbnQoXCJ1c2VyX2lkXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldFVzZXJuYW1lKHJzLmdldFN0cmluZyhcInVzZXJuYW1lXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldFBhc3N3b3JkKHJzLmdldFN0cmluZyhcInBhc3N3b3JkXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldFJvbGUocnMuZ2V0U3RyaW5nKFwicm9sZVwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRJbWFnZVVybChycy5nZXRTdHJpbmcoXCJpbWFnZV91cmxcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0QWN0aXZlKHJzLmdldEJvb2xlYW4oXCJpc0FjdGl2ZVwiKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVzZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgRGF0YWJhc2VVdGlsLmNsb3NlUmVzb3VyY2VzKHJzLCBzdG10LCBjb25uKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBwdWJsaWMgVXNlciBmaW5kQnlFbWFpbChTdHJpbmcgZW1haWwpIHtcbiAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcbiAgICAgICAgUHJlcGFyZWRTdGF0ZW1lbnQgc3RtdCA9IG51bGw7XG4gICAgICAgIFJlc3VsdFNldCBycyA9IG51bGw7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIEtp4buDbSB0cmEgZW1haWwgY8OzIHThu5NuIHThuqFpIHRyb25nIGLhuqNuZyBTdGFmZnMga2jDtG5nXG4gICAgICAgICAgICBjb25uID0gRGF0YWJhc2VVdGlsLmdldENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgIFN0cmluZyBjaGVja1NxbCA9IFwiU0VMRUNUICogRlJPTSBTdGFmZnMgV0hFUkUgZW1haWwgPSA/XCI7XG4gICAgICAgICAgICBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KGNoZWNrU3FsKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDEsIGVtYWlsKTtcbiAgICAgICAgICAgIHJzID0gc3RtdC5leGVjdXRlUXVlcnkoKTtcblxuICAgICAgICAgICAgLy8gTuG6v3UgZW1haWwgdOG7k24gdOG6oWksIGzhuqV5IHRow7RuZyB0aW4gdXNlclxuICAgICAgICAgICAgU3RyaW5nIHNxbCA9IFwiU0VMRUNUIHUuKiBGUk9NIFVzZXJzIHUgXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJKT0lOIFN0YWZmcyBzIE9OIHUudXNlcl9pZCA9IHMudXNlcl9pZCBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICBcIldIRVJFIHMuZW1haWwgPSA/XCI7XG4gICAgICAgICAgICBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHNxbCk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygxLCBlbWFpbCk7XG5cbiAgICAgICAgICAgIHJzID0gc3RtdC5leGVjdXRlUXVlcnkoKTtcblxuICAgICAgICAgICAgaWYgKHJzLm5leHQoKSkge1xuICAgICAgICAgICAgICAgIFVzZXIgdXNlciA9IG5ldyBVc2VyKCk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRVc2VySWQocnMuZ2V0SW50KFwidXNlcl9pZFwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRVc2VybmFtZShycy5nZXRTdHJpbmcoXCJ1c2VybmFtZVwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRQYXNzd29yZChycy5nZXRTdHJpbmcoXCJwYXNzd29yZFwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRSb2xlKHJzLmdldFN0cmluZyhcInJvbGVcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0SW1hZ2VVcmwocnMuZ2V0U3RyaW5nKFwiaW1hZ2VfdXJsXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldEFjdGl2ZShycy5nZXRCb29sZWFuKFwiaXNBY3RpdmVcIikpO1xuICAgICAgICAgICAgICAgIHJldHVybiB1c2VyO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiU1FMIEVycm9yOiBcIiArIGUuZ2V0TWVzc2FnZSgpKTtcbiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBEYXRhYmFzZVV0aWwuY2xvc2VSZXNvdXJjZXMocnMsIHN0bXQsIGNvbm4pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbi4uLlxuUGF0aDogc3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vU2Vzc2lvbi9Vc2VyU2Vzc2lvbi5qYXZhXG4vKlxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9MaWNlbnNlcy9saWNlbnNlLWRlZmF1bHQudHh0IHRvIGNoYW5nZSB0aGlzIGxpY2Vuc2VcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9DbGFzcy5qYXZhIHRvIGVkaXQgdGhpcyB0ZW1wbGF0ZVxuICovXG5wYWNrYWdlIGludGVybmV0Lm1hbmdlbWVudC5zeXN0ZW0uU2Vzc2lvbjtcblxuaW1wb3J0IE1vZGVsLlVzZXI7XG5cbi8qKlxuICpcbiAqIEBhdXRob3IgTmdvYyBUaGFvXG4gKi9cbnB1YmxpYyBjbGFzcyBVc2VyU2Vzc2lvbiB7XG4gICAgcHVibGljIHN0YXRpYyBVc2VyIGN1cnJlbnRVc2VyO1xuXG4gICAgcHVibGljIFVzZXJTZXNzaW9uKCkge1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgVXNlciBnZXRDdXJyZW50VXNlcigpIHtcbiAgICAgICAgcmV0dXJuIGN1cnJlbnRVc2VyO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBzZXRDdXJyZW50VXNlcihVc2VyIGN1cnJlbnRVc2VyKSB7XG4gICAgICAgIFVzZXJTZXNzaW9uLmN1cnJlbnRVc2VyID0gY3VycmVudFVzZXI7XG4gICAgfVxuICAgIFxuICAgIFxufVxuLi4uXG5QYXRoOiBzcmMvREFPL1VzZXJEQU8uamF2YVxuLypcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvTGljZW5zZXMvbGljZW5zZS1kZWZhdWx0LnR4dCB0byBjaGFuZ2UgdGhpcyBsaWNlbnNlXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ2xhc3MuamF2YSB0byBlZGl0IHRoaXMgdGVtcGxhdGVcbiAqL1xucGFja2FnZSBEQU87XG5cbmltcG9ydCBNb2RlbC5Vc2VyO1xuaW1wb3J0IGphdmEudXRpbC5MaXN0O1xuXG4vKipcbiAqXG4gKiBAYXV0aG9yIE5nb2MgVGhhb1xuICovXG5wdWJsaWMgY2xhc3MgVXNlckRBT3tcblxuICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBpbnNlcnQoVXNlciBvYmopIHtcbiAgICAgICAgXG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyB2b2lkIHVwZGF0ZShVc2VyIG9iaikge1xuICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oXCJOb3Qgc3VwcG9ydGVkIHlldC5cIik7IC8vIEdlbmVyYXRlZCBmcm9tIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9Db2RlL0dlbmVyYXRlZE1ldGhvZEJvZHlcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIHZvaWQgZGVsZXRlKGludCBpZCkge1xuICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oXCJOb3Qgc3VwcG9ydGVkIHlldC5cIik7IC8vIEdlbmVyYXRlZCBmcm9tIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9Db2RlL0dlbmVyYXRlZE1ldGhvZEJvZHlcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIFVzZXIgZ2V0QnlJZChpbnQgaWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpOyAvLyBHZW5lcmF0ZWQgZnJvbSBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ29kZS9HZW5lcmF0ZWRNZXRob2RCb2R5XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBMaXN0PFVzZXI+IGdldEFsbCgpIHtcbiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpOyAvLyBHZW5lcmF0ZWQgZnJvbSBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ29kZS9HZW5lcmF0ZWRNZXRob2RCb2R5XG4gICAgfVxuICAgIFxufVxuLi4uXG5QYXRoOiBzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9BZG1pbi9EYXNoYm9hcmQuamF2YVxuLypcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvTGljZW5zZXMvbGljZW5zZS1kZWZhdWx0LnR4dCB0byBjaGFuZ2UgdGhpcyBsaWNlbnNlXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0dVSUZvcm1zL0pGcmFtZS5qYXZhIHRvIGVkaXQgdGhpcyB0ZW1wbGF0ZVxuICovXG5wYWNrYWdlIGludGVybmV0Lm1hbmdlbWVudC5zeXN0ZW0uQWRtaW47XG5cbmltcG9ydCBNb2RlbC5Vc2VyO1xuaW1wb3J0IGludGVybmV0Lm1hbmdlbWVudC5zeXN0ZW0uU2Vzc2lvbi5Vc2VyU2Vzc2lvbjtcbmltcG9ydCBqYXZhLnRpbWUuTG9jYWxUaW1lO1xuaW1wb3J0IGphdmF4LnN3aW5nLkpPcHRpb25QYW5lO1xuXG4vKipcbiAqXG4gKiBAYXV0aG9yIE5nb2MgVGhhb1xuICovXG5wdWJsaWMgY2xhc3MgRGFzaGJvYXJkIGV4dGVuZHMgamF2YXguc3dpbmcuSkZyYW1lIHtcblxuICAgIFVzZXIgYWRtaW4gPSBVc2VyU2Vzc2lvbi5nZXRDdXJyZW50VXNlcigpO1xuICAgIFxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgbmV3IGZvcm0gRGFzaGJvYXJkXG4gICAgICovXG4gICAgcHVibGljIERhc2hib2FyZCgpIHtcbiAgICAgICAgaW5pdENvbXBvbmVudHMoKTtcbiAgICAgICAgc2V0dXBIZWxsbygpO1xuICAgICAgICBzZXR1cFVzZXJuYW1lKCk7XG4gICAgfVxuICAgIFxuICAgIHByaXZhdGUgdm9pZCBzZXR1cEhlbGxvKCkge1xuICAgICAgICBMb2NhbFRpbWUgbm93ID0gTG9jYWxUaW1lLm5vdygpO1xuICAgICAgICBpbnQgaG91ciA9IG5vdy5nZXRIb3VyKCk7XG4gICAgICAgIFxuICAgICAgICBTdHJpbmcgZ3JlZXRpbmc7XG5cbiAgICAgICAgaWYgKGhvdXIgPj0gNSAmJiBob3VyIDwgMTEpIHtcbiAgICAgICAgICAgIGdyZWV0aW5nID0gXCJDaMOgbyBideG7lWkgc8OhbmcsXCI7XG4gICAgICAgIH0gZWxzZSBpZiAoaG91ciA+PSAxMSAmJiBob3VyIDwgMTUpIHtcbiAgICAgICAgICAgIGdyZWV0aW5nID0gXCJDaMOgbyBideG7lWkgdHLGsGEsXCI7XG4gICAgICAgIH0gZWxzZSBpZiAoaG91ciA+PSAxNSAmJiBob3VyIDwgMTcpIHtcbiAgICAgICAgICAgIGdyZWV0aW5nID0gXCJDaMOgbyBideG7lWkgY2hp4buBdSxcIjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGdyZWV0aW5nID0gXCJDaMOgbyBideG7lWkgdOG7kWksXCI7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGxiSGVsbG8uc2V0VGV4dChncmVldGluZyk7XG4gICAgfVxuICAgIFxuICAgIHByaXZhdGUgdm9pZCBzZXR1cFVzZXJuYW1lKCkge1xuICAgICAgICBsYlVzZXJOYW1lLnNldFRleHQoYWRtaW4uZ2V0VXNlcm5hbWUoKSk7XG4gICAgfVxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL2NvbS9zdG9yZS9hcHAvcGV0c3RvcmUvQ29udHJvbGxlcnMvQWRtaW4vQWRtaW5NZW51Q29udHJvbGxlci5qYXZhXG4uLi5cblxuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuQ29udHJvbGxlcnMuQ29udHJvbGxlclV0aWxzO1xuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuTW9kZWxzLkVudGl0aWVzLlN0YWZmO1xuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuTW9kZWxzLkVudGl0aWVzLlVzZXI7XG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5TZXNzaW9ucy5TZXNzaW9uTWFuYWdlcjtcbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLlV0aWxzLkltYWdlVXRpbHM7XG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5WaWV3cy5BZG1pbkZhY3Rvcnk7XG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5WaWV3cy5Nb2RlbFZpZXc7XG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5WaWV3cy5WaWV3RmFjdG9yeTtcbmltcG9ydCBkZS5qZW5zZC5meC5nbHlwaHMuZm9udGF3ZXNvbWUuRm9udEF3ZXNvbWVJY29uVmlldztcbmltcG9ydCBqYXZhZnguZXZlbnQuQWN0aW9uRXZlbnQ7XG5pbXBvcnQgamF2YWZ4LmZ4bWwuRlhNTDtcbmltcG9ydCBqYXZhZnguZnhtbC5Jbml0aWFsaXphYmxlO1xuaW1wb3J0IGphdmFmeC5zY2VuZS5jb250cm9sLio7XG5pbXBvcnQgamF2YWZ4LnNjZW5lLmltYWdlLkltYWdlO1xuaW1wb3J0IGphdmFmeC5zY2VuZS5pbWFnZS5JbWFnZVZpZXc7XG5pbXBvcnQgamF2YWZ4LnNjZW5lLmxheW91dC5BbmNob3JQYW5lO1xuaW1wb3J0IGphdmFmeC5zY2VuZS5wYWludC5JbWFnZVBhdHRlcm47XG4uLi5cblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBMYWJlbCB1c2VybmFtZUxhYmVsO1xuXG4gICAgcHJpdmF0ZSBVc2VyIGN1cnJlbnRVc2VyO1xuXG4vLyAgICBwcml2YXRlIFNlc3Npb25NYW5hZ2VyIHNlc3Npb25NYW5hZ2VyO1xuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIHZvaWQgaW5pdGlhbGl6ZShVUkwgdXJsLCBSZXNvdXJjZUJ1bmRsZSByZXNvdXJjZUJ1bmRsZSkge1xuICAgICAgICBjdXJyZW50VXNlciA9IFNlc3Npb25NYW5hZ2VyLmdldEN1cnJlbnRVc2VyKCk7XG4gICAgICAgIHNldHVwVXNlck5hbWUoKTtcbiAgICAgICAgc2V0dXBVc2VySW1hZ2UoKTtcbiAgICAgICAgc2V0TWVudSgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgdm9pZCBzZXR1cFVzZXJOYW1lKCkge1xuICAgICAgICBpZiAoY3VycmVudFVzZXIgIT0gbnVsbCkge1xuICAgICAgICAgICAgdXNlcm5hbWVMYWJlbC5zZXRUZXh0KGN1cnJlbnRVc2VyLmdldFVzZXJuYW1lKCkpO1xuICAgICAgICAgICAgbmFtZUxhYmVsLnNldFRleHQoY3VycmVudFVzZXIuZ2V0VXNlcm5hbWUoKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB1c2VybmFtZUxhYmVsLnNldFRleHQoXCJDaMawYSDEkcSDbmcgbmjhuq1wXCIpO1xuICAgICAgICAgICAgbmFtZUxhYmVsLnNldFRleHQoXCJDaMawYSBj4bqtcCBuaOG6rXQgdGjDtG5nIHRpblwiKTtcbiAgICAgICAgfVxuICAgIH1cbi4uLlxuXG4gICAgICAgIE1lbnVJdGVtIGxvZ291dE1lbnVJdGVtID0gbmV3IE1lbnVJdGVtKFwixJDEg25nIHh14bqldFwiKTtcbiAgICAgICAgbG9nb3V0TWVudUl0ZW0uc2V0T25BY3Rpb24oZSAtPiBoYW5kbGVMb2dvdXQobnVsbCkpO1xuICAgICAgICBtZW51TG9nb3V0LmdldEl0ZW1zKCkuYWRkKGxvZ291dE1lbnVJdGVtKTtcbiAgICB9XG5cbiAgICBARlhNTFxuICAgIHZvaWQgaGFuZGxlTG9nb3V0KEFjdGlvbkV2ZW50IGV2ZW50KSB7XG4gICAgICAgIFN0YWdlIGN1cnJlbnRTdGFnZSA9IChTdGFnZSkgcm9vdC5nZXRTY2VuZSgpLmdldFdpbmRvdygpO1xuICAgICAgICBpZiAoQ29udHJvbGxlclV0aWxzLnNob3dDb25maXJtYXRpb25BbmRXYWl0KFwixJDEg25nIHh14bqldFwiLCBcIkLhuqFuIGPDsyBjaOG6r2MgY2jhuq9uIG114buRbiDEkcSDbmcgeHXhuqV0IGtow7RuZz9cXG5OaOG6pW4gT0sgxJHhu4MgeMOhYyBuaOG6rW4uXCIpKSB7XG4gICAgICAgICAgICBTZXNzaW9uTWFuYWdlci5jbGVhcigpO1xuICAgICAgICAgICAgVmlld0ZhY3RvcnkuZ2V0SW5zdGFuY2UoKS5zd2l0Y2hDb250ZW50KFwibG9naW5cIiwgY3VycmVudFN0YWdlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIENvbnRyb2xsZXJVdGlscy5zaG93QWxlcnQoQWxlcnQuQWxlcnRUeXBlLklORk9STUFUSU9OLCBcIlRow7RuZyBiw6FvXCIsIFwixJDEg25nIHh14bqldCBraMO0bmcgdGjDoG5oIGPDtG5nXCIpO1xuICAgICAgICB9XG4gICAgfVxufVxuLi4uXG5QYXRoOiBzcmMvTW9kZWwvVXNlci5qYXZhXG4uLi5cblxuaW1wb3J0IGphdmEudGltZS5Mb2NhbERhdGVUaW1lO1xuLyoqXG4gKlxuICogQGF1dGhvciBOZ29jIFRoYW9cbiAqL1xucHVibGljIGNsYXNzIFVzZXIge1xuICAgIHByaXZhdGUgaW50IHVzZXJfaWQ7XG4gICAgcHJpdmF0ZSBTdHJpbmcgdXNlcm5hbWU7XG4gICAgcHJpdmF0ZSBTdHJpbmcgcGFzc3dvcmQ7XG4gICAgcHJpdmF0ZSBTdHJpbmcgcm9sZTtcbiAgICBwcml2YXRlIExvY2FsRGF0ZVRpbWUgY3JlYXRlX2F0O1xuICAgIHByaXZhdGUgYm9vbGVhbiBpc0FjdGl2ZTtcblxuICAgIHB1YmxpYyBVc2VyKCkge1xuICAgIH1cblxuICAgIHB1YmxpYyBVc2VyKGludCB1c2VyX2lkLCBTdHJpbmcgdXNlcm5hbWUsIFN0cmluZyBwYXNzd29yZCwgU3RyaW5nIHJvbGUsIExvY2FsRGF0ZVRpbWUgY3JlYXRlX2F0LCBib29sZWFuIGlzQWN0aXZlKSB7XG4gICAgICAgIHRoaXMudXNlcl9pZCA9IHVzZXJfaWQ7XG4gICAgICAgIHRoaXMudXNlcm5hbWUgPSB1c2VybmFtZTtcbiAgICAgICAgdGhpcy5wYXNzd29yZCA9IHBhc3N3b3JkO1xuICAgICAgICB0aGlzLnJvbGUgPSByb2xlO1xuICAgICAgICB0aGlzLmNyZWF0ZV9hdCA9IGNyZWF0ZV9hdDtcbiAgICAgICAgdGhpcy5pc0FjdGl2ZSA9IGlzQWN0aXZlO1xuICAgIH1cblxuICAgIHB1YmxpYyBpbnQgZ2V0VXNlcl9pZCgpIHtcbiAgICAgICAgcmV0dXJuIHVzZXJfaWQ7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgc2V0VXNlcl9pZChpbnQgdXNlcl9pZCkge1xuICAgICAgICB0aGlzLnVzZXJfaWQgPSB1c2VyX2lkO1xuICAgIH1cblxuICAgIHB1YmxpYyBTdHJpbmcgZ2V0VXNlcm5hbWUoKSB7XG4gICAgICAgIHJldHVybiB1c2VybmFtZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXRVc2VybmFtZShTdHJpbmcgdXNlcm5hbWUpIHtcbiAgICAgICAgdGhpcy51c2VybmFtZSA9IHVzZXJuYW1lO1xuICAgIH1cbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9jb20vc3RvcmUvYXBwL3BldHN0b3JlL0NvbnRyb2xsZXJzL0FkbWluL0Rhc2hib2FyZENvbnRyb2xsZXIuamF2YVxuLi4uXG5cbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLkNvbnRyb2xsZXJzLkNvbnRyb2xsZXJVdGlscztcbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLkRBTy5EYXNoYm9hcmREQU87XG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5Nb2RlbHMuRW50aXRpZXMuUGV0U2FsZXNEYXRhO1xuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuTW9kZWxzLkVudGl0aWVzLlByb2R1Y3RTYWxlc0RhdGE7XG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5TZXNzaW9ucy5TZXNzaW9uTWFuYWdlcjtcbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLlZpZXdzLkFkbWluRmFjdG9yeTtcbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLlZpZXdzLlZpZXdGYWN0b3J5O1xuaW1wb3J0IGphdmFmeC5hbmltYXRpb24uS2V5RnJhbWU7XG5pbXBvcnQgamF2YWZ4LmFuaW1hdGlvbi5UaW1lbGluZTtcbmltcG9ydCBqYXZhZnguYXBwbGljYXRpb24uUGxhdGZvcm07XG5pbXBvcnQgamF2YWZ4LmNvbGxlY3Rpb25zLkZYQ29sbGVjdGlvbnM7XG5pbXBvcnQgamF2YWZ4LmNvbGxlY3Rpb25zLk9ic2VydmFibGVMaXN0O1xuaW1wb3J0IGphdmFmeC5meG1sLkZYTUw7XG5pbXBvcnQgamF2YWZ4LmZ4bWwuSW5pdGlhbGl6YWJsZTtcbmltcG9ydCBqYXZhZnguc2NlbmUuY2hhcnQuQmFyQ2hhcnQ7XG5pbXBvcnQgamF2YWZ4LnNjZW5lLmNoYXJ0LlBpZUNoYXJ0O1xuaW1wb3J0IGphdmFmeC5zY2VuZS5jaGFydC5YWUNoYXJ0O1xuLi4uXG5cbiAgICBwcml2YXRlIHZvaWQgbmF2aWdhdGVUbyhTdHJpbmcgdmlld05hbWUpIHtcbiAgICAgICAgU3RhZ2UgY3VycmVudFN0YWdlID0gKFN0YWdlKSBsb2dvdXRCdXR0b24uZ2V0U2NlbmUoKS5nZXRXaW5kb3coKTtcbiAgICAgICAgQWRtaW5GYWN0b3J5LmdldEluc3RhbmNlKCkuc3dpdGNoQ29udGVudCh2aWV3TmFtZSwgY3VycmVudFN0YWdlKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHZvaWQgaGFuZGxlTG9nb3V0KCkge1xuICAgICAgICAvLyBTdG9wIGF1dG8tcmVmcmVzaCBpZiBhY3RpdmVcbiAgICAgICAgc3RvcEF1dG9SZWZyZXNoKCk7XG5cbiAgICAgICAgU3RhZ2UgY3VycmVudFN0YWdlID0gKFN0YWdlKSBsb2dvdXRCdXR0b24uZ2V0U2NlbmUoKS5nZXRXaW5kb3coKTtcbiAgICAgICAgaWYgKENvbnRyb2xsZXJVdGlscy5zaG93Q29uZmlybWF0aW9uQW5kV2FpdChcIsSQxINuZyB4deG6pXRcIiwgXCJC4bqhbiBjw7MgY2jhuq9jIGNo4bqvbiBtdeG7kW4gxJHEg25nIHh14bqldCBraMO0bmc/XFxuTmjhuqVuIE9LIMSR4buDIHjDoWMgbmjhuq1uLlwiKSkge1xuICAgICAgICAgICAgU2Vzc2lvbk1hbmFnZXIuY2xlYXIoKTtcbiAgICAgICAgICAgIFZpZXdGYWN0b3J5LmdldEluc3RhbmNlKCkuc3dpdGNoQ29udGVudChcImxvZ2luXCIsIGN1cnJlbnRTdGFnZSk7XG4gICAgICAgIH1cbiAgICB9XG5cblxufVxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL2NvbS9zdG9yZS9hcHAvcGV0c3RvcmUvUGV0U3RvcmVBcHBsaWNhdGlvbi5qYXZhXG5wYWNrYWdlIGNvbS5zdG9yZS4uLi4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1XzAxV3ljd2dyRXJveDlqQUdxQ2ZDNzUyZyJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkU6L0hvY1RhcC8wMl9KQVZBLzAzX1Byb2plY3QvSW50ZXJuZXQgTWFuZ2VtZW50IFN5c3RlbSIsImZvbGRlclJvb3QiOiJFOi9Ib2NUYXAvMDJfSkFWQS8wM19Qcm9qZWN0L0ludGVybmV0IE1hbmdlbWVudCBTeXN0ZW0ifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJ0aW1lc3RhbXAiOiIyMDI1LTA1LTEzVDEzOjAxOjI3LjkyNVoiLCJyZXNwb25zZV90ZXh0IjoiQmFzZWQgb24gdGhlIGluZm9ybWF0aW9uIGdhdGhlcmVkLCBJJ2xsIG5vdyBpbXBsZW1lbnQgdGhlIGZ1bmN0aW9uYWxpdHkgdG8gZ2V0IGFsbCB1c2VyIGluZm9ybWF0aW9uIHdoZW4gbG9naW4gaXMgc3VjY2Vzc2Z1bC4gTGV0IG1lIGZpcnN0IGNyZWF0ZSBhIHBsYW46XG5cbiMjIFBsYW4gZm9yIEltcGxlbWVudGluZyBVc2VyIEluZm9ybWF0aW9uIFJldHJpZXZhbCBvbiBTdWNjZXNzZnVsIExvZ2luXG5cbjEuIEV4YW1pbmUgdGhlIGN1cnJlbnQgbG9naW4gcHJvY2VzcyBpbiB0aGUgYExvZ2luLmphdmFgIGZpbGVcbjIuIElkZW50aWZ5IHdoZXJlIHRvIGFkZCB0aGUgY29kZSB0byByZXRyaWV2ZSBhbmQgc3RvcmUgdXNlciBpbmZvcm1hdGlvbiBhZnRlciBzdWNjZXNzZnVsIGxvZ2luXG4zLiBJbXBsZW1lbnQgdGhlIG5lY2Vzc2FyeSBjaGFuZ2VzIHRvIHJldHJpZXZlIHVzZXIgaW5mb3JtYXRpb24gYW5kIHN0b3JlIGl0IGluIHRoZSBVc2VyU2Vzc2lvblxuNC4gVXBkYXRlIHRoZSBsb2dpbiBtZXRob2QgdG8gZGlzcGxheSB0aGUgRGFzaGJvYXJkIGFmdGVyIHN1Y2Nlc3NmdWwgbG9naW5cblxuTGV0J3Mgc3RhcnQgYnkgaW1wbGVtZW50aW5nIHRoZXNlIGNoYW5nZXM6XG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiY2UzZGIwZDktMzVkZC00Y2YxLWFmNjEtODFlM2FkMDc2ZWQ5IiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV8wMUZCTEF2NFN2ZUUzaHFTa0xvNEJqQVAiLCJ0b29sX25hbWUiOiJjb2RlYmFzZS1yZXRyaWV2YWwiLCJpbnB1dF9qc29uIjoie1wiaW5mb3JtYXRpb25fcmVxdWVzdFwiOiBcIkZpbmQgdGhlIGltcGxlbWVudGF0aW9uIG9mIHRoZSBsb2dpbiBtZXRob2QgaW4gdGhlIFVzZXJEQU8gY2xhc3MgaW4gdGhlIERBTyBwYWNrYWdlLiBJIG5lZWQgdG8gc2VlIGhvdyBpdCBhdXRoZW50aWNhdGVzIHVzZXJzIGFuZCB3aGF0IGl0IHJldHVybnMuXCJ9IiwibWNwX3NlcnZlcl9uYW1lIjoiIiwibWNwX3Rvb2xfbmFtZSI6IiJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiTm93LCBsZXQgbWUgY2hlY2sgdGhlIGltcGxlbWVudGF0aW9uIG9mIHRoZSBsb2dpbiBtZXRob2QgaW4gdGhlIFVzZXJEQU8gY2xhc3M6XG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJUaGUgZm9sbG93aW5nIGNvZGUgc2VjdGlvbnMgd2VyZSByZXRyaWV2ZWQ6XG5QYXRoOiBzcmMvbWFpbi9qYXZhL2NvbS9zdG9yZS9hcHAvcGV0c3RvcmUvREFPL1VzZXJEQU8uamF2YVxucGFja2FnZSBjb20uc3RvcmUuYXBwLnBldHN0b3JlLkRBTztcblxuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuTW9kZWxzLkVudGl0aWVzLlVzZXI7XG5pbXBvcnQgb3JnLm1pbmRyb3QuamJjcnlwdC5CQ3J5cHQ7XG5cbmltcG9ydCBqYXZhLnNxbC4qO1xuaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7XG5pbXBvcnQgamF2YS51dGlsLkJhc2U2NDtcblxucHVibGljIGNsYXNzIFVzZXJEQU8gaW1wbGVtZW50cyBCYXNlREFPPFVzZXIsIEludGVnZXI+IHtcbiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIGludCBpc0R1cGxpY2F0ZSA9IC0xO1xuXG4gICAgcHVibGljIHN0YXRpYyBVc2VyREFPIGdldEluc3RhbmNlKCkge1xuICAgICAgICByZXR1cm4gbmV3IFVzZXJEQU8oKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIFN0cmluZyBlbmNvZGUoU3RyaW5nIHBhc3N3b3JkKSB7XG4vLyAgICAgICAgcmV0dXJuIEJhc2U2NC5nZXRFbmNvZGVyKCkuZW5jb2RlVG9TdHJpbmcocGFzc3dvcmQuZ2V0Qnl0ZXMoKSk7XG4gICAgICAgIHJldHVybiBCQ3J5cHQuaGFzaHB3KHBhc3N3b3JkLCBCQ3J5cHQuZ2Vuc2FsdCgpKTtcbiAgICB9XG5cbi8vICAgIHB1YmxpYyBzdGF0aWMgU3RyaW5nIGRlY29kZShTdHJpbmcgcGFzc3dvcmQpIHtcbi8vICAgICAgICByZXR1cm4gbmV3IFN0cmluZyhCYXNlNjQuZ2V0RGVjb2RlcigpLmRlY29kZShwYXNzd29yZCkpO1xuLy8gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBib29sZWFuIHZlcmlmeShTdHJpbmcgcGFzc3dvcmQsIFN0cmluZyBoYXNoZWQpIHtcbiAgICAgICAgcmV0dXJuIEJDcnlwdC5jaGVja3B3KHBhc3N3b3JkLCBoYXNoZWQpO1xuICAgIH1cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBpbnQgaW5zZXJ0KFVzZXIgZW50aXR5KSB7XG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuICAgICAgICBSZXN1bHRTZXQgcnMgPSBudWxsO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25uID0gRGF0YWJhc2VVdGlsLmdldENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgIFN0cmluZyBzcWwgPSBcIklOU0VSVCBJTlRPIFVzZXJzICh1c2VybmFtZSwgcGFzc3dvcmQsIHJvbGUsIGltYWdlX3VybCwgaXNBY3RpdmUpIFZBTFVFUyAoPywgPywgPywgPywgPylcIjtcbiAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsLCBTdGF0ZW1lbnQuUkVUVVJOX0dFTkVSQVRFRF9LRVlTKTtcblxuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMSwgZW50aXR5LmdldFVzZXJuYW1lKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMiwgZW5jb2RlKGVudGl0eS5nZXRQYXNzd29yZCgpKSk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygzLCBlbnRpdHkuZ2V0Um9sZSgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDQsIGVudGl0eS5nZXRJbWFnZVVybCgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0Qm9vbGVhbig1LCBlbnRpdHkuaXNBY3RpdmUoKSk7XG5cbiAgICAgICAgICAgIGludCBhZmZlY3RlZFJvd3MgPSBzdG10LmV4ZWN1dGVVcGRhdGUoKTtcbiAgICAgICAgICAgIGlmIChhZmZlY3RlZFJvd3MgPT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0cnkgKFJlc3VsdFNldCBnZW5lcmF0ZWRLZXlzID0gc3RtdC5nZXRHZW5lcmF0ZWRLZXlzKCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoZ2VuZXJhdGVkS2V5cy5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdlbmVyYXRlZEtleXMuZ2V0SW50KDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgRGF0YWJhc2VVdGlsLmNsb3NlUmVzb3VyY2VzKHJzLCBzdG10LCBjb25uKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBpbnQgdXBkYXRlKFVzZXIgZW50aXR5KSB7XG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25uID0gRGF0YWJhc2VVdGlsLmdldENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgIFN0cmluZyBzcWwgPSBcIlVQREFURSBVc2VycyBTRVQgdXNlcm5hbWUgPSA/LCBwYXNzd29yZCA9ID8sIHJvbGUgPSA/LCBpbWFnZV91cmwgPSA/LCBpc0FjdGl2ZSA9ID8gV0hFUkUgdXNlcl9pZCA9ID9cIjtcbiAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsKTtcblxuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMSwgZW50aXR5LmdldFVzZXJuYW1lKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMiwgZW5jb2RlKGVudGl0eS5nZXRQYXNzd29yZCgpKSk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygzLCBlbnRpdHkuZ2V0Um9sZSgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDQsIGVudGl0eS5nZXRJbWFnZVVybCgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0Qm9vbGVhbig1LCBlbnRpdHkuaXNBY3RpdmUoKSk7XG4gICAgICAgICAgICBzdG10LnNldEludCg2LCBlbnRpdHkuZ2V0VXNlcklkKCkpO1xuXG4gICAgICAgICAgICByZXR1cm4gc3RtdC5leGVjdXRlVXBkYXRlKCk7XG4gICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBEYXRhYmFzZVV0aWwuY2xvc2VSZXNvdXJjZXMoc3RtdCwgY29ubik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgaW50IHVwZGF0ZShVc2VyIGVudGl0eSwgYm9vbGVhbiBpc1VzZXJuYW1lQ2hhbmdlZCkge1xuICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgICAgICBQcmVwYXJlZFN0YXRlbWVudCBzdG10ID0gbnVsbDtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29ubiA9IERhdGFiYXNlVXRpbC5nZXRDb25uZWN0aW9uKCk7XG4gICAgICAgICAgICBTdHJpbmcgc3FsID0gXCJVUERBVEUgVXNlcnMgU0VUIHVzZXJuYW1lID0gPywgcGFzc3dvcmQgPSA/LCByb2xlID0gPywgaW1hZ2VfdXJsID0gPywgaXNBY3RpdmUgPSA/IFdIRVJFIHVzZXJfaWQgPSA/XCI7XG4gICAgICAgICAgICBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHNxbCk7XG5cbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDEsIGVudGl0eS5nZXRVc2VybmFtZSgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDIsIGVuY29kZShlbnRpdHkuZ2V0UGFzc3dvcmQoKSkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMywgZW50aXR5LmdldFJvbGUoKSk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZyg0LCBlbnRpdHkuZ2V0SW1hZ2VVcmwoKSk7XG4gICAgICAgICAgICBzdG10LnNldEJvb2xlYW4oNSwgZW50aXR5LmlzQWN0aXZlKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRJbnQoNiwgZW50aXR5LmdldFVzZXJJZCgpKTtcblxuICAgICAgICAgICAgcmV0dXJuIHN0bXQuZXhlY3V0ZVVwZGF0ZSgpO1xuICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgRGF0YWJhc2VVdGlsLmNsb3NlUmVzb3VyY2VzKHN0bXQsIGNvbm4pO1xuICAgICAgICB9XG4gICAgfVxuLi4uXG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgQXJyYXlMaXN0PFVzZXI+IGZpbmRBbGwoKSB7XG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuICAgICAgICBSZXN1bHRTZXQgcnMgPSBudWxsO1xuICAgICAgICBBcnJheUxpc3Q8VXNlcj4gdXNlcnMgPSBuZXcgQXJyYXlMaXN0PD4oKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29ubiA9IERhdGFiYXNlVXRpbC5nZXRDb25uZWN0aW9uKCk7XG4gICAgICAgICAgICBTdHJpbmcgc3FsID0gXCJTRUxFQ1QgKiBGUk9NIFVzZXJzXCI7XG4gICAgICAgICAgICBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHNxbCk7XG4gICAgICAgICAgICBycyA9IHN0bXQuZXhlY3V0ZVF1ZXJ5KCk7XG5cbiAgICAgICAgICAgIHdoaWxlIChycy5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICBVc2VyIHVzZXIgPSBuZXcgVXNlcigpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0VXNlcklkKHJzLmdldEludChcInVzZXJfaWRcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0VXNlcm5hbWUocnMuZ2V0U3RyaW5nKFwidXNlcm5hbWVcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0UGFzc3dvcmQocnMuZ2V0U3RyaW5nKFwicGFzc3dvcmRcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0Um9sZShycy5nZXRTdHJpbmcoXCJyb2xlXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldEltYWdlVXJsKHJzLmdldFN0cmluZyhcImltYWdlX3VybFwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRBY3RpdmUocnMuZ2V0Qm9vbGVhbihcImlzQWN0aXZlXCIpKTtcbiAgICAgICAgICAgICAgICB1c2Vycy5hZGQodXNlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgRGF0YWJhc2VVdGlsLmNsb3NlUmVzb3VyY2VzKHJzLCBzdG10LCBjb25uKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdXNlcnM7XG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIFVzZXIgZmluZEJ5SWQoSW50ZWdlciBpZCkge1xuICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgICAgICBQcmVwYXJlZFN0YXRlbWVudCBzdG10ID0gbnVsbDtcbiAgICAgICAgUmVzdWx0U2V0IHJzID0gbnVsbDtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29ubiA9IERhdGFiYXNlVXRpbC5nZXRDb25uZWN0aW9uKCk7XG4gICAgICAgICAgICBTdHJpbmcgc3FsID0gXCJTRUxFQ1QgKiBGUk9NIFVzZXJzIFdIRVJFIHVzZXJfaWQgPSA/XCI7XG4gICAgICAgICAgICBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHNxbCk7XG4gICAgICAgICAgICBzdG10LnNldEludCgxLCBpZCk7XG4gICAgICAgICAgICBycyA9IHN0bXQuZXhlY3V0ZVF1ZXJ5KCk7XG5cbiAgICAgICAgICAgIGlmIChycy5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICBVc2VyIHVzZXIgPSBuZXcgVXNlcigpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0VXNlcklkKHJzLmdldEludChcInVzZXJfaWRcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0VXNlcm5hbWUocnMuZ2V0U3RyaW5nKFwidXNlcm5hbWVcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0UGFzc3dvcmQocnMuZ2V0U3RyaW5nKFwicGFzc3dvcmRcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0Um9sZShycy5nZXRTdHJpbmcoXCJyb2xlXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldEltYWdlVXJsKHJzLmdldFN0cmluZyhcImltYWdlX3VybFwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRBY3RpdmUocnMuZ2V0Qm9vbGVhbihcImlzQWN0aXZlXCIpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdXNlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBEYXRhYmFzZVV0aWwuY2xvc2VSZXNvdXJjZXMocnMsIHN0bXQsIGNvbm4pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbi4uLlxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25uID0gRGF0YWJhc2VVdGlsLmdldENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgIFN0cmluZyBzcWwgPSBcIlNFTEVDVCAqIEZST00gVXNlcnMgV0hFUkUgXCIgKyBjb25kaXRpb247XG4gICAgICAgICAgICBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHNxbCk7XG4gICAgICAgICAgICBycyA9IHN0bXQuZXhlY3V0ZVF1ZXJ5KCk7XG5cbiAgICAgICAgICAgIHdoaWxlIChycy5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICBVc2VyIHVzZXIgPSBuZXcgVXNlcigpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0VXNlcklkKHJzLmdldEludChcInVzZXJfaWRcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0VXNlcm5hbWUocnMuZ2V0U3RyaW5nKFwidXNlcm5hbWVcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0UGFzc3dvcmQocnMuZ2V0U3RyaW5nKFwicGFzc3dvcmRcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0Um9sZShycy5nZXRTdHJpbmcoXCJyb2xlXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldEltYWdlVXJsKHJzLmdldFN0cmluZyhcImltYWdlX3VybFwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRBY3RpdmUocnMuZ2V0Qm9vbGVhbihcImlzQWN0aXZlXCIpKTtcbiAgICAgICAgICAgICAgICB1c2Vycy5hZGQodXNlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgRGF0YWJhc2VVdGlsLmNsb3NlUmVzb3VyY2VzKHJzLCBzdG10LCBjb25uKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdXNlcnM7XG4gICAgfVxuXG4gICAgcHVibGljIFVzZXIgZmluZEJ5VXNlcm5hbWUoU3RyaW5nIHVzZXJuYW1lKSB7XG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuICAgICAgICBSZXN1bHRTZXQgcnMgPSBudWxsO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25uID0gRGF0YWJhc2VVdGlsLmdldENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgIFN0cmluZyBzcWwgPSBcIlNFTEVDVCAqIEZST00gVXNlcnMgV0hFUkUgdXNlcm5hbWUgPSA/XCI7XG4gICAgICAgICAgICBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHNxbCk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygxLCB1c2VybmFtZSk7XG4gICAgICAgICAgICBycyA9IHN0bXQuZXhlY3V0ZVF1ZXJ5KCk7XG5cbiAgICAgICAgICAgIGlmIChycy5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICBVc2VyIHVzZXIgPSBuZXcgVXNlcigpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0VXNlcklkKHJzLmdldEludChcInVzZXJfaWRcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0VXNlcm5hbWUocnMuZ2V0U3RyaW5nKFwidXNlcm5hbWVcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0UGFzc3dvcmQocnMuZ2V0U3RyaW5nKFwicGFzc3dvcmRcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0Um9sZShycy5nZXRTdHJpbmcoXCJyb2xlXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldEltYWdlVXJsKHJzLmdldFN0cmluZyhcImltYWdlX3VybFwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRBY3RpdmUocnMuZ2V0Qm9vbGVhbihcImlzQWN0aXZlXCIpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdXNlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBEYXRhYmFzZVV0aWwuY2xvc2VSZXNvdXJjZXMocnMsIHN0bXQsIGNvbm4pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHB1YmxpYyBVc2VyIGZpbmRCeUVtYWlsKFN0cmluZyBlbWFpbCkge1xuICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgICAgICBQcmVwYXJlZFN0YXRlbWVudCBzdG10ID0gbnVsbDtcbiAgICAgICAgUmVzdWx0U2V0IHJzID0gbnVsbDtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gS2nhu4NtIHRyYSBlbWFpbCBjw7MgdOG7k24gdOG6oWkgdHJvbmcgYuG6o25nIFN0YWZmcyBraMO0bmdcbiAgICAgICAgICAgIGNvbm4gPSBEYXRhYmFzZVV0aWwuZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgICAgICAgU3RyaW5nIGNoZWNrU3FsID0gXCJTRUxFQ1QgKiBGUk9NIFN0YWZmcyBXSEVSRSBlbWFpbCA9ID9cIjtcbiAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoY2hlY2tTcWwpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMSwgZW1haWwpO1xuICAgICAgICAgICAgcnMgPSBzdG10LmV4ZWN1dGVRdWVyeSgpO1xuXG4gICAgICAgICAgICAvLyBO4bq/dSBlbWFpbCB04buTbiB04bqhaSwgbOG6pXkgdGjDtG5nIHRpbiB1c2VyXG4gICAgICAgICAgICBTdHJpbmcgc3FsID0gXCJTRUxFQ1QgdS4qIEZST00gVXNlcnMgdSBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICBcIkpPSU4gU3RhZmZzIHMgT04gdS51c2VyX2lkID0gcy51c2VyX2lkIFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiV0hFUkUgcy5lbWFpbCA9ID9cIjtcbiAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDEsIGVtYWlsKTtcblxuICAgICAgICAgICAgcnMgPSBzdG10LmV4ZWN1dGVRdWVyeSgpO1xuXG4gICAgICAgICAgICBpZiAocnMubmV4dCgpKSB7XG4gICAgICAgICAgICAgICAgVXNlciB1c2VyID0gbmV3IFVzZXIoKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldFVzZXJJZChycy5nZXRJbnQoXCJ1c2VyX2lkXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldFVzZXJuYW1lKHJzLmdldFN0cmluZyhcInVzZXJuYW1lXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldFBhc3N3b3JkKHJzLmdldFN0cmluZyhcInBhc3N3b3JkXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldFJvbGUocnMuZ2V0U3RyaW5nKFwicm9sZVwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRJbWFnZVVybChycy5nZXRTdHJpbmcoXCJpbWFnZV91cmxcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0QWN0aXZlKHJzLmdldEJvb2xlYW4oXCJpc0FjdGl2ZVwiKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVzZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJTUUwgRXJyb3I6IFwiICsgZS5nZXRNZXNzYWdlKCkpO1xuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIERhdGFiYXNlVXRpbC5jbG9zZVJlc291cmNlcyhycywgc3RtdCwgY29ubik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcHVibGljIGJvb2xlYW4gY2hlY2tEdXBsaWNhdGUoU3RyaW5nIHVzZXJuYW1lLCBpbnQgZXhjbHVkZVVzZXJJZCkge1xuICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgICAgICBQcmVwYXJlZFN0YXRlbWVudCBzdG10ID0gbnVsbDtcbiAgICAgICAgUmVzdWx0U2V0IHJzID0gbnVsbDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbm4gPSBEYXRhYmFzZVV0aWwuZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgICAgICAgU3RyaW5nIHNxbCA9IFwiU0VMRUNUIENPVU5UKCopIEZST00gVXNlcnMgV0hFUkUgTE9XRVIodXNlcm5hbWUpID0gTE9XRVIoPylcIjtcbiAgICAgICAgICAgIGlmIChleGNsdWRlVXNlcklkID49IDApIHtcbiAgICAgICAgICAgICAgICBzcWwgKz0gXCIgQU5EIHVzZXJfaWQgPD4gP1wiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3RtdCA9IGNvbm4ucHJlcGFyZVN0YXRlbWVudChzcWwpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMSwgdXNlcm5hbWUpO1xuICAgICAgICAgICAgaWYgKGV4Y2x1ZGVVc2VySWQgPj0gMCkge1xuICAgICAgICAgICAgICAgIHN0bXQuc2V0SW50KDIsIGV4Y2x1ZGVVc2VySWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcnMgPSBzdG10LmV4ZWN1dGVRdWVyeSgpO1xuICAgICAgICAgICAgaWYgKHJzLm5leHQoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBycy5nZXRJbnQoMSkgPiAwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIERhdGFiYXNlVXRpbC5jbG9zZVJlc291cmNlcyhycywgc3RtdCwgY29ubik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHB1YmxpYyBib29sZWFuIGNoZWNrVXNlcklEKFVzZXIgZW50aXR5KSB7XG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuICAgICAgICBSZXN1bHRTZXQgcnMgPSBudWxsO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25uID0gRGF0YWJhc2VVdGlsLmdldENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgIFN0cmluZyBzcWwgPSBcIlNFTEVDVCBDT1VOVCgqKSBGUk9NIFVzZXJzIFdIRVJFIHVzZXJfaWQgPSA/XCI7XG4gICAgICAgICAgICBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHNxbCk7XG4gICAgICAgICAgICBzdG10LnNldEludCgxLCBlbnRpdHkuZ2V0VXNlcklkKCkpO1xuICAgICAgICAgICAgcnMgPSBzdG10LmV4ZWN1dGVRdWVyeSgpO1xuXG4gICAgICAgICAgICBpZiAocnMubmV4dCgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJzLmdldEludCgxKSA+IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgRGF0YWJhc2VVdGlsLmNsb3NlUmVzb3VyY2VzKHJzLCBzdG10LCBjb25uKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL2NvbS9zdG9yZS9hcHAvcGV0c3RvcmUvQ29udHJvbGxlcnMvTG9naW5Db250cm9sbGVyLmphdmFcbi4uLlxuXG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5EQU8uVXNlckRBTztcbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLkRBTy5TdGFmZkRBTztcbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLk1vZGVscy5FbnRpdGllcy5Vc2VyO1xuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuTW9kZWxzLkVudGl0aWVzLlN0YWZmO1xuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuU2Vzc2lvbnMuU2Vzc2lvbk1hbmFnZXI7XG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5WaWV3cy5BZG1pbkZhY3Rvcnk7XG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5WaWV3cy5WaWV3RmFjdG9yeTtcbmltcG9ydCBkZS5qZW5zZC5meC5nbHlwaHMuZm9udGF3ZXNvbWUuRm9udEF3ZXNvbWVJY29uO1xuaW1wb3J0IGRlLmplbnNkLmZ4LmdseXBocy5mb250YXdlc29tZS5Gb250QXdlc29tZUljb25WaWV3O1xuaW1wb3J0IGphdmFmeC5meG1sLkZYTUw7XG5pbXBvcnQgamF2YWZ4LmZ4bWwuSW5pdGlhbGl6YWJsZTtcbmltcG9ydCBqYXZhZnguc2NlbmUuY29udHJvbC4qO1xuaW1wb3J0IGphdmFmeC5zY2VuZS5pbnB1dC5Nb3VzZUV2ZW50O1xuaW1wb3J0IGphdmFmeC5zdGFnZS5TdGFnZTtcbmltcG9ydCBqYXZhZnguc2NlbmUuaW1hZ2UuSW1hZ2U7XG5pbXBvcnQgamF2YWZ4LnNjZW5lLmltYWdlLkltYWdlVmlldztcbmltcG9ydCBqYXZhZnguc2NlbmUucGFpbnQuSW1hZ2VQYXR0ZXJuO1xuaW1wb3J0IGphdmEudXRpbC5PYmplY3RzO1xuLi4uXG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFTDrG0gdXNlciB0aGVvIHVzZXJuYW1lXG4gICAgICAgICAgICBVc2VyIHVzZXIgPSB1c2VyREFPLmZpbmRCeVVzZXJuYW1lKHVzZXJuYW1lKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYodXNlciA9PSBudWxsIHx8IHVzZXIuZ2V0VXNlcm5hbWUoKSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgQ29udHJvbGxlclV0aWxzLnNob3dBbGVydChBbGVydC5BbGVydFR5cGUuRVJST1IsIFwiTOG7l2lcIiwgXCJUw6puIMSRxINuZyBuaOG6rXAga2jDtG5nIMSRw7puZ1wiKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEtp4buDbSB0cmEgdMOqbiDEkcSDbmcgbmjhuq1wXG4gICAgICAgICAgICBpZiAoIXVzZXIuZ2V0VXNlcm5hbWUoKS5lcXVhbHModXNlcm5hbWUpKSB7XG4gICAgICAgICAgICAgICAgQ29udHJvbGxlclV0aWxzLnNob3dBbGVydChBbGVydC5BbGVydFR5cGUuRVJST1IsIFwiTOG7l2lcIiwgXCJUw6puIMSRxINuZyBuaOG6rXAga2jDtG5nIMSRw7puZ1wiKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEtp4buDbSB0cmEgbeG6rXQga2jhuql1XG4gICAgICAgICAgICBpZighQkNyeXB0LmNoZWNrcHcocGFzc3dvcmQsIHVzZXIuZ2V0UGFzc3dvcmQoKSkpIHtcbiAgICAgICAgICAgICAgICBDb250cm9sbGVyVXRpbHMuc2hvd0FsZXJ0KEFsZXJ0LkFsZXJ0VHlwZS5FUlJPUiwgXCJM4buXaVwiLCBcIk3huq10IGto4bqpdSBraMO0bmcgxJHDum5nXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc2Vzc2lvbk1hbmFnZXIuc2V0Q3VycmVudFVzZXIodXNlcik7XG5cbiAgICAgICAgICAgIFN0YWdlIGN1cnJlbnRTdGFnZSA9IChTdGFnZSkgdXNlcm5hbWVGaWVsZC5nZXRTY2VuZSgpLmdldFdpbmRvdygpO1xuXG4gICAgICAgICAgICBpZih1c2VyLmdldFJvbGUoKS5lcXVhbHMoVXNlci5ST0xFX0FETUlOKSkge1xuICAgICAgICAgICAgICAgIGlkQWRtaW5DdXJyZW50ID0gdXNlci5nZXRVc2VySWQoKTtcbiAgICAgICAgICAgICAgICBBZG1pbkZhY3RvcnkuZ2V0SW5zdGFuY2UoKS5zd2l0Y2hDb250ZW50KFwiZGFzaGJvYXJkXCIsIGN1cnJlbnRTdGFnZSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYodXNlci5nZXRSb2xlKCkuZXF1YWxzKFVzZXIuUk9MRV9VU0VSKSkge1xuICAgICAgICAgICAgICAgIGlkU3RhZmZDdXJyZW50ID0gdXNlci5nZXRVc2VySWQoKTtcbiAgICAgICAgICAgICAgICBTdGFmZiBzdGFmZiA9IHN0YWZmREFPLmZpbmRCeVVzZXJJZCh1c2VyLmdldFVzZXJJZCgpKTtcbiAgICAgICAgICAgICAgICBpZiAoc3RhZmYgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBzZXNzaW9uTWFuYWdlci5zZXRDdXJyZW50U3RhZmYoc3RhZmYpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBWaWV3RmFjdG9yeS5nZXRJbnN0YW5jZSgpLnN3aXRjaENvbnRlbnQoXCJkYXNoYm9hcmRcIiwgY3VycmVudFN0YWdlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgQ29udHJvbGxlclV0aWxzLnNob3dBbGVydChBbGVydC5BbGVydFR5cGUuRVJST1IsIFwiTOG7l2lcIiwgXCJWYWkgdHLDsiBuZ8aw4budaSBkw7luZyBraMO0bmcgaOG7o3AgbOG7h1wiKTtcbiAgICAgICAgICAgICAgICBzZXNzaW9uTWFuYWdlci5jbGVhcigpO1xuICAgICAgICAgICAgfVxuLi4uXG5QYXRoOiBzcmMvREFPL1VzZXJEQU8uamF2YVxuLypcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvTGljZW5zZXMvbGljZW5zZS1kZWZhdWx0LnR4dCB0byBjaGFuZ2UgdGhpcyBsaWNlbnNlXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ2xhc3MuamF2YSB0byBlZGl0IHRoaXMgdGVtcGxhdGVcbiAqL1xucGFja2FnZSBEQU87XG5cbmltcG9ydCBNb2RlbC5Vc2VyO1xuaW1wb3J0IGphdmEudXRpbC5MaXN0O1xuXG4vKipcbiAqXG4gKiBAYXV0aG9yIE5nb2MgVGhhb1xuICovXG5wdWJsaWMgY2xhc3MgVXNlckRBT3tcblxuICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBpbnNlcnQoVXNlciBvYmopIHtcbiAgICAgICAgXG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyB2b2lkIHVwZGF0ZShVc2VyIG9iaikge1xuICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oXCJOb3Qgc3VwcG9ydGVkIHlldC5cIik7IC8vIEdlbmVyYXRlZCBmcm9tIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9Db2RlL0dlbmVyYXRlZE1ldGhvZEJvZHlcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIHZvaWQgZGVsZXRlKGludCBpZCkge1xuICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oXCJOb3Qgc3VwcG9ydGVkIHlldC5cIik7IC8vIEdlbmVyYXRlZCBmcm9tIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9Db2RlL0dlbmVyYXRlZE1ldGhvZEJvZHlcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIFVzZXIgZ2V0QnlJZChpbnQgaWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpOyAvLyBHZW5lcmF0ZWQgZnJvbSBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ29kZS9HZW5lcmF0ZWRNZXRob2RCb2R5XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBMaXN0PFVzZXI+IGdldEFsbCgpIHtcbiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpOyAvLyBHZW5lcmF0ZWQgZnJvbSBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ29kZS9HZW5lcmF0ZWRNZXRob2RCb2R5XG4gICAgfVxuICAgIFxufVxuLi4uXG5QYXRoOiBzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9Mb2dpbi5qYXZhXG4uLi5cblxuICAgIHByaXZhdGUgdm9pZCBidG5Mb2dpbkFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5Mb2dpbkFjdGlvblBlcmZvcm1lZFxuICAgICAgICAvLyBUT0RPIGFkZCB5b3VyIGhhbmRsaW5nIGNvZGUgaGVyZTpcbiAgICAgICAgaWYodmFsaWRhdGVGaWVsZHMoKSkge1xuICAgICAgICAgICAgdHJ5e1xuICAgICAgICAgICAgICAgIFN0cmluZyB1c2VybmFtZSA9IHR4dFVzZXJOYW1lLmdldFRleHQoKS50cmltKCk7XG4gICAgICAgICAgICAgICAgU3RyaW5nIHBhc3N3b3JkID0gdHh0UGFzc3dvcmQuZ2V0VGV4dCgpLnRyaW0oKTtcblxuICAgICAgICAgICAgICAgIFVzZXIgdXNlciA9IG51bGw7XG4gICAgICAgICAgICAgICAgYm9vbGVhbiBpc1N1Y2Nlc3MgPSBVc2VyREFPLmxvZ2luKHVzZXJuYW1lLCBwYXNzd29yZCk7XG5cbiAgICAgICAgICAgICAgICBpZihpc1N1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2codGhpcywgXCLEkMSDbmcgbmjhuq1wIHRow6BuaCBjw7RuZyFcIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5JTkZPUk1BVElPTl9NRVNTQUdFKTtcbi8vICAgICAgICAgICAgICAgICAgICBuZXcgTWFpbkZyYW1lKCkuc2V0VmlzaWJsZSh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwb3NlKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2codGhpcywgXCJTYWkgdMOqbiDEkcSDbmcgbmjhuq1wIGhv4bq3YyBt4bqtdCBraOG6qXUuXCIsIFwiTOG7l2lcIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAgICAgICAgICAgICAgfVxuLi4uXG5QYXRoOiBzcmMvREFPL1N1YnNjcmliZXJEQU8uamF2YVxuLypcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvTGljZW5zZXMvbGljZW5zZS1kZWZhdWx0LnR4dCB0byBjaGFuZ2UgdGhpcyBsaWNlbnNlXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ2xhc3MuamF2YSB0byBlZGl0IHRoaXMgdGVtcGxhdGVcbiAqL1xucGFja2FnZSBEQU87XG5cbmltcG9ydCBNb2RlbC5TdWJzY3JpYmVyO1xuaW1wb3J0IGphdmEudXRpbC5MaXN0O1xuaW1wb3J0IGphdmEuc3FsLlByZXBhcmVkU3RhdGVtZW50O1xuaW1wb3J0IGphdmEuc3FsLlRpbWVzdGFtcDtcbmltcG9ydCBEQU8uRGJPcGVyYXRpb25zLlNxbE9wZXJhdGlvbjtcblxuLyoqXG4gKlxuICogQGF1dGhvciBOZ29jIFRoYW9cbiAqL1xucHVibGljIGNsYXNzIFN1YnNjcmliZXJEQU97XG5cbiAgICBwdWJsaWMgc3RhdGljIHZvaWQgaW5zZXJ0KGZpbmFsIFN1YnNjcmliZXIgb2JqKSB7XG4gICAgICAgIC8vIEdlbmVyYXRlIHVzZXJfaWQgYW5kIHN1YnNjcmliZXJfaWRcbiAgICAgICAgZmluYWwgaW50IHVzZXJJZCA9IERiT3BlcmF0aW9ucy5nZXROZXh0SWQoXCJVU0VSXCIsIFwidXNlcl9pZFwiKTtcbiAgICAgICAgZmluYWwgaW50IHN1YnNjcmliZXJJZCA9IERiT3BlcmF0aW9ucy5nZXROZXh0SWQoXCJTVUJTQ1JJQkVSXCIsIFwic3Vic2NyaWJlcl9pZFwiKTtcblxuICAgICAgICAvLyBTZXQgdGhlIGdlbmVyYXRlZCBJRHNcbiAgICAgICAgb2JqLnNldFVzZXJfaWQodXNlcklkKTtcbiAgICAgICAgb2JqLnNldFN1YnNjcmliZXJfaWQoc3Vic2NyaWJlcklkKTtcbi4uLlxuXG4gICAgICAgICAgICAvLyBJbnNlcnQgaW50byBTVUJTQ1JJQkVSIHRhYmxlXG4gICAgICAgICAgICBuZXcgU3FsT3BlcmF0aW9uKCkge1xuICAgICAgICAgICAgICAgIEBPdmVycmlkZVxuICAgICAgICAgICAgICAgIHB1YmxpYyBTdHJpbmcgZ2V0U3FsKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJJTlNFUlQgSU5UTyBTVUJTQ1JJQkVSIChzdWJzY3JpYmVyX2lkLCBuYW1lLCBhZGRyZXNzLCBwaG9uZSwgdXNlcl9pZCkgVkFMVUVTICg/LCA/LCA/LCA/LCA/KVwiO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIEBPdmVycmlkZVxuICAgICAgICAgICAgICAgIHB1YmxpYyB2b2lkIHNldFBhcmFtZXRlcnMoUHJlcGFyZWRTdGF0ZW1lbnQgcHMpIHRocm93cyBFeGNlcHRpb24ge1xuICAgICAgICAgICAgICAgICAgICBwcy5zZXRJbnQoMSwgc3Vic2NyaWJlcklkKTtcbiAgICAgICAgICAgICAgICAgICAgcHMuc2V0U3RyaW5nKDIsIG9iai5nZXRGdWxsTmFtZSgpKTtcbiAgICAgICAgICAgICAgICAgICAgcHMuc2V0U3RyaW5nKDMsIG9iai5nZXRBZGRyZXNzKCkpO1xuICAgICAgICAgICAgICAgICAgICBwcy5zZXRTdHJpbmcoNCwgb2JqLmdldFBob25lKCkpO1xuICAgICAgICAgICAgICAgICAgICBwcy5zZXRJbnQoNSwgdXNlcklkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gRXhlY3V0ZSB0aGUgdHJhbnNhY3Rpb25cbiAgICAgICAgRGJPcGVyYXRpb25zLmV4ZWN1dGVUcmFuc2FjdGlvbihvcGVyYXRpb25zLCBcIsSQxINuZyBrw70gdGjDoG5oIGPDtG5nIVwiKTtcbiAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyB2b2lkIHVwZGF0ZShTdWJzY3JpYmVyIG9iaikge1xuICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oXCJOb3Qgc3VwcG9ydGVkIHlldC5cIik7IC8vIEdlbmVyYXRlZCBmcm9tIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9Db2RlL0dlbmVyYXRlZE1ldGhvZEJvZHlcbiAgICB9XG4uLi5cblBhdGg6IHNyYy9EQU8vQ29ubmVjdGlvblByb3ZpZGVyLmphdmFcbi4uLlxuXG4gICAgcHVibGljIHN0YXRpYyBDb25uZWN0aW9uIGdldENvbm4oKXtcbiAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQXR0ZW1wdGluZyB0byBjb25uZWN0IHRvIGRhdGFiYXNlLi4uXCIpO1xuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiVVJMOiBcIiArIFVSTCk7XG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJVc2VyOiBcIiArIFVTRVIpO1xuXG4gICAgICAgICAgICBDbGFzcy5mb3JOYW1lKFwiY29tLm15c3FsLmNqLmpkYmMuRHJpdmVyXCIpO1xuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRHJpdmVyIGxvYWRlZCBzdWNjZXNzZnVsbHlcIik7XG5cbiAgICAgICAgICAgIGNvbm4gPSBEcml2ZXJNYW5hZ2VyLmdldENvbm5lY3Rpb24oVVJMLCBVU0VSLCBQQVNTV09SRCk7XG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJDb25uZWN0aW9uIGVzdGFibGlzaGVkOiBcIiArIChjb25uICE9IG51bGwpKTtcblxuICAgICAgICB9IGNhdGNoIChDbGFzc05vdEZvdW5kRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIFN5c3RlbS5lcnIucHJpbnRsbihcIk15U1FMIEpEQkMgRHJpdmVyIG5vdCBmb3VuZC5cIik7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgU3lzdGVtLmVyci5wcmludGxuKFwiQ29ubmVjdGlvbiBmYWlsZWQ6IFwiICsgZS5nZXRNZXNzYWdlKCkpO1xuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29ubjtcbiAgICB9XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvY29tL3N0b3JlL2FwcC9wZXRzdG9yZS9EQU8vUGV0REFPLmphdmFcbi4uLlxuXG4gICAgLy8gdGltIGtpZW0gdGhlbyB0ZW4sIGxvYWksIGdpb25nXG4gICAgcHVibGljIEFycmF5TGlzdDxQZXQ+IHNlYXJjaFBldHMoU3RyaW5nIHNlYXJjaFRleHQsIGludCBsaW1pdCkge1xuICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgICAgICBQcmVwYXJlZFN0YXRlbWVudCBzdG10ID0gbnVsbDtcbiAgICAgICAgUmVzdWx0U2V0IHJzID0gbnVsbDtcbiAgICAgICAgQXJyYXlMaXN0PFBldD4gcGV0TGlzdCA9IG5ldyBBcnJheUxpc3Q8PigpO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25uID0gRGF0YWJhc2VVdGlsLmdldENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgIFN0cmluZyBzcWwgPSBcIlNFTEVDVCAqIEZST00gUGV0cyBXSEVSRSBMT1dFUihuYW1lKSBMSUtFID8gTElNSVQgP1wiO1xuXG4gICAgICAgICAgICBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHNxbCk7XG4gICAgICAgICAgICBTdHJpbmcgc2VhcmNoUGF0dGVybiA9IFwiJVwiICsgc2VhcmNoVGV4dC50b0xvd2VyQ2FzZSgpICsgXCIlXCI7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygxLCBzZWFyY2hQYXR0ZXJuKTtcbiAgICAgICAgICAgIHN0bXQuc2V0SW50KDIsIGxpbWl0KTtcblxuICAgICAgICAgICAgcnMgPSBzdG10LmV4ZWN1dGVRdWVyeSgpO1xuXG4gICAgICAgICAgICB3aGlsZSAocnMubmV4dCgpKSB7XG4gICAgICAgICAgICAgICAgcGV0TGlzdC5hZGQoUGV0TWFwcGVyLmZyb21SZXN1dFNldChycykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHBldExpc3Q7XG4gICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBEYXRhYmFzZVV0aWwuY2xvc2VSZXNvdXJjZXMocnMsIHN0bXQsIGNvbm4pO1xuICAgICAgICB9XG4gICAgfVxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL2NvbS9zdG9yZS9hcHAvcGV0c3RvcmUvQ29udHJvbGxlcnMvQWRtaW4vVXNlckluZm9yQ29udHJvbGxlci5qYXZhXG4uLi5cblxuICAgICAgICAgICAgaW50IHJlc3VsdDtcbiAgICAgICAgICAgIGlmIChpc05ld1VzZXIpIHtcbiAgICAgICAgICAgICAgICBpZiAodXNlckRBTy5jaGVja0R1cGxpY2F0ZSh1c2VyLmdldFVzZXJuYW1lKCkudHJpbSgpLCAtMSkpIHtcbiAgICAgICAgICAgICAgICAgICAgQ29udHJvbGxlclV0aWxzLnNob3dBbGVydChBbGVydC5BbGVydFR5cGUuRVJST1IsIFwiTOG7l2lcIiwgXCJUw6puIG5nxrDhu51pIGTDuW5nIMSRw6MgdOG7k24gdOG6oWkhXCIpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IHVzZXJEQU8uaW5zZXJ0KHVzZXIpO1xuICAgIC4uLiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfMDFGanBVbk1NQldRZ2ZTcDdMWnJ0WFJWIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiRTovSG9jVGFwLzAyX0pBVkEvMDNfUHJvamVjdC9JbnRlcm5ldCBNYW5nZW1lbnQgU3lzdGVtIiwiZm9sZGVyUm9vdCI6IkU6L0hvY1RhcC8wMl9KQVZBLzAzX1Byb2plY3QvSW50ZXJuZXQgTWFuZ2VtZW50IFN5c3RlbSJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInRpbWVzdGFtcCI6IjIwMjUtMDUtMTNUMTM6MDE6NDkuNTA0WiIsInJlc3BvbnNlX3RleHQiOiJOb3csIGxldCBtZSBjaGVjayB0aGUgaW1wbGVtZW50YXRpb24gb2YgdGhlIGxvZ2luIG1ldGhvZCBpbiB0aGUgVXNlckRBTyBjbGFzczpcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiIzNzdmMzRmMC00NDExLTRhNmEtYTcxOC02YjAzYTBhOTBlMmQiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1XzAxR2FvNTRmalNkMXo5TEtqdG1aN3AxciIsInRvb2xfbmFtZSI6ImNvZGViYXNlLXJldHJpZXZhbCIsImlucHV0X2pzb24iOiJ7XCJpbmZvcm1hdGlvbl9yZXF1ZXN0XCI6IFwiRmluZCB0aGUgaW1wbGVtZW50YXRpb24gb2YgdGhlIFVzZXJEQU8ubG9naW4gbWV0aG9kIGluIHRoZSBEQU8gcGFja2FnZS4gSSBuZWVkIHRvIHNlZSB0aGUgZXhhY3QgaW1wbGVtZW50YXRpb24gb2YgdGhpcyBtZXRob2QgdGhhdCBpcyB1c2VkIGluIHRoZSBMb2dpbi5qYXZhIGZpbGUuXCJ9IiwibWNwX3NlcnZlcl9uYW1lIjoiIiwibWNwX3Rvb2xfbmFtZSI6IiJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiTGV0IG1lIGNoZWNrIGZvciB0aGUgaW1wbGVtZW50YXRpb24gb2YgdGhlIFVzZXJEQU8ubG9naW4gbWV0aG9kIGluIHRoZSBwcm9qZWN0OlxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiVGhlIGZvbGxvd2luZyBjb2RlIHNlY3Rpb25zIHdlcmUgcmV0cmlldmVkOlxuUGF0aDogc3JjL21haW4vamF2YS9jb20vc3RvcmUvYXBwL3BldHN0b3JlL0RBTy9Vc2VyREFPLmphdmFcbnBhY2thZ2UgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5EQU87XG5cbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLk1vZGVscy5FbnRpdGllcy5Vc2VyO1xuaW1wb3J0IG9yZy5taW5kcm90LmpiY3J5cHQuQkNyeXB0O1xuXG5pbXBvcnQgamF2YS5zcWwuKjtcbmltcG9ydCBqYXZhLnV0aWwuQXJyYXlMaXN0O1xuaW1wb3J0IGphdmEudXRpbC5CYXNlNjQ7XG5cbnB1YmxpYyBjbGFzcyBVc2VyREFPIGltcGxlbWVudHMgQmFzZURBTzxVc2VyLCBJbnRlZ2VyPiB7XG4gICAgcHVibGljIHN0YXRpYyBmaW5hbCBpbnQgaXNEdXBsaWNhdGUgPSAtMTtcblxuICAgIHB1YmxpYyBzdGF0aWMgVXNlckRBTyBnZXRJbnN0YW5jZSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBVc2VyREFPKCk7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBTdHJpbmcgZW5jb2RlKFN0cmluZyBwYXNzd29yZCkge1xuLy8gICAgICAgIHJldHVybiBCYXNlNjQuZ2V0RW5jb2RlcigpLmVuY29kZVRvU3RyaW5nKHBhc3N3b3JkLmdldEJ5dGVzKCkpO1xuICAgICAgICByZXR1cm4gQkNyeXB0Lmhhc2hwdyhwYXNzd29yZCwgQkNyeXB0LmdlbnNhbHQoKSk7XG4gICAgfVxuXG4vLyAgICBwdWJsaWMgc3RhdGljIFN0cmluZyBkZWNvZGUoU3RyaW5nIHBhc3N3b3JkKSB7XG4vLyAgICAgICAgcmV0dXJuIG5ldyBTdHJpbmcoQmFzZTY0LmdldERlY29kZXIoKS5kZWNvZGUocGFzc3dvcmQpKTtcbi8vICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgYm9vbGVhbiB2ZXJpZnkoU3RyaW5nIHBhc3N3b3JkLCBTdHJpbmcgaGFzaGVkKSB7XG4gICAgICAgIHJldHVybiBCQ3J5cHQuY2hlY2twdyhwYXNzd29yZCwgaGFzaGVkKTtcbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgaW50IGluc2VydChVc2VyIGVudGl0eSkge1xuICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgICAgICBQcmVwYXJlZFN0YXRlbWVudCBzdG10ID0gbnVsbDtcbiAgICAgICAgUmVzdWx0U2V0IHJzID0gbnVsbDtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29ubiA9IERhdGFiYXNlVXRpbC5nZXRDb25uZWN0aW9uKCk7XG4gICAgICAgICAgICBTdHJpbmcgc3FsID0gXCJJTlNFUlQgSU5UTyBVc2VycyAodXNlcm5hbWUsIHBhc3N3b3JkLCByb2xlLCBpbWFnZV91cmwsIGlzQWN0aXZlKSBWQUxVRVMgKD8sID8sID8sID8sID8pXCI7XG4gICAgICAgICAgICBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHNxbCwgU3RhdGVtZW50LlJFVFVSTl9HRU5FUkFURURfS0VZUyk7XG5cbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDEsIGVudGl0eS5nZXRVc2VybmFtZSgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDIsIGVuY29kZShlbnRpdHkuZ2V0UGFzc3dvcmQoKSkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMywgZW50aXR5LmdldFJvbGUoKSk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZyg0LCBlbnRpdHkuZ2V0SW1hZ2VVcmwoKSk7XG4gICAgICAgICAgICBzdG10LnNldEJvb2xlYW4oNSwgZW50aXR5LmlzQWN0aXZlKCkpO1xuXG4gICAgICAgICAgICBpbnQgYWZmZWN0ZWRSb3dzID0gc3RtdC5leGVjdXRlVXBkYXRlKCk7XG4gICAgICAgICAgICBpZiAoYWZmZWN0ZWRSb3dzID09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdHJ5IChSZXN1bHRTZXQgZ2VuZXJhdGVkS2V5cyA9IHN0bXQuZ2V0R2VuZXJhdGVkS2V5cygpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGdlbmVyYXRlZEtleXMubmV4dCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBnZW5lcmF0ZWRLZXlzLmdldEludCgxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIERhdGFiYXNlVXRpbC5jbG9zZVJlc291cmNlcyhycywgc3RtdCwgY29ubik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgaW50IHVwZGF0ZShVc2VyIGVudGl0eSkge1xuICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgICAgICBQcmVwYXJlZFN0YXRlbWVudCBzdG10ID0gbnVsbDtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29ubiA9IERhdGFiYXNlVXRpbC5nZXRDb25uZWN0aW9uKCk7XG4gICAgICAgICAgICBTdHJpbmcgc3FsID0gXCJVUERBVEUgVXNlcnMgU0VUIHVzZXJuYW1lID0gPywgcGFzc3dvcmQgPSA/LCByb2xlID0gPywgaW1hZ2VfdXJsID0gPywgaXNBY3RpdmUgPSA/IFdIRVJFIHVzZXJfaWQgPSA/XCI7XG4gICAgICAgICAgICBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHNxbCk7XG5cbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDEsIGVudGl0eS5nZXRVc2VybmFtZSgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDIsIGVuY29kZShlbnRpdHkuZ2V0UGFzc3dvcmQoKSkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMywgZW50aXR5LmdldFJvbGUoKSk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZyg0LCBlbnRpdHkuZ2V0SW1hZ2VVcmwoKSk7XG4gICAgICAgICAgICBzdG10LnNldEJvb2xlYW4oNSwgZW50aXR5LmlzQWN0aXZlKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRJbnQoNiwgZW50aXR5LmdldFVzZXJJZCgpKTtcblxuICAgICAgICAgICAgcmV0dXJuIHN0bXQuZXhlY3V0ZVVwZGF0ZSgpO1xuICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgRGF0YWJhc2VVdGlsLmNsb3NlUmVzb3VyY2VzKHN0bXQsIGNvbm4pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGludCB1cGRhdGUoVXNlciBlbnRpdHksIGJvb2xlYW4gaXNVc2VybmFtZUNoYW5nZWQpIHtcbiAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcbiAgICAgICAgUHJlcGFyZWRTdGF0ZW1lbnQgc3RtdCA9IG51bGw7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbm4gPSBEYXRhYmFzZVV0aWwuZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgICAgICAgU3RyaW5nIHNxbCA9IFwiVVBEQVRFIFVzZXJzIFNFVCB1c2VybmFtZSA9ID8sIHBhc3N3b3JkID0gPywgcm9sZSA9ID8sIGltYWdlX3VybCA9ID8sIGlzQWN0aXZlID0gPyBXSEVSRSB1c2VyX2lkID0gP1wiO1xuICAgICAgICAgICAgc3RtdCA9IGNvbm4ucHJlcGFyZVN0YXRlbWVudChzcWwpO1xuXG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygxLCBlbnRpdHkuZ2V0VXNlcm5hbWUoKSk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygyLCBlbmNvZGUoZW50aXR5LmdldFBhc3N3b3JkKCkpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDMsIGVudGl0eS5nZXRSb2xlKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoNCwgZW50aXR5LmdldEltYWdlVXJsKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRCb29sZWFuKDUsIGVudGl0eS5pc0FjdGl2ZSgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0SW50KDYsIGVudGl0eS5nZXRVc2VySWQoKSk7XG5cbiAgICAgICAgICAgIHJldHVybiBzdG10LmV4ZWN1dGVVcGRhdGUoKTtcbiAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIERhdGFiYXNlVXRpbC5jbG9zZVJlc291cmNlcyhzdG10LCBjb25uKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBpbnQgZGVsZXRlKFVzZXIgZW50aXR5KSB7XG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25uID0gRGF0YWJhc2VVdGlsLmdldENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgIFN0cmluZyBzcWwgPSBcIkRFTEVURSBGUk9NIFVzZXJzIFdIRVJFIHVzZXJfaWQgPSA/XCI7XG4gICAgICAgICAgICBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHNxbCk7XG5cbiAgICAgICAgICAgIHN0bXQuc2V0SW50KDEsIGVudGl0eS5nZXRVc2VySWQoKSk7XG5cbiAgICAgICAgICAgIHJldHVybiBzdG10LmV4ZWN1dGVVcGRhdGUoKTtcbiAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIERhdGFiYXNlVXRpbC5jbG9zZVJlc291cmNlcyhzdG10LCBjb25uKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBBcnJheUxpc3Q8VXNlcj4gZmluZEFsbCgpIHtcbiAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcbiAgICAgICAgUHJlcGFyZWRTdGF0ZW1lbnQgc3RtdCA9IG51bGw7XG4gICAgICAgIFJlc3VsdFNldCBycyA9IG51bGw7XG4gICAgICAgIEFycmF5TGlzdDxVc2VyPiB1c2VycyA9IG5ldyBBcnJheUxpc3Q8PigpO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25uID0gRGF0YWJhc2VVdGlsLmdldENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgIFN0cmluZyBzcWwgPSBcIlNFTEVDVCAqIEZST00gVXNlcnNcIjtcbiAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsKTtcbiAgICAgICAgICAgIHJzID0gc3RtdC5leGVjdXRlUXVlcnkoKTtcblxuICAgICAgICAgICAgd2hpbGUgKHJzLm5leHQoKSkge1xuICAgICAgICAgICAgICAgIFVzZXIgdXNlciA9IG5ldyBVc2VyKCk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRVc2VySWQocnMuZ2V0SW50KFwidXNlcl9pZFwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRVc2VybmFtZShycy5nZXRTdHJpbmcoXCJ1c2VybmFtZVwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRQYXNzd29yZChycy5nZXRTdHJpbmcoXCJwYXNzd29yZFwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRSb2xlKHJzLmdldFN0cmluZyhcInJvbGVcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0SW1hZ2VVcmwocnMuZ2V0U3RyaW5nKFwiaW1hZ2VfdXJsXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldEFjdGl2ZShycy5nZXRCb29sZWFuKFwiaXNBY3RpdmVcIikpO1xuICAgICAgICAgICAgICAgIHVzZXJzLmFkZCh1c2VyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBEYXRhYmFzZVV0aWwuY2xvc2VSZXNvdXJjZXMocnMsIHN0bXQsIGNvbm4pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1c2VycztcbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgVXNlciBmaW5kQnlJZChJbnRlZ2VyIGlkKSB7XG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuICAgICAgICBSZXN1bHRTZXQgcnMgPSBudWxsO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25uID0gRGF0YWJhc2VVdGlsLmdldENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgIFN0cmluZyBzcWwgPSBcIlNFTEVDVCAqIEZST00gVXNlcnMgV0hFUkUgdXNlcl9pZCA9ID9cIjtcbiAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsKTtcbiAgICAgICAgICAgIHN0bXQuc2V0SW50KDEsIGlkKTtcbiAgICAgICAgICAgIHJzID0gc3RtdC5leGVjdXRlUXVlcnkoKTtcblxuICAgICAgICAgICAgaWYgKHJzLm5leHQoKSkge1xuICAgICAgICAgICAgICAgIFVzZXIgdXNlciA9IG5ldyBVc2VyKCk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRVc2VySWQocnMuZ2V0SW50KFwidXNlcl9pZFwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRVc2VybmFtZShycy5nZXRTdHJpbmcoXCJ1c2VybmFtZVwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRQYXNzd29yZChycy5nZXRTdHJpbmcoXCJwYXNzd29yZFwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRSb2xlKHJzLmdldFN0cmluZyhcInJvbGVcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0SW1hZ2VVcmwocnMuZ2V0U3RyaW5nKFwiaW1hZ2VfdXJsXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldEFjdGl2ZShycy5nZXRCb29sZWFuKFwiaXNBY3RpdmVcIikpO1xuICAgICAgICAgICAgICAgIHJldHVybiB1c2VyO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIERhdGFiYXNlVXRpbC5jbG9zZVJlc291cmNlcyhycywgc3RtdCwgY29ubik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuLi4uXG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbm4gPSBEYXRhYmFzZVV0aWwuZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgICAgICAgU3RyaW5nIHNxbCA9IFwiU0VMRUNUICogRlJPTSBVc2VycyBXSEVSRSBcIiArIGNvbmRpdGlvbjtcbiAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsKTtcbiAgICAgICAgICAgIHJzID0gc3RtdC5leGVjdXRlUXVlcnkoKTtcblxuICAgICAgICAgICAgd2hpbGUgKHJzLm5leHQoKSkge1xuICAgICAgICAgICAgICAgIFVzZXIgdXNlciA9IG5ldyBVc2VyKCk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRVc2VySWQocnMuZ2V0SW50KFwidXNlcl9pZFwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRVc2VybmFtZShycy5nZXRTdHJpbmcoXCJ1c2VybmFtZVwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRQYXNzd29yZChycy5nZXRTdHJpbmcoXCJwYXNzd29yZFwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRSb2xlKHJzLmdldFN0cmluZyhcInJvbGVcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0SW1hZ2VVcmwocnMuZ2V0U3RyaW5nKFwiaW1hZ2VfdXJsXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldEFjdGl2ZShycy5nZXRCb29sZWFuKFwiaXNBY3RpdmVcIikpO1xuICAgICAgICAgICAgICAgIHVzZXJzLmFkZCh1c2VyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBEYXRhYmFzZVV0aWwuY2xvc2VSZXNvdXJjZXMocnMsIHN0bXQsIGNvbm4pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1c2VycztcbiAgICB9XG5cbiAgICBwdWJsaWMgVXNlciBmaW5kQnlVc2VybmFtZShTdHJpbmcgdXNlcm5hbWUpIHtcbiAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcbiAgICAgICAgUHJlcGFyZWRTdGF0ZW1lbnQgc3RtdCA9IG51bGw7XG4gICAgICAgIFJlc3VsdFNldCBycyA9IG51bGw7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbm4gPSBEYXRhYmFzZVV0aWwuZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgICAgICAgU3RyaW5nIHNxbCA9IFwiU0VMRUNUICogRlJPTSBVc2VycyBXSEVSRSB1c2VybmFtZSA9ID9cIjtcbiAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDEsIHVzZXJuYW1lKTtcbiAgICAgICAgICAgIHJzID0gc3RtdC5leGVjdXRlUXVlcnkoKTtcblxuICAgICAgICAgICAgaWYgKHJzLm5leHQoKSkge1xuICAgICAgICAgICAgICAgIFVzZXIgdXNlciA9IG5ldyBVc2VyKCk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRVc2VySWQocnMuZ2V0SW50KFwidXNlcl9pZFwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRVc2VybmFtZShycy5nZXRTdHJpbmcoXCJ1c2VybmFtZVwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRQYXNzd29yZChycy5nZXRTdHJpbmcoXCJwYXNzd29yZFwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRSb2xlKHJzLmdldFN0cmluZyhcInJvbGVcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0SW1hZ2VVcmwocnMuZ2V0U3RyaW5nKFwiaW1hZ2VfdXJsXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldEFjdGl2ZShycy5nZXRCb29sZWFuKFwiaXNBY3RpdmVcIikpO1xuICAgICAgICAgICAgICAgIHJldHVybiB1c2VyO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIERhdGFiYXNlVXRpbC5jbG9zZVJlc291cmNlcyhycywgc3RtdCwgY29ubik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcHVibGljIFVzZXIgZmluZEJ5RW1haWwoU3RyaW5nIGVtYWlsKSB7XG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuICAgICAgICBSZXN1bHRTZXQgcnMgPSBudWxsO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBLaeG7g20gdHJhIGVtYWlsIGPDsyB04buTbiB04bqhaSB0cm9uZyBi4bqjbmcgU3RhZmZzIGtow7RuZ1xuICAgICAgICAgICAgY29ubiA9IERhdGFiYXNlVXRpbC5nZXRDb25uZWN0aW9uKCk7XG4gICAgICAgICAgICBTdHJpbmcgY2hlY2tTcWwgPSBcIlNFTEVDVCAqIEZST00gU3RhZmZzIFdIRVJFIGVtYWlsID0gP1wiO1xuICAgICAgICAgICAgc3RtdCA9IGNvbm4ucHJlcGFyZVN0YXRlbWVudChjaGVja1NxbCk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygxLCBlbWFpbCk7XG4gICAgICAgICAgICBycyA9IHN0bXQuZXhlY3V0ZVF1ZXJ5KCk7XG5cbiAgICAgICAgICAgIC8vIE7hur91IGVtYWlsIHThu5NuIHThuqFpLCBs4bqleSB0aMO0bmcgdGluIHVzZXJcbiAgICAgICAgICAgIFN0cmluZyBzcWwgPSBcIlNFTEVDVCB1LiogRlJPTSBVc2VycyB1IFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiSk9JTiBTdGFmZnMgcyBPTiB1LnVzZXJfaWQgPSBzLnVzZXJfaWQgXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJXSEVSRSBzLmVtYWlsID0gP1wiO1xuICAgICAgICAgICAgc3RtdCA9IGNvbm4ucHJlcGFyZVN0YXRlbWVudChzcWwpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMSwgZW1haWwpO1xuXG4gICAgICAgICAgICBycyA9IHN0bXQuZXhlY3V0ZVF1ZXJ5KCk7XG5cbiAgICAgICAgICAgIGlmIChycy5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICBVc2VyIHVzZXIgPSBuZXcgVXNlcigpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0VXNlcklkKHJzLmdldEludChcInVzZXJfaWRcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0VXNlcm5hbWUocnMuZ2V0U3RyaW5nKFwidXNlcm5hbWVcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0UGFzc3dvcmQocnMuZ2V0U3RyaW5nKFwicGFzc3dvcmRcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0Um9sZShycy5nZXRTdHJpbmcoXCJyb2xlXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldEltYWdlVXJsKHJzLmdldFN0cmluZyhcImltYWdlX3VybFwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRBY3RpdmUocnMuZ2V0Qm9vbGVhbihcImlzQWN0aXZlXCIpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdXNlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlNRTCBFcnJvcjogXCIgKyBlLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgRGF0YWJhc2VVdGlsLmNsb3NlUmVzb3VyY2VzKHJzLCBzdG10LCBjb25uKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBwdWJsaWMgYm9vbGVhbiBjaGVja0R1cGxpY2F0ZShTdHJpbmcgdXNlcm5hbWUsIGludCBleGNsdWRlVXNlcklkKSB7XG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuICAgICAgICBSZXN1bHRTZXQgcnMgPSBudWxsO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29ubiA9IERhdGFiYXNlVXRpbC5nZXRDb25uZWN0aW9uKCk7XG4gICAgICAgICAgICBTdHJpbmcgc3FsID0gXCJTRUxFQ1QgQ09VTlQoKikgRlJPTSBVc2VycyBXSEVSRSBMT1dFUih1c2VybmFtZSkgPSBMT1dFUig/KVwiO1xuICAgICAgICAgICAgaWYgKGV4Y2x1ZGVVc2VySWQgPj0gMCkge1xuICAgICAgICAgICAgICAgIHNxbCArPSBcIiBBTkQgdXNlcl9pZCA8PiA/XCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHNxbCk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygxLCB1c2VybmFtZSk7XG4gICAgICAgICAgICBpZiAoZXhjbHVkZVVzZXJJZCA+PSAwKSB7XG4gICAgICAgICAgICAgICAgc3RtdC5zZXRJbnQoMiwgZXhjbHVkZVVzZXJJZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBycyA9IHN0bXQuZXhlY3V0ZVF1ZXJ5KCk7XG4gICAgICAgICAgICBpZiAocnMubmV4dCgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJzLmdldEludCgxKSA+IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgRGF0YWJhc2VVdGlsLmNsb3NlUmVzb3VyY2VzKHJzLCBzdG10LCBjb25uKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcHVibGljIGJvb2xlYW4gY2hlY2tVc2VySUQoVXNlciBlbnRpdHkpIHtcbiAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcbiAgICAgICAgUHJlcGFyZWRTdGF0ZW1lbnQgc3RtdCA9IG51bGw7XG4gICAgICAgIFJlc3VsdFNldCBycyA9IG51bGw7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbm4gPSBEYXRhYmFzZVV0aWwuZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgICAgICAgU3RyaW5nIHNxbCA9IFwiU0VMRUNUIENPVU5UKCopIEZST00gVXNlcnMgV0hFUkUgdXNlcl9pZCA9ID9cIjtcbiAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsKTtcbiAgICAgICAgICAgIHN0bXQuc2V0SW50KDEsIGVudGl0eS5nZXRVc2VySWQoKSk7XG4gICAgICAgICAgICBycyA9IHN0bXQuZXhlY3V0ZVF1ZXJ5KCk7XG5cbiAgICAgICAgICAgIGlmIChycy5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcnMuZ2V0SW50KDEpID4gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBEYXRhYmFzZVV0aWwuY2xvc2VSZXNvdXJjZXMocnMsIHN0bXQsIGNvbm4pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvY29tL3N0b3JlL2FwcC9wZXRzdG9yZS9Db250cm9sbGVycy9Mb2dpbkNvbnRyb2xsZXIuamF2YVxuLi4uXG5cbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLkRBTy5Vc2VyREFPO1xuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuREFPLlN0YWZmREFPO1xuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuTW9kZWxzLkVudGl0aWVzLlVzZXI7XG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5Nb2RlbHMuRW50aXRpZXMuU3RhZmY7XG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5TZXNzaW9ucy5TZXNzaW9uTWFuYWdlcjtcbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLlZpZXdzLkFkbWluRmFjdG9yeTtcbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLlZpZXdzLlZpZXdGYWN0b3J5O1xuaW1wb3J0IGRlLmplbnNkLmZ4LmdseXBocy5mb250YXdlc29tZS5Gb250QXdlc29tZUljb247XG5pbXBvcnQgZGUuamVuc2QuZnguZ2x5cGhzLmZvbnRhd2Vzb21lLkZvbnRBd2Vzb21lSWNvblZpZXc7XG5pbXBvcnQgamF2YWZ4LmZ4bWwuRlhNTDtcbmltcG9ydCBqYXZhZnguZnhtbC5Jbml0aWFsaXphYmxlO1xuaW1wb3J0IGphdmFmeC5zY2VuZS5jb250cm9sLio7XG5pbXBvcnQgamF2YWZ4LnNjZW5lLmlucHV0Lk1vdXNlRXZlbnQ7XG5pbXBvcnQgamF2YWZ4LnN0YWdlLlN0YWdlO1xuaW1wb3J0IGphdmFmeC5zY2VuZS5pbWFnZS5JbWFnZTtcbmltcG9ydCBqYXZhZnguc2NlbmUuaW1hZ2UuSW1hZ2VWaWV3O1xuaW1wb3J0IGphdmFmeC5zY2VuZS5wYWludC5JbWFnZVBhdHRlcm47XG5pbXBvcnQgamF2YS51dGlsLk9iamVjdHM7XG4uLi5cblxucHVibGljIGNsYXNzIExvZ2luQ29udHJvbGxlciBpbXBsZW1lbnRzIEluaXRpYWxpemFibGUge1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIEZvbnRBd2Vzb21lSWNvblZpZXcgZXllSWNvbjtcblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBUZXh0RmllbGQgc2hvd1Bhc3N3b3JkO1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIFBhc3N3b3JkRmllbGQgcGFzc3dvcmRGaWVsZDtcblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBUZXh0RmllbGQgdXNlcm5hbWVGaWVsZDtcblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBCdXR0b24gbG9naW5CdXR0b247XG5cbiAgICBARlhNTFxuICAgIHByaXZhdGUgTGFiZWwgZXJyb3JMYWJlbDtcblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBIeXBlcmxpbmsgZm9yZ290UGFzc3dvcmRMaW5rO1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIEltYWdlVmlldyB1c2VySW1hZ2U7XG5cbiAgICBwcml2YXRlIGRvdWJsZSB4LCB5O1xuXG4gICAgVXNlckRBTyB1c2VyREFPID0gbmV3IFVzZXJEQU8oKTtcbiAgICBTdGFmZkRBTyBzdGFmZkRBTyA9IFN0YWZmREFPLmdldEluc3RhbmNlKCk7XG4gICAgcHVibGljIHN0YXRpYyBpbnQgaWRTdGFmZkN1cnJlbnQ7XG4gICAgcHVibGljIHN0YXRpYyBpbnQgaWRBZG1pbkN1cnJlbnQ7XG5cbiAgICBwcml2YXRlIFNlc3Npb25NYW5hZ2VyIHNlc3Npb25NYW5hZ2VyID0gbmV3IFNlc3Npb25NYW5hZ2VyKCk7XG4uLi5cblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gVMOsbSB1c2VyIHRoZW8gdXNlcm5hbWVcbiAgICAgICAgICAgIFVzZXIgdXNlciA9IHVzZXJEQU8uZmluZEJ5VXNlcm5hbWUodXNlcm5hbWUpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZih1c2VyID09IG51bGwgfHwgdXNlci5nZXRVc2VybmFtZSgpID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBDb250cm9sbGVyVXRpbHMuc2hvd0FsZXJ0KEFsZXJ0LkFsZXJ0VHlwZS5FUlJPUiwgXCJM4buXaVwiLCBcIlTDqm4gxJHEg25nIG5o4bqtcCBraMO0bmcgxJHDum5nXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gS2nhu4NtIHRyYSB0w6puIMSRxINuZyBuaOG6rXBcbiAgICAgICAgICAgIGlmICghdXNlci5nZXRVc2VybmFtZSgpLmVxdWFscyh1c2VybmFtZSkpIHtcbiAgICAgICAgICAgICAgICBDb250cm9sbGVyVXRpbHMuc2hvd0FsZXJ0KEFsZXJ0LkFsZXJ0VHlwZS5FUlJPUiwgXCJM4buXaVwiLCBcIlTDqm4gxJHEg25nIG5o4bqtcCBraMO0bmcgxJHDum5nXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gS2nhu4NtIHRyYSBt4bqtdCBraOG6qXVcbiAgICAgICAgICAgIGlmKCFCQ3J5cHQuY2hlY2twdyhwYXNzd29yZCwgdXNlci5nZXRQYXNzd29yZCgpKSkge1xuICAgICAgICAgICAgICAgIENvbnRyb2xsZXJVdGlscy5zaG93QWxlcnQoQWxlcnQuQWxlcnRUeXBlLkVSUk9SLCBcIkzhu5dpXCIsIFwiTeG6rXQga2jhuql1IGtow7RuZyDEkcO6bmdcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzZXNzaW9uTWFuYWdlci5zZXRDdXJyZW50VXNlcih1c2VyKTtcblxuICAgICAgICAgICAgU3RhZ2UgY3VycmVudFN0YWdlID0gKFN0YWdlKSB1c2VybmFtZUZpZWxkLmdldFNjZW5lKCkuZ2V0V2luZG93KCk7XG5cbiAgICAgICAgICAgIGlmKHVzZXIuZ2V0Um9sZSgpLmVxdWFscyhVc2VyLlJPTEVfQURNSU4pKSB7XG4gICAgICAgICAgICAgICAgaWRBZG1pbkN1cnJlbnQgPSB1c2VyLmdldFVzZXJJZCgpO1xuICAgICAgICAgICAgICAgIEFkbWluRmFjdG9yeS5nZXRJbnN0YW5jZSgpLnN3aXRjaENvbnRlbnQoXCJkYXNoYm9hcmRcIiwgY3VycmVudFN0YWdlKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZih1c2VyLmdldFJvbGUoKS5lcXVhbHMoVXNlci5ST0xFX1VTRVIpKSB7XG4gICAgICAgICAgICAgICAgaWRTdGFmZkN1cnJlbnQgPSB1c2VyLmdldFVzZXJJZCgpO1xuICAgICAgICAgICAgICAgIFN0YWZmIHN0YWZmID0gc3RhZmZEQU8uZmluZEJ5VXNlcklkKHVzZXIuZ2V0VXNlcklkKCkpO1xuICAgICAgICAgICAgICAgIGlmIChzdGFmZiAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlc3Npb25NYW5hZ2VyLnNldEN1cnJlbnRTdGFmZihzdGFmZik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFZpZXdGYWN0b3J5LmdldEluc3RhbmNlKCkuc3dpdGNoQ29udGVudChcImRhc2hib2FyZFwiLCBjdXJyZW50U3RhZ2UpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBDb250cm9sbGVyVXRpbHMuc2hvd0FsZXJ0KEFsZXJ0LkFsZXJ0VHlwZS5FUlJPUiwgXCJM4buXaVwiLCBcIlZhaSB0csOyIG5nxrDhu51pIGTDuW5nIGtow7RuZyBo4bujcCBs4buHXCIpO1xuICAgICAgICAgICAgICAgIHNlc3Npb25NYW5hZ2VyLmNsZWFyKCk7XG4gICAgICAgICAgICB9XG4uLi5cblBhdGg6IHNyYy9EQU8vVXNlckRBTy5qYXZhXG4vKlxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9MaWNlbnNlcy9saWNlbnNlLWRlZmF1bHQudHh0IHRvIGNoYW5nZSB0aGlzIGxpY2Vuc2VcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9DbGFzcy5qYXZhIHRvIGVkaXQgdGhpcyB0ZW1wbGF0ZVxuICovXG5wYWNrYWdlIERBTztcblxuaW1wb3J0IE1vZGVsLlVzZXI7XG5pbXBvcnQgamF2YS51dGlsLkxpc3Q7XG5cbi8qKlxuICpcbiAqIEBhdXRob3IgTmdvYyBUaGFvXG4gKi9cbnB1YmxpYyBjbGFzcyBVc2VyREFPe1xuXG4gICAgcHVibGljIHN0YXRpYyB2b2lkIGluc2VydChVc2VyIG9iaikge1xuICAgICAgICBcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIHZvaWQgdXBkYXRlKFVzZXIgb2JqKSB7XG4gICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbihcIk5vdCBzdXBwb3J0ZWQgeWV0LlwiKTsgLy8gR2VuZXJhdGVkIGZyb20gbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NvZGUvR2VuZXJhdGVkTWV0aG9kQm9keVxuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBkZWxldGUoaW50IGlkKSB7XG4gICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbihcIk5vdCBzdXBwb3J0ZWQgeWV0LlwiKTsgLy8gR2VuZXJhdGVkIGZyb20gbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NvZGUvR2VuZXJhdGVkTWV0aG9kQm9keVxuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgVXNlciBnZXRCeUlkKGludCBpZCkge1xuICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oXCJOb3Qgc3VwcG9ydGVkIHlldC5cIik7IC8vIEdlbmVyYXRlZCBmcm9tIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9Db2RlL0dlbmVyYXRlZE1ldGhvZEJvZHlcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIExpc3Q8VXNlcj4gZ2V0QWxsKCkge1xuICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oXCJOb3Qgc3VwcG9ydGVkIHlldC5cIik7IC8vIEdlbmVyYXRlZCBmcm9tIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9Db2RlL0dlbmVyYXRlZE1ldGhvZEJvZHlcbiAgICB9XG4gICAgXG59XG4uLi5cblBhdGg6IHNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL0xvZ2luLmphdmFcbi8qXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0xpY2Vuc2VzL2xpY2Vuc2UtZGVmYXVsdC50eHQgdG8gY2hhbmdlIHRoaXMgbGljZW5zZVxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9HVUlGb3Jtcy9KRnJhbWUuamF2YSB0byBlZGl0IHRoaXMgdGVtcGxhdGVcbiAqL1xucGFja2FnZSBpbnRlcm5ldC5tYW5nZW1lbnQuc3lzdGVtO1xuXG5pbXBvcnQgREFPLlVzZXJEQU87XG5pbXBvcnQgTW9kZWwuVXNlcjtcbmltcG9ydCBqYXZheC5zd2luZy5KT3B0aW9uUGFuZTtcbi4uLlxuXG4gICAgcHJpdmF0ZSB2b2lkIGJ0bkxvZ2luQWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkxvZ2luQWN0aW9uUGVyZm9ybWVkXG4gICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxuICAgICAgICBpZih2YWxpZGF0ZUZpZWxkcygpKSB7XG4gICAgICAgICAgICB0cnl7XG4gICAgICAgICAgICAgICAgU3RyaW5nIHVzZXJuYW1lID0gdHh0VXNlck5hbWUuZ2V0VGV4dCgpLnRyaW0oKTtcbiAgICAgICAgICAgICAgICBTdHJpbmcgcGFzc3dvcmQgPSB0eHRQYXNzd29yZC5nZXRUZXh0KCkudHJpbSgpO1xuXG4gICAgICAgICAgICAgICAgVXNlciB1c2VyID0gbnVsbDtcbiAgICAgICAgICAgICAgICBib29sZWFuIGlzU3VjY2VzcyA9IFVzZXJEQU8ubG9naW4odXNlcm5hbWUsIHBhc3N3b3JkKTtcblxuICAgICAgICAgICAgICAgIGlmKGlzU3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyh0aGlzLCBcIsSQxINuZyBuaOG6rXAgdGjDoG5oIGPDtG5nIVwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLklORk9STUFUSU9OX01FU1NBR0UpO1xuLy8gICAgICAgICAgICAgICAgICAgIG5ldyBNYWluRnJhbWUoKS5zZXRWaXNpYmxlKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyh0aGlzLCBcIlNhaSB0w6puIMSRxINuZyBuaOG6rXAgaG/hurdjIG3huq10IGto4bqpdS5cIiwgXCJM4buXaVwiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgICAgICAgICAgICAgICB9XG4uLi5cblBhdGg6IHNyYy9EQU8vU3Vic2NyaWJlckRBTy5qYXZhXG4vKlxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9MaWNlbnNlcy9saWNlbnNlLWRlZmF1bHQudHh0IHRvIGNoYW5nZSB0aGlzIGxpY2Vuc2VcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9DbGFzcy5qYXZhIHRvIGVkaXQgdGhpcyB0ZW1wbGF0ZVxuICovXG5wYWNrYWdlIERBTztcblxuaW1wb3J0IE1vZGVsLlN1YnNjcmliZXI7XG5pbXBvcnQgamF2YS51dGlsLkxpc3Q7XG5pbXBvcnQgamF2YS5zcWwuUHJlcGFyZWRTdGF0ZW1lbnQ7XG5pbXBvcnQgamF2YS5zcWwuVGltZXN0YW1wO1xuaW1wb3J0IERBTy5EYk9wZXJhdGlvbnMuU3FsT3BlcmF0aW9uO1xuXG4vKipcbiAqXG4gKiBAYXV0aG9yIE5nb2MgVGhhb1xuICovXG5wdWJsaWMgY2xhc3MgU3Vic2NyaWJlckRBT3tcblxuICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBpbnNlcnQoZmluYWwgU3Vic2NyaWJlciBvYmopIHtcbiAgICAgICAgLy8gR2VuZXJhdGUgdXNlcl9pZCBhbmQgc3Vic2NyaWJlcl9pZFxuICAgICAgICBmaW5hbCBpbnQgdXNlcklkID0gRGJPcGVyYXRpb25zLmdldE5leHRJZChcIlVTRVJcIiwgXCJ1c2VyX2lkXCIpO1xuICAgICAgICBmaW5hbCBpbnQgc3Vic2NyaWJlcklkID0gRGJPcGVyYXRpb25zLmdldE5leHRJZChcIlNVQlNDUklCRVJcIiwgXCJzdWJzY3JpYmVyX2lkXCIpO1xuXG4gICAgICAgIC8vIFNldCB0aGUgZ2VuZXJhdGVkIElEc1xuICAgICAgICBvYmouc2V0VXNlcl9pZCh1c2VySWQpO1xuICAgICAgICBvYmouc2V0U3Vic2NyaWJlcl9pZChzdWJzY3JpYmVySWQpO1xuXG4gICAgICAgIC8vIENyZWF0ZSBTUUwgb3BlcmF0aW9ucyBmb3IgdGhlIHRyYW5zYWN0aW9uXG4gICAgICAgIFNxbE9wZXJhdGlvbltdIG9wZXJhdGlvbnMgPSBuZXcgU3FsT3BlcmF0aW9uW10ge1xuICAgICAgICAgICAgLy8gSW5zZXJ0IGludG8gVVNFUiB0YWJsZVxuICAgICAgICAgICAgbmV3IFNxbE9wZXJhdGlvbigpIHtcbiAgICAgICAgICAgICAgICBAT3ZlcnJpZGVcbiAgICAgICAgICAgICAgICBwdWJsaWMgU3RyaW5nIGdldFNxbCgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiSU5TRVJUIElOVE8gVVNFUih1c2VyX2lkLCB1c2VybmFtZSwgcGFzc3dvcmQsIHJvbGUsIGNyZWF0ZWRfYXQpIFZBTFVFUyAoPywgPywgPywgPywgPylcIjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBAT3ZlcnJpZGVcbiAgICAgICAgICAgICAgICBwdWJsaWMgdm9pZCBzZXRQYXJhbWV0ZXJzKFByZXBhcmVkU3RhdGVtZW50IHBzKSB0aHJvd3MgRXhjZXB0aW9uIHtcbiAgICAgICAgICAgICAgICAgICAgcHMuc2V0SW50KDEsIHVzZXJJZCk7XG4gICAgICAgICAgICAgICAgICAgIHBzLnNldFN0cmluZygyLCBvYmouZ2V0VXNlcm5hbWUoKSk7XG4gICAgICAgICAgICAgICAgICAgIHBzLnNldFN0cmluZygzLCBvYmouZ2V0UGFzc3dvcmQoKSk7XG4gICAgICAgICAgICAgICAgICAgIHBzLnNldFN0cmluZyg0LCBvYmouZ2V0Um9sZSgpKTtcbiAgICAgICAgICAgICAgICAgICAgcHMuc2V0VGltZXN0YW1wKDUsIFRpbWVzdGFtcC52YWx1ZU9mKG9iai5nZXRDcmVhdGVfYXQoKSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIC8vIEluc2VydCBpbnRvIFNVQlNDUklCRVIgdGFibGVcbiAgICAgICAgICAgIG5ldyBTcWxPcGVyYXRpb24oKSB7XG4gICAgICAgICAgICAgICAgQE92ZXJyaWRlXG4gICAgICAgICAgICAgICAgcHVibGljIFN0cmluZyBnZXRTcWwoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIklOU0VSVCBJTlRPIFNVQlNDUklCRVIgKHN1YnNjcmliZXJfaWQsIG5hbWUsIGFkZHJlc3MsIHBob25lLCB1c2VyX2lkKSBWQUxVRVMgKD8sID8sID8sID8sID8pXCI7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgQE92ZXJyaWRlXG4gICAgICAgICAgICAgICAgcHVibGljIHZvaWQgc2V0UGFyYW1ldGVycyhQcmVwYXJlZFN0YXRlbWVudCBwcykgdGhyb3dzIEV4Y2VwdGlvbiB7XG4gICAgICAgICAgICAgICAgICAgIHBzLnNldEludCgxLCBzdWJzY3JpYmVySWQpO1xuICAgICAgICAgICAgICAgICAgICBwcy5zZXRTdHJpbmcoMiwgb2JqLmdldEZ1bGxOYW1lKCkpO1xuICAgICAgICAgICAgICAgICAgICBwcy5zZXRTdHJpbmcoMywgb2JqLmdldEFkZHJlc3MoKSk7XG4gICAgICAgICAgICAgICAgICAgIHBzLnNldFN0cmluZyg0LCBvYmouZ2V0UGhvbmUoKSk7XG4gICAgICAgICAgICAgICAgICAgIHBzLnNldEludCg1LCB1c2VySWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAvLyBFeGVjdXRlIHRoZSB0cmFuc2FjdGlvblxuICAgICAgICBEYk9wZXJhdGlvbnMuZXhlY3V0ZVRyYW5zYWN0aW9uKG9wZXJhdGlvbnMsIFwixJDEg25nIGvDvSB0aMOgbmggY8O0bmchXCIpO1xuICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIHZvaWQgdXBkYXRlKFN1YnNjcmliZXIgb2JqKSB7XG4gICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbihcIk5vdCBzdXBwb3J0ZWQgeWV0LlwiKTsgLy8gR2VuZXJhdGVkIGZyb20gbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzLy4uLiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfMDFGQkxBdjRTdmVFM2hxU2tMbzRCakFQIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiRTovSG9jVGFwLzAyX0pBVkEvMDNfUHJvamVjdC9JbnRlcm5ldCBNYW5nZW1lbnQgU3lzdGVtIiwiZm9sZGVyUm9vdCI6IkU6L0hvY1RhcC8wMl9KQVZBLzAzX1Byb2plY3QvSW50ZXJuZXQgTWFuZ2VtZW50IFN5c3RlbSJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInRpbWVzdGFtcCI6IjIwMjUtMDUtMTNUMTM6MDI6MDUuODI0WiIsInJlc3BvbnNlX3RleHQiOiJMZXQgbWUgY2hlY2sgZm9yIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgVXNlckRBTy5sb2dpbiBtZXRob2QgaW4gdGhlIHByb2plY3Q6XG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiZTVjYzg3YzUtYTM1Yi00ZTc0LWE0NTktMzE1NzZhZTc4NzkzIiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV8wMTZ4RHJ4ZEpETFljQkR3cEJxY05DYXciLCJ0b29sX25hbWUiOiJjb2RlYmFzZS1yZXRyaWV2YWwiLCJpbnB1dF9qc29uIjoie1wiaW5mb3JtYXRpb25fcmVxdWVzdFwiOiBcIkZpbmQgdGhlIGltcGxlbWVudGF0aW9uIG9mIHRoZSBVc2VyREFPLmxvZ2luIG1ldGhvZCBpbiB0aGUgREFPIHBhY2thZ2UuIEkgbmVlZCB0byBzZWUgdGhlIGV4YWN0IGltcGxlbWVudGF0aW9uIG9mIHRoaXMgc3RhdGljIG1ldGhvZCB0aGF0IGlzIHVzZWQgaW4gdGhlIExvZ2luLmphdmEgZmlsZS4gQWxzbyBsb29rIGZvciBhbnkgRGJPcGVyYXRpb25zIGNsYXNzIHRoYXQgbWlnaHQgYmUgdXNlZCBmb3IgZGF0YWJhc2Ugb3BlcmF0aW9ucy5cIn0iLCJtY3Bfc2VydmVyX25hbWUiOiIiLCJtY3BfdG9vbF9uYW1lIjoiIn19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiJMZXQgbWUgY2hlY2sgZm9yIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgVXNlckRBTy5sb2dpbiBtZXRob2QgaW4gdGhlIHByb2plY3Q6XG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJUaGUgZm9sbG93aW5nIGNvZGUgc2VjdGlvbnMgd2VyZSByZXRyaWV2ZWQ6XG5QYXRoOiBzcmMvbWFpbi9qYXZhL2NvbS9zdG9yZS9hcHAvcGV0c3RvcmUvQ29udHJvbGxlcnMvTG9naW5Db250cm9sbGVyLmphdmFcbi4uLlxuXG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5EQU8uVXNlckRBTztcbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLkRBTy5TdGFmZkRBTztcbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLk1vZGVscy5FbnRpdGllcy5Vc2VyO1xuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuTW9kZWxzLkVudGl0aWVzLlN0YWZmO1xuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuU2Vzc2lvbnMuU2Vzc2lvbk1hbmFnZXI7XG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5WaWV3cy5BZG1pbkZhY3Rvcnk7XG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5WaWV3cy5WaWV3RmFjdG9yeTtcbmltcG9ydCBkZS5qZW5zZC5meC5nbHlwaHMuZm9udGF3ZXNvbWUuRm9udEF3ZXNvbWVJY29uO1xuaW1wb3J0IGRlLmplbnNkLmZ4LmdseXBocy5mb250YXdlc29tZS5Gb250QXdlc29tZUljb25WaWV3O1xuaW1wb3J0IGphdmFmeC5meG1sLkZYTUw7XG5pbXBvcnQgamF2YWZ4LmZ4bWwuSW5pdGlhbGl6YWJsZTtcbmltcG9ydCBqYXZhZnguc2NlbmUuY29udHJvbC4qO1xuaW1wb3J0IGphdmFmeC5zY2VuZS5pbnB1dC5Nb3VzZUV2ZW50O1xuaW1wb3J0IGphdmFmeC5zdGFnZS5TdGFnZTtcbmltcG9ydCBqYXZhZnguc2NlbmUuaW1hZ2UuSW1hZ2U7XG5pbXBvcnQgamF2YWZ4LnNjZW5lLmltYWdlLkltYWdlVmlldztcbmltcG9ydCBqYXZhZnguc2NlbmUucGFpbnQuSW1hZ2VQYXR0ZXJuO1xuaW1wb3J0IGphdmEudXRpbC5PYmplY3RzO1xuLi4uXG5cbnB1YmxpYyBjbGFzcyBMb2dpbkNvbnRyb2xsZXIgaW1wbGVtZW50cyBJbml0aWFsaXphYmxlIHtcblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBGb250QXdlc29tZUljb25WaWV3IGV5ZUljb247XG5cbiAgICBARlhNTFxuICAgIHByaXZhdGUgVGV4dEZpZWxkIHNob3dQYXNzd29yZDtcblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBQYXNzd29yZEZpZWxkIHBhc3N3b3JkRmllbGQ7XG5cbiAgICBARlhNTFxuICAgIHByaXZhdGUgVGV4dEZpZWxkIHVzZXJuYW1lRmllbGQ7XG5cbiAgICBARlhNTFxuICAgIHByaXZhdGUgQnV0dG9uIGxvZ2luQnV0dG9uO1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIExhYmVsIGVycm9yTGFiZWw7XG5cbiAgICBARlhNTFxuICAgIHByaXZhdGUgSHlwZXJsaW5rIGZvcmdvdFBhc3N3b3JkTGluaztcblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBJbWFnZVZpZXcgdXNlckltYWdlO1xuXG4gICAgcHJpdmF0ZSBkb3VibGUgeCwgeTtcblxuICAgIFVzZXJEQU8gdXNlckRBTyA9IG5ldyBVc2VyREFPKCk7XG4gICAgU3RhZmZEQU8gc3RhZmZEQU8gPSBTdGFmZkRBTy5nZXRJbnN0YW5jZSgpO1xuICAgIHB1YmxpYyBzdGF0aWMgaW50IGlkU3RhZmZDdXJyZW50O1xuICAgIHB1YmxpYyBzdGF0aWMgaW50IGlkQWRtaW5DdXJyZW50O1xuXG4gICAgcHJpdmF0ZSBTZXNzaW9uTWFuYWdlciBzZXNzaW9uTWFuYWdlciA9IG5ldyBTZXNzaW9uTWFuYWdlcigpO1xuLi4uXG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFTDrG0gdXNlciB0aGVvIHVzZXJuYW1lXG4gICAgICAgICAgICBVc2VyIHVzZXIgPSB1c2VyREFPLmZpbmRCeVVzZXJuYW1lKHVzZXJuYW1lKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYodXNlciA9PSBudWxsIHx8IHVzZXIuZ2V0VXNlcm5hbWUoKSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgQ29udHJvbGxlclV0aWxzLnNob3dBbGVydChBbGVydC5BbGVydFR5cGUuRVJST1IsIFwiTOG7l2lcIiwgXCJUw6puIMSRxINuZyBuaOG6rXAga2jDtG5nIMSRw7puZ1wiKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEtp4buDbSB0cmEgdMOqbiDEkcSDbmcgbmjhuq1wXG4gICAgICAgICAgICBpZiAoIXVzZXIuZ2V0VXNlcm5hbWUoKS5lcXVhbHModXNlcm5hbWUpKSB7XG4gICAgICAgICAgICAgICAgQ29udHJvbGxlclV0aWxzLnNob3dBbGVydChBbGVydC5BbGVydFR5cGUuRVJST1IsIFwiTOG7l2lcIiwgXCJUw6puIMSRxINuZyBuaOG6rXAga2jDtG5nIMSRw7puZ1wiKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEtp4buDbSB0cmEgbeG6rXQga2jhuql1XG4gICAgICAgICAgICBpZighQkNyeXB0LmNoZWNrcHcocGFzc3dvcmQsIHVzZXIuZ2V0UGFzc3dvcmQoKSkpIHtcbiAgICAgICAgICAgICAgICBDb250cm9sbGVyVXRpbHMuc2hvd0FsZXJ0KEFsZXJ0LkFsZXJ0VHlwZS5FUlJPUiwgXCJM4buXaVwiLCBcIk3huq10IGto4bqpdSBraMO0bmcgxJHDum5nXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc2Vzc2lvbk1hbmFnZXIuc2V0Q3VycmVudFVzZXIodXNlcik7XG5cbiAgICAgICAgICAgIFN0YWdlIGN1cnJlbnRTdGFnZSA9IChTdGFnZSkgdXNlcm5hbWVGaWVsZC5nZXRTY2VuZSgpLmdldFdpbmRvdygpO1xuXG4gICAgICAgICAgICBpZih1c2VyLmdldFJvbGUoKS5lcXVhbHMoVXNlci5ST0xFX0FETUlOKSkge1xuICAgICAgICAgICAgICAgIGlkQWRtaW5DdXJyZW50ID0gdXNlci5nZXRVc2VySWQoKTtcbiAgICAgICAgICAgICAgICBBZG1pbkZhY3RvcnkuZ2V0SW5zdGFuY2UoKS5zd2l0Y2hDb250ZW50KFwiZGFzaGJvYXJkXCIsIGN1cnJlbnRTdGFnZSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYodXNlci5nZXRSb2xlKCkuZXF1YWxzKFVzZXIuUk9MRV9VU0VSKSkge1xuICAgICAgICAgICAgICAgIGlkU3RhZmZDdXJyZW50ID0gdXNlci5nZXRVc2VySWQoKTtcbiAgICAgICAgICAgICAgICBTdGFmZiBzdGFmZiA9IHN0YWZmREFPLmZpbmRCeVVzZXJJZCh1c2VyLmdldFVzZXJJZCgpKTtcbiAgICAgICAgICAgICAgICBpZiAoc3RhZmYgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBzZXNzaW9uTWFuYWdlci5zZXRDdXJyZW50U3RhZmYoc3RhZmYpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBWaWV3RmFjdG9yeS5nZXRJbnN0YW5jZSgpLnN3aXRjaENvbnRlbnQoXCJkYXNoYm9hcmRcIiwgY3VycmVudFN0YWdlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgQ29udHJvbGxlclV0aWxzLnNob3dBbGVydChBbGVydC5BbGVydFR5cGUuRVJST1IsIFwiTOG7l2lcIiwgXCJWYWkgdHLDsiBuZ8aw4budaSBkw7luZyBraMO0bmcgaOG7o3AgbOG7h1wiKTtcbiAgICAgICAgICAgICAgICBzZXNzaW9uTWFuYWdlci5jbGVhcigpO1xuICAgICAgICAgICAgfVxuLi4uXG5QYXRoOiBzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9Mb2dpbi5qYXZhXG4uLi5cblxuICAgIHByaXZhdGUgdm9pZCBidG5Mb2dpbkFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5Mb2dpbkFjdGlvblBlcmZvcm1lZFxuICAgICAgICAvLyBUT0RPIGFkZCB5b3VyIGhhbmRsaW5nIGNvZGUgaGVyZTpcbiAgICAgICAgaWYodmFsaWRhdGVGaWVsZHMoKSkge1xuICAgICAgICAgICAgdHJ5e1xuICAgICAgICAgICAgICAgIFN0cmluZyB1c2VybmFtZSA9IHR4dFVzZXJOYW1lLmdldFRleHQoKS50cmltKCk7XG4gICAgICAgICAgICAgICAgU3RyaW5nIHBhc3N3b3JkID0gdHh0UGFzc3dvcmQuZ2V0VGV4dCgpLnRyaW0oKTtcblxuICAgICAgICAgICAgICAgIFVzZXIgdXNlciA9IG51bGw7XG4gICAgICAgICAgICAgICAgYm9vbGVhbiBpc1N1Y2Nlc3MgPSBVc2VyREFPLmxvZ2luKHVzZXJuYW1lLCBwYXNzd29yZCk7XG5cbiAgICAgICAgICAgICAgICBpZihpc1N1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2codGhpcywgXCLEkMSDbmcgbmjhuq1wIHRow6BuaCBjw7RuZyFcIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5JTkZPUk1BVElPTl9NRVNTQUdFKTtcbi8vICAgICAgICAgICAgICAgICAgICBuZXcgTWFpbkZyYW1lKCkuc2V0VmlzaWJsZSh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwb3NlKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2codGhpcywgXCJTYWkgdMOqbiDEkcSDbmcgbmjhuq1wIGhv4bq3YyBt4bqtdCBraOG6qXUuXCIsIFwiTOG7l2lcIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAgICAgICAgICAgICAgfVxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL2NvbS9zdG9yZS9hcHAvcGV0c3RvcmUvREFPL1VzZXJEQU8uamF2YVxucGFja2FnZSBjb20uc3RvcmUuYXBwLnBldHN0b3JlLkRBTztcblxuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuTW9kZWxzLkVudGl0aWVzLlVzZXI7XG5pbXBvcnQgb3JnLm1pbmRyb3QuamJjcnlwdC5CQ3J5cHQ7XG5cbmltcG9ydCBqYXZhLnNxbC4qO1xuaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7XG5pbXBvcnQgamF2YS51dGlsLkJhc2U2NDtcblxucHVibGljIGNsYXNzIFVzZXJEQU8gaW1wbGVtZW50cyBCYXNlREFPPFVzZXIsIEludGVnZXI+IHtcbiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIGludCBpc0R1cGxpY2F0ZSA9IC0xO1xuXG4gICAgcHVibGljIHN0YXRpYyBVc2VyREFPIGdldEluc3RhbmNlKCkge1xuICAgICAgICByZXR1cm4gbmV3IFVzZXJEQU8oKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIFN0cmluZyBlbmNvZGUoU3RyaW5nIHBhc3N3b3JkKSB7XG4vLyAgICAgICAgcmV0dXJuIEJhc2U2NC5nZXRFbmNvZGVyKCkuZW5jb2RlVG9TdHJpbmcocGFzc3dvcmQuZ2V0Qnl0ZXMoKSk7XG4gICAgICAgIHJldHVybiBCQ3J5cHQuaGFzaHB3KHBhc3N3b3JkLCBCQ3J5cHQuZ2Vuc2FsdCgpKTtcbiAgICB9XG5cbi8vICAgIHB1YmxpYyBzdGF0aWMgU3RyaW5nIGRlY29kZShTdHJpbmcgcGFzc3dvcmQpIHtcbi8vICAgICAgICByZXR1cm4gbmV3IFN0cmluZyhCYXNlNjQuZ2V0RGVjb2RlcigpLmRlY29kZShwYXNzd29yZCkpO1xuLy8gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBib29sZWFuIHZlcmlmeShTdHJpbmcgcGFzc3dvcmQsIFN0cmluZyBoYXNoZWQpIHtcbiAgICAgICAgcmV0dXJuIEJDcnlwdC5jaGVja3B3KHBhc3N3b3JkLCBoYXNoZWQpO1xuICAgIH1cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBpbnQgaW5zZXJ0KFVzZXIgZW50aXR5KSB7XG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuICAgICAgICBSZXN1bHRTZXQgcnMgPSBudWxsO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25uID0gRGF0YWJhc2VVdGlsLmdldENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgIFN0cmluZyBzcWwgPSBcIklOU0VSVCBJTlRPIFVzZXJzICh1c2VybmFtZSwgcGFzc3dvcmQsIHJvbGUsIGltYWdlX3VybCwgaXNBY3RpdmUpIFZBTFVFUyAoPywgPywgPywgPywgPylcIjtcbiAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsLCBTdGF0ZW1lbnQuUkVUVVJOX0dFTkVSQVRFRF9LRVlTKTtcblxuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMSwgZW50aXR5LmdldFVzZXJuYW1lKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMiwgZW5jb2RlKGVudGl0eS5nZXRQYXNzd29yZCgpKSk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygzLCBlbnRpdHkuZ2V0Um9sZSgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDQsIGVudGl0eS5nZXRJbWFnZVVybCgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0Qm9vbGVhbig1LCBlbnRpdHkuaXNBY3RpdmUoKSk7XG5cbiAgICAgICAgICAgIGludCBhZmZlY3RlZFJvd3MgPSBzdG10LmV4ZWN1dGVVcGRhdGUoKTtcbiAgICAgICAgICAgIGlmIChhZmZlY3RlZFJvd3MgPT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0cnkgKFJlc3VsdFNldCBnZW5lcmF0ZWRLZXlzID0gc3RtdC5nZXRHZW5lcmF0ZWRLZXlzKCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoZ2VuZXJhdGVkS2V5cy5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdlbmVyYXRlZEtleXMuZ2V0SW50KDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgRGF0YWJhc2VVdGlsLmNsb3NlUmVzb3VyY2VzKHJzLCBzdG10LCBjb25uKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBpbnQgdXBkYXRlKFVzZXIgZW50aXR5KSB7XG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25uID0gRGF0YWJhc2VVdGlsLmdldENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgIFN0cmluZyBzcWwgPSBcIlVQREFURSBVc2VycyBTRVQgdXNlcm5hbWUgPSA/LCBwYXNzd29yZCA9ID8sIHJvbGUgPSA/LCBpbWFnZV91cmwgPSA/LCBpc0FjdGl2ZSA9ID8gV0hFUkUgdXNlcl9pZCA9ID9cIjtcbiAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsKTtcblxuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMSwgZW50aXR5LmdldFVzZXJuYW1lKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMiwgZW5jb2RlKGVudGl0eS5nZXRQYXNzd29yZCgpKSk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygzLCBlbnRpdHkuZ2V0Um9sZSgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDQsIGVudGl0eS5nZXRJbWFnZVVybCgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0Qm9vbGVhbig1LCBlbnRpdHkuaXNBY3RpdmUoKSk7XG4gICAgICAgICAgICBzdG10LnNldEludCg2LCBlbnRpdHkuZ2V0VXNlcklkKCkpO1xuXG4gICAgICAgICAgICByZXR1cm4gc3RtdC5leGVjdXRlVXBkYXRlKCk7XG4gICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBEYXRhYmFzZVV0aWwuY2xvc2VSZXNvdXJjZXMoc3RtdCwgY29ubik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgaW50IHVwZGF0ZShVc2VyIGVudGl0eSwgYm9vbGVhbiBpc1VzZXJuYW1lQ2hhbmdlZCkge1xuICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgICAgICBQcmVwYXJlZFN0YXRlbWVudCBzdG10ID0gbnVsbDtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29ubiA9IERhdGFiYXNlVXRpbC5nZXRDb25uZWN0aW9uKCk7XG4gICAgICAgICAgICBTdHJpbmcgc3FsID0gXCJVUERBVEUgVXNlcnMgU0VUIHVzZXJuYW1lID0gPywgcGFzc3dvcmQgPSA/LCByb2xlID0gPywgaW1hZ2VfdXJsID0gPywgaXNBY3RpdmUgPSA/IFdIRVJFIHVzZXJfaWQgPSA/XCI7XG4gICAgICAgICAgICBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHNxbCk7XG5cbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDEsIGVudGl0eS5nZXRVc2VybmFtZSgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDIsIGVuY29kZShlbnRpdHkuZ2V0UGFzc3dvcmQoKSkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMywgZW50aXR5LmdldFJvbGUoKSk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZyg0LCBlbnRpdHkuZ2V0SW1hZ2VVcmwoKSk7XG4gICAgICAgICAgICBzdG10LnNldEJvb2xlYW4oNSwgZW50aXR5LmlzQWN0aXZlKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRJbnQoNiwgZW50aXR5LmdldFVzZXJJZCgpKTtcblxuICAgICAgICAgICAgcmV0dXJuIHN0bXQuZXhlY3V0ZVVwZGF0ZSgpO1xuICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgRGF0YWJhc2VVdGlsLmNsb3NlUmVzb3VyY2VzKHN0bXQsIGNvbm4pO1xuICAgICAgICB9XG4gICAgfVxuLi4uXG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgQXJyYXlMaXN0PFVzZXI+IGZpbmRBbGwoKSB7XG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuICAgICAgICBSZXN1bHRTZXQgcnMgPSBudWxsO1xuICAgICAgICBBcnJheUxpc3Q8VXNlcj4gdXNlcnMgPSBuZXcgQXJyYXlMaXN0PD4oKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29ubiA9IERhdGFiYXNlVXRpbC5nZXRDb25uZWN0aW9uKCk7XG4gICAgICAgICAgICBTdHJpbmcgc3FsID0gXCJTRUxFQ1QgKiBGUk9NIFVzZXJzXCI7XG4gICAgICAgICAgICBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHNxbCk7XG4gICAgICAgICAgICBycyA9IHN0bXQuZXhlY3V0ZVF1ZXJ5KCk7XG5cbiAgICAgICAgICAgIHdoaWxlIChycy5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICBVc2VyIHVzZXIgPSBuZXcgVXNlcigpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0VXNlcklkKHJzLmdldEludChcInVzZXJfaWRcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0VXNlcm5hbWUocnMuZ2V0U3RyaW5nKFwidXNlcm5hbWVcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0UGFzc3dvcmQocnMuZ2V0U3RyaW5nKFwicGFzc3dvcmRcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0Um9sZShycy5nZXRTdHJpbmcoXCJyb2xlXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldEltYWdlVXJsKHJzLmdldFN0cmluZyhcImltYWdlX3VybFwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRBY3RpdmUocnMuZ2V0Qm9vbGVhbihcImlzQWN0aXZlXCIpKTtcbiAgICAgICAgICAgICAgICB1c2Vycy5hZGQodXNlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgRGF0YWJhc2VVdGlsLmNsb3NlUmVzb3VyY2VzKHJzLCBzdG10LCBjb25uKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdXNlcnM7XG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIFVzZXIgZmluZEJ5SWQoSW50ZWdlciBpZCkge1xuICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgICAgICBQcmVwYXJlZFN0YXRlbWVudCBzdG10ID0gbnVsbDtcbiAgICAgICAgUmVzdWx0U2V0IHJzID0gbnVsbDtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29ubiA9IERhdGFiYXNlVXRpbC5nZXRDb25uZWN0aW9uKCk7XG4gICAgICAgICAgICBTdHJpbmcgc3FsID0gXCJTRUxFQ1QgKiBGUk9NIFVzZXJzIFdIRVJFIHVzZXJfaWQgPSA/XCI7XG4gICAgICAgICAgICBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHNxbCk7XG4gICAgICAgICAgICBzdG10LnNldEludCgxLCBpZCk7XG4gICAgICAgICAgICBycyA9IHN0bXQuZXhlY3V0ZVF1ZXJ5KCk7XG5cbiAgICAgICAgICAgIGlmIChycy5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICBVc2VyIHVzZXIgPSBuZXcgVXNlcigpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0VXNlcklkKHJzLmdldEludChcInVzZXJfaWRcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0VXNlcm5hbWUocnMuZ2V0U3RyaW5nKFwidXNlcm5hbWVcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0UGFzc3dvcmQocnMuZ2V0U3RyaW5nKFwicGFzc3dvcmRcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0Um9sZShycy5nZXRTdHJpbmcoXCJyb2xlXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldEltYWdlVXJsKHJzLmdldFN0cmluZyhcImltYWdlX3VybFwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRBY3RpdmUocnMuZ2V0Qm9vbGVhbihcImlzQWN0aXZlXCIpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdXNlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBEYXRhYmFzZVV0aWwuY2xvc2VSZXNvdXJjZXMocnMsIHN0bXQsIGNvbm4pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbi4uLlxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25uID0gRGF0YWJhc2VVdGlsLmdldENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgIFN0cmluZyBzcWwgPSBcIlNFTEVDVCAqIEZST00gVXNlcnMgV0hFUkUgXCIgKyBjb25kaXRpb247XG4gICAgICAgICAgICBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHNxbCk7XG4gICAgICAgICAgICBycyA9IHN0bXQuZXhlY3V0ZVF1ZXJ5KCk7XG5cbiAgICAgICAgICAgIHdoaWxlIChycy5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICBVc2VyIHVzZXIgPSBuZXcgVXNlcigpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0VXNlcklkKHJzLmdldEludChcInVzZXJfaWRcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0VXNlcm5hbWUocnMuZ2V0U3RyaW5nKFwidXNlcm5hbWVcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0UGFzc3dvcmQocnMuZ2V0U3RyaW5nKFwicGFzc3dvcmRcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0Um9sZShycy5nZXRTdHJpbmcoXCJyb2xlXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldEltYWdlVXJsKHJzLmdldFN0cmluZyhcImltYWdlX3VybFwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRBY3RpdmUocnMuZ2V0Qm9vbGVhbihcImlzQWN0aXZlXCIpKTtcbiAgICAgICAgICAgICAgICB1c2Vycy5hZGQodXNlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgRGF0YWJhc2VVdGlsLmNsb3NlUmVzb3VyY2VzKHJzLCBzdG10LCBjb25uKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdXNlcnM7XG4gICAgfVxuXG4gICAgcHVibGljIFVzZXIgZmluZEJ5VXNlcm5hbWUoU3RyaW5nIHVzZXJuYW1lKSB7XG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuICAgICAgICBSZXN1bHRTZXQgcnMgPSBudWxsO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25uID0gRGF0YWJhc2VVdGlsLmdldENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgIFN0cmluZyBzcWwgPSBcIlNFTEVDVCAqIEZST00gVXNlcnMgV0hFUkUgdXNlcm5hbWUgPSA/XCI7XG4gICAgICAgICAgICBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHNxbCk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygxLCB1c2VybmFtZSk7XG4gICAgICAgICAgICBycyA9IHN0bXQuZXhlY3V0ZVF1ZXJ5KCk7XG5cbiAgICAgICAgICAgIGlmIChycy5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICBVc2VyIHVzZXIgPSBuZXcgVXNlcigpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0VXNlcklkKHJzLmdldEludChcInVzZXJfaWRcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0VXNlcm5hbWUocnMuZ2V0U3RyaW5nKFwidXNlcm5hbWVcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0UGFzc3dvcmQocnMuZ2V0U3RyaW5nKFwicGFzc3dvcmRcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0Um9sZShycy5nZXRTdHJpbmcoXCJyb2xlXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldEltYWdlVXJsKHJzLmdldFN0cmluZyhcImltYWdlX3VybFwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRBY3RpdmUocnMuZ2V0Qm9vbGVhbihcImlzQWN0aXZlXCIpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdXNlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBEYXRhYmFzZVV0aWwuY2xvc2VSZXNvdXJjZXMocnMsIHN0bXQsIGNvbm4pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHB1YmxpYyBVc2VyIGZpbmRCeUVtYWlsKFN0cmluZyBlbWFpbCkge1xuICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgICAgICBQcmVwYXJlZFN0YXRlbWVudCBzdG10ID0gbnVsbDtcbiAgICAgICAgUmVzdWx0U2V0IHJzID0gbnVsbDtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gS2nhu4NtIHRyYSBlbWFpbCBjw7MgdOG7k24gdOG6oWkgdHJvbmcgYuG6o25nIFN0YWZmcyBraMO0bmdcbiAgICAgICAgICAgIGNvbm4gPSBEYXRhYmFzZVV0aWwuZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgICAgICAgU3RyaW5nIGNoZWNrU3FsID0gXCJTRUxFQ1QgKiBGUk9NIFN0YWZmcyBXSEVSRSBlbWFpbCA9ID9cIjtcbiAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoY2hlY2tTcWwpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMSwgZW1haWwpO1xuICAgICAgICAgICAgcnMgPSBzdG10LmV4ZWN1dGVRdWVyeSgpO1xuXG4gICAgICAgICAgICAvLyBO4bq/dSBlbWFpbCB04buTbiB04bqhaSwgbOG6pXkgdGjDtG5nIHRpbiB1c2VyXG4gICAgICAgICAgICBTdHJpbmcgc3FsID0gXCJTRUxFQ1QgdS4qIEZST00gVXNlcnMgdSBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICBcIkpPSU4gU3RhZmZzIHMgT04gdS51c2VyX2lkID0gcy51c2VyX2lkIFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiV0hFUkUgcy5lbWFpbCA9ID9cIjtcbiAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDEsIGVtYWlsKTtcblxuICAgICAgICAgICAgcnMgPSBzdG10LmV4ZWN1dGVRdWVyeSgpO1xuXG4gICAgICAgICAgICBpZiAocnMubmV4dCgpKSB7XG4gICAgICAgICAgICAgICAgVXNlciB1c2VyID0gbmV3IFVzZXIoKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldFVzZXJJZChycy5nZXRJbnQoXCJ1c2VyX2lkXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldFVzZXJuYW1lKHJzLmdldFN0cmluZyhcInVzZXJuYW1lXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldFBhc3N3b3JkKHJzLmdldFN0cmluZyhcInBhc3N3b3JkXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldFJvbGUocnMuZ2V0U3RyaW5nKFwicm9sZVwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRJbWFnZVVybChycy5nZXRTdHJpbmcoXCJpbWFnZV91cmxcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0QWN0aXZlKHJzLmdldEJvb2xlYW4oXCJpc0FjdGl2ZVwiKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVzZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJTUUwgRXJyb3I6IFwiICsgZS5nZXRNZXNzYWdlKCkpO1xuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIERhdGFiYXNlVXRpbC5jbG9zZVJlc291cmNlcyhycywgc3RtdCwgY29ubik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcHVibGljIGJvb2xlYW4gY2hlY2tEdXBsaWNhdGUoU3RyaW5nIHVzZXJuYW1lLCBpbnQgZXhjbHVkZVVzZXJJZCkge1xuICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgICAgICBQcmVwYXJlZFN0YXRlbWVudCBzdG10ID0gbnVsbDtcbiAgICAgICAgUmVzdWx0U2V0IHJzID0gbnVsbDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbm4gPSBEYXRhYmFzZVV0aWwuZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgICAgICAgU3RyaW5nIHNxbCA9IFwiU0VMRUNUIENPVU5UKCopIEZST00gVXNlcnMgV0hFUkUgTE9XRVIodXNlcm5hbWUpID0gTE9XRVIoPylcIjtcbiAgICAgICAgICAgIGlmIChleGNsdWRlVXNlcklkID49IDApIHtcbiAgICAgICAgICAgICAgICBzcWwgKz0gXCIgQU5EIHVzZXJfaWQgPD4gP1wiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3RtdCA9IGNvbm4ucHJlcGFyZVN0YXRlbWVudChzcWwpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMSwgdXNlcm5hbWUpO1xuICAgICAgICAgICAgaWYgKGV4Y2x1ZGVVc2VySWQgPj0gMCkge1xuICAgICAgICAgICAgICAgIHN0bXQuc2V0SW50KDIsIGV4Y2x1ZGVVc2VySWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcnMgPSBzdG10LmV4ZWN1dGVRdWVyeSgpO1xuICAgICAgICAgICAgaWYgKHJzLm5leHQoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBycy5nZXRJbnQoMSkgPiAwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIERhdGFiYXNlVXRpbC5jbG9zZVJlc291cmNlcyhycywgc3RtdCwgY29ubik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHB1YmxpYyBib29sZWFuIGNoZWNrVXNlcklEKFVzZXIgZW50aXR5KSB7XG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuICAgICAgICBSZXN1bHRTZXQgcnMgPSBudWxsO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25uID0gRGF0YWJhc2VVdGlsLmdldENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgIFN0cmluZyBzcWwgPSBcIlNFTEVDVCBDT1VOVCgqKSBGUk9NIFVzZXJzIFdIRVJFIHVzZXJfaWQgPSA/XCI7XG4gICAgICAgICAgICBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHNxbCk7XG4gICAgICAgICAgICBzdG10LnNldEludCgxLCBlbnRpdHkuZ2V0VXNlcklkKCkpO1xuICAgICAgICAgICAgcnMgPSBzdG10LmV4ZWN1dGVRdWVyeSgpO1xuXG4gICAgICAgICAgICBpZiAocnMubmV4dCgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJzLmdldEludCgxKSA+IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgRGF0YWJhc2VVdGlsLmNsb3NlUmVzb3VyY2VzKHJzLCBzdG10LCBjb25uKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuLi4uXG5QYXRoOiBzcmMvREFPL1VzZXJEQU8uamF2YVxuLypcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvTGljZW5zZXMvbGljZW5zZS1kZWZhdWx0LnR4dCB0byBjaGFuZ2UgdGhpcyBsaWNlbnNlXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ2xhc3MuamF2YSB0byBlZGl0IHRoaXMgdGVtcGxhdGVcbiAqL1xucGFja2FnZSBEQU87XG5cbmltcG9ydCBNb2RlbC5Vc2VyO1xuaW1wb3J0IGphdmEudXRpbC5MaXN0O1xuXG4vKipcbiAqXG4gKiBAYXV0aG9yIE5nb2MgVGhhb1xuICovXG5wdWJsaWMgY2xhc3MgVXNlckRBT3tcblxuICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBpbnNlcnQoVXNlciBvYmopIHtcbiAgICAgICAgXG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyB2b2lkIHVwZGF0ZShVc2VyIG9iaikge1xuICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oXCJOb3Qgc3VwcG9ydGVkIHlldC5cIik7IC8vIEdlbmVyYXRlZCBmcm9tIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9Db2RlL0dlbmVyYXRlZE1ldGhvZEJvZHlcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIHZvaWQgZGVsZXRlKGludCBpZCkge1xuICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oXCJOb3Qgc3VwcG9ydGVkIHlldC5cIik7IC8vIEdlbmVyYXRlZCBmcm9tIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9Db2RlL0dlbmVyYXRlZE1ldGhvZEJvZHlcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIFVzZXIgZ2V0QnlJZChpbnQgaWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpOyAvLyBHZW5lcmF0ZWQgZnJvbSBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ29kZS9HZW5lcmF0ZWRNZXRob2RCb2R5XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBMaXN0PFVzZXI+IGdldEFsbCgpIHtcbiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpOyAvLyBHZW5lcmF0ZWQgZnJvbSBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ29kZS9HZW5lcmF0ZWRNZXRob2RCb2R5XG4gICAgfVxuICAgIFxufVxuLi4uXG5QYXRoOiBzcmMvREFPL1N1YnNjcmliZXJEQU8uamF2YVxuLypcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvTGljZW5zZXMvbGljZW5zZS1kZWZhdWx0LnR4dCB0byBjaGFuZ2UgdGhpcyBsaWNlbnNlXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ2xhc3MuamF2YSB0byBlZGl0IHRoaXMgdGVtcGxhdGVcbiAqL1xucGFja2FnZSBEQU87XG5cbmltcG9ydCBNb2RlbC5TdWJzY3JpYmVyO1xuaW1wb3J0IGphdmEudXRpbC5MaXN0O1xuaW1wb3J0IGphdmEuc3FsLlByZXBhcmVkU3RhdGVtZW50O1xuaW1wb3J0IGphdmEuc3FsLlRpbWVzdGFtcDtcbmltcG9ydCBEQU8uRGJPcGVyYXRpb25zLlNxbE9wZXJhdGlvbjtcblxuLyoqXG4gKlxuICogQGF1dGhvciBOZ29jIFRoYW9cbiAqL1xucHVibGljIGNsYXNzIFN1YnNjcmliZXJEQU97XG5cbiAgICBwdWJsaWMgc3RhdGljIHZvaWQgaW5zZXJ0KGZpbmFsIFN1YnNjcmliZXIgb2JqKSB7XG4gICAgICAgIC8vIEdlbmVyYXRlIHVzZXJfaWQgYW5kIHN1YnNjcmliZXJfaWRcbiAgICAgICAgZmluYWwgaW50IHVzZXJJZCA9IERiT3BlcmF0aW9ucy5nZXROZXh0SWQoXCJVU0VSXCIsIFwidXNlcl9pZFwiKTtcbiAgICAgICAgZmluYWwgaW50IHN1YnNjcmliZXJJZCA9IERiT3BlcmF0aW9ucy5nZXROZXh0SWQoXCJTVUJTQ1JJQkVSXCIsIFwic3Vic2NyaWJlcl9pZFwiKTtcblxuICAgICAgICAvLyBTZXQgdGhlIGdlbmVyYXRlZCBJRHNcbiAgICAgICAgb2JqLnNldFVzZXJfaWQodXNlcklkKTtcbiAgICAgICAgb2JqLnNldFN1YnNjcmliZXJfaWQoc3Vic2NyaWJlcklkKTtcbi4uLlxuXG4gICAgICAgICAgICAvLyBJbnNlcnQgaW50byBTVUJTQ1JJQkVSIHRhYmxlXG4gICAgICAgICAgICBuZXcgU3FsT3BlcmF0aW9uKCkge1xuICAgICAgICAgICAgICAgIEBPdmVycmlkZVxuICAgICAgICAgICAgICAgIHB1YmxpYyBTdHJpbmcgZ2V0U3FsKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJJTlNFUlQgSU5UTyBTVUJTQ1JJQkVSIChzdWJzY3JpYmVyX2lkLCBuYW1lLCBhZGRyZXNzLCBwaG9uZSwgdXNlcl9pZCkgVkFMVUVTICg/LCA/LCA/LCA/LCA/KVwiO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIEBPdmVycmlkZVxuICAgICAgICAgICAgICAgIHB1YmxpYyB2b2lkIHNldFBhcmFtZXRlcnMoUHJlcGFyZWRTdGF0ZW1lbnQgcHMpIHRocm93cyBFeGNlcHRpb24ge1xuICAgICAgICAgICAgICAgICAgICBwcy5zZXRJbnQoMSwgc3Vic2NyaWJlcklkKTtcbiAgICAgICAgICAgICAgICAgICAgcHMuc2V0U3RyaW5nKDIsIG9iai5nZXRGdWxsTmFtZSgpKTtcbiAgICAgICAgICAgICAgICAgICAgcHMuc2V0U3RyaW5nKDMsIG9iai5nZXRBZGRyZXNzKCkpO1xuICAgICAgICAgICAgICAgICAgICBwcy5zZXRTdHJpbmcoNCwgb2JqLmdldFBob25lKCkpO1xuICAgICAgICAgICAgICAgICAgICBwcy5zZXRJbnQoNSwgdXNlcklkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gRXhlY3V0ZSB0aGUgdHJhbnNhY3Rpb25cbiAgICAgICAgRGJPcGVyYXRpb25zLmV4ZWN1dGVUcmFuc2FjdGlvbihvcGVyYXRpb25zLCBcIsSQxINuZyBrw70gdGjDoG5oIGPDtG5nIVwiKTtcbiAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyB2b2lkIHVwZGF0ZShTdWJzY3JpYmVyIG9iaikge1xuICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oXCJOb3Qgc3VwcG9ydGVkIHlldC5cIik7IC8vIEdlbmVyYXRlZCBmcm9tIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9Db2RlL0dlbmVyYXRlZE1ldGhvZEJvZHlcbiAgICB9XG4uLi5cblBhdGg6IHNyYy9EQU8vQ29ubmVjdGlvblByb3ZpZGVyLmphdmFcbi4uLlxuXG4gICAgcHVibGljIHN0YXRpYyBDb25uZWN0aW9uIGdldENvbm4oKXtcbiAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQXR0ZW1wdGluZyB0byBjb25uZWN0IHRvIGRhdGFiYXNlLi4uXCIpO1xuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiVVJMOiBcIiArIFVSTCk7XG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJVc2VyOiBcIiArIFVTRVIpO1xuXG4gICAgICAgICAgICBDbGFzcy5mb3JOYW1lKFwiY29tLm15c3FsLmNqLmpkYmMuRHJpdmVyXCIpO1xuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRHJpdmVyIGxvYWRlZCBzdWNjZXNzZnVsbHlcIik7XG5cbiAgICAgICAgICAgIGNvbm4gPSBEcml2ZXJNYW5hZ2VyLmdldENvbm5lY3Rpb24oVVJMLCBVU0VSLCBQQVNTV09SRCk7XG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJDb25uZWN0aW9uIGVzdGFibGlzaGVkOiBcIiArIChjb25uICE9IG51bGwpKTtcblxuICAgICAgICB9IGNhdGNoIChDbGFzc05vdEZvdW5kRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIFN5c3RlbS5lcnIucHJpbnRsbihcIk15U1FMIEpEQkMgRHJpdmVyIG5vdCBmb3VuZC5cIik7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgU3lzdGVtLmVyci5wcmludGxuKFwiQ29ubmVjdGlvbiBmYWlsZWQ6IFwiICsgZS5nZXRNZXNzYWdlKCkpO1xuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29ubjtcbiAgICB9XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvY29tL3N0b3JlL2FwcC9wZXRzdG9yZS9EQU8vUGV0REFPLmphdmFcbi4uLlxuXG4gICAgLy8gdGltIGtpZW0gdGhlbyB0ZW4sIGxvYWksIGdpb25nXG4gICAgcHVibGljIEFycmF5TGlzdDxQZXQ+IHNlYXJjaFBldHMoU3RyaW5nIHNlYXJjaFRleHQsIGludCBsaW1pdCkge1xuICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgICAgICBQcmVwYXJlZFN0YXRlbWVudCBzdG10ID0gbnVsbDtcbiAgICAgICAgUmVzdWx0U2V0IHJzID0gbnVsbDtcbiAgICAgICAgQXJyYXlMaXN0PFBldD4gcGV0TGlzdCA9IG5ldyBBcnJheUxpc3Q8PigpO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25uID0gRGF0YWJhc2VVdGlsLmdldENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgIFN0cmluZyBzcWwgPSBcIlNFTEVDVCAqIEZST00gUGV0cyBXSEVSRSBMT1dFUihuYW1lKSBMSUtFID8gTElNSVQgP1wiO1xuXG4gICAgICAgICAgICBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHNxbCk7XG4gICAgICAgICAgICBTdHJpbmcgc2VhcmNoUGF0dGVybiA9IFwiJVwiICsgc2VhcmNoVGV4dC50b0xvd2VyQ2FzZSgpICsgXCIlXCI7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygxLCBzZWFyY2hQYXR0ZXJuKTtcbiAgICAgICAgICAgIHN0bXQuc2V0SW50KDIsIGxpbWl0KTtcblxuICAgICAgICAgICAgcnMgPSBzdG10LmV4ZWN1dGVRdWVyeSgpO1xuXG4gICAgICAgICAgICB3aGlsZSAocnMubmV4dCgpKSB7XG4gICAgICAgICAgICAgICAgcGUuLi4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1XzAxR2FvNTRmalNkMXo5TEtqdG1aN3AxciJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkU6L0hvY1RhcC8wMl9KQVZBLzAzX1Byb2plY3QvSW50ZXJuZXQgTWFuZ2VtZW50IFN5c3RlbSIsImZvbGRlclJvb3QiOiJFOi9Ib2NUYXAvMDJfSkFWQS8wM19Qcm9qZWN0L0ludGVybmV0IE1hbmdlbWVudCBTeXN0ZW0ifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJ0aW1lc3RhbXAiOiIyMDI1LTA1LTEzVDEzOjAyOjE5LjUxMFoiLCJyZXNwb25zZV90ZXh0IjoiTGV0IG1lIGNoZWNrIGZvciB0aGUgaW1wbGVtZW50YXRpb24gb2YgdGhlIFVzZXJEQU8ubG9naW4gbWV0aG9kIGluIHRoZSBwcm9qZWN0OlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6ImJhZjJlNTZlLTc3MzItNDM3Mi05NjgyLWUzNTdjYjRlNGM4MyIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfMDFXMzV4VmhoNGcyd3NNWHJ3c0hBQjlKIiwidG9vbF9uYW1lIjoic3RyLXJlcGxhY2UtZWRpdG9yIiwiaW5wdXRfanNvbiI6IntcImNvbW1hbmRcIjogXCJ2aWV3XCIsIFwicGF0aFwiOiBcInNyYy9EQU8vVXNlckRBTy5qYXZhXCJ9IiwibWNwX3NlcnZlcl9uYW1lIjoiIiwibWNwX3Rvb2xfbmFtZSI6IiJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiTGV0IG1lIGNoZWNrIGZvciB0aGUgaW1wbGVtZW50YXRpb24gb2YgdGhlIFVzZXJEQU8ubG9naW4gbWV0aG9kIGluIHRoZSBwcm9qZWN0OlxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiVGhlIGZvbGxvd2luZyBjb2RlIHNlY3Rpb25zIHdlcmUgcmV0cmlldmVkOlxuUGF0aDogc3JjL21haW4vamF2YS9jb20vc3RvcmUvYXBwL3BldHN0b3JlL0RBTy9Vc2VyREFPLmphdmFcbnBhY2thZ2UgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5EQU87XG5cbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLk1vZGVscy5FbnRpdGllcy5Vc2VyO1xuaW1wb3J0IG9yZy5taW5kcm90LmpiY3J5cHQuQkNyeXB0O1xuXG5pbXBvcnQgamF2YS5zcWwuKjtcbmltcG9ydCBqYXZhLnV0aWwuQXJyYXlMaXN0O1xuaW1wb3J0IGphdmEudXRpbC5CYXNlNjQ7XG5cbnB1YmxpYyBjbGFzcyBVc2VyREFPIGltcGxlbWVudHMgQmFzZURBTzxVc2VyLCBJbnRlZ2VyPiB7XG4gICAgcHVibGljIHN0YXRpYyBmaW5hbCBpbnQgaXNEdXBsaWNhdGUgPSAtMTtcblxuICAgIHB1YmxpYyBzdGF0aWMgVXNlckRBTyBnZXRJbnN0YW5jZSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBVc2VyREFPKCk7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBTdHJpbmcgZW5jb2RlKFN0cmluZyBwYXNzd29yZCkge1xuLy8gICAgICAgIHJldHVybiBCYXNlNjQuZ2V0RW5jb2RlcigpLmVuY29kZVRvU3RyaW5nKHBhc3N3b3JkLmdldEJ5dGVzKCkpO1xuICAgICAgICByZXR1cm4gQkNyeXB0Lmhhc2hwdyhwYXNzd29yZCwgQkNyeXB0LmdlbnNhbHQoKSk7XG4gICAgfVxuXG4vLyAgICBwdWJsaWMgc3RhdGljIFN0cmluZyBkZWNvZGUoU3RyaW5nIHBhc3N3b3JkKSB7XG4vLyAgICAgICAgcmV0dXJuIG5ldyBTdHJpbmcoQmFzZTY0LmdldERlY29kZXIoKS5kZWNvZGUocGFzc3dvcmQpKTtcbi8vICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgYm9vbGVhbiB2ZXJpZnkoU3RyaW5nIHBhc3N3b3JkLCBTdHJpbmcgaGFzaGVkKSB7XG4gICAgICAgIHJldHVybiBCQ3J5cHQuY2hlY2twdyhwYXNzd29yZCwgaGFzaGVkKTtcbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgaW50IGluc2VydChVc2VyIGVudGl0eSkge1xuICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgICAgICBQcmVwYXJlZFN0YXRlbWVudCBzdG10ID0gbnVsbDtcbiAgICAgICAgUmVzdWx0U2V0IHJzID0gbnVsbDtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29ubiA9IERhdGFiYXNlVXRpbC5nZXRDb25uZWN0aW9uKCk7XG4gICAgICAgICAgICBTdHJpbmcgc3FsID0gXCJJTlNFUlQgSU5UTyBVc2VycyAodXNlcm5hbWUsIHBhc3N3b3JkLCByb2xlLCBpbWFnZV91cmwsIGlzQWN0aXZlKSBWQUxVRVMgKD8sID8sID8sID8sID8pXCI7XG4gICAgICAgICAgICBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHNxbCwgU3RhdGVtZW50LlJFVFVSTl9HRU5FUkFURURfS0VZUyk7XG5cbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDEsIGVudGl0eS5nZXRVc2VybmFtZSgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDIsIGVuY29kZShlbnRpdHkuZ2V0UGFzc3dvcmQoKSkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMywgZW50aXR5LmdldFJvbGUoKSk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZyg0LCBlbnRpdHkuZ2V0SW1hZ2VVcmwoKSk7XG4gICAgICAgICAgICBzdG10LnNldEJvb2xlYW4oNSwgZW50aXR5LmlzQWN0aXZlKCkpO1xuXG4gICAgICAgICAgICBpbnQgYWZmZWN0ZWRSb3dzID0gc3RtdC5leGVjdXRlVXBkYXRlKCk7XG4gICAgICAgICAgICBpZiAoYWZmZWN0ZWRSb3dzID09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdHJ5IChSZXN1bHRTZXQgZ2VuZXJhdGVkS2V5cyA9IHN0bXQuZ2V0R2VuZXJhdGVkS2V5cygpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGdlbmVyYXRlZEtleXMubmV4dCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBnZW5lcmF0ZWRLZXlzLmdldEludCgxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIERhdGFiYXNlVXRpbC5jbG9zZVJlc291cmNlcyhycywgc3RtdCwgY29ubik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgaW50IHVwZGF0ZShVc2VyIGVudGl0eSkge1xuICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgICAgICBQcmVwYXJlZFN0YXRlbWVudCBzdG10ID0gbnVsbDtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29ubiA9IERhdGFiYXNlVXRpbC5nZXRDb25uZWN0aW9uKCk7XG4gICAgICAgICAgICBTdHJpbmcgc3FsID0gXCJVUERBVEUgVXNlcnMgU0VUIHVzZXJuYW1lID0gPywgcGFzc3dvcmQgPSA/LCByb2xlID0gPywgaW1hZ2VfdXJsID0gPywgaXNBY3RpdmUgPSA/IFdIRVJFIHVzZXJfaWQgPSA/XCI7XG4gICAgICAgICAgICBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHNxbCk7XG5cbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDEsIGVudGl0eS5nZXRVc2VybmFtZSgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDIsIGVuY29kZShlbnRpdHkuZ2V0UGFzc3dvcmQoKSkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMywgZW50aXR5LmdldFJvbGUoKSk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZyg0LCBlbnRpdHkuZ2V0SW1hZ2VVcmwoKSk7XG4gICAgICAgICAgICBzdG10LnNldEJvb2xlYW4oNSwgZW50aXR5LmlzQWN0aXZlKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRJbnQoNiwgZW50aXR5LmdldFVzZXJJZCgpKTtcblxuICAgICAgICAgICAgcmV0dXJuIHN0bXQuZXhlY3V0ZVVwZGF0ZSgpO1xuICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgRGF0YWJhc2VVdGlsLmNsb3NlUmVzb3VyY2VzKHN0bXQsIGNvbm4pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGludCB1cGRhdGUoVXNlciBlbnRpdHksIGJvb2xlYW4gaXNVc2VybmFtZUNoYW5nZWQpIHtcbiAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcbiAgICAgICAgUHJlcGFyZWRTdGF0ZW1lbnQgc3RtdCA9IG51bGw7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbm4gPSBEYXRhYmFzZVV0aWwuZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgICAgICAgU3RyaW5nIHNxbCA9IFwiVVBEQVRFIFVzZXJzIFNFVCB1c2VybmFtZSA9ID8sIHBhc3N3b3JkID0gPywgcm9sZSA9ID8sIGltYWdlX3VybCA9ID8sIGlzQWN0aXZlID0gPyBXSEVSRSB1c2VyX2lkID0gP1wiO1xuICAgICAgICAgICAgc3RtdCA9IGNvbm4ucHJlcGFyZVN0YXRlbWVudChzcWwpO1xuXG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygxLCBlbnRpdHkuZ2V0VXNlcm5hbWUoKSk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygyLCBlbmNvZGUoZW50aXR5LmdldFBhc3N3b3JkKCkpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDMsIGVudGl0eS5nZXRSb2xlKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoNCwgZW50aXR5LmdldEltYWdlVXJsKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRCb29sZWFuKDUsIGVudGl0eS5pc0FjdGl2ZSgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0SW50KDYsIGVudGl0eS5nZXRVc2VySWQoKSk7XG5cbiAgICAgICAgICAgIHJldHVybiBzdG10LmV4ZWN1dGVVcGRhdGUoKTtcbiAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIERhdGFiYXNlVXRpbC5jbG9zZVJlc291cmNlcyhzdG10LCBjb25uKTtcbiAgICAgICAgfVxuICAgIH1cbi4uLlxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIEFycmF5TGlzdDxVc2VyPiBmaW5kQWxsKCkge1xuICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgICAgICBQcmVwYXJlZFN0YXRlbWVudCBzdG10ID0gbnVsbDtcbiAgICAgICAgUmVzdWx0U2V0IHJzID0gbnVsbDtcbiAgICAgICAgQXJyYXlMaXN0PFVzZXI+IHVzZXJzID0gbmV3IEFycmF5TGlzdDw+KCk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbm4gPSBEYXRhYmFzZVV0aWwuZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgICAgICAgU3RyaW5nIHNxbCA9IFwiU0VMRUNUICogRlJPTSBVc2Vyc1wiO1xuICAgICAgICAgICAgc3RtdCA9IGNvbm4ucHJlcGFyZVN0YXRlbWVudChzcWwpO1xuICAgICAgICAgICAgcnMgPSBzdG10LmV4ZWN1dGVRdWVyeSgpO1xuXG4gICAgICAgICAgICB3aGlsZSAocnMubmV4dCgpKSB7XG4gICAgICAgICAgICAgICAgVXNlciB1c2VyID0gbmV3IFVzZXIoKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldFVzZXJJZChycy5nZXRJbnQoXCJ1c2VyX2lkXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldFVzZXJuYW1lKHJzLmdldFN0cmluZyhcInVzZXJuYW1lXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldFBhc3N3b3JkKHJzLmdldFN0cmluZyhcInBhc3N3b3JkXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldFJvbGUocnMuZ2V0U3RyaW5nKFwicm9sZVwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRJbWFnZVVybChycy5nZXRTdHJpbmcoXCJpbWFnZV91cmxcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0QWN0aXZlKHJzLmdldEJvb2xlYW4oXCJpc0FjdGl2ZVwiKSk7XG4gICAgICAgICAgICAgICAgdXNlcnMuYWRkKHVzZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIERhdGFiYXNlVXRpbC5jbG9zZVJlc291cmNlcyhycywgc3RtdCwgY29ubik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVzZXJzO1xuICAgIH1cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBVc2VyIGZpbmRCeUlkKEludGVnZXIgaWQpIHtcbiAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcbiAgICAgICAgUHJlcGFyZWRTdGF0ZW1lbnQgc3RtdCA9IG51bGw7XG4gICAgICAgIFJlc3VsdFNldCBycyA9IG51bGw7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbm4gPSBEYXRhYmFzZVV0aWwuZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgICAgICAgU3RyaW5nIHNxbCA9IFwiU0VMRUNUICogRlJPTSBVc2VycyBXSEVSRSB1c2VyX2lkID0gP1wiO1xuICAgICAgICAgICAgc3RtdCA9IGNvbm4ucHJlcGFyZVN0YXRlbWVudChzcWwpO1xuICAgICAgICAgICAgc3RtdC5zZXRJbnQoMSwgaWQpO1xuICAgICAgICAgICAgcnMgPSBzdG10LmV4ZWN1dGVRdWVyeSgpO1xuXG4gICAgICAgICAgICBpZiAocnMubmV4dCgpKSB7XG4gICAgICAgICAgICAgICAgVXNlciB1c2VyID0gbmV3IFVzZXIoKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldFVzZXJJZChycy5nZXRJbnQoXCJ1c2VyX2lkXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldFVzZXJuYW1lKHJzLmdldFN0cmluZyhcInVzZXJuYW1lXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldFBhc3N3b3JkKHJzLmdldFN0cmluZyhcInBhc3N3b3JkXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldFJvbGUocnMuZ2V0U3RyaW5nKFwicm9sZVwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRJbWFnZVVybChycy5nZXRTdHJpbmcoXCJpbWFnZV91cmxcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0QWN0aXZlKHJzLmdldEJvb2xlYW4oXCJpc0FjdGl2ZVwiKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVzZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgRGF0YWJhc2VVdGlsLmNsb3NlUmVzb3VyY2VzKHJzLCBzdG10LCBjb25uKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4uLi5cblxuICAgIHB1YmxpYyBVc2VyIGZpbmRCeVVzZXJuYW1lKFN0cmluZyB1c2VybmFtZSkge1xuICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgICAgICBQcmVwYXJlZFN0YXRlbWVudCBzdG10ID0gbnVsbDtcbiAgICAgICAgUmVzdWx0U2V0IHJzID0gbnVsbDtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29ubiA9IERhdGFiYXNlVXRpbC5nZXRDb25uZWN0aW9uKCk7XG4gICAgICAgICAgICBTdHJpbmcgc3FsID0gXCJTRUxFQ1QgKiBGUk9NIFVzZXJzIFdIRVJFIHVzZXJuYW1lID0gP1wiO1xuICAgICAgICAgICAgc3RtdCA9IGNvbm4ucHJlcGFyZVN0YXRlbWVudChzcWwpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMSwgdXNlcm5hbWUpO1xuICAgICAgICAgICAgcnMgPSBzdG10LmV4ZWN1dGVRdWVyeSgpO1xuXG4gICAgICAgICAgICBpZiAocnMubmV4dCgpKSB7XG4gICAgICAgICAgICAgICAgVXNlciB1c2VyID0gbmV3IFVzZXIoKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldFVzZXJJZChycy5nZXRJbnQoXCJ1c2VyX2lkXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldFVzZXJuYW1lKHJzLmdldFN0cmluZyhcInVzZXJuYW1lXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldFBhc3N3b3JkKHJzLmdldFN0cmluZyhcInBhc3N3b3JkXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldFJvbGUocnMuZ2V0U3RyaW5nKFwicm9sZVwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRJbWFnZVVybChycy5nZXRTdHJpbmcoXCJpbWFnZV91cmxcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0QWN0aXZlKHJzLmdldEJvb2xlYW4oXCJpc0FjdGl2ZVwiKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVzZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgRGF0YWJhc2VVdGlsLmNsb3NlUmVzb3VyY2VzKHJzLCBzdG10LCBjb25uKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBwdWJsaWMgVXNlciBmaW5kQnlFbWFpbChTdHJpbmcgZW1haWwpIHtcbiAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcbiAgICAgICAgUHJlcGFyZWRTdGF0ZW1lbnQgc3RtdCA9IG51bGw7XG4gICAgICAgIFJlc3VsdFNldCBycyA9IG51bGw7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIEtp4buDbSB0cmEgZW1haWwgY8OzIHThu5NuIHThuqFpIHRyb25nIGLhuqNuZyBTdGFmZnMga2jDtG5nXG4gICAgICAgICAgICBjb25uID0gRGF0YWJhc2VVdGlsLmdldENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgIFN0cmluZyBjaGVja1NxbCA9IFwiU0VMRUNUICogRlJPTSBTdGFmZnMgV0hFUkUgZW1haWwgPSA/XCI7XG4gICAgICAgICAgICBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KGNoZWNrU3FsKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDEsIGVtYWlsKTtcbiAgICAgICAgICAgIHJzID0gc3RtdC5leGVjdXRlUXVlcnkoKTtcblxuICAgICAgICAgICAgLy8gTuG6v3UgZW1haWwgdOG7k24gdOG6oWksIGzhuqV5IHRow7RuZyB0aW4gdXNlclxuICAgICAgICAgICAgU3RyaW5nIHNxbCA9IFwiU0VMRUNUIHUuKiBGUk9NIFVzZXJzIHUgXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJKT0lOIFN0YWZmcyBzIE9OIHUudXNlcl9pZCA9IHMudXNlcl9pZCBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICBcIldIRVJFIHMuZW1haWwgPSA/XCI7XG4gICAgICAgICAgICBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHNxbCk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygxLCBlbWFpbCk7XG5cbiAgICAgICAgICAgIHJzID0gc3RtdC5leGVjdXRlUXVlcnkoKTtcbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9jb20vc3RvcmUvYXBwL3BldHN0b3JlL0NvbnRyb2xsZXJzL0xvZ2luQ29udHJvbGxlci5qYXZhXG4uLi5cblxuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuREFPLlVzZXJEQU87XG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5EQU8uU3RhZmZEQU87XG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5Nb2RlbHMuRW50aXRpZXMuVXNlcjtcbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLk1vZGVscy5FbnRpdGllcy5TdGFmZjtcbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLlNlc3Npb25zLlNlc3Npb25NYW5hZ2VyO1xuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuVmlld3MuQWRtaW5GYWN0b3J5O1xuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuVmlld3MuVmlld0ZhY3Rvcnk7XG5pbXBvcnQgZGUuamVuc2QuZnguZ2x5cGhzLmZvbnRhd2Vzb21lLkZvbnRBd2Vzb21lSWNvbjtcbmltcG9ydCBkZS5qZW5zZC5meC5nbHlwaHMuZm9udGF3ZXNvbWUuRm9udEF3ZXNvbWVJY29uVmlldztcbmltcG9ydCBqYXZhZnguZnhtbC5GWE1MO1xuaW1wb3J0IGphdmFmeC5meG1sLkluaXRpYWxpemFibGU7XG5pbXBvcnQgamF2YWZ4LnNjZW5lLmNvbnRyb2wuKjtcbmltcG9ydCBqYXZhZnguc2NlbmUuaW5wdXQuTW91c2VFdmVudDtcbmltcG9ydCBqYXZhZnguc3RhZ2UuU3RhZ2U7XG5pbXBvcnQgamF2YWZ4LnNjZW5lLmltYWdlLkltYWdlO1xuaW1wb3J0IGphdmFmeC5zY2VuZS5pbWFnZS5JbWFnZVZpZXc7XG5pbXBvcnQgamF2YWZ4LnNjZW5lLnBhaW50LkltYWdlUGF0dGVybjtcbmltcG9ydCBqYXZhLnV0aWwuT2JqZWN0cztcbi4uLlxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBUw6xtIHVzZXIgdGhlbyB1c2VybmFtZVxuICAgICAgICAgICAgVXNlciB1c2VyID0gdXNlckRBTy5maW5kQnlVc2VybmFtZSh1c2VybmFtZSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmKHVzZXIgPT0gbnVsbCB8fCB1c2VyLmdldFVzZXJuYW1lKCkgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIENvbnRyb2xsZXJVdGlscy5zaG93QWxlcnQoQWxlcnQuQWxlcnRUeXBlLkVSUk9SLCBcIkzhu5dpXCIsIFwiVMOqbiDEkcSDbmcgbmjhuq1wIGtow7RuZyDEkcO6bmdcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBLaeG7g20gdHJhIHTDqm4gxJHEg25nIG5o4bqtcFxuICAgICAgICAgICAgaWYgKCF1c2VyLmdldFVzZXJuYW1lKCkuZXF1YWxzKHVzZXJuYW1lKSkge1xuICAgICAgICAgICAgICAgIENvbnRyb2xsZXJVdGlscy5zaG93QWxlcnQoQWxlcnQuQWxlcnRUeXBlLkVSUk9SLCBcIkzhu5dpXCIsIFwiVMOqbiDEkcSDbmcgbmjhuq1wIGtow7RuZyDEkcO6bmdcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBLaeG7g20gdHJhIG3huq10IGto4bqpdVxuICAgICAgICAgICAgaWYoIUJDcnlwdC5jaGVja3B3KHBhc3N3b3JkLCB1c2VyLmdldFBhc3N3b3JkKCkpKSB7XG4gICAgICAgICAgICAgICAgQ29udHJvbGxlclV0aWxzLnNob3dBbGVydChBbGVydC5BbGVydFR5cGUuRVJST1IsIFwiTOG7l2lcIiwgXCJN4bqtdCBraOG6qXUga2jDtG5nIMSRw7puZ1wiKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4uLi5cblBhdGg6IHNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL0xvZ2luLmphdmFcbi4uLlxuXG4gICAgcHJpdmF0ZSB2b2lkIGJ0bkxvZ2luQWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkxvZ2luQWN0aW9uUGVyZm9ybWVkXG4gICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxuICAgICAgICBpZih2YWxpZGF0ZUZpZWxkcygpKSB7XG4gICAgICAgICAgICB0cnl7XG4gICAgICAgICAgICAgICAgU3RyaW5nIHVzZXJuYW1lID0gdHh0VXNlck5hbWUuZ2V0VGV4dCgpLnRyaW0oKTtcbiAgICAgICAgICAgICAgICBTdHJpbmcgcGFzc3dvcmQgPSB0eHRQYXNzd29yZC5nZXRUZXh0KCkudHJpbSgpO1xuXG4gICAgICAgICAgICAgICAgVXNlciB1c2VyID0gbnVsbDtcbiAgICAgICAgICAgICAgICBib29sZWFuIGlzU3VjY2VzcyA9IFVzZXJEQU8ubG9naW4odXNlcm5hbWUsIHBhc3N3b3JkKTtcblxuICAgICAgICAgICAgICAgIGlmKGlzU3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyh0aGlzLCBcIsSQxINuZyBuaOG6rXAgdGjDoG5oIGPDtG5nIVwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLklORk9STUFUSU9OX01FU1NBR0UpO1xuLy8gICAgICAgICAgICAgICAgICAgIG5ldyBNYWluRnJhbWUoKS5zZXRWaXNpYmxlKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyh0aGlzLCBcIlNhaSB0w6puIMSRxINuZyBuaOG6rXAgaG/hurdjIG3huq10IGto4bqpdS5cIiwgXCJM4buXaVwiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgICAgICAgICAgICAgICB9XG4uLi5cblBhdGg6IHNyYy9EQU8vRGJPcGVyYXRpb25zLmphdmFcbnBhY2thZ2UgREFPO1xuXG5pbXBvcnQgamF2YS5zcWwuQ29ubmVjdGlvbjtcbmltcG9ydCBqYXZhLnNxbC5QcmVwYXJlZFN0YXRlbWVudDtcbmltcG9ydCBqYXZhLnNxbC5SZXN1bHRTZXQ7XG5pbXBvcnQgamF2YS5zcWwuU3RhdGVtZW50O1xuaW1wb3J0IGphdmF4LnN3aW5nLkpPcHRpb25QYW5lO1xuXG5wdWJsaWMgY2xhc3MgRGJPcGVyYXRpb25zIHtcbiAgICBwdWJsaWMgc3RhdGljIHZvaWQgc2V0RGF0YU9yRGVsZXRlKFN0cmluZyBxdWVyeSwgU3RyaW5nIG1zZykge1xuICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgICAgICBTdGF0ZW1lbnQgc3QgPSBudWxsO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29ubiA9IENvbm5lY3Rpb25Qcm92aWRlci5nZXRDb25uKCk7XG4gICAgICAgICAgICBzdCA9IGNvbm4uY3JlYXRlU3RhdGVtZW50KCk7XG4gICAgICAgICAgICBzdC5leGVjdXRlVXBkYXRlKHF1ZXJ5KTtcblxuICAgICAgICAgICAgaWYoIW1zZy5lcXVhbHMoXCJcIikpIHtcbiAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBtc2csIFwiTWVzc2FnZVwiLCBKT3B0aW9uUGFuZS5JTkZPUk1BVElPTl9NRVNTQUdFKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGV4KSB7XG4gICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBleCwgXCJNZXNzYWdlXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAoc3QgIT0gbnVsbCkgc3QuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICBpZiAoY29ubiAhPSBudWxsKSBjb25uLmNsb3NlKCk7XG4gICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZW5lcmF0ZSB0aGUgbmV4dCBhdmFpbGFibGUgSUQgZm9yIGEgdGFibGVcbiAgICAgKiBAcGFyYW0gdGFibGVOYW1lIE5hbWUgb2YgdGhlIHRhYmxlXG4gICAgICogQHBhcmFtIGlkQ29sdW1uTmFtZSBOYW1lIG9mIHRoZSBJRCBjb2x1bW5cbiAgICAgKiBAcmV0dXJuIE5leHQgYXZhaWxhYmxlIElEXG4gICAgICovXG4gICAgcHVibGljIHN0YXRpYyBpbnQgZ2V0TmV4dElkKFN0cmluZyB0YWJsZU5hbWUsIFN0cmluZyBpZENvbHVtbk5hbWUpIHtcbiAgICAgICAgaW50IG5leHRJZCA9IDE7IC8vIERlZmF1bHQgc3RhcnRpbmcgSURcbiAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcbiAgICAgICAgU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuICAgICAgICBSZXN1bHRTZXQgcnMgPSBudWxsO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25uID0gQ29ubmVjdGlvblByb3ZpZGVyLmdldENvbm4oKTtcbiAgICAgICAgICAgIHN0bXQgPSBjb25uLmNyZWF0ZVN0YXRlbWVudCgpO1xuICAgICAgICAgICAgU3RyaW5nIHF1ZXJ5ID0gXCJTRUxFQ1QgTUFYKFwiICsgaWRDb2x1bW5OYW1lICsgXCIpIEFTIG1heF9pZCBGUk9NIFwiICsgdGFibGVOYW1lO1xuICAgICAgICAgICAgcnMgPSBzdG10LmV4ZWN1dGVRdWVyeShxdWVyeSk7XG5cbiAgICAgICAgICAgIGlmIChycy5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICBpbnQgbWF4SWQgPSBycy5nZXRJbnQoXCJtYXhfaWRcIik7XG4gICAgICAgICAgICAgICAgbmV4dElkID0gbWF4SWQgKyAxO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgZSwgXCJFcnJvclwiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKHJzICE9IG51bGwpIHJzLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgaWYgKHN0bXQgIT0gbnVsbCkgc3RtdC5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIGlmIChjb25uICE9IG51bGwpIGNvbm4uY2xvc2UoKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBuZXh0SWQ7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBib29sZWFuIGV4ZWN1dGVUcmFuc2FjdGlvbihTcWxPcGVyYXRpb25bXSBvcGVyYXRpb25zLCBTdHJpbmcgc3VjY2Vzc01zZykge1xuICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgICAgICBib29sZWFuIHN1Y2Nlc3MgPSBmYWxzZTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29ubiA9IENvbm5lY3Rpb25Qcm92aWRlci5nZXRDb25uKCk7XG4gICAgICAgICAgICBjb25uLnNldEF1dG9Db21taXQoZmFsc2UpO1xuXG4gICAgICAgICAgICAvLyBFeGVjdXRlIGFsbCBvcGVyYXRpb25zXG4gICAgICAgICAgICBmb3IgKFNxbE9wZXJhdGlvbiBvcGVyYXRpb24gOiBvcGVyYXRpb25zKSB7XG4gICAgICAgICAgICAgICAgUHJlcGFyZWRTdGF0ZW1lbnQgcHMgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQob3BlcmF0aW9uLmdldFNxbCgpKTtcbiAgICAgICAgICAgICAgICBvcGVyYXRpb24uc2V0UGFyYW1ldGVycyhwcyk7XG4gICAgICAgICAgICAgICAgcHMuZXhlY3V0ZVVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgIHBzLmNsb3NlKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIENvbW1pdCB0cmFuc2FjdGlvblxuICAgICAgICAgICAgY29ubi5jb21taXQoKTtcbiAgICAgICAgICAgIHN1Y2Nlc3MgPSB0cnVlO1xuXG4gICAgICAgICAgICAvLyBTaG93IHN1Y2Nlc3MgbWVzc2FnZSBpZiBwcm92aWRlZFxuICAgICAgICAgICAgaWYgKHN1Y2Nlc3NNc2cgIT0gbnVsbCAmJiAhc3VjY2Vzc01zZy5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBzdWNjZXNzTXNnLCBcIlN1Y2Nlc3NcIiwgSk9wdGlvblBhbmUuSU5GT1JNQVRJT05fTUVTU0FHRSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICAvLyBSb2xsYmFjayB0cmFuc2FjdGlvbiBvbiBlcnJvclxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAoY29ubiAhPSBudWxsKSBjb25uLnJvbGxiYWNrKCk7XG4gICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gcm9sbGJhY2tFeCkge1xuICAgICAgICAgICAgICAgIHJvbGxiYWNrRXgucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwiRXJyb3I6IFwiICsgZS5nZXRNZXNzYWdlKCksIFwiRXJyb3JcIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAoY29ubiAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbm4uc2V0QXV0b0NvbW1pdCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgY29ubi5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBzdWNjZXNzO1xuICAgIH1cblxuICAgIHB1YmxpYyBpbnRlcmZhY2UgU3FsT3BlcmF0aW9uIHtcbiAgICAgICAgU3RyaW5nIGdldFNxbCgpO1xuICAgICAgICB2b2lkIHNldFBhcmFtZXRlcnMoUHJlcGFyZWRTdGF0ZW1lbnQgcHMpIHRocm93cyBFeGNlcHRpb247XG4gICAgfVxufVxuLi4uXG5QYXRoOiBzcmMvREFPL1VzZXJEQU8uamF2YVxuLypcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvTGljZW5zZXMvbGljZW5zZS1kZWZhdWx0LnR4dCB0byBjaGFuZ2UgdGhpcyBsaWNlbnNlXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ2xhc3MuamF2YSB0byBlZGl0IHRoaXMgdGVtcGxhdGVcbiAqL1xucGFja2FnZSBEQU87XG5cbmltcG9ydCBNb2RlbC5Vc2VyO1xuaW1wb3J0IGphdmEudXRpbC5MaXN0O1xuXG4vKipcbiAqXG4gKiBAYXV0aG9yIE5nb2MgVGhhb1xuICovXG5wdWJsaWMgY2xhc3MgVXNlckRBT3tcblxuICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBpbnNlcnQoVXNlciBvYmopIHtcbiAgICAgICAgXG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyB2b2lkIHVwZGF0ZShVc2VyIG9iaikge1xuICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oXCJOb3Qgc3VwcG9ydGVkIHlldC5cIik7IC8vIEdlbmVyYXRlZCBmcm9tIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9Db2RlL0dlbmVyYXRlZE1ldGhvZEJvZHlcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIHZvaWQgZGVsZXRlKGludCBpZCkge1xuICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oXCJOb3Qgc3VwcG9ydGVkIHlldC5cIik7IC8vIEdlbmVyYXRlZCBmcm9tIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9Db2RlL0dlbmVyYXRlZE1ldGhvZEJvZHlcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIFVzZXIgZ2V0QnlJZChpbnQgaWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpOyAvLyBHZW5lcmF0ZWQgZnJvbSBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ29kZS9HZW5lcmF0ZWRNZXRob2RCb2R5XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBMaXN0PFVzZXI+IGdldEFsbCgpIHtcbiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpOyAvLyBHZW5lcmF0ZWQgZnJvbSBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ29kZS9HZW5lcmF0ZWRNZXRob2RCb2R5XG4gICAgfVxuICAgIFxufVxuLi4uXG5QYXRoOiBzcmMvREFPL1N1YnNjcmliZXJEQU8uamF2YVxuLypcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvTGljZW5zZXMvbGljZW5zZS1kZWZhdWx0LnR4dCB0byBjaGFuZ2UgdGhpcyBsaWNlbnNlXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ2xhc3MuamF2YSB0byBlZGl0IHRoaXMgdGVtcGxhdGVcbiAqL1xucGFja2FnZSBEQU87XG5cbmltcG9ydCBNb2RlbC5TdWJzY3JpYmVyO1xuaW1wb3J0IGphdmEudXRpbC5MaXN0O1xuaW1wb3J0IGphdmEuc3FsLlByZXBhcmVkU3RhdGVtZW50O1xuaW1wb3J0IGphdmEuc3FsLlRpbWVzdGFtcDtcbmltcG9ydCBEQU8uRGJPcGVyYXRpb25zLlNxbE9wZXJhdGlvbjtcblxuLyoqXG4gKlxuICogQGF1dGhvciBOZ29jIFRoYW9cbiAqL1xucHVibGljIGNsYXNzIFN1YnNjcmliZXJEQU97XG5cbiAgICBwdWJsaWMgc3RhdGljIHZvaWQgaW5zZXJ0KGZpbmFsIFN1YnNjcmliZXIgb2JqKSB7XG4gICAgICAgIC8vIEdlbmVyYXRlIHVzZXJfaWQgYW5kIHN1YnNjcmliZXJfaWRcbiAgICAgICAgZmluYWwgaW50IHVzZXJJZCA9IERiT3BlcmF0aW9ucy5nZXROZXh0SWQoXCJVU0VSXCIsIFwidXNlcl9pZFwiKTtcbiAgICAgICAgZmluYWwgaW50IHN1YnNjcmliZXJJZCA9IERiT3BlcmF0aW9ucy5nZXROZXh0SWQoXCJTVUJTQ1JJQkVSXCIsIFwic3Vic2NyaWJlcl9pZFwiKTtcblxuICAgICAgICAvLyBTZXQgdGhlIGdlbmVyYXRlZCBJRHNcbiAgICAgICAgb2JqLnNldFVzZXJfaWQodXNlcklkKTtcbiAgICAgICAgb2JqLnNldFN1YnNjcmliZXJfaWQoc3Vic2NyaWJlcklkKTtcblxuICAgICAgICAvLyBDcmVhdGUgU1FMIG9wZXJhdGlvbnMgZm9yIHRoZSB0cmFuc2FjdGlvblxuICAgICAgICBTcWxPcGVyYXRpb25bXSBvcGVyYXRpb25zID0gbmV3IFNxbE9wZXJhdGlvbltdIHtcbiAgICAgICAgICAgIC8vIEluc2VydCBpbnRvIFVTRVIgdGFibGVcbiAgICAgICAgICAgIG5ldyBTcWxPcGVyYXRpb24oKSB7XG4gICAgICAgICAgICAgICAgQE92ZXJyaWRlXG4gICAgICAgICAgICAgICAgcHVibGljIFN0cmluZyBnZXRTcWwoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIklOU0VSVCBJTlRPIFVTRVIodXNlcl9pZCwgdXNlcm5hbWUsIHBhc3N3b3JkLCByb2xlLCBjcmVhdGVkX2F0KSBWQUxVRVMgKD8sID8sID8sID8sID8pXCI7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgQE92ZXJyaWRlXG4gICAgICAgICAgICAgICAgcHVibGljIHZvaWQgc2V0UGFyYW1ldGVycyhQcmVwYXJlZFN0YXRlbWVudCBwcykgdGhyb3dzIEV4Y2VwdGlvbiB7XG4gICAgICAgICAgICAgICAgICAgIHBzLnNldEludCgxLCB1c2VySWQpO1xuICAgICAgICAgICAgICAgICAgICBwcy5zZXRTdHJpbmcoMiwgb2JqLmdldFVzZXJuYW1lKCkpO1xuICAgICAgICAgICAgICAgICAgICBwcy5zZXRTdHJpbmcoMywgb2JqLmdldFBhc3N3b3JkKCkpO1xuICAgICAgICAgICAgICAgICAgICBwcy5zZXRTdHJpbmcoNCwgb2JqLmdldFJvbGUoKSk7XG4gICAgICAgICAgICAgICAgICAgIHBzLnNldFRpbWVzdGFtcCg1LCBUaW1lc3RhbXAudmFsdWVPZihvYmouZ2V0Q3JlYXRlX2F0KCkpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAvLyBJbnNlcnQgaW50byBTVUJTQ1JJQkVSIHRhYmxlXG4gICAgICAgICAgICBuZXcgU3FsT3BlcmF0aW9uKCkge1xuICAgICAgICAgICAgICAgIEBPdmVycmlkZVxuICAgICAgICAgICAgICAgIHB1YmxpYyBTdHJpbmcgZ2V0U3FsKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJJTlNFUlQgSU5UTyBTVUJTQ1JJQkVSIChzdWJzY3JpYmVyX2lkLCBuYW1lLCBhZGRyZXNzLCBwaG9uZSwgdXNlcl9pZCkgVkFMVUVTICg/LCA/LCA/LCA/LCA/KVwiO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIEBPdmVycmlkZVxuICAgICAgICAgICAgICAgIHB1YmxpYyB2b2lkIHNldFBhcmFtZXRlcnMoUHJlcGFyZWRTdGF0ZW1lbnQgcHMpIHRocm93cyBFeGNlcHRpb24ge1xuICAgICAgICAgICAgICAgICAgICBwcy5zZXRJbnQoMSwgc3Vic2NyaWJlcklkKTtcbiAgICAgICAgICAgICAgICAgICAgcHMuc2V0U3RyaW5nKDIsIG9iai5nZXRGdWxsTmFtZSgpKTtcbiAgICAgICAgICAgICAgICAgICAgcHMuc2V0U3RyaW5nKDMsIG9iai5nZXRBZGRyZXNzKCkpO1xuICAgICAgICAgICAgICAgICAgICBwcy5zZXRTdHJpbmcoNCwgb2JqLmdldFBob25lKCkpO1xuICAgICAgICAgICAgICAgICAgICBwcy5zZXRJbnQoNSwgdXNlcklkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gRXhlY3V0ZSB0aGUgdHJhbnNhY3Rpb25cbiAgICAgICAgRGJPcGVyYXRpb25zLmV4ZWN1dGVUcmFuc2FjdGlvbihvcGVyYXRpb25zLCBcIsSQxINuZyBrw70gdGjDoG5oIGPDtG5nIVwiKTtcbiAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyB2b2lkIHVwZGF0ZShTdWJzY3JpYmVyIG9iaikge1xuICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oXCJOb3Qgc3VwcG9ydGVkIHlldC5cIik7IC8vIEdlbmVyYXRlZCBmcm9tIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9Db2RlL0dlbmVyYXRlZE1ldGhvZEJvZHlcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIHZvaWQgZGVsZXRlKGludCBpZCkge1xuICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oXCJOb3Qgc3VwcG9ydGVkIHlldC5cIik7IC8vIEdlbmVyYXRlZCBmcm9tIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9Db2RlL0dlbmVyYXRlZE1ldGhvZEJvZHlcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIFN1YnNjcmliZXIgZ2V0QnlJZChpbnQgaWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpOyAvLyBHZW5lcmF0ZWQgZnJvbSBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ29kZS9HZW5lcmF0ZWRNZXRob2RCb2R5XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBMaXN0PFN1YnNjcmliZXI+IGdldEFsbCgpIHtcbiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpOyAvLyBHZW5lcmF0ZWQgZnJvbSBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ29kZS9HZW5lcmF0ZWRNZXRob2RCb2R5XG4gICAgfVxuXG5cbn1cbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9jb20vc3RvcmUvYXBwL3BldHN0b3JlL0RBTy9QZXREQU8uamF2YVxuLi4uXG5cbiAgICAvLyB0aW0ga2llbSB0aGVvIHRlbiwgbG9haSwgZ2lvbmdcbiAgICBwdWJsaWMgQXJyYXlMaXN0PFBldD4gc2VhcmNoUGV0cyhTdHJpbmcgc2VhcmNoVGV4dCwgaW50IGxpbWl0KSB7XG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuICAgICAgICBSZXN1bHRTZXQgcnMgPSBudWxsO1xuICAgICAgICBBcnJheUxpc3Q8UGV0PiBwZXRMaXN0ID0gbmV3IEFycmF5TGlzdDw+KCk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbm4gPSBEYXRhYmFzZVV0aWwuZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgICAgICAgU3RyaW5nIHNxbCA9IFwiU0VMRUNUICogRlJPTSBQZXRzIFdIRVJFIExPV0VSKG5hbWUpIExJS0UgPyBMSU1JVCA/XCI7XG5cbiAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsKTtcbiAgICAgICAgICAgIFN0cmluZyBzZWFyY2hQYXR0ZXJuID0gXCIlXCIgKyBzZWFyY2hUZXh0LnRvTG93ZXJDYXNlKCkgKyBcIiVcIjtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDEsIHNlYXJjaFBhdHRlcm4pO1xuICAgICAgICAgICAgc3RtdC5zZXRJbnQoMiwgbGltaXQpO1xuXG4gICAgICAgICAgICBycyA9IHN0bXQuZXhlY3V0ZVF1ZXJ5KCk7XG5cbiAgICAgICAgICAgIHdoaWxlIChycy5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICBwZXRMaXN0LmFkZChQZXRNYXBwZXIuZnJvbVJlc3V0U2V0KHJzKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcGV0TGlzdDtcbiAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIERhdGFiYXNlVXRpbC5jbG9zZVJlc291cmNlcyhycywgc3RtdCwgY29ubik7XG4gICAgICAgIH1cbiAuLi4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1XzAxNnhEcnhkSkRMWWNCRHdwQnFjTkNhdyJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkU6L0hvY1RhcC8wMl9KQVZBLzAzX1Byb2plY3QvSW50ZXJuZXQgTWFuZ2VtZW50IFN5c3RlbSIsImZvbGRlclJvb3QiOiJFOi9Ib2NUYXAvMDJfSkFWQS8wM19Qcm9qZWN0L0ludGVybmV0IE1hbmdlbWVudCBTeXN0ZW0ifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJ0aW1lc3RhbXAiOiIyMDI1LTA1LTEzVDEzOjAyOjMzLjA3M1oiLCJyZXNwb25zZV90ZXh0IjoiTGV0IG1lIGNoZWNrIGZvciB0aGUgaW1wbGVtZW50YXRpb24gb2YgdGhlIFVzZXJEQU8ubG9naW4gbWV0aG9kIGluIHRoZSBwcm9qZWN0OlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6IjVlZjg2YjBhLTM1OTYtNGE2ZS04YWU1LWUzMmE1OTM3YmI0YyIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfMDE2VW1oblY2OThxaGJKODM1OVBhcjZ5IiwidG9vbF9uYW1lIjoic3RyLXJlcGxhY2UtZWRpdG9yIiwiaW5wdXRfanNvbiI6IntcImNvbW1hbmRcIjogXCJ2aWV3XCIsIFwicGF0aFwiOiBcInNyYy9EQU8vRGJPcGVyYXRpb25zLmphdmFcIn0iLCJtY3Bfc2VydmVyX25hbWUiOiIiLCJtY3BfdG9vbF9uYW1lIjoiIn19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiJOb3cgbGV0IG1lIGNoZWNrIHRoZSBEYk9wZXJhdGlvbnMuZ2V0RGF0YSBtZXRob2Q6XG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJIZXJlJ3MgdGhlIHJlc3VsdCBvZiBydW5uaW5nIGBjYXQgLW5gIG9uIHNyYy9EQU8vVXNlckRBTy5qYXZhOlxuICAgICAxXHQvKlxuICAgICAyXHQgKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0xpY2Vuc2VzL2xpY2Vuc2UtZGVmYXVsdC50eHQgdG8gY2hhbmdlIHRoaXMgbGljZW5zZVxuICAgICAzXHQgKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ2xhc3MuamF2YSB0byBlZGl0IHRoaXMgdGVtcGxhdGVcbiAgICAgNFx0ICovXG4gICAgIDVcdHBhY2thZ2UgREFPO1xuICAgICA2XHRcbiAgICAgN1x0aW1wb3J0IE1vZGVsLlVzZXI7XG4gICAgIDhcdGltcG9ydCBqYXZhLnV0aWwuTGlzdDtcbiAgICAgOVx0aW1wb3J0IGphdmEuc3FsLlByZXBhcmVkU3RhdGVtZW50O1xuICAgIDEwXHRpbXBvcnQgamF2YS5zcWwuVGltZXN0YW1wO1xuICAgIDExXHRpbXBvcnQgREFPLkRiT3BlcmF0aW9ucy5TcWxPcGVyYXRpb247XG4gICAgMTJcdGltcG9ydCBqYXZhLnNxbC5SZXN1bHRTZXQ7XG4gICAgMTNcdC8qKlxuICAgIDE0XHQgKlxuICAgIDE1XHQgKiBAYXV0aG9yIE5nb2MgVGhhb1xuICAgIDE2XHQgKi9cbiAgICAxN1x0cHVibGljIGNsYXNzIFVzZXJEQU97XG4gICAgMThcdFxuICAgIDE5XHQgICAgcHVibGljIHN0YXRpYyB2b2lkIGluc2VydChmaW5hbCBVc2VyIG9iaikge1xuICAgIDIwXHQgICAgICAgIGZpbmFsIGludCB1c2VySWQgPSBEYk9wZXJhdGlvbnMuZ2V0TmV4dElkKFwiVVNFUlwiLCBcInVzZXJfaWRcIik7XG4gICAgMjFcdCAgICAgICAgXG4gICAgMjJcdCAgICAgICAgb2JqLnNldFVzZXJfaWQodXNlcklkKTtcbiAgICAyM1x0ICAgICAgICBcbiAgICAyNFx0ICAgICAgICBTcWxPcGVyYXRpb25bXSBvcGVyYXRpb25zID0gbmV3IFNxbE9wZXJhdGlvbltdIHtcbiAgICAyNVx0ICAgICAgICAgICAgbmV3IFNxbE9wZXJhdGlvbigpIHtcbiAgICAyNlx0ICAgICAgICAgICAgICAgIEBPdmVycmlkZVxuICAgIDI3XHQgICAgICAgICAgICAgICAgcHVibGljIFN0cmluZyBnZXRTcWwoKSB7XG4gICAgMjhcdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiSU5TRVJUIElOVE8gVVNFUih1c2VyX2lkLCB1c2VybmFtZSwgcGFzc3dvcmQsIHJvbGUsIGNyZWF0ZWRfYXQpIFZBTFVFUyAoPywgPywgPywgPywgPylcIjtcbiAgICAyOVx0ICAgICAgICAgICAgICAgIH1cbiAgICAzMFx0XG4gICAgMzFcdCAgICAgICAgICAgICAgICBAT3ZlcnJpZGVcbiAgICAzMlx0ICAgICAgICAgICAgICAgIHB1YmxpYyB2b2lkIHNldFBhcmFtZXRlcnMoUHJlcGFyZWRTdGF0ZW1lbnQgcHMpIHRocm93cyBFeGNlcHRpb24ge1xuICAgIDMzXHQgICAgICAgICAgICAgICAgICAgIHBzLnNldEludCgxLCB1c2VySWQpO1xuICAgIDM0XHQgICAgICAgICAgICAgICAgICAgIHBzLnNldFN0cmluZygyLCBvYmouZ2V0VXNlcm5hbWUoKSk7XG4gICAgMzVcdCAgICAgICAgICAgICAgICAgICAgcHMuc2V0U3RyaW5nKDMsIG9iai5nZXRQYXNzd29yZCgpKTtcbiAgICAzNlx0ICAgICAgICAgICAgICAgICAgICBwcy5zZXRTdHJpbmcoNCwgb2JqLmdldFJvbGUoKSk7XG4gICAgMzdcdCAgICAgICAgICAgICAgICAgICAgcHMuc2V0VGltZXN0YW1wKDUsIFRpbWVzdGFtcC52YWx1ZU9mKG9iai5nZXRDcmVhdGVfYXQoKSkpO1xuICAgIDM4XHQgICAgICAgICAgICAgICAgfVxuICAgIDM5XHQgICAgICAgICAgICB9XG4gICAgNDBcdCAgICAgICAgfTtcbiAgICA0MVx0ICAgICAgICBcbiAgICA0Mlx0ICAgICAgICBEYk9wZXJhdGlvbnMuZXhlY3V0ZVRyYW5zYWN0aW9uKG9wZXJhdGlvbnMsIFwiVGjDqm0gdMOgaSBraG/huqNuIHRow6BuaCBjw7RuZyFcIik7XG4gICAgNDNcdCAgICB9XG4gICAgNDRcdCAgICBcbiAgICA0NVx0ICAgIHB1YmxpYyBzdGF0aWMgYm9vbGVhbiBsb2dpbihmaW5hbCBTdHJpbmcgdXNlck5hbWUsIGZpbmFsIFN0cmluZyBwYXNzd29yZCkge1xuICAgIDQ2XHQgICAgICAgIFVzZXIgdXNlciA9IG51bGw7XG4gICAgNDdcdCAgICAgICAgYm9vbGVhbiBpc1ZhbGlkID0gZmFsc2U7XG4gICAgNDhcdCAgICAgICAgdHJ5IHtcbiAgICA0OVx0ICAgICAgICAgICAgUmVzdWx0U2V0IHJzID0gRGJPcGVyYXRpb25zLmdldERhdGEoXCJTRUxFQ1QgKiBGUk9NIFVTRVIgV0hFUkUgdXNlcm5hbWUgPSAnXCIgKyB1c2VyTmFtZSArIFwiJyBhbmQgcGFzc3dvcmQgPSAnXCIgKyBwYXNzd29yZCArXCInXCIpO1xuICAgIDUwXHQgICAgICAgICAgICB3aGlsZSAocnMubmV4dCgpKSB7XG4gICAgNTFcdCAgICAgICAgICAgICAgICBib29sZWFuIGlzQWN0aXZlID0gcnMuZ2V0Qm9vbGVhbihcImlzQWN0aXZlXCIpO1xuICAgIDUyXHQgICAgICAgICAgICAgICAgaWYgKGlzQWN0aXZlKSB7XG4gICAgNTNcdCAgICAgICAgICAgICAgICAgICAgaXNWYWxpZCA9IHRydWU7XG4gICAgNTRcdCAgICAgICAgICAgICAgICB9XG4gICAgNTVcdCAgICAgICAgICAgIH1cbiAgICA1Nlx0ICAgICAgICAgICAgXG4gICAgNTdcdCAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGV4KSB7XG4gICAgNThcdCAgICAgICAgICAgIGV4LnByaW50U3RhY2tUcmFjZSgpO1xuICAgIDU5XHQgICAgICAgIH0gXG4gICAgNjBcdFxuICAgIDYxXHQgICAgICAgIHJldHVybiBpc1ZhbGlkO1xuICAgIDYyXHQgICAgfVxuICAgIDYzXHRcbiAgICA2NFx0ICAgIHB1YmxpYyBzdGF0aWMgdm9pZCB1cGRhdGUoVXNlciBvYmopIHtcbiAgICA2NVx0ICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oXCJOb3Qgc3VwcG9ydGVkIHlldC5cIik7XG4gICAgNjZcdCAgICB9XG4gICAgNjdcdFxuICAgIDY4XHQgICAgcHVibGljIHN0YXRpYyB2b2lkIGRlbGV0ZShpbnQgaWQpIHtcbiAgICA2OVx0ICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oXCJOb3Qgc3VwcG9ydGVkIHlldC5cIik7XG4gICAgNzBcdCAgICB9XG4gICAgNzFcdFxuICAgIDcyXHQgICAgcHVibGljIHN0YXRpYyBVc2VyIGdldEJ5SWQoaW50IGlkKSB7XG4gICAgNzNcdCAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpO1xuICAgIDc0XHQgICAgfVxuICAgIDc1XHRcbiAgICA3Nlx0ICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxVc2VyPiBnZXRBbGwoKSB7XG4gICAgNzdcdCAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpO1xuICAgIDc4XHQgICAgfVxuICAgIDc5XHQgICAgXG4gICAgODBcdH1cbiAgICA4MVx0XG5Ub3RhbCBsaW5lcyBpbiBmaWxlOiA4MVxuIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV8wMVczNXhWaGg0ZzJ3c01YcndzSEFCOUoifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJFOi9Ib2NUYXAvMDJfSkFWQS8wM19Qcm9qZWN0L0ludGVybmV0IE1hbmdlbWVudCBTeXN0ZW0iLCJmb2xkZXJSb290IjoiRTovSG9jVGFwLzAyX0pBVkEvMDNfUHJvamVjdC9JbnRlcm5ldCBNYW5nZW1lbnQgU3lzdGVtIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwidGltZXN0YW1wIjoiMjAyNS0wNS0xM1QxMzowMjo0Ny44NzJaIiwicmVzcG9uc2VfdGV4dCI6Ik5vdyBsZXQgbWUgY2hlY2sgdGhlIERiT3BlcmF0aW9ucy5nZXREYXRhIG1ldGhvZDpcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiIxMTRkNDY3Yy00ZDZhLTQwNDAtODZkNC1iZmEyYTY0ZTJmNzYiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1XzAxQ0gzV3BKYzJnZkE0dzdIVm1LUnZ0SyIsInRvb2xfbmFtZSI6InN0ci1yZXBsYWNlLWVkaXRvciIsImlucHV0X2pzb24iOiJ7XCJjb21tYW5kXCI6IFwidmlld1wiLCBcInBhdGhcIjogXCJzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9TZXNzaW9uL1VzZXJTZXNzaW9uLmphdmFcIn0iLCJtY3Bfc2VydmVyX25hbWUiOiIiLCJtY3BfdG9vbF9uYW1lIjoiIn19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiJOb3cgbGV0IG1lIGNoZWNrIHRoZSBVc2VyU2Vzc2lvbiBjbGFzczpcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IkhlcmUncyB0aGUgcmVzdWx0IG9mIHJ1bm5pbmcgYGNhdCAtbmAgb24gc3JjL0RBTy9EYk9wZXJhdGlvbnMuamF2YTpcbiAgICAgMVx0cGFja2FnZSBEQU87XG4gICAgIDJcdFxuICAgICAzXHRpbXBvcnQgamF2YS5zcWwuQ29ubmVjdGlvbjtcbiAgICAgNFx0aW1wb3J0IGphdmEuc3FsLlByZXBhcmVkU3RhdGVtZW50O1xuICAgICA1XHRpbXBvcnQgamF2YS5zcWwuUmVzdWx0U2V0O1xuICAgICA2XHRpbXBvcnQgamF2YS5zcWwuU3RhdGVtZW50O1xuICAgICA3XHRpbXBvcnQgamF2YXguc3dpbmcuSk9wdGlvblBhbmU7XG4gICAgIDhcdFxuICAgICA5XHRwdWJsaWMgY2xhc3MgRGJPcGVyYXRpb25zIHtcbiAgICAxMFx0ICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBzZXREYXRhT3JEZWxldGUoU3RyaW5nIHF1ZXJ5LCBTdHJpbmcgbXNnKSB7XG4gICAgMTFcdCAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcbiAgICAxMlx0ICAgICAgICBTdGF0ZW1lbnQgc3QgPSBudWxsO1xuICAgIDEzXHQgICAgICAgIHRyeSB7XG4gICAgMTRcdCAgICAgICAgICAgIGNvbm4gPSBDb25uZWN0aW9uUHJvdmlkZXIuZ2V0Q29ubigpO1xuICAgIDE1XHQgICAgICAgICAgICBzdCA9IGNvbm4uY3JlYXRlU3RhdGVtZW50KCk7XG4gICAgMTZcdCAgICAgICAgICAgIHN0LmV4ZWN1dGVVcGRhdGUocXVlcnkpO1xuICAgIDE3XHRcbiAgICAxOFx0ICAgICAgICAgICAgaWYoIW1zZy5lcXVhbHMoXCJcIikpIHtcbiAgICAxOVx0ICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIG1zZywgXCJNZXNzYWdlXCIsIEpPcHRpb25QYW5lLklORk9STUFUSU9OX01FU1NBR0UpO1xuICAgIDIwXHQgICAgICAgICAgICB9XG4gICAgMjFcdCAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGV4KSB7XG4gICAgMjJcdCAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIGV4LCBcIk1lc3NhZ2VcIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAgMjNcdCAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAyNFx0ICAgICAgICAgICAgdHJ5IHtcbiAgICAyNVx0ICAgICAgICAgICAgICAgIGlmIChzdCAhPSBudWxsKSBzdC5jbG9zZSgpO1xuICAgIDI2XHQgICAgICAgICAgICAgICAgaWYgKGNvbm4gIT0gbnVsbCkgY29ubi5jbG9zZSgpO1xuICAgIDI3XHQgICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgIDI4XHQgICAgICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAyOVx0ICAgICAgICAgICAgfVxuICAgIDMwXHQgICAgICAgIH1cbiAgICAzMVx0ICAgIH1cbiAgICAzMlx0ICAgIFxuICAgIDMzXHQgICAgcHVibGljIHN0YXRpYyBSZXN1bHRTZXQgZ2V0RGF0YShTdHJpbmcgcXVlcnkpe1xuICAgIDM0XHQgICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgMzVcdCAgICAgICAgU3RhdGVtZW50IHN0ID0gbnVsbDtcbiAgICAzNlx0ICAgICAgICBSZXN1bHRTZXQgcnMgPSBudWxsO1xuICAgIDM3XHQgICAgICAgIFxuICAgIDM4XHQgICAgICAgIHRyeXtcbiAgICAzOVx0ICAgICAgICAgICAgY29ubiA9IENvbm5lY3Rpb25Qcm92aWRlci5nZXRDb25uKCk7XG4gICAgNDBcdCAgICAgICAgICAgIHN0ID0gY29ubi5jcmVhdGVTdGF0ZW1lbnQoKTtcbiAgICA0MVx0ICAgICAgICAgICAgcnMgPSBzdC5leGVjdXRlUXVlcnkocXVlcnkpO1xuICAgIDQyXHQgICAgICAgICAgICBcbiAgICA0M1x0ICAgICAgICAgICAgcmV0dXJuIHJzO1xuICAgIDQ0XHQgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBleCl7XG4gICAgNDVcdCAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIGV4LCBcIk1lc3NhZ2VcIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAgNDZcdCAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgIDQ3XHQgICAgICAgIH0gXG4gICAgNDhcdCAgICB9XG4gICAgNDlcdFxuICAgIDUwXHQgICAgcHVibGljIHN0YXRpYyBpbnQgZ2V0TmV4dElkKFN0cmluZyB0YWJsZU5hbWUsIFN0cmluZyBpZENvbHVtbk5hbWUpIHtcbiAgICA1MVx0ICAgICAgICBpbnQgbmV4dElkID0gMTtcbiAgICA1Mlx0ICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgIDUzXHQgICAgICAgIFN0YXRlbWVudCBzdG10ID0gbnVsbDtcbiAgICA1NFx0ICAgICAgICBSZXN1bHRTZXQgcnMgPSBudWxsO1xuICAgIDU1XHRcbiAgICA1Nlx0ICAgICAgICB0cnkge1xuICAgIDU3XHQgICAgICAgICAgICBjb25uID0gQ29ubmVjdGlvblByb3ZpZGVyLmdldENvbm4oKTtcbiAgICA1OFx0ICAgICAgICAgICAgc3RtdCA9IGNvbm4uY3JlYXRlU3RhdGVtZW50KCk7XG4gICAgNTlcdCAgICAgICAgICAgIFN0cmluZyBxdWVyeSA9IFwiU0VMRUNUIE1BWChcIiArIGlkQ29sdW1uTmFtZSArIFwiKSBBUyBtYXhfaWQgRlJPTSBcIiArIHRhYmxlTmFtZTtcbiAgICA2MFx0ICAgICAgICAgICAgcnMgPSBzdG10LmV4ZWN1dGVRdWVyeShxdWVyeSk7XG4gICAgNjFcdFxuICAgIDYyXHQgICAgICAgICAgICBpZiAocnMubmV4dCgpKSB7XG4gICAgNjNcdCAgICAgICAgICAgICAgICBpbnQgbWF4SWQgPSBycy5nZXRJbnQoXCJtYXhfaWRcIik7XG4gICAgNjRcdCAgICAgICAgICAgICAgICBuZXh0SWQgPSBtYXhJZCArIDE7XG4gICAgNjVcdCAgICAgICAgICAgIH1cbiAgICA2Nlx0ICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgIDY3XHQgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBlLCBcIkVycm9yXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgIDY4XHQgICAgICAgIH0gZmluYWxseSB7XG4gICAgNjlcdCAgICAgICAgICAgIHRyeSB7XG4gICAgNzBcdCAgICAgICAgICAgICAgICBpZiAocnMgIT0gbnVsbCkgcnMuY2xvc2UoKTtcbiAgICA3MVx0ICAgICAgICAgICAgICAgIGlmIChzdG10ICE9IG51bGwpIHN0bXQuY2xvc2UoKTtcbiAgICA3Mlx0ICAgICAgICAgICAgICAgIGlmIChjb25uICE9IG51bGwpIGNvbm4uY2xvc2UoKTtcbiAgICA3M1x0ICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICA3NFx0ICAgICAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgNzVcdCAgICAgICAgICAgIH1cbiAgICA3Nlx0ICAgICAgICB9XG4gICAgNzdcdFxuICAgIDc4XHQgICAgICAgIHJldHVybiBuZXh0SWQ7XG4gICAgNzlcdCAgICB9XG4gICAgODBcdFxuICAgIDgxXHQgICAgcHVibGljIHN0YXRpYyBib29sZWFuIGV4ZWN1dGVUcmFuc2FjdGlvbihTcWxPcGVyYXRpb25bXSBvcGVyYXRpb25zLCBTdHJpbmcgc3VjY2Vzc01zZykge1xuICAgIDgyXHQgICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgODNcdCAgICAgICAgYm9vbGVhbiBzdWNjZXNzID0gZmFsc2U7XG4gICAgODRcdFxuICAgIDg1XHQgICAgICAgIHRyeSB7XG4gICAgODZcdCAgICAgICAgICAgIGNvbm4gPSBDb25uZWN0aW9uUHJvdmlkZXIuZ2V0Q29ubigpO1xuICAgIDg3XHQgICAgICAgICAgICBjb25uLnNldEF1dG9Db21taXQoZmFsc2UpO1xuICAgIDg4XHRcbiAgICA4OVx0ICAgICAgICAgICAgZm9yIChTcWxPcGVyYXRpb24gb3BlcmF0aW9uIDogb3BlcmF0aW9ucykge1xuICAgIDkwXHQgICAgICAgICAgICAgICAgUHJlcGFyZWRTdGF0ZW1lbnQgcHMgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQob3BlcmF0aW9uLmdldFNxbCgpKTtcbiAgICA5MVx0ICAgICAgICAgICAgICAgIG9wZXJhdGlvbi5zZXRQYXJhbWV0ZXJzKHBzKTtcbiAgICA5Mlx0ICAgICAgICAgICAgICAgIHBzLmV4ZWN1dGVVcGRhdGUoKTtcbiAgICA5M1x0ICAgICAgICAgICAgICAgIHBzLmNsb3NlKCk7XG4gICAgOTRcdCAgICAgICAgICAgIH1cbiAgICA5NVx0XG4gICAgOTZcdCAgICAgICAgICAgIGNvbm4uY29tbWl0KCk7XG4gICAgOTdcdCAgICAgICAgICAgIHN1Y2Nlc3MgPSB0cnVlO1xuICAgIDk4XHRcbiAgICA5OVx0ICAgICAgICAgICAgaWYgKHN1Y2Nlc3NNc2cgIT0gbnVsbCAmJiAhc3VjY2Vzc01zZy5pc0VtcHR5KCkpIHtcbiAgIDEwMFx0ICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIHN1Y2Nlc3NNc2csIFwiVGjDoG5oIGPDtG5nXCIsIEpPcHRpb25QYW5lLklORk9STUFUSU9OX01FU1NBR0UpO1xuICAgMTAxXHQgICAgICAgICAgICB9XG4gICAxMDJcdCAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgIDEwM1x0ICAgICAgICAgICAgdHJ5IHtcbiAgIDEwNFx0ICAgICAgICAgICAgICAgIGlmIChjb25uICE9IG51bGwpIGNvbm4ucm9sbGJhY2soKTtcbiAgIDEwNVx0ICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIHJvbGxiYWNrRXgpIHtcbiAgIDEwNlx0ICAgICAgICAgICAgICAgIHJvbGxiYWNrRXgucHJpbnRTdGFja1RyYWNlKCk7XG4gICAxMDdcdCAgICAgICAgICAgIH1cbiAgIDEwOFx0XG4gICAxMDlcdCAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwiRXJyb3I6IFwiICsgZS5nZXRNZXNzYWdlKCksIFwiTOG7l2lcIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAxMTBcdCAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAxMTFcdCAgICAgICAgfSBmaW5hbGx5IHtcbiAgIDExMlx0ICAgICAgICAgICAgdHJ5IHtcbiAgIDExM1x0ICAgICAgICAgICAgICAgIGlmIChjb25uICE9IG51bGwpIHtcbiAgIDExNFx0ICAgICAgICAgICAgICAgICAgICBjb25uLnNldEF1dG9Db21taXQodHJ1ZSk7XG4gICAxMTVcdCAgICAgICAgICAgICAgICAgICAgY29ubi5jbG9zZSgpO1xuICAgMTE2XHQgICAgICAgICAgICAgICAgfVxuICAgMTE3XHQgICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgMTE4XHQgICAgICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgIDExOVx0ICAgICAgICAgICAgfVxuICAgMTIwXHQgICAgICAgIH1cbiAgIDEyMVx0XG4gICAxMjJcdCAgICAgICAgcmV0dXJuIHN1Y2Nlc3M7XG4gICAxMjNcdCAgICB9XG4gICAxMjRcdFxuICAgMTI1XHQgICAgcHVibGljIGludGVyZmFjZSBTcWxPcGVyYXRpb24ge1xuICAgMTI2XHQgICAgICAgIFN0cmluZyBnZXRTcWwoKTtcbiAgIDEyN1x0ICAgICAgICB2b2lkIHNldFBhcmFtZXRlcnMoUHJlcGFyZWRTdGF0ZW1lbnQgcHMpIHRocm93cyBFeGNlcHRpb247XG4gICAxMjhcdCAgICB9XG4gICAxMjlcdH1cbiAgIDEzMFx0XG5Ub3RhbCBsaW5lcyBpbiBmaWxlOiAxMzBcbiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfMDE2VW1oblY2OThxaGJKODM1OVBhcjZ5In19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiRTovSG9jVGFwLzAyX0pBVkEvMDNfUHJvamVjdC9JbnRlcm5ldCBNYW5nZW1lbnQgU3lzdGVtIiwiZm9sZGVyUm9vdCI6IkU6L0hvY1RhcC8wMl9KQVZBLzAzX1Byb2plY3QvSW50ZXJuZXQgTWFuZ2VtZW50IFN5c3RlbSJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInRpbWVzdGFtcCI6IjIwMjUtMDUtMTNUMTM6MDI6NTYuOTc0WiIsInJlc3BvbnNlX3RleHQiOiJOb3cgbGV0IG1lIGNoZWNrIHRoZSBVc2VyU2Vzc2lvbiBjbGFzczpcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiJjNDRhOTQ5ZS1hY2VjLTQzYTgtODUwMy1hOGViMjJjYzhmODgiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1XzAxVUdqeVlvVjdUdk0xbjF4WjJmOXpvYSIsInRvb2xfbmFtZSI6InN0ci1yZXBsYWNlLWVkaXRvciIsImlucHV0X2pzb24iOiJ7XCJjb21tYW5kXCI6IFwidmlld1wiLCBcInBhdGhcIjogXCJzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9BZG1pbi9EYXNoYm9hcmQuamF2YVwiLCBcInZpZXdfcmFuZ2VcIjogWzEsIDUwXX0iLCJtY3Bfc2VydmVyX25hbWUiOiIiLCJtY3BfdG9vbF9uYW1lIjoiIn19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiJOb3cgbGV0IG1lIGNoZWNrIHRoZSBEYXNoYm9hcmQgY2xhc3M6XG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJIZXJlJ3MgdGhlIHJlc3VsdCBvZiBydW5uaW5nIGBjYXQgLW5gIG9uIHNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL1Nlc3Npb24vVXNlclNlc3Npb24uamF2YTpcbiAgICAgMVx0LypcbiAgICAgMlx0ICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9MaWNlbnNlcy9saWNlbnNlLWRlZmF1bHQudHh0IHRvIGNoYW5nZSB0aGlzIGxpY2Vuc2VcbiAgICAgM1x0ICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NsYXNzLmphdmEgdG8gZWRpdCB0aGlzIHRlbXBsYXRlXG4gICAgIDRcdCAqL1xuICAgICA1XHRwYWNrYWdlIGludGVybmV0Lm1hbmdlbWVudC5zeXN0ZW0uU2Vzc2lvbjtcbiAgICAgNlx0XG4gICAgIDdcdGltcG9ydCBNb2RlbC5Vc2VyO1xuICAgICA4XHRcbiAgICAgOVx0LyoqXG4gICAgMTBcdCAqXG4gICAgMTFcdCAqIEBhdXRob3IgTmdvYyBUaGFvXG4gICAgMTJcdCAqL1xuICAgIDEzXHRwdWJsaWMgY2xhc3MgVXNlclNlc3Npb24ge1xuICAgIDE0XHQgICAgcHVibGljIHN0YXRpYyBVc2VyIGN1cnJlbnRVc2VyO1xuICAgIDE1XHRcbiAgICAxNlx0ICAgIHB1YmxpYyBVc2VyU2Vzc2lvbigpIHtcbiAgICAxN1x0ICAgIH1cbiAgICAxOFx0XG4gICAgMTlcdCAgICBwdWJsaWMgc3RhdGljIFVzZXIgZ2V0Q3VycmVudFVzZXIoKSB7XG4gICAgMjBcdCAgICAgICAgcmV0dXJuIGN1cnJlbnRVc2VyO1xuICAgIDIxXHQgICAgfVxuICAgIDIyXHRcbiAgICAyM1x0ICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBzZXRDdXJyZW50VXNlcihVc2VyIGN1cnJlbnRVc2VyKSB7XG4gICAgMjRcdCAgICAgICAgVXNlclNlc3Npb24uY3VycmVudFVzZXIgPSBjdXJyZW50VXNlcjtcbiAgICAyNVx0ICAgIH1cbiAgICAyNlx0ICAgIFxuICAgIDI3XHQgICAgXG4gICAgMjhcdH1cbiAgICAyOVx0XG5Ub3RhbCBsaW5lcyBpbiBmaWxlOiAyOVxuIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV8wMUNIM1dwSmMyZ2ZBNHc3SFZtS1J2dEsifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJFOi9Ib2NUYXAvMDJfSkFWQS8wM19Qcm9qZWN0L0ludGVybmV0IE1hbmdlbWVudCBTeXN0ZW0iLCJmb2xkZXJSb290IjoiRTovSG9jVGFwLzAyX0pBVkEvMDNfUHJvamVjdC9JbnRlcm5ldCBNYW5nZW1lbnQgU3lzdGVtIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwidGltZXN0YW1wIjoiMjAyNS0wNS0xM1QxMzowMzowNC4wMDBaIiwicmVzcG9uc2VfdGV4dCI6Ik5vdyBsZXQgbWUgY2hlY2sgdGhlIERhc2hib2FyZCBjbGFzczpcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiI3YTRhOWY0ZC05ZWFjLTQ4MWQtYmU2Yi1hMzE1YjQ5NzFlNWIiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1XzAxMmhQZEJDek15MW9XdlE1S1lITHZSVCIsInRvb2xfbmFtZSI6InN0ci1yZXBsYWNlLWVkaXRvciIsImlucHV0X2pzb24iOiJ7XCJjb21tYW5kXCI6IFwic3RyX3JlcGxhY2VcIiwgXCJwYXRoXCI6IFwic3JjL0RBTy9Vc2VyREFPLmphdmFcIiwgXCJzdHJfcmVwbGFjZV9lbnRyaWVzXCI6IFt7XCJvbGRfc3RyXCI6IFwiICAgIHB1YmxpYyBzdGF0aWMgYm9vbGVhbiBsb2dpbihmaW5hbCBTdHJpbmcgdXNlck5hbWUsIGZpbmFsIFN0cmluZyBwYXNzd29yZCkge1xcbiAgICAgICAgVXNlciB1c2VyID0gbnVsbDtcXG4gICAgICAgIGJvb2xlYW4gaXNWYWxpZCA9IGZhbHNlO1xcbiAgICAgICAgdHJ5IHtcXG4gICAgICAgICAgICBSZXN1bHRTZXQgcnMgPSBEYk9wZXJhdGlvbnMuZ2V0RGF0YShcXFwiU0VMRUNUICogRlJPTSBVU0VSIFdIRVJFIHVzZXJuYW1lID0gJ1xcXCIgKyB1c2VyTmFtZSArIFxcXCInIGFuZCBwYXNzd29yZCA9ICdcXFwiICsgcGFzc3dvcmQgK1xcXCInXFxcIik7XFxuICAgICAgICAgICAgd2hpbGUgKHJzLm5leHQoKSkge1xcbiAgICAgICAgICAgICAgICBib29sZWFuIGlzQWN0aXZlID0gcnMuZ2V0Qm9vbGVhbihcXFwiaXNBY3RpdmVcXFwiKTtcXG4gICAgICAgICAgICAgICAgaWYgKGlzQWN0aXZlKSB7XFxuICAgICAgICAgICAgICAgICAgICBpc1ZhbGlkID0gdHJ1ZTtcXG4gICAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgIH1cXG4gICAgICAgICAgICBcXG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBleCkge1xcbiAgICAgICAgICAgIGV4LnByaW50U3RhY2tUcmFjZSgpO1xcbiAgICAgICAgfSBcXG5cXG4gICAgICAgIHJldHVybiBpc1ZhbGlkO1xcbiAgICB9XCIsIFwib2xkX3N0cl9zdGFydF9saW5lX251bWJlclwiOiA0NSwgXCJvbGRfc3RyX2VuZF9saW5lX251bWJlclwiOiA2MiwgXCJuZXdfc3RyXCI6IFwiICAgIHB1YmxpYyBzdGF0aWMgVXNlciBsb2dpbihmaW5hbCBTdHJpbmcgdXNlck5hbWUsIGZpbmFsIFN0cmluZyBwYXNzd29yZCkge1xcbiAgICAgICAgVXNlciB1c2VyID0gbnVsbDtcXG4gICAgICAgIHRyeSB7XFxuICAgICAgICAgICAgUmVzdWx0U2V0IHJzID0gRGJPcGVyYXRpb25zLmdldERhdGEoXFxcIlNFTEVDVCAqIEZST00gVVNFUiBXSEVSRSB1c2VybmFtZSA9ICdcXFwiICsgdXNlck5hbWUgKyBcXFwiJyBhbmQgcGFzc3dvcmQgPSAnXFxcIiArIHBhc3N3b3JkICtcXFwiJ1xcXCIpO1xcbiAgICAgICAgICAgIGlmIChycy5uZXh0KCkpIHtcXG4gICAgICAgICAgICAgICAgYm9vbGVhbiBpc0FjdGl2ZSA9IHJzLmdldEJvb2xlYW4oXFxcImlzQWN0aXZlXFxcIik7XFxuICAgICAgICAgICAgICAgIGlmIChpc0FjdGl2ZSkge1xcbiAgICAgICAgICAgICAgICAgICAgdXNlciA9IG5ldyBVc2VyKCk7XFxuICAgICAgICAgICAgICAgICAgICB1c2VyLnNldFVzZXJfaWQocnMuZ2V0SW50KFxcXCJ1c2VyX2lkXFxcIikpO1xcbiAgICAgICAgICAgICAgICAgICAgdXNlci5zZXRVc2VybmFtZShycy5nZXRTdHJpbmcoXFxcInVzZXJuYW1lXFxcIikpO1xcbiAgICAgICAgICAgICAgICAgICAgdXNlci5zZXRQYXNzd29yZChycy5nZXRTdHJpbmcoXFxcInBhc3N3b3JkXFxcIikpO1xcbiAgICAgICAgICAgICAgICAgICAgdXNlci5zZXRSb2xlKHJzLmdldFN0cmluZyhcXFwicm9sZVxcXCIpKTtcXG4gICAgICAgICAgICAgICAgICAgIHVzZXIuc2V0Q3JlYXRlX2F0KHJzLmdldFRpbWVzdGFtcChcXFwiY3JlYXRlZF9hdFxcXCIpLnRvTG9jYWxEYXRlVGltZSgpKTtcXG4gICAgICAgICAgICAgICAgICAgIHVzZXIuc2V0SXNBY3RpdmUoaXNBY3RpdmUpO1xcbiAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgICAgIHJzLmNsb3NlKCk7XFxuICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZXgpIHtcXG4gICAgICAgICAgICBleC5wcmludFN0YWNrVHJhY2UoKTtcXG4gICAgICAgIH0gXFxuXFxuICAgICAgICByZXR1cm4gdXNlcjtcXG4gICAgfVwifV19IiwibWNwX3NlcnZlcl9uYW1lIjoiIiwibWNwX3Rvb2xfbmFtZSI6IiJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiQmFzZWQgb24gbXkgYW5hbHlzaXMgb2YgdGhlIGNvZGUsIEknbGwgbm93IGltcGxlbWVudCB0aGUgZnVuY3Rpb25hbGl0eSB0byBnZXQgYWxsIHVzZXIgaW5mb3JtYXRpb24gd2hlbiBsb2dpbiBpcyBzdWNjZXNzZnVsLiBIZXJlJ3MgbXkgcGxhbjpcblxuMS4gTW9kaWZ5IHRoZSBVc2VyREFPLmxvZ2luIG1ldGhvZCB0byByZXR1cm4gYSBVc2VyIG9iamVjdCBpbnN0ZWFkIG9mIGp1c3QgYSBib29sZWFuXG4yLiBVcGRhdGUgdGhlIExvZ2luLmphdmEgZmlsZSB0byB1c2UgdGhpcyBVc2VyIG9iamVjdCBhbmQgc3RvcmUgaXQgaW4gdGhlIFVzZXJTZXNzaW9uXG4zLiBBZnRlciBzdWNjZXNzZnVsIGxvZ2luLCBzaG93IHRoZSBEYXNoYm9hcmQgd2l0aCB0aGUgdXNlciBpbmZvcm1hdGlvblxuXG5MZXQncyBzdGFydCB3aXRoIHRoZSBpbXBsZW1lbnRhdGlvbjpcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IkhlcmUncyB0aGUgcmVzdWx0IG9mIHJ1bm5pbmcgYGNhdCAtbmAgb24gc3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vQWRtaW4vRGFzaGJvYXJkLmphdmE6XG4gICAgIDFcdC8qXG4gICAgIDJcdCAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvTGljZW5zZXMvbGljZW5zZS1kZWZhdWx0LnR4dCB0byBjaGFuZ2UgdGhpcyBsaWNlbnNlXG4gICAgIDNcdCAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvR1VJRm9ybXMvSkZyYW1lLmphdmEgdG8gZWRpdCB0aGlzIHRlbXBsYXRlXG4gICAgIDRcdCAqL1xuICAgICA1XHRwYWNrYWdlIGludGVybmV0Lm1hbmdlbWVudC5zeXN0ZW0uQWRtaW47XG4gICAgIDZcdFxuICAgICA3XHRpbXBvcnQgTW9kZWwuVXNlcjtcbiAgICAgOFx0aW1wb3J0IGludGVybmV0Lm1hbmdlbWVudC5zeXN0ZW0uU2Vzc2lvbi5Vc2VyU2Vzc2lvbjtcbiAgICAgOVx0aW1wb3J0IGphdmEudGltZS5Mb2NhbFRpbWU7XG4gICAgMTBcdGltcG9ydCBqYXZheC5zd2luZy5KT3B0aW9uUGFuZTtcbiAgICAxMVx0XG4gICAgMTJcdC8qKlxuICAgIDEzXHQgKlxuICAgIDE0XHQgKiBAYXV0aG9yIE5nb2MgVGhhb1xuICAgIDE1XHQgKi9cbiAgICAxNlx0cHVibGljIGNsYXNzIERhc2hib2FyZCBleHRlbmRzIGphdmF4LnN3aW5nLkpGcmFtZSB7XG4gICAgMTdcdFxuICAgIDE4XHQgICAgVXNlciBhZG1pbiA9IFVzZXJTZXNzaW9uLmdldEN1cnJlbnRVc2VyKCk7XG4gICAgMTlcdCAgICBcbiAgICAyMFx0ICAgIC8qKlxuICAgIDIxXHQgICAgICogQ3JlYXRlcyBuZXcgZm9ybSBEYXNoYm9hcmRcbiAgICAyMlx0ICAgICAqL1xuICAgIDIzXHQgICAgcHVibGljIERhc2hib2FyZCgpIHtcbiAgICAyNFx0ICAgICAgICBpbml0Q29tcG9uZW50cygpO1xuICAgIDI1XHQgICAgICAgIHNldHVwSGVsbG8oKTtcbiAgICAyNlx0ICAgICAgICBzZXR1cFVzZXJuYW1lKCk7XG4gICAgMjdcdCAgICB9XG4gICAgMjhcdCAgICBcbiAgICAyOVx0ICAgIHByaXZhdGUgdm9pZCBzZXR1cEhlbGxvKCkge1xuICAgIDMwXHQgICAgICAgIExvY2FsVGltZSBub3cgPSBMb2NhbFRpbWUubm93KCk7XG4gICAgMzFcdCAgICAgICAgaW50IGhvdXIgPSBub3cuZ2V0SG91cigpO1xuICAgIDMyXHQgICAgICAgIFxuICAgIDMzXHQgICAgICAgIFN0cmluZyBncmVldGluZztcbiAgICAzNFx0XG4gICAgMzVcdCAgICAgICAgaWYgKGhvdXIgPj0gNSAmJiBob3VyIDwgMTEpIHtcbiAgICAzNlx0ICAgICAgICAgICAgZ3JlZXRpbmcgPSBcIkNow6BvIGJ14buVaSBzw6FuZyxcIjtcbiAgICAzN1x0ICAgICAgICB9IGVsc2UgaWYgKGhvdXIgPj0gMTEgJiYgaG91ciA8IDE1KSB7XG4gICAgMzhcdCAgICAgICAgICAgIGdyZWV0aW5nID0gXCJDaMOgbyBideG7lWkgdHLGsGEsXCI7XG4gICAgMzlcdCAgICAgICAgfSBlbHNlIGlmIChob3VyID49IDE1ICYmIGhvdXIgPCAxNykge1xuICAgIDQwXHQgICAgICAgICAgICBncmVldGluZyA9IFwiQ2jDoG8gYnXhu5VpIGNoaeG7gXUsXCI7XG4gICAgNDFcdCAgICAgICAgfSBlbHNlIHtcbiAgICA0Mlx0ICAgICAgICAgICAgZ3JlZXRpbmcgPSBcIkNow6BvIGJ14buVaSB04buRaSxcIjtcbiAgICA0M1x0ICAgICAgICB9XG4gICAgNDRcdCAgICAgICAgXG4gICAgNDVcdCAgICAgICAgbGJIZWxsby5zZXRUZXh0KGdyZWV0aW5nKTtcbiAgICA0Nlx0ICAgIH1cbiAgICA0N1x0ICAgIFxuICAgIDQ4XHQgICAgcHJpdmF0ZSB2b2lkIHNldHVwVXNlcm5hbWUoKSB7XG4gICAgNDlcdCAgICAgICAgbGJVc2VyTmFtZS5zZXRUZXh0KGFkbWluLmdldFVzZXJuYW1lKCkpO1xuICAgIDUwXHQgICAgfVxuVG90YWwgbGluZXMgaW4gZmlsZTogMjk2XG4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1XzAxVUdqeVlvVjdUdk0xbjF4WjJmOXpvYSJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkU6L0hvY1RhcC8wMl9KQVZBLzAzX1Byb2plY3QvSW50ZXJuZXQgTWFuZ2VtZW50IFN5c3RlbSIsImZvbGRlclJvb3QiOiJFOi9Ib2NUYXAvMDJfSkFWQS8wM19Qcm9qZWN0L0ludGVybmV0IE1hbmdlbWVudCBTeXN0ZW0ifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJ0aW1lc3RhbXAiOiIyMDI1LTA1LTEzVDEzOjAzOjEwLjU2MFoiLCJyZXNwb25zZV90ZXh0IjoiQmFzZWQgb24gbXkgYW5hbHlzaXMgb2YgdGhlIGNvZGUsIEknbGwgbm93IGltcGxlbWVudCB0aGUgZnVuY3Rpb25hbGl0eSB0byBnZXQgYWxsIHVzZXIgaW5mb3JtYXRpb24gd2hlbiBsb2dpbiBpcyBzdWNjZXNzZnVsLiBIZXJlJ3MgbXkgcGxhbjpcblxuMS4gTW9kaWZ5IHRoZSBVc2VyREFPLmxvZ2luIG1ldGhvZCB0byByZXR1cm4gYSBVc2VyIG9iamVjdCBpbnN0ZWFkIG9mIGp1c3QgYSBib29sZWFuXG4yLiBVcGRhdGUgdGhlIExvZ2luLmphdmEgZmlsZSB0byB1c2UgdGhpcyBVc2VyIG9iamVjdCBhbmQgc3RvcmUgaXQgaW4gdGhlIFVzZXJTZXNzaW9uXG4zLiBBZnRlciBzdWNjZXNzZnVsIGxvZ2luLCBzaG93IHRoZSBEYXNoYm9hcmQgd2l0aCB0aGUgdXNlciBpbmZvcm1hdGlvblxuXG5MZXQncyBzdGFydCB3aXRoIHRoZSBpbXBsZW1lbnRhdGlvbjpcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiJkMzQ3MWZiNS1kOTYwLTQ1ZmMtOTlmMS05ZDczMTAxNjgzNWEiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1XzAxTUJabXRWUXlpUXZlR1BzWG1vM05ZYSIsInRvb2xfbmFtZSI6InN0ci1yZXBsYWNlLWVkaXRvciIsImlucHV0X2pzb24iOiJ7XCJjb21tYW5kXCI6IFwic3RyX3JlcGxhY2VcIiwgXCJwYXRoXCI6IFwic3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vTG9naW4uamF2YVwiLCBcInN0cl9yZXBsYWNlX2VudHJpZXNcIjogW3tcIm9sZF9zdHJcIjogXCIgICAgcHJpdmF0ZSB2b2lkIGJ0bkxvZ2luQWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkxvZ2luQWN0aW9uUGVyZm9ybWVkXFxuICAgICAgICAvLyBUT0RPIGFkZCB5b3VyIGhhbmRsaW5nIGNvZGUgaGVyZTpcXG4gICAgICAgIGlmKHZhbGlkYXRlRmllbGRzKCkpIHtcXG4gICAgICAgICAgICB0cnl7XFxuICAgICAgICAgICAgICAgIFN0cmluZyB1c2VybmFtZSA9IHR4dFVzZXJOYW1lLmdldFRleHQoKS50cmltKCk7XFxuICAgICAgICAgICAgICAgIFN0cmluZyBwYXNzd29yZCA9IHR4dFBhc3N3b3JkLmdldFRleHQoKS50cmltKCk7XFxuXFxuICAgICAgICAgICAgICAgIFVzZXIgdXNlciA9IG51bGw7XFxuICAgICAgICAgICAgICAgIGJvb2xlYW4gaXNTdWNjZXNzID0gVXNlckRBTy5sb2dpbih1c2VybmFtZSwgcGFzc3dvcmQpO1xcblxcbiAgICAgICAgICAgICAgICBpZihpc1N1Y2Nlc3MpIHtcXG4gICAgICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKHRoaXMsIFxcXCJcXHUwMTEwXFx1MDEwM25nIG5oXFx1MWVhZHAgdGhcXHUwMGUwbmggY1xcdTAwZjRuZyFcXFwiLCBcXFwiVGhcXHUwMGY0bmcgYlxcdTAwZTFvXFxcIiwgSk9wdGlvblBhbmUuSU5GT1JNQVRJT05fTUVTU0FHRSk7XFxuLy8gICAgICAgICAgICAgICAgICAgIG5ldyBNYWluRnJhbWUoKS5zZXRWaXNpYmxlKHRydWUpO1xcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwb3NlKCk7XFxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XFxuICAgICAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyh0aGlzLCBcXFwiU2FpIHRcXHUwMGVhbiBcXHUwMTExXFx1MDEwM25nIG5oXFx1MWVhZHAgaG9cXHUxZWI3YyBtXFx1MWVhZHQga2hcXHUxZWE5dS5cXFwiLCBcXFwiTFxcdTFlZDdpXFxcIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XFxuICAgICAgICAgICAgICAgIH1cIiwgXCJvbGRfc3RyX3N0YXJ0X2xpbmVfbnVtYmVyXCI6IDEsIFwib2xkX3N0cl9lbmRfbGluZV9udW1iZXJcIjogMTcsIFwibmV3X3N0clwiOiBcIiAgICBwcml2YXRlIHZvaWQgYnRuTG9naW5BY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuTG9naW5BY3Rpb25QZXJmb3JtZWRcXG4gICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxcbiAgICAgICAgaWYodmFsaWRhdGVGaWVsZHMoKSkge1xcbiAgICAgICAgICAgIHRyeXtcXG4gICAgICAgICAgICAgICAgU3RyaW5nIHVzZXJuYW1lID0gdHh0VXNlck5hbWUuZ2V0VGV4dCgpLnRyaW0oKTtcXG4gICAgICAgICAgICAgICAgU3RyaW5nIHBhc3N3b3JkID0gdHh0UGFzc3dvcmQuZ2V0VGV4dCgpLnRyaW0oKTtcXG5cXG4gICAgICAgICAgICAgICAgVXNlciB1c2VyID0gVXNlckRBTy5sb2dpbih1c2VybmFtZSwgcGFzc3dvcmQpO1xcblxcbiAgICAgICAgICAgICAgICBpZih1c2VyICE9IG51bGwpIHtcXG4gICAgICAgICAgICAgICAgICAgIC8vIFN0b3JlIHVzZXIgaW5mb3JtYXRpb24gaW4gdGhlIHNlc3Npb25cXG4gICAgICAgICAgICAgICAgICAgIGludGVybmV0Lm1hbmdlbWVudC5zeXN0ZW0uU2Vzc2lvbi5Vc2VyU2Vzc2lvbi5zZXRDdXJyZW50VXNlcih1c2VyKTtcXG4gICAgICAgICAgICAgICAgICAgIFxcbiAgICAgICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2codGhpcywgXFxcIlxcdTAxMTBcXHUwMTAzbmcgbmhcXHUxZWFkcCB0aFxcdTAwZTBuaCBjXFx1MDBmNG5nIVxcXCIsIFxcXCJUaFxcdTAwZjRuZyBiXFx1MDBlMW9cXFwiLCBKT3B0aW9uUGFuZS5JTkZPUk1BVElPTl9NRVNTQUdFKTtcXG4gICAgICAgICAgICAgICAgICAgIFxcbiAgICAgICAgICAgICAgICAgICAgLy8gT3BlbiB0aGUgYXBwcm9wcmlhdGUgZGFzaGJvYXJkIGJhc2VkIG9uIHVzZXIgcm9sZVxcbiAgICAgICAgICAgICAgICAgICAgaWYoXFxcImFkbWluXFxcIi5lcXVhbHNJZ25vcmVDYXNlKHVzZXIuZ2V0Um9sZSgpKSkge1xcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBpbnRlcm5ldC5tYW5nZW1lbnQuc3lzdGVtLkFkbWluLkRhc2hib2FyZCgpLnNldFZpc2libGUodHJ1ZSk7XFxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvciByZWd1bGFyIHVzZXJzLCB5b3UgY2FuIGNyZWF0ZSBhIGRpZmZlcmVudCBkYXNoYm9hcmRcXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBuZXcgVXNlckRhc2hib2FyZCgpLnNldFZpc2libGUodHJ1ZSk7XFxuICAgICAgICAgICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2codGhpcywgXFxcIkNoXFx1MWVlOWMgblxcdTAxMDNuZyBcXHUwMTExYW5nIFxcdTAxMTFcXHUwMWIwXFx1MWVlM2MgcGhcXHUwMGUxdCB0cmlcXHUxZWMzbiFcXFwiLCBcXFwiVGhcXHUwMGY0bmcgYlxcdTAwZTFvXFxcIiwgSk9wdGlvblBhbmUuSU5GT1JNQVRJT05fTUVTU0FHRSk7XFxuICAgICAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgICAgICAgICBcXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcG9zZSgpO1xcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xcbiAgICAgICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2codGhpcywgXFxcIlNhaSB0XFx1MDBlYW4gXFx1MDExMVxcdTAxMDNuZyBuaFxcdTFlYWRwIGhvXFx1MWViN2MgbVxcdTFlYWR0IGtoXFx1MWVhOXUuXFxcIiwgXFxcIkxcXHUxZWQ3aVxcXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xcbiAgICAgICAgICAgICAgICB9XCJ9XX0iLCJtY3Bfc2VydmVyX25hbWUiOiIiLCJtY3BfdG9vbF9uYW1lIjoiIn19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiJOb3csIGxldCdzIHVwZGF0ZSB0aGUgTG9naW4uamF2YSBmaWxlIHRvIHVzZSB0aGUgVXNlciBvYmplY3QgcmV0dXJuZWQgYnkgdGhlIGxvZ2luIG1ldGhvZCBhbmQgc3RvcmUgaXQgaW4gdGhlIFVzZXJTZXNzaW9uOlxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiU3VjY2Vzc2Z1bGx5IGVkaXRlZCB0aGUgZmlsZSBzcmMvREFPL1VzZXJEQU8uamF2YS5cblJlc3VsdCBmb3Igc3RyX3JlcGxhY2UgZm9yIGVudHJ5IHdpdGggaW5kZXggWzBdOlxuUmVwbGFjZW1lbnQgc3VjY2Vzc2Z1bC5cbkVkaXRlZCBzZWN0aW9uIGFmdGVyIElERSBhdXRvLWZvcm1hdHRpbmcgd2FzIGFwcGxpZWQ6XG4gICAgNDFcdFxuICAgIDQyXHQgICAgICAgIERiT3BlcmF0aW9ucy5leGVjdXRlVHJhbnNhY3Rpb24ob3BlcmF0aW9ucywgXCJUaMOqbSB0w6BpIGtob+G6o24gdGjDoG5oIGPDtG5nIVwiKTtcbiAgICA0M1x0ICAgIH1cbiAgICA0NFx0XG4gICAgNDVcdCAgICBwdWJsaWMgc3RhdGljIFVzZXIgbG9naW4oZmluYWwgU3RyaW5nIHVzZXJOYW1lLCBmaW5hbCBTdHJpbmcgcGFzc3dvcmQpIHtcbiAgICA0Nlx0ICAgICAgICBVc2VyIHVzZXIgPSBudWxsO1xuICAgIDQ3XHQgICAgICAgIHRyeSB7XG4gICAgNDhcdCAgICAgICAgICAgIFJlc3VsdFNldCBycyA9IERiT3BlcmF0aW9ucy5nZXREYXRhKFwiU0VMRUNUICogRlJPTSBVU0VSIFdIRVJFIHVzZXJuYW1lID0gJ1wiICsgdXNlck5hbWUgKyBcIicgYW5kIHBhc3N3b3JkID0gJ1wiICsgcGFzc3dvcmQgK1wiJ1wiKTtcbiAgICA0OVx0ICAgICAgICAgICAgaWYgKHJzLm5leHQoKSkge1xuICAgIDUwXHQgICAgICAgICAgICAgICAgYm9vbGVhbiBpc0FjdGl2ZSA9IHJzLmdldEJvb2xlYW4oXCJpc0FjdGl2ZVwiKTtcbiAgICA1MVx0ICAgICAgICAgICAgICAgIGlmIChpc0FjdGl2ZSkge1xuICAgIDUyXHQgICAgICAgICAgICAgICAgICAgIHVzZXIgPSBuZXcgVXNlcigpO1xuICAgIDUzXHQgICAgICAgICAgICAgICAgICAgIHVzZXIuc2V0VXNlcl9pZChycy5nZXRJbnQoXCJ1c2VyX2lkXCIpKTtcbiAgICA1NFx0ICAgICAgICAgICAgICAgICAgICB1c2VyLnNldFVzZXJuYW1lKHJzLmdldFN0cmluZyhcInVzZXJuYW1lXCIpKTtcbiAgICA1NVx0ICAgICAgICAgICAgICAgICAgICB1c2VyLnNldFBhc3N3b3JkKHJzLmdldFN0cmluZyhcInBhc3N3b3JkXCIpKTtcbiAgICA1Nlx0ICAgICAgICAgICAgICAgICAgICB1c2VyLnNldFJvbGUocnMuZ2V0U3RyaW5nKFwicm9sZVwiKSk7XG4gICAgNTdcdCAgICAgICAgICAgICAgICAgICAgdXNlci5zZXRDcmVhdGVfYXQocnMuZ2V0VGltZXN0YW1wKFwiY3JlYXRlZF9hdFwiKS50b0xvY2FsRGF0ZVRpbWUoKSk7XG4gICAgNThcdCAgICAgICAgICAgICAgICAgICAgdXNlci5zZXRJc0FjdGl2ZShpc0FjdGl2ZSk7XG4gICAgNTlcdCAgICAgICAgICAgICAgICB9XG4gICAgNjBcdCAgICAgICAgICAgIH1cbiAgICA2MVx0ICAgICAgICAgICAgcnMuY2xvc2UoKTtcbiAgICA2Mlx0ICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZXgpIHtcbiAgICA2M1x0ICAgICAgICAgICAgZXgucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgNjRcdCAgICAgICAgfVxuICAgIDY1XHRcbiAgICA2Nlx0ICAgICAgICByZXR1cm4gdXNlcjtcbiAgICA2N1x0ICAgIH1cbiAgICA2OFx0XG4gICAgNjlcdCAgICBwdWJsaWMgc3RhdGljIHZvaWQgdXBkYXRlKFVzZXIgb2JqKSB7XG4gICAgNzBcdCAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpO1xuICAgIDcxXHQgICAgfVxuXG5SZXZpZXcgdGhlIGNoYW5nZXMgYW5kIG1ha2Ugc3VyZSB0aGV5IGFyZSBhcyBleHBlY3RlZCAoY29ycmVjdCBpbmRlbnRhdGlvbiwgbm8gZHVwbGljYXRlIGxpbmVzLCBldGMpLlxuRWRpdCB0aGUgZmlsZSBhZ2FpbiBpZiBuZWNlc3NhcnkuXG4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1XzAxMmhQZEJDek15MW9XdlE1S1lITHZSVCJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkU6L0hvY1RhcC8wMl9KQVZBLzAzX1Byb2plY3QvSW50ZXJuZXQgTWFuZ2VtZW50IFN5c3RlbSIsImZvbGRlclJvb3QiOiJFOi9Ib2NUYXAvMDJfSkFWQS8wM19Qcm9qZWN0L0ludGVybmV0IE1hbmdlbWVudCBTeXN0ZW0ifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJ0aW1lc3RhbXAiOiIyMDI1LTA1LTEzVDEzOjAzOjI5LjU0N1oiLCJyZXNwb25zZV90ZXh0IjoiTm93LCBsZXQncyB1cGRhdGUgdGhlIExvZ2luLmphdmEgZmlsZSB0byB1c2UgdGhlIFVzZXIgb2JqZWN0IHJldHVybmVkIGJ5IHRoZSBsb2dpbiBtZXRob2QgYW5kIHN0b3JlIGl0IGluIHRoZSBVc2VyU2Vzc2lvbjpcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiI2NWMxM2E1OS0xYzlhLTQxMmQtOGVmMC0xNTFjOWQ4Yzk0MTUiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1XzAxUzQ4b2hmRWdHYTJCZW9OSllWd2F5RCIsInRvb2xfbmFtZSI6InN0ci1yZXBsYWNlLWVkaXRvciIsImlucHV0X2pzb24iOiJ7XCJjb21tYW5kXCI6IFwidmlld1wiLCBcInBhdGhcIjogXCJzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9Mb2dpbi5qYXZhXCJ9IiwibWNwX3NlcnZlcl9uYW1lIjoiIiwibWNwX3Rvb2xfbmFtZSI6IiJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiTGV0IG1lIHZpZXcgdGhlIExvZ2luLmphdmEgZmlsZSB0byBmaW5kIHRoZSBjb3JyZWN0IGxvY2F0aW9uIGZvciB0aGUgYnRuTG9naW5BY3Rpb25QZXJmb3JtZWQgbWV0aG9kOlxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiRmFpbGVkIHRvIGVkaXQgdGhlIGZpbGUgc3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vTG9naW4uamF2YS4gU2VlIGJlbG93IGZvciBkZXRhaWxzLlxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZSBmb3IgZW50cnkgd2l0aCBpbmRleCBbMF06XG5ObyByZXBsYWNlbWVudCB3YXMgcGVyZm9ybWVkLCBvbGRTdHIgZGlkIG5vdCBhcHBlYXIgdmVyYmF0aW0gaW4gc3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vTG9naW4uamF2YS5cblRoZSBjb250ZW50IGluIHRoZSBzcGVjaWZpZWQgcmVnaW9uIGlzOlxuICAgICAxXHQvKlxuICAgICAyXHQgKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0xpY2Vuc2VzL2xpY2Vuc2UtZGVmYXVsdC50eHQgdG8gY2hhbmdlIHRoaXMgbGljZW5zZVxuICAgICAzXHQgKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0dVSUZvcm1zL0pGcmFtZS5qYXZhIHRvIGVkaXQgdGhpcyB0ZW1wbGF0ZVxuICAgICA0XHQgKi9cbiAgICAgNVx0cGFja2FnZSBpbnRlcm5ldC5tYW5nZW1lbnQuc3lzdGVtO1xuICAgICA2XHRcbiAgICAgN1x0aW1wb3J0IERBTy5Vc2VyREFPO1xuICAgICA4XHRpbXBvcnQgTW9kZWwuVXNlcjtcbiAgICAgOVx0aW1wb3J0IGludGVybmV0Lm1hbmdlbWVudC5zeXN0ZW0uU2Vzc2lvbi5Vc2VyU2Vzc2lvbjtcbiAgICAxMFx0aW1wb3J0IGphdmF4LnN3aW5nLkpPcHRpb25QYW5lO1xuICAgIDExXHRcbiAgICAxMlx0LyoqXG4gICAgMTNcdCAqXG4gICAgMTRcdCAqIEBhdXRob3IgTmdvYyBUaGFvXG4gICAgMTVcdCAqL1xuICAgIDE2XHRwdWJsaWMgY2xhc3MgTG9naW4gZXh0ZW5kcyBqYXZheC5zd2luZy5KRnJhbWUge1xuICAgIDE3XHRcbiAgICAxOFx0ICAgIC8qKlxuICAgIDE5XHQgICAgICogQ3JlYXRlcyBuZXcgZm9ybSBMb2dpblxuICAgIDIwXHQgICAgICovXG4gICAgMjFcdCAgICBwdWJsaWMgTG9naW4oKSB7XG5cbkRpZmYgYmV0d2VlbiBvbGRTdHIgYW5kIHRoZSBzcGVjaWZpZWQgcmVnaW9uIGlzOlxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLS0tIG9sZFN0clxuKysrIHJlZ2lvbkNvbnRlbnRcbkBAIC0xLDE3ICsxLDE3IEBAXG4tICAgIHByaXZhdGUgdm9pZCBidG5Mb2dpbkFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5Mb2dpbkFjdGlvblBlcmZvcm1lZFxuLSAgICAgICAgLy8gVE9ETyBhZGQgeW91ciBoYW5kbGluZyBjb2RlIGhlcmU6XG4tICAgICAgICBpZih2YWxpZGF0ZUZpZWxkcygpKSB7XG4tICAgICAgICAgICAgdHJ5e1xuLSAgICAgICAgICAgICAgICBTdHJpbmcgdXNlcm5hbWUgPSB0eHRVc2VyTmFtZS5nZXRUZXh0KCkudHJpbSgpO1xuLSAgICAgICAgICAgICAgICBTdHJpbmcgcGFzc3dvcmQgPSB0eHRQYXNzd29yZC5nZXRUZXh0KCkudHJpbSgpO1xuKy8qXG4rICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9MaWNlbnNlcy9saWNlbnNlLWRlZmF1bHQudHh0IHRvIGNoYW5nZSB0aGlzIGxpY2Vuc2VcbisgKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0dVSUZvcm1zL0pGcmFtZS5qYXZhIHRvIGVkaXQgdGhpcyB0ZW1wbGF0ZVxuKyAqL1xuK3BhY2thZ2UgaW50ZXJuZXQubWFuZ2VtZW50LnN5c3RlbTtcbiBcbi0gICAgICAgICAgICAgICAgVXNlciB1c2VyID0gbnVsbDtcbi0gICAgICAgICAgICAgICAgYm9vbGVhbiBpc1N1Y2Nlc3MgPSBVc2VyREFPLmxvZ2luKHVzZXJuYW1lLCBwYXNzd29yZCk7XG4raW1wb3J0IERBTy5Vc2VyREFPO1xuK2ltcG9ydCBNb2RlbC5Vc2VyO1xuK2ltcG9ydCBpbnRlcm5ldC5tYW5nZW1lbnQuc3lzdGVtLlNlc3Npb24uVXNlclNlc3Npb247XG4raW1wb3J0IGphdmF4LnN3aW5nLkpPcHRpb25QYW5lO1xuIFxuLSAgICAgICAgICAgICAgICBpZihpc1N1Y2Nlc3MpIHtcbi0gICAgICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKHRoaXMsIFwixJDEg25nIG5o4bqtcCB0aMOgbmggY8O0bmchXCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuSU5GT1JNQVRJT05fTUVTU0FHRSk7XG4tLy8gICAgICAgICAgICAgICAgICAgIG5ldyBNYWluRnJhbWUoKS5zZXRWaXNpYmxlKHRydWUpO1xuLSAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwb3NlKCk7XG4tICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4tICAgICAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyh0aGlzLCBcIlNhaSB0w6puIMSRxINuZyBuaOG6rXAgaG/hurdjIG3huq10IGto4bqpdS5cIiwgXCJM4buXaVwiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbi0gICAgICAgICAgICAgICAgfVxuKy8qKlxuKyAqXG4rICogQGF1dGhvciBOZ29jIFRoYW9cbisgKi9cbitwdWJsaWMgY2xhc3MgTG9naW4gZXh0ZW5kcyBqYXZheC5zd2luZy5KRnJhbWUge1xuK1xuXG5cbkZpeCBmYWlsZWQgc3RyX3JlcGxhY2UgZW50cmllcyBhY2NvcmRpbmdseSBhbmQgdHJ5IGFnYWluLlxuIiwiaXNfZXJyb3IiOnRydWUsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1XzAxTUJabXRWUXlpUXZlR1BzWG1vM05ZYSJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkU6L0hvY1RhcC8wMl9KQVZBLzAzX1Byb2plY3QvSW50ZXJuZXQgTWFuZ2VtZW50IFN5c3RlbSIsImZvbGRlclJvb3QiOiJFOi9Ib2NUYXAvMDJfSkFWQS8wM19Qcm9qZWN0L0ludGVybmV0IE1hbmdlbWVudCBTeXN0ZW0ifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJ0aW1lc3RhbXAiOiIyMDI1LTA1LTEzVDEzOjAzOjUwLjMzOVoiLCJyZXNwb25zZV90ZXh0IjoiTGV0IG1lIHZpZXcgdGhlIExvZ2luLmphdmEgZmlsZSB0byBmaW5kIHRoZSBjb3JyZWN0IGxvY2F0aW9uIGZvciB0aGUgYnRuTG9naW5BY3Rpb25QZXJmb3JtZWQgbWV0aG9kOlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6IjZmZDEzNDIzLThhY2YtNGZjMS05YTdiLWExZjI5OTg5ZmIzMiIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfMDE3UzVZU1RmM043TGd0MXBtb1lIaWJhIiwidG9vbF9uYW1lIjoic3RyLXJlcGxhY2UtZWRpdG9yIiwiaW5wdXRfanNvbiI6IntcImNvbW1hbmRcIjogXCJzdHJfcmVwbGFjZVwiLCBcInBhdGhcIjogXCJzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9Mb2dpbi5qYXZhXCIsIFwic3RyX3JlcGxhY2VfZW50cmllc1wiOiBbe1wib2xkX3N0clwiOiBcIiAgICBwcml2YXRlIHZvaWQgYnRuTG9naW5BY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuTG9naW5BY3Rpb25QZXJmb3JtZWRcXG4gICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxcbiAgICAgICAgaWYodmFsaWRhdGVGaWVsZHMoKSkge1xcbiAgICAgICAgICAgIHRyeXtcXG4gICAgICAgICAgICAgICAgU3RyaW5nIHVzZXJuYW1lID0gdHh0VXNlck5hbWUuZ2V0VGV4dCgpLnRyaW0oKTtcXG4gICAgICAgICAgICAgICAgU3RyaW5nIHBhc3N3b3JkID0gdHh0UGFzc3dvcmQuZ2V0VGV4dCgpLnRyaW0oKTtcXG4gICAgICAgICAgICAgICAgXFxuICAgICAgICAgICAgICAgIFVzZXIgdXNlciA9IG51bGw7XFxuICAgICAgICAgICAgICAgIGJvb2xlYW4gaXNTdWNjZXNzID0gVXNlckRBTy5sb2dpbih1c2VybmFtZSwgcGFzc3dvcmQpO1xcblxcbiAgICAgICAgICAgICAgICBpZihpc1N1Y2Nlc3MpIHtcXG4gICAgICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKHRoaXMsIFxcXCJcXHUwMTEwXFx1MDEwM25nIG5oXFx1MWVhZHAgdGhcXHUwMGUwbmggY1xcdTAwZjRuZyFcXFwiLCBcXFwiVGhcXHUwMGY0bmcgYlxcdTAwZTFvXFxcIiwgSk9wdGlvblBhbmUuSU5GT1JNQVRJT05fTUVTU0FHRSk7XFxuICAgICAgICAgICAgICAgICBcXG4gICAgICAgICAgICAgICAgICAgIFVzZXJTZXNzaW9uLnNldEN1cnJlbnRVc2VyKHVzZXIpO1xcbiAgICAgICAgICAgICAgICAgICAgXFxuLy8gICAgICAgICAgICAgICAgICAgIG5ldyBNYWluRnJhbWUoKS5zZXRWaXNpYmxlKHRydWUpO1xcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwb3NlKCk7XFxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XFxuICAgICAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyh0aGlzLCBcXFwiU2FpIHRcXHUwMGVhbiBcXHUwMTExXFx1MDEwM25nIG5oXFx1MWVhZHAgaG9cXHUxZWI3YyBtXFx1MWVhZHQga2hcXHUxZWE5dS5cXFwiLCBcXFwiTFxcdTFlZDdpXFxcIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XFxuICAgICAgICAgICAgICAgIH1cIiwgXCJvbGRfc3RyX3N0YXJ0X2xpbmVfbnVtYmVyXCI6IDE5OCwgXCJvbGRfc3RyX2VuZF9saW5lX251bWJlclwiOiAyMTcsIFwibmV3X3N0clwiOiBcIiAgICBwcml2YXRlIHZvaWQgYnRuTG9naW5BY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuTG9naW5BY3Rpb25QZXJmb3JtZWRcXG4gICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxcbiAgICAgICAgaWYodmFsaWRhdGVGaWVsZHMoKSkge1xcbiAgICAgICAgICAgIHRyeXtcXG4gICAgICAgICAgICAgICAgU3RyaW5nIHVzZXJuYW1lID0gdHh0VXNlck5hbWUuZ2V0VGV4dCgpLnRyaW0oKTtcXG4gICAgICAgICAgICAgICAgU3RyaW5nIHBhc3N3b3JkID0gdHh0UGFzc3dvcmQuZ2V0VGV4dCgpLnRyaW0oKTtcXG4gICAgICAgICAgICAgICAgXFxuICAgICAgICAgICAgICAgIFVzZXIgdXNlciA9IFVzZXJEQU8ubG9naW4odXNlcm5hbWUsIHBhc3N3b3JkKTtcXG5cXG4gICAgICAgICAgICAgICAgaWYodXNlciAhPSBudWxsKSB7XFxuICAgICAgICAgICAgICAgICAgICAvLyBTdG9yZSB1c2VyIGluZm9ybWF0aW9uIGluIHRoZSBzZXNzaW9uXFxuICAgICAgICAgICAgICAgICAgICBVc2VyU2Vzc2lvbi5zZXRDdXJyZW50VXNlcih1c2VyKTtcXG4gICAgICAgICAgICAgICAgICAgIFxcbiAgICAgICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2codGhpcywgXFxcIlxcdTAxMTBcXHUwMTAzbmcgbmhcXHUxZWFkcCB0aFxcdTAwZTBuaCBjXFx1MDBmNG5nIVxcXCIsIFxcXCJUaFxcdTAwZjRuZyBiXFx1MDBlMW9cXFwiLCBKT3B0aW9uUGFuZS5JTkZPUk1BVElPTl9NRVNTQUdFKTtcXG4gICAgICAgICAgICAgICAgICAgIFxcbiAgICAgICAgICAgICAgICAgICAgLy8gT3BlbiB0aGUgYXBwcm9wcmlhdGUgZGFzaGJvYXJkIGJhc2VkIG9uIHVzZXIgcm9sZVxcbiAgICAgICAgICAgICAgICAgICAgaWYoXFxcImFkbWluXFxcIi5lcXVhbHNJZ25vcmVDYXNlKHVzZXIuZ2V0Um9sZSgpKSkge1xcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBpbnRlcm5ldC5tYW5nZW1lbnQuc3lzdGVtLkFkbWluLkRhc2hib2FyZCgpLnNldFZpc2libGUodHJ1ZSk7XFxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvciByZWd1bGFyIHVzZXJzLCB5b3UgY2FuIGNyZWF0ZSBhIGRpZmZlcmVudCBkYXNoYm9hcmRcXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBuZXcgVXNlckRhc2hib2FyZCgpLnNldFZpc2libGUodHJ1ZSk7XFxuICAgICAgICAgICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2codGhpcywgXFxcIkNoXFx1MWVlOWMgblxcdTAxMDNuZyBcXHUwMTExYW5nIFxcdTAxMTFcXHUwMWIwXFx1MWVlM2MgcGhcXHUwMGUxdCB0cmlcXHUxZWMzbiFcXFwiLCBcXFwiVGhcXHUwMGY0bmcgYlxcdTAwZTFvXFxcIiwgSk9wdGlvblBhbmUuSU5GT1JNQVRJT05fTUVTU0FHRSk7XFxuICAgICAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgICAgICAgICBcXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcG9zZSgpO1xcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xcbiAgICAgICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2codGhpcywgXFxcIlNhaSB0XFx1MDBlYW4gXFx1MDExMVxcdTAxMDNuZyBuaFxcdTFlYWRwIGhvXFx1MWViN2MgbVxcdTFlYWR0IGtoXFx1MWVhOXUuXFxcIiwgXFxcIkxcXHUxZWQ3aVxcXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xcbiAgICAgICAgICAgICAgICB9XCJ9XX0iLCJtY3Bfc2VydmVyX25hbWUiOiIiLCJtY3BfdG9vbF9uYW1lIjoiIn19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiJOb3cgSSdsbCB1cGRhdGUgdGhlIGJ0bkxvZ2luQWN0aW9uUGVyZm9ybWVkIG1ldGhvZCBpbiB0aGUgTG9naW4uamF2YSBmaWxlOlxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiSGVyZSdzIHRoZSByZXN1bHQgb2YgcnVubmluZyBgY2F0IC1uYCBvbiBzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9Mb2dpbi5qYXZhOlxuICAgICAxXHQvKlxuICAgICAyXHQgKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0xpY2Vuc2VzL2xpY2Vuc2UtZGVmYXVsdC50eHQgdG8gY2hhbmdlIHRoaXMgbGljZW5zZVxuICAgICAzXHQgKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0dVSUZvcm1zL0pGcmFtZS5qYXZhIHRvIGVkaXQgdGhpcyB0ZW1wbGF0ZVxuICAgICA0XHQgKi9cbiAgICAgNVx0cGFja2FnZSBpbnRlcm5ldC5tYW5nZW1lbnQuc3lzdGVtO1xuICAgICA2XHRcbiAgICAgN1x0aW1wb3J0IERBTy5Vc2VyREFPO1xuICAgICA4XHRpbXBvcnQgTW9kZWwuVXNlcjtcbiAgICAgOVx0aW1wb3J0IGludGVybmV0Lm1hbmdlbWVudC5zeXN0ZW0uU2Vzc2lvbi5Vc2VyU2Vzc2lvbjtcbiAgICAxMFx0aW1wb3J0IGphdmF4LnN3aW5nLkpPcHRpb25QYW5lO1xuICAgIDExXHRcbiAgICAxMlx0LyoqXG4gICAgMTNcdCAqXG4gICAgMTRcdCAqIEBhdXRob3IgTmdvYyBUaGFvXG4gICAgMTVcdCAqL1xuICAgIDE2XHRwdWJsaWMgY2xhc3MgTG9naW4gZXh0ZW5kcyBqYXZheC5zd2luZy5KRnJhbWUge1xuICAgIDE3XHRcbiAgICAxOFx0ICAgIC8qKlxuICAgIDE5XHQgICAgICogQ3JlYXRlcyBuZXcgZm9ybSBMb2dpblxuICAgIDIwXHQgICAgICovXG4gICAgMjFcdCAgICBwdWJsaWMgTG9naW4oKSB7XG4gICAgMjJcdCAgICAgICAgaW5pdENvbXBvbmVudHMoKTtcbiAgICAyM1x0ICAgICAgICBzZXRUaXRsZShcIsSQxINuZyBrw71cIik7XG4gICAgMjRcdCAgICB9XG4gICAgMjVcdFxuICAgIDI2XHQgICAgcHVibGljIHZvaWQgY2xlYXIoKXtcbiAgICAyN1x0ICAgICAgICB0eHRVc2VyTmFtZS5zZXRUZXh0KFwiXCIpO1xuICAgIDI4XHQgICAgICAgIHR4dFBhc3N3b3JkLnNldFRleHQoXCJcIik7XG4gICAgMjlcdCAgICB9XG4gICAgMzBcdFxuICAgIDMxXHQgICAgcHVibGljIGJvb2xlYW4gdmFsaWRhdGVGaWVsZHMoKXtcbiAgICAzMlx0ICAgICAgICBTdHJpbmcgdXNlck5hbWUgPSB0eHRVc2VyTmFtZS5nZXRUZXh0KCk7XG4gICAgMzNcdCAgICAgICAgU3RyaW5nIHBhc3N3b3JkID0gdHh0UGFzc3dvcmQuZ2V0VGV4dCgpO1xuICAgIDM0XHRcbiAgICAzNVx0ICAgICAgICBpZih1c2VyTmFtZS5pc0VtcHR5KCkgfHwgcGFzc3dvcmQuaXNFbXB0eSgpKXtcbiAgICAzNlx0ICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXCJWdWkgbMOybmcga2jDtG5nIGLhu48gdHLhu5FuZyFcIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgICAzN1x0ICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIDM4XHQgICAgICAgIH1cbiAgICAzOVx0ICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICA0MFx0ICAgIH1cbiAgICA0MVx0XG4gICAgNDJcdCAgICAvKipcbiAgICA0M1x0ICAgICAqIFRoaXMgbWV0aG9kIGlzIGNhbGxlZCBmcm9tIHdpdGhpbiB0aGUgY29uc3RydWN0b3IgdG8gaW5pdGlhbGl6ZSB0aGUgZm9ybS5cbiAgICA0NFx0ICAgICAqIFdBUk5JTkc6IERvIE5PVCBtb2RpZnkgdGhpcyBjb2RlLiBUaGUgY29udGVudCBvZiB0aGlzIG1ldGhvZCBpcyBhbHdheXNcbiAgICA0NVx0ICAgICAqIHJlZ2VuZXJhdGVkIGJ5IHRoZSBGb3JtIEVkaXRvci5cbiAgICA0Nlx0ICAgICAqL1xuICAgIDQ3XHQgICAgQFN1cHByZXNzV2FybmluZ3MoXCJ1bmNoZWNrZWRcIilcbiAgICA0OFx0ICAgIC8vIDxlZGl0b3ItZm9sZCBkZWZhdWx0c3RhdGU9XCJjb2xsYXBzZWRcIiBkZXNjPVwiR2VuZXJhdGVkIENvZGVcIj4vL0dFTi1CRUdJTjppbml0Q29tcG9uZW50c1xuICAgIDQ5XHQgICAgcHJpdmF0ZSB2b2lkIGluaXRDb21wb25lbnRzKCkge1xuICAgIDUwXHRcbiAgICA1MVx0ICAgICAgICBqTGFiZWwxID0gbmV3IGphdmF4LnN3aW5nLkpMYWJlbCgpO1xuICAgIDUyXHQgICAgICAgIGpMYWJlbDIgPSBuZXcgamF2YXguc3dpbmcuSkxhYmVsKCk7XG4gICAgNTNcdCAgICAgICAgakxhYmVsMyA9IG5ldyBqYXZheC5zd2luZy5KTGFiZWwoKTtcbiAgICA1NFx0ICAgICAgICBqTGFiZWw0ID0gbmV3IGphdmF4LnN3aW5nLkpMYWJlbCgpO1xuICAgIDU1XHQgICAgICAgIHR4dFVzZXJOYW1lID0gbmV3IGphdmF4LnN3aW5nLkpUZXh0RmllbGQoKTtcbiAgICA1Nlx0ICAgICAgICB0eHRQYXNzd29yZCA9IG5ldyBqYXZheC5zd2luZy5KUGFzc3dvcmRGaWVsZCgpO1xuICAgIDU3XHQgICAgICAgIGpTZXBhcmF0b3IxID0gbmV3IGphdmF4LnN3aW5nLkpTZXBhcmF0b3IoKTtcbiAgICA1OFx0ICAgICAgICBqU2VwYXJhdG9yMiA9IG5ldyBqYXZheC5zd2luZy5KU2VwYXJhdG9yKCk7XG4gICAgNTlcdCAgICAgICAgYnRuTG9naW4gPSBuZXcgamF2YXguc3dpbmcuSkJ1dHRvbigpO1xuICAgIDYwXHQgICAgICAgIGJ0bkZvcmdvdFBhc3N3b3JkID0gbmV3IGphdmF4LnN3aW5nLkpCdXR0b24oKTtcbiAgICA2MVx0ICAgICAgICBidG5TaWdudXAgPSBuZXcgamF2YXguc3dpbmcuSkJ1dHRvbigpO1xuICAgIDYyXHQgICAgICAgIGpMYWJlbDUgPSBuZXcgamF2YXguc3dpbmcuSkxhYmVsKCk7XG4gICAgNjNcdCAgICAgICAgYnRuRXhpdCA9IG5ldyBqYXZheC5zd2luZy5KQnV0dG9uKCk7XG4gICAgNjRcdFxuICAgIDY1XHQgICAgICAgIHNldERlZmF1bHRDbG9zZU9wZXJhdGlvbihqYXZheC5zd2luZy5XaW5kb3dDb25zdGFudHMuRVhJVF9PTl9DTE9TRSk7XG4gICAgNjZcdFxuICAgIDY3XHQgICAgICAgIGpMYWJlbDEuc2V0Rm9udChuZXcgamF2YS5hd3QuRm9udChcIkFyaWFsXCIsIDEsIDM2KSk7IC8vIE5PSTE4TlxuICAgIDY4XHQgICAgICAgIGpMYWJlbDEuc2V0Rm9yZWdyb3VuZChqYXZheC5zd2luZy5VSU1hbmFnZXIuZ2V0RGVmYXVsdHMoKS5nZXRDb2xvcihcIkFjdGlvbnMuQmx1ZVwiKSk7XG4gICAgNjlcdCAgICAgICAgakxhYmVsMS5zZXRUZXh0KFwixJDEgk5HIE5I4bqsUFwiKTtcbiAgICA3MFx0XG4gICAgNzFcdCAgICAgICAgakxhYmVsMi5zZXRGb250KG5ldyBqYXZhLmF3dC5Gb250KFwiQXJpYWxcIiwgMiwgMTgpKTsgLy8gTk9JMThOXG4gICAgNzJcdCAgICAgICAgakxhYmVsMi5zZXRUZXh0KFwiQ2jDoG8gbeG7q25nIGLhuqFuIHF1YXkgbOG6oWkhXCIpO1xuICAgIDczXHRcbiAgICA3NFx0ICAgICAgICBqTGFiZWwzLnNldEZvbnQobmV3IGphdmEuYXd0LkZvbnQoXCJBcmlhbFwiLCAxLCAxNCkpOyAvLyBOT0kxOE5cbiAgICA3NVx0ICAgICAgICBqTGFiZWwzLnNldFRleHQoXCJUw6puIMSRxINuZyBuaOG6rXA6XCIpO1xuICAgIDc2XHRcbiAgICA3N1x0ICAgICAgICBqTGFiZWw0LnNldEZvbnQobmV3IGphdmEuYXd0LkZvbnQoXCJBcmlhbFwiLCAxLCAxNCkpOyAvLyBOT0kxOE5cbiAgICA3OFx0ICAgICAgICBqTGFiZWw0LnNldFRleHQoXCJN4bqtdCBraOG6qXU6XCIpO1xuICAgIDc5XHRcbiAgICA4MFx0ICAgICAgICB0eHRVc2VyTmFtZS5zZXRGb250KG5ldyBqYXZhLmF3dC5Gb250KFwiQXJpYWxcIiwgMCwgMTQpKTsgLy8gTk9JMThOXG4gICAgODFcdFxuICAgIDgyXHQgICAgICAgIHR4dFBhc3N3b3JkLnNldEZvbnQobmV3IGphdmEuYXd0LkZvbnQoXCJBcmlhbFwiLCAwLCAxNCkpOyAvLyBOT0kxOE5cbiAgICA4M1x0XG4gICAgODRcdCAgICAgICAgYnRuTG9naW4uc2V0Rm9udChuZXcgamF2YS5hd3QuRm9udChcIkFyaWFsXCIsIDEsIDE2KSk7IC8vIE5PSTE4TlxuICAgIDg1XHQgICAgICAgIGJ0bkxvZ2luLnNldEljb24obmV3IGphdmF4LnN3aW5nLkltYWdlSWNvbihnZXRDbGFzcygpLmdldFJlc291cmNlKFwiL0ltYWdlcy9lbnRlci5wbmdcIikpKTsgLy8gTk9JMThOXG4gICAgODZcdCAgICAgICAgYnRuTG9naW4uc2V0VGV4dChcIsSQxINuZyBuaOG6rXBcIik7XG4gICAgODdcdCAgICAgICAgYnRuTG9naW4uc2V0Q3Vyc29yKG5ldyBqYXZhLmF3dC5DdXJzb3IoamF2YS5hd3QuQ3Vyc29yLkhBTkRfQ1VSU09SKSk7XG4gICAgODhcdCAgICAgICAgYnRuTG9naW4uc2V0SG9yaXpvbnRhbEFsaWdubWVudChqYXZheC5zd2luZy5Td2luZ0NvbnN0YW50cy5MRUZUKTtcbiAgICA4OVx0ICAgICAgICBidG5Mb2dpbi5hZGRBY3Rpb25MaXN0ZW5lcihuZXcgamF2YS5hd3QuZXZlbnQuQWN0aW9uTGlzdGVuZXIoKSB7XG4gICAgOTBcdCAgICAgICAgICAgIHB1YmxpYyB2b2lkIGFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHtcbiAgICA5MVx0ICAgICAgICAgICAgICAgIGJ0bkxvZ2luQWN0aW9uUGVyZm9ybWVkKGV2dCk7XG4gICAgOTJcdCAgICAgICAgICAgIH1cbiAgICA5M1x0ICAgICAgICB9KTtcbiAgICA5NFx0XG4gICAgOTVcdCAgICAgICAgYnRuRm9yZ290UGFzc3dvcmQuc2V0Rm9udChuZXcgamF2YS5hd3QuRm9udChcIkFyaWFsXCIsIDEsIDE0KSk7IC8vIE5PSTE4TlxuICAgIDk2XHQgICAgICAgIGJ0bkZvcmdvdFBhc3N3b3JkLnNldEljb24obmV3IGphdmF4LnN3aW5nLkltYWdlSWNvbihnZXRDbGFzcygpLmdldFJlc291cmNlKFwiL0ltYWdlcy9yZXNldC1wYXNzd29yZC5wbmdcIikpKTsgLy8gTk9JMThOXG4gICAgOTdcdCAgICAgICAgYnRuRm9yZ290UGFzc3dvcmQuc2V0VGV4dChcIlF1w6puIG3huq10IGto4bqpdT9cIik7XG4gICAgOThcdCAgICAgICAgYnRuRm9yZ290UGFzc3dvcmQuc2V0Q3Vyc29yKG5ldyBqYXZhLmF3dC5DdXJzb3IoamF2YS5hd3QuQ3Vyc29yLkhBTkRfQ1VSU09SKSk7XG4gICAgOTlcdCAgICAgICAgYnRuRm9yZ290UGFzc3dvcmQuc2V0SG9yaXpvbnRhbEFsaWdubWVudChqYXZheC5zd2luZy5Td2luZ0NvbnN0YW50cy5MRUZUKTtcbiAgIDEwMFx0ICAgICAgICBidG5Gb3Jnb3RQYXNzd29yZC5hZGRBY3Rpb25MaXN0ZW5lcihuZXcgamF2YS5hd3QuZXZlbnQuQWN0aW9uTGlzdGVuZXIoKSB7XG4gICAxMDFcdCAgICAgICAgICAgIHB1YmxpYyB2b2lkIGFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHtcbiAgIDEwMlx0ICAgICAgICAgICAgICAgIGJ0bkZvcmdvdFBhc3N3b3JkQWN0aW9uUGVyZm9ybWVkKGV2dCk7XG4gICAxMDNcdCAgICAgICAgICAgIH1cbiAgIDEwNFx0ICAgICAgICB9KTtcbiAgIDEwNVx0XG4gICAxMDZcdCAgICAgICAgYnRuU2lnbnVwLnNldEZvbnQobmV3IGphdmEuYXd0LkZvbnQoXCJBcmlhbFwiLCAxLCAxNikpOyAvLyBOT0kxOE5cbiAgIDEwN1x0ICAgICAgICBidG5TaWdudXAuc2V0SWNvbihuZXcgamF2YXguc3dpbmcuSW1hZ2VJY29uKGdldENsYXNzKCkuZ2V0UmVzb3VyY2UoXCIvSW1hZ2VzL2FkZC11c2VyLnBuZ1wiKSkpOyAvLyBOT0kxOE5cbiAgIDEwOFx0ICAgICAgICBidG5TaWdudXAuc2V0VGV4dChcIsSQxINuZyBrw71cIik7XG4gICAxMDlcdCAgICAgICAgYnRuU2lnbnVwLnNldEN1cnNvcihuZXcgamF2YS5hd3QuQ3Vyc29yKGphdmEuYXd0LkN1cnNvci5IQU5EX0NVUlNPUikpO1xuICAgMTEwXHQgICAgICAgIGJ0blNpZ251cC5zZXRIb3Jpem9udGFsQWxpZ25tZW50KGphdmF4LnN3aW5nLlN3aW5nQ29uc3RhbnRzLkxFRlQpO1xuICAgMTExXHQgICAgICAgIGJ0blNpZ251cC5hZGRBY3Rpb25MaXN0ZW5lcihuZXcgamF2YS5hd3QuZXZlbnQuQWN0aW9uTGlzdGVuZXIoKSB7XG4gICAxMTJcdCAgICAgICAgICAgIHB1YmxpYyB2b2lkIGFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHtcbiAgIDExM1x0ICAgICAgICAgICAgICAgIGJ0blNpZ251cEFjdGlvblBlcmZvcm1lZChldnQpO1xuICAgMTE0XHQgICAgICAgICAgICB9XG4gICAxMTVcdCAgICAgICAgfSk7XG4gICAxMTZcdFxuICAgMTE3XHQgICAgICAgIGpMYWJlbDUuc2V0SWNvbihuZXcgamF2YXguc3dpbmcuSW1hZ2VJY29uKGdldENsYXNzKCkuZ2V0UmVzb3VyY2UoXCIvSW1hZ2VzL2JnMi5qcGdcIikpKTsgLy8gTk9JMThOXG4gICAxMThcdCAgICAgICAgakxhYmVsNS5zZXRUZXh0KFwiakxhYmVsNVwiKTtcbiAgIDExOVx0XG4gICAxMjBcdCAgICAgICAgYnRuRXhpdC5zZXRGb250KG5ldyBqYXZhLmF3dC5Gb250KFwiQXJpYWxcIiwgMSwgMTQpKTsgLy8gTk9JMThOXG4gICAxMjFcdCAgICAgICAgYnRuRXhpdC5zZXRJY29uKG5ldyBqYXZheC5zd2luZy5JbWFnZUljb24oZ2V0Q2xhc3MoKS5nZXRSZXNvdXJjZShcIi9JbWFnZXMvbG9nb3V0LnBuZ1wiKSkpOyAvLyBOT0kxOE5cbiAgIDEyMlx0ICAgICAgICBidG5FeGl0LnNldFRleHQoXCJUaG/DoXRcIik7XG4gICAxMjNcdCAgICAgICAgYnRuRXhpdC5zZXRDdXJzb3IobmV3IGphdmEuYXd0LkN1cnNvcihqYXZhLmF3dC5DdXJzb3IuSEFORF9DVVJTT1IpKTtcbiAgIDEyNFx0ICAgICAgICBidG5FeGl0LnNldEhvcml6b250YWxBbGlnbm1lbnQoamF2YXguc3dpbmcuU3dpbmdDb25zdGFudHMuTEVGVCk7XG4gICAxMjVcdCAgICAgICAgYnRuRXhpdC5hZGRBY3Rpb25MaXN0ZW5lcihuZXcgamF2YS5hd3QuZXZlbnQuQWN0aW9uTGlzdGVuZXIoKSB7XG4gICAxMjZcdCAgICAgICAgICAgIHB1YmxpYyB2b2lkIGFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHtcbiAgIDEyN1x0ICAgICAgICAgICAgICAgIGJ0bkV4aXRBY3Rpb25QZXJmb3JtZWQoZXZ0KTtcbiAgIDEyOFx0ICAgICAgICAgICAgfVxuICAgMTI5XHQgICAgICAgIH0pO1xuICAgMTMwXHRcbiAgIDEzMVx0ICAgICAgICBqYXZheC5zd2luZy5Hcm91cExheW91dCBsYXlvdXQgPSBuZXcgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQoZ2V0Q29udGVudFBhbmUoKSk7XG4gICAxMzJcdCAgICAgICAgZ2V0Q29udGVudFBhbmUoKS5zZXRMYXlvdXQobGF5b3V0KTtcbiAgIDEzM1x0ICAgICAgICBsYXlvdXQuc2V0SG9yaXpvbnRhbEdyb3VwKFxuICAgMTM0XHQgICAgICAgICAgICBsYXlvdXQuY3JlYXRlUGFyYWxsZWxHcm91cChqYXZheC5zd2luZy5Hcm91cExheW91dC5BbGlnbm1lbnQuTEVBRElORylcbiAgIDEzNVx0ICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVTZXF1ZW50aWFsR3JvdXAoKVxuICAgMTM2XHQgICAgICAgICAgICAgICAgLmFkZEdhcCg4MywgODMsIDgzKVxuICAgMTM3XHQgICAgICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVQYXJhbGxlbEdyb3VwKGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LkFsaWdubWVudC5MRUFESU5HKVxuICAgMTM4XHQgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQoakxhYmVsMSlcbiAgIDEzOVx0ICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGpMYWJlbDIpXG4gICAxNDBcdCAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChqU2VwYXJhdG9yMSwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUsIDM2OCwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUpXG4gICAxNDFcdCAgICAgICAgICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVTZXF1ZW50aWFsR3JvdXAoKVxuICAgMTQyXHQgICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGpMYWJlbDMpXG4gICAxNDNcdCAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRHYXAoMjksIDI5LCAyOSlcbiAgIDE0NFx0ICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudCh0eHRVc2VyTmFtZSwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUsIDIzMCwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUpKVxuICAgMTQ1XHQgICAgICAgICAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlU2VxdWVudGlhbEdyb3VwKClcbiAgIDE0Nlx0ICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChqTGFiZWw0KVxuICAgMTQ3XHQgICAgICAgICAgICAgICAgICAgICAgICAuYWRkR2FwKDcwLCA3MCwgNzApXG4gICAxNDhcdCAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQodHh0UGFzc3dvcmQsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFLCAyMzAsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFKSlcbiAgIDE0OVx0ICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGpTZXBhcmF0b3IyLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSwgMzY4LCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSlcbiAgIDE1MFx0ICAgICAgICAgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVNlcXVlbnRpYWxHcm91cCgpXG4gICAxNTFcdCAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlUGFyYWxsZWxHcm91cChqYXZheC5zd2luZy5Hcm91cExheW91dC5BbGlnbm1lbnQuVFJBSUxJTkcsIGZhbHNlKVxuICAgMTUyXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChidG5FeGl0LCBqYXZheC5zd2luZy5Hcm91cExheW91dC5ERUZBVUxUX1NJWkUsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LkRFRkFVTFRfU0laRSwgU2hvcnQuTUFYX1ZBTFVFKVxuICAgMTUzXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChidG5TaWdudXAsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LkRFRkFVTFRfU0laRSwgMTI4LCBTaG9ydC5NQVhfVkFMVUUpKVxuICAgMTU0XHQgICAgICAgICAgICAgICAgICAgICAgICAuYWRkR2FwKDc2LCA3NiwgNzYpXG4gICAxNTVcdCAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlUGFyYWxsZWxHcm91cChqYXZheC5zd2luZy5Hcm91cExheW91dC5BbGlnbm1lbnQuTEVBRElORylcbiAgIDE1Nlx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQoYnRuTG9naW4sIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFLCAxNjQsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFKVxuICAgMTU3XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChidG5Gb3Jnb3RQYXNzd29yZCwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuQWxpZ25tZW50LlRSQUlMSU5HKSkpKVxuICAgMTU4XHQgICAgICAgICAgICAgICAgLmFkZEdhcCg2MCwgNjAsIDYwKVxuICAgMTU5XHQgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChqTGFiZWw1LCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSwgNTA1LCBTaG9ydC5NQVhfVkFMVUUpKVxuICAgMTYwXHQgICAgICAgICk7XG4gICAxNjFcdCAgICAgICAgbGF5b3V0LnNldFZlcnRpY2FsR3JvdXAoXG4gICAxNjJcdCAgICAgICAgICAgIGxheW91dC5jcmVhdGVQYXJhbGxlbEdyb3VwKGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LkFsaWdubWVudC5MRUFESU5HKVxuICAgMTYzXHQgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVNlcXVlbnRpYWxHcm91cCgpXG4gICAxNjRcdCAgICAgICAgICAgICAgICAuYWRkR2FwKDEzOCwgMTM4LCAxMzgpXG4gICAxNjVcdCAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGpMYWJlbDEpXG4gICAxNjZcdCAgICAgICAgICAgICAgICAuYWRkR2FwKDEyLCAxMiwgMTIpXG4gICAxNjdcdCAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGpMYWJlbDIpXG4gICAxNjhcdCAgICAgICAgICAgICAgICAuYWRkR2FwKDEyLCAxMiwgMTIpXG4gICAxNjlcdCAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGpTZXBhcmF0b3IxLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSwgMTAsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFKVxuICAgMTcwXHQgICAgICAgICAgICAgICAgLmFkZEdhcCgzMCwgMzAsIDMwKVxuICAgMTcxXHQgICAgICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVQYXJhbGxlbEdyb3VwKGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LkFsaWdubWVudC5MRUFESU5HKVxuICAgMTcyXHQgICAgICAgICAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlU2VxdWVudGlhbEdyb3VwKClcbiAgIDE3M1x0ICAgICAgICAgICAgICAgICAgICAgICAgLmFkZEdhcCgzLCAzLCAzKVxuICAgMTc0XHQgICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGpMYWJlbDMpKVxuICAgMTc1XHQgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQodHh0VXNlck5hbWUsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5ERUZBVUxUX1NJWkUsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFKSlcbiAgIDE3Nlx0ICAgICAgICAgICAgICAgIC5hZGRHYXAoMTgsIDE4LCAxOClcbiAgIDE3N1x0ICAgICAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlUGFyYWxsZWxHcm91cChqYXZheC5zd2luZy5Hcm91cExheW91dC5BbGlnbm1lbnQuTEVBRElORylcbiAgIDE3OFx0ICAgICAgICAgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVNlcXVlbnRpYWxHcm91cCgpXG4gICAxNzlcdCAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRHYXAoMywgMywgMylcbiAgIDE4MFx0ICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChqTGFiZWw0KSlcbiAgIDE4MVx0ICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KHR4dFBhc3N3b3JkLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuREVGQVVMVF9TSVpFLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSkpXG4gICAxODJcdCAgICAgICAgICAgICAgICAuYWRkR2FwKDMwLCAzMCwgMzApXG4gICAxODNcdCAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGpTZXBhcmF0b3IyLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSwgMTAsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFKVxuICAgMTg0XHQgICAgICAgICAgICAgICAgLmFkZEdhcCgxMiwgMTIsIDEyKVxuICAgMTg1XHQgICAgICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVQYXJhbGxlbEdyb3VwKGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LkFsaWdubWVudC5MRUFESU5HKVxuICAgMTg2XHQgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQoYnRuU2lnbnVwLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSwgMzUsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFKVxuICAgMTg3XHQgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQoYnRuTG9naW4sIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFLCAzNSwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUpKVxuICAgMTg4XHQgICAgICAgICAgICAgICAgLmFkZEdhcCgxMiwgMTIsIDEyKVxuICAgMTg5XHQgICAgICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVQYXJhbGxlbEdyb3VwKGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LkFsaWdubWVudC5MRUFESU5HKVxuICAgMTkwXHQgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQoYnRuRm9yZ290UGFzc3dvcmQpXG4gICAxOTFcdCAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChidG5FeGl0KSkpXG4gICAxOTJcdCAgICAgICAgICAgIC5hZGRDb21wb25lbnQoakxhYmVsNSwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUsIDYzMCwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUpXG4gICAxOTNcdCAgICAgICAgKTtcbiAgIDE5NFx0XG4gICAxOTVcdCAgICAgICAgcGFjaygpO1xuICAgMTk2XHQgICAgfS8vIDwvZWRpdG9yLWZvbGQ+Ly9HRU4tRU5EOmluaXRDb21wb25lbnRzXG4gICAxOTdcdFxuICAgMTk4XHQgICAgcHJpdmF0ZSB2b2lkIGJ0bkxvZ2luQWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkxvZ2luQWN0aW9uUGVyZm9ybWVkXG4gICAxOTlcdCAgICAgICAgLy8gVE9ETyBhZGQgeW91ciBoYW5kbGluZyBjb2RlIGhlcmU6XG4gICAyMDBcdCAgICAgICAgaWYodmFsaWRhdGVGaWVsZHMoKSkge1xuICAgMjAxXHQgICAgICAgICAgICB0cnl7XG4gICAyMDJcdCAgICAgICAgICAgICAgICBTdHJpbmcgdXNlcm5hbWUgPSB0eHRVc2VyTmFtZS5nZXRUZXh0KCkudHJpbSgpO1xuICAgMjAzXHQgICAgICAgICAgICAgICAgU3RyaW5nIHBhc3N3b3JkID0gdHh0UGFzc3dvcmQuZ2V0VGV4dCgpLnRyaW0oKTtcbiAgIDIwNFx0ICAgICAgICAgICAgICAgIFxuICAgMjA1XHQgICAgICAgICAgICAgICAgVXNlciB1c2VyID0gbnVsbDtcbiAgIDIwNlx0ICAgICAgICAgICAgICAgIGJvb2xlYW4gaXNTdWNjZXNzID0gVXNlckRBTy5sb2dpbih1c2VybmFtZSwgcGFzc3dvcmQpO1xuICAgMjA3XHRcbiAgIDIwOFx0ICAgICAgICAgICAgICAgIGlmKGlzU3VjY2Vzcykge1xuICAgMjA5XHQgICAgICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKHRoaXMsIFwixJDEg25nIG5o4bqtcCB0aMOgbmggY8O0bmchXCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuSU5GT1JNQVRJT05fTUVTU0FHRSk7XG4gICAyMTBcdCAgICAgICAgICAgICAgICAgXG4gICAyMTFcdCAgICAgICAgICAgICAgICAgICAgVXNlclNlc3Npb24uc2V0Q3VycmVudFVzZXIodXNlcik7XG4gICAyMTJcdCAgICAgICAgICAgICAgICAgICAgXG4gICAyMTNcdC8vICAgICAgICAgICAgICAgICAgICBuZXcgTWFpbkZyYW1lKCkuc2V0VmlzaWJsZSh0cnVlKTtcbiAgIDIxNFx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3Bvc2UoKTtcbiAgIDIxNVx0ICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAyMTZcdCAgICAgICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2codGhpcywgXCJTYWkgdMOqbiDEkcSDbmcgbmjhuq1wIGhv4bq3YyBt4bqtdCBraOG6qXUuXCIsIFwiTOG7l2lcIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAyMTdcdCAgICAgICAgICAgICAgICB9XG4gICAyMThcdCAgICAgICAgICAgIH0gY2F0Y2goRXhjZXB0aW9uIGV4KSB7XG4gICAyMTlcdCAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcIkzhu5dpOiBcIiArIGV4LmdldE1lc3NhZ2UoKSwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgIDIyMFx0ICAgICAgICAgICAgfVxuICAgMjIxXHQgICAgICAgIH1cbiAgIDIyMlx0XG4gICAyMjNcdFxuICAgMjI0XHQgICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuTG9naW5BY3Rpb25QZXJmb3JtZWRcbiAgIDIyNVx0XG4gICAyMjZcdCAgICBwcml2YXRlIHZvaWQgYnRuRm9yZ290UGFzc3dvcmRBY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuRm9yZ290UGFzc3dvcmRBY3Rpb25QZXJmb3JtZWRcbiAgIDIyN1x0ICAgICAgICAvLyBPcGVuIHRoZSBGb3Jnb3RQYXNzd29yZCBkaWFsb2dcbiAgIDIyOFx0ICAgICAgICBGb3Jnb3RQYXNzd29yZCBmb3Jnb3RQYXNzd29yZERpYWxvZyA9IG5ldyBGb3Jnb3RQYXNzd29yZCh0aGlzLCB0cnVlKTtcbiAgIDIyOVx0ICAgICAgICBmb3Jnb3RQYXNzd29yZERpYWxvZy5zZXRWaXNpYmxlKHRydWUpO1xuICAgMjMwXHQgICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuRm9yZ290UGFzc3dvcmRBY3Rpb25QZXJmb3JtZWRcbiAgIDIzMVx0XG4gICAyMzJcdCAgICBwcml2YXRlIHZvaWQgYnRuRXhpdEFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5FeGl0QWN0aW9uUGVyZm9ybWVkXG4gICAyMzNcdCAgICAgICAgLy8gVE9ETyBhZGQgeW91ciBoYW5kbGluZyBjb2RlIGhlcmU6XG4gICAyMzRcdCAgICAgICAgaW50IHJlc3VsdCA9IEpPcHRpb25QYW5lLnNob3dDb25maXJtRGlhbG9nKG51bGwsIFwiQuG6oW4gY8OzIGNo4bqvYyBjaOG6r24gbXXhu5FuIHRob8OhdCBraMO0bmc/XCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuWUVTX05PX09QVElPTiwgSk9wdGlvblBhbmUuUVVFU1RJT05fTUVTU0FHRSk7XG4gICAyMzVcdFxuICAgMjM2XHQgICAgICAgIGlmIChyZXN1bHQgPT0gSk9wdGlvblBhbmUuWUVTX09QVElPTikge1xuICAgMjM3XHQgICAgICAgICAgICBTeXN0ZW0uZXhpdCgwKTtcbiAgIDIzOFx0ICAgICAgICB9XG4gICAyMzlcdCAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5FeGl0QWN0aW9uUGVyZm9ybWVkXG4gICAyNDBcdFxuICAgMjQxXHQgICAgcHJpdmF0ZSB2b2lkIGJ0blNpZ251cEFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5TaWdudXBBY3Rpb25QZXJmb3JtZWRcbiAgIDI0Mlx0ICAgICAgICAvLyBUT0RPIGFkZCB5b3VyIGhhbmRsaW5nIGNvZGUgaGVyZTpcbiAgIDI0M1x0ICAgICAgICBzZXRWaXNpYmxlKGZhbHNlKTtcbiAgIDI0NFx0ICAgICAgICBuZXcgU2lnblVwKCkuc2V0VmlzaWJsZSh0cnVlKTtcbiAgIDI0NVx0ICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0blNpZ251cEFjdGlvblBlcmZvcm1lZFxuICAgMjQ2XHRcbiAgIDI0N1x0ICAgIC8qKlxuICAgMjQ4XHQgICAgICogQHBhcmFtIGFyZ3MgdGhlIGNvbW1hbmQgbGluZSBhcmd1bWVudHNcbiAgIDI0OVx0ICAgICAqL1xuICAgMjUwXHQgICAgcHVibGljIHN0YXRpYyB2b2lkIG1haW4oU3RyaW5nIGFyZ3NbXSkge1xuICAgMjUxXHQgICAgICAgIC8qIFNldCB0aGUgTmltYnVzIGxvb2sgYW5kIGZlZWwgKi9cbiAgIDI1Mlx0ICAgICAgICAvLzxlZGl0b3ItZm9sZCBkZWZhdWx0c3RhdGU9XCJjb2xsYXBzZWRcIiBkZXNjPVwiIExvb2sgYW5kIGZlZWwgc2V0dGluZyBjb2RlIChvcHRpb25hbCkgXCI+XG4gICAyNTNcdCAgICAgICAgLyogSWYgTmltYnVzIChpbnRyb2R1Y2VkIGluIEphdmEgU0UgNikgaXMgbm90IGF2YWlsYWJsZSwgc3RheSB3aXRoIHRoZSBkZWZhdWx0IGxvb2sgYW5kIGZlZWwuXG4gICAyNTRcdCAgICAgICAgICogRm9yIGRldGFpbHMgc2VlIGh0dHA6Ly9kb3dubG9hZC5vcmFjbGUuY29tL2phdmFzZS90dXRvcmlhbC91aXN3aW5nL2xvb2thbmRmZWVsL3BsYWYuaHRtbFxuICAgMjU1XHQgICAgICAgICAqL1xuICAgMjU2XHQgICAgICAgIHRyeSB7XG4gICAyNTdcdCAgICAgICAgICAgIGZvciAoamF2YXguc3dpbmcuVUlNYW5hZ2VyLkxvb2tBbmRGZWVsSW5mbyBpbmZvIDogamF2YXguc3dpbmcuVUlNYW5hZ2VyLmdldEluc3RhbGxlZExvb2tBbmRGZWVscygpKSB7XG4gICAyNThcdCAgICAgICAgICAgICAgICBpZiAoXCJOaW1idXNcIi5lcXVhbHMoaW5mby5nZXROYW1lKCkpKSB7XG4gICAyNTlcdCAgICAgICAgICAgICAgICAgICAgamF2YXguc3dpbmcuVUlNYW5hZ2VyLnNldExvb2tBbmRGZWVsKGluZm8uZ2V0Q2xhc3NOYW1lKCkpO1xuICAgMjYwXHQgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgMjYxXHQgICAgICAgICAgICAgICAgfVxuICAgMjYyXHQgICAgICAgICAgICB9XG4gICAyNjNcdCAgICAgICAgfSBjYXRjaCAoQ2xhc3NOb3RGb3VuZEV4Y2VwdGlvbiBleCkge1xuICAgMjY0XHQgICAgICAgICAgICBqYXZhLnV0aWwubG9nZ2luZy5Mb2dnZXIuZ2V0TG9nZ2VyKExvZ2luLmNsYXNzLmdldE5hbWUoKSkubG9nKGphdmEudXRpbC5sb2dnaW5nLkxldmVsLlNFVkVSRSwgbnVsbCwgZXgpO1xuICAgMjY1XHQgICAgICAgIH0gY2F0Y2ggKEluc3RhbnRpYXRpb25FeGNlcHRpb24gZXgpIHtcbiAgIDI2Nlx0ICAgICAgICAgICAgamF2YS51dGlsLmxvZ2dpbmcuTG9nZ2VyLmdldExvZ2dlcihMb2dpbi5jbGFzcy5nZXROYW1lKCkpLmxvZyhqYXZhLnV0aWwubG9nZ2luZy5MZXZlbC5TRVZFUkUsIG51bGwsIGV4KTtcbiAgIDI2N1x0ICAgICAgICB9IGNhdGNoIChJbGxlZ2FsQWNjZXNzRXhjZXB0aW9uIGV4KSB7XG4gICAyNjhcdCAgICAgICAgICAgIGphdmEudXRpbC5sb2dnaW5nLkxvZ2dlci5nZXRMb2dnZXIoTG9naW4uY2xhc3MuZ2V0TmFtZSgpKS5sb2coamF2YS51dGlsLmxvZ2dpbmcuTGV2ZWwuU0VWRVJFLCBudWxsLCBleCk7XG4gICAyNjlcdCAgICAgICAgfSBjYXRjaCAoamF2YXguc3dpbmcuVW5zdXBwb3J0ZWRMb29rQW5kRmVlbEV4Y2VwdGlvbiBleCkge1xuICAgMjcwXHQgICAgICAgICAgICBqYXZhLnV0aWwubG9nZ2luZy5Mb2dnZXIuZ2V0TG9nZ2VyKExvZ2luLmNsYXNzLmdldE5hbWUoKSkubG9nKGphdmEudXRpbC5sb2dnaW5nLkxldmVsLlNFVkVSRSwgbnVsbCwgZXgpO1xuICAgMjcxXHQgICAgICAgIH1cbiAgIDI3Mlx0ICAgICAgICAvLzwvZWRpdG9yLWZvbGQ+XG4gICAyNzNcdFxuICAgMjc0XHQgICAgICAgIC8qIENyZWF0ZSBhbmQgZGlzcGxheSB0aGUgZm9ybSAqL1xuICAgMjc1XHQgICAgICAgIGphdmEuYXd0LkV2ZW50UXVldWUuaW52b2tlTGF0ZXIobmV3IFJ1bm5hYmxlKCkge1xuICAgMjc2XHQgICAgICAgICAgICBwdWJsaWMgdm9pZCBydW4oKSB7XG4gICAyNzdcdCAgICAgICAgICAgICAgICBuZXcgTG9naW4oKS5zZXRWaXNpYmxlKHRydWUpO1xuICAgMjc4XHQgICAgICAgICAgICB9XG4gICAyNzlcdCAgICAgICAgfSk7XG4gICAyODBcdCAgICB9XG4gICAyODFcdFxuICAgMjgyXHQgICAgLy8gVmFyaWFibGVzIGRlY2xhcmF0aW9uIC0gZG8gbm90IG1vZGlmeS8vR0VOLUJFR0lOOnZhcmlhYmxlc1xuICAgMjgzXHQgICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KQnV0dG9uIGJ0bkV4aXQ7XG4gICAyODRcdCAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpCdXR0b24gYnRuRm9yZ290UGFzc3dvcmQ7XG4gICAyODVcdCAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpCdXR0b24gYnRuTG9naW47XG4gICAyODZcdCAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpCdXR0b24gYnRuU2lnbnVwO1xuICAgMjg3XHQgICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KTGFiZWwgakxhYmVsMTtcbiAgIDI4OFx0ICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkxhYmVsIGpMYWJlbDI7XG4gICAyODlcdCAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpMYWJlbCBqTGFiZWwzO1xuICAgMjkwXHQgICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KTGFiZWwgakxhYmVsNDtcbiAgIDI5MVx0ICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkxhYmVsIGpMYWJlbDU7XG4gICAyOTJcdCAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpTZXBhcmF0b3IgalNlcGFyYXRvcjE7XG4gICAyOTNcdCAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpTZXBhcmF0b3IgalNlcGFyYXRvcjI7XG4gICAyOTRcdCAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpQYXNzd29yZEZpZWxkIHR4dFBhc3N3b3JkO1xuICAgMjk1XHQgICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KVGV4dEZpZWxkIHR4dFVzZXJOYW1lO1xuICAgMjk2XHQgICAgLy8gRW5kIG9mIHZhcmlhYmxlcyBkZWNsYXJhdGlvbi8vR0VOLUVORDp2YXJpYWJsZXNcbiAgIDI5N1x0fVxuICAgMjk4XHRcblRvdGFsIGxpbmVzIGluIGZpbGU6IDI5OFxuIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV8wMVM0OG9oZkVnR2EyQmVvTkpZVndheUQifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJFOi9Ib2NUYXAvMDJfSkFWQS8wM19Qcm9qZWN0L0ludGVybmV0IE1hbmdlbWVudCBTeXN0ZW0iLCJmb2xkZXJSb290IjoiRTovSG9jVGFwLzAyX0pBVkEvMDNfUHJvamVjdC9JbnRlcm5ldCBNYW5nZW1lbnQgU3lzdGVtIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwidGltZXN0YW1wIjoiMjAyNS0wNS0xM1QxMzowNDowMC41MzNaIiwicmVzcG9uc2VfdGV4dCI6Ik5vdyBJJ2xsIHVwZGF0ZSB0aGUgYnRuTG9naW5BY3Rpb25QZXJmb3JtZWQgbWV0aG9kIGluIHRoZSBMb2dpbi5qYXZhIGZpbGU6XG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiZThkYjVkM2ItMjk5YS00M2M1LTgyZDktYmMzMDJmN2E5NDRhIiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiTm93IGxldCdzIHRlc3Qgb3VyIGltcGxlbWVudGF0aW9uIHRvIG1ha2Ugc3VyZSBpdCB3b3JrcyBjb3JyZWN0bHkuIExldCdzIHJ1biB0aGUgYXBwbGljYXRpb24gYW5kIHNlZSBpZiB0aGUgbG9naW4gZnVuY3Rpb25hbGl0eSB3b3JrcyBhcyBleHBlY3RlZC5cblxuIyMgU3VtbWFyeSBvZiBDaGFuZ2VzXG5cbkkndmUgbWFkZSB0aGUgZm9sbG93aW5nIGNoYW5nZXMgdG8gaW1wbGVtZW50IHRoZSBmdW5jdGlvbmFsaXR5IHRvIGdldCBhbGwgdXNlciBpbmZvcm1hdGlvbiB3aGVuIGxvZ2luIGlzIHN1Y2Nlc3NmdWw6XG5cbjEuIE1vZGlmaWVkIHRoZSBgVXNlckRBTy5sb2dpbmAgbWV0aG9kIHRvOlxuICAgLSBSZXR1cm4gYSBgVXNlcmAgb2JqZWN0IGluc3RlYWQgb2YgYSBib29sZWFuXG4gICAtIFJldHJpZXZlIGFsbCB1c2VyIGluZm9ybWF0aW9uIGZyb20gdGhlIGRhdGFiYXNlXG4gICAtIENsb3NlIHRoZSBSZXN1bHRTZXQgcHJvcGVybHlcblxuMi4gVXBkYXRlZCB0aGUgYGJ0bkxvZ2luQWN0aW9uUGVyZm9ybWVkYCBtZXRob2QgaW4gdGhlIGBMb2dpbi5qYXZhYCBmaWxlIHRvOlxuICAgLSBVc2UgdGhlIFVzZXIgb2JqZWN0IHJldHVybmVkIGJ5IHRoZSBsb2dpbiBtZXRob2RcbiAgIC0gU3RvcmUgdGhlIHVzZXIgaW5mb3JtYXRpb24gaW4gdGhlIFVzZXJTZXNzaW9uXG4gICAtIE9wZW4gdGhlIGFwcHJvcHJpYXRlIGRhc2hib2FyZCBiYXNlZCBvbiB0aGUgdXNlcidzIHJvbGVcblxuVGhlc2UgY2hhbmdlcyBlbnN1cmUgdGhhdCB3aGVuIGEgdXNlciBsb2dzIGluIHN1Y2Nlc3NmdWxseTpcbjEuIEFsbCB1c2VyIGluZm9ybWF0aW9uIGlzIHJldHJpZXZlZCBmcm9tIHRoZSBkYXRhYmFzZVxuMi4gVGhlIHVzZXIgaW5mb3JtYXRpb24gaXMgc3RvcmVkIGluIHRoZSBVc2VyU2Vzc2lvbiBmb3IgdXNlIHRocm91Z2hvdXQgdGhlIGFwcGxpY2F0aW9uXG4zLiBUaGUgYXBwcm9wcmlhdGUgZGFzaGJvYXJkIGlzIGRpc3BsYXllZCBiYXNlZCBvbiB0aGUgdXNlcidzIHJvbGVcblxuIyMgVGVzdGluZ1xuXG5UbyB0ZXN0IHRoaXMgaW1wbGVtZW50YXRpb246XG4xLiBSdW4gdGhlIGFwcGxpY2F0aW9uXG4yLiBFbnRlciB2YWxpZCBsb2dpbiBjcmVkZW50aWFsc1xuMy4gVmVyaWZ5IHRoYXQgdGhlIGxvZ2luIGlzIHN1Y2Nlc3NmdWwgYW5kIHRoZSBhcHByb3ByaWF0ZSBkYXNoYm9hcmQgaXMgZGlzcGxheWVkXG40LiBDaGVjayB0aGF0IHRoZSB1c2VyIGluZm9ybWF0aW9uIGlzIGNvcnJlY3RseSBkaXNwbGF5ZWQgaW4gdGhlIGRhc2hib2FyZFxuXG4jIyBOZXh0IFN0ZXBzXG5cbklmIHlvdSB3YW50IHRvIGZ1cnRoZXIgZW5oYW5jZSB0aGlzIGZ1bmN0aW9uYWxpdHksIHlvdSBjb3VsZDpcbjEuIENyZWF0ZSBhIHNlcGFyYXRlIGRhc2hib2FyZCBmb3IgcmVndWxhciB1c2Vyc1xuMi4gQWRkIG1vcmUgdXNlciBpbmZvcm1hdGlvbiB0byBkaXNwbGF5IGluIHRoZSBkYXNoYm9hcmRcbjMuIEltcGxlbWVudCBhIGxvZ291dCBmdW5jdGlvbmFsaXR5IHRoYXQgY2xlYXJzIHRoZSBVc2VyU2Vzc2lvblxuXG5Xb3VsZCB5b3UgbGlrZSBtZSB0byBtYWtlIGFueSBhZGRpdGlvbmFsIGNoYW5nZXMgb3IgaW1wcm92ZW1lbnRzIHRvIHRoZSBpbXBsZW1lbnRhdGlvbj9cbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IlN1Y2Nlc3NmdWxseSBlZGl0ZWQgdGhlIGZpbGUgc3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vTG9naW4uamF2YS5cblJlc3VsdCBmb3Igc3RyX3JlcGxhY2UgZm9yIGVudHJ5IHdpdGggaW5kZXggWzBdOlxuUmVwbGFjZW1lbnQgc3VjY2Vzc2Z1bC5cbkVkaXRlZCBzZWN0aW9uIGFmdGVyIElERSBhdXRvLWZvcm1hdHRpbmcgd2FzIGFwcGxpZWQ6XG4gICAxOTRcdFxuICAgMTk1XHQgICAgICAgIHBhY2soKTtcbiAgIDE5Nlx0ICAgIH0vLyA8L2VkaXRvci1mb2xkPi8vR0VOLUVORDppbml0Q29tcG9uZW50c1xuICAgMTk3XHRcbiAgIDE5OFx0ICAgIHByaXZhdGUgdm9pZCBidG5Mb2dpbkFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5Mb2dpbkFjdGlvblBlcmZvcm1lZFxuICAgMTk5XHQgICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxuICAgMjAwXHQgICAgICAgIGlmKHZhbGlkYXRlRmllbGRzKCkpIHtcbiAgIDIwMVx0ICAgICAgICAgICAgdHJ5e1xuICAgMjAyXHQgICAgICAgICAgICAgICAgU3RyaW5nIHVzZXJuYW1lID0gdHh0VXNlck5hbWUuZ2V0VGV4dCgpLnRyaW0oKTtcbiAgIDIwM1x0ICAgICAgICAgICAgICAgIFN0cmluZyBwYXNzd29yZCA9IHR4dFBhc3N3b3JkLmdldFRleHQoKS50cmltKCk7XG4gICAyMDRcdFxuICAgMjA1XHQgICAgICAgICAgICAgICAgVXNlciB1c2VyID0gVXNlckRBTy5sb2dpbih1c2VybmFtZSwgcGFzc3dvcmQpO1xuICAgMjA2XHRcbiAgIDIwN1x0ICAgICAgICAgICAgICAgIGlmKHVzZXIgIT0gbnVsbCkge1xuICAgMjA4XHQgICAgICAgICAgICAgICAgICAgIC8vIFN0b3JlIHVzZXIgaW5mb3JtYXRpb24gaW4gdGhlIHNlc3Npb25cbiAgIDIwOVx0ICAgICAgICAgICAgICAgICAgICBVc2VyU2Vzc2lvbi5zZXRDdXJyZW50VXNlcih1c2VyKTtcbiAgIDIxMFx0XG4gICAyMTFcdCAgICAgICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2codGhpcywgXCLEkMSDbmcgbmjhuq1wIHRow6BuaCBjw7RuZyFcIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5JTkZPUk1BVElPTl9NRVNTQUdFKTtcbiAgIDIxMlx0XG4gICAyMTNcdCAgICAgICAgICAgICAgICAgICAgLy8gT3BlbiB0aGUgYXBwcm9wcmlhdGUgZGFzaGJvYXJkIGJhc2VkIG9uIHVzZXIgcm9sZVxuICAgMjE0XHQgICAgICAgICAgICAgICAgICAgIGlmKFwiYWRtaW5cIi5lcXVhbHNJZ25vcmVDYXNlKHVzZXIuZ2V0Um9sZSgpKSkge1xuICAgMjE1XHQgICAgICAgICAgICAgICAgICAgICAgICBuZXcgaW50ZXJuZXQubWFuZ2VtZW50LnN5c3RlbS5BZG1pbi5EYXNoYm9hcmQoKS5zZXRWaXNpYmxlKHRydWUpO1xuICAgMjE2XHQgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAyMTdcdCAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvciByZWd1bGFyIHVzZXJzLCB5b3UgY2FuIGNyZWF0ZSBhIGRpZmZlcmVudCBkYXNoYm9hcmRcbiAgIDIxOFx0ICAgICAgICAgICAgICAgICAgICAgICAgLy8gbmV3IFVzZXJEYXNoYm9hcmQoKS5zZXRWaXNpYmxlKHRydWUpO1xuICAgMjE5XHQgICAgICAgICAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyh0aGlzLCBcIkNo4bupYyBuxINuZyDEkWFuZyDEkcaw4bujYyBwaMOhdCB0cmnhu4NuIVwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLklORk9STUFUSU9OX01FU1NBR0UpO1xuICAgMjIwXHQgICAgICAgICAgICAgICAgICAgIH1cbiAgIDIyMVx0XG4gICAyMjJcdCAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwb3NlKCk7XG4gICAyMjNcdCAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgMjI0XHQgICAgICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKHRoaXMsIFwiU2FpIHTDqm4gxJHEg25nIG5o4bqtcCBob+G6t2MgbeG6rXQga2jhuql1LlwiLCBcIkzhu5dpXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgMjI1XHQgICAgICAgICAgICAgICAgfVxuICAgMjI2XHQgICAgICAgICAgICB9IGNhdGNoKEV4Y2VwdGlvbiBleCkge1xuICAgMjI3XHQgICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXCJM4buXaTogXCIgKyBleC5nZXRNZXNzYWdlKCksIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAyMjhcdCAgICAgICAgICAgIH1cbiAgIDIyOVx0ICAgICAgICB9XG5cblJldmlldyB0aGUgY2hhbmdlcyBhbmQgbWFrZSBzdXJlIHRoZXkgYXJlIGFzIGV4cGVjdGVkIChjb3JyZWN0IGluZGVudGF0aW9uLCBubyBkdXBsaWNhdGUgbGluZXMsIGV0YykuXG5FZGl0IHRoZSBmaWxlIGFnYWluIGlmIG5lY2Vzc2FyeS5cbiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfMDE3UzVZU1RmM043TGd0MXBtb1lIaWJhIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiRTovSG9jVGFwLzAyX0pBVkEvMDNfUHJvamVjdC9JbnRlcm5ldCBNYW5nZW1lbnQgU3lzdGVtIiwiZm9sZGVyUm9vdCI6IkU6L0hvY1RhcC8wMl9KQVZBLzAzX1Byb2plY3QvSW50ZXJuZXQgTWFuZ2VtZW50IFN5c3RlbSJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInRpbWVzdGFtcCI6IjIwMjUtMDUtMTNUMTM6MDQ6MjIuNTEwWiIsInJlc3BvbnNlX3RleHQiOiJOb3cgbGV0J3MgdGVzdCBvdXIgaW1wbGVtZW50YXRpb24gdG8gbWFrZSBzdXJlIGl0IHdvcmtzIGNvcnJlY3RseS4gTGV0J3MgcnVuIHRoZSBhcHBsaWNhdGlvbiBhbmQgc2VlIGlmIHRoZSBsb2dpbiBmdW5jdGlvbmFsaXR5IHdvcmtzIGFzIGV4cGVjdGVkLlxuXG4jIyBTdW1tYXJ5IG9mIENoYW5nZXNcblxuSSd2ZSBtYWRlIHRoZSBmb2xsb3dpbmcgY2hhbmdlcyB0byBpbXBsZW1lbnQgdGhlIGZ1bmN0aW9uYWxpdHkgdG8gZ2V0IGFsbCB1c2VyIGluZm9ybWF0aW9uIHdoZW4gbG9naW4gaXMgc3VjY2Vzc2Z1bDpcblxuMS4gTW9kaWZpZWQgdGhlIGBVc2VyREFPLmxvZ2luYCBtZXRob2QgdG86XG4gICAtIFJldHVybiBhIGBVc2VyYCBvYmplY3QgaW5zdGVhZCBvZiBhIGJvb2xlYW5cbiAgIC0gUmV0cmlldmUgYWxsIHVzZXIgaW5mb3JtYXRpb24gZnJvbSB0aGUgZGF0YWJhc2VcbiAgIC0gQ2xvc2UgdGhlIFJlc3VsdFNldCBwcm9wZXJseVxuXG4yLiBVcGRhdGVkIHRoZSBgYnRuTG9naW5BY3Rpb25QZXJmb3JtZWRgIG1ldGhvZCBpbiB0aGUgYExvZ2luLmphdmFgIGZpbGUgdG86XG4gICAtIFVzZSB0aGUgVXNlciBvYmplY3QgcmV0dXJuZWQgYnkgdGhlIGxvZ2luIG1ldGhvZFxuICAgLSBTdG9yZSB0aGUgdXNlciBpbmZvcm1hdGlvbiBpbiB0aGUgVXNlclNlc3Npb25cbiAgIC0gT3BlbiB0aGUgYXBwcm9wcmlhdGUgZGFzaGJvYXJkIGJhc2VkIG9uIHRoZSB1c2VyJ3Mgcm9sZVxuXG5UaGVzZSBjaGFuZ2VzIGVuc3VyZSB0aGF0IHdoZW4gYSB1c2VyIGxvZ3MgaW4gc3VjY2Vzc2Z1bGx5OlxuMS4gQWxsIHVzZXIgaW5mb3JtYXRpb24gaXMgcmV0cmlldmVkIGZyb20gdGhlIGRhdGFiYXNlXG4yLiBUaGUgdXNlciBpbmZvcm1hdGlvbiBpcyBzdG9yZWQgaW4gdGhlIFVzZXJTZXNzaW9uIGZvciB1c2UgdGhyb3VnaG91dCB0aGUgYXBwbGljYXRpb25cbjMuIFRoZSBhcHByb3ByaWF0ZSBkYXNoYm9hcmQgaXMgZGlzcGxheWVkIGJhc2VkIG9uIHRoZSB1c2VyJ3Mgcm9sZVxuXG4jIyBUZXN0aW5nXG5cblRvIHRlc3QgdGhpcyBpbXBsZW1lbnRhdGlvbjpcbjEuIFJ1biB0aGUgYXBwbGljYXRpb25cbjIuIEVudGVyIHZhbGlkIGxvZ2luIGNyZWRlbnRpYWxzXG4zLiBWZXJpZnkgdGhhdCB0aGUgbG9naW4gaXMgc3VjY2Vzc2Z1bCBhbmQgdGhlIGFwcHJvcHJpYXRlIGRhc2hib2FyZCBpcyBkaXNwbGF5ZWRcbjQuIENoZWNrIHRoYXQgdGhlIHVzZXIgaW5mb3JtYXRpb24gaXMgY29ycmVjdGx5IGRpc3BsYXllZCBpbiB0aGUgZGFzaGJvYXJkXG5cbiMjIE5leHQgU3RlcHNcblxuSWYgeW91IHdhbnQgdG8gZnVydGhlciBlbmhhbmNlIHRoaXMgZnVuY3Rpb25hbGl0eSwgeW91IGNvdWxkOlxuMS4gQ3JlYXRlIGEgc2VwYXJhdGUgZGFzaGJvYXJkIGZvciByZWd1bGFyIHVzZXJzXG4yLiBBZGQgbW9yZSB1c2VyIGluZm9ybWF0aW9uIHRvIGRpc3BsYXkgaW4gdGhlIGRhc2hib2FyZFxuMy4gSW1wbGVtZW50IGEgbG9nb3V0IGZ1bmN0aW9uYWxpdHkgdGhhdCBjbGVhcnMgdGhlIFVzZXJTZXNzaW9uXG5cbldvdWxkIHlvdSBsaWtlIG1lIHRvIG1ha2UgYW55IGFkZGl0aW9uYWwgY2hhbmdlcyBvciBpbXByb3ZlbWVudHMgdG8gdGhlIGltcGxlbWVudGF0aW9uP1xuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJyZXF1ZXN0X2lkIjoiYjljZWZhZWEtNWExZS00ZmFmLWI2NDktNWIxYWU5OTJiMjNiIiwidXVpZCI6ImQ2NmEzYTNhLTNlNDUtNGI1MS1hYjI1LTJlMWMxNWI3YzcwNyIsImNoYXRJdGVtVHlwZSI6ImFnZW50aWMtY2hlY2twb2ludC1kZWxpbWl0ZXIiLCJzdGF0dXMiOiJzdWNjZXNzIiwiZnJvbVRpbWVzdGFtcCI6MTc0NzE0MTExMDMwNSwidG9UaW1lc3RhbXAiOjE3NDcxNDE0ODc3NDEsInNlZW5fc3RhdGUiOiJzZWVuIn1dLCJmZWVkYmFja1N0YXRlcyI6eyJ0ZW1wLWZlLWRiMzNhNmE0LTBjYjMtNDJlYS05YTZhLWE1YjMwZDRiYTM4ZiI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtMzc4YTAxMjQtZTRlZi00YjYyLTk4MmMtNDc2OTBmZGNmNTFhIjp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS0zYTViZTllMS1hZWQ2LTRkNzgtYmM0ZC04ODllNmEwZTRiY2YiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLWMzZGE3OTBmLTcyM2ItNGE3ZC1hM2E1LTA1ZWUzMWJiNDUxNyI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtOTFmYWJkYmItZTI3Mi00M2VhLWFmODYtMmM5NjIxMzMyMTk4Ijp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS04YTc2ZDFiMS1jZTI2LTRjOTctOTUzNS03YzgxMDUxMTllNDQiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLWIyZjc3ZTc1LWE3NmQtNDE3Zi05ZjZjLTUzMWM3NWMzMTE2MSI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtMjg5ZDQwOWUtMDFkOS00NjMyLTg1ZTgtNzNkMTAxZGQ1ZjZhIjp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS05YWI0NjQ3Mi1jMGRjLTRmNjEtOTZlMC03NDA3YWZmMWEzOTQiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLTdiOWJiNWNmLTQ0MjktNDYyNy1hMTFjLTRlMGJmMzE5OTBlNiI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtMmFmMjYzZjYtNGY0NC00ZTVmLThlMTctY2FkMmQzNDlmYWU2Ijp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS01YjIyNzk5Zi0wNGNlLTQ1OTMtYjRlMC0yZTEzMjVlMWM1MDIiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLWJlN2MwNTA5LTIwMDktNGYzNy05MDlkLTBmNWY3NmY2YWEwYiI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtZjBlNGUyNjctYjFlNS00NDc5LWFiNjgtNjNhZTZmNDhkZDZiIjp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS0zMTI4YmVmZi1hMDU5LTQ1MGMtODZmNy1iMWEzZGIyNjcwYmEiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLWZkYzU2MGRjLTBkNDEtNDg0My05OTkwLTdjYzczODQ4NjAxOSI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtNTE2MWZhZDgtMzdlZS00OWJhLWFkNzAtYjc4NTQxYzMyYzk3Ijp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS0yNzFjYzVkZS02MDVhLTQ3OGMtOTI0ZC1kZGUzZDEwNzQ0NDYiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLWVmODViNjEwLWMyYTItNDRhYi04OTBhLTUxMTA5YmI3YmU5NCI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtZTVjNGI5Y2QtYjQ2MS00NDA1LWIyZGQtN2U2YTRiNDEzZTA4Ijp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS02NmRmN2NmZS0wNmRiLTRiNjEtOGE4NC0xYTdiZjU0YTMwMjIiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLTJjYTNmNGI3LTZiMjYtNDJiNi1iYmEwLTY3NWQ4MzVlZTdhMSI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtNjk5NzFjNjQtYjM1MC00ZDEyLTk4ZDktM2ZmNTc3YTg1MGVjIjp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS1mNjI2NDNhMy0yM2ViLTQ5MmQtOGQ4ZS02NTBiMmQ0MDQyNjQiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9fSwidG9vbFVzZVN0YXRlcyI6eyJjNjg2M2I3ZC0xYmQ5LTRhYzAtYmYyOC1iZTFjNGJlNTFlMDk7dG9vbHVfMDFVRUJjVGdGa0hpdVRISzhBRWdqNEt6Ijp7InJlcXVlc3RJZCI6ImM2ODYzYjdkLTFiZDktNGFjMC1iZjI4LWJlMWM0YmU1MWUwOSIsInRvb2xVc2VJZCI6InRvb2x1XzAxVUVCY1RnRmtIaXVUSEs4QUVnajRLeiIsInBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IlRoZSBmb2xsb3dpbmcgY29kZSBzZWN0aW9ucyB3ZXJlIHJldHJpZXZlZDpcblBhdGg6IHNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL0xvZ2luLmphdmFcbi8qXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0xpY2Vuc2VzL2xpY2Vuc2UtZGVmYXVsdC50eHQgdG8gY2hhbmdlIHRoaXMgbGljZW5zZVxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9HVUlGb3Jtcy9KRnJhbWUuamF2YSB0byBlZGl0IHRoaXMgdGVtcGxhdGVcbiAqL1xucGFja2FnZSBpbnRlcm5ldC5tYW5nZW1lbnQuc3lzdGVtO1xuXG5pbXBvcnQgREFPLlVzZXJEQU87XG5pbXBvcnQgTW9kZWwuVXNlcjtcbmltcG9ydCBqYXZheC5zd2luZy5KT3B0aW9uUGFuZTtcblxuLyoqXG4gKlxuICogQGF1dGhvciBOZ29jIFRoYW9cbiAqL1xucHVibGljIGNsYXNzIExvZ2luIGV4dGVuZHMgamF2YXguc3dpbmcuSkZyYW1lIHtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgbmV3IGZvcm0gTG9naW5cbiAgICAgKi9cbiAgICBwdWJsaWMgTG9naW4oKSB7XG4gICAgICAgIGluaXRDb21wb25lbnRzKCk7XG4gICAgICAgIHNldFRpdGxlKFwixJDEg25nIGvDvVwiKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBjbGVhcigpe1xuICAgICAgICB0eHRVc2VyTmFtZS5zZXRUZXh0KFwiXCIpO1xuICAgICAgICB0eHRQYXNzd29yZC5zZXRUZXh0KFwiXCIpO1xuICAgIH1cblxuICAgIHB1YmxpYyBib29sZWFuIHZhbGlkYXRlRmllbGRzKCl7XG4gICAgICAgIFN0cmluZyB1c2VyTmFtZSA9IHR4dFVzZXJOYW1lLmdldFRleHQoKTtcbiAgICAgICAgU3RyaW5nIHBhc3N3b3JkID0gdHh0UGFzc3dvcmQuZ2V0VGV4dCgpO1xuXG4gICAgICAgIGlmKHVzZXJOYW1lLmlzRW1wdHkoKSB8fCBwYXNzd29yZC5pc0VtcHR5KCkpe1xuICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXCJWdWkgbMOybmcga2jDtG5nIGLhu48gdHLhu5FuZyFcIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4uLi5cblxuICAgICAgICBqTGFiZWwxID0gbmV3IGphdmF4LnN3aW5nLkpMYWJlbCgpO1xuICAgICAgICBqTGFiZWwyID0gbmV3IGphdmF4LnN3aW5nLkpMYWJlbCgpO1xuICAgICAgICBqTGFiZWwzID0gbmV3IGphdmF4LnN3aW5nLkpMYWJlbCgpO1xuICAgICAgICBqTGFiZWw0ID0gbmV3IGphdmF4LnN3aW5nLkpMYWJlbCgpO1xuICAgICAgICB0eHRVc2VyTmFtZSA9IG5ldyBqYXZheC5zd2luZy5KVGV4dEZpZWxkKCk7XG4gICAgICAgIHR4dFBhc3N3b3JkID0gbmV3IGphdmF4LnN3aW5nLkpQYXNzd29yZEZpZWxkKCk7XG4gICAgICAgIGpTZXBhcmF0b3IxID0gbmV3IGphdmF4LnN3aW5nLkpTZXBhcmF0b3IoKTtcbiAgICAgICAgalNlcGFyYXRvcjIgPSBuZXcgamF2YXguc3dpbmcuSlNlcGFyYXRvcigpO1xuICAgICAgICBidG5Mb2dpbiA9IG5ldyBqYXZheC5zd2luZy5KQnV0dG9uKCk7XG4gICAgICAgIGJ0bkZvcmdvdFBhc3N3b3JkID0gbmV3IGphdmF4LnN3aW5nLkpCdXR0b24oKTtcbiAgICAgICAgYnRuU2lnbnVwID0gbmV3IGphdmF4LnN3aW5nLkpCdXR0b24oKTtcbiAgICAgICAgakxhYmVsNSA9IG5ldyBqYXZheC5zd2luZy5KTGFiZWwoKTtcbiAgICAgICAgYnRuRXhpdCA9IG5ldyBqYXZheC5zd2luZy5KQnV0dG9uKCk7XG5cbiAgICAgICAgc2V0RGVmYXVsdENsb3NlT3BlcmF0aW9uKGphdmF4LnN3aW5nLldpbmRvd0NvbnN0YW50cy5FWElUX09OX0NMT1NFKTtcbi4uLlxuXG4gICAgcHJpdmF0ZSB2b2lkIGJ0bkxvZ2luQWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkxvZ2luQWN0aW9uUGVyZm9ybWVkXG4gICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxuICAgICAgICBpZih2YWxpZGF0ZUZpZWxkcygpKSB7XG4gICAgICAgICAgICB0cnl7XG4gICAgICAgICAgICAgICAgU3RyaW5nIHVzZXJuYW1lID0gdHh0VXNlck5hbWUuZ2V0VGV4dCgpLnRyaW0oKTtcbiAgICAgICAgICAgICAgICBTdHJpbmcgcGFzc3dvcmQgPSB0eHRQYXNzd29yZC5nZXRUZXh0KCkudHJpbSgpO1xuXG4gICAgICAgICAgICAgICAgVXNlciB1c2VyID0gbnVsbDtcbiAgICAgICAgICAgICAgICBib29sZWFuIGlzU3VjY2VzcyA9IFVzZXJEQU8ubG9naW4odXNlcm5hbWUsIHBhc3N3b3JkKTtcblxuICAgICAgICAgICAgICAgIGlmKGlzU3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyh0aGlzLCBcIsSQxINuZyBuaOG6rXAgdGjDoG5oIGPDtG5nIVwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLklORk9STUFUSU9OX01FU1NBR0UpO1xuLy8gICAgICAgICAgICAgICAgICAgIG5ldyBNYWluRnJhbWUoKS5zZXRWaXNpYmxlKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyh0aGlzLCBcIlNhaSB0w6puIMSRxINuZyBuaOG6rXAgaG/hurdjIG3huq10IGto4bqpdS5cIiwgXCJM4buXaVwiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgICAgICAgICAgICAgICB9XG4uLi5cblxuICAgIHByaXZhdGUgdm9pZCBidG5FeGl0QWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkV4aXRBY3Rpb25QZXJmb3JtZWRcbiAgICAgICAgLy8gVE9ETyBhZGQgeW91ciBoYW5kbGluZyBjb2RlIGhlcmU6XG4gICAgICAgIGludCByZXN1bHQgPSBKT3B0aW9uUGFuZS5zaG93Q29uZmlybURpYWxvZyhudWxsLCBcIkLhuqFuIGPDsyBjaOG6r2MgY2jhuq9uIG114buRbiB0aG/DoXQga2jDtG5nP1wiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLllFU19OT19PUFRJT04sIEpPcHRpb25QYW5lLlFVRVNUSU9OX01FU1NBR0UpO1xuXG4gICAgICAgIGlmIChyZXN1bHQgPT0gSk9wdGlvblBhbmUuWUVTX09QVElPTikge1xuICAgICAgICAgICAgU3lzdGVtLmV4aXQoMCk7XG4gICAgICAgIH1cbiAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5FeGl0QWN0aW9uUGVyZm9ybWVkXG5cbiAgICBwcml2YXRlIHZvaWQgYnRuU2lnbnVwQWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0blNpZ251cEFjdGlvblBlcmZvcm1lZFxuICAgICAgICAvLyBUT0RPIGFkZCB5b3VyIGhhbmRsaW5nIGNvZGUgaGVyZTpcbiAgICAgICAgc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgICAgIG5ldyBTaWduVXAoKS5zZXRWaXNpYmxlKHRydWUpO1xuICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0blNpZ251cEFjdGlvblBlcmZvcm1lZFxuLi4uXG5cbiAgICAvLyBWYXJpYWJsZXMgZGVjbGFyYXRpb24gLSBkbyBub3QgbW9kaWZ5Ly9HRU4tQkVHSU46dmFyaWFibGVzXG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KQnV0dG9uIGJ0bkV4aXQ7XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KQnV0dG9uIGJ0bkZvcmdvdFBhc3N3b3JkO1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkJ1dHRvbiBidG5Mb2dpbjtcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpCdXR0b24gYnRuU2lnbnVwO1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkxhYmVsIGpMYWJlbDE7XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KTGFiZWwgakxhYmVsMjtcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpMYWJlbCBqTGFiZWwzO1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkxhYmVsIGpMYWJlbDQ7XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KTGFiZWwgakxhYmVsNTtcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpTZXBhcmF0b3IgalNlcGFyYXRvcjE7XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KU2VwYXJhdG9yIGpTZXBhcmF0b3IyO1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSlBhc3N3b3JkRmllbGQgdHh0UGFzc3dvcmQ7XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KVGV4dEZpZWxkIHR4dFVzZXJOYW1lO1xuICAgIC8vIEVuZCBvZiB2YXJpYWJsZXMgZGVjbGFyYXRpb24vL0dFTi1FTkQ6dmFyaWFibGVzXG59XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvY29tL3N0b3JlL2FwcC9wZXRzdG9yZS9Db250cm9sbGVycy9Mb2dpbkNvbnRyb2xsZXIuamF2YVxuLi4uXG5cbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLkRBTy5Vc2VyREFPO1xuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuREFPLlN0YWZmREFPO1xuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuTW9kZWxzLkVudGl0aWVzLlVzZXI7XG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5Nb2RlbHMuRW50aXRpZXMuU3RhZmY7XG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5TZXNzaW9ucy5TZXNzaW9uTWFuYWdlcjtcbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLlZpZXdzLkFkbWluRmFjdG9yeTtcbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLlZpZXdzLlZpZXdGYWN0b3J5O1xuaW1wb3J0IGRlLmplbnNkLmZ4LmdseXBocy5mb250YXdlc29tZS5Gb250QXdlc29tZUljb247XG5pbXBvcnQgZGUuamVuc2QuZnguZ2x5cGhzLmZvbnRhd2Vzb21lLkZvbnRBd2Vzb21lSWNvblZpZXc7XG5pbXBvcnQgamF2YWZ4LmZ4bWwuRlhNTDtcbmltcG9ydCBqYXZhZnguZnhtbC5Jbml0aWFsaXphYmxlO1xuaW1wb3J0IGphdmFmeC5zY2VuZS5jb250cm9sLio7XG5pbXBvcnQgamF2YWZ4LnNjZW5lLmlucHV0Lk1vdXNlRXZlbnQ7XG5pbXBvcnQgamF2YWZ4LnN0YWdlLlN0YWdlO1xuaW1wb3J0IGphdmFmeC5zY2VuZS5pbWFnZS5JbWFnZTtcbmltcG9ydCBqYXZhZnguc2NlbmUuaW1hZ2UuSW1hZ2VWaWV3O1xuaW1wb3J0IGphdmFmeC5zY2VuZS5wYWludC5JbWFnZVBhdHRlcm47XG5pbXBvcnQgamF2YS51dGlsLk9iamVjdHM7XG4uLi5cblxucHVibGljIGNsYXNzIExvZ2luQ29udHJvbGxlciBpbXBsZW1lbnRzIEluaXRpYWxpemFibGUge1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIEZvbnRBd2Vzb21lSWNvblZpZXcgZXllSWNvbjtcblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBUZXh0RmllbGQgc2hvd1Bhc3N3b3JkO1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIFBhc3N3b3JkRmllbGQgcGFzc3dvcmRGaWVsZDtcblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBUZXh0RmllbGQgdXNlcm5hbWVGaWVsZDtcblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBCdXR0b24gbG9naW5CdXR0b247XG5cbiAgICBARlhNTFxuICAgIHByaXZhdGUgTGFiZWwgZXJyb3JMYWJlbDtcblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBIeXBlcmxpbmsgZm9yZ290UGFzc3dvcmRMaW5rO1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIEltYWdlVmlldyB1c2VySW1hZ2U7XG5cbiAgICBwcml2YXRlIGRvdWJsZSB4LCB5O1xuXG4gICAgVXNlckRBTyB1c2VyREFPID0gbmV3IFVzZXJEQU8oKTtcbiAgICBTdGFmZkRBTyBzdGFmZkRBTyA9IFN0YWZmREFPLmdldEluc3RhbmNlKCk7XG4gICAgcHVibGljIHN0YXRpYyBpbnQgaWRTdGFmZkN1cnJlbnQ7XG4gICAgcHVibGljIHN0YXRpYyBpbnQgaWRBZG1pbkN1cnJlbnQ7XG5cbiAgICBwcml2YXRlIFNlc3Npb25NYW5hZ2VyIHNlc3Npb25NYW5hZ2VyID0gbmV3IFNlc3Npb25NYW5hZ2VyKCk7XG4uLi5cblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gVMOsbSB1c2VyIHRoZW8gdXNlcm5hbWVcbiAgICAgICAgICAgIFVzZXIgdXNlciA9IHVzZXJEQU8uZmluZEJ5VXNlcm5hbWUodXNlcm5hbWUpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZih1c2VyID09IG51bGwgfHwgdXNlci5nZXRVc2VybmFtZSgpID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBDb250cm9sbGVyVXRpbHMuc2hvd0FsZXJ0KEFsZXJ0LkFsZXJ0VHlwZS5FUlJPUiwgXCJM4buXaVwiLCBcIlTDqm4gxJHEg25nIG5o4bqtcCBraMO0bmcgxJHDum5nXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gS2nhu4NtIHRyYSB0w6puIMSRxINuZyBuaOG6rXBcbiAgICAgICAgICAgIGlmICghdXNlci5nZXRVc2VybmFtZSgpLmVxdWFscyh1c2VybmFtZSkpIHtcbiAgICAgICAgICAgICAgICBDb250cm9sbGVyVXRpbHMuc2hvd0FsZXJ0KEFsZXJ0LkFsZXJ0VHlwZS5FUlJPUiwgXCJM4buXaVwiLCBcIlTDqm4gxJHEg25nIG5o4bqtcCBraMO0bmcgxJHDum5nXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gS2nhu4NtIHRyYSBt4bqtdCBraOG6qXVcbiAgICAgICAgICAgIGlmKCFCQ3J5cHQuY2hlY2twdyhwYXNzd29yZCwgdXNlci5nZXRQYXNzd29yZCgpKSkge1xuICAgICAgICAgICAgICAgIENvbnRyb2xsZXJVdGlscy5zaG93QWxlcnQoQWxlcnQuQWxlcnRUeXBlLkVSUk9SLCBcIkzhu5dpXCIsIFwiTeG6rXQga2jhuql1IGtow7RuZyDEkcO6bmdcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzZXNzaW9uTWFuYWdlci5zZXRDdXJyZW50VXNlcih1c2VyKTtcblxuICAgICAgICAgICAgU3RhZ2UgY3VycmVudFN0YWdlID0gKFN0YWdlKSB1c2VybmFtZUZpZWxkLmdldFNjZW5lKCkuZ2V0V2luZG93KCk7XG5cbiAgICAgICAgICAgIGlmKHVzZXIuZ2V0Um9sZSgpLmVxdWFscyhVc2VyLlJPTEVfQURNSU4pKSB7XG4gICAgICAgICAgICAgICAgaWRBZG1pbkN1cnJlbnQgPSB1c2VyLmdldFVzZXJJZCgpO1xuICAgICAgICAgICAgICAgIEFkbWluRmFjdG9yeS5nZXRJbnN0YW5jZSgpLnN3aXRjaENvbnRlbnQoXCJkYXNoYm9hcmRcIiwgY3VycmVudFN0YWdlKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZih1c2VyLmdldFJvbGUoKS5lcXVhbHMoVXNlci5ST0xFX1VTRVIpKSB7XG4gICAgICAgICAgICAgICAgaWRTdGFmZkN1cnJlbnQgPSB1c2VyLmdldFVzZXJJZCgpO1xuICAgICAgICAgICAgICAgIFN0YWZmIHN0YWZmID0gc3RhZmZEQU8uZmluZEJ5VXNlcklkKHVzZXIuZ2V0VXNlcklkKCkpO1xuICAgICAgICAgICAgICAgIGlmIChzdGFmZiAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlc3Npb25NYW5hZ2VyLnNldEN1cnJlbnRTdGFmZihzdGFmZik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFZpZXdGYWN0b3J5LmdldEluc3RhbmNlKCkuc3dpdGNoQ29udGVudChcImRhc2hib2FyZFwiLCBjdXJyZW50U3RhZ2UpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBDb250cm9sbGVyVXRpbHMuc2hvd0FsZXJ0KEFsZXJ0LkFsZXJ0VHlwZS5FUlJPUiwgXCJM4buXaVwiLCBcIlZhaSB0csOyIG5nxrDhu51pIGTDuW5nIGtow7RuZyBo4bujcCBs4buHXCIpO1xuICAgICAgICAgICAgICAgIHNlc3Npb25NYW5hZ2VyLmNsZWFyKCk7XG4gICAgICAgICAgICB9XG4uLi5cblBhdGg6IHNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL1Nlc3Npb24vVXNlclNlc3Npb24uamF2YVxuLypcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvTGljZW5zZXMvbGljZW5zZS1kZWZhdWx0LnR4dCB0byBjaGFuZ2UgdGhpcyBsaWNlbnNlXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ2xhc3MuamF2YSB0byBlZGl0IHRoaXMgdGVtcGxhdGVcbiAqL1xucGFja2FnZSBpbnRlcm5ldC5tYW5nZW1lbnQuc3lzdGVtLlNlc3Npb247XG5cbmltcG9ydCBNb2RlbC5Vc2VyO1xuXG4vKipcbiAqXG4gKiBAYXV0aG9yIE5nb2MgVGhhb1xuICovXG5wdWJsaWMgY2xhc3MgVXNlclNlc3Npb24ge1xuICAgIHB1YmxpYyBzdGF0aWMgVXNlciBjdXJyZW50VXNlcjtcblxuICAgIHB1YmxpYyBVc2VyU2Vzc2lvbigpIHtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIFVzZXIgZ2V0Q3VycmVudFVzZXIoKSB7XG4gICAgICAgIHJldHVybiBjdXJyZW50VXNlcjtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIHZvaWQgc2V0Q3VycmVudFVzZXIoVXNlciBjdXJyZW50VXNlcikge1xuICAgICAgICBVc2VyU2Vzc2lvbi5jdXJyZW50VXNlciA9IGN1cnJlbnRVc2VyO1xuICAgIH1cbiAgICBcbiAgICBcbn1cbi4uLlxuUGF0aDogc3JjL01vZGVsL1VzZXIuamF2YVxuLi4uXG5cbmltcG9ydCBqYXZhLnRpbWUuTG9jYWxEYXRlVGltZTtcbi8qKlxuICpcbiAqIEBhdXRob3IgTmdvYyBUaGFvXG4gKi9cbnB1YmxpYyBjbGFzcyBVc2VyIHtcbiAgICBwcml2YXRlIGludCB1c2VyX2lkO1xuICAgIHByaXZhdGUgU3RyaW5nIHVzZXJuYW1lO1xuICAgIHByaXZhdGUgU3RyaW5nIHBhc3N3b3JkO1xuICAgIHByaXZhdGUgU3RyaW5nIHJvbGU7XG4gICAgcHJpdmF0ZSBMb2NhbERhdGVUaW1lIGNyZWF0ZV9hdDtcbiAgICBwcml2YXRlIGJvb2xlYW4gaXNBY3RpdmU7XG5cbiAgICBwdWJsaWMgVXNlcigpIHtcbiAgICB9XG5cbiAgICBwdWJsaWMgVXNlcihpbnQgdXNlcl9pZCwgU3RyaW5nIHVzZXJuYW1lLCBTdHJpbmcgcGFzc3dvcmQsIFN0cmluZyByb2xlLCBMb2NhbERhdGVUaW1lIGNyZWF0ZV9hdCwgYm9vbGVhbiBpc0FjdGl2ZSkge1xuICAgICAgICB0aGlzLnVzZXJfaWQgPSB1c2VyX2lkO1xuICAgICAgICB0aGlzLnVzZXJuYW1lID0gdXNlcm5hbWU7XG4gICAgICAgIHRoaXMucGFzc3dvcmQgPSBwYXNzd29yZDtcbiAgICAgICAgdGhpcy5yb2xlID0gcm9sZTtcbiAgICAgICAgdGhpcy5jcmVhdGVfYXQgPSBjcmVhdGVfYXQ7XG4gICAgICAgIHRoaXMuaXNBY3RpdmUgPSBpc0FjdGl2ZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgaW50IGdldFVzZXJfaWQoKSB7XG4gICAgICAgIHJldHVybiB1c2VyX2lkO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHNldFVzZXJfaWQoaW50IHVzZXJfaWQpIHtcbiAgICAgICAgdGhpcy51c2VyX2lkID0gdXNlcl9pZDtcbiAgICB9XG5cbiAgICBwdWJsaWMgU3RyaW5nIGdldFVzZXJuYW1lKCkge1xuICAgICAgICByZXR1cm4gdXNlcm5hbWU7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgc2V0VXNlcm5hbWUoU3RyaW5nIHVzZXJuYW1lKSB7XG4gICAgICAgIHRoaXMudXNlcm5hbWUgPSB1c2VybmFtZTtcbiAgICB9XG4uLi5cblBhdGg6IHNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL1NpZ25VcC5qYXZhXG4uLi5cblxuICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0blJldHVybkFjdGlvblBlcmZvcm1lZFxuXG4gICAgcHJpdmF0ZSB2b2lkIGJ0blNpZ251cEFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5TaWdudXBBY3Rpb25QZXJmb3JtZWRcbiAgICAgICAgLy8gVE9ETyBhZGQgeW91ciBoYW5kbGluZyBjb2RlIGhlcmU6XG4gICAgICAgIGlmICh2YWxpZGF0ZUZpZWxkcygpKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIFN1YnNjcmliZXIgc3ViID0gbmV3IFN1YnNjcmliZXIoKTtcbiAgICAgICAgICAgICAgICBzdWIuc2V0RnVsbE5hbWUodHh0TmFtZS5nZXRUZXh0KCkpO1xuICAgICAgICAgICAgICAgIHN1Yi5zZXRVc2VybmFtZSh0eHRVc2VyTmFtZS5nZXRUZXh0KCkpO1xuICAgICAgICAgICAgICAgIHN1Yi5zZXRQYXNzd29yZCh0eHRQYXNzd29yZC5nZXRUZXh0KCkpO1xuICAgICAgICAgICAgICAgIHN1Yi5zZXRSb2xlKERFRkFVTFRfUk9MRSk7XG4gICAgICAgICAgICAgICAgc3ViLnNldEFkZHJlc3ModHh0QWRkcmVzcy5nZXRUZXh0KCkpO1xuICAgICAgICAgICAgICAgIHN1Yi5zZXRQaG9uZSh0eHRQaG9uZS5nZXRUZXh0KCkpO1xuICAgICAgICAgICAgICAgIHN1Yi5zZXRDcmVhdGVfYXQoTG9jYWxEYXRlVGltZS5ub3coKSk7XG4gICAgICAgICAgICAgICAgU3Vic2NyaWJlckRBTy5pbnNlcnQoc3ViKTtcbiAgICAgICAgICAgICAgICBjbGVhcigpO1xuICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGV4KSB7XG4gICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXCJM4buXaTogXCIgKyBleC5nZXRNZXNzYWdlKCksIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5TaWdudXBBY3Rpb25QZXJmb3JtZWRcbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9jb20vc3RvcmUvYXBwL3BldHN0b3JlL0RBTy9Vc2VyREFPLmphdmFcbnBhY2thZ2UgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5EQU87XG5cbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLk1vZGVscy5FbnRpdGllcy5Vc2VyO1xuaW1wb3J0IG9yZy5taW5kcm90LmpiY3J5cHQuQkNyeXB0O1xuXG5pbXBvcnQgamF2YS5zcWwuKjtcbmltcG9ydCBqYXZhLnV0aWwuQXJyYXlMaXN0O1xuaW1wb3J0IGphdmEudXRpbC5CYXNlNjQ7XG5cbnB1YmxpYyBjbGFzcyBVc2VyREFPIGltcGxlbWVudHMgQmFzZURBTzxVc2VyLCBJbnRlZ2VyPiB7XG4gICAgcHVibGljIHN0YXRpYyBmaW5hbCBpbnQgaXNEdXBsaWNhdGUgPSAtMTtcblxuICAgIHB1YmxpYyBzdGF0aWMgVXNlckRBTyBnZXRJbnN0YW5jZSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBVc2VyREFPKCk7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBTdHJpbmcgZW5jb2RlKFN0cmluZyBwYXNzd29yZCkge1xuLy8gICAgICAgIHJldHVybiBCYXNlNjQuZ2V0RW5jb2RlcigpLmVuY29kZVRvU3RyaW5nKHBhc3N3b3JkLmdldEJ5dGVzKCkpO1xuICAgICAgICByZXR1cm4gQkNyeXB0Lmhhc2hwdyhwYXNzd29yZCwgQkNyeXB0LmdlbnNhbHQoKSk7XG4gICAgfVxuXG4vLyAgICBwdWJsaWMgc3RhdGljIFN0cmluZyBkZWNvZGUoU3RyaW5nIHBhc3N3b3JkKSB7XG4vLyAgICAgICAgcmV0dXJuIG5ldyBTdHJpbmcoQmFzZTY0LmdldERlY29kZXIoKS5kZWNvZGUocGFzc3dvcmQpKTtcbi8vICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgYm9vbGVhbiB2ZXJpZnkoU3RyaW5nIHBhc3N3b3JkLCBTdHJpbmcgaGFzaGVkKSB7XG4gICAgICAgIHJldHVybiBCQ3J5cHQuY2hlY2twdyhwYXNzd29yZCwgaGFzaGVkKTtcbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgaW50IGluc2VydChVc2VyIGVudGl0eSkge1xuICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgICAgICBQcmVwYXJlZFN0YXRlbWVudCBzdG10ID0gbnVsbDtcbiAgICAgICAgUmVzdWx0U2V0IHJzID0gbnVsbDtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29ubiA9IERhdGFiYXNlVXRpbC5nZXRDb25uZWN0aW9uKCk7XG4gICAgICAgICAgICBTdHJpbmcgc3FsID0gXCJJTlNFUlQgSU5UTyBVc2VycyAodXNlcm5hbWUsIHBhc3N3b3JkLCByb2xlLCBpbWFnZV91cmwsIGlzQWN0aXZlKSBWQUxVRVMgKD8sID8sID8sID8sID8pXCI7XG4gICAgICAgICAgICBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHNxbCwgU3RhdGVtZW50LlJFVFVSTl9HRU5FUkFURURfS0VZUyk7XG5cbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDEsIGVudGl0eS5nZXRVc2VybmFtZSgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDIsIGVuY29kZShlbnRpdHkuZ2V0UGFzc3dvcmQoKSkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMywgZW50aXR5LmdldFJvbGUoKSk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZyg0LCBlbnRpdHkuZ2V0SW1hZ2VVcmwoKSk7XG4gICAgICAgICAgICBzdG10LnNldEJvb2xlYW4oNSwgZW50aXR5LmlzQWN0aXZlKCkpO1xuXG4gICAgICAgICAgICBpbnQgYWZmZWN0ZWRSb3dzID0gc3RtdC5leGVjdXRlVXBkYXRlKCk7XG4gICAgICAgICAgICBpZiAoYWZmZWN0ZWRSb3dzID09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdHJ5IChSZXN1bHRTZXQgZ2VuZXJhdGVkS2V5cyA9IHN0bXQuZ2V0R2VuZXJhdGVkS2V5cygpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGdlbmVyYXRlZEtleXMubmV4dCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBnZW5lcmF0ZWRLZXlzLmdldEludCgxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIERhdGFiYXNlVXRpbC5jbG9zZVJlc291cmNlcyhycywgc3RtdCwgY29ubik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgaW50IHVwZGF0ZShVc2VyIGVudGl0eSkge1xuICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgICAgICBQcmVwYXJlZFN0YXRlbWVudCBzdG10ID0gbnVsbDtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29ubiA9IERhdGFiYXNlVXRpbC5nZXRDb25uZWN0aW9uKCk7XG4gICAgICAgICAgICBTdHJpbmcgc3FsID0gXCJVUERBVEUgVXNlcnMgU0VUIHVzZXJuYW1lID0gPywgcGFzc3dvcmQgPSA/LCByb2xlID0gPywgaW1hZ2VfdXJsID0gPywgaXNBY3RpdmUgPSA/IFdIRVJFIHVzZXJfaWQgPSA/XCI7XG4gICAgICAgICAgICBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHNxbCk7XG5cbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDEsIGVudGl0eS5nZXRVc2VybmFtZSgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDIsIGVuY29kZShlbnRpdHkuZ2V0UGFzc3dvcmQoKSkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMywgZW50aXR5LmdldFJvbGUoKSk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZyg0LCBlbnRpdHkuZ2V0SW1hZ2VVcmwoKSk7XG4gICAgICAgICAgICBzdG10LnNldEJvb2xlYW4oNSwgZW50aXR5LmlzQWN0aXZlKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRJbnQoNiwgZW50aXR5LmdldFVzZXJJZCgpKTtcblxuICAgICAgICAgICAgcmV0dXJuIHN0bXQuZXhlY3V0ZVVwZGF0ZSgpO1xuICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgRGF0YWJhc2VVdGlsLmNsb3NlUmVzb3VyY2VzKHN0bXQsIGNvbm4pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGludCB1cGRhdGUoVXNlciBlbnRpdHksIGJvb2xlYW4gaXNVc2VybmFtZUNoYW5nZWQpIHtcbiAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcbiAgICAgICAgUHJlcGFyZWRTdGF0ZW1lbnQgc3RtdCA9IG51bGw7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbm4gPSBEYXRhYmFzZVV0aWwuZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgICAgICAgU3RyaW5nIHNxbCA9IFwiVVBEQVRFIFVzZXJzIFNFVCB1c2VybmFtZSA9ID8sIHBhc3N3b3JkID0gPywgcm9sZSA9ID8sIGltYWdlX3VybCA9ID8sIGlzQWN0aXZlID0gPyBXSEVSRSB1c2VyX2lkID0gP1wiO1xuICAgICAgICAgICAgc3RtdCA9IGNvbm4ucHJlcGFyZVN0YXRlbWVudChzcWwpO1xuXG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygxLCBlbnRpdHkuZ2V0VXNlcm5hbWUoKSk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygyLCBlbmNvZGUoZW50aXR5LmdldFBhc3N3b3JkKCkpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDMsIGVudGl0eS5nZXRSb2xlKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoNCwgZW50aXR5LmdldEltYWdlVXJsKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRCb29sZWFuKDUsIGVudGl0eS5pc0FjdGl2ZSgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0SW50KDYsIGVudGl0eS5nZXRVc2VySWQoKSk7XG5cbiAgICAgICAgICAgIHJldHVybiBzdG10LmV4ZWN1dGVVcGRhdGUoKTtcbiAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIERhdGFiYXNlVXRpbC5jbG9zZVJlc291cmNlcyhzdG10LCBjb25uKTtcbiAgICAgICAgfVxuICAgIH1cbi4uLlxuXG4gICAgcHVibGljIFVzZXIgZmluZEJ5VXNlcm5hbWUoU3RyaW5nIHVzZXJuYW1lKSB7XG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuICAgICAgICBSZXN1bHRTZXQgcnMgPSBudWxsO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25uID0gRGF0YWJhc2VVdGlsLmdldENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgIFN0cmluZyBzcWwgPSBcIlNFTEVDVCAqIEZST00gVXNlcnMgV0hFUkUgdXNlcm5hbWUgPSA/XCI7XG4gICAgICAgICAgICBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHNxbCk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygxLCB1c2VybmFtZSk7XG4gICAgICAgICAgICBycyA9IHN0bXQuZXhlY3V0ZVF1ZXJ5KCk7XG5cbiAgICAgICAgICAgIGlmIChycy5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICBVc2VyIHVzZXIgPSBuZXcgVXNlcigpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0VXNlcklkKHJzLmdldEludChcInVzZXJfaWRcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0VXNlcm5hbWUocnMuZ2V0U3RyaW5nKFwidXNlcm5hbWVcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0UGFzc3dvcmQocnMuZ2V0U3RyaW5nKFwicGFzc3dvcmRcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0Um9sZShycy5nZXRTdHJpbmcoXCJyb2xlXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldEltYWdlVXJsKHJzLmdldFN0cmluZyhcImltYWdlX3VybFwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRBY3RpdmUocnMuZ2V0Qm9vbGVhbihcImlzQWN0aXZlXCIpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdXNlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBEYXRhYmFzZVV0aWwuY2xvc2VSZXNvdXJjZXMocnMsIHN0bXQsIGNvbm4pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHB1YmxpYyBVc2VyIGZpbmRCeUVtYWlsKFN0cmluZyBlbWFpbCkge1xuICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgICAgICBQcmVwYXJlZFN0YXRlbWVudCBzdG10ID0gbnVsbDtcbiAgICAgICAgUmVzdWx0U2V0IHJzID0gbnVsbDtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gS2nhu4NtIHRyYSBlbWFpbCBjw7MgdOG7k24gdOG6oWkgdHJvbmcgYuG6o25nIFN0YWZmcyBraMO0bmdcbiAgICAgICAgICAgIGNvbm4gPSBEYXRhYmFzZVV0aWwuZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgICAgICAgU3RyaW5nIGNoZWNrU3FsID0gXCJTRUxFQ1QgKiBGUk9NIFN0YWZmcyBXSEVSRSBlbWFpbCA9ID9cIjtcbiAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoY2hlY2tTcWwpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMSwgZW1haWwpO1xuICAgICAgICAgICAgcnMgPSBzdG10LmV4ZWN1dGVRdWVyeSgpO1xuXG4gICAgICAgICAgICAvLyBO4bq/dSBlbWFpbCB04buTbiB04bqhaSwgbOG6pXkgdGjDtG5nIHRpbiB1c2VyXG4gICAgICAgICAgICBTdHJpbmcgc3FsID0gXCJTRUxFQ1QgdS4qIEZST00gVXNlcnMgdSBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICBcIkpPSU4gU3RhZmZzIHMgT04gdS51c2VyX2lkID0gcy51c2VyX2lkIFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiV0hFUkUgcy5lbWFpbCA9ID9cIjtcbiAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDEsIGVtYWlsKTtcblxuICAgICAgICAgICAgcnMgPSBzdG10LmV4ZWN1dGVRdWVyeSgpO1xuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL2NvbS9zdG9yZS9hcHAvcGV0c3RvcmUvQ29udHJvbGxlcnMvQWRtaW4vQWRtaW5NZW51Q29udHJvbGxlci5qYXZhXG4uLi5cblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBMYWJlbCB1c2VybmFtZUxhYmVsO1xuXG4gICAgcHJpdmF0ZSBVc2VyIGN1cnJlbnRVc2VyO1xuXG4vLyAgICBwcml2YXRlIFNlc3Npb25NYW5hZ2VyIHNlc3Npb25NYW5hZ2VyO1xuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIHZvaWQgaW5pdGlhbGl6ZShVUkwgdXJsLCBSZXNvdXJjZUJ1bmRsZSByZXNvdXJjZUJ1bmRsZSkge1xuICAgICAgICBjdXJyZW50VXNlciA9IFNlc3Npb25NYW5hZ2VyLmdldEN1cnJlbnRVc2VyKCk7XG4gICAgICAgIHNldHVwVXNlck5hbWUoKTtcbiAgICAgICAgc2V0dXBVc2VySW1hZ2UoKTtcbiAgICAgICAgc2V0TWVudSgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgdm9pZCBzZXR1cFVzZXJOYW1lKCkge1xuICAgICAgICBpZiAoY3VycmVudFVzZXIgIT0gbnVsbCkge1xuICAgICAgICAgICAgdXNlcm5hbWVMYWJlbC5zZXRUZXh0KGN1cnJlbnRVc2VyLmdldFVzZXJuYW1lKCkpO1xuICAgICAgICAgICAgbmFtZUxhYmVsLnNldFRleHQoY3VycmVudFVzZXIuZ2V0VXNlcm5hbWUoKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB1c2VybmFtZUxhYmVsLnNldFRleHQoXCJDaMawYSDEkcSDbmcgbmjhuq1wXCIpO1xuICAgICAgICAgICAgbmFtZUxhYmVsLnNldFRleHQoXCJDaMawYSBj4bqtcCBuaOG6rXQgdGjDtG5nIHRpblwiKTtcbiAgICAgICAgfVxuICAgIH1cbi4uLlxuXG4gICAgICAgIE1lbnVJdGVtIGxvZ291dE1lbnVJdGVtID0gbmV3IE1lbnVJdGVtKFwixJDEg25nIHh14bqldFwiKTtcbiAgICAgICAgbG9nb3V0TWVudUl0ZW0uc2V0T25BY3Rpb24oZSAtPiBoYW5kbGVMb2dvdXQobnVsbCkpO1xuICAgICAgICBtZW51TG9nb3V0LmdldEl0ZW1zKCkuYWRkKGxvZ291dE1lbnVJdGVtKTtcbiAgICB9XG5cbiAgICBARlhNTFxuICAgIHZvaWQgaGFuZGxlTG9nb3V0KEFjdGlvbkV2ZW50IGV2ZW50KSB7XG4gICAgICAgIFN0YWdlIGN1cnJlbnRTdGFnZSA9IChTdGFnZSkgcm9vdC5nZXRTY2VuZSgpLmdldFdpbmRvdygpO1xuICAgICAgICBpZiAoQ29udHJvbGxlclV0aWxzLnNob3dDb25maXJtYXRpb25BbmRXYWl0KFwixJDEg25nIHh14bqldFwiLCBcIkLhuqFuIGPDsyBjaOG6r2MgY2jhuq9uIG114buRbiDEkcSDbmcgeHXhuqV0IGtow7RuZz9cXG5OaOG6pW4gT0sgxJHhu4MgeMOhYyBuaOG6rW4uXCIpKSB7XG4gICAgICAgICAgICBTZXNzaW9uTWFuYWdlci5jbGVhcigpO1xuICAgICAgICAgICAgVmlld0ZhY3RvcnkuZ2V0SW5zdGFuY2UoKS5zd2l0Y2hDb250ZW50KFwibG9naW5cIiwgY3VycmVudFN0YWdlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIENvbnRyb2xsZXJVdGlscy5zaG93QWxlcnQoQWxlcnQuQWxlcnRUeXBlLklORk9STUFUSU9OLCBcIlRow7RuZyBiw6FvXCIsIFwixJDEg25nIHh14bqldCBraMO0bmcgdGjDoG5oIGPDtG5nXCIpO1xuICAgICAgICB9XG4gICAgfVxufVxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL2NvbS9zdG9yZS9hcHAvcGV0c3RvcmUvQ29udHJvbGxlcnMvQWRtaW4vVXNlckluZm9yQ29udHJvbGxlci5qYXZhXG4uLi5cblxuICAgICAgICBpZiAodmFsaWRhdGVJbnB1dCgpKSB7XG4gICAgICAgICAgICBVc2VyIHVzZXIgPSBuZXcgVXNlcigpO1xuICAgICAgICAgICAgaWYgKCFpc05ld1VzZXIpIHtcbiAgICAgICAgICAgICAgICB1c2VyLnNldFVzZXJJZChpZFVzZXJDdXJyZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHVzZXIuc2V0VXNlcm5hbWUodHh0VXNlcm5hbWUuZ2V0VGV4dCgpKTtcbiAgICAgICAgICAgIHVzZXIuc2V0UGFzc3dvcmQodHh0UGFzc3dvcmQuZ2V0VGV4dCgpKTtcblxuICAgICAgICAgICAgYm9vbGVhbiBpc0FkbWluID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAocm9sZUdyb3VwLmdldFNlbGVjdGVkVG9nZ2xlKCkgPT0gcmJ0bkFkbWluKSB7XG4gICAgICAgICAgICAgICAgaXNBZG1pbiA9IHRydWU7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHJvbGVHcm91cC5nZXRTZWxlY3RlZFRvZ2dsZSgpID09IHJidG5TdGFmZikge1xuICAgICAgICAgICAgICAgIGlzQWRtaW4gPSBmYWxzZTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocmJ0bkFkbWluLmlzU2VsZWN0ZWQoKSkge1xuICAgICAgICAgICAgICAgIGlzQWRtaW4gPSB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChyYnRuU3RhZmYuaXNTZWxlY3RlZCgpKSB7XG4gICAgICAgICAgICAgICAgaXNBZG1pbiA9IGZhbHNlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByYnRuU3RhZmYuc2V0U2VsZWN0ZWQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgcm9sZUdyb3VwLnNlbGVjdFRvZ2dsZShyYnRuU3RhZmYpO1xuICAgICAgICAgICAgICAgIGlzQWRtaW4gPSBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdXNlci5zZXRSb2xlKGlzQWRtaW4gPyBVc2VyLlJPTEVfQURNSU4gOiBVc2VyLlJPTEVfVVNFUik7XG5cbiAgICAgICAgICAgIHVzZXIuc2V0Q3JlYXRlZEF0KExvY2FsRGF0ZVRpbWUubm93KCkpO1xuICAgICAgICAgICAgdXNlci5zZXRBY3RpdmUodHJ1ZSk7XG4uLi5cblxuICAgIHByaXZhdGUgaW50IGdldE5leHRVc2VySWQoKSB7XG4gICAgICAgIEFycmF5TGlzdDxVc2VyPiB1c2VycyA9IHVzZXJEQU8uZmluZEFsbCgpO1xuICAgICAgICBpZiAodXNlcnMgPT0gbnVsbCB8fCB1c2Vycy5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1c2Vycy5zdHJlYW0oKVxuICAgICAgICAgICAgICAgIC5tYXBUb0ludChVc2VyOjpnZXRVc2VySWQpXG4gICAgICAgICAgICAgICAgLm1heCgpXG4gICAgICAgICAgICAgICAgLm9yRWxzZSgwKSArIDE7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgc2V0VXNlcihVc2VyIHVzZXIpIHtcbiAgICAgICAgc2V0QWNjb3VudEluZm8odXNlcik7XG4gICAgfVxufS4uLlxuUGF0aDogc3JjL21haW4vamF2YS9jb20vc3RvcmUvYXBwL3BldHN0b3JlL0NvbnRyb2xsZXJzL0FkbWluL0Rhc2hib2FyZENvbnRyb2xsZXIuamF2YVxuLi4uXG5cbiAgICBwcml2YXRlIHZvaWQgbmF2aWdhdGVUbyhTdHJpbmcgdmlld05hbWUpIHtcbiAgICAgICAgU3RhZ2UgY3VycmVudFN0YWdlID0gKFN0YWdlKSBsb2dvdXRCdXR0b24uZ2V0U2NlbmUoKS5nZXRXaW5kb3coKTtcbiAgICAgICAgQWRtaW5GYWN0b3J5LmdldEluc3RhbmNlKCkuc3dpdGNoQ29udGVudCh2aWV3TmFtZSwgY3VycmVudFN0YWdlKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHZvaWQgaGFuZGxlTG9nb3V0KCkge1xuICAgICAgICAvLyBTdG9wIGF1dG8tcmVmcmVzaCBpZiBhY3RpdmVcbiAgICAgICAgc3RvcEF1dG9SZWZyZXNoKCk7XG5cbiAgICAgICAgU3RhZ2UgY3VycmVudFN0YWdlID0gKFN0YWdlKSBsb2dvdXRCdXR0b24uZ2V0U2NlbmUoKS5nZXRXaW5kb3coKTtcbiAgICAgICAgaWYgKENvbnRyb2xsZXJVdGlscy5zaG93Q29uZmlybWF0aW9uQW5kV2FpdChcIsSQxINuZyB4deG6pXRcIiwgXCJC4bqhbiBjw7MgY2jhuq9jIGNo4bqvbiBtdeG7kW4gxJHEg25nIHh14bqldCBraMO0bmc/XFxuTmjhuqVuIE9LIMSR4buDIHjDoWMgbmjhuq1uLlwiKSkge1xuICAgICAgICAgICAgU2Vzc2lvbk1hbmFnZXIuY2xlYXIoKTtcbiAgICAgICAgICAgIFZpZXdGYWN0b3J5LmdldEluc3RhbmNlKCkuc3dpdGNoQ29udGVudChcImxvZ2luXCIsIGN1cnJlbnRTdGFnZSk7XG4gICAgICAgIH1cbiAgICB9XG5cblxufVxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL2NvbS9zdG9yZS9hcHAvcGV0c3RvcmUvUGV0U3RvcmVBcHBsaWNhdGlvbi5qYXZhXG5wYWNrYWdlIGNvbS5zdG9yZS5hcHAucGV0c3RvcmU7XG5cbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLk1vZGVscy5EYXRhYmFzZU1hbmFnZXI7XG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5WaWV3cy5Nb2RlbFZpZXc7XG5pbXBvcnQgamF2YWZ4LmFwcGxpY2F0aW9uLkFwcGxpY2F0aW9uO1xuaW1wb3J0IGphdmFmeC5meG1sLkZYTUxMb2FkZXI7XG5pbXBvcnQgamF2YWZ4LnNjZW5lLlBhcmVudDtcbmltcG9ydCBqYXZhZnguc2NlbmUuU2NlbmU7XG5pbXBvcnQgamF2YWZ4LnN0YWdlLlN0YWdlO1xuXG5pbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlvbjtcblxucHVibGljIGNsYXNzIFBldFN0b3JlQXBwbGljYXRpb24gZXh0ZW5kcyBBcHBsaWNhdGlvbiB7XG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIHZvaWQgc3RhcnQoU3RhZ2UgcHJpbWFyeVN0YWdlKSB7XG4gICAgICAgIERhdGFiYXNlTWFuYWdlci5jb25uZWN0KCk7XG4gICAgICAgIE1vZGVsVmlldy5nZXRJbnN0YW5jZSgpLmdldFZpZXdGYWN0b3J5KCkuc2hvd1dpbmRvdyhcImxvZ2luXCIpO1xuLi4uXG5QYXRoOi4uLiIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX0sImJjZWQ1NGE4LWY5ODQtNDA1Yi05ZmU2LTg4MGZiMjZkODU0MTt0b29sdV8wMTVqZ0YzREJub2VjNDNXV0JSQThqa2YiOnsicmVxdWVzdElkIjoiYmNlZDU0YTgtZjk4NC00MDViLTlmZTYtODgwZmIyNmQ4NTQxIiwidG9vbFVzZUlkIjoidG9vbHVfMDE1amdGM0RCbm9lYzQzV1dCUkE4amtmIiwicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiSGVyZSdzIHRoZSByZXN1bHQgb2YgcnVubmluZyBgY2F0IC1uYCBvbiBzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9Gb3Jnb3RQYXNzd29yZC5qYXZhOlxuICAgICAxXHQvKlxuICAgICAyXHQgKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0xpY2Vuc2VzL2xpY2Vuc2UtZGVmYXVsdC50eHQgdG8gY2hhbmdlIHRoaXMgbGljZW5zZVxuICAgICAzXHQgKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0dVSUZvcm1zL0pGcmFtZS5qYXZhIHRvIGVkaXQgdGhpcyB0ZW1wbGF0ZVxuICAgICA0XHQgKi9cbiAgICAgNVx0cGFja2FnZSBpbnRlcm5ldC5tYW5nZW1lbnQuc3lzdGVtO1xuICAgICA2XHRcbiAgICAgN1x0aW1wb3J0IERBTy5TdWJzY3JpYmVyREFPO1xuICAgICA4XHRpbXBvcnQgTW9kZWwuU3Vic2NyaWJlcjtcbiAgICAgOVx0aW1wb3J0IGphdmF4LnN3aW5nLkpPcHRpb25QYW5lO1xuICAgIDEwXHRpbXBvcnQgaW50ZXJuZXQubWFuZ2VtZW50LnN5c3RlbS5Mb2dpbjtcbiAgICAxMVx0aW1wb3J0IGphdmEuYXd0LkZyYW1lO1xuICAgIDEyXHRcbiAgICAxM1x0LyoqXG4gICAgMTRcdCAqXG4gICAgMTVcdCAqIEBhdXRob3IgTmdvYyBUaGFvXG4gICAgMTZcdCAqL1xuICAgIDE3XHRwdWJsaWMgY2xhc3MgRm9yZ290UGFzc3dvcmQgZXh0ZW5kcyBqYXZheC5zd2luZy5KRGlhbG9nIHtcbiAgICAxOFx0ICAgIHByaXZhdGUgU3Vic2NyaWJlciBjdXJyZW50U3Vic2NyaWJlciA9IG51bGw7XG4gICAgMTlcdCAgICBwdWJsaWMgU3RyaW5nIHBob25lUGF0dGVybiA9IFwiXlswLTldKiRcIjtcbiAgICAyMFx0XG4gICAgMjFcdCAgICAvKipcbiAgICAyMlx0ICAgICAqIENyZWF0ZXMgbmV3IGZvcm0gRm9yZ290UGFzc3dvcmRcbiAgICAyM1x0ICAgICAqL1xuICAgIDI0XHQgICAgcHVibGljIEZvcmdvdFBhc3N3b3JkKEZyYW1lIHBhcmVudCwgYm9vbGVhbiBtb2RhbCkge1xuICAgIDI1XHQgICAgICAgIHN1cGVyKHBhcmVudCwgbW9kYWwpO1xuICAgIDI2XHQgICAgICAgIGluaXRDb21wb25lbnRzKCk7XG4gICAgMjdcdFxuICAgIDI4XHQgICAgICAgIHNldFRpdGxlKFwixJDhu5VpIG3huq10IGto4bqpdVwiKTtcbiAgICAyOVx0ICAgICAgICBzZXRMb2NhdGlvblJlbGF0aXZlVG8ocGFyZW50KTtcbiAgICAzMFx0XG4gICAgMzFcdCAgICAgICAgYnRuRXhpdC5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICAzMlx0ICAgICAgICBidG5DaGFuZ2Uuc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgMzNcdCAgICAgICAgbGJOZXdQYXNzd29yZC5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICAzNFx0ICAgICAgICBsYkNvbmZpcm1QYXNzd29yZC5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICAzNVx0ICAgICAgICB0eHRQYXNzd29yZC5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICAzNlx0ICAgICAgICB0eHRDb25maXJtUGFzc3dvcmQuc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgMzdcdCAgICB9XG4gICAgMzhcdFxuICAgIDM5XHQgICAgcHVibGljIHZvaWQgY2xlYXIoKXtcbiAgICA0MFx0ICAgICAgICB0eHRQYXNzd29yZC5zZXRUZXh0KFwiXCIpO1xuICAgIDQxXHQgICAgICAgIHR4dFBob25lLnNldFRleHQoXCJcIik7XG4gICAgNDJcdCAgICAgICAgdHh0Q29uZmlybVBhc3N3b3JkLnNldFRleHQoXCJcIik7XG4gICAgNDNcdFxuICAgIDQ0XHQgICAgICAgIGJ0bkV4aXQuc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgNDVcdCAgICAgICAgYnRuQ2hhbmdlLnNldFZpc2libGUoZmFsc2UpO1xuICAgIDQ2XHQgICAgICAgIGxiTmV3UGFzc3dvcmQuc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgNDdcdCAgICAgICAgbGJDb25maXJtUGFzc3dvcmQuc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgNDhcdCAgICAgICAgdHh0UGFzc3dvcmQuc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgNDlcdCAgICAgICAgdHh0Q29uZmlybVBhc3N3b3JkLnNldFZpc2libGUoZmFsc2UpO1xuICAgIDUwXHQgICAgfVxuICAgIDUxXHRcbiAgICA1Mlx0ICAgIHB1YmxpYyBib29sZWFuIHZhbGlkYXRlUGhvbmUoKXtcbiAgICA1M1x0ICAgICAgICBTdHJpbmcgcGhvbmUgPSB0eHRQaG9uZS5nZXRUZXh0KCk7XG4gICAgNTRcdCAgICAgICAgaWYocGhvbmUubGVuZ3RoKCkgIT0gMTAgfHwgIXBob25lLm1hdGNoZXMocGhvbmVQYXR0ZXJuKSkge1xuICAgIDU1XHQgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcIlZ1aSBsw7JuZyBuaOG6rXAgxJHDum5nIMSR4buLbmggZOG6oW5nIHPhu5EgxJFp4buHbiB0aG/huqFpIVwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgIDU2XHQgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgNTdcdCAgICAgICAgfVxuICAgIDU4XHQgICAgICAgIHJldHVybiB0cnVlO1xuICAgIDU5XHQgICAgfVxuICAgIDYwXHRcbiAgICA2MVx0ICAgIHB1YmxpYyBib29sZWFuIHZhbGlkYXRlRmllbGRzKCl7XG4gICAgNjJcdCAgICAgICAgU3RyaW5nIHBhc3N3b3JkID0gdHh0UGFzc3dvcmQuZ2V0VGV4dCgpO1xuICAgIDYzXHQgICAgICAgIFN0cmluZyBjb25maXJtUGFzc3dvcmQgPSB0eHRDb25maXJtUGFzc3dvcmQuZ2V0VGV4dCgpO1xuICAgIDY0XHRcbiAgICA2NVx0ICAgICAgICBpZihwYXNzd29yZC5pc0VtcHR5KCkgfHwgY29uZmlybVBhc3N3b3JkLmlzRW1wdHkoKSl7XG4gICAgNjZcdCAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwiVnVpIGzDsm5nIGtow7RuZyBi4buPIHRy4buRbmchXCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAgNjdcdCAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICA2OFx0ICAgICAgICB9XG4gICAgNjlcdFxuICAgIDcwXHQgICAgICAgIGlmKCFwYXNzd29yZC5lcXVhbHMoY29uZmlybVBhc3N3b3JkKSl7XG4gICAgNzFcdCAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwiTeG6rXQga2jhuql1IHjDoWMgbmjhuq1uIGtow7RuZyBraOG7m3AhXCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAgNzJcdCAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICA3M1x0ICAgICAgICB9XG4gICAgNzRcdFxuICAgIDc1XHQgICAgICAgIHJldHVybiB0cnVlO1xuICAgIDc2XHQgICAgfVxuICAgIDc3XHRcbiAgICA3OFx0ICAgIC8qKlxuICAgIDc5XHQgICAgICogVGhpcyBtZXRob2QgaXMgY2FsbGVkIGZyb20gd2l0aGluIHRoZSBjb25zdHJ1Y3RvciB0byBpbml0aWFsaXplIHRoZSBmb3JtLlxuICAgIDgwXHQgICAgICogV0FSTklORzogRG8gTk9UIG1vZGlmeSB0aGlzIGNvZGUuIFRoZSBjb250ZW50IG9mIHRoaXMgbWV0aG9kIGlzIGFsd2F5c1xuICAgIDgxXHQgICAgICogcmVnZW5lcmF0ZWQgYnkgdGhlIEZvcm0gRWRpdG9yLlxuICAgIDgyXHQgICAgICovXG4gICAgODNcdCAgICBAU3VwcHJlc3NXYXJuaW5ncyhcInVuY2hlY2tlZFwiKVxuICAgIDg0XHQgICAgLy8gPGVkaXRvci1mb2xkIGRlZmF1bHRzdGF0ZT1cImNvbGxhcHNlZFwiIGRlc2M9XCJHZW5lcmF0ZWQgQ29kZVwiPi8vR0VOLUJFR0lOOmluaXRDb21wb25lbnRzXG4gICAgODVcdCAgICBwcml2YXRlIHZvaWQgaW5pdENvbXBvbmVudHMoKSB7XG4gICAgODZcdFxuICAgIDg3XHQgICAgICAgIGpMYWJlbDEgPSBuZXcgamF2YXguc3dpbmcuSkxhYmVsKCk7XG4gICAgODhcdCAgICAgICAgakxhYmVsMiA9IG5ldyBqYXZheC5zd2luZy5KTGFiZWwoKTtcbiAgICA4OVx0ICAgICAgICBsYk5ld1Bhc3N3b3JkID0gbmV3IGphdmF4LnN3aW5nLkpMYWJlbCgpO1xuICAgIDkwXHQgICAgICAgIGxiQ29uZmlybVBhc3N3b3JkID0gbmV3IGphdmF4LnN3aW5nLkpMYWJlbCgpO1xuICAgIDkxXHQgICAgICAgIGpTZXBhcmF0b3IxID0gbmV3IGphdmF4LnN3aW5nLkpTZXBhcmF0b3IoKTtcbiAgICA5Mlx0ICAgICAgICB0eHRQaG9uZSA9IG5ldyBqYXZheC5zd2luZy5KVGV4dEZpZWxkKCk7XG4gICAgOTNcdCAgICAgICAgYnRuQ2hlY2sgPSBuZXcgamF2YXguc3dpbmcuSkJ1dHRvbigpO1xuICAgIDk0XHQgICAgICAgIHR4dFBhc3N3b3JkID0gbmV3IGphdmF4LnN3aW5nLkpQYXNzd29yZEZpZWxkKCk7XG4gICAgOTVcdCAgICAgICAgdHh0Q29uZmlybVBhc3N3b3JkID0gbmV3IGphdmF4LnN3aW5nLkpQYXNzd29yZEZpZWxkKCk7XG4gICAgOTZcdCAgICAgICAgYnRuQ2hhbmdlID0gbmV3IGphdmF4LnN3aW5nLkpCdXR0b24oKTtcbiAgICA5N1x0ICAgICAgICBidG5FeGl0ID0gbmV3IGphdmF4LnN3aW5nLkpCdXR0b24oKTtcbiAgICA5OFx0XG4gICAgOTlcdCAgICAgICAgc2V0RGVmYXVsdENsb3NlT3BlcmF0aW9uKGphdmF4LnN3aW5nLldpbmRvd0NvbnN0YW50cy5ESVNQT1NFX09OX0NMT1NFKTtcbiAgIDEwMFx0XG4gICAxMDFcdCAgICAgICAgakxhYmVsMS5zZXRGb250KG5ldyBqYXZhLmF3dC5Gb250KFwiQXJpYWxcIiwgMSwgMzYpKTsgLy8gTk9JMThOXG4gICAxMDJcdCAgICAgICAgakxhYmVsMS5zZXRGb3JlZ3JvdW5kKGphdmF4LnN3aW5nLlVJTWFuYWdlci5nZXREZWZhdWx0cygpLmdldENvbG9yKFwiQWN0aW9ucy5ZZWxsb3dcIikpO1xuICAgMTAzXHQgICAgICAgIGpMYWJlbDEuc2V0VGV4dChcIsSQ4buUSSBN4bqsVCBLSOG6qFVcIik7XG4gICAxMDRcdFxuICAgMTA1XHQgICAgICAgIGpMYWJlbDIuc2V0Rm9udChuZXcgamF2YS5hd3QuRm9udChcIkFyaWFsXCIsIDEsIDE0KSk7IC8vIE5PSTE4TlxuICAgMTA2XHQgICAgICAgIGpMYWJlbDIuc2V0VGV4dChcIlPhu5EgxJFp4buHbiB0aG/huqFpOiBcIik7XG4gICAxMDdcdFxuICAgMTA4XHQgICAgICAgIGxiTmV3UGFzc3dvcmQuc2V0Rm9udChuZXcgamF2YS5hd3QuRm9udChcIkFyaWFsXCIsIDEsIDE0KSk7IC8vIE5PSTE4TlxuICAgMTA5XHQgICAgICAgIGxiTmV3UGFzc3dvcmQuc2V0VGV4dChcIk3huq10IGto4bqpdSBt4bubaTpcIik7XG4gICAxMTBcdFxuICAgMTExXHQgICAgICAgIGxiQ29uZmlybVBhc3N3b3JkLnNldEZvbnQobmV3IGphdmEuYXd0LkZvbnQoXCJBcmlhbFwiLCAxLCAxNCkpOyAvLyBOT0kxOE5cbiAgIDExMlx0ICAgICAgICBsYkNvbmZpcm1QYXNzd29yZC5zZXRUZXh0KFwiWMOhYyBuaOG6rW4gbeG6rXQga2jhuql1OlwiKTtcbiAgIDExM1x0XG4gICAxMTRcdCAgICAgICAgYnRuQ2hlY2suc2V0Rm9udChuZXcgamF2YS5hd3QuRm9udChcIkFyaWFsXCIsIDEsIDE0KSk7IC8vIE5PSTE4TlxuICAgMTE1XHQgICAgICAgIGJ0bkNoZWNrLnNldEljb24obmV3IGphdmF4LnN3aW5nLkltYWdlSWNvbihnZXRDbGFzcygpLmdldFJlc291cmNlKFwiL0ltYWdlcy9zZWFyY2gucG5nXCIpKSk7IC8vIE5PSTE4TlxuICAgMTE2XHQgICAgICAgIGJ0bkNoZWNrLnNldFRleHQoXCJLaeG7g20gdHJhXCIpO1xuICAgMTE3XHQgICAgICAgIGJ0bkNoZWNrLnNldEN1cnNvcihuZXcgamF2YS5hd3QuQ3Vyc29yKGphdmEuYXd0LkN1cnNvci5IQU5EX0NVUlNPUikpO1xuICAgMTE4XHQgICAgICAgIGJ0bkNoZWNrLmFkZEFjdGlvbkxpc3RlbmVyKG5ldyBqYXZhLmF3dC5ldmVudC5BY3Rpb25MaXN0ZW5lcigpIHtcbiAgIDExOVx0ICAgICAgICAgICAgcHVibGljIHZvaWQgYWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkge1xuICAgMTIwXHQgICAgICAgICAgICAgICAgYnRuQ2hlY2tBY3Rpb25QZXJmb3JtZWQoZXZ0KTtcbiAgIDEyMVx0ICAgICAgICAgICAgfVxuICAgMTIyXHQgICAgICAgIH0pO1xuICAgMTIzXHRcbiAgIDEyNFx0ICAgICAgICBidG5DaGFuZ2Uuc2V0Rm9udChuZXcgamF2YS5hd3QuRm9udChcIkFyaWFsXCIsIDEsIDE0KSk7IC8vIE5PSTE4TlxuICAgMTI1XHQgICAgICAgIGJ0bkNoYW5nZS5zZXRJY29uKG5ldyBqYXZheC5zd2luZy5JbWFnZUljb24oZ2V0Q2xhc3MoKS5nZXRSZXNvdXJjZShcIi9JbWFnZXMvcmVzZXQtcGFzc3dvcmQucG5nXCIpKSk7IC8vIE5PSTE4TlxuICAgMTI2XHQgICAgICAgIGJ0bkNoYW5nZS5zZXRUZXh0KFwixJDhu5VpIG3huq10IGto4bqpdVwiKTtcbiAgIDEyN1x0ICAgICAgICBidG5DaGFuZ2Uuc2V0Q3Vyc29yKG5ldyBqYXZhLmF3dC5DdXJzb3IoamF2YS5hd3QuQ3Vyc29yLkhBTkRfQ1VSU09SKSk7XG4gICAxMjhcdCAgICAgICAgYnRuQ2hhbmdlLmFkZEFjdGlvbkxpc3RlbmVyKG5ldyBqYXZhLmF3dC5ldmVudC5BY3Rpb25MaXN0ZW5lcigpIHtcbiAgIDEyOVx0ICAgICAgICAgICAgcHVibGljIHZvaWQgYWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkge1xuICAgMTMwXHQgICAgICAgICAgICAgICAgYnRuQ2hhbmdlQWN0aW9uUGVyZm9ybWVkKGV2dCk7XG4gICAxMzFcdCAgICAgICAgICAgIH1cbiAgIDEzMlx0ICAgICAgICB9KTtcbiAgIDEzM1x0XG4gICAxMzRcdCAgICAgICAgYnRuRXhpdC5zZXRGb250KG5ldyBqYXZhLmF3dC5Gb250KFwiQXJpYWxcIiwgMSwgMTQpKTsgLy8gTk9JMThOXG4gICAxMzVcdCAgICAgICAgYnRuRXhpdC5zZXRJY29uKG5ldyBqYXZheC5zd2luZy5JbWFnZUljb24oZ2V0Q2xhc3MoKS5nZXRSZXNvdXJjZShcIi9JbWFnZXMvbG9nb3V0LnBuZ1wiKSkpOyAvLyBOT0kxOE5cbiAgIDEzNlx0ICAgICAgICBidG5FeGl0LnNldFRleHQoXCJUaG/DoXRcIik7XG4gICAxMzdcdCAgICAgICAgYnRuRXhpdC5zZXRDdXJzb3IobmV3IGphdmEuYXd0LkN1cnNvcihqYXZhLmF3dC5DdXJzb3IuSEFORF9DVVJTT1IpKTtcbiAgIDEzOFx0ICAgICAgICBidG5FeGl0LmFkZEFjdGlvbkxpc3RlbmVyKG5ldyBqYXZhLmF3dC5ldmVudC5BY3Rpb25MaXN0ZW5lcigpIHtcbiAgIDEzOVx0ICAgICAgICAgICAgcHVibGljIHZvaWQgYWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkge1xuICAgMTQwXHQgICAgICAgICAgICAgICAgYnRuRXhpdEFjdGlvblBlcmZvcm1lZChldnQpO1xuICAgMTQxXHQgICAgICAgICAgICB9XG4gICAxNDJcdCAgICAgICAgfSk7XG4gICAxNDNcdFxuICAgMTQ0XHQgICAgICAgIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0IGxheW91dCA9IG5ldyBqYXZheC5zd2luZy5Hcm91cExheW91dChnZXRDb250ZW50UGFuZSgpKTtcbiAgIDE0NVx0ICAgICAgICBnZXRDb250ZW50UGFuZSgpLnNldExheW91dChsYXlvdXQpO1xuICAgMTQ2XHQgICAgICAgIGxheW91dC5zZXRIb3Jpem9udGFsR3JvdXAoXG4gICAxNDdcdCAgICAgICAgICAgIGxheW91dC5jcmVhdGVQYXJhbGxlbEdyb3VwKGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LkFsaWdubWVudC5MRUFESU5HKVxuICAgMTQ4XHQgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVNlcXVlbnRpYWxHcm91cCgpXG4gICAxNDlcdCAgICAgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVBhcmFsbGVsR3JvdXAoamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuQWxpZ25tZW50LkxFQURJTkcpXG4gICAxNTBcdCAgICAgICAgICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVTZXF1ZW50aWFsR3JvdXAoKVxuICAgMTUxXHQgICAgICAgICAgICAgICAgICAgICAgICAuYWRkR2FwKDExMCwgMTEwLCAxMTApXG4gICAxNTJcdCAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQoakxhYmVsMSkpXG4gICAxNTNcdCAgICAgICAgICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVTZXF1ZW50aWFsR3JvdXAoKVxuICAgMTU0XHQgICAgICAgICAgICAgICAgICAgICAgICAuYWRkR2FwKDYxLCA2MSwgNjEpXG4gICAxNTVcdCAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQoalNlcGFyYXRvcjEsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFLCAzNzAsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFKSlcbiAgIDE1Nlx0ICAgICAgICAgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVNlcXVlbnRpYWxHcm91cCgpXG4gICAxNTdcdCAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRHYXAoNjEsIDYxLCA2MSlcbiAgIDE1OFx0ICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChqTGFiZWwyKVxuICAgMTU5XHQgICAgICAgICAgICAgICAgICAgICAgICAuYWRkR2FwKDU2LCA1NiwgNTYpXG4gICAxNjBcdCAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQodHh0UGhvbmUsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFLCAyMTAsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFKSlcbiAgIDE2MVx0ICAgICAgICAgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVNlcXVlbnRpYWxHcm91cCgpXG4gICAxNjJcdCAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRHYXAoNjEsIDYxLCA2MSlcbiAgIDE2M1x0ICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChsYk5ld1Bhc3N3b3JkKVxuICAgMTY0XHQgICAgICAgICAgICAgICAgICAgICAgICAuYWRkR2FwKDU3LCA1NywgNTcpXG4gICAxNjVcdCAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlUGFyYWxsZWxHcm91cChqYXZheC5zd2luZy5Hcm91cExheW91dC5BbGlnbm1lbnQuTEVBRElORylcbiAgIDE2Nlx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQodHh0UGFzc3dvcmQsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFLCAyMTAsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFKVxuICAgMTY3XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVTZXF1ZW50aWFsR3JvdXAoKVxuICAgMTY4XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRHYXAoMTAyLCAxMDIsIDEwMilcbiAgIDE2OVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGJ0bkNoZWNrKSkpKVxuICAgMTcwXHQgICAgICAgICAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlUGFyYWxsZWxHcm91cChqYXZheC5zd2luZy5Hcm91cExheW91dC5BbGlnbm1lbnQuVFJBSUxJTkcsIGZhbHNlKVxuICAgMTcxXHQgICAgICAgICAgICAgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVNlcXVlbnRpYWxHcm91cCgpXG4gICAxNzJcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYWRkR2FwKDYwLCA2MCwgNjApXG4gICAxNzNcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGJ0bkV4aXQpXG4gICAxNzRcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYWRkUHJlZmVycmVkR2FwKGphdmF4LnN3aW5nLkxheW91dFN0eWxlLkNvbXBvbmVudFBsYWNlbWVudC5SRUxBVEVELCBqYXZheC5zd2luZy5Hcm91cExheW91dC5ERUZBVUxUX1NJWkUsIFNob3J0Lk1BWF9WQUxVRSlcbiAgIDE3NVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQoYnRuQ2hhbmdlKSlcbiAgIDE3Nlx0ICAgICAgICAgICAgICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVTZXF1ZW50aWFsR3JvdXAoKVxuICAgMTc3XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFkZEdhcCg2MSwgNjEsIDYxKVxuICAgMTc4XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChsYkNvbmZpcm1QYXNzd29yZClcbiAgIDE3OVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRHYXAoMTgsIDE4LCAxOClcbiAgIDE4MFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQodHh0Q29uZmlybVBhc3N3b3JkLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSwgMjExLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSkpKSlcbiAgIDE4MVx0ICAgICAgICAgICAgICAgIC5hZGRHYXAoNjksIDY5LCA2OSkpXG4gICAxODJcdCAgICAgICAgKTtcbiAgIDE4M1x0ICAgICAgICBsYXlvdXQuc2V0VmVydGljYWxHcm91cChcbiAgIDE4NFx0ICAgICAgICAgICAgbGF5b3V0LmNyZWF0ZVBhcmFsbGVsR3JvdXAoamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuQWxpZ25tZW50LkxFQURJTkcpXG4gICAxODVcdCAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlU2VxdWVudGlhbEdyb3VwKClcbiAgIDE4Nlx0ICAgICAgICAgICAgICAgIC5hZGRHYXAoNDAsIDQwLCA0MClcbiAgIDE4N1x0ICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQoakxhYmVsMSlcbiAgIDE4OFx0ICAgICAgICAgICAgICAgIC5hZGRHYXAoMTQsIDE0LCAxNClcbiAgIDE4OVx0ICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQoalNlcGFyYXRvcjEsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFLCAxMCwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUpXG4gICAxOTBcdCAgICAgICAgICAgICAgICAuYWRkR2FwKDEyLCAxMiwgMTIpXG4gICAxOTFcdCAgICAgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVBhcmFsbGVsR3JvdXAoamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuQWxpZ25tZW50LkxFQURJTkcpXG4gICAxOTJcdCAgICAgICAgICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVTZXF1ZW50aWFsR3JvdXAoKVxuICAgMTkzXHQgICAgICAgICAgICAgICAgICAgICAgICAuYWRkR2FwKDMsIDMsIDMpXG4gICAxOTRcdCAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQoakxhYmVsMikpXG4gICAxOTVcdCAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudCh0eHRQaG9uZSwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LkRFRkFVTFRfU0laRSwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUpKVxuICAgMTk2XHQgICAgICAgICAgICAgICAgLmFkZEdhcCgxOCwgMTgsIDE4KVxuICAgMTk3XHQgICAgICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVQYXJhbGxlbEdyb3VwKGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LkFsaWdubWVudC5MRUFESU5HKVxuICAgMTk4XHQgICAgICAgICAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlU2VxdWVudGlhbEdyb3VwKClcbiAgIDE5OVx0ICAgICAgICAgICAgICAgICAgICAgICAgLmFkZEdhcCgzLCAzLCAzKVxuICAgMjAwXHQgICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGxiTmV3UGFzc3dvcmQpKVxuICAgMjAxXHQgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQodHh0UGFzc3dvcmQsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5ERUZBVUxUX1NJWkUsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFKVxuICAgMjAyXHQgICAgICAgICAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlU2VxdWVudGlhbEdyb3VwKClcbiAgIDIwM1x0ICAgICAgICAgICAgICAgICAgICAgICAgLmFkZEdhcCgyLCAyLCAyKVxuICAgMjA0XHQgICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGJ0bkNoZWNrLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSwgMzAsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFKSkpXG4gICAyMDVcdCAgICAgICAgICAgICAgICAuYWRkR2FwKDgsIDgsIDgpXG4gICAyMDZcdCAgICAgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVBhcmFsbGVsR3JvdXAoamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuQWxpZ25tZW50LkxFQURJTkcpXG4gICAyMDdcdCAgICAgICAgICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVTZXF1ZW50aWFsR3JvdXAoKVxuICAgMjA4XHQgICAgICAgICAgICAgICAgICAgICAgICAuYWRkR2FwKDMsIDMsIDMpXG4gICAyMDlcdCAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQobGJDb25maXJtUGFzc3dvcmQpKVxuICAgMjEwXHQgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQodHh0Q29uZmlybVBhc3N3b3JkLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuREVGQVVMVF9TSVpFLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSkpXG4gICAyMTFcdCAgICAgICAgICAgICAgICAuYWRkR2FwKDMwLCAzMCwgMzApXG4gICAyMTJcdCAgICAgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVBhcmFsbGVsR3JvdXAoamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuQWxpZ25tZW50LkJBU0VMSU5FKVxuICAgMjEzXHQgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQoYnRuRXhpdCwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUsIDMwLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSlcbiAgIDIxNFx0ICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGJ0bkNoYW5nZSwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUsIDMwLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSkpXG4gICAyMTVcdCAgICAgICAgICAgICAgICAuYWRkQ29udGFpbmVyR2FwKDQwLCBTaG9ydC5NQVhfVkFMVUUpKVxuICAgMjE2XHQgICAgICAgICk7XG4gICAyMTdcdFxuICAgMjE4XHQgICAgICAgIHBhY2soKTtcbiAgIDIxOVx0ICAgIH0vLyA8L2VkaXRvci1mb2xkPi8vR0VOLUVORDppbml0Q29tcG9uZW50c1xuICAgMjIwXHRcbiAgIDIyMVx0ICAgIHByaXZhdGUgdm9pZCBidG5FeGl0QWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkV4aXRBY3Rpb25QZXJmb3JtZWRcbiAgIDIyMlx0ICAgICAgICAvLyBUT0RPIGFkZCB5b3VyIGhhbmRsaW5nIGNvZGUgaGVyZTpcbiAgIDIyM1x0ICAgICAgICBpbnQgcmVzdWx0ID0gSk9wdGlvblBhbmUuc2hvd0NvbmZpcm1EaWFsb2codGhpcywgXCJC4bqhbiBjw7MgY2jhuq9jIGNo4bqvbiBtdeG7kW4gdGhvw6F0IGtow7RuZz9cIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5ZRVNfTk9fT1BUSU9OLCBKT3B0aW9uUGFuZS5RVUVTVElPTl9NRVNTQUdFKTtcbiAgIDIyNFx0XG4gICAyMjVcdCAgICAgICAgaWYgKHJlc3VsdCA9PSBKT3B0aW9uUGFuZS5ZRVNfT1BUSU9OKSB7XG4gICAyMjZcdCAgICAgICAgICAgIHRoaXMuZGlzcG9zZSgpO1xuICAgMjI3XHQgICAgICAgIH1cbiAgIDIyOFx0ICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0bkV4aXRBY3Rpb25QZXJmb3JtZWRcbiAgIDIyOVx0XG4gICAyMzBcdCAgICBwcml2YXRlIHZvaWQgYnRuQ2hlY2tBY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuQ2hlY2tBY3Rpb25QZXJmb3JtZWRcbiAgIDIzMVx0ICAgICAgICAvLyBUT0RPIGFkZCB5b3VyIGhhbmRsaW5nIGNvZGUgaGVyZTpcbiAgIDIzMlx0ICAgICAgICBpZih2YWxpZGF0ZVBob25lKCkpIHtcbiAgIDIzM1x0ICAgICAgICAgICAgU3RyaW5nIHBob25lID0gdHh0UGhvbmUuZ2V0VGV4dCgpO1xuICAgMjM0XHQgICAgICAgICAgICBjdXJyZW50U3Vic2NyaWJlciA9IFN1YnNjcmliZXJEQU8uZ2V0QnlQaG9uZShwaG9uZSk7XG4gICAyMzVcdFxuICAgMjM2XHQgICAgICAgICAgICBpZiAoY3VycmVudFN1YnNjcmliZXIgIT0gbnVsbCkge1xuICAgMjM3XHQgICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXCJUw6xtIHRo4bqleSB0w6BpIGtob+G6o24gduG7m2kgc+G7kSDEkWnhu4duIHRob+G6oWkgbsOgeSFcIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5JTkZPUk1BVElPTl9NRVNTQUdFKTtcbiAgIDIzOFx0XG4gICAyMzlcdCAgICAgICAgICAgICAgICBidG5FeGl0LnNldFZpc2libGUodHJ1ZSk7XG4gICAyNDBcdCAgICAgICAgICAgICAgICBidG5DaGFuZ2Uuc2V0VmlzaWJsZSh0cnVlKTtcbiAgIDI0MVx0ICAgICAgICAgICAgICAgIGxiTmV3UGFzc3dvcmQuc2V0VmlzaWJsZSh0cnVlKTtcbiAgIDI0Mlx0ICAgICAgICAgICAgICAgIGxiQ29uZmlybVBhc3N3b3JkLnNldFZpc2libGUodHJ1ZSk7XG4gICAyNDNcdCAgICAgICAgICAgICAgICB0eHRQYXNzd29yZC5zZXRWaXNpYmxlKHRydWUpO1xuICAgMjQ0XHQgICAgICAgICAgICAgICAgdHh0Q29uZmlybVBhc3N3b3JkLnNldFZpc2libGUodHJ1ZSk7XG4gICAyNDVcdFxuICAgMjQ2XHQgICAgICAgICAgICAgICAgdHh0UGhvbmUuc2V0RWRpdGFibGUoZmFsc2UpO1xuICAgMjQ3XHQgICAgICAgICAgICAgICAgYnRuQ2hlY2suc2V0RW5hYmxlZChmYWxzZSk7XG4gICAyNDhcdCAgICAgICAgICAgIH0gZWxzZSB7XG4gICAyNDlcdCAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcIktow7RuZyB0w6xtIHRo4bqleSB0w6BpIGtob+G6o24gduG7m2kgc+G7kSDEkWnhu4duIHRob+G6oWkgbsOgeSFcIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgIDI1MFx0ICAgICAgICAgICAgfVxuICAgMjUxXHQgICAgICAgIH1cbiAgIDI1Mlx0ICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0bkNoZWNrQWN0aW9uUGVyZm9ybWVkXG4gICAyNTNcdFxuICAgMjU0XHQgICAgcHJpdmF0ZSB2b2lkIGJ0bkNoYW5nZUFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5DaGFuZ2VBY3Rpb25QZXJmb3JtZWRcbiAgIDI1NVx0ICAgICAgICAvLyBUT0RPIGFkZCB5b3VyIGhhbmRsaW5nIGNvZGUgaGVyZTpcbiAgIDI1Nlx0ICAgICAgICBpZih2YWxpZGF0ZUZpZWxkcygpICYmIGN1cnJlbnRTdWJzY3JpYmVyICE9IG51bGwpe1xuICAgMjU3XHQgICAgICAgICAgICBTdHJpbmcgbmV3UGFzc3dvcmQgPSB0eHRQYXNzd29yZC5nZXRUZXh0KCk7XG4gICAyNThcdFxuICAgMjU5XHQgICAgICAgICAgICBib29sZWFuIGlzU3VjY2VzcyA9IFN1YnNjcmliZXJEQU8udXBkYXRlUGFzc3dvcmQoY3VycmVudFN1YnNjcmliZXIuZ2V0VXNlcl9pZCgpLCBuZXdQYXNzd29yZCk7XG4gICAyNjBcdFxuICAgMjYxXHQgICAgICAgICAgICBpZihpc1N1Y2Nlc3MpIHtcbiAgIDI2Mlx0ICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKHRoaXMsIFwixJDhu5VpIG3huq10IGto4bqpdSB0aMOgbmggY8O0bmchIFZ1aSBsw7JuZyDEkcSDbmcgbmjhuq1wIGzhuqFpIVwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLklORk9STUFUSU9OX01FU1NBR0UpO1xuICAgMjYzXHQgICAgICAgICAgICAgICAgdGhpcy5kaXNwb3NlKCk7XG4gICAyNjRcdCAgICAgICAgICAgIH0gZWxzZSB7XG4gICAyNjVcdCAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyh0aGlzLCBcIsSQ4buVaSBt4bqtdCBraOG6qXUgdGjhuqV0IGLhuqFpISBWdWkgbMOybmcgdGjhu60gbOG6oWkgc2F1IVwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgMjY2XHQgICAgICAgICAgICB9XG4gICAyNjdcdCAgICAgICAgfVxuICAgMjY4XHQgICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuQ2hhbmdlQWN0aW9uUGVyZm9ybWVkXG4gICAyNjlcdFxuICAgMjcwXHRcbiAgIDI3MVx0XG4gICAyNzJcdCAgICAvLyBWYXJpYWJsZXMgZGVjbGFyYXRpb24gLSBkbyBub3QgbW9kaWZ5Ly9HRU4tQkVHSU46dmFyaWFibGVzXG4gICAyNzNcdCAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpCdXR0b24gYnRuQ2hhbmdlO1xuICAgMjc0XHQgICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KQnV0dG9uIGJ0bkNoZWNrO1xuICAgMjc1XHQgICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KQnV0dG9uIGJ0bkV4aXQ7XG4gICAyNzZcdCAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpMYWJlbCBqTGFiZWwxO1xuICAgMjc3XHQgICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KTGFiZWwgakxhYmVsMjtcbiAgIDI3OFx0ICAgIHByaXZhdGUgamF2YXguc3dpbmcuSlNlcGFyYXRvciBqU2VwYXJhdG9yMTtcbiAgIDI3OVx0ICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkxhYmVsIGxiQ29uZmlybVBhc3N3b3JkO1xuICAgMjgwXHQgICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KTGFiZWwgbGJOZXdQYXNzd29yZDtcbiAgIDI4MVx0ICAgIHByaXZhdGUgamF2YXguc3dpbmcuSlBhc3N3b3JkRmllbGQgdHh0Q29uZmlybVBhc3N3b3JkO1xuICAgMjgyXHQgICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KUGFzc3dvcmRGaWVsZCB0eHRQYXNzd29yZDtcbiAgIDI4M1x0ICAgIHByaXZhdGUgamF2YXguc3dpbmcuSlRleHRGaWVsZCB0eHRQaG9uZTtcbiAgIDI4NFx0ICAgIC8vIEVuZCBvZiB2YXJpYWJsZXMgZGVjbGFyYXRpb24vL0dFTi1FTkQ6dmFyaWFibGVzXG4gICAyODVcdH1cbiAgIDI4Nlx0XG5Ub3RhbCBsaW5lcyBpbiBmaWxlOiAyODZcbiIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX0sIjY5NmVjMjM0LWMzNjgtNGM4NC04YjM5LTgyNmNiOWJmOWJmNjt0b29sdV8wMVlMdFJDYzZlU25FZzRKamVZcmtLNXIiOnsicmVxdWVzdElkIjoiNjk2ZWMyMzQtYzM2OC00Yzg0LThiMzktODI2Y2I5YmY5YmY2IiwidG9vbFVzZUlkIjoidG9vbHVfMDFZTHRSQ2M2ZVNuRWc0SmplWXJrSzVyIiwicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiVGhlIGZvbGxvd2luZyBjb2RlIHNlY3Rpb25zIHdlcmUgcmV0cmlldmVkOlxuUGF0aDogc3JjL21haW4vamF2YS9jb20vc3RvcmUvYXBwL3BldHN0b3JlL0RBTy9Vc2VyREFPLmphdmFcbnBhY2thZ2UgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5EQU87XG5cbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLk1vZGVscy5FbnRpdGllcy5Vc2VyO1xuaW1wb3J0IG9yZy5taW5kcm90LmpiY3J5cHQuQkNyeXB0O1xuXG5pbXBvcnQgamF2YS5zcWwuKjtcbmltcG9ydCBqYXZhLnV0aWwuQXJyYXlMaXN0O1xuaW1wb3J0IGphdmEudXRpbC5CYXNlNjQ7XG5cbnB1YmxpYyBjbGFzcyBVc2VyREFPIGltcGxlbWVudHMgQmFzZURBTzxVc2VyLCBJbnRlZ2VyPiB7XG4gICAgcHVibGljIHN0YXRpYyBmaW5hbCBpbnQgaXNEdXBsaWNhdGUgPSAtMTtcblxuICAgIHB1YmxpYyBzdGF0aWMgVXNlckRBTyBnZXRJbnN0YW5jZSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBVc2VyREFPKCk7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBTdHJpbmcgZW5jb2RlKFN0cmluZyBwYXNzd29yZCkge1xuLy8gICAgICAgIHJldHVybiBCYXNlNjQuZ2V0RW5jb2RlcigpLmVuY29kZVRvU3RyaW5nKHBhc3N3b3JkLmdldEJ5dGVzKCkpO1xuICAgICAgICByZXR1cm4gQkNyeXB0Lmhhc2hwdyhwYXNzd29yZCwgQkNyeXB0LmdlbnNhbHQoKSk7XG4gICAgfVxuLi4uXG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbm4gPSBEYXRhYmFzZVV0aWwuZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgICAgICAgU3RyaW5nIHNxbCA9IFwiSU5TRVJUIElOVE8gVXNlcnMgKHVzZXJuYW1lLCBwYXNzd29yZCwgcm9sZSwgaW1hZ2VfdXJsLCBpc0FjdGl2ZSkgVkFMVUVTICg/LCA/LCA/LCA/LCA/KVwiO1xuICAgICAgICAgICAgc3RtdCA9IGNvbm4ucHJlcGFyZVN0YXRlbWVudChzcWwsIFN0YXRlbWVudC5SRVRVUk5fR0VORVJBVEVEX0tFWVMpO1xuXG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygxLCBlbnRpdHkuZ2V0VXNlcm5hbWUoKSk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygyLCBlbmNvZGUoZW50aXR5LmdldFBhc3N3b3JkKCkpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDMsIGVudGl0eS5nZXRSb2xlKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoNCwgZW50aXR5LmdldEltYWdlVXJsKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRCb29sZWFuKDUsIGVudGl0eS5pc0FjdGl2ZSgpKTtcblxuICAgICAgICAgICAgaW50IGFmZmVjdGVkUm93cyA9IHN0bXQuZXhlY3V0ZVVwZGF0ZSgpO1xuICAgICAgICAgICAgaWYgKGFmZmVjdGVkUm93cyA9PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRyeSAoUmVzdWx0U2V0IGdlbmVyYXRlZEtleXMgPSBzdG10LmdldEdlbmVyYXRlZEtleXMoKSkge1xuICAgICAgICAgICAgICAgIGlmIChnZW5lcmF0ZWRLZXlzLm5leHQoKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ2VuZXJhdGVkS2V5cy5nZXRJbnQoMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBEYXRhYmFzZVV0aWwuY2xvc2VSZXNvdXJjZXMocnMsIHN0bXQsIGNvbm4pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIGludCB1cGRhdGUoVXNlciBlbnRpdHkpIHtcbiAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcbiAgICAgICAgUHJlcGFyZWRTdGF0ZW1lbnQgc3RtdCA9IG51bGw7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbm4gPSBEYXRhYmFzZVV0aWwuZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgICAgICAgU3RyaW5nIHNxbCA9IFwiVVBEQVRFIFVzZXJzIFNFVCB1c2VybmFtZSA9ID8sIHBhc3N3b3JkID0gPywgcm9sZSA9ID8sIGltYWdlX3VybCA9ID8sIGlzQWN0aXZlID0gPyBXSEVSRSB1c2VyX2lkID0gP1wiO1xuICAgICAgICAgICAgc3RtdCA9IGNvbm4ucHJlcGFyZVN0YXRlbWVudChzcWwpO1xuXG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygxLCBlbnRpdHkuZ2V0VXNlcm5hbWUoKSk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygyLCBlbmNvZGUoZW50aXR5LmdldFBhc3N3b3JkKCkpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDMsIGVudGl0eS5nZXRSb2xlKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoNCwgZW50aXR5LmdldEltYWdlVXJsKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRCb29sZWFuKDUsIGVudGl0eS5pc0FjdGl2ZSgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0SW50KDYsIGVudGl0eS5nZXRVc2VySWQoKSk7XG5cbiAgICAgICAgICAgIHJldHVybiBzdG10LmV4ZWN1dGVVcGRhdGUoKTtcbiAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIERhdGFiYXNlVXRpbC5jbG9zZVJlc291cmNlcyhzdG10LCBjb25uKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBpbnQgdXBkYXRlKFVzZXIgZW50aXR5LCBib29sZWFuIGlzVXNlcm5hbWVDaGFuZ2VkKSB7XG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25uID0gRGF0YWJhc2VVdGlsLmdldENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgIFN0cmluZyBzcWwgPSBcIlVQREFURSBVc2VycyBTRVQgdXNlcm5hbWUgPSA/LCBwYXNzd29yZCA9ID8sIHJvbGUgPSA/LCBpbWFnZV91cmwgPSA/LCBpc0FjdGl2ZSA9ID8gV0hFUkUgdXNlcl9pZCA9ID9cIjtcbiAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsKTtcblxuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMSwgZW50aXR5LmdldFVzZXJuYW1lKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMiwgZW5jb2RlKGVudGl0eS5nZXRQYXNzd29yZCgpKSk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygzLCBlbnRpdHkuZ2V0Um9sZSgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDQsIGVudGl0eS5nZXRJbWFnZVVybCgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0Qm9vbGVhbig1LCBlbnRpdHkuaXNBY3RpdmUoKSk7XG4gICAgICAgICAgICBzdG10LnNldEludCg2LCBlbnRpdHkuZ2V0VXNlcklkKCkpO1xuXG4gICAgICAgICAgICByZXR1cm4gc3RtdC5leGVjdXRlVXBkYXRlKCk7XG4gICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBEYXRhYmFzZVV0aWwuY2xvc2VSZXNvdXJjZXMoc3RtdCwgY29ubik7XG4gICAgICAgIH1cbiAgICB9XG4uLi5cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBBcnJheUxpc3Q8VXNlcj4gZmluZEFsbCgpIHtcbiAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcbiAgICAgICAgUHJlcGFyZWRTdGF0ZW1lbnQgc3RtdCA9IG51bGw7XG4gICAgICAgIFJlc3VsdFNldCBycyA9IG51bGw7XG4gICAgICAgIEFycmF5TGlzdDxVc2VyPiB1c2VycyA9IG5ldyBBcnJheUxpc3Q8PigpO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25uID0gRGF0YWJhc2VVdGlsLmdldENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgIFN0cmluZyBzcWwgPSBcIlNFTEVDVCAqIEZST00gVXNlcnNcIjtcbiAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsKTtcbiAgICAgICAgICAgIHJzID0gc3RtdC5leGVjdXRlUXVlcnkoKTtcblxuICAgICAgICAgICAgd2hpbGUgKHJzLm5leHQoKSkge1xuICAgICAgICAgICAgICAgIFVzZXIgdXNlciA9IG5ldyBVc2VyKCk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRVc2VySWQocnMuZ2V0SW50KFwidXNlcl9pZFwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRVc2VybmFtZShycy5nZXRTdHJpbmcoXCJ1c2VybmFtZVwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRQYXNzd29yZChycy5nZXRTdHJpbmcoXCJwYXNzd29yZFwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRSb2xlKHJzLmdldFN0cmluZyhcInJvbGVcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0SW1hZ2VVcmwocnMuZ2V0U3RyaW5nKFwiaW1hZ2VfdXJsXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldEFjdGl2ZShycy5nZXRCb29sZWFuKFwiaXNBY3RpdmVcIikpO1xuICAgICAgICAgICAgICAgIHVzZXJzLmFkZCh1c2VyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBEYXRhYmFzZVV0aWwuY2xvc2VSZXNvdXJjZXMocnMsIHN0bXQsIGNvbm4pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1c2VycztcbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgVXNlciBmaW5kQnlJZChJbnRlZ2VyIGlkKSB7XG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuICAgICAgICBSZXN1bHRTZXQgcnMgPSBudWxsO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25uID0gRGF0YWJhc2VVdGlsLmdldENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgIFN0cmluZyBzcWwgPSBcIlNFTEVDVCAqIEZST00gVXNlcnMgV0hFUkUgdXNlcl9pZCA9ID9cIjtcbiAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsKTtcbiAgICAgICAgICAgIHN0bXQuc2V0SW50KDEsIGlkKTtcbiAgICAgICAgICAgIHJzID0gc3RtdC5leGVjdXRlUXVlcnkoKTtcblxuICAgICAgICAgICAgaWYgKHJzLm5leHQoKSkge1xuICAgICAgICAgICAgICAgIFVzZXIgdXNlciA9IG5ldyBVc2VyKCk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRVc2VySWQocnMuZ2V0SW50KFwidXNlcl9pZFwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRVc2VybmFtZShycy5nZXRTdHJpbmcoXCJ1c2VybmFtZVwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRQYXNzd29yZChycy5nZXRTdHJpbmcoXCJwYXNzd29yZFwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRSb2xlKHJzLmdldFN0cmluZyhcInJvbGVcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0SW1hZ2VVcmwocnMuZ2V0U3RyaW5nKFwiaW1hZ2VfdXJsXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldEFjdGl2ZShycy5nZXRCb29sZWFuKFwiaXNBY3RpdmVcIikpO1xuICAgICAgICAgICAgICAgIHJldHVybiB1c2VyO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIERhdGFiYXNlVXRpbC5jbG9zZVJlc291cmNlcyhycywgc3RtdCwgY29ubik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuLi4uXG5cbiAgICBwdWJsaWMgVXNlciBmaW5kQnlVc2VybmFtZShTdHJpbmcgdXNlcm5hbWUpIHtcbiAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcbiAgICAgICAgUHJlcGFyZWRTdGF0ZW1lbnQgc3RtdCA9IG51bGw7XG4gICAgICAgIFJlc3VsdFNldCBycyA9IG51bGw7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbm4gPSBEYXRhYmFzZVV0aWwuZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgICAgICAgU3RyaW5nIHNxbCA9IFwiU0VMRUNUICogRlJPTSBVc2VycyBXSEVSRSB1c2VybmFtZSA9ID9cIjtcbiAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDEsIHVzZXJuYW1lKTtcbiAgICAgICAgICAgIHJzID0gc3RtdC5leGVjdXRlUXVlcnkoKTtcblxuICAgICAgICAgICAgaWYgKHJzLm5leHQoKSkge1xuICAgICAgICAgICAgICAgIFVzZXIgdXNlciA9IG5ldyBVc2VyKCk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRVc2VySWQocnMuZ2V0SW50KFwidXNlcl9pZFwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRVc2VybmFtZShycy5nZXRTdHJpbmcoXCJ1c2VybmFtZVwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRQYXNzd29yZChycy5nZXRTdHJpbmcoXCJwYXNzd29yZFwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRSb2xlKHJzLmdldFN0cmluZyhcInJvbGVcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0SW1hZ2VVcmwocnMuZ2V0U3RyaW5nKFwiaW1hZ2VfdXJsXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldEFjdGl2ZShycy5nZXRCb29sZWFuKFwiaXNBY3RpdmVcIikpO1xuICAgICAgICAgICAgICAgIHJldHVybiB1c2VyO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIERhdGFiYXNlVXRpbC5jbG9zZVJlc291cmNlcyhycywgc3RtdCwgY29ubik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcHVibGljIFVzZXIgZmluZEJ5RW1haWwoU3RyaW5nIGVtYWlsKSB7XG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuICAgICAgICBSZXN1bHRTZXQgcnMgPSBudWxsO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBLaeG7g20gdHJhIGVtYWlsIGPDsyB04buTbiB04bqhaSB0cm9uZyBi4bqjbmcgU3RhZmZzIGtow7RuZ1xuICAgICAgICAgICAgY29ubiA9IERhdGFiYXNlVXRpbC5nZXRDb25uZWN0aW9uKCk7XG4gICAgICAgICAgICBTdHJpbmcgY2hlY2tTcWwgPSBcIlNFTEVDVCAqIEZST00gU3RhZmZzIFdIRVJFIGVtYWlsID0gP1wiO1xuICAgICAgICAgICAgc3RtdCA9IGNvbm4ucHJlcGFyZVN0YXRlbWVudChjaGVja1NxbCk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygxLCBlbWFpbCk7XG4gICAgICAgICAgICBycyA9IHN0bXQuZXhlY3V0ZVF1ZXJ5KCk7XG5cbiAgICAgICAgICAgIC8vIE7hur91IGVtYWlsIHThu5NuIHThuqFpLCBs4bqleSB0aMO0bmcgdGluIHVzZXJcbiAgICAgICAgICAgIFN0cmluZyBzcWwgPSBcIlNFTEVDVCB1LiogRlJPTSBVc2VycyB1IFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiSk9JTiBTdGFmZnMgcyBPTiB1LnVzZXJfaWQgPSBzLnVzZXJfaWQgXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJXSEVSRSBzLmVtYWlsID0gP1wiO1xuICAgICAgICAgICAgc3RtdCA9IGNvbm4ucHJlcGFyZVN0YXRlbWVudChzcWwpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMSwgZW1haWwpO1xuXG4gICAgICAgICAgICBycyA9IHN0bXQuZXhlY3V0ZVF1ZXJ5KCk7XG4uLi5cblxuICAgIHB1YmxpYyBib29sZWFuIGNoZWNrRHVwbGljYXRlKFN0cmluZyB1c2VybmFtZSwgaW50IGV4Y2x1ZGVVc2VySWQpIHtcbiAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcbiAgICAgICAgUHJlcGFyZWRTdGF0ZW1lbnQgc3RtdCA9IG51bGw7XG4gICAgICAgIFJlc3VsdFNldCBycyA9IG51bGw7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25uID0gRGF0YWJhc2VVdGlsLmdldENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgIFN0cmluZyBzcWwgPSBcIlNFTEVDVCBDT1VOVCgqKSBGUk9NIFVzZXJzIFdIRVJFIExPV0VSKHVzZXJuYW1lKSA9IExPV0VSKD8pXCI7XG4gICAgICAgICAgICBpZiAoZXhjbHVkZVVzZXJJZCA+PSAwKSB7XG4gICAgICAgICAgICAgICAgc3FsICs9IFwiIEFORCB1c2VyX2lkIDw+ID9cIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDEsIHVzZXJuYW1lKTtcbiAgICAgICAgICAgIGlmIChleGNsdWRlVXNlcklkID49IDApIHtcbiAgICAgICAgICAgICAgICBzdG10LnNldEludCgyLCBleGNsdWRlVXNlcklkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJzID0gc3RtdC5leGVjdXRlUXVlcnkoKTtcbiAgICAgICAgICAgIGlmIChycy5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcnMuZ2V0SW50KDEpID4gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBEYXRhYmFzZVV0aWwuY2xvc2VSZXNvdXJjZXMocnMsIHN0bXQsIGNvbm4pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4uLi5cblBhdGg6IHNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL0xvZ2luLmphdmFcbi8qXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0xpY2Vuc2VzL2xpY2Vuc2UtZGVmYXVsdC50eHQgdG8gY2hhbmdlIHRoaXMgbGljZW5zZVxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9HVUlGb3Jtcy9KRnJhbWUuamF2YSB0byBlZGl0IHRoaXMgdGVtcGxhdGVcbiAqL1xucGFja2FnZSBpbnRlcm5ldC5tYW5nZW1lbnQuc3lzdGVtO1xuXG5pbXBvcnQgREFPLlVzZXJEQU87XG5pbXBvcnQgTW9kZWwuVXNlcjtcbmltcG9ydCBqYXZheC5zd2luZy5KT3B0aW9uUGFuZTtcblxuLyoqXG4gKlxuICogQGF1dGhvciBOZ29jIFRoYW9cbiAqL1xucHVibGljIGNsYXNzIExvZ2luIGV4dGVuZHMgamF2YXguc3dpbmcuSkZyYW1lIHtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgbmV3IGZvcm0gTG9naW5cbiAgICAgKi9cbiAgICBwdWJsaWMgTG9naW4oKSB7XG4gICAgICAgIGluaXRDb21wb25lbnRzKCk7XG4gICAgICAgIHNldFRpdGxlKFwixJDEg25nIGvDvVwiKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBjbGVhcigpe1xuICAgICAgICB0eHRVc2VyTmFtZS5zZXRUZXh0KFwiXCIpO1xuICAgICAgICB0eHRQYXNzd29yZC5zZXRUZXh0KFwiXCIpO1xuICAgIH1cblxuICAgIHB1YmxpYyBib29sZWFuIHZhbGlkYXRlRmllbGRzKCl7XG4gICAgICAgIFN0cmluZyB1c2VyTmFtZSA9IHR4dFVzZXJOYW1lLmdldFRleHQoKTtcbiAgICAgICAgU3RyaW5nIHBhc3N3b3JkID0gdHh0UGFzc3dvcmQuZ2V0VGV4dCgpO1xuXG4gICAgICAgIGlmKHVzZXJOYW1lLmlzRW1wdHkoKSB8fCBwYXNzd29yZC5pc0VtcHR5KCkpe1xuICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXCJWdWkgbMOybmcga2jDtG5nIGLhu48gdHLhu5FuZyFcIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4uLi5cblxuICAgICAgICBqTGFiZWwxID0gbmV3IGphdmF4LnN3aW5nLkpMYWJlbCgpO1xuICAgICAgICBqTGFiZWwyID0gbmV3IGphdmF4LnN3aW5nLkpMYWJlbCgpO1xuICAgICAgICBqTGFiZWwzID0gbmV3IGphdmF4LnN3aW5nLkpMYWJlbCgpO1xuICAgICAgICBqTGFiZWw0ID0gbmV3IGphdmF4LnN3aW5nLkpMYWJlbCgpO1xuICAgICAgICB0eHRVc2VyTmFtZSA9IG5ldyBqYXZheC5zd2luZy5KVGV4dEZpZWxkKCk7XG4gICAgICAgIHR4dFBhc3N3b3JkID0gbmV3IGphdmF4LnN3aW5nLkpQYXNzd29yZEZpZWxkKCk7XG4gICAgICAgIGpTZXBhcmF0b3IxID0gbmV3IGphdmF4LnN3aW5nLkpTZXBhcmF0b3IoKTtcbiAgICAgICAgalNlcGFyYXRvcjIgPSBuZXcgamF2YXguc3dpbmcuSlNlcGFyYXRvcigpO1xuICAgICAgICBidG5Mb2dpbiA9IG5ldyBqYXZheC5zd2luZy5KQnV0dG9uKCk7XG4gICAgICAgIGJ0bkZvcmdvdFBhc3N3b3JkID0gbmV3IGphdmF4LnN3aW5nLkpCdXR0b24oKTtcbiAgICAgICAgYnRuU2lnbnVwID0gbmV3IGphdmF4LnN3aW5nLkpCdXR0b24oKTtcbiAgICAgICAgakxhYmVsNSA9IG5ldyBqYXZheC5zd2luZy5KTGFiZWwoKTtcbiAgICAgICAgYnRuRXhpdCA9IG5ldyBqYXZheC5zd2luZy5KQnV0dG9uKCk7XG5cbiAgICAgICAgc2V0RGVmYXVsdENsb3NlT3BlcmF0aW9uKGphdmF4LnN3aW5nLldpbmRvd0NvbnN0YW50cy5FWElUX09OX0NMT1NFKTtcbi4uLlxuXG4gICAgICAgIGJ0bkxvZ2luLnNldEZvbnQobmV3IGphdmEuYXd0LkZvbnQoXCJBcmlhbFwiLCAxLCAxNikpOyAvLyBOT0kxOE5cbiAgICAgICAgYnRuTG9naW4uc2V0SWNvbihuZXcgamF2YXguc3dpbmcuSW1hZ2VJY29uKGdldENsYXNzKCkuZ2V0UmVzb3VyY2UoXCIvSW1hZ2VzL2VudGVyLnBuZ1wiKSkpOyAvLyBOT0kxOE5cbiAgICAgICAgYnRuTG9naW4uc2V0VGV4dChcIsSQxINuZyBuaOG6rXBcIik7XG4gICAgICAgIGJ0bkxvZ2luLnNldEN1cnNvcihuZXcgamF2YS5hd3QuQ3Vyc29yKGphdmEuYXd0LkN1cnNvci5IQU5EX0NVUlNPUikpO1xuICAgICAgICBidG5Mb2dpbi5zZXRIb3Jpem9udGFsQWxpZ25tZW50KGphdmF4LnN3aW5nLlN3aW5nQ29uc3RhbnRzLkxFRlQpO1xuICAgICAgICBidG5Mb2dpbi5hZGRBY3Rpb25MaXN0ZW5lcihuZXcgamF2YS5hd3QuZXZlbnQuQWN0aW9uTGlzdGVuZXIoKSB7XG4gICAgICAgICAgICBwdWJsaWMgdm9pZCBhY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7XG4gICAgICAgICAgICAgICAgYnRuTG9naW5BY3Rpb25QZXJmb3JtZWQoZXZ0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4uLi5cblxuICAgIHByaXZhdGUgdm9pZCBidG5Mb2dpbkFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5Mb2dpbkFjdGlvblBlcmZvcm1lZFxuICAgICAgICAvLyBUT0RPIGFkZCB5b3VyIGhhbmRsaW5nIGNvZGUgaGVyZTpcbiAgICAgICAgaWYodmFsaWRhdGVGaWVsZHMoKSkge1xuICAgICAgICAgICAgdHJ5e1xuICAgICAgICAgICAgICAgIFN0cmluZyB1c2VybmFtZSA9IHR4dFVzZXJOYW1lLmdldFRleHQoKS50cmltKCk7XG4gICAgICAgICAgICAgICAgU3RyaW5nIHBhc3N3b3JkID0gdHh0UGFzc3dvcmQuZ2V0VGV4dCgpLnRyaW0oKTtcblxuICAgICAgICAgICAgICAgIFVzZXIgdXNlciA9IG51bGw7XG4gICAgICAgICAgICAgICAgYm9vbGVhbiBpc1N1Y2Nlc3MgPSBVc2VyREFPLmxvZ2luKHVzZXJuYW1lLCBwYXNzd29yZCk7XG5cbiAgICAgICAgICAgICAgICBpZihpc1N1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2codGhpcywgXCLEkMSDbmcgbmjhuq1wIHRow6BuaCBjw7RuZyFcIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5JTkZPUk1BVElPTl9NRVNTQUdFKTtcbi8vICAgICAgICAgICAgICAgICAgICBuZXcgTWFpbkZyYW1lKCkuc2V0VmlzaWJsZSh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwb3NlKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2codGhpcywgXCJTYWkgdMOqbiDEkcSDbmcgbmjhuq1wIGhv4bq3YyBt4bqtdCBraOG6qXUuXCIsIFwiTOG7l2lcIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaChFeGNlcHRpb24gZXgpIHtcbiAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcIkzhu5dpOiBcIiArIGV4LmdldE1lc3NhZ2UoKSwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG5cbiAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5Mb2dpbkFjdGlvblBlcmZvcm1lZFxuXG4gICAgcHJpdmF0ZSB2b2lkIGJ0bkZvcmdvdFBhc3N3b3JkQWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkZvcmdvdFBhc3N3b3JkQWN0aW9uUGVyZm9ybWVkXG4gICAgICAgIC8vIE9wZW4gdGhlIEZvcmdvdFBhc3N3b3JkIGRpYWxvZ1xuICAgICAgICBGb3Jnb3RQYXNzd29yZCBmb3Jnb3RQYXNzd29yZERpYWxvZyA9IG5ldyBGb3Jnb3RQYXNzd29yZCh0aGlzLCB0cnVlKTtcbiAgICAgICAgZm9yZ290UGFzc3dvcmREaWFsb2cuc2V0VmlzaWJsZSh0cnVlKTtcbiAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5Gb3Jnb3RQYXNzd29yZEFjdGlvblBlcmZvcm1lZFxuXG4gICAgcHJpdmF0ZSB2b2lkIGJ0bkV4aXRBY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuRXhpdEFjdGlvblBlcmZvcm1lZFxuICAgICAgICAvLyBUT0RPIGFkZCB5b3VyIGhhbmRsaW5nIGNvZGUgaGVyZTpcbiAgICAgICAgaW50IHJlc3VsdCA9IEpPcHRpb25QYW5lLnNob3dDb25maXJtRGlhbG9nKG51bGwsIFwiQuG6oW4gY8OzIGNo4bqvYyBjaOG6r24gbXXhu5FuIHRob8OhdCBraMO0bmc/XCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuWUVTX05PX09QVElPTiwgSk9wdGlvblBhbmUuUVVFU1RJT05fTUVTU0FHRSk7XG5cbiAgICAgICAgaWYgKHJlc3VsdCA9PSBKT3B0aW9uUGFuZS5ZRVNfT1BUSU9OKSB7XG4gICAgICAgICAgICBTeXN0ZW0uZXhpdCgwKTtcbiAgICAgICAgfVxuICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0bkV4aXRBY3Rpb25QZXJmb3JtZWRcblxuICAgIHByaXZhdGUgdm9pZCBidG5TaWdudXBBY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuU2lnbnVwQWN0aW9uUGVyZm9ybWVkXG4gICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxuICAgICAgICBzZXRWaXNpYmxlKGZhbHNlKTtcbiAgICAgICAgbmV3IFNpZ25VcCgpLnNldFZpc2libGUodHJ1ZSk7XG4gICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuU2lnbnVwQWN0aW9uUGVyZm9ybWVkXG4uLi5cblxuICAgIC8vIFZhcmlhYmxlcyBkZWNsYXJhdGlvbiAtIGRvIG5vdCBtb2RpZnkvL0dFTi1CRUdJTjp2YXJpYWJsZXNcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpCdXR0b24gYnRuRXhpdDtcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpCdXR0b24gYnRuRm9yZ290UGFzc3dvcmQ7XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KQnV0dG9uIGJ0bkxvZ2luO1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkJ1dHRvbiBidG5TaWdudXA7XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KTGFiZWwgakxhYmVsMTtcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpMYWJlbCBqTGFiZWwyO1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkxhYmVsIGpMYWJlbDM7XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KTGFiZWwgakxhYmVsNDtcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpMYWJlbCBqTGFiZWw1O1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSlNlcGFyYXRvciBqU2VwYXJhdG9yMTtcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpTZXBhcmF0b3IgalNlcGFyYXRvcjI7XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KUGFzc3dvcmRGaWVsZCB0eHRQYXNzd29yZDtcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpUZXh0RmllbGQgdHh0VXNlck5hbWU7XG4gICAgLy8gRW5kIG9mIHZhcmlhYmxlcyBkZWNsYXJhdGlvbi8vR0VOLUVORDp2YXJpYWJsZXNcbn1cbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9jb20vc3RvcmUvYXBwL3BldHN0b3JlL0NvbnRyb2xsZXJzL0xvZ2luQ29udHJvbGxlci5qYXZhXG4uLi5cblxuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuREFPLlVzZXJEQU87XG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5EQU8uU3RhZmZEQU87XG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5Nb2RlbHMuRW50aXRpZXMuVXNlcjtcbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLk1vZGVscy5FbnRpdGllcy5TdGFmZjtcbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLlNlc3Npb25zLlNlc3Npb25NYW5hZ2VyO1xuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuVmlld3MuQWRtaW5GYWN0b3J5O1xuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuVmlld3MuVmlld0ZhY3Rvcnk7XG5pbXBvcnQgZGUuamVuc2QuZnguZ2x5cGhzLmZvbnRhd2Vzb21lLkZvbnRBd2Vzb21lSWNvbjtcbmltcG9ydCBkZS5qZW5zZC5meC5nbHlwaHMuZm9udGF3ZXNvbWUuRm9udEF3ZXNvbWVJY29uVmlldztcbmltcG9ydCBqYXZhZnguZnhtbC5GWE1MO1xuaW1wb3J0IGphdmFmeC5meG1sLkluaXRpYWxpemFibGU7XG5pbXBvcnQgamF2YWZ4LnNjZW5lLmNvbnRyb2wuKjtcbmltcG9ydCBqYXZhZnguc2NlbmUuaW5wdXQuTW91c2VFdmVudDtcbmltcG9ydCBqYXZhZnguc3RhZ2UuU3RhZ2U7XG5pbXBvcnQgamF2YWZ4LnNjZW5lLmltYWdlLkltYWdlO1xuaW1wb3J0IGphdmFmeC5zY2VuZS5pbWFnZS5JbWFnZVZpZXc7XG5pbXBvcnQgamF2YWZ4LnNjZW5lLnBhaW50LkltYWdlUGF0dGVybjtcbmltcG9ydCBqYXZhLnV0aWwuT2JqZWN0cztcbi4uLlxuUGF0aDogc3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vU2Vzc2lvbi9Vc2VyU2Vzc2lvbi5qYXZhXG4vKlxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9MaWNlbnNlcy9saWNlbnNlLWRlZmF1bHQudHh0IHRvIGNoYW5nZSB0aGlzIGxpY2Vuc2VcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9DbGFzcy5qYXZhIHRvIGVkaXQgdGhpcyB0ZW1wbGF0ZVxuICovXG5wYWNrYWdlIGludGVybmV0Lm1hbmdlbWVudC5zeXN0ZW0uU2Vzc2lvbjtcblxuaW1wb3J0IE1vZGVsLlVzZXI7XG5cbi8qKlxuICpcbiAqIEBhdXRob3IgTmdvYyBUaGFvXG4gKi9cbnB1YmxpYyBjbGFzcyBVc2VyU2Vzc2lvbiB7XG4gICAgcHVibGljIHN0YXRpYyBVc2VyIGN1cnJlbnRVc2VyO1xuXG4gICAgcHVibGljIFVzZXJTZXNzaW9uKCkge1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgVXNlciBnZXRDdXJyZW50VXNlcigpIHtcbiAgICAgICAgcmV0dXJuIGN1cnJlbnRVc2VyO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBzZXRDdXJyZW50VXNlcihVc2VyIGN1cnJlbnRVc2VyKSB7XG4gICAgICAgIFVzZXJTZXNzaW9uLmN1cnJlbnRVc2VyID0gY3VycmVudFVzZXI7XG4gICAgfVxuICAgIFxuICAgIFxufVxuLi4uXG5QYXRoOiBzcmMvREFPL1VzZXJEQU8uamF2YVxuLypcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvTGljZW5zZXMvbGljZW5zZS1kZWZhdWx0LnR4dCB0byBjaGFuZ2UgdGhpcyBsaWNlbnNlXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ2xhc3MuamF2YSB0byBlZGl0IHRoaXMgdGVtcGxhdGVcbiAqL1xucGFja2FnZSBEQU87XG5cbmltcG9ydCBNb2RlbC5Vc2VyO1xuaW1wb3J0IGphdmEudXRpbC5MaXN0O1xuXG4vKipcbiAqXG4gKiBAYXV0aG9yIE5nb2MgVGhhb1xuICovXG5wdWJsaWMgY2xhc3MgVXNlckRBT3tcblxuICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBpbnNlcnQoVXNlciBvYmopIHtcbiAgICAgICAgXG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyB2b2lkIHVwZGF0ZShVc2VyIG9iaikge1xuICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oXCJOb3Qgc3VwcG9ydGVkIHlldC5cIik7IC8vIEdlbmVyYXRlZCBmcm9tIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9Db2RlL0dlbmVyYXRlZE1ldGhvZEJvZHlcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIHZvaWQgZGVsZXRlKGludCBpZCkge1xuICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oXCJOb3Qgc3VwcG9ydGVkIHlldC5cIik7IC8vIEdlbmVyYXRlZCBmcm9tIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9Db2RlL0dlbmVyYXRlZE1ldGhvZEJvZHlcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIFVzZXIgZ2V0QnlJZChpbnQgaWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpOyAvLyBHZW5lcmF0ZWQgZnJvbSBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ29kZS9HZW5lcmF0ZWRNZXRob2RCb2R5XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBMaXN0PFVzZXI+IGdldEFsbCgpIHtcbiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpOyAvLyBHZW5lcmF0ZWQgZnJvbSBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ29kZS9HZW5lcmF0ZWRNZXRob2RCb2R5XG4gICAgfVxuICAgIFxufVxuLi4uXG5QYXRoOiBzcmMvTW9kZWwvVXNlci5qYXZhXG4vKlxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9MaWNlbnNlcy9saWNlbnNlLWRlZmF1bHQudHh0IHRvIGNoYW5nZSB0aGlzIGxpY2Vuc2VcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9DbGFzcy5qYXZhIHRvIGVkaXQgdGhpcyB0ZW1wbGF0ZVxuICovXG5wYWNrYWdlIE1vZGVsO1xuXG5pbXBvcnQgamF2YS50aW1lLkxvY2FsRGF0ZVRpbWU7XG4vKipcbiAqXG4gKiBAYXV0aG9yIE5nb2MgVGhhb1xuICovXG5wdWJsaWMgY2xhc3MgVXNlciB7XG4gICAgcHJpdmF0ZSBpbnQgdXNlcl9pZDtcbiAgICBwcml2YXRlIFN0cmluZyB1c2VybmFtZTtcbiAgICBwcml2YXRlIFN0cmluZyBwYXNzd29yZDtcbiAgICBwcml2YXRlIFN0cmluZyByb2xlO1xuICAgIHByaXZhdGUgTG9jYWxEYXRlVGltZSBjcmVhdGVfYXQ7XG4gICAgcHJpdmF0ZSBib29sZWFuIGlzQWN0aXZlO1xuXG4gICAgcHVibGljIFVzZXIoKSB7XG4gICAgfVxuXG4gICAgcHVibGljIFVzZXIoaW50IHVzZXJfaWQsIFN0cmluZyB1c2VybmFtZSwgU3RyaW5nIHBhc3N3b3JkLCBTdHJpbmcgcm9sZSwgTG9jYWxEYXRlVGltZSBjcmVhdGVfYXQsIGJvb2xlYW4gaXNBY3RpdmUpIHtcbiAgICAgICAgdGhpcy51c2VyX2lkID0gdXNlcl9pZDtcbiAgICAgICAgdGhpcy51c2VybmFtZSA9IHVzZXJuYW1lO1xuICAgICAgICB0aGlzLnBhc3N3b3JkID0gcGFzc3dvcmQ7XG4gICAgICAgIHRoaXMucm9sZSA9IHJvbGU7XG4gICAgICAgIHRoaXMuY3JlYXRlX2F0ID0gY3JlYXRlX2F0O1xuICAgICAgICB0aGlzLmlzQWN0aXZlID0gaXNBY3RpdmU7XG4gICAgfVxuXG4gICAgcHVibGljIGludCBnZXRVc2VyX2lkKCkge1xuICAgICAgICByZXR1cm4gdXNlcl9pZDtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXRVc2VyX2lkKGludCB1c2VyX2lkKSB7XG4gICAgICAgIHRoaXMudXNlcl9pZCA9IHVzZXJfaWQ7XG4gICAgfVxuXG4gICAgcHVibGljIFN0cmluZyBnZXRVc2VybmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHVzZXJuYW1lO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHNldFVzZXJuYW1lKFN0cmluZyB1c2VybmFtZSkge1xuICAgICAgICB0aGlzLnVzZXJuYW1lID0gdXNlcm5hbWU7XG4gICAgfVxuXG4gICAgcHVibGljIFN0cmluZyBnZXRQYXNzd29yZCgpIHtcbiAgICAgICAgcmV0dXJuIHBhc3N3b3JkO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHNldFBhc3N3b3JkKFN0cmluZyBwYXNzd29yZCkge1xuICAgICAgICB0aGlzLnBhc3N3b3JkID0gcGFzc3dvcmQ7XG4gICAgfVxuXG4gICAgcHVibGljIFN0cmluZyBnZXRSb2xlKCkge1xuICAgICAgICByZXR1cm4gcm9sZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXRSb2xlKFN0cmluZyByb2xlKSB7XG4gICAgICAgIHRoaXMucm9sZSA9IHJvbGU7XG4gICAgfVxuXG4gICAgcHVibGljIExvY2FsRGF0ZVRpbWUgZ2V0Q3JlYXRlX2F0KCkge1xuICAgICAgICByZXR1cm4gY3JlYXRlX2F0O1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHNldENyZWF0ZV9hdChMb2NhbERhdGVUaW1lIGNyZWF0ZV9hdCkge1xuICAgICAgICB0aGlzLmNyZWF0ZV9hdCA9IGNyZWF0ZV9hdDtcbiAgICB9XG5cbiAgICBwdWJsaWMgYm9vbGVhbiBpc0lzQWN0aXZlKCkge1xuICAgICAgICByZXR1cm4gaXNBY3RpdmU7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgc2V0SXNBY3RpdmUoYm9vbGVhbiBpc0FjdGl2ZSkge1xuICAgICAgICB0aGlzLmlzQWN0aXZlID0gaXNBY3RpdmU7XG4gICAgfVxuICAgIFxufVxuLi4uXG5QYXRoOiBzcmMvTW9kZWwvU3Vic2NyaWJlci5qYXZhXG4uLi5cblxuLyoqXG4gKlxuICogQGF1dGhvciBOZ29jIFRoYW9cbiAqL1xucHVibGljIGNsYXNzIFN1YnNjcmliZXIgZXh0ZW5kcyBVc2VyIHtcbiAgICBwcml2YXRlIGludCBzdWJzY3JpYmVyX2lkO1xuICAgIHByaXZhdGUgU3RyaW5nIGZ1bGxOYW1lO1xuICAgIHByaXZhdGUgU3RyaW5nIGFkZHJlc3M7XG4gICAgcHJpdmF0ZSBTdHJpbmcgcGhvbmU7XG4gICAgXG4gICAgcHVibGljIFN1YnNjcmliZXIoKSB7XG4gICAgfVxuXG4gICAgcHVibGljIFN1YnNjcmliZXIoaW50IHN1YnNjcmliZXJfaWQsIFN0cmluZyBmdWxsTmFtZSwgU3RyaW5nIGFkZHJlc3MsIFN0cmluZyBwaG9uZSkge1xuICAgICAgICB0aGlzLnN1YnNjcmliZXJfaWQgPSBzdWJzY3JpYmVyX2lkO1xuICAgICAgICB0aGlzLmZ1bGxOYW1lID0gZnVsbE5hbWU7XG4gICAgICAgIHRoaXMuYWRkcmVzcyA9IGFkZHJlc3M7XG4gICAgICAgIHRoaXMucGhvbmUgPSBwaG9uZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgU3Vic2NyaWJlcihpbnQgc3Vic2NyaWJlcl9pZCwgU3RyaW5nIGZ1bGxOYW1lLCBTdHJpbmcgYWRkcmVzcywgU3RyaW5nIHBob25lLCBpbnQgdXNlcl9pZCwgU3RyaW5nIHVzZXJuYW1lLCBTdHJpbmcgcGFzc3dvcmQsIFN0cmluZyByb2xlLCBMb2NhbERhdGVUaW1lIGNyZWF0ZV9hdCwgYm9vbGVhbiBpc0FjdGl2ZSkge1xuICAgICAgICBzdXBlcih1c2VyX2lkLCB1c2VybmFtZSwgcGFzc3dvcmQsIHJvbGUsIGNyZWF0ZV9hdCwgaXNBY3RpdmUpO1xuICAgICAgICB0aGlzLnN1YnNjcmliZXJfaWQgPSBzdWJzY3JpYmVyX2lkO1xuICAgICAgICB0aGlzLmZ1bGxOYW1lID0gZnVsbE5hbWU7XG4gICAgICAgIHRoaXMuYWRkcmVzcyA9IGFkZHJlc3M7XG4gICAgICAgIHRoaXMucGhvbmUgPSBwaG9uZTtcbiAgICB9XG4uLi5cblBhdGg6IHNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL1NpZ25VcC5qYXZhXG4uLi5cblxuICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0blJldHVybkFjdGlvblBlcmZvcm1lZFxuXG4gICAgcHJpdmF0ZSB2b2lkIGJ0blNpZ251cEFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5TaWdudXBBY3Rpb25QZXJmb3JtZWRcbiAgICAgICAgLy8gVE9ETyBhZGQgeW91ciBoYW5kbGluZyBjb2RlIGhlcmU6XG4gICAgICAgIGlmICh2YWxpZGF0ZUZpZWxkcygpKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIFN1YnNjcmliZXIgc3ViID0gbmV3IFN1YnNjcmliZXIoKTtcbiAgICAgICAgICAgICAgICBzdWIuc2V0RnVsbE5hbWUodHh0TmFtZS5nZXRUZXh0KCkpO1xuICAgICAgICAgICAgICAgIHN1Yi5zZXRVc2VybmFtZSh0eHRVc2VyTmFtZS5nZXRUZXh0KCkpO1xuICAgICAgICAgICAgICAgIHN1Yi5zZXRQYXNzd29yZCh0eHRQYXNzd29yZC5nZXRUZXh0KCkpO1xuICAgICAgICAgICAgICAgIHN1Yi5zZXRSb2xlKERFRkFVTFRfUk9MRSk7XG4gICAgICAgICAgICAgICAgc3ViLnNldEFkZHJlc3ModHh0QWRkcmVzcy5nZXRUZXh0KCkpO1xuICAgICAgICAgICAgICAgIHN1Yi5zZXRQaG9uZSh0eHRQaG9uZS5nZXRUZXh0KCkpO1xuICAgICAgICAgICAgICAgIHN1Yi5zZXRDcmVhdGVfYXQoTG9jYWxEYXRlVGltZS5ub3coKSk7XG4gICAgICAgICAgICAgICAgU3Vic2NyaWJlckRBTy5pbnNlcnQoc3ViKTtcbiAgICAgICAgICAgICAgICBjbGVhcigpO1xuICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGV4KSB7XG4gICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXCJM4buXaTogXCIgKyAuLi4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCJmNDFmYWZlOS0yYjE1LTQ0NzAtYTFlZi03OTUxM2E3NzU4NDg7dG9vbHVfMDFVcWFzZ2tQWTRXRWNibWdTVHpVOFlMIjp7InJlcXVlc3RJZCI6ImY0MWZhZmU5LTJiMTUtNDQ3MC1hMWVmLTc5NTEzYTc3NTg0OCIsInRvb2xVc2VJZCI6InRvb2x1XzAxVXFhc2drUFk0V0VjYm1nU1R6VThZTCIsInBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IlRoZSBmb2xsb3dpbmcgY29kZSBzZWN0aW9ucyB3ZXJlIHJldHJpZXZlZDpcblBhdGg6IHNyYy9tYWluL2phdmEvY29tL3N0b3JlL2FwcC9wZXRzdG9yZS9Db250cm9sbGVycy9Mb2dpbkNvbnRyb2xsZXIuamF2YVxuLi4uXG5cbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLkRBTy5Vc2VyREFPO1xuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuREFPLlN0YWZmREFPO1xuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuTW9kZWxzLkVudGl0aWVzLlVzZXI7XG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5Nb2RlbHMuRW50aXRpZXMuU3RhZmY7XG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5TZXNzaW9ucy5TZXNzaW9uTWFuYWdlcjtcbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLlZpZXdzLkFkbWluRmFjdG9yeTtcbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLlZpZXdzLlZpZXdGYWN0b3J5O1xuaW1wb3J0IGRlLmplbnNkLmZ4LmdseXBocy5mb250YXdlc29tZS5Gb250QXdlc29tZUljb247XG5pbXBvcnQgZGUuamVuc2QuZnguZ2x5cGhzLmZvbnRhd2Vzb21lLkZvbnRBd2Vzb21lSWNvblZpZXc7XG5pbXBvcnQgamF2YWZ4LmZ4bWwuRlhNTDtcbmltcG9ydCBqYXZhZnguZnhtbC5Jbml0aWFsaXphYmxlO1xuaW1wb3J0IGphdmFmeC5zY2VuZS5jb250cm9sLio7XG5pbXBvcnQgamF2YWZ4LnNjZW5lLmlucHV0Lk1vdXNlRXZlbnQ7XG5pbXBvcnQgamF2YWZ4LnN0YWdlLlN0YWdlO1xuaW1wb3J0IGphdmFmeC5zY2VuZS5pbWFnZS5JbWFnZTtcbmltcG9ydCBqYXZhZnguc2NlbmUuaW1hZ2UuSW1hZ2VWaWV3O1xuaW1wb3J0IGphdmFmeC5zY2VuZS5wYWludC5JbWFnZVBhdHRlcm47XG5pbXBvcnQgamF2YS51dGlsLk9iamVjdHM7XG4uLi5cblxucHVibGljIGNsYXNzIExvZ2luQ29udHJvbGxlciBpbXBsZW1lbnRzIEluaXRpYWxpemFibGUge1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIEZvbnRBd2Vzb21lSWNvblZpZXcgZXllSWNvbjtcblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBUZXh0RmllbGQgc2hvd1Bhc3N3b3JkO1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIFBhc3N3b3JkRmllbGQgcGFzc3dvcmRGaWVsZDtcblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBUZXh0RmllbGQgdXNlcm5hbWVGaWVsZDtcblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBCdXR0b24gbG9naW5CdXR0b247XG5cbiAgICBARlhNTFxuICAgIHByaXZhdGUgTGFiZWwgZXJyb3JMYWJlbDtcblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBIeXBlcmxpbmsgZm9yZ290UGFzc3dvcmRMaW5rO1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIEltYWdlVmlldyB1c2VySW1hZ2U7XG5cbiAgICBwcml2YXRlIGRvdWJsZSB4LCB5O1xuXG4gICAgVXNlckRBTyB1c2VyREFPID0gbmV3IFVzZXJEQU8oKTtcbiAgICBTdGFmZkRBTyBzdGFmZkRBTyA9IFN0YWZmREFPLmdldEluc3RhbmNlKCk7XG4gICAgcHVibGljIHN0YXRpYyBpbnQgaWRTdGFmZkN1cnJlbnQ7XG4gICAgcHVibGljIHN0YXRpYyBpbnQgaWRBZG1pbkN1cnJlbnQ7XG5cbiAgICBwcml2YXRlIFNlc3Npb25NYW5hZ2VyIHNlc3Npb25NYW5hZ2VyID0gbmV3IFNlc3Npb25NYW5hZ2VyKCk7XG4uLi5cblxuICAgIHByaXZhdGUgdm9pZCBzZXR1cExvZ2luQnV0dG9uKCkge1xuICAgICAgICBsb2dpbkJ1dHRvbi5zZXRPbkFjdGlvbihldmVudCAtPiBoYW5kbGVMb2dpbigpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHZvaWQgc2V0dXBGb3Jnb3RQYXNzd29yZExpbmsoKSB7XG4gICAgICAgIGZvcmdvdFBhc3N3b3JkTGluay5zZXRPbkFjdGlvbihldmVudCAtPiB7XG4gICAgICAgICAgICBTdGFnZSBjdXJyZW50U3RhZ2UgPSAoU3RhZ2UpIHVzZXJuYW1lRmllbGQuZ2V0U2NlbmUoKS5nZXRXaW5kb3coKTtcbiAgICAgICAgICAgIFZpZXdGYWN0b3J5LmdldEluc3RhbmNlKCkuc3dpdGNoQ29udGVudChcImZvcmdvdHBhc3N3b3JkXCIsIGN1cnJlbnRTdGFnZSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSB2b2lkIGhhbmRsZURyYWdnZWQoTW91c2VFdmVudCBldmVudCkge1xuICAgICAgICBTdGFnZSBzdGFnZSA9IChTdGFnZSkgdXNlcm5hbWVGaWVsZC5nZXRTY2VuZSgpLmdldFdpbmRvdygpO1xuICAgICAgICBzdGFnZS5zZXRYKGV2ZW50LmdldFNjcmVlblgoKSAtIHgpO1xuICAgICAgICBzdGFnZS5zZXRZKGV2ZW50LmdldFNjcmVlblkoKSAtIHkpO1xuICAgIH1cblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSB2b2lkIGhhbmRsZVByZXNzZWQoTW91c2VFdmVudCBldmVudCkge1xuICAgICAgICB4ID0gZXZlbnQuZ2V0U2NyZWVuWCgpO1xuICAgICAgICB5ID0gZXZlbnQuZ2V0U2NyZWVuWSgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgdm9pZCBoYW5kbGVMb2dpbigpIHtcbiAgICAgICAgU3RyaW5nIHVzZXJuYW1lID0gdXNlcm5hbWVGaWVsZC5nZXRUZXh0KCk7XG4gICAgICAgIFN0cmluZyBwYXNzd29yZCA9IHBhc3N3b3JkRmllbGQuZ2V0VGV4dCgpO1xuXG4gICAgICAgIGlmKHVzZXJuYW1lLmlzRW1wdHkoKSB8fCBwYXNzd29yZC5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgIENvbnRyb2xsZXJVdGlscy5zaG93QWxlcnQoQWxlcnQuQWxlcnRUeXBlLkVSUk9SLCBcIkzhu5dpXCIsIFwiVnVpIGzDsm5nIG5o4bqtcCB0w6puIMSRxINuZyBuaOG6rXAgdsOgIG3huq10IGto4bqpdVwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBUw6xtIHVzZXIgdGhlbyB1c2VybmFtZVxuICAgICAgICAgICAgVXNlciB1c2VyID0gdXNlckRBTy5maW5kQnlVc2VybmFtZSh1c2VybmFtZSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmKHVzZXIgPT0gbnVsbCB8fCB1c2VyLmdldFVzZXJuYW1lKCkgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIENvbnRyb2xsZXJVdGlscy5zaG93QWxlcnQoQWxlcnQuQWxlcnRUeXBlLkVSUk9SLCBcIkzhu5dpXCIsIFwiVMOqbiDEkcSDbmcgbmjhuq1wIGtow7RuZyDEkcO6bmdcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBLaeG7g20gdHJhIHTDqm4gxJHEg25nIG5o4bqtcFxuICAgICAgICAgICAgaWYgKCF1c2VyLmdldFVzZXJuYW1lKCkuZXF1YWxzKHVzZXJuYW1lKSkge1xuICAgICAgICAgICAgICAgIENvbnRyb2xsZXJVdGlscy5zaG93QWxlcnQoQWxlcnQuQWxlcnRUeXBlLkVSUk9SLCBcIkzhu5dpXCIsIFwiVMOqbiDEkcSDbmcgbmjhuq1wIGtow7RuZyDEkcO6bmdcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBLaeG7g20gdHJhIG3huq10IGto4bqpdVxuICAgICAgICAgICAgaWYoIUJDcnlwdC5jaGVja3B3KHBhc3N3b3JkLCB1c2VyLmdldFBhc3N3b3JkKCkpKSB7XG4gICAgICAgICAgICAgICAgQ29udHJvbGxlclV0aWxzLnNob3dBbGVydChBbGVydC5BbGVydFR5cGUuRVJST1IsIFwiTOG7l2lcIiwgXCJN4bqtdCBraOG6qXUga2jDtG5nIMSRw7puZ1wiKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNlc3Npb25NYW5hZ2VyLnNldEN1cnJlbnRVc2VyKHVzZXIpO1xuXG4gICAgICAgICAgICBTdGFnZSBjdXJyZW50U3RhZ2UgPSAoU3RhZ2UpIHVzZXJuYW1lRmllbGQuZ2V0U2NlbmUoKS5nZXRXaW5kb3coKTtcblxuICAgICAgICAgICAgaWYodXNlci5nZXRSb2xlKCkuZXF1YWxzKFVzZXIuUk9MRV9BRE1JTikpIHtcbiAgICAgICAgICAgICAgICBpZEFkbWluQ3VycmVudCA9IHVzZXIuZ2V0VXNlcklkKCk7XG4gICAgICAgICAgICAgICAgQWRtaW5GYWN0b3J5LmdldEluc3RhbmNlKCkuc3dpdGNoQ29udGVudChcImRhc2hib2FyZFwiLCBjdXJyZW50U3RhZ2UpO1xuICAgICAgICAgICAgfSBlbHNlIGlmKHVzZXIuZ2V0Um9sZSgpLmVxdWFscyhVc2VyLlJPTEVfVVNFUikpIHtcbiAgICAgICAgICAgICAgICBpZFN0YWZmQ3VycmVudCA9IHVzZXIuZ2V0VXNlcklkKCk7XG4gICAgICAgICAgICAgICAgU3RhZmYgc3RhZmYgPSBzdGFmZkRBTy5maW5kQnlVc2VySWQodXNlci5nZXRVc2VySWQoKSk7XG4gICAgICAgICAgICAgICAgaWYgKHN0YWZmICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbk1hbmFnZXIuc2V0Q3VycmVudFN0YWZmKHN0YWZmKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgVmlld0ZhY3RvcnkuZ2V0SW5zdGFuY2UoKS5zd2l0Y2hDb250ZW50KFwiZGFzaGJvYXJkXCIsIGN1cnJlbnRTdGFnZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIENvbnRyb2xsZXJVdGlscy5zaG93QWxlcnQoQWxlcnQuQWxlcnRUeXBlLkVSUk9SLCBcIkzhu5dpXCIsIFwiVmFpIHRyw7IgbmfGsOG7nWkgZMO5bmcga2jDtG5nIGjhu6NwIGzhu4dcIik7XG4gICAgICAgICAgICAgICAgc2Vzc2lvbk1hbmFnZXIuY2xlYXIoKTtcbiAgICAgICAgICAgIH1cbi4uLlxuUGF0aDogc3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vTG9naW4uamF2YVxuLypcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvTGljZW5zZXMvbGljZW5zZS1kZWZhdWx0LnR4dCB0byBjaGFuZ2UgdGhpcyBsaWNlbnNlXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0dVSUZvcm1zL0pGcmFtZS5qYXZhIHRvIGVkaXQgdGhpcyB0ZW1wbGF0ZVxuICovXG5wYWNrYWdlIGludGVybmV0Lm1hbmdlbWVudC5zeXN0ZW07XG5cbmltcG9ydCBEQU8uVXNlckRBTztcbmltcG9ydCBNb2RlbC5Vc2VyO1xuaW1wb3J0IGphdmF4LnN3aW5nLkpPcHRpb25QYW5lO1xuXG4vKipcbiAqXG4gKiBAYXV0aG9yIE5nb2MgVGhhb1xuICovXG5wdWJsaWMgY2xhc3MgTG9naW4gZXh0ZW5kcyBqYXZheC5zd2luZy5KRnJhbWUge1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBuZXcgZm9ybSBMb2dpblxuICAgICAqL1xuICAgIHB1YmxpYyBMb2dpbigpIHtcbiAgICAgICAgaW5pdENvbXBvbmVudHMoKTtcbiAgICAgICAgc2V0VGl0bGUoXCLEkMSDbmcga8O9XCIpO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIGNsZWFyKCl7XG4gICAgICAgIHR4dFVzZXJOYW1lLnNldFRleHQoXCJcIik7XG4gICAgICAgIHR4dFBhc3N3b3JkLnNldFRleHQoXCJcIik7XG4gICAgfVxuXG4gICAgcHVibGljIGJvb2xlYW4gdmFsaWRhdGVGaWVsZHMoKXtcbiAgICAgICAgU3RyaW5nIHVzZXJOYW1lID0gdHh0VXNlck5hbWUuZ2V0VGV4dCgpO1xuICAgICAgICBTdHJpbmcgcGFzc3dvcmQgPSB0eHRQYXNzd29yZC5nZXRUZXh0KCk7XG5cbiAgICAgICAgaWYodXNlck5hbWUuaXNFbXB0eSgpIHx8IHBhc3N3b3JkLmlzRW1wdHkoKSl7XG4gICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcIlZ1aSBsw7JuZyBraMO0bmcgYuG7jyB0cuG7kW5nIVwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbi4uLlxuXG4gICAgcHJpdmF0ZSB2b2lkIGJ0bkxvZ2luQWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkxvZ2luQWN0aW9uUGVyZm9ybWVkXG4gICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxuICAgICAgICBpZih2YWxpZGF0ZUZpZWxkcygpKSB7XG4gICAgICAgICAgICB0cnl7XG4gICAgICAgICAgICAgICAgU3RyaW5nIHVzZXJuYW1lID0gdHh0VXNlck5hbWUuZ2V0VGV4dCgpLnRyaW0oKTtcbiAgICAgICAgICAgICAgICBTdHJpbmcgcGFzc3dvcmQgPSB0eHRQYXNzd29yZC5nZXRUZXh0KCkudHJpbSgpO1xuXG4gICAgICAgICAgICAgICAgVXNlciB1c2VyID0gbnVsbDtcbiAgICAgICAgICAgICAgICBib29sZWFuIGlzU3VjY2VzcyA9IFVzZXJEQU8ubG9naW4odXNlcm5hbWUsIHBhc3N3b3JkKTtcblxuICAgICAgICAgICAgICAgIGlmKGlzU3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyh0aGlzLCBcIsSQxINuZyBuaOG6rXAgdGjDoG5oIGPDtG5nIVwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLklORk9STUFUSU9OX01FU1NBR0UpO1xuLy8gICAgICAgICAgICAgICAgICAgIG5ldyBNYWluRnJhbWUoKS5zZXRWaXNpYmxlKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyh0aGlzLCBcIlNhaSB0w6puIMSRxINuZyBuaOG6rXAgaG/hurdjIG3huq10IGto4bqpdS5cIiwgXCJM4buXaVwiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoKEV4Y2VwdGlvbiBleCkge1xuICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwiTOG7l2k6IFwiICsgZXguZ2V0TWVzc2FnZSgpLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cblxuICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0bkxvZ2luQWN0aW9uUGVyZm9ybWVkXG5cbiAgICBwcml2YXRlIHZvaWQgYnRuRm9yZ290UGFzc3dvcmRBY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuRm9yZ290UGFzc3dvcmRBY3Rpb25QZXJmb3JtZWRcbiAgICAgICAgLy8gT3BlbiB0aGUgRm9yZ290UGFzc3dvcmQgZGlhbG9nXG4gICAgICAgIEZvcmdvdFBhc3N3b3JkIGZvcmdvdFBhc3N3b3JkRGlhbG9nID0gbmV3IEZvcmdvdFBhc3N3b3JkKHRoaXMsIHRydWUpO1xuICAgICAgICBmb3Jnb3RQYXNzd29yZERpYWxvZy5zZXRWaXNpYmxlKHRydWUpO1xuICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0bkZvcmdvdFBhc3N3b3JkQWN0aW9uUGVyZm9ybWVkXG5cbiAgICBwcml2YXRlIHZvaWQgYnRuRXhpdEFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5FeGl0QWN0aW9uUGVyZm9ybWVkXG4gICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxuICAgICAgICBpbnQgcmVzdWx0ID0gSk9wdGlvblBhbmUuc2hvd0NvbmZpcm1EaWFsb2cobnVsbCwgXCJC4bqhbiBjw7MgY2jhuq9jIGNo4bqvbiBtdeG7kW4gdGhvw6F0IGtow7RuZz9cIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5ZRVNfTk9fT1BUSU9OLCBKT3B0aW9uUGFuZS5RVUVTVElPTl9NRVNTQUdFKTtcblxuICAgICAgICBpZiAocmVzdWx0ID09IEpPcHRpb25QYW5lLllFU19PUFRJT04pIHtcbiAgICAgICAgICAgIFN5c3RlbS5leGl0KDApO1xuICAgICAgICB9XG4gICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuRXhpdEFjdGlvblBlcmZvcm1lZFxuXG4gICAgcHJpdmF0ZSB2b2lkIGJ0blNpZ251cEFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5TaWdudXBBY3Rpb25QZXJmb3JtZWRcbiAgICAgICAgLy8gVE9ETyBhZGQgeW91ciBoYW5kbGluZyBjb2RlIGhlcmU6XG4gICAgICAgIHNldFZpc2libGUoZmFsc2UpO1xuICAgICAgICBuZXcgU2lnblVwKCkuc2V0VmlzaWJsZSh0cnVlKTtcbiAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5TaWdudXBBY3Rpb25QZXJmb3JtZWRcbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9jb20vc3RvcmUvYXBwL3BldHN0b3JlL0NvbnRyb2xsZXJzL0FkbWluL0Rhc2hib2FyZENvbnRyb2xsZXIuamF2YVxuLi4uXG5cbiAgICBwcml2YXRlIHZvaWQgbmF2aWdhdGVUbyhTdHJpbmcgdmlld05hbWUpIHtcbiAgICAgICAgU3RhZ2UgY3VycmVudFN0YWdlID0gKFN0YWdlKSBsb2dvdXRCdXR0b24uZ2V0U2NlbmUoKS5nZXRXaW5kb3coKTtcbiAgICAgICAgQWRtaW5GYWN0b3J5LmdldEluc3RhbmNlKCkuc3dpdGNoQ29udGVudCh2aWV3TmFtZSwgY3VycmVudFN0YWdlKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHZvaWQgaGFuZGxlTG9nb3V0KCkge1xuICAgICAgICAvLyBTdG9wIGF1dG8tcmVmcmVzaCBpZiBhY3RpdmVcbiAgICAgICAgc3RvcEF1dG9SZWZyZXNoKCk7XG5cbiAgICAgICAgU3RhZ2UgY3VycmVudFN0YWdlID0gKFN0YWdlKSBsb2dvdXRCdXR0b24uZ2V0U2NlbmUoKS5nZXRXaW5kb3coKTtcbiAgICAgICAgaWYgKENvbnRyb2xsZXJVdGlscy5zaG93Q29uZmlybWF0aW9uQW5kV2FpdChcIsSQxINuZyB4deG6pXRcIiwgXCJC4bqhbiBjw7MgY2jhuq9jIGNo4bqvbiBtdeG7kW4gxJHEg25nIHh14bqldCBraMO0bmc/XFxuTmjhuqVuIE9LIMSR4buDIHjDoWMgbmjhuq1uLlwiKSkge1xuICAgICAgICAgICAgU2Vzc2lvbk1hbmFnZXIuY2xlYXIoKTtcbiAgICAgICAgICAgIFZpZXdGYWN0b3J5LmdldEluc3RhbmNlKCkuc3dpdGNoQ29udGVudChcImxvZ2luXCIsIGN1cnJlbnRTdGFnZSk7XG4gICAgICAgIH1cbiAgICB9XG5cblxufVxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL2NvbS9zdG9yZS9hcHAvcGV0c3RvcmUvUGV0U3RvcmVBcHBsaWNhdGlvbi5qYXZhXG5wYWNrYWdlIGNvbS5zdG9yZS5hcHAucGV0c3RvcmU7XG5cbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLk1vZGVscy5EYXRhYmFzZU1hbmFnZXI7XG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5WaWV3cy5Nb2RlbFZpZXc7XG5pbXBvcnQgamF2YWZ4LmFwcGxpY2F0aW9uLkFwcGxpY2F0aW9uO1xuaW1wb3J0IGphdmFmeC5meG1sLkZYTUxMb2FkZXI7XG5pbXBvcnQgamF2YWZ4LnNjZW5lLlBhcmVudDtcbmltcG9ydCBqYXZhZnguc2NlbmUuU2NlbmU7XG5pbXBvcnQgamF2YWZ4LnN0YWdlLlN0YWdlO1xuXG5pbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlvbjtcblxucHVibGljIGNsYXNzIFBldFN0b3JlQXBwbGljYXRpb24gZXh0ZW5kcyBBcHBsaWNhdGlvbiB7XG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIHZvaWQgc3RhcnQoU3RhZ2UgcHJpbWFyeVN0YWdlKSB7XG4gICAgICAgIERhdGFiYXNlTWFuYWdlci5jb25uZWN0KCk7XG4gICAgICAgIE1vZGVsVmlldy5nZXRJbnN0YW5jZSgpLmdldFZpZXdGYWN0b3J5KCkuc2hvd1dpbmRvdyhcImxvZ2luXCIpO1xuLi4uXG5QYXRoOiBzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9Gb3Jnb3RQYXNzd29yZC5qYXZhXG4uLi5cblxuICAgIHByaXZhdGUgdm9pZCBidG5DaGFuZ2VBY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuQ2hhbmdlQWN0aW9uUGVyZm9ybWVkXG4gICAgICAgIGlmICh2YWxpZGF0ZUZpZWxkcygpICYmIGN1cnJlbnRTdWJzY3JpYmVyICE9IG51bGwpIHtcbiAgICAgICAgICAgIFN0cmluZyBuZXdQYXNzd29yZCA9IHR4dFBhc3N3b3JkLmdldFRleHQoKTtcblxuICAgICAgICAgICAgYm9vbGVhbiBzdWNjZXNzID0gU3Vic2NyaWJlckRBTy51cGRhdGVQYXNzd29yZChjdXJyZW50U3Vic2NyaWJlci5nZXRVc2VyX2lkKCksIG5ld1Bhc3N3b3JkKTtcblxuICAgICAgICAgICAgaWYgKHN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcIsSQ4buVaSBt4bqtdCBraOG6qXUgdGjDoG5oIGPDtG5nISBWdWkgbMOybmcgxJHEg25nIG5o4bqtcCBs4bqhaS5cIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5JTkZPUk1BVElPTl9NRVNTQUdFKTtcbiAgICAgICAgICAgICAgICBuZXcgTG9naW4oKS5zZXRWaXNpYmxlKHRydWUpO1xuICAgICAgICAgICAgICAgIHRoaXMuZGlzcG9zZSgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcIsSQ4buVaSBt4bqtdCBraOG6qXUgdGjhuqV0IGLhuqFpISBWdWkgbMOybmcgdGjhu60gbOG6oWkgc2F1LlwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuQ2hhbmdlQWN0aW9uUGVyZm9ybWVkXG4uLi5cblBhdGg6IHNyYy9EQU8vVXNlckRBTy5qYXZhXG4vKlxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9MaWNlbnNlcy9saWNlbnNlLWRlZmF1bHQudHh0IHRvIGNoYW5nZSB0aGlzIGxpY2Vuc2VcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9DbGFzcy5qYXZhIHRvIGVkaXQgdGhpcyB0ZW1wbGF0ZVxuICovXG5wYWNrYWdlIERBTztcblxuaW1wb3J0IE1vZGVsLlVzZXI7XG5pbXBvcnQgamF2YS51dGlsLkxpc3Q7XG5cbi8qKlxuICpcbiAqIEBhdXRob3IgTmdvYyBUaGFvXG4gKi9cbnB1YmxpYyBjbGFzcyBVc2VyREFPe1xuXG4gICAgcHVibGljIHN0YXRpYyB2b2lkIGluc2VydChVc2VyIG9iaikge1xuICAgICAgICBcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIHZvaWQgdXBkYXRlKFVzZXIgb2JqKSB7XG4gICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbihcIk5vdCBzdXBwb3J0ZWQgeWV0LlwiKTsgLy8gR2VuZXJhdGVkIGZyb20gbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NvZGUvR2VuZXJhdGVkTWV0aG9kQm9keVxuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBkZWxldGUoaW50IGlkKSB7XG4gICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbihcIk5vdCBzdXBwb3J0ZWQgeWV0LlwiKTsgLy8gR2VuZXJhdGVkIGZyb20gbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NvZGUvR2VuZXJhdGVkTWV0aG9kQm9keVxuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgVXNlciBnZXRCeUlkKGludCBpZCkge1xuICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oXCJOb3Qgc3VwcG9ydGVkIHlldC5cIik7IC8vIEdlbmVyYXRlZCBmcm9tIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9Db2RlL0dlbmVyYXRlZE1ldGhvZEJvZHlcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIExpc3Q8VXNlcj4gZ2V0QWxsKCkge1xuICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oXCJOb3Qgc3VwcG9ydGVkIHlldC5cIik7IC8vIEdlbmVyYXRlZCBmcm9tIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9Db2RlL0dlbmVyYXRlZE1ldGhvZEJvZHlcbiAgICB9XG4gICAgXG59XG4uLi5cblBhdGg6IHNyYy9tYWluL3Jlc291cmNlcy9GWE1ML0FkbWluL0FkbWluTWVudS5meG1sXG4uLi5cblxuPEFuY2hvclBhbmUgZng6aWQ9XCJyb290XCIgcHJlZkhlaWdodD1cIjcwLjBcIiBwcmVmV2lkdGg9XCI5OTAuMFwiIHN0eWxlQ2xhc3M9XCJuYXYtY29udGFpbmVyXCIgc3R5bGVzaGVldHM9XCJALi4vLi4vU3R5bGVzL0FkbWluL0FkbWluTWVudS5jc3NcIiB4bWxucz1cImh0dHA6Ly9qYXZhZnguY29tL2phdmFmeC8yMy4wLjFcIiB4bWxuczpmeD1cImh0dHA6Ly9qYXZhZnguY29tL2Z4bWwvMVwiIGZ4OmNvbnRyb2xsZXI9XCJjb20uc3RvcmUuYXBwLnBldHN0b3JlLkNvbnRyb2xsZXJzLkFkbWluLkFkbWluTWVudUNvbnRyb2xsZXJcIj5cbiAgIDxjaGlsZHJlbj5cbiAgICAgIDxJbWFnZVZpZXcgZml0SGVpZ2h0PVwiNDAuMFwiIGZpdFdpZHRoPVwiMTUzLjBcIiBsYXlvdXRYPVwiMjQuMFwiIGxheW91dFk9XCIyMS4wXCIgcGlja09uQm91bmRzPVwidHJ1ZVwiIHByZXNlcnZlUmF0aW89XCJ0cnVlXCIgQW5jaG9yUGFuZS5sZWZ0QW5jaG9yPVwiMTUuMFwiIEFuY2hvclBhbmUudG9wQW5jaG9yPVwiMTUuMFwiPlxuICAgICAgICAgPGltYWdlPlxuICAgICAgICAgICAgPEltYWdlIHVybD1cIkAuLi8uLi9JbWFnZXMvbG9nbzEucG5nXCIgLz5cbiAgICAgICAgIDwvaW1hZ2U+XG4gICAgICA8L0ltYWdlVmlldz5cbiAgICAgIDxMYWJlbCBmeDppZD1cInVzZXJuYW1lTGFiZWxcIiBjb250ZW50RGlzcGxheT1cIlJJR0hUXCIgbGF5b3V0WD1cIjg1OC4wXCIgbGF5b3V0WT1cIjIxLjBcIiBzdHlsZUNsYXNzPVwibGFiZWwtdXNlcm5hbWVcIiB0ZXh0PVwiYWRtaW4xMjNcIiB0ZXh0QWxpZ25tZW50PVwiUklHSFRcIiAvPlxuLi4uXG5QYXRoOiBzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9BZG1pbi9EYXNoYm9hcmQuamF2YVxuLypcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvTGljZW5zZXMvbGljZW5zZS1kZWZhdWx0LnR4dCB0byBjaGFuZ2UgdGhpcyBsaWNlbnNlXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0dVSUZvcm1zL0pGcmFtZS5qYXZhIHRvIGVkaXQgdGhpcyB0ZW1wbGF0ZVxuICovXG5wYWNrYWdlIGludGVybmV0Lm1hbmdlbWVudC5zeXN0ZW0uQWRtaW47XG5cbmltcG9ydCBNb2RlbC5Vc2VyO1xuaW1wb3J0IGludGVybmV0Lm1hbmdlbWVudC5zeXN0ZW0uU2Vzc2lvbi5Vc2VyU2Vzc2lvbjtcbmltcG9ydCBqYXZhLnRpbWUuTG9jYWxUaW1lO1xuaW1wb3J0IGphdmF4LnN3aW5nLkpPcHRpb25QYW5lO1xuXG4vKipcbiAqXG4gKiBAYXV0aG9yIE5nb2MgVGhhb1xuICovXG5wdWJsaWMgY2xhc3MgRGFzaGJvYXJkIGV4dGVuZHMgamF2YXguc3dpbmcuSkZyYW1lIHtcblxuICAgIFVzZXIgYWRtaW4gPSBVc2VyU2Vzc2lvbi5nZXRDdXJyZW50VXNlcigpO1xuICAgIFxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgbmV3IGZvcm0gRGFzaGJvYXJkXG4gICAgICovXG4gICAgcHVibGljIERhc2hib2FyZCgpIHtcbiAgICAgICAgaW5pdENvbXBvbmVudHMoKTtcbiAgICAgICAgc2V0dXBIZWxsbygpO1xuICAgICAgICBzZXR1cFVzZXJuYW1lKCk7XG4gICAgfVxuICAgIFxuICAgIHByaXZhdGUgdm9pZCBzZXR1cEhlbGxvKCkge1xuICAgICAgICBMb2NhbFRpbWUgbm93ID0gTG9jYWxUaW1lLm5vdygpO1xuICAgICAgICBpbnQgaG91ciA9IG5vdy5nZXRIb3VyKCk7XG4gICAgICAgIFxuICAgICAgICBTdHJpbmcgZ3JlZXRpbmc7XG5cbiAgICAgICAgaWYgKGhvdXIgPj0gNSAmJiBob3VyIDwgMTEpIHtcbiAgICAgICAgICAgIGdyZWV0aW5nID0gXCJDaMOgbyBideG7lWkgc8OhbmcsXCI7XG4gICAgICAgIH0gZWxzZSBpZiAoaG91ciA+PSAxMSAmJiBob3VyIDwgMTUpIHtcbiAgICAgICAgICAgIGdyZWV0aW5nID0gXCJDaMOgbyBideG7lWkgdHLGsGEsXCI7XG4gICAgICAgIH0gZWxzZSBpZiAoaG91ciA+PSAxNSAmJiBob3VyIDwgMTcpIHtcbiAgICAgICAgICAgIGdyZWV0aW5nID0gXCJDaMOgbyBideG7lWkgY2hp4buBdSxcIjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGdyZWV0aW5nID0gXCJDaMOgbyBideG7lWkgdOG7kWksXCI7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGxiSGVsbG8uc2V0VGV4dChncmVldGluZyk7XG4gICAgfVxuICAgIFxuICAgIHByaXZhdGUgdm9pZCBzZXR1cFVzZXJuYW1lKCkge1xuICAgICAgICBsYlVzZXJOYW1lLnNldFRleHQoYWRtaW4uZ2V0VXNlcm5hbWUoKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgaXMgY2FsbGVkIGZyb20gd2l0aGluIHRoZSBjb25zdHJ1Y3RvciB0byBpbml0aWFsaXplIHRoZSBmb3JtLlxuICAgICAqIFdBUk5JTkc6IERvIE5PVCBtb2RpZnkgdGhpcyBjb2RlLiBUaGUgY29udGVudCBvZiB0aGlzIG1ldGhvZCBpcyBhbHdheXNcbiAgICAgKiByZWdlbmVyYXRlZCBieSB0aGUgRm9ybSBFZGl0b3IuXG4gICAgICovXG4gICAgQFN1cHByZXNzV2FybmluZ3MoXCJ1bmNoZWNrZWRcIilcbiAgICAvLyA8ZWRpdG9yLWZvbGQgZGVmYXVsdHN0YXRlPVwiY29sbGFwc2VkXCIgZGVzYz1cIkdlbmVyYXRlZCBDb2RlXCI+Ly9HRU4tQkVHSU46aW5pdENvbXBvbmVudHNcbiAgICBwcml2YXRlIHZvaWQgaW5pdENvbXBvbmVudHMoKSB7XG5cbiAgICAgICAgYnRuVXNlciA9IG5ldyBqYXZheC5zd2luZy5KQnV0dG9uKCk7XG4gICAgICAgIGJ0bkN1c3RvbWVyID0gbmV3IGphdmF4LnN3aW5nLkpCdXR0b24oKTtcbiAgICAgICAgYnRuUGxhbiA9IG5ldyBqYXZheC5zd2luZy5KQnV0dG9uKCk7XG4gICAgICAgIGJ0bkNvbnRyYWN0ID0gbmV3IGphdmF4LnN3aW5nLkpCdXR0b24oKTtcbiAgICAgICAgYnRuSGlzdG9yeSA9IG5ldyBqYXZheC5zd2luZy5KQnV0dG9uKCk7XG4gICAgICAgIGJ0blN0YXRpc3RpYyA9IG5ldyBqYXZheC5zd2luZy5KQnV0dG9uKCk7XG4gICAgICAgIGJ0bkV4aXQgPSBuZXcgamF2YXguc3dpbmcuSkJ1dHRvbigpO1xuICAgICAgICBqU2VwYXJhdG9yMSA9IG5ldyBqYXZheC5zd2luZy5KU2VwYXJhdG9yKCk7XG4gICAgICAgIGxiVXNlck5hbWUgPSBuZXcgamF2YXguc3dpbmcuSkxhYmVsKCk7XG4gICAgICAgIGxiSGVsbG8gPSBuZXcgamF2YXguc3dpbmcuSkxhYmVsKCk7XG4uLi5cbiAgICAgICAgLy88L2VkaXRvci1mb2xkPlxuXG4gICAgICAgIC8qIENyZWF0ZSBhbmQgZGlzcGxheSB0aGUgZm9ybSAqL1xuICAgICAgICBqYXZhLmF3dC5FdmVudFF1ZXVlLmludm9rZUxhdGVyKG5ldyBSdW5uYWJsZSgpIHtcbiAgICAgICAgICAgIHB1YmxpYyB2b2lkIHJ1bigpIHtcbiAgICAgICAgICAgICAgICBuZXcgRGFzaGJvYXJkKCkuc2V0VmlzaWJsZSh0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gVmFyaWFibGVzIGRlY2xhcmF0aW9uIC0gZG8gbm90IG1vZGlmeS8vR0VOLUJFR0lOOnZhcmlhYmxlc1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkJ1dHRvbiBidG5Db250cmFjdDtcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpCdXR0b24gYnRuQ3VzdG9tZXI7XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KQnV0dG9uIGJ0bkV4aXQ7XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KQnV0dG9uIGJ0bkhpc3Rvcnk7XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KQnV0dG9uIGJ0blBsYW47XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KQnV0dG9uIGJ0blN0YXRpc3RpYztcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpCdXR0b24gYnRuVXNlcjtcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpTZXBhcmF0b3IgalNlcGFyYXRvcjE7XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KTGFiZWwgbGJIZWxsbztcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpMYWJlbCBsYlVzZXJOYW1lO1xuICAgIC8vIEVuZCBvZiB2YXJpYWJsZXMgZGVjbGFyYXRpb24vL0dFTi1FTkQ6dmFyaWFibGVzXG59XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvY29tL3N0b3JlL2FwcC9wZXRzdG9yZS9WaWV3cy9BZG1pbkZhY3RvcnkuamF2YVxuLi4uXG5cbiAgICBwdWJsaWMgdm9pZCBzaG93V2luZG93KFN0cmluZyBmeG1sTmFtZSkge1xuICAgICAgICBTdGFnZSBzdGFnZSA9IG5ldyBTdGFnZSgpO1xuICAgICAgICBQYXJlbnQgcm9vdCA9IG51bGw7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBzd2l0Y2ggKGZ4bWxOYW1lLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICAgICAgICBjYXNlIFwiZGFzaGJvYXJkXCI6XG4gICAgICAgICAgICAgICAgICAgIHJvb3QgPSBsb2FkRlhNTChEQVNIQk9BUkRfRlhNTCk7XG4gICAgICAgICAgICAgICAgICAgIHN0YWdlLnNldFRpdGxlKFwiQuG6o25nIMSRaeG7gXUga2hp4buDbiBBZG1pblwiKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcInVzZXJtYW5hZ2VtZW50XCI6XG4gICAgICAgICAgICAgICAgICAgIHJvb3QgPSBsb2FkRlhNTChVU0VSTUFOQUdFTUVOVF9GWE1MKTtcbiAgICAgICAgICAgICAgICAgICAgc3RhZ2Uuc2V0VGl0bGUoXCJRdeG6o24gbMO9IHTDoGkga2hv4bqjblwiKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcImN1c3RvbWVybWFuYWdlbWVudFwiOlxuICAgICAgICAgICAgICAgICAgICByb290ID0gbG9hZEZYTUwoQ1VTVE9NRVJNQU5BR0VNRU5UX0ZYTUwpO1xuICAgICAgICAgICAgICAgICAgICBzdGFnZS5zZXRUaXRsZShcIlF14bqjbiBsw70ga2jDoWNoIGjDoG5nXCIpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiZGlzY291bnRtYW5hZ2VtZW50XCI6XG4gICAgICAgICAgICAgICAgICAgIHJvb3QgPSBsb2FkRlhNTChESVNDT1VOVE1BTkFHRU1FTlRfRlhNTCk7XG4gICAgICAgICAgICAgICAgICAgIHN0YWdlLnNldFRpdGxlKFwiUXXhuqNuIGzDvSBraHV54bq/biBtw6NpXCIpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwicGV0bWFuYWdlbWVudFwiOlxuICAgICAgICAgICAgICAgICAgICByb290ID0gbG9hZEZYTUwoUEVUTUFOQUdFTUVOVF9GWE1MKTtcbiAgICAgICAgICAgICAgICAgICAgc3RhZ2Uuc2V0VGl0bGUoXCJRdeG6o24gbMO9IHRow7ogY8awbmdcIik7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJwcm9kdWN0bWFuYWdlbWVudFwiOlxuICAgICAgICAgICAgICAgICAgICByb290ID0gbG9hZEZYTUwoUFJPRFVDVE1BTkFHRU1FTlRfRlhNTCk7XG4gICAgICAgICAgICAgICAgICAgIHN0YWdlLnNldFRpdGxlKFwiUXXhuqNuIGzDvSBz4bqjbiBwaOG6qW1cIik7XG4uLi5cblxuICAgIHB1YmxpYyB2b2lkIHN3aXRjaENvbnRlbnQoU3RyaW5nIGZ4bWxOYW1lLCBTdGFnZSBjdXJyZW50U3RhZ2UpIHtcbiAgICAgICAgUGFyZW50IHJvb3QgPSBudWxsO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgc3dpdGNoIChmeG1sTmFtZS50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBcImRhc2hib2FyZFwiOlxuICAgICAgICAgICAgICAgICAgICByb290ID0gbG9hZEZYTUwoREFTSEJPQVJEX0ZYTUwpO1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhZ2Uuc2V0VGl0bGUoXCJC4bqjbmcgxJFp4buBdSBraGnhu4NuIEFkbWluXCIpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwidXNlcm1hbmFnZW1lbnRcIjpcbiAgICAgICAgICAgICAgICAgICAgcm9vdCA9IGxvYWRGWE1MKFVTRVJNQU5BR0VNRU5UX0ZYTUwpO1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhZ2Uuc2V0VGl0bGUoXCJRdeG6o24gbMO9IHTDoGkga2hv4bqjblwiKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcImN1c3RvbWVybWFuYWdlbWVudFwiOlxuICAgICAgICAgICAgICAgICAgICByb290ID0gbG9hZEZYTUwoQ1VTVE9NRVJNQU5BR0VNRU5UX0ZYTUwpO1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhZ2Uuc2V0VGl0bGUoXCJRdeG6o24gbMO9IGtow6FjaCBow6BuZ1wiKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcImRpc2NvdW50bWFuYWdlbWVudFwiOlxuICAgICAgICAgICAgICAgICAgICByb290ID0gbG9hZEZYTUwoRElTQ09VTlRNQU5BR0VNRU5UX0ZYTUwpO1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhZ2Uuc2V0VGl0bGUoXCJRdeG6o24gbMO9IGtodXnhur9uIG3Do2lcIik7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJwZXRtYW5hZ2VtZW50XCI6XG4gICAgICAgICAgICAgICAgICAgIHJvb3QgPSBsb2FkRlhNTChQRVRNQU5BR0VNRU5UX0ZYTUwpO1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhZ2Uuc2V0VGl0bGUoXCJRdeG6o24gbMO9IHRow7ogY8awbmdcIik7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJwcm9kdWN0bWFuYWdlbWVudFwiOlxuICAgICAgICAgICAgICAgICAgICByb290ID0gbG9hZEZYTUwoUFJPRFVDVE1BTkFHRU1FTlRfRlhNTCk7XG4uLi5cblBhdGg6IHNyYy9tYWluL3Jlc291cmNlcy9GWE1ML0FkbWluL0Rhc2hib2FyZC5meG1sXG4uLi5cblxuPFZCb3ggcHJlZkhlaWdodD1cIjUxMi4wXCIgcHJlZldpZHRoPVwiOTkwLjBcIiBzdHlsZXNoZWV0cz1cIkAuLi8uLi9TdHlsZXMvQWRtaW4vRGFzaGJvYXJkLmNzc1wiIHhtbG5zPVwiaHR0cDovL2phdmFmeC5jb20vamF2YWZ4LzIzLjAuMVwiIHhtbG5zOmZ4PVwiaHR0cDovL2phdmFmeC5jb20vZnhtbC8xXCIgZng6Y29udHJvbGxlcj1cImNvbS5zdG9yZS5hcHAucGV0c3RvcmUuQ29udHJvbGxlcnMuQWRtaW4uRGFzaGJvYXJkQ29udHJvbGxlclwiPlxuICAgIDxjaGlsZHJlbj5cbiAgICAgICAgPGZ4OmluY2x1ZGUgc291cmNlPVwiQWRtaW5NZW51LmZ4bWxcIiAvPlxuICAgICAgICA8U2Nyb2xsUGFuZSBmaXRUb1dpZHRoPVwidHJ1ZVwiIHByZWZIZWlnaHQ9XCI0NDIuMFwiIHByZWZXaWR0aD1cIjk5MC4wXCIgc3R5bGVDbGFzcz1cImRhc2hib2FyZC1jb250YWluZXJcIj5cbiAgICAgICAgICAgIDxjb250ZW50PlxuICAgICAgICAgICAgICAgIDxWQm94IHNwYWNpbmc9XCIyMC4wXCI+XG4gICAgICAgICAgICAgICAgICAgIDxwYWRkaW5nPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEluc2V0cyBib3R0b209XCIyMC4wXCIgbGVmdD1cIjIwLjBcIiByaWdodD1cIjIwLjBcIiB0b3A9XCIyMC4wXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9wYWRkaW5nPlxuICAgICAgICAgICAgICAgICAgICA8Y2hpbGRyZW4+XG4gICAgICAgICAgICAgICAgICAgICAgICA8IS0tIFdlbGNvbWUgU2VjdGlvbiAtLT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxIQm94IGFsaWdubWVudD1cIkNFTlRFUlwiIHN0eWxlQ2xhc3M9XCJ3ZWxjb21lLXNlY3Rpb25cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Y2hpbGRyZW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxMYWJlbCBzdHlsZUNsYXNzPVwid2VsY29tZS10ZXh0XCIgdGV4dD1cIlhpbiBjaMOgbyBRdeG6o24gdHLhu4sgdmnDqm5cIiBIQm94Lmhncm93PVwiQUxXQVlTXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Zm9udD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9udCBuYW1lPVwiU3lzdGVtIEJvbGRcIiBzaXplPVwiMjQuMFwiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2ZvbnQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SEJveC5tYXJnaW4+XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvY29tL3N0b3JlL2FwcC9wZXRzdG9yZS9EQU8vVXNlckRBTy5qYXZhXG5wYWNrYWdlIGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuREFPO1xuXG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5Nb2RlbHMuRW50aXRpZXMuVXNlcjtcbmltcG9ydCBvcmcubWluZHJvdC5qYmNyeXB0LkJDcnlwdDtcblxuaW1wb3J0IGphdmEuc3FsLio7XG5pbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDtcbmltcG9ydCBqYXZhLnV0aWwuQmFzZTY0O1xuXG5wdWJsaWMgY2xhc3MgVXNlckRBTyBpbXBsZW1lbnRzIEJhc2VEQU88VXNlciwgSW50ZWdlcj4ge1xuICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgaW50IGlzRHVwbGljYXRlID0gLTE7XG5cbiAgICBwdWJsaWMgc3RhdGljIFVzZXJEQU8gZ2V0SW5zdGFuY2UoKSB7XG4gICAgICAgIHJldHVybiBuZXcgVXNlckRBTygpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgU3RyaW5nIGVuY29kZShTdHJpbmcgcGFzc3dvcmQpIHtcbi8vICAgICAgICByZXR1cm4gQmFzZTY0LmdldEVuY29kZXIoKS5lbmNvZGVUb1N0cmluZyhwYXNzd29yZC5nZXRCeXRlcygpKTtcbiAgICAgICAgcmV0dXJuIEJDcnlwdC5oYXNocHcocGFzc3dvcmQsIEJDcnlwdC5nZW5zYWx0KCkpO1xuICAgIH1cbi4uLlxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25uID0gRGF0YWJhc2VVdGlsLmdldENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgIFN0cmluZyBzcWwgPSBcIklOU0VSVCBJTlRPIFVzZXJzICh1c2VybmFtZSwgcGFzc3dvcmQsIHJvbGUsIGltYWdlX3VybCwgaXNBY3RpdmUpIFZBTFVFUyAoPywgPywgPywgPywgPylcIjtcbiAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsLCBTdGF0ZW1lbnQuUkVUVVJOX0dFTkVSQVRFRF9LRVlTKTtcblxuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMSwgZW50aXR5LmdldFVzZXJuYW1lKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMiwgZW5jb2RlKGVudGl0eS5nZXRQYXNzd29yZCgpKSk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygzLCBlbnRpdHkuZ2V0Um9sZSgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDQsIGVudGl0eS5nZXRJbWFnZVVybCgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0Qm9vbGVhbig1LCBlbnRpdHkuaXNBY3RpdmUoKSk7XG5cbiAgICAgICAgICAgIGludCBhZmZlY3RlZFJvd3MgPSBzdG10LmV4ZWN1dGVVcGRhdGUoKTtcbiAgICAgICAgICAgIGlmIChhZmZlY3RlZFJvd3MgPT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0cnkgKFJlc3VsdFNldCBnZW5lcmF0ZWRLZXlzID0gc3RtdC5nZXRHZW5lcmF0ZWRLZXlzKCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoZ2VuZXJhdGUuLi4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCJiNDNlYjk3MS05NzBiLTRiZmItYjVhMy1iN2UzNGIyZTU2M2E7dG9vbHVfMDE5cndyTlVDNUtrZ0xWR0drUktNVDI4Ijp7InJlcXVlc3RJZCI6ImI0M2ViOTcxLTk3MGItNGJmYi1iNWEzLWI3ZTM0YjJlNTYzYSIsInRvb2xVc2VJZCI6InRvb2x1XzAxOXJ3ck5VQzVLa2dMVkdHa1JLTVQyOCIsInBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IlRoZSBmb2xsb3dpbmcgY29kZSBzZWN0aW9ucyB3ZXJlIHJldHJpZXZlZDpcblBhdGg6IHNyYy9tYWluL2phdmEvY29tL3N0b3JlL2FwcC9wZXRzdG9yZS9Db250cm9sbGVycy9Mb2dpbkNvbnRyb2xsZXIuamF2YVxuLi4uXG5cbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLkRBTy5Vc2VyREFPO1xuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuREFPLlN0YWZmREFPO1xuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuTW9kZWxzLkVudGl0aWVzLlVzZXI7XG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5Nb2RlbHMuRW50aXRpZXMuU3RhZmY7XG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5TZXNzaW9ucy5TZXNzaW9uTWFuYWdlcjtcbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLlZpZXdzLkFkbWluRmFjdG9yeTtcbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLlZpZXdzLlZpZXdGYWN0b3J5O1xuaW1wb3J0IGRlLmplbnNkLmZ4LmdseXBocy5mb250YXdlc29tZS5Gb250QXdlc29tZUljb247XG5pbXBvcnQgZGUuamVuc2QuZnguZ2x5cGhzLmZvbnRhd2Vzb21lLkZvbnRBd2Vzb21lSWNvblZpZXc7XG5pbXBvcnQgamF2YWZ4LmZ4bWwuRlhNTDtcbmltcG9ydCBqYXZhZnguZnhtbC5Jbml0aWFsaXphYmxlO1xuaW1wb3J0IGphdmFmeC5zY2VuZS5jb250cm9sLio7XG5pbXBvcnQgamF2YWZ4LnNjZW5lLmlucHV0Lk1vdXNlRXZlbnQ7XG5pbXBvcnQgamF2YWZ4LnN0YWdlLlN0YWdlO1xuaW1wb3J0IGphdmFmeC5zY2VuZS5pbWFnZS5JbWFnZTtcbmltcG9ydCBqYXZhZnguc2NlbmUuaW1hZ2UuSW1hZ2VWaWV3O1xuaW1wb3J0IGphdmFmeC5zY2VuZS5wYWludC5JbWFnZVBhdHRlcm47XG5pbXBvcnQgamF2YS51dGlsLk9iamVjdHM7XG4uLi5cblxucHVibGljIGNsYXNzIExvZ2luQ29udHJvbGxlciBpbXBsZW1lbnRzIEluaXRpYWxpemFibGUge1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIEZvbnRBd2Vzb21lSWNvblZpZXcgZXllSWNvbjtcblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBUZXh0RmllbGQgc2hvd1Bhc3N3b3JkO1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIFBhc3N3b3JkRmllbGQgcGFzc3dvcmRGaWVsZDtcblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBUZXh0RmllbGQgdXNlcm5hbWVGaWVsZDtcblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBCdXR0b24gbG9naW5CdXR0b247XG5cbiAgICBARlhNTFxuICAgIHByaXZhdGUgTGFiZWwgZXJyb3JMYWJlbDtcblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBIeXBlcmxpbmsgZm9yZ290UGFzc3dvcmRMaW5rO1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIEltYWdlVmlldyB1c2VySW1hZ2U7XG5cbiAgICBwcml2YXRlIGRvdWJsZSB4LCB5O1xuXG4gICAgVXNlckRBTyB1c2VyREFPID0gbmV3IFVzZXJEQU8oKTtcbiAgICBTdGFmZkRBTyBzdGFmZkRBTyA9IFN0YWZmREFPLmdldEluc3RhbmNlKCk7XG4gICAgcHVibGljIHN0YXRpYyBpbnQgaWRTdGFmZkN1cnJlbnQ7XG4gICAgcHVibGljIHN0YXRpYyBpbnQgaWRBZG1pbkN1cnJlbnQ7XG5cbiAgICBwcml2YXRlIFNlc3Npb25NYW5hZ2VyIHNlc3Npb25NYW5hZ2VyID0gbmV3IFNlc3Npb25NYW5hZ2VyKCk7XG4uLi5cblxuICAgIHByaXZhdGUgdm9pZCBzZXR1cExvZ2luQnV0dG9uKCkge1xuICAgICAgICBsb2dpbkJ1dHRvbi5zZXRPbkFjdGlvbihldmVudCAtPiBoYW5kbGVMb2dpbigpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHZvaWQgc2V0dXBGb3Jnb3RQYXNzd29yZExpbmsoKSB7XG4gICAgICAgIGZvcmdvdFBhc3N3b3JkTGluay5zZXRPbkFjdGlvbihldmVudCAtPiB7XG4gICAgICAgICAgICBTdGFnZSBjdXJyZW50U3RhZ2UgPSAoU3RhZ2UpIHVzZXJuYW1lRmllbGQuZ2V0U2NlbmUoKS5nZXRXaW5kb3coKTtcbiAgICAgICAgICAgIFZpZXdGYWN0b3J5LmdldEluc3RhbmNlKCkuc3dpdGNoQ29udGVudChcImZvcmdvdHBhc3N3b3JkXCIsIGN1cnJlbnRTdGFnZSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSB2b2lkIGhhbmRsZURyYWdnZWQoTW91c2VFdmVudCBldmVudCkge1xuICAgICAgICBTdGFnZSBzdGFnZSA9IChTdGFnZSkgdXNlcm5hbWVGaWVsZC5nZXRTY2VuZSgpLmdldFdpbmRvdygpO1xuICAgICAgICBzdGFnZS5zZXRYKGV2ZW50LmdldFNjcmVlblgoKSAtIHgpO1xuICAgICAgICBzdGFnZS5zZXRZKGV2ZW50LmdldFNjcmVlblkoKSAtIHkpO1xuICAgIH1cblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSB2b2lkIGhhbmRsZVByZXNzZWQoTW91c2VFdmVudCBldmVudCkge1xuICAgICAgICB4ID0gZXZlbnQuZ2V0U2NyZWVuWCgpO1xuICAgICAgICB5ID0gZXZlbnQuZ2V0U2NyZWVuWSgpO1xuICAgIH1cbi4uLlxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBUw6xtIHVzZXIgdGhlbyB1c2VybmFtZVxuICAgICAgICAgICAgVXNlciB1c2VyID0gdXNlckRBTy5maW5kQnlVc2VybmFtZSh1c2VybmFtZSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmKHVzZXIgPT0gbnVsbCB8fCB1c2VyLmdldFVzZXJuYW1lKCkgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIENvbnRyb2xsZXJVdGlscy5zaG93QWxlcnQoQWxlcnQuQWxlcnRUeXBlLkVSUk9SLCBcIkzhu5dpXCIsIFwiVMOqbiDEkcSDbmcgbmjhuq1wIGtow7RuZyDEkcO6bmdcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBLaeG7g20gdHJhIHTDqm4gxJHEg25nIG5o4bqtcFxuICAgICAgICAgICAgaWYgKCF1c2VyLmdldFVzZXJuYW1lKCkuZXF1YWxzKHVzZXJuYW1lKSkge1xuICAgICAgICAgICAgICAgIENvbnRyb2xsZXJVdGlscy5zaG93QWxlcnQoQWxlcnQuQWxlcnRUeXBlLkVSUk9SLCBcIkzhu5dpXCIsIFwiVMOqbiDEkcSDbmcgbmjhuq1wIGtow7RuZyDEkcO6bmdcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBLaeG7g20gdHJhIG3huq10IGto4bqpdVxuICAgICAgICAgICAgaWYoIUJDcnlwdC5jaGVja3B3KHBhc3N3b3JkLCB1c2VyLmdldFBhc3N3b3JkKCkpKSB7XG4gICAgICAgICAgICAgICAgQ29udHJvbGxlclV0aWxzLnNob3dBbGVydChBbGVydC5BbGVydFR5cGUuRVJST1IsIFwiTOG7l2lcIiwgXCJN4bqtdCBraOG6qXUga2jDtG5nIMSRw7puZ1wiKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNlc3Npb25NYW5hZ2VyLnNldEN1cnJlbnRVc2VyKHVzZXIpO1xuXG4gICAgICAgICAgICBTdGFnZSBjdXJyZW50U3RhZ2UgPSAoU3RhZ2UpIHVzZXJuYW1lRmllbGQuZ2V0U2NlbmUoKS5nZXRXaW5kb3coKTtcblxuICAgICAgICAgICAgaWYodXNlci5nZXRSb2xlKCkuZXF1YWxzKFVzZXIuUk9MRV9BRE1JTikpIHtcbiAgICAgICAgICAgICAgICBpZEFkbWluQ3VycmVudCA9IHVzZXIuZ2V0VXNlcklkKCk7XG4gICAgICAgICAgICAgICAgQWRtaW5GYWN0b3J5LmdldEluc3RhbmNlKCkuc3dpdGNoQ29udGVudChcImRhc2hib2FyZFwiLCBjdXJyZW50U3RhZ2UpO1xuICAgICAgICAgICAgfSBlbHNlIGlmKHVzZXIuZ2V0Um9sZSgpLmVxdWFscyhVc2VyLlJPTEVfVVNFUikpIHtcbiAgICAgICAgICAgICAgICBpZFN0YWZmQ3VycmVudCA9IHVzZXIuZ2V0VXNlcklkKCk7XG4gICAgICAgICAgICAgICAgU3RhZmYgc3RhZmYgPSBzdGFmZkRBTy5maW5kQnlVc2VySWQodXNlci5nZXRVc2VySWQoKSk7XG4gICAgICAgICAgICAgICAgaWYgKHN0YWZmICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbk1hbmFnZXIuc2V0Q3VycmVudFN0YWZmKHN0YWZmKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgVmlld0ZhY3RvcnkuZ2V0SW5zdGFuY2UoKS5zd2l0Y2hDb250ZW50KFwiZGFzaGJvYXJkXCIsIGN1cnJlbnRTdGFnZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIENvbnRyb2xsZXJVdGlscy5zaG93QWxlcnQoQWxlcnQuQWxlcnRUeXBlLkVSUk9SLCBcIkzhu5dpXCIsIFwiVmFpIHRyw7IgbmfGsOG7nWkgZMO5bmcga2jDtG5nIGjhu6NwIGzhu4dcIik7XG4gICAgICAgICAgICAgICAgc2Vzc2lvbk1hbmFnZXIuY2xlYXIoKTtcbiAgICAgICAgICAgIH1cbi4uLlxuUGF0aDogc3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vTG9naW4uamF2YVxuLypcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvTGljZW5zZXMvbGljZW5zZS1kZWZhdWx0LnR4dCB0byBjaGFuZ2UgdGhpcyBsaWNlbnNlXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0dVSUZvcm1zL0pGcmFtZS5qYXZhIHRvIGVkaXQgdGhpcyB0ZW1wbGF0ZVxuICovXG5wYWNrYWdlIGludGVybmV0Lm1hbmdlbWVudC5zeXN0ZW07XG5cbmltcG9ydCBEQU8uVXNlckRBTztcbmltcG9ydCBNb2RlbC5Vc2VyO1xuaW1wb3J0IGphdmF4LnN3aW5nLkpPcHRpb25QYW5lO1xuLi4uXG5cbiAgICBwcml2YXRlIHZvaWQgYnRuTG9naW5BY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuTG9naW5BY3Rpb25QZXJmb3JtZWRcbiAgICAgICAgLy8gVE9ETyBhZGQgeW91ciBoYW5kbGluZyBjb2RlIGhlcmU6XG4gICAgICAgIGlmKHZhbGlkYXRlRmllbGRzKCkpIHtcbiAgICAgICAgICAgIHRyeXtcbiAgICAgICAgICAgICAgICBTdHJpbmcgdXNlcm5hbWUgPSB0eHRVc2VyTmFtZS5nZXRUZXh0KCkudHJpbSgpO1xuICAgICAgICAgICAgICAgIFN0cmluZyBwYXNzd29yZCA9IHR4dFBhc3N3b3JkLmdldFRleHQoKS50cmltKCk7XG5cbiAgICAgICAgICAgICAgICBVc2VyIHVzZXIgPSBudWxsO1xuICAgICAgICAgICAgICAgIGJvb2xlYW4gaXNTdWNjZXNzID0gVXNlckRBTy5sb2dpbih1c2VybmFtZSwgcGFzc3dvcmQpO1xuXG4gICAgICAgICAgICAgICAgaWYoaXNTdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKHRoaXMsIFwixJDEg25nIG5o4bqtcCB0aMOgbmggY8O0bmchXCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuSU5GT1JNQVRJT05fTUVTU0FHRSk7XG4vLyAgICAgICAgICAgICAgICAgICAgbmV3IE1haW5GcmFtZSgpLnNldFZpc2libGUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcG9zZSgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKHRoaXMsIFwiU2FpIHTDqm4gxJHEg25nIG5o4bqtcCBob+G6t2MgbeG6rXQga2jhuql1LlwiLCBcIkzhu5dpXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2goRXhjZXB0aW9uIGV4KSB7XG4gICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXCJM4buXaTogXCIgKyBleC5nZXRNZXNzYWdlKCksIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuXG4gICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuTG9naW5BY3Rpb25QZXJmb3JtZWRcblxuICAgIHByaXZhdGUgdm9pZCBidG5Gb3Jnb3RQYXNzd29yZEFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5Gb3Jnb3RQYXNzd29yZEFjdGlvblBlcmZvcm1lZFxuICAgICAgICAvLyBPcGVuIHRoZSBGb3Jnb3RQYXNzd29yZCBkaWFsb2dcbiAgICAgICAgRm9yZ290UGFzc3dvcmQgZm9yZ290UGFzc3dvcmREaWFsb2cgPSBuZXcgRm9yZ290UGFzc3dvcmQodGhpcywgdHJ1ZSk7XG4gICAgICAgIGZvcmdvdFBhc3N3b3JkRGlhbG9nLnNldFZpc2libGUodHJ1ZSk7XG4gICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuRm9yZ290UGFzc3dvcmRBY3Rpb25QZXJmb3JtZWRcblxuICAgIHByaXZhdGUgdm9pZCBidG5FeGl0QWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkV4aXRBY3Rpb25QZXJmb3JtZWRcbiAgICAgICAgLy8gVE9ETyBhZGQgeW91ciBoYW5kbGluZyBjb2RlIGhlcmU6XG4gICAgICAgIGludCByZXN1bHQgPSBKT3B0aW9uUGFuZS5zaG93Q29uZmlybURpYWxvZyhudWxsLCBcIkLhuqFuIGPDsyBjaOG6r2MgY2jhuq9uIG114buRbiB0aG/DoXQga2jDtG5nP1wiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLllFU19OT19PUFRJT04sIEpPcHRpb25QYW5lLlFVRVNUSU9OX01FU1NBR0UpO1xuXG4gICAgICAgIGlmIChyZXN1bHQgPT0gSk9wdGlvblBhbmUuWUVTX09QVElPTikge1xuICAgICAgICAgICAgU3lzdGVtLmV4aXQoMCk7XG4gICAgICAgIH1cbiAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5FeGl0QWN0aW9uUGVyZm9ybWVkXG5cbiAgICBwcml2YXRlIHZvaWQgYnRuU2lnbnVwQWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0blNpZ251cEFjdGlvblBlcmZvcm1lZFxuICAgICAgICAvLyBUT0RPIGFkZCB5b3VyIGhhbmRsaW5nIGNvZGUgaGVyZTpcbiAgICAgICAgc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgICAgIG5ldyBTaWduVXAoKS5zZXRWaXNpYmxlKHRydWUpO1xuICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0blNpZ251cEFjdGlvblBlcmZvcm1lZFxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL2NvbS9zdG9yZS9hcHAvcGV0c3RvcmUvQ29udHJvbGxlcnMvQWRtaW4vRGFzaGJvYXJkQ29udHJvbGxlci5qYXZhXG4uLi5cblxuICAgIHByaXZhdGUgdm9pZCBuYXZpZ2F0ZVRvKFN0cmluZyB2aWV3TmFtZSkge1xuICAgICAgICBTdGFnZSBjdXJyZW50U3RhZ2UgPSAoU3RhZ2UpIGxvZ291dEJ1dHRvbi5nZXRTY2VuZSgpLmdldFdpbmRvdygpO1xuICAgICAgICBBZG1pbkZhY3RvcnkuZ2V0SW5zdGFuY2UoKS5zd2l0Y2hDb250ZW50KHZpZXdOYW1lLCBjdXJyZW50U3RhZ2UpO1xuICAgIH1cblxuICAgIHByaXZhdGUgdm9pZCBoYW5kbGVMb2dvdXQoKSB7XG4gICAgICAgIC8vIFN0b3AgYXV0by1yZWZyZXNoIGlmIGFjdGl2ZVxuICAgICAgICBzdG9wQXV0b1JlZnJlc2goKTtcblxuICAgICAgICBTdGFnZSBjdXJyZW50U3RhZ2UgPSAoU3RhZ2UpIGxvZ291dEJ1dHRvbi5nZXRTY2VuZSgpLmdldFdpbmRvdygpO1xuICAgICAgICBpZiAoQ29udHJvbGxlclV0aWxzLnNob3dDb25maXJtYXRpb25BbmRXYWl0KFwixJDEg25nIHh14bqldFwiLCBcIkLhuqFuIGPDsyBjaOG6r2MgY2jhuq9uIG114buRbiDEkcSDbmcgeHXhuqV0IGtow7RuZz9cXG5OaOG6pW4gT0sgxJHhu4MgeMOhYyBuaOG6rW4uXCIpKSB7XG4gICAgICAgICAgICBTZXNzaW9uTWFuYWdlci5jbGVhcigpO1xuICAgICAgICAgICAgVmlld0ZhY3RvcnkuZ2V0SW5zdGFuY2UoKS5zd2l0Y2hDb250ZW50KFwibG9naW5cIiwgY3VycmVudFN0YWdlKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG59XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvY29tL3N0b3JlL2FwcC9wZXRzdG9yZS9QZXRTdG9yZUFwcGxpY2F0aW9uLmphdmFcbnBhY2thZ2UgY29tLnN0b3JlLmFwcC5wZXRzdG9yZTtcblxuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuTW9kZWxzLkRhdGFiYXNlTWFuYWdlcjtcbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLlZpZXdzLk1vZGVsVmlldztcbmltcG9ydCBqYXZhZnguYXBwbGljYXRpb24uQXBwbGljYXRpb247XG5pbXBvcnQgamF2YWZ4LmZ4bWwuRlhNTExvYWRlcjtcbmltcG9ydCBqYXZhZnguc2NlbmUuUGFyZW50O1xuaW1wb3J0IGphdmFmeC5zY2VuZS5TY2VuZTtcbmltcG9ydCBqYXZhZnguc3RhZ2UuU3RhZ2U7XG5cbmltcG9ydCBqYXZhLmlvLklPRXhjZXB0aW9uO1xuXG5wdWJsaWMgY2xhc3MgUGV0U3RvcmVBcHBsaWNhdGlvbiBleHRlbmRzIEFwcGxpY2F0aW9uIHtcbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgdm9pZCBzdGFydChTdGFnZSBwcmltYXJ5U3RhZ2UpIHtcbiAgICAgICAgRGF0YWJhc2VNYW5hZ2VyLmNvbm5lY3QoKTtcbiAgICAgICAgTW9kZWxWaWV3LmdldEluc3RhbmNlKCkuZ2V0Vmlld0ZhY3RvcnkoKS5zaG93V2luZG93KFwibG9naW5cIik7XG4uLi5cblBhdGg6IHNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL0ZvcmdvdFBhc3N3b3JkLmphdmFcbi8qXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0xpY2Vuc2VzL2xpY2Vuc2UtZGVmYXVsdC50eHQgdG8gY2hhbmdlIHRoaXMgbGljZW5zZVxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9HVUlGb3Jtcy9KRnJhbWUuamF2YSB0byBlZGl0IHRoaXMgdGVtcGxhdGVcbiAqL1xucGFja2FnZSBpbnRlcm5ldC5tYW5nZW1lbnQuc3lzdGVtO1xuXG5pbXBvcnQgREFPLlN1YnNjcmliZXJEQU87XG5pbXBvcnQgTW9kZWwuU3Vic2NyaWJlcjtcbmltcG9ydCBqYXZheC5zd2luZy5KT3B0aW9uUGFuZTtcbmltcG9ydCBpbnRlcm5ldC5tYW5nZW1lbnQuc3lzdGVtLkxvZ2luO1xuLi4uXG5cbiAgICBwcml2YXRlIHZvaWQgYnRuQ2hhbmdlQWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkNoYW5nZUFjdGlvblBlcmZvcm1lZFxuICAgICAgICBpZiAodmFsaWRhdGVGaWVsZHMoKSAmJiBjdXJyZW50U3Vic2NyaWJlciAhPSBudWxsKSB7XG4gICAgICAgICAgICBTdHJpbmcgbmV3UGFzc3dvcmQgPSB0eHRQYXNzd29yZC5nZXRUZXh0KCk7XG5cbiAgICAgICAgICAgIGJvb2xlYW4gc3VjY2VzcyA9IFN1YnNjcmliZXJEQU8udXBkYXRlUGFzc3dvcmQoY3VycmVudFN1YnNjcmliZXIuZ2V0VXNlcl9pZCgpLCBuZXdQYXNzd29yZCk7XG5cbiAgICAgICAgICAgIGlmIChzdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXCLEkOG7lWkgbeG6rXQga2jhuql1IHRow6BuaCBjw7RuZyEgVnVpIGzDsm5nIMSRxINuZyBuaOG6rXAgbOG6oWkuXCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuSU5GT1JNQVRJT05fTUVTU0FHRSk7XG4gICAgICAgICAgICAgICAgbmV3IExvZ2luKCkuc2V0VmlzaWJsZSh0cnVlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXCLEkOG7lWkgbeG6rXQga2jhuql1IHRo4bqldCBi4bqhaSEgVnVpIGzDsm5nIHRo4butIGzhuqFpIHNhdS5cIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0bkNoYW5nZUFjdGlvblBlcmZvcm1lZFxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL2NvbS9zdG9yZS9hcHAvcGV0c3RvcmUvQ29udHJvbGxlcnMvQWRtaW4vQWRtaW5NZW51Q29udHJvbGxlci5qYXZhXG4uLi5cblxuICAgICAgICBNZW51SXRlbSBsb2dvdXRNZW51SXRlbSA9IG5ldyBNZW51SXRlbShcIsSQxINuZyB4deG6pXRcIik7XG4gICAgICAgIGxvZ291dE1lbnVJdGVtLnNldE9uQWN0aW9uKGUgLT4gaGFuZGxlTG9nb3V0KG51bGwpKTtcbiAgICAgICAgbWVudUxvZ291dC5nZXRJdGVtcygpLmFkZChsb2dvdXRNZW51SXRlbSk7XG4gICAgfVxuXG4gICAgQEZYTUxcbiAgICB2b2lkIGhhbmRsZUxvZ291dChBY3Rpb25FdmVudCBldmVudCkge1xuICAgICAgICBTdGFnZSBjdXJyZW50U3RhZ2UgPSAoU3RhZ2UpIHJvb3QuZ2V0U2NlbmUoKS5nZXRXaW5kb3coKTtcbiAgICAgICAgaWYgKENvbnRyb2xsZXJVdGlscy5zaG93Q29uZmlybWF0aW9uQW5kV2FpdChcIsSQxINuZyB4deG6pXRcIiwgXCJC4bqhbiBjw7MgY2jhuq9jIGNo4bqvbiBtdeG7kW4gxJHEg25nIHh14bqldCBraMO0bmc/XFxuTmjhuqVuIE9LIMSR4buDIHjDoWMgbmjhuq1uLlwiKSkge1xuICAgICAgICAgICAgU2Vzc2lvbk1hbmFnZXIuY2xlYXIoKTtcbiAgICAgICAgICAgIFZpZXdGYWN0b3J5LmdldEluc3RhbmNlKCkuc3dpdGNoQ29udGVudChcImxvZ2luXCIsIGN1cnJlbnRTdGFnZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBDb250cm9sbGVyVXRpbHMuc2hvd0FsZXJ0KEFsZXJ0LkFsZXJ0VHlwZS5JTkZPUk1BVElPTiwgXCJUaMO0bmcgYsOhb1wiLCBcIsSQxINuZyB4deG6pXQga2jDtG5nIHRow6BuaCBjw7RuZ1wiKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi4uLlxuUGF0aDogc3JjL0RBTy9Vc2VyREFPLmphdmFcbi8qXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0xpY2Vuc2VzL2xpY2Vuc2UtZGVmYXVsdC50eHQgdG8gY2hhbmdlIHRoaXMgbGljZW5zZVxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NsYXNzLmphdmEgdG8gZWRpdCB0aGlzIHRlbXBsYXRlXG4gKi9cbnBhY2thZ2UgREFPO1xuXG5pbXBvcnQgTW9kZWwuVXNlcjtcbmltcG9ydCBqYXZhLnV0aWwuTGlzdDtcblxuLyoqXG4gKlxuICogQGF1dGhvciBOZ29jIFRoYW9cbiAqL1xucHVibGljIGNsYXNzIFVzZXJEQU97XG5cbiAgICBwdWJsaWMgc3RhdGljIHZvaWQgaW5zZXJ0KFVzZXIgb2JqKSB7XG4gICAgICAgIFxuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgdm9pZCB1cGRhdGUoVXNlciBvYmopIHtcbiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpOyAvLyBHZW5lcmF0ZWQgZnJvbSBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ29kZS9HZW5lcmF0ZWRNZXRob2RCb2R5XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyB2b2lkIGRlbGV0ZShpbnQgaWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpOyAvLyBHZW5lcmF0ZWQgZnJvbSBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ29kZS9HZW5lcmF0ZWRNZXRob2RCb2R5XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBVc2VyIGdldEJ5SWQoaW50IGlkKSB7XG4gICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbihcIk5vdCBzdXBwb3J0ZWQgeWV0LlwiKTsgLy8gR2VuZXJhdGVkIGZyb20gbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NvZGUvR2VuZXJhdGVkTWV0aG9kQm9keVxuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxVc2VyPiBnZXRBbGwoKSB7XG4gICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbihcIk5vdCBzdXBwb3J0ZWQgeWV0LlwiKTsgLy8gR2VuZXJhdGVkIGZyb20gbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NvZGUvR2VuZXJhdGVkTWV0aG9kQm9keVxuICAgIH1cbiAgICBcbn1cbi4uLlxuUGF0aDogc3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vQWRtaW4vRGFzaGJvYXJkLmphdmFcbi4uLlxuXG4vKipcbiAqXG4gKiBAYXV0aG9yIE5nb2MgVGhhb1xuICovXG5wdWJsaWMgY2xhc3MgRGFzaGJvYXJkIGV4dGVuZHMgamF2YXguc3dpbmcuSkZyYW1lIHtcblxuICAgIFVzZXIgYWRtaW4gPSBVc2VyU2Vzc2lvbi5nZXRDdXJyZW50VXNlcigpO1xuICAgIFxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgbmV3IGZvcm0gRGFzaGJvYXJkXG4gICAgICovXG4gICAgcHVibGljIERhc2hib2FyZCgpIHtcbiAgICAgICAgaW5pdENvbXBvbmVudHMoKTtcbiAgICAgICAgc2V0dXBIZWxsbygpO1xuICAgICAgICBzZXR1cFVzZXJuYW1lKCk7XG4gICAgfVxuICAgIFxuICAgIHByaXZhdGUgdm9pZCBzZXR1cEhlbGxvKCkge1xuICAgICAgICBMb2NhbFRpbWUgbm93ID0gTG9jYWxUaW1lLm5vdygpO1xuICAgICAgICBpbnQgaG91ciA9IG5vdy5nZXRIb3VyKCk7XG4gICAgICAgIFxuICAgICAgICBTdHJpbmcgZ3JlZXRpbmc7XG5cbiAgICAgICAgaWYgKGhvdXIgPj0gNSAmJiBob3VyIDwgMTEpIHtcbiAgICAgICAgICAgIGdyZWV0aW5nID0gXCJDaMOgbyBideG7lWkgc8OhbmcsXCI7XG4gICAgICAgIH0gZWxzZSBpZiAoaG91ciA+PSAxMSAmJiBob3VyIDwgMTUpIHtcbiAgICAgICAgICAgIGdyZWV0aW5nID0gXCJDaMOgbyBideG7lWkgdHLGsGEsXCI7XG4gICAgICAgIH0gZWxzZSBpZiAoaG91ciA+PSAxNSAmJiBob3VyIDwgMTcpIHtcbiAgICAgICAgICAgIGdyZWV0aW5nID0gXCJDaMOgbyBideG7lWkgY2hp4buBdSxcIjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGdyZWV0aW5nID0gXCJDaMOgbyBideG7lWkgdOG7kWksXCI7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGxiSGVsbG8uc2V0VGV4dChncmVldGluZyk7XG4gICAgfVxuICAgIFxuICAgIHByaXZhdGUgdm9pZCBzZXR1cFVzZXJuYW1lKCkge1xuICAgICAgICBsYlVzZXJOYW1lLnNldFRleHQoYWRtaW4uZ2V0VXNlcm5hbWUoKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgaXMgY2FsbGVkIGZyb20gd2l0aGluIHRoZSBjb25zdHJ1Y3RvciB0byBpbml0aWFsaXplIHRoZSBmb3JtLlxuICAgICAqIFdBUk5JTkc6IERvIE5PVCBtb2RpZnkgdGhpcyBjb2RlLiBUaGUgY29udGVudCBvZiB0aGlzIG1ldGhvZCBpcyBhbHdheXNcbiAgICAgKiByZWdlbmVyYXRlZCBieSB0aGUgRm9ybSBFZGl0b3IuXG4gICAgICovXG4gICAgQFN1cHByZXNzV2FybmluZ3MoXCJ1bmNoZWNrZWRcIilcbiAgICAvLyA8ZWRpdG9yLWZvbGQgZGVmYXVsdHN0YXRlPVwiY29sbGFwc2VkXCIgZGVzYz1cIkdlbmVyYXRlZCBDb2RlXCI+Ly9HRU4tQkVHSU46aW5pdENvbXBvbmVudHNcbiAgICBwcml2YXRlIHZvaWQgaW5pdENvbXBvbmVudHMoKSB7XG5cbiAgICAgICAgYnRuVXNlciA9IG5ldyBqYXZheC5zd2luZy5KQnV0dG9uKCk7XG4gICAgICAgIGJ0bkN1c3RvbWVyID0gbmV3IGphdmF4LnN3aW5nLkpCdXR0b24oKTtcbiAgICAgICAgYnRuUGxhbiA9IG5ldyBqYXZheC5zd2luZy5KQnV0dG9uKCk7XG4gICAgICAgIGJ0bkNvbnRyYWN0ID0gbmV3IGphdmF4LnN3aW5nLkpCdXR0b24oKTtcbiAgICAgICAgYnRuSGlzdG9yeSA9IG5ldyBqYXZheC5zd2luZy5KQnV0dG9uKCk7XG4gICAgICAgIGJ0blN0YXRpc3RpYyA9IG5ldyBqYXZheC5zd2luZy5KQnV0dG9uKCk7XG4gICAgICAgIGJ0bkV4aXQgPSBuZXcgamF2YXguc3dpbmcuSkJ1dHRvbigpO1xuICAgICAgICBqU2VwYXJhdG9yMSA9IG5ldyBqYXZheC5zd2luZy5KU2VwYXJhdG9yKCk7XG4gICAgICAgIGxiVXNlck5hbWUgPSBuZXcgamF2YXguc3dpbmcuSkxhYmVsKCk7XG4gICAgICAgIGxiSGVsbG8gPSBuZXcgamF2YXguc3dpbmcuSkxhYmVsKCk7XG5cbiAgICAgICAgc2V0RGVmYXVsdENsb3NlT3BlcmF0aW9uKGphdmF4LnN3aW5nLldpbmRvd0NvbnN0YW50cy5FWElUX09OX0NMT1NFKTtcblxuICAgICAgICBidG5Vc2VyLnNldEZvbnQobmV3IGphdmEuYXd0LkZvbnQoXCJBcmlhbFwiLCAxLCAyNCkpOyAvLyBOT0kxOE5cbiAgICAgICAgYnRuVXNlci5zZXRJY29uKG5ldyBqYXZheC5zd2luZy5JbWFnZUljb24oZ2V0Q2xhc3MoKS5nZXRSZXNvdXJjZShcIi9JbWFnZXMvdXNlci5wbmdcIikpKTsgLy8gTk9JMThOXG4gICAgICAgIGJ0blVzZXIuc2V0VGV4dChcIlF14bqjbiBsw70gbmfGsOG7nWkgZMO5bmdcIik7XG4gICAgICAgIGJ0blVzZXIuc2V0Q3Vyc29yKG5ldyBqYXZhLmF3dC5DdXJzb3IoamF2YS5hd3QuQ3Vyc29yLkhBTkRfQ1VSU09SKSk7XG4gICAgICAgIGJ0blVzZXIuc2V0SG9yaXpvbnRhbEFsaWdubWVudChqYXZheC5zd2luZy5Td2luZ0NvbnN0YW50cy5MRUZUKTtcbiAgICAgICAgYnRuVXNlci5hZGRBY3Rpb25MaXN0ZW5lcihuZXcgamF2YS5hd3QuZXZlbnQuQWN0aW9uTGlzdGVuZXIoKSB7XG4gICAgICAgICAgICBwdWJsaWMgdm9pZCBhY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7XG4gICAgICAgICAgICAgICAgYnRuVXNlckFjdGlvblBlcmZvcm1lZChldnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbi4uLlxuXG4gICAgcHJpdmF0ZSB2b2lkIGJ0blN0YXRpc3RpY0FjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5TdGF0aXN0aWNBY3Rpb25QZXJmb3JtZWRcbiAgICAgICAgLy8gVE9ETyBhZGQgeW91ciBoYW5kbGluZyBjb2RlIGhlcmU6XG4gICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuU3RhdGlzdGljQWN0aW9uUGVyZm9ybWVkXG5cbiAgICBwcml2YXRlIHZvaWQgYnRuRXhpdEFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5FeGl0QWN0aW9uUGVyZm9ybWVkXG4gICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxuICAgICAgICBpbnQgcmVzdWx0ID0gSk9wdGlvblBhbmUuc2hvd0NvbmZpcm1EaWFsb2cobnVsbCwgXCJC4bqhbiBjw7MgY2jhuq9jIGNo4bqvbiBtdeG7kW4gdGhvw6F0IGtow7RuZz9cIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5ZRVNfTk9fT1BUSU9OLCBKT3B0aW9uUGFuZS5RVUVTVElPTl9NRVNTQUdFKTtcblxuICAgICAgICBpZiAocmVzdWx0ID09IEpPcHRpb25QYW5lLllFU19PUFRJT04pIHtcbiAgICAgICAgICAgIFN5c3RlbS5leGl0KDApO1xuICAgICAgICB9XG4gICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuRXhpdEFjdGlvblBlcmZvcm1lZFxuLi4uXG4gICAgICAgIC8vPC9lZGl0b3ItZm9sZD5cblxuICAgICAgICAvKiBDcmVhdGUgYW5kIGRpc3BsYXkgdGhlIGZvcm0gKi9cbiAgICAgICAgamF2YS5hd3QuRXZlbnRRdWV1ZS5pbnZva2VMYXRlcihuZXcgUnVubmFibGUoKSB7XG4gICAgICAgICAgICBwdWJsaWMgdm9pZCBydW4oKSB7XG4gICAgICAgICAgICAgICAgbmV3IERhc2hib2FyZCgpLnNldFZpc2libGUodHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFZhcmlhYmxlcyBkZWNsYXJhdGlvbiAtIGRvIG5vdCBtb2RpZnkvL0dFTi1CRUdJTjp2YXJpYWJsZXNcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpCdXR0b24gYnRuQ29udHJhY3Q7XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KQnV0dG9uIGJ0bkN1c3RvbWVyO1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkJ1dHRvbiBidG5FeGl0O1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkJ1dHRvbiBidG5IaXN0b3J5O1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkJ1dHRvbiBidG5QbGFuO1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkJ1dHRvbiBidG5TdGF0aXN0aWM7XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KQnV0dG9uIGJ0blVzZXI7XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KU2VwYXJhdG9yIGpTZXBhcmF0b3IxO1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkxhYmVsIGxiSGVsbG87XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KTGFiZWwgbGJVc2VyTmFtZTtcbiAgICAvLyBFbmQgb2YgdmFyaWFibGVzIGRlY2xhcmF0aW9uLy9HRU4tRU5EOnZhcmlhYmxlc1xufVxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL2NvbS9zdG9yZS9hcHAvcGV0c3RvcmUvREFPL1VzZXJEQU8uamF2YVxucGFja2FnZSBjb20uc3RvcmUuYXBwLnBldHN0b3JlLkRBTztcblxuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuTW9kZWxzLkVudGl0aWVzLlVzZXI7XG5pbXBvcnQgb3JnLm1pbmRyb3QuamJjcnlwdC5CQ3J5cHQ7XG5cbmltcG9ydCBqYXZhLnNxbC4qO1xuaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7XG5pbXBvcnQgamF2YS51dGlsLkJhc2U2NDtcblxucHVibGljIGNsYXNzIFVzZXJEQU8gaW1wbGVtZW50cyBCYXNlREFPPFVzZXIsIEludGVnZXI+IHtcbiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIGludCBpc0R1cGxpY2F0ZSA9IC0xO1xuXG4gICAgcHVibGljIHN0YXRpYyBVc2VyREFPIGdldEluc3RhbmNlKCkge1xuICAgICAgICByZXR1cm4gbmV3IFVzZXJEQU8oKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIFN0cmluZyBlbmNvZGUoU3RyaW5nIHBhc3N3b3JkKSB7XG4vLyAgICAgICAgcmV0dXJuIEJhc2U2NC5nZXRFbmNvZGVyKCkuZW5jb2RlVG9TdHJpbmcocGFzc3dvcmQuZ2V0Qnl0ZXMoKSk7XG4gICAgICAgIHJldHVybiBCQ3J5cHQuaGFzaHB3KHBhc3N3b3JkLCBCQ3J5cHQuZ2Vuc2FsdCgpKTtcbiAgICB9XG5cbi8vICAgIHB1YmxpYyBzdGF0aWMgU3RyaW5nIGRlY29kZShTdHJpbmcgcGFzc3dvcmQpIHtcbi8vICAgICAgICByZXR1cm4gbmV3IFN0cmluZyhCYXNlNjQuZ2V0RGVjb2RlcigpLmRlY29kZShwYXNzd29yZCkpO1xuLy8gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBib29sZWFuIHZlcmlmeShTdHJpbmcgcGFzc3dvcmQsIFN0cmluZyBoYXNoZWQpIHtcbiAgICAgICAgcmV0dXJuIEJDcnlwdC5jaGVja3B3KHBhc3N3b3JkLCBoYXNoZWQpO1xuICAgIH1cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBpbnQgaW5zZXJ0KFVzZXIgZW50aXR5KSB7XG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuICAgICAgICBSZXN1bHRTZXQgcnMgPSBudWxsO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25uID0gRGF0YWJhc2VVdGlsLmdldENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgIFN0cmluZyBzcWwgPSBcIklOU0VSVCBJTlRPIFVzZXJzICh1c2VybmFtZSwgcGFzc3dvcmQsIHJvbGUsIGltYWdlX3VybCwgaXNBY3RpdmUpIFZBTFVFUyAoPywgPywgPywgPywgPylcIjtcbiAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsLCBTdGF0ZW1lbnQuUkVUVVJOX0dFTkVSQVRFRF9LRVlTKTtcblxuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMSwgZW50aXR5LmdldFVzZXJuYW1lKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMiwgZW5jb2RlKGVudGl0eS5nZXRQYXNzd29yZCgpKSk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygzLCBlbnRpdHkuZ2V0Um9sZSgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDQsIGVudGl0eS5nZXRJbWFnZVVybCgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0Qm9vbGVhbig1LCBlbnRpdHkuaXNBY3RpdmUoKSk7XG5cbiAgICAgICAgICAgIGludCBhZmZlY3RlZFJvd3MgPSBzdG10LmV4ZWN1dGVVcGRhdGUoKTtcbiAgICAgICAgICAgIGlmIChhZmZlY3RlZFJvd3MgPT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0cnkgKFJlc3VsdFNldCBnZW5lcmF0ZWRLZXlzID0gc3RtdC5nZXRHZW5lcmF0ZWRLZXlzKCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoZ2VuZXJhdGVkS2V5cy5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdlbmVyYXRlZEtleXMuZ2V0SW50KDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgRGF0YWJhc2VVdGlsLmNsb3NlUmVzb3VyY2VzKHJzLCBzdG10LCBjb25uKTtcbiAgICAgICAgfVxuICAgIH1cbi4uLlxuXG4gICAgcHVibGljIFVzZXIgZmluZEJ5VXNlcm5hbWUoU3RyaW5nIHVzZXJuYW1lKSB7XG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuICAgICAgICBSZXN1bHRTZXQgcnMgPSBudWxsO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25uID0gRGF0YWJhc2VVdGlsLmdldENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgIFN0cmluZyBzcWwgPSBcIlNFTEVDVCAqIEZST00gVXNlcnMgV0hFUkUgdXNlcm5hbWUgPSA/XCI7XG4gICAgICAgICAgICBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHNxbCk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygxLCB1c2VybmFtZSk7XG4gICAgICAgICAgICBycyA9IHN0bXQuZXhlY3V0ZVF1ZXJ5KCk7XG5cbiAgICAgICAgICAgIGlmIChycy5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICBVc2VyIHVzZXIgPSBuZXcgVXNlcigpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0VXNlcklkKHJzLmdldEludChcInVzZXJfaWRcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0VXNlcm5hbWUocnMuZ2V0U3RyaW5nKFwidXNlcm5hbWVcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0UGFzc3dvcmQocnMuZ2V0U3RyaW5nKFwicGFzc3dvcmRcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0Um9sZShycy5nZXRTdHJpbmcoXCJyb2xlXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldEltYWdlVXJsKHJzLmdldFN0cmluZyhcImltYWdlX3VybFwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRBY3RpdmUocnMuZ2V0Qm9vbGVhbihcImlzQWN0aXZlXCIpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdXNlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBEYXRhYmFzZVV0aWwuY2xvc2VSZXNvdXJjZXMocnMsIHN0bXQsIGNvbm4pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHB1YmxpYyBVc2VyIGZpbmRCeUVtYWlsKFN0cmluZyBlbWFpbCkge1xuICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgICAgICBQcmVwYXJlZFN0YXRlbWVudCBzdG10ID0gbnVsbDtcbiAgICAgICAgUmVzdWx0U2V0IHJzID0gbnVsbDtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gS2nhu4NtIHRyYSBlbWFpbCBjw7MgdOG7k24gdOG6oWkgdHJvbmcgYuG6o25nIFN0YWZmcyBraMO0bmdcbiAgICAgICAgICAgIGNvbm4gPSBEYXRhYmFzZVV0aWwuZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgICAgICAgU3RyaW5nIGNoZWNrU3FsID0gXCJTRUxFQ1QgKiBGUk9NIFN0YWZmcyBXSEVSRSBlbWFpbCA9ID9cIjtcbiAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoY2hlY2tTcWwpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMSwgZW1haWwpO1xuICAgICAgICAgICAgcnMgPSBzdG10LmV4ZWN1dGVRdWVyeSgpO1xuXG4gICAgICAgICAgICAvLyBO4bq/dSBlbWFpbCB04buTbiB04bqhaSwgbOG6pXkgdGjDtG5nIHRpbiB1c2VyXG4gICAgICAgICAgICBTdHJpbmcgc3FsID0gXCJTRUxFQ1QgdS4qIEZST00gVXNlcnMgdSBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICBcIkpPSU4gU3RhZmZzIHMgT04gdS51c2VyX2lkID0gcy51c2VyX2lkIFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiV0hFUkUgcy5lbWFpbCA9ID9cIjtcbiAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDEsIGVtYWlsKTtcblxuICAgICAgICAgICAgcnMgPSBzdG10LmV4ZWN1dGVRdWVyeSgpO1xuLi4uXG5QYXRoOiBzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9BZG1pbi9EYXNoYm9hcmQuZm9ybVxuLi4uXG5cbiAgPExheW91dD5cbiAgICA8RGltZW5zaW9uTGF5b3V0IGRpbT1cIjBcIj5cbiAgICAgIDxHcm91cCB0eXBlPVwiMTAzXCIgZ3JvdXBBbGlnbm1lbnQ9XCIwXCIgYXR0cmlidXRlcz1cIjBcIj5cbiAgICAgICAgICA8R3JvdXAgdHlwZT1cIjEwMlwiIGFsaWdubWVudD1cIjBcIiBhdHRyaWJ1dGVzPVwiMFwiPlxuICAgICAgICAgICAgICA8RW1wdHlTcGFjZSBtaW49XCItMlwiIHByZWY9XCIxODNcIiBtYXg9XCItMlwiIGF0dHJpYnV0ZXM9XCIwXCIvPlxuICAgICAgICAgICAgICA8R3JvdXAgdHlwZT1cIjEwM1wiIGdyb3VwQWxpZ25tZW50PVwiMFwiIGF0dHJpYnV0ZXM9XCIwXCI+XG4gICAgICAgICAgICAgICAgICA8R3JvdXAgdHlwZT1cIjEwMlwiIGF0dHJpYnV0ZXM9XCIwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPENvbXBvbmVudCBpZD1cImxiSGVsbG9cIiBtaW49XCItMlwiIG1heD1cIi0yXCIgYXR0cmlidXRlcz1cIjBcIi8+XG4gICAgICAgICAgICAgICAgICAgICAgPEVtcHR5U3BhY2UgbWF4PVwiLTJcIiBhdHRyaWJ1dGVzPVwiMFwiLz5cbiAgICAgICAgICAgICAgICAgICAgICA8Q29tcG9uZW50IGlkPVwibGJVc2VyTmFtZVwiIG1pbj1cIi0yXCIgbWF4PVwiLTJcIiBhdHRyaWJ1dGVzPVwiMFwiLz5cbiAgICAgICAgICAgICAgICAgIDwvR3JvdXA+XG4gICAgICAgICAgICAgICAgICA8R3JvdXAgdHlwZT1cIjEwM1wiIGdyb3VwQWxpZ25tZW50PVwiMFwiIG1heD1cIi0yXCIgYXR0cmlidXRlcz1cIjBcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8R3JvdXAgdHlwZT1cIjEwMlwiIGF0dHJpYnV0ZXM9XCIwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxHcm91cCB0eXBlPVwiMTAzXCIgZ3JvdXBBbGlnbm1lbnQ9XCIxLi4uIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiYzg1YTUzYjQtNWY2Yi00ODQwLThmOWMtMTY1Zjg0MzJlZGY5O3Rvb2x1XzAxWGdvWTJYQmM1bmdZTmVxVkJhS0dSZCI6eyJyZXF1ZXN0SWQiOiJjODVhNTNiNC01ZjZiLTQ4NDAtOGY5Yy0xNjVmODQzMmVkZjkiLCJ0b29sVXNlSWQiOiJ0b29sdV8wMVhnb1kyWEJjNW5nWU5lcVZCYUtHUmQiLCJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJUaGUgZm9sbG93aW5nIGNvZGUgc2VjdGlvbnMgd2VyZSByZXRyaWV2ZWQ6XG5QYXRoOiBzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9Mb2dpbi5qYXZhXG4vKlxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9MaWNlbnNlcy9saWNlbnNlLWRlZmF1bHQudHh0IHRvIGNoYW5nZSB0aGlzIGxpY2Vuc2VcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvR1VJRm9ybXMvSkZyYW1lLmphdmEgdG8gZWRpdCB0aGlzIHRlbXBsYXRlXG4gKi9cbnBhY2thZ2UgaW50ZXJuZXQubWFuZ2VtZW50LnN5c3RlbTtcblxuaW1wb3J0IERBTy5Vc2VyREFPO1xuaW1wb3J0IE1vZGVsLlVzZXI7XG5pbXBvcnQgamF2YXguc3dpbmcuSk9wdGlvblBhbmU7XG4uLi5cblxuICAgIHByaXZhdGUgdm9pZCBidG5Mb2dpbkFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5Mb2dpbkFjdGlvblBlcmZvcm1lZFxuICAgICAgICAvLyBUT0RPIGFkZCB5b3VyIGhhbmRsaW5nIGNvZGUgaGVyZTpcbiAgICAgICAgaWYodmFsaWRhdGVGaWVsZHMoKSkge1xuICAgICAgICAgICAgdHJ5e1xuICAgICAgICAgICAgICAgIFN0cmluZyB1c2VybmFtZSA9IHR4dFVzZXJOYW1lLmdldFRleHQoKS50cmltKCk7XG4gICAgICAgICAgICAgICAgU3RyaW5nIHBhc3N3b3JkID0gdHh0UGFzc3dvcmQuZ2V0VGV4dCgpLnRyaW0oKTtcblxuICAgICAgICAgICAgICAgIFVzZXIgdXNlciA9IG51bGw7XG4gICAgICAgICAgICAgICAgYm9vbGVhbiBpc1N1Y2Nlc3MgPSBVc2VyREFPLmxvZ2luKHVzZXJuYW1lLCBwYXNzd29yZCk7XG5cbiAgICAgICAgICAgICAgICBpZihpc1N1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2codGhpcywgXCLEkMSDbmcgbmjhuq1wIHRow6BuaCBjw7RuZyFcIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5JTkZPUk1BVElPTl9NRVNTQUdFKTtcbi8vICAgICAgICAgICAgICAgICAgICBuZXcgTWFpbkZyYW1lKCkuc2V0VmlzaWJsZSh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwb3NlKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2codGhpcywgXCJTYWkgdMOqbiDEkcSDbmcgbmjhuq1wIGhv4bq3YyBt4bqtdCBraOG6qXUuXCIsIFwiTOG7l2lcIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaChFeGNlcHRpb24gZXgpIHtcbiAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcIkzhu5dpOiBcIiArIGV4LmdldE1lc3NhZ2UoKSwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG5cbiAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5Mb2dpbkFjdGlvblBlcmZvcm1lZFxuXG4gICAgcHJpdmF0ZSB2b2lkIGJ0bkZvcmdvdFBhc3N3b3JkQWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkZvcmdvdFBhc3N3b3JkQWN0aW9uUGVyZm9ybWVkXG4gICAgICAgIC8vIE9wZW4gdGhlIEZvcmdvdFBhc3N3b3JkIGRpYWxvZ1xuICAgICAgICBGb3Jnb3RQYXNzd29yZCBmb3Jnb3RQYXNzd29yZERpYWxvZyA9IG5ldyBGb3Jnb3RQYXNzd29yZCh0aGlzLCB0cnVlKTtcbiAgICAgICAgZm9yZ290UGFzc3dvcmREaWFsb2cuc2V0VmlzaWJsZSh0cnVlKTtcbiAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5Gb3Jnb3RQYXNzd29yZEFjdGlvblBlcmZvcm1lZFxuXG4gICAgcHJpdmF0ZSB2b2lkIGJ0bkV4aXRBY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuRXhpdEFjdGlvblBlcmZvcm1lZFxuICAgICAgICAvLyBUT0RPIGFkZCB5b3VyIGhhbmRsaW5nIGNvZGUgaGVyZTpcbiAgICAgICAgaW50IHJlc3VsdCA9IEpPcHRpb25QYW5lLnNob3dDb25maXJtRGlhbG9nKG51bGwsIFwiQuG6oW4gY8OzIGNo4bqvYyBjaOG6r24gbXXhu5FuIHRob8OhdCBraMO0bmc/XCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuWUVTX05PX09QVElPTiwgSk9wdGlvblBhbmUuUVVFU1RJT05fTUVTU0FHRSk7XG5cbiAgICAgICAgaWYgKHJlc3VsdCA9PSBKT3B0aW9uUGFuZS5ZRVNfT1BUSU9OKSB7XG4gICAgICAgICAgICBTeXN0ZW0uZXhpdCgwKTtcbiAgICAgICAgfVxuICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0bkV4aXRBY3Rpb25QZXJmb3JtZWRcblxuICAgIHByaXZhdGUgdm9pZCBidG5TaWdudXBBY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuU2lnbnVwQWN0aW9uUGVyZm9ybWVkXG4gICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxuICAgICAgICBzZXRWaXNpYmxlKGZhbHNlKTtcbiAgICAgICAgbmV3IFNpZ25VcCgpLnNldFZpc2libGUodHJ1ZSk7XG4gICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuU2lnbnVwQWN0aW9uUGVyZm9ybWVkXG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvY29tL3N0b3JlL2FwcC9wZXRzdG9yZS9Db250cm9sbGVycy9Mb2dpbkNvbnRyb2xsZXIuamF2YVxuLi4uXG5cbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLkRBTy5Vc2VyREFPO1xuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuREFPLlN0YWZmREFPO1xuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuTW9kZWxzLkVudGl0aWVzLlVzZXI7XG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5Nb2RlbHMuRW50aXRpZXMuU3RhZmY7XG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5TZXNzaW9ucy5TZXNzaW9uTWFuYWdlcjtcbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLlZpZXdzLkFkbWluRmFjdG9yeTtcbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLlZpZXdzLlZpZXdGYWN0b3J5O1xuaW1wb3J0IGRlLmplbnNkLmZ4LmdseXBocy5mb250YXdlc29tZS5Gb250QXdlc29tZUljb247XG5pbXBvcnQgZGUuamVuc2QuZnguZ2x5cGhzLmZvbnRhd2Vzb21lLkZvbnRBd2Vzb21lSWNvblZpZXc7XG5pbXBvcnQgamF2YWZ4LmZ4bWwuRlhNTDtcbmltcG9ydCBqYXZhZnguZnhtbC5Jbml0aWFsaXphYmxlO1xuaW1wb3J0IGphdmFmeC5zY2VuZS5jb250cm9sLio7XG5pbXBvcnQgamF2YWZ4LnNjZW5lLmlucHV0Lk1vdXNlRXZlbnQ7XG5pbXBvcnQgamF2YWZ4LnN0YWdlLlN0YWdlO1xuaW1wb3J0IGphdmFmeC5zY2VuZS5pbWFnZS5JbWFnZTtcbmltcG9ydCBqYXZhZnguc2NlbmUuaW1hZ2UuSW1hZ2VWaWV3O1xuaW1wb3J0IGphdmFmeC5zY2VuZS5wYWludC5JbWFnZVBhdHRlcm47XG5pbXBvcnQgamF2YS51dGlsLk9iamVjdHM7XG4uLi5cblxucHVibGljIGNsYXNzIExvZ2luQ29udHJvbGxlciBpbXBsZW1lbnRzIEluaXRpYWxpemFibGUge1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIEZvbnRBd2Vzb21lSWNvblZpZXcgZXllSWNvbjtcblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBUZXh0RmllbGQgc2hvd1Bhc3N3b3JkO1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIFBhc3N3b3JkRmllbGQgcGFzc3dvcmRGaWVsZDtcblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBUZXh0RmllbGQgdXNlcm5hbWVGaWVsZDtcblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBCdXR0b24gbG9naW5CdXR0b247XG5cbiAgICBARlhNTFxuICAgIHByaXZhdGUgTGFiZWwgZXJyb3JMYWJlbDtcblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBIeXBlcmxpbmsgZm9yZ290UGFzc3dvcmRMaW5rO1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIEltYWdlVmlldyB1c2VySW1hZ2U7XG5cbiAgICBwcml2YXRlIGRvdWJsZSB4LCB5O1xuXG4gICAgVXNlckRBTyB1c2VyREFPID0gbmV3IFVzZXJEQU8oKTtcbiAgICBTdGFmZkRBTyBzdGFmZkRBTyA9IFN0YWZmREFPLmdldEluc3RhbmNlKCk7XG4gICAgcHVibGljIHN0YXRpYyBpbnQgaWRTdGFmZkN1cnJlbnQ7XG4gICAgcHVibGljIHN0YXRpYyBpbnQgaWRBZG1pbkN1cnJlbnQ7XG5cbiAgICBwcml2YXRlIFNlc3Npb25NYW5hZ2VyIHNlc3Npb25NYW5hZ2VyID0gbmV3IFNlc3Npb25NYW5hZ2VyKCk7XG4uLi5cblxuICAgIHByaXZhdGUgdm9pZCBzZXR1cExvZ2luQnV0dG9uKCkge1xuICAgICAgICBsb2dpbkJ1dHRvbi5zZXRPbkFjdGlvbihldmVudCAtPiBoYW5kbGVMb2dpbigpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHZvaWQgc2V0dXBGb3Jnb3RQYXNzd29yZExpbmsoKSB7XG4gICAgICAgIGZvcmdvdFBhc3N3b3JkTGluay5zZXRPbkFjdGlvbihldmVudCAtPiB7XG4gICAgICAgICAgICBTdGFnZSBjdXJyZW50U3RhZ2UgPSAoU3RhZ2UpIHVzZXJuYW1lRmllbGQuZ2V0U2NlbmUoKS5nZXRXaW5kb3coKTtcbiAgICAgICAgICAgIFZpZXdGYWN0b3J5LmdldEluc3RhbmNlKCkuc3dpdGNoQ29udGVudChcImZvcmdvdHBhc3N3b3JkXCIsIGN1cnJlbnRTdGFnZSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSB2b2lkIGhhbmRsZURyYWdnZWQoTW91c2VFdmVudCBldmVudCkge1xuICAgICAgICBTdGFnZSBzdGFnZSA9IChTdGFnZSkgdXNlcm5hbWVGaWVsZC5nZXRTY2VuZSgpLmdldFdpbmRvdygpO1xuICAgICAgICBzdGFnZS5zZXRYKGV2ZW50LmdldFNjcmVlblgoKSAtIHgpO1xuICAgICAgICBzdGFnZS5zZXRZKGV2ZW50LmdldFNjcmVlblkoKSAtIHkpO1xuICAgIH1cblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSB2b2lkIGhhbmRsZVByZXNzZWQoTW91c2VFdmVudCBldmVudCkge1xuICAgICAgICB4ID0gZXZlbnQuZ2V0U2NyZWVuWCgpO1xuICAgICAgICB5ID0gZXZlbnQuZ2V0U2NyZWVuWSgpO1xuICAgIH1cbi4uLlxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBUw6xtIHVzZXIgdGhlbyB1c2VybmFtZVxuICAgICAgICAgICAgVXNlciB1c2VyID0gdXNlckRBTy5maW5kQnlVc2VybmFtZSh1c2VybmFtZSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmKHVzZXIgPT0gbnVsbCB8fCB1c2VyLmdldFVzZXJuYW1lKCkgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIENvbnRyb2xsZXJVdGlscy5zaG93QWxlcnQoQWxlcnQuQWxlcnRUeXBlLkVSUk9SLCBcIkzhu5dpXCIsIFwiVMOqbiDEkcSDbmcgbmjhuq1wIGtow7RuZyDEkcO6bmdcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBLaeG7g20gdHJhIHTDqm4gxJHEg25nIG5o4bqtcFxuICAgICAgICAgICAgaWYgKCF1c2VyLmdldFVzZXJuYW1lKCkuZXF1YWxzKHVzZXJuYW1lKSkge1xuICAgICAgICAgICAgICAgIENvbnRyb2xsZXJVdGlscy5zaG93QWxlcnQoQWxlcnQuQWxlcnRUeXBlLkVSUk9SLCBcIkzhu5dpXCIsIFwiVMOqbiDEkcSDbmcgbmjhuq1wIGtow7RuZyDEkcO6bmdcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBLaeG7g20gdHJhIG3huq10IGto4bqpdVxuICAgICAgICAgICAgaWYoIUJDcnlwdC5jaGVja3B3KHBhc3N3b3JkLCB1c2VyLmdldFBhc3N3b3JkKCkpKSB7XG4gICAgICAgICAgICAgICAgQ29udHJvbGxlclV0aWxzLnNob3dBbGVydChBbGVydC5BbGVydFR5cGUuRVJST1IsIFwiTOG7l2lcIiwgXCJN4bqtdCBraOG6qXUga2jDtG5nIMSRw7puZ1wiKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNlc3Npb25NYW5hZ2VyLnNldEN1cnJlbnRVc2VyKHVzZXIpO1xuXG4gICAgICAgICAgICBTdGFnZSBjdXJyZW50U3RhZ2UgPSAoU3RhZ2UpIHVzZXJuYW1lRmllbGQuZ2V0U2NlbmUoKS5nZXRXaW5kb3coKTtcblxuICAgICAgICAgICAgaWYodXNlci5nZXRSb2xlKCkuZXF1YWxzKFVzZXIuUk9MRV9BRE1JTikpIHtcbiAgICAgICAgICAgICAgICBpZEFkbWluQ3VycmVudCA9IHVzZXIuZ2V0VXNlcklkKCk7XG4gICAgICAgICAgICAgICAgQWRtaW5GYWN0b3J5LmdldEluc3RhbmNlKCkuc3dpdGNoQ29udGVudChcImRhc2hib2FyZFwiLCBjdXJyZW50U3RhZ2UpO1xuICAgICAgICAgICAgfSBlbHNlIGlmKHVzZXIuZ2V0Um9sZSgpLmVxdWFscyhVc2VyLlJPTEVfVVNFUikpIHtcbiAgICAgICAgICAgICAgICBpZFN0YWZmQ3VycmVudCA9IHVzZXIuZ2V0VXNlcklkKCk7XG4gICAgICAgICAgICAgICAgU3RhZmYgc3RhZmYgPSBzdGFmZkRBTy5maW5kQnlVc2VySWQodXNlci5nZXRVc2VySWQoKSk7XG4gICAgICAgICAgICAgICAgaWYgKHN0YWZmICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbk1hbmFnZXIuc2V0Q3VycmVudFN0YWZmKHN0YWZmKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgVmlld0ZhY3RvcnkuZ2V0SW5zdGFuY2UoKS5zd2l0Y2hDb250ZW50KFwiZGFzaGJvYXJkXCIsIGN1cnJlbnRTdGFnZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIENvbnRyb2xsZXJVdGlscy5zaG93QWxlcnQoQWxlcnQuQWxlcnRUeXBlLkVSUk9SLCBcIkzhu5dpXCIsIFwiVmFpIHRyw7IgbmfGsOG7nWkgZMO5bmcga2jDtG5nIGjhu6NwIGzhu4dcIik7XG4gICAgICAgICAgICAgICAgc2Vzc2lvbk1hbmFnZXIuY2xlYXIoKTtcbiAgICAgICAgICAgIH1cbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9jb20vc3RvcmUvYXBwL3BldHN0b3JlL1BldFN0b3JlQXBwbGljYXRpb24uamF2YVxucGFja2FnZSBjb20uc3RvcmUuYXBwLnBldHN0b3JlO1xuXG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5Nb2RlbHMuRGF0YWJhc2VNYW5hZ2VyO1xuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuVmlld3MuTW9kZWxWaWV3O1xuaW1wb3J0IGphdmFmeC5hcHBsaWNhdGlvbi5BcHBsaWNhdGlvbjtcbmltcG9ydCBqYXZhZnguZnhtbC5GWE1MTG9hZGVyO1xuaW1wb3J0IGphdmFmeC5zY2VuZS5QYXJlbnQ7XG5pbXBvcnQgamF2YWZ4LnNjZW5lLlNjZW5lO1xuaW1wb3J0IGphdmFmeC5zdGFnZS5TdGFnZTtcblxuaW1wb3J0IGphdmEuaW8uSU9FeGNlcHRpb247XG5cbnB1YmxpYyBjbGFzcyBQZXRTdG9yZUFwcGxpY2F0aW9uIGV4dGVuZHMgQXBwbGljYXRpb24ge1xuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyB2b2lkIHN0YXJ0KFN0YWdlIHByaW1hcnlTdGFnZSkge1xuICAgICAgICBEYXRhYmFzZU1hbmFnZXIuY29ubmVjdCgpO1xuICAgICAgICBNb2RlbFZpZXcuZ2V0SW5zdGFuY2UoKS5nZXRWaWV3RmFjdG9yeSgpLnNob3dXaW5kb3coXCJsb2dpblwiKTtcbi4uLlxuUGF0aDogc3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vRm9yZ290UGFzc3dvcmQuamF2YVxuLypcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvTGljZW5zZXMvbGljZW5zZS1kZWZhdWx0LnR4dCB0byBjaGFuZ2UgdGhpcyBsaWNlbnNlXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0dVSUZvcm1zL0pGcmFtZS5qYXZhIHRvIGVkaXQgdGhpcyB0ZW1wbGF0ZVxuICovXG5wYWNrYWdlIGludGVybmV0Lm1hbmdlbWVudC5zeXN0ZW07XG5cbmltcG9ydCBEQU8uU3Vic2NyaWJlckRBTztcbmltcG9ydCBNb2RlbC5TdWJzY3JpYmVyO1xuaW1wb3J0IGphdmF4LnN3aW5nLkpPcHRpb25QYW5lO1xuaW1wb3J0IGludGVybmV0Lm1hbmdlbWVudC5zeXN0ZW0uTG9naW47XG4uLi5cblxuICAgIHByaXZhdGUgdm9pZCBidG5FeGl0QWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkV4aXRBY3Rpb25QZXJmb3JtZWRcbiAgICAgICAgLy8gVE9ETyBhZGQgeW91ciBoYW5kbGluZyBjb2RlIGhlcmU6XG4gICAgICAgIGludCByZXN1bHQgPSBKT3B0aW9uUGFuZS5zaG93Q29uZmlybURpYWxvZyhudWxsLCBcIkLhuqFuIGPDsyBjaOG6r2MgY2jhuq9uIG114buRbiB0aG/DoXQga2jDtG5nP1wiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLllFU19OT19PUFRJT04sIEpPcHRpb25QYW5lLlFVRVNUSU9OX01FU1NBR0UpO1xuXG4gICAgICAgIGlmIChyZXN1bHQgPT0gSk9wdGlvblBhbmUuWUVTX09QVElPTikge1xuICAgICAgICAgICAgbmV3IExvZ2luKCkuc2V0VmlzaWJsZSh0cnVlKTtcbiAgICAgICAgICAgIHRoaXMuZGlzcG9zZSgpO1xuICAgICAgICB9XG4gICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuRXhpdEFjdGlvblBlcmZvcm1lZFxuXG4gICAgcHJpdmF0ZSB2b2lkIGJ0bkNoZWNrQWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkNoZWNrQWN0aW9uUGVyZm9ybWVkXG4gICAgICAgIFN5c3RlbS5vdXQucHJpbnQoXCJIZWxsb1wiKTtcbiAgICAgICAgaWYgKHZhbGlkYXRlUGhvbmUoKSkge1xuICAgICAgICAgICAgU3RyaW5nIHBob25lID0gdHh0UGhvbmUuZ2V0VGV4dCgpO1xuICAgICAgICAgICAgY3VycmVudFN1YnNjcmliZXIgPSBTdWJzY3JpYmVyREFPLmdldEJ5UGhvbmUocGhvbmUpO1xuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL2NvbS9zdG9yZS9hcHAvcGV0c3RvcmUvREFPL1VzZXJEQU8uamF2YVxucGFja2FnZSBjb20uc3RvcmUuYXBwLnBldHN0b3JlLkRBTztcblxuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuTW9kZWxzLkVudGl0aWVzLlVzZXI7XG5pbXBvcnQgb3JnLm1pbmRyb3QuamJjcnlwdC5CQ3J5cHQ7XG5cbmltcG9ydCBqYXZhLnNxbC4qO1xuaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7XG5pbXBvcnQgamF2YS51dGlsLkJhc2U2NDtcblxucHVibGljIGNsYXNzIFVzZXJEQU8gaW1wbGVtZW50cyBCYXNlREFPPFVzZXIsIEludGVnZXI+IHtcbiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIGludCBpc0R1cGxpY2F0ZSA9IC0xO1xuXG4gICAgcHVibGljIHN0YXRpYyBVc2VyREFPIGdldEluc3RhbmNlKCkge1xuICAgICAgICByZXR1cm4gbmV3IFVzZXJEQU8oKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIFN0cmluZyBlbmNvZGUoU3RyaW5nIHBhc3N3b3JkKSB7XG4vLyAgICAgICAgcmV0dXJuIEJhc2U2NC5nZXRFbmNvZGVyKCkuZW5jb2RlVG9TdHJpbmcocGFzc3dvcmQuZ2V0Qnl0ZXMoKSk7XG4gICAgICAgIHJldHVybiBCQ3J5cHQuaGFzaHB3KHBhc3N3b3JkLCBCQ3J5cHQuZ2Vuc2FsdCgpKTtcbiAgICB9XG5cbi8vICAgIHB1YmxpYyBzdGF0aWMgU3RyaW5nIGRlY29kZShTdHJpbmcgcGFzc3dvcmQpIHtcbi8vICAgICAgICByZXR1cm4gbmV3IFN0cmluZyhCYXNlNjQuZ2V0RGVjb2RlcigpLmRlY29kZShwYXNzd29yZCkpO1xuLy8gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBib29sZWFuIHZlcmlmeShTdHJpbmcgcGFzc3dvcmQsIFN0cmluZyBoYXNoZWQpIHtcbiAgICAgICAgcmV0dXJuIEJDcnlwdC5jaGVja3B3KHBhc3N3b3JkLCBoYXNoZWQpO1xuICAgIH1cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBpbnQgaW5zZXJ0KFVzZXIgZW50aXR5KSB7XG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuICAgICAgICBSZXN1bHRTZXQgcnMgPSBudWxsO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25uID0gRGF0YWJhc2VVdGlsLmdldENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgIFN0cmluZyBzcWwgPSBcIklOU0VSVCBJTlRPIFVzZXJzICh1c2VybmFtZSwgcGFzc3dvcmQsIHJvbGUsIGltYWdlX3VybCwgaXNBY3RpdmUpIFZBTFVFUyAoPywgPywgPywgPywgPylcIjtcbiAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsLCBTdGF0ZW1lbnQuUkVUVVJOX0dFTkVSQVRFRF9LRVlTKTtcblxuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMSwgZW50aXR5LmdldFVzZXJuYW1lKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMiwgZW5jb2RlKGVudGl0eS5nZXRQYXNzd29yZCgpKSk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygzLCBlbnRpdHkuZ2V0Um9sZSgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDQsIGVudGl0eS5nZXRJbWFnZVVybCgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0Qm9vbGVhbig1LCBlbnRpdHkuaXNBY3RpdmUoKSk7XG5cbiAgICAgICAgICAgIGludCBhZmZlY3RlZFJvd3MgPSBzdG10LmV4ZWN1dGVVcGRhdGUoKTtcbiAgICAgICAgICAgIGlmIChhZmZlY3RlZFJvd3MgPT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0cnkgKFJlc3VsdFNldCBnZW5lcmF0ZWRLZXlzID0gc3RtdC5nZXRHZW5lcmF0ZWRLZXlzKCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoZ2VuZXJhdGVkS2V5cy5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdlbmVyYXRlZEtleXMuZ2V0SW50KDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgRGF0YWJhc2VVdGlsLmNsb3NlUmVzb3VyY2VzKHJzLCBzdG10LCBjb25uKTtcbiAgICAgICAgfVxuICAgIH1cbi4uLlxuXG4gICAgcHVibGljIFVzZXIgZmluZEJ5VXNlcm5hbWUoU3RyaW5nIHVzZXJuYW1lKSB7XG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuICAgICAgICBSZXN1bHRTZXQgcnMgPSBudWxsO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25uID0gRGF0YWJhc2VVdGlsLmdldENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgIFN0cmluZyBzcWwgPSBcIlNFTEVDVCAqIEZST00gVXNlcnMgV0hFUkUgdXNlcm5hbWUgPSA/XCI7XG4gICAgICAgICAgICBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHNxbCk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygxLCB1c2VybmFtZSk7XG4gICAgICAgICAgICBycyA9IHN0bXQuZXhlY3V0ZVF1ZXJ5KCk7XG5cbiAgICAgICAgICAgIGlmIChycy5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICBVc2VyIHVzZXIgPSBuZXcgVXNlcigpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0VXNlcklkKHJzLmdldEludChcInVzZXJfaWRcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0VXNlcm5hbWUocnMuZ2V0U3RyaW5nKFwidXNlcm5hbWVcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0UGFzc3dvcmQocnMuZ2V0U3RyaW5nKFwicGFzc3dvcmRcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0Um9sZShycy5nZXRTdHJpbmcoXCJyb2xlXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldEltYWdlVXJsKHJzLmdldFN0cmluZyhcImltYWdlX3VybFwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRBY3RpdmUocnMuZ2V0Qm9vbGVhbihcImlzQWN0aXZlXCIpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdXNlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBEYXRhYmFzZVV0aWwuY2xvc2VSZXNvdXJjZXMocnMsIHN0bXQsIGNvbm4pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9jb20vc3RvcmUvYXBwL3BldHN0b3JlL0NvbnRyb2xsZXJzL0FkbWluL0Rhc2hib2FyZENvbnRyb2xsZXIuamF2YVxuLi4uXG5cbiAgICBwcml2YXRlIHZvaWQgbmF2aWdhdGVUbyhTdHJpbmcgdmlld05hbWUpIHtcbiAgICAgICAgU3RhZ2UgY3VycmVudFN0YWdlID0gKFN0YWdlKSBsb2dvdXRCdXR0b24uZ2V0U2NlbmUoKS5nZXRXaW5kb3coKTtcbiAgICAgICAgQWRtaW5GYWN0b3J5LmdldEluc3RhbmNlKCkuc3dpdGNoQ29udGVudCh2aWV3TmFtZSwgY3VycmVudFN0YWdlKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHZvaWQgaGFuZGxlTG9nb3V0KCkge1xuICAgICAgICAvLyBTdG9wIGF1dG8tcmVmcmVzaCBpZiBhY3RpdmVcbiAgICAgICAgc3RvcEF1dG9SZWZyZXNoKCk7XG5cbiAgICAgICAgU3RhZ2UgY3VycmVudFN0YWdlID0gKFN0YWdlKSBsb2dvdXRCdXR0b24uZ2V0U2NlbmUoKS5nZXRXaW5kb3coKTtcbiAgICAgICAgaWYgKENvbnRyb2xsZXJVdGlscy5zaG93Q29uZmlybWF0aW9uQW5kV2FpdChcIsSQxINuZyB4deG6pXRcIiwgXCJC4bqhbiBjw7MgY2jhuq9jIGNo4bqvbiBtdeG7kW4gxJHEg25nIHh14bqldCBraMO0bmc/XFxuTmjhuqVuIE9LIMSR4buDIHjDoWMgbmjhuq1uLlwiKSkge1xuICAgICAgICAgICAgU2Vzc2lvbk1hbmFnZXIuY2xlYXIoKTtcbiAgICAgICAgICAgIFZpZXdGYWN0b3J5LmdldEluc3RhbmNlKCkuc3dpdGNoQ29udGVudChcImxvZ2luXCIsIGN1cnJlbnRTdGFnZSk7XG4gICAgICAgIH1cbiAgICB9XG5cblxufVxuLi4uXG5QYXRoOiBzcmMvbWFpbi9yZXNvdXJjZXMvRlhNTC9BZG1pbi9BZG1pbk1lbnUuZnhtbFxuLi4uXG5cbjxBbmNob3JQYW5lIGZ4OmlkPVwicm9vdFwiIHByZWZIZWlnaHQ9XCI3MC4wXCIgcHJlZldpZHRoPVwiOTkwLjBcIiBzdHlsZUNsYXNzPVwibmF2LWNvbnRhaW5lclwiIHN0eWxlc2hlZXRzPVwiQC4uLy4uL1N0eWxlcy9BZG1pbi9BZG1pbk1lbnUuY3NzXCIgeG1sbnM9XCJodHRwOi8vamF2YWZ4LmNvbS9qYXZhZngvMjMuMC4xXCIgeG1sbnM6Zng9XCJodHRwOi8vamF2YWZ4LmNvbS9meG1sLzFcIiBmeDpjb250cm9sbGVyPVwiY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5Db250cm9sbGVycy5BZG1pbi5BZG1pbk1lbnVDb250cm9sbGVyXCI+XG4gICA8Y2hpbGRyZW4+XG4gICAgICA8SW1hZ2VWaWV3IGZpdEhlaWdodD1cIjQwLjBcIiBmaXRXaWR0aD1cIjE1My4wXCIgbGF5b3V0WD1cIjI0LjBcIiBsYXlvdXRZPVwiMjEuMFwiIHBpY2tPbkJvdW5kcz1cInRydWVcIiBwcmVzZXJ2ZVJhdGlvPVwidHJ1ZVwiIEFuY2hvclBhbmUubGVmdEFuY2hvcj1cIjE1LjBcIiBBbmNob3JQYW5lLnRvcEFuY2hvcj1cIjE1LjBcIj5cbiAgICAgICAgIDxpbWFnZT5cbiAgICAgICAgICAgIDxJbWFnZSB1cmw9XCJALi4vLi4vSW1hZ2VzL2xvZ28xLnBuZ1wiIC8+XG4gICAgICAgICA8L2ltYWdlPlxuICAgICAgPC9JbWFnZVZpZXc+XG4gICAgICA8TGFiZWwgZng6aWQ9XCJ1c2VybmFtZUxhYmVsXCIgY29udGVudERpc3BsYXk9XCJSSUdIVFwiIGxheW91dFg9XCI4NTguMFwiIGxheW91dFk9XCIyMS4wXCIgc3R5bGVDbGFzcz1cImxhYmVsLXVzZXJuYW1lXCIgdGV4dD1cImFkbWluMTIzXCIgdGV4dEFsaWdubWVudD1cIlJJR0hUXCIgLz5cbiAgICAgIDxMYWJlbCBmeDppZD1cIm5hbWVMYWJlbFwiIGNvbnRlbnREaXNwbGF5PVwiUklHSFRcIiBsYXlvdXRYPVwiODQ1LjBcIiBsYXlvdXRZPVwiMzguMFwiIHN0eWxlQ2xhc3M9XCJsYWJlbC1uYW1lXCIgdGV4dD1cIlF14bqjbiB0cuG7iyB2acOqblwiIHRleHRBbGlnbm1lbnQ9XCJSSUdIVFwiIC8+XG4gICAgICA8Q2lyY2xlIGZ4OmlkPVwidXNlckltYWdlXCIgZmlsbD1cIkRPREdFUkJMVUVcIiBsYXlvdXRYPVwiOTU2LjBcIiBsYXlvdXRZPVwiMzUuMFwiIHJhZGl1cz1cIjIwLjBcIiBzdHJva2U9XCJCTEFDS1wiIHN0cm9rZVR5cGU9XCJJTlNJREVcIiBzdHlsZUNsYXNzPVwidXNlci1pbWFnZVwiIEFuY2hvclBhbmUucmlnaHRBbmNob3I9XCIxOC4wXCIgQW5jaG9yUGFuZS50b3BBbmNob3I9XCIxOC4wXCIgLz5cbiAgICAgIDxNZW51QmFyIGZ4OmlkPVwibWVudUJhclwiIGxheW91dFg9XCIyNDUuMFwiIGxheW91dFk9XCIyNC4wXCIgcHJlZkhlaWdodD1cIjM2LjBcIiBwcmVmV2lkdGg9XCI1ODAuMFwiPlxuICAgICAgICA8bWVudXM+XG4gICAgICAgICAgICA8TWVudSBmeDppZD1cIm1lbnVIb21lXCIgbW5lbW9uaWNQYXJzaW5nPVwiZmFsc2VcIiB0ZXh0PVwiVHJhbmcgY2jhu6dcIiAvPlxuICAgICAgICAgIDxNZW51IGZ4OmlkPVwibWVudVN0YXRpc3RpY3NcIiBtbmVtb25pY1BhcnNpbmc9XCJmYWxzZVwiIHRleHQ9XCJUaOG7kW5nIGvDqlwiPlxuICAgICAgICAgICAgPGl0ZW1zPlxuICAgICAgICAgICAgICAgICAgPE1lbnVJdGVtIGZ4OmlkPVwibWVudUl0ZW1PdmVydmlld1wiIG1uZW1vbmljUGFyc2luZz1cImZhbHNlXCIgdGV4dD1cIlThu5VuZyBxdcOhdFwiIC8+XG4gICAgICAgICAgICAgIDxNZW51SXRlbSBmeDppZD1cIm1lbnVJdGVtUmV2ZW51ZVwiIG1uZW1vbmljUGFyc2luZz1cImZhbHNlXCIgdGV4dD1cIkRvYW5oIHRodVwiIC8+XG4uLi5cbiAgICAgICAgICAgIDxNZW51IGZ4OmlkPVwibWVudVJlcG9ydHNcIiBtbmVtb25pY1BhcnNpbmc9XCJmYWxzZVwiIHRleHQ9XCJCw6FvIGPDoW9cIiAvPlxuICAgICAgICAgICAgPE1lbnUgZng6aWQ9XCJtZW51TG9nb3V0XCIgbW5lbW9uaWNQYXJzaW5nPVwiZmFsc2VcIiB0ZXh0PVwixJDEg25nIHh14bqldFwiIC8+XG4gICAgICAgIDwvbWVudXM+XG4gICAgICAgICA8Y3Vyc29yPlxuICAgICAgICAgICAgPEN1cnNvciBmeDpjb25zdGFudD1cIkhBTkRcIiAvPlxuICAgICAgICAgPC9jdXJzb3I+XG4gICAgICA8L01lbnVCYXI+XG4gICA8L2NoaWxkcmVuPlxuPC9BbmNob3JQYW5lPlxuLi4uXG5QYXRoOiBzcmMvREFPL1VzZXJEQU8uamF2YVxuLypcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvTGljZW5zZXMvbGljZW5zZS1kZWZhdWx0LnR4dCB0byBjaGFuZ2UgdGhpcyBsaWNlbnNlXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ2xhc3MuamF2YSB0byBlZGl0IHRoaXMgdGVtcGxhdGVcbiAqL1xucGFja2FnZSBEQU87XG5cbmltcG9ydCBNb2RlbC5Vc2VyO1xuaW1wb3J0IGphdmEudXRpbC5MaXN0O1xuXG4vKipcbiAqXG4gKiBAYXV0aG9yIE5nb2MgVGhhb1xuICovXG5wdWJsaWMgY2xhc3MgVXNlckRBT3tcblxuICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBpbnNlcnQoVXNlciBvYmopIHtcbiAgICAgICAgXG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyB2b2lkIHVwZGF0ZShVc2VyIG9iaikge1xuICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oXCJOb3Qgc3VwcG9ydGVkIHlldC5cIik7IC8vIEdlbmVyYXRlZCBmcm9tIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9Db2RlL0dlbmVyYXRlZE1ldGhvZEJvZHlcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIHZvaWQgZGVsZXRlKGludCBpZCkge1xuICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oXCJOb3Qgc3VwcG9ydGVkIHlldC5cIik7IC8vIEdlbmVyYXRlZCBmcm9tIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9Db2RlL0dlbmVyYXRlZE1ldGhvZEJvZHlcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIFVzZXIgZ2V0QnlJZChpbnQgaWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpOyAvLyBHZW5lcmF0ZWQgZnJvbSBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ29kZS9HZW5lcmF0ZWRNZXRob2RCb2R5XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBMaXN0PFVzZXI+IGdldEFsbCgpIHtcbiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpOyAvLyBHZW5lcmF0ZWQgZnJvbSBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ29kZS9HZW5lcmF0ZWRNZXRob2RCb2R5XG4gICAgfVxuICAgIFxufVxuLi4uXG5QYXRoOiBzcmMvbWFpbi9yZXNvdXJjZXMvRlhNTC9BZG1pbi9EYXNoYm9hcmQuZnhtbFxuLi4uXG5cbjxWQm94IHByZWZIZWlnaHQ9XCI1MTIuMFwiIHByZWZXaWR0aD1cIjk5MC4wXCIgc3R5bGVzaGVldHM9XCJALi4vLi4vU3R5bGVzL0FkbWluL0Rhc2hib2FyZC5jc3NcIiB4bWxucz1cImh0dHA6Ly9qYXZhZnguY29tL2phdmFmeC8yMy4wLjFcIiB4bWxuczpmeD1cImh0dHA6Ly9qYXZhZnguY29tL2Z4bWwvMVwiIGZ4OmNvbnRyb2xsZXI9XCJjb20uc3RvcmUuYXBwLnBldHN0b3JlLkNvbnRyb2xsZXJzLkFkbWluLkRhc2hib2FyZENvbnRyb2xsZXJcIj5cbiAgICA8Y2hpbGRyZW4+XG4gICAgICAgIDxmeDppbmNsdWRlIHNvdXJjZT1cIkFkbWluTWVudS5meG1sXCIgLz5cbiAgICAgICAgPFNjcm9sbFBhbmUgZml0VG9XaWR0aD1cInRydWVcIiBwcmVmSGVpZ2h0PVwiNDQyLjBcIiBwcmVmV2lkdGg9XCI5OTAuMFwiIHN0eWxlQ2xhc3M9XCJkYXNoYm9hcmQtY29udGFpbmVyXCI+XG4gICAgICAgICAgICA8Y29udGVudD5cbiAgICAgICAgICAgICAgICA8VkJveCBzcGFjaW5nPVwiMjAuMFwiPlxuICAgICAgICAgICAgICAgICAgICA8cGFkZGluZz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxJbnNldHMgYm90dG9tPVwiMjAuMFwiIGxlZnQ9XCIyMC4wXCIgcmlnaHQ9XCIyMC4wXCIgdG9wPVwiMjAuMFwiIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvcGFkZGluZz5cbiAgICAgICAgICAgICAgICAgICAgPGNoaWxkcmVuPlxuICAgICAgICAgICAgICAgICAgICAgICAgPCEtLSBXZWxjb21lIFNlY3Rpb24gLS0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8SEJveCBhbGlnbm1lbnQ9XCJDRU5URVJcIiBzdHlsZUNsYXNzPVwid2VsY29tZS1zZWN0aW9uXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGNoaWxkcmVuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8TGFiZWwgc3R5bGVDbGFzcz1cIndlbGNvbWUtdGV4dFwiIHRleHQ9XCJYaW4gY2jDoG8gUXXhuqNuIHRy4buLIHZpw6puXCIgSEJveC5oZ3Jvdz1cIkFMV0FZU1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGZvbnQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvbnQgbmFtZT1cIlN5c3RlbSBCb2xkXCIgc2l6ZT1cIjI0LjBcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9mb250PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEhCb3gubWFyZ2luPlxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL2NvbS9zdG9yZS9hcHAvcGV0c3RvcmUvVmlld3MvQWRtaW5GYWN0b3J5LmphdmFcbi4uLlxuXG4gICAgcHVibGljIHZvaWQgc2hvd1dpbmRvdyhTdHJpbmcgZnhtbE5hbWUpIHtcbiAgICAgICAgU3RhZ2Ugc3RhZ2UgPSBuZXcgU3RhZ2UoKTtcbiAgICAgICAgUGFyZW50IHJvb3QgPSBudWxsO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgc3dpdGNoIChmeG1sTmFtZS50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBcImRhc2hib2FyZFwiOlxuICAgICAgICAgICAgICAgICAgICByb290ID0gbG9hZEZYTUwoREFTSEJPQVJEX0ZYTUwpO1xuICAgICAgICAgICAgICAgICAgICBzdGFnZS5zZXRUaXRsZShcIkLhuqNuZyDEkWnhu4F1IGtoaeG7g24gQWRtaW5cIik7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJ1c2VybWFuYWdlbWVudFwiOlxuICAgICAgICAgICAgICAgICAgICByb290ID0gbG9hZEZYTUwoVVNFUk1BTkFHRU1FTlRfRlhNTCk7XG4gICAgICAgICAgICAgICAgICAgIHN0YWdlLnNldFRpdGxlKFwiUXXhuqNuIGzDvSB0w6BpIGtob+G6o25cIik7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJjdXN0b21lcm1hbmFnZW1lbnRcIjpcbiAgICAgICAgICAgICAgICAgICAgcm9vdCA9IGxvYWRGWE1MKENVU1RPTUVSTUFOQUdFTUVOVF9GWE1MKTtcbiAgICAgICAgICAgICAgICAgICAgc3RhZ2Uuc2V0VGl0bGUoXCJRdeG6o24gbMO9IGtow6FjaCBow6BuZ1wiKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcImRpc2NvdW50bWFuYWdlbWVudFwiOlxuICAgICAgICAgICAgICAgICAgICByb290ID0gbG9hZEZYTUwoRElTQ09VTlRNQU5BR0VNRU5UX0ZYTUwpO1xuICAgICAgICAgICAgICAgICAgICBzdGFnZS5zZXRUaXRsZShcIlF14bqjbiBsw70ga2h1eeG6v24gbcOjaVwiKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcInBldG1hbmFnZW1lbnRcIjpcbiAgICAgICAgICAgICAgICAgICAgcm9vdCA9IGxvYWRGWE1MKFBFVE1BTkFHRU1FTlRfRlhNTCk7XG4gICAgICAgICAgICAgICAgICAgIHN0YWdlLnNldFRpdGxlKFwiUXXhuqNuIGzDvSB0aMO6IGPGsG5nXCIpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwicHJvZHVjdG1hbmFnZW1lbnRcIjpcbiAgICAgICAgICAgICAgICAgICAgcm9vdCA9IGxvYWRGWE1MKFBST0RVQ1RNQU5BR0VNRU5UX0ZYTUwpO1xuICAgICAgICAgICAgICAgICAgICBzdGFnZS5zZXRUaXRsZShcIlF14bqjbiBsw70gc+G6o24gcGjhuqltXCIpO1xuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL2NvbS9zdG9yZS9hcHAvcGV0c3RvcmUvQ29udHJvbGxlcnMvQWRtaW4vQWRtaW5NZW51Q29udHJvbGxlci5qYXZhXG4uLi5cblxucHVibGljIGNsYXNzIEFkbWluTWVudUNvbnRyb2xsZXIgaW1wbGVtZW50cyBJbml0aWFsaXphYmxlIHtcbiAgICBARlhNTFxuICAgIHByaXZhdGUgTWVudUJhciBtZW51QmFyO1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIE1lbnUgbWVudUhvbWU7XG5cbiAgICBARlhNTFxuICAgIHByaXZhdGUgTWVudUl0ZW0gbWVudUl0ZW1BY2NvdW50cztcblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBNZW51SXRlbSBtZW51SXRlbUJlc3RTZWxsaW5nO1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIE1lbnVJdGVtIG1lbnVJdGVtQ3VzdG9tZXJzO1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIE1lbnVJdGVtIG1lbnVJdGVtRGlzY291bnRzO1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIE1lbnVJdGVtIG1lbnVJdGVtT3ZlcnZpZXc7XG5cbiAgICBARlhNTFxuICAgIHByaXZhdGUgTWVudUl0ZW0gbWVudUl0ZW1QZXRzO1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIE1lbnVJdGVtIG1lbnVJdGVtUHJvZHVjdHM7XG5cbiAgICBARlhNTFxuICAgIHByaXZhdGUgTWVudUl0ZW0gbWVudUl0ZW1SZXZlbnVlO1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIE1lbnVJdGVtIG1lbnVJdGVtU3RhZmY7XG5cbiAgICBARlhNTFxuICAgIHByaXZhdGUgTWVudSBtZW51TG9nb3V0O1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIE1lbnUgbWVudU1hbmFnZW1lbnQ7XG5cbiAgICBARlhNTFxuICAgIHByaXZhdGUgTWVudSBtZW51UmVwb3J0cztcblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBNZW51IG1lbnVSZXZlbnVlO1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIE1lbnUgbWVudVN0YXRpc3RpY3M7XG5cbiAgICBARlhNTFxuICAgIHByaXZhdGUgTGFiZWwgbmFtZUxhYmVsO1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIEFuY2hvclBhbmUgcm9vdDtcblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBDaXJjbGUgdXNlckltYWdlO1xuLi4uXG5QYXRoOiBzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9BZG1pbi9EYXNoYm9hcmQuamF2YVxuLi4uXG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gYXJncyB0aGUgY29tbWFuZCBsaW5lIGFyZ3VtZW50c1xuICAgICAqL1xuICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBtYWluKFN0cmluZyBhcmdzW10pIHtcbiAgICAgICAgLyogU2V0IHRoZSBOaW1idXMgbG9vayBhbmQgZmVlbCAqL1xuICAgICAgICAvLzxlZGl0b3ItZm9sZCBkZWZhdWx0c3RhdGU9XCJjb2xsYXBzZWRcIiBkZXNjPVwiIExvb2sgYW5kIGZlZWwgc2V0dGluZyBjb2RlIChvcHRpb25hbCkgXCI+XG4gICAgICAgIC8qIElmIE5pbWJ1cyAoaW50cm9kdWNlZCBpbiBKYXZhIFNFIDYpIGlzIG5vdCBhdmFpbGFibGUsIHN0YXkgd2l0aCB0aGUgZGVmYXVsdCBsb29rIGFuZCBmZWVsLlxuICAgICAgICAgKiBGb3IgZGV0YWlscyBzZWUgaHR0cDovL2Rvd25sb2FkLm9yYWNsZS5jb20vamF2YXNlL3R1dG9yaWFsL3Vpc3dpbmcvbG9va2FuZGZlZWwvcGxhZi5odG1sIFxuICAgICAgICAgKi9cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGZvciAoamF2YXguc3dpbmcuVUlNYW5hZ2VyLkxvb2tBbmRGZWVsSW5mbyBpbmZvIDogamF2YXguc3dpbmcuVUlNYW5hZ2VyLmdldEluc3RhbGxlZExvb2tBbmRGZWVscygpKSB7XG4gICAgICAgICAgICAgICAgaWYgKFwiTmltYnVzXCIuZXF1YWxzKGluZm8uZ2V0TmFtZSgpKSkge1xuICAgICAgICAgICAgICAgICAgICBqYXZheC5zd2luZy5VSU1hbmFnZXIuc2V0TG9va0FuZEZlZWwoaW5mby5nZXRDbGFzc05hbWUoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbi4uLlxuICAgICAgICAvLzwvZWRpdG9yLWZvbGQ+XG5cbiAgICAgICAgLyogQ3JlYXRlIGFuZCBkaXNwbGF5IHRoZSBmb3JtICovXG4gICAgICAgIGphdmEuYXd0LkV2ZW50UXVldWUuaW52b2tlTGF0ZXIobmV3IFJ1bm5hYmxlKCkuLi4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCI1MGE4YzViNC0wYmE3LTQwNjMtODAwMy1hZmM2NDJiNzhiZTY7dG9vbHVfMDE5NjNaTTRUYXh4RGhYV0NEaHlGZFBQIjp7InJlcXVlc3RJZCI6IjUwYThjNWI0LTBiYTctNDA2My04MDAzLWFmYzY0MmI3OGJlNiIsInRvb2xVc2VJZCI6InRvb2x1XzAxOTYzWk00VGF4eERoWFdDRGh5RmRQUCIsInBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IlRoZSBmb2xsb3dpbmcgY29kZSBzZWN0aW9ucyB3ZXJlIHJldHJpZXZlZDpcblBhdGg6IHNyYy9tYWluL2phdmEvY29tL3N0b3JlL2FwcC9wZXRzdG9yZS9Db250cm9sbGVycy9Mb2dpbkNvbnRyb2xsZXIuamF2YVxuLi4uXG5cbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLkRBTy5Vc2VyREFPO1xuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuREFPLlN0YWZmREFPO1xuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuTW9kZWxzLkVudGl0aWVzLlVzZXI7XG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5Nb2RlbHMuRW50aXRpZXMuU3RhZmY7XG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5TZXNzaW9ucy5TZXNzaW9uTWFuYWdlcjtcbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLlZpZXdzLkFkbWluRmFjdG9yeTtcbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLlZpZXdzLlZpZXdGYWN0b3J5O1xuaW1wb3J0IGRlLmplbnNkLmZ4LmdseXBocy5mb250YXdlc29tZS5Gb250QXdlc29tZUljb247XG5pbXBvcnQgZGUuamVuc2QuZnguZ2x5cGhzLmZvbnRhd2Vzb21lLkZvbnRBd2Vzb21lSWNvblZpZXc7XG5pbXBvcnQgamF2YWZ4LmZ4bWwuRlhNTDtcbmltcG9ydCBqYXZhZnguZnhtbC5Jbml0aWFsaXphYmxlO1xuaW1wb3J0IGphdmFmeC5zY2VuZS5jb250cm9sLio7XG5pbXBvcnQgamF2YWZ4LnNjZW5lLmlucHV0Lk1vdXNlRXZlbnQ7XG5pbXBvcnQgamF2YWZ4LnN0YWdlLlN0YWdlO1xuaW1wb3J0IGphdmFmeC5zY2VuZS5pbWFnZS5JbWFnZTtcbmltcG9ydCBqYXZhZnguc2NlbmUuaW1hZ2UuSW1hZ2VWaWV3O1xuaW1wb3J0IGphdmFmeC5zY2VuZS5wYWludC5JbWFnZVBhdHRlcm47XG5pbXBvcnQgamF2YS51dGlsLk9iamVjdHM7XG4uLi5cblxucHVibGljIGNsYXNzIExvZ2luQ29udHJvbGxlciBpbXBsZW1lbnRzIEluaXRpYWxpemFibGUge1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIEZvbnRBd2Vzb21lSWNvblZpZXcgZXllSWNvbjtcblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBUZXh0RmllbGQgc2hvd1Bhc3N3b3JkO1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIFBhc3N3b3JkRmllbGQgcGFzc3dvcmRGaWVsZDtcblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBUZXh0RmllbGQgdXNlcm5hbWVGaWVsZDtcblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBCdXR0b24gbG9naW5CdXR0b247XG5cbiAgICBARlhNTFxuICAgIHByaXZhdGUgTGFiZWwgZXJyb3JMYWJlbDtcblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBIeXBlcmxpbmsgZm9yZ290UGFzc3dvcmRMaW5rO1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIEltYWdlVmlldyB1c2VySW1hZ2U7XG5cbiAgICBwcml2YXRlIGRvdWJsZSB4LCB5O1xuXG4gICAgVXNlckRBTyB1c2VyREFPID0gbmV3IFVzZXJEQU8oKTtcbiAgICBTdGFmZkRBTyBzdGFmZkRBTyA9IFN0YWZmREFPLmdldEluc3RhbmNlKCk7XG4gICAgcHVibGljIHN0YXRpYyBpbnQgaWRTdGFmZkN1cnJlbnQ7XG4gICAgcHVibGljIHN0YXRpYyBpbnQgaWRBZG1pbkN1cnJlbnQ7XG5cbiAgICBwcml2YXRlIFNlc3Npb25NYW5hZ2VyIHNlc3Npb25NYW5hZ2VyID0gbmV3IFNlc3Npb25NYW5hZ2VyKCk7XG4uLi5cblxuICAgIHByaXZhdGUgdm9pZCBzZXR1cExvZ2luQnV0dG9uKCkge1xuICAgICAgICBsb2dpbkJ1dHRvbi5zZXRPbkFjdGlvbihldmVudCAtPiBoYW5kbGVMb2dpbigpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHZvaWQgc2V0dXBGb3Jnb3RQYXNzd29yZExpbmsoKSB7XG4gICAgICAgIGZvcmdvdFBhc3N3b3JkTGluay5zZXRPbkFjdGlvbihldmVudCAtPiB7XG4gICAgICAgICAgICBTdGFnZSBjdXJyZW50U3RhZ2UgPSAoU3RhZ2UpIHVzZXJuYW1lRmllbGQuZ2V0U2NlbmUoKS5nZXRXaW5kb3coKTtcbiAgICAgICAgICAgIFZpZXdGYWN0b3J5LmdldEluc3RhbmNlKCkuc3dpdGNoQ29udGVudChcImZvcmdvdHBhc3N3b3JkXCIsIGN1cnJlbnRTdGFnZSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSB2b2lkIGhhbmRsZURyYWdnZWQoTW91c2VFdmVudCBldmVudCkge1xuICAgICAgICBTdGFnZSBzdGFnZSA9IChTdGFnZSkgdXNlcm5hbWVGaWVsZC5nZXRTY2VuZSgpLmdldFdpbmRvdygpO1xuICAgICAgICBzdGFnZS5zZXRYKGV2ZW50LmdldFNjcmVlblgoKSAtIHgpO1xuICAgICAgICBzdGFnZS5zZXRZKGV2ZW50LmdldFNjcmVlblkoKSAtIHkpO1xuICAgIH1cblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSB2b2lkIGhhbmRsZVByZXNzZWQoTW91c2VFdmVudCBldmVudCkge1xuICAgICAgICB4ID0gZXZlbnQuZ2V0U2NyZWVuWCgpO1xuICAgICAgICB5ID0gZXZlbnQuZ2V0U2NyZWVuWSgpO1xuICAgIH1cbi4uLlxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBUw6xtIHVzZXIgdGhlbyB1c2VybmFtZVxuICAgICAgICAgICAgVXNlciB1c2VyID0gdXNlckRBTy5maW5kQnlVc2VybmFtZSh1c2VybmFtZSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmKHVzZXIgPT0gbnVsbCB8fCB1c2VyLmdldFVzZXJuYW1lKCkgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIENvbnRyb2xsZXJVdGlscy5zaG93QWxlcnQoQWxlcnQuQWxlcnRUeXBlLkVSUk9SLCBcIkzhu5dpXCIsIFwiVMOqbiDEkcSDbmcgbmjhuq1wIGtow7RuZyDEkcO6bmdcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBLaeG7g20gdHJhIHTDqm4gxJHEg25nIG5o4bqtcFxuICAgICAgICAgICAgaWYgKCF1c2VyLmdldFVzZXJuYW1lKCkuZXF1YWxzKHVzZXJuYW1lKSkge1xuICAgICAgICAgICAgICAgIENvbnRyb2xsZXJVdGlscy5zaG93QWxlcnQoQWxlcnQuQWxlcnRUeXBlLkVSUk9SLCBcIkzhu5dpXCIsIFwiVMOqbiDEkcSDbmcgbmjhuq1wIGtow7RuZyDEkcO6bmdcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBLaeG7g20gdHJhIG3huq10IGto4bqpdVxuICAgICAgICAgICAgaWYoIUJDcnlwdC5jaGVja3B3KHBhc3N3b3JkLCB1c2VyLmdldFBhc3N3b3JkKCkpKSB7XG4gICAgICAgICAgICAgICAgQ29udHJvbGxlclV0aWxzLnNob3dBbGVydChBbGVydC5BbGVydFR5cGUuRVJST1IsIFwiTOG7l2lcIiwgXCJN4bqtdCBraOG6qXUga2jDtG5nIMSRw7puZ1wiKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNlc3Npb25NYW5hZ2VyLnNldEN1cnJlbnRVc2VyKHVzZXIpO1xuXG4gICAgICAgICAgICBTdGFnZSBjdXJyZW50U3RhZ2UgPSAoU3RhZ2UpIHVzZXJuYW1lRmllbGQuZ2V0U2NlbmUoKS5nZXRXaW5kb3coKTtcblxuICAgICAgICAgICAgaWYodXNlci5nZXRSb2xlKCkuZXF1YWxzKFVzZXIuUk9MRV9BRE1JTikpIHtcbiAgICAgICAgICAgICAgICBpZEFkbWluQ3VycmVudCA9IHVzZXIuZ2V0VXNlcklkKCk7XG4gICAgICAgICAgICAgICAgQWRtaW5GYWN0b3J5LmdldEluc3RhbmNlKCkuc3dpdGNoQ29udGVudChcImRhc2hib2FyZFwiLCBjdXJyZW50U3RhZ2UpO1xuICAgICAgICAgICAgfSBlbHNlIGlmKHVzZXIuZ2V0Um9sZSgpLmVxdWFscyhVc2VyLlJPTEVfVVNFUikpIHtcbiAgICAgICAgICAgICAgICBpZFN0YWZmQ3VycmVudCA9IHVzZXIuZ2V0VXNlcklkKCk7XG4gICAgICAgICAgICAgICAgU3RhZmYgc3RhZmYgPSBzdGFmZkRBTy5maW5kQnlVc2VySWQodXNlci5nZXRVc2VySWQoKSk7XG4gICAgICAgICAgICAgICAgaWYgKHN0YWZmICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbk1hbmFnZXIuc2V0Q3VycmVudFN0YWZmKHN0YWZmKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgVmlld0ZhY3RvcnkuZ2V0SW5zdGFuY2UoKS5zd2l0Y2hDb250ZW50KFwiZGFzaGJvYXJkXCIsIGN1cnJlbnRTdGFnZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIENvbnRyb2xsZXJVdGlscy5zaG93QWxlcnQoQWxlcnQuQWxlcnRUeXBlLkVSUk9SLCBcIkzhu5dpXCIsIFwiVmFpIHRyw7IgbmfGsOG7nWkgZMO5bmcga2jDtG5nIGjhu6NwIGzhu4dcIik7XG4gICAgICAgICAgICAgICAgc2Vzc2lvbk1hbmFnZXIuY2xlYXIoKTtcbiAgICAgICAgICAgIH1cbi4uLlxuUGF0aDogc3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vTG9naW4uamF2YVxuLypcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvTGljZW5zZXMvbGljZW5zZS1kZWZhdWx0LnR4dCB0byBjaGFuZ2UgdGhpcyBsaWNlbnNlXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0dVSUZvcm1zL0pGcmFtZS5qYXZhIHRvIGVkaXQgdGhpcyB0ZW1wbGF0ZVxuICovXG5wYWNrYWdlIGludGVybmV0Lm1hbmdlbWVudC5zeXN0ZW07XG5cbmltcG9ydCBEQU8uVXNlckRBTztcbmltcG9ydCBNb2RlbC5Vc2VyO1xuaW1wb3J0IGphdmF4LnN3aW5nLkpPcHRpb25QYW5lO1xuXG4vKipcbiAqXG4gKiBAYXV0aG9yIE5nb2MgVGhhb1xuICovXG5wdWJsaWMgY2xhc3MgTG9naW4gZXh0ZW5kcyBqYXZheC5zd2luZy5KRnJhbWUge1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBuZXcgZm9ybSBMb2dpblxuICAgICAqL1xuICAgIHB1YmxpYyBMb2dpbigpIHtcbiAgICAgICAgaW5pdENvbXBvbmVudHMoKTtcbiAgICAgICAgc2V0VGl0bGUoXCLEkMSDbmcga8O9XCIpO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIGNsZWFyKCl7XG4gICAgICAgIHR4dFVzZXJOYW1lLnNldFRleHQoXCJcIik7XG4gICAgICAgIHR4dFBhc3N3b3JkLnNldFRleHQoXCJcIik7XG4gICAgfVxuXG4gICAgcHVibGljIGJvb2xlYW4gdmFsaWRhdGVGaWVsZHMoKXtcbiAgICAgICAgU3RyaW5nIHVzZXJOYW1lID0gdHh0VXNlck5hbWUuZ2V0VGV4dCgpO1xuICAgICAgICBTdHJpbmcgcGFzc3dvcmQgPSB0eHRQYXNzd29yZC5nZXRUZXh0KCk7XG5cbiAgICAgICAgaWYodXNlck5hbWUuaXNFbXB0eSgpIHx8IHBhc3N3b3JkLmlzRW1wdHkoKSl7XG4gICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcIlZ1aSBsw7JuZyBraMO0bmcgYuG7jyB0cuG7kW5nIVwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbi4uLlxuXG4gICAgcHJpdmF0ZSB2b2lkIGJ0bkxvZ2luQWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkxvZ2luQWN0aW9uUGVyZm9ybWVkXG4gICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxuICAgICAgICBpZih2YWxpZGF0ZUZpZWxkcygpKSB7XG4gICAgICAgICAgICB0cnl7XG4gICAgICAgICAgICAgICAgU3RyaW5nIHVzZXJuYW1lID0gdHh0VXNlck5hbWUuZ2V0VGV4dCgpLnRyaW0oKTtcbiAgICAgICAgICAgICAgICBTdHJpbmcgcGFzc3dvcmQgPSB0eHRQYXNzd29yZC5nZXRUZXh0KCkudHJpbSgpO1xuXG4gICAgICAgICAgICAgICAgVXNlciB1c2VyID0gbnVsbDtcbiAgICAgICAgICAgICAgICBib29sZWFuIGlzU3VjY2VzcyA9IFVzZXJEQU8ubG9naW4odXNlcm5hbWUsIHBhc3N3b3JkKTtcblxuICAgICAgICAgICAgICAgIGlmKGlzU3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyh0aGlzLCBcIsSQxINuZyBuaOG6rXAgdGjDoG5oIGPDtG5nIVwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLklORk9STUFUSU9OX01FU1NBR0UpO1xuLy8gICAgICAgICAgICAgICAgICAgIG5ldyBNYWluRnJhbWUoKS5zZXRWaXNpYmxlKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyh0aGlzLCBcIlNhaSB0w6puIMSRxINuZyBuaOG6rXAgaG/hurdjIG3huq10IGto4bqpdS5cIiwgXCJM4buXaVwiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoKEV4Y2VwdGlvbiBleCkge1xuICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwiTOG7l2k6IFwiICsgZXguZ2V0TWVzc2FnZSgpLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cblxuICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0bkxvZ2luQWN0aW9uUGVyZm9ybWVkXG5cbiAgICBwcml2YXRlIHZvaWQgYnRuRm9yZ290UGFzc3dvcmRBY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuRm9yZ290UGFzc3dvcmRBY3Rpb25QZXJmb3JtZWRcbiAgICAgICAgLy8gT3BlbiB0aGUgRm9yZ290UGFzc3dvcmQgZGlhbG9nXG4gICAgICAgIEZvcmdvdFBhc3N3b3JkIGZvcmdvdFBhc3N3b3JkRGlhbG9nID0gbmV3IEZvcmdvdFBhc3N3b3JkKHRoaXMsIHRydWUpO1xuICAgICAgICBmb3Jnb3RQYXNzd29yZERpYWxvZy5zZXRWaXNpYmxlKHRydWUpO1xuICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0bkZvcmdvdFBhc3N3b3JkQWN0aW9uUGVyZm9ybWVkXG5cbiAgICBwcml2YXRlIHZvaWQgYnRuRXhpdEFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5FeGl0QWN0aW9uUGVyZm9ybWVkXG4gICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxuICAgICAgICBpbnQgcmVzdWx0ID0gSk9wdGlvblBhbmUuc2hvd0NvbmZpcm1EaWFsb2cobnVsbCwgXCJC4bqhbiBjw7MgY2jhuq9jIGNo4bqvbiBtdeG7kW4gdGhvw6F0IGtow7RuZz9cIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5ZRVNfTk9fT1BUSU9OLCBKT3B0aW9uUGFuZS5RVUVTVElPTl9NRVNTQUdFKTtcblxuICAgICAgICBpZiAocmVzdWx0ID09IEpPcHRpb25QYW5lLllFU19PUFRJT04pIHtcbiAgICAgICAgICAgIFN5c3RlbS5leGl0KDApO1xuICAgICAgICB9XG4gICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuRXhpdEFjdGlvblBlcmZvcm1lZFxuXG4gICAgcHJpdmF0ZSB2b2lkIGJ0blNpZ251cEFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5TaWdudXBBY3Rpb25QZXJmb3JtZWRcbiAgICAgICAgLy8gVE9ETyBhZGQgeW91ciBoYW5kbGluZyBjb2RlIGhlcmU6XG4gICAgICAgIHNldFZpc2libGUoZmFsc2UpO1xuICAgICAgICBuZXcgU2lnblVwKCkuc2V0VmlzaWJsZSh0cnVlKTtcbiAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5TaWdudXBBY3Rpb25QZXJmb3JtZWRcbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9jb20vc3RvcmUvYXBwL3BldHN0b3JlL0NvbnRyb2xsZXJzL0FkbWluL0Rhc2hib2FyZENvbnRyb2xsZXIuamF2YVxuLi4uXG5cbiAgICBwcml2YXRlIHZvaWQgbmF2aWdhdGVUbyhTdHJpbmcgdmlld05hbWUpIHtcbiAgICAgICAgU3RhZ2UgY3VycmVudFN0YWdlID0gKFN0YWdlKSBsb2dvdXRCdXR0b24uZ2V0U2NlbmUoKS5nZXRXaW5kb3coKTtcbiAgICAgICAgQWRtaW5GYWN0b3J5LmdldEluc3RhbmNlKCkuc3dpdGNoQ29udGVudCh2aWV3TmFtZSwgY3VycmVudFN0YWdlKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHZvaWQgaGFuZGxlTG9nb3V0KCkge1xuICAgICAgICAvLyBTdG9wIGF1dG8tcmVmcmVzaCBpZiBhY3RpdmVcbiAgICAgICAgc3RvcEF1dG9SZWZyZXNoKCk7XG5cbiAgICAgICAgU3RhZ2UgY3VycmVudFN0YWdlID0gKFN0YWdlKSBsb2dvdXRCdXR0b24uZ2V0U2NlbmUoKS5nZXRXaW5kb3coKTtcbiAgICAgICAgaWYgKENvbnRyb2xsZXJVdGlscy5zaG93Q29uZmlybWF0aW9uQW5kV2FpdChcIsSQxINuZyB4deG6pXRcIiwgXCJC4bqhbiBjw7MgY2jhuq9jIGNo4bqvbiBtdeG7kW4gxJHEg25nIHh14bqldCBraMO0bmc/XFxuTmjhuqVuIE9LIMSR4buDIHjDoWMgbmjhuq1uLlwiKSkge1xuICAgICAgICAgICAgU2Vzc2lvbk1hbmFnZXIuY2xlYXIoKTtcbiAgICAgICAgICAgIFZpZXdGYWN0b3J5LmdldEluc3RhbmNlKCkuc3dpdGNoQ29udGVudChcImxvZ2luXCIsIGN1cnJlbnRTdGFnZSk7XG4gICAgICAgIH1cbiAgICB9XG5cblxufVxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL2NvbS9zdG9yZS9hcHAvcGV0c3RvcmUvUGV0U3RvcmVBcHBsaWNhdGlvbi5qYXZhXG5wYWNrYWdlIGNvbS5zdG9yZS5hcHAucGV0c3RvcmU7XG5cbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLk1vZGVscy5EYXRhYmFzZU1hbmFnZXI7XG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5WaWV3cy5Nb2RlbFZpZXc7XG5pbXBvcnQgamF2YWZ4LmFwcGxpY2F0aW9uLkFwcGxpY2F0aW9uO1xuaW1wb3J0IGphdmFmeC5meG1sLkZYTUxMb2FkZXI7XG5pbXBvcnQgamF2YWZ4LnNjZW5lLlBhcmVudDtcbmltcG9ydCBqYXZhZnguc2NlbmUuU2NlbmU7XG5pbXBvcnQgamF2YWZ4LnN0YWdlLlN0YWdlO1xuXG5pbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlvbjtcblxucHVibGljIGNsYXNzIFBldFN0b3JlQXBwbGljYXRpb24gZXh0ZW5kcyBBcHBsaWNhdGlvbiB7XG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIHZvaWQgc3RhcnQoU3RhZ2UgcHJpbWFyeVN0YWdlKSB7XG4gICAgICAgIERhdGFiYXNlTWFuYWdlci5jb25uZWN0KCk7XG4gICAgICAgIE1vZGVsVmlldy5nZXRJbnN0YW5jZSgpLmdldFZpZXdGYWN0b3J5KCkuc2hvd1dpbmRvdyhcImxvZ2luXCIpO1xuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL2NvbS9zdG9yZS9hcHAvcGV0c3RvcmUvQ29udHJvbGxlcnMvQWRtaW4vQWRtaW5NZW51Q29udHJvbGxlci5qYXZhXG4uLi5cblxuICAgICAgICBNZW51SXRlbSBsb2dvdXRNZW51SXRlbSA9IG5ldyBNZW51SXRlbShcIsSQxINuZyB4deG6pXRcIik7XG4gICAgICAgIGxvZ291dE1lbnVJdGVtLnNldE9uQWN0aW9uKGUgLT4gaGFuZGxlTG9nb3V0KG51bGwpKTtcbiAgICAgICAgbWVudUxvZ291dC5nZXRJdGVtcygpLmFkZChsb2dvdXRNZW51SXRlbSk7XG4gICAgfVxuXG4gICAgQEZYTUxcbiAgICB2b2lkIGhhbmRsZUxvZ291dChBY3Rpb25FdmVudCBldmVudCkge1xuICAgICAgICBTdGFnZSBjdXJyZW50U3RhZ2UgPSAoU3RhZ2UpIHJvb3QuZ2V0U2NlbmUoKS5nZXRXaW5kb3coKTtcbiAgICAgICAgaWYgKENvbnRyb2xsZXJVdGlscy5zaG93Q29uZmlybWF0aW9uQW5kV2FpdChcIsSQxINuZyB4deG6pXRcIiwgXCJC4bqhbiBjw7MgY2jhuq9jIGNo4bqvbiBtdeG7kW4gxJHEg25nIHh14bqldCBraMO0bmc/XFxuTmjhuqVuIE9LIMSR4buDIHjDoWMgbmjhuq1uLlwiKSkge1xuICAgICAgICAgICAgU2Vzc2lvbk1hbmFnZXIuY2xlYXIoKTtcbiAgICAgICAgICAgIFZpZXdGYWN0b3J5LmdldEluc3RhbmNlKCkuc3dpdGNoQ29udGVudChcImxvZ2luXCIsIGN1cnJlbnRTdGFnZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBDb250cm9sbGVyVXRpbHMuc2hvd0FsZXJ0KEFsZXJ0LkFsZXJ0VHlwZS5JTkZPUk1BVElPTiwgXCJUaMO0bmcgYsOhb1wiLCBcIsSQxINuZyB4deG6pXQga2jDtG5nIHRow6BuaCBjw7RuZ1wiKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi4uLlxuUGF0aDogc3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vRm9yZ290UGFzc3dvcmQuamF2YVxuLi4uXG5cbiAgICBwcml2YXRlIHZvaWQgYnRuRXhpdEFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5FeGl0QWN0aW9uUGVyZm9ybWVkXG4gICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxuICAgICAgICBpbnQgcmVzdWx0ID0gSk9wdGlvblBhbmUuc2hvd0NvbmZpcm1EaWFsb2cobnVsbCwgXCJC4bqhbiBjw7MgY2jhuq9jIGNo4bqvbiBtdeG7kW4gdGhvw6F0IGtow7RuZz9cIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5ZRVNfTk9fT1BUSU9OLCBKT3B0aW9uUGFuZS5RVUVTVElPTl9NRVNTQUdFKTtcblxuICAgICAgICBpZiAocmVzdWx0ID09IEpPcHRpb25QYW5lLllFU19PUFRJT04pIHtcbiAgICAgICAgICAgIG5ldyBMb2dpbigpLnNldFZpc2libGUodHJ1ZSk7XG4gICAgICAgICAgICB0aGlzLmRpc3Bvc2UoKTtcbiAgICAgICAgfVxuICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0bkV4aXRBY3Rpb25QZXJmb3JtZWRcblxuICAgIHByaXZhdGUgdm9pZCBidG5DaGVja0FjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5DaGVja0FjdGlvblBlcmZvcm1lZFxuICAgICAgICBTeXN0ZW0ub3V0LnByaW50KFwiSGVsbG9cIik7XG4gICAgICAgIGlmICh2YWxpZGF0ZVBob25lKCkpIHtcbiAgICAgICAgICAgIFN0cmluZyBwaG9uZSA9IHR4dFBob25lLmdldFRleHQoKTtcbiAgICAgICAgICAgIGN1cnJlbnRTdWJzY3JpYmVyID0gU3Vic2NyaWJlckRBTy5nZXRCeVBob25lKHBob25lKTtcbi4uLlxuUGF0aDogc3JjL0RBTy9Vc2VyREFPLmphdmFcbi8qXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0xpY2Vuc2VzL2xpY2Vuc2UtZGVmYXVsdC50eHQgdG8gY2hhbmdlIHRoaXMgbGljZW5zZVxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NsYXNzLmphdmEgdG8gZWRpdCB0aGlzIHRlbXBsYXRlXG4gKi9cbnBhY2thZ2UgREFPO1xuXG5pbXBvcnQgTW9kZWwuVXNlcjtcbmltcG9ydCBqYXZhLnV0aWwuTGlzdDtcblxuLyoqXG4gKlxuICogQGF1dGhvciBOZ29jIFRoYW9cbiAqL1xucHVibGljIGNsYXNzIFVzZXJEQU97XG5cbiAgICBwdWJsaWMgc3RhdGljIHZvaWQgaW5zZXJ0KFVzZXIgb2JqKSB7XG4gICAgICAgIFxuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgdm9pZCB1cGRhdGUoVXNlciBvYmopIHtcbiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpOyAvLyBHZW5lcmF0ZWQgZnJvbSBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ29kZS9HZW5lcmF0ZWRNZXRob2RCb2R5XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyB2b2lkIGRlbGV0ZShpbnQgaWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpOyAvLyBHZW5lcmF0ZWQgZnJvbSBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ29kZS9HZW5lcmF0ZWRNZXRob2RCb2R5XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBVc2VyIGdldEJ5SWQoaW50IGlkKSB7XG4gICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbihcIk5vdCBzdXBwb3J0ZWQgeWV0LlwiKTsgLy8gR2VuZXJhdGVkIGZyb20gbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NvZGUvR2VuZXJhdGVkTWV0aG9kQm9keVxuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxVc2VyPiBnZXRBbGwoKSB7XG4gICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbihcIk5vdCBzdXBwb3J0ZWQgeWV0LlwiKTsgLy8gR2VuZXJhdGVkIGZyb20gbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NvZGUvR2VuZXJhdGVkTWV0aG9kQm9keVxuICAgIH1cbiAgICBcbn1cbi4uLlxuUGF0aDogc3JjL21haW4vcmVzb3VyY2VzL0ZYTUwvQWRtaW4vQWRtaW5NZW51LmZ4bWxcbi4uLlxuXG48QW5jaG9yUGFuZSBmeDppZD1cInJvb3RcIiBwcmVmSGVpZ2h0PVwiNzAuMFwiIHByZWZXaWR0aD1cIjk5MC4wXCIgc3R5bGVDbGFzcz1cIm5hdi1jb250YWluZXJcIiBzdHlsZXNoZWV0cz1cIkAuLi8uLi9TdHlsZXMvQWRtaW4vQWRtaW5NZW51LmNzc1wiIHhtbG5zPVwiaHR0cDovL2phdmFmeC5jb20vamF2YWZ4LzIzLjAuMVwiIHhtbG5zOmZ4PVwiaHR0cDovL2phdmFmeC5jb20vZnhtbC8xXCIgZng6Y29udHJvbGxlcj1cImNvbS5zdG9yZS5hcHAucGV0c3RvcmUuQ29udHJvbGxlcnMuQWRtaW4uQWRtaW5NZW51Q29udHJvbGxlclwiPlxuICAgPGNoaWxkcmVuPlxuICAgICAgPEltYWdlVmlldyBmaXRIZWlnaHQ9XCI0MC4wXCIgZml0V2lkdGg9XCIxNTMuMFwiIGxheW91dFg9XCIyNC4wXCIgbGF5b3V0WT1cIjIxLjBcIiBwaWNrT25Cb3VuZHM9XCJ0cnVlXCIgcHJlc2VydmVSYXRpbz1cInRydWVcIiBBbmNob3JQYW5lLmxlZnRBbmNob3I9XCIxNS4wXCIgQW5jaG9yUGFuZS50b3BBbmNob3I9XCIxNS4wXCI+XG4gICAgICAgICA8aW1hZ2U+XG4gICAgICAgICAgICA8SW1hZ2UgdXJsPVwiQC4uLy4uL0ltYWdlcy9sb2dvMS5wbmdcIiAvPlxuICAgICAgICAgPC9pbWFnZT5cbiAgICAgIDwvSW1hZ2VWaWV3PlxuICAgICAgPExhYmVsIGZ4OmlkPVwidXNlcm5hbWVMYWJlbFwiIGNvbnRlbnREaXNwbGF5PVwiUklHSFRcIiBsYXlvdXRYPVwiODU4LjBcIiBsYXlvdXRZPVwiMjEuMFwiIHN0eWxlQ2xhc3M9XCJsYWJlbC11c2VybmFtZVwiIHRleHQ9XCJhZG1pbjEyM1wiIHRleHRBbGlnbm1lbnQ9XCJSSUdIVFwiIC8+XG4uLi5cblBhdGg6IHNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL0FkbWluL0Rhc2hib2FyZC5qYXZhXG4vKlxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9MaWNlbnNlcy9saWNlbnNlLWRlZmF1bHQudHh0IHRvIGNoYW5nZSB0aGlzIGxpY2Vuc2VcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvR1VJRm9ybXMvSkZyYW1lLmphdmEgdG8gZWRpdCB0aGlzIHRlbXBsYXRlXG4gKi9cbnBhY2thZ2UgaW50ZXJuZXQubWFuZ2VtZW50LnN5c3RlbS5BZG1pbjtcblxuaW1wb3J0IE1vZGVsLlVzZXI7XG5pbXBvcnQgaW50ZXJuZXQubWFuZ2VtZW50LnN5c3RlbS5TZXNzaW9uLlVzZXJTZXNzaW9uO1xuaW1wb3J0IGphdmEudGltZS5Mb2NhbFRpbWU7XG5pbXBvcnQgamF2YXguc3dpbmcuSk9wdGlvblBhbmU7XG5cbi8qKlxuICpcbiAqIEBhdXRob3IgTmdvYyBUaGFvXG4gKi9cbnB1YmxpYyBjbGFzcyBEYXNoYm9hcmQgZXh0ZW5kcyBqYXZheC5zd2luZy5KRnJhbWUge1xuXG4gICAgVXNlciBhZG1pbiA9IFVzZXJTZXNzaW9uLmdldEN1cnJlbnRVc2VyKCk7XG4gICAgXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBuZXcgZm9ybSBEYXNoYm9hcmRcbiAgICAgKi9cbiAgICBwdWJsaWMgRGFzaGJvYXJkKCkge1xuICAgICAgICBpbml0Q29tcG9uZW50cygpO1xuICAgICAgICBzZXR1cEhlbGxvKCk7XG4gICAgICAgIHNldHVwVXNlcm5hbWUoKTtcbiAgICB9XG4gICAgXG4gICAgcHJpdmF0ZSB2b2lkIHNldHVwSGVsbG8oKSB7XG4gICAgICAgIExvY2FsVGltZSBub3cgPSBMb2NhbFRpbWUubm93KCk7XG4gICAgICAgIGludCBob3VyID0gbm93LmdldEhvdXIoKTtcbiAgICAgICAgXG4gICAgICAgIFN0cmluZyBncmVldGluZztcblxuICAgICAgICBpZiAoaG91ciA+PSA1ICYmIGhvdXIgPCAxMSkge1xuICAgICAgICAgICAgZ3JlZXRpbmcgPSBcIkNow6BvIGJ14buVaSBzw6FuZyxcIjtcbiAgICAgICAgfSBlbHNlIGlmIChob3VyID49IDExICYmIGhvdXIgPCAxNSkge1xuICAgICAgICAgICAgZ3JlZXRpbmcgPSBcIkNow6BvIGJ14buVaSB0csawYSxcIjtcbiAgICAgICAgfSBlbHNlIGlmIChob3VyID49IDE1ICYmIGhvdXIgPCAxNykge1xuICAgICAgICAgICAgZ3JlZXRpbmcgPSBcIkNow6BvIGJ14buVaSBjaGnhu4F1LFwiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZ3JlZXRpbmcgPSBcIkNow6BvIGJ14buVaSB04buRaSxcIjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgbGJIZWxsby5zZXRUZXh0KGdyZWV0aW5nKTtcbiAgICB9XG4gICAgXG4gICAgcHJpdmF0ZSB2b2lkIHNldHVwVXNlcm5hbWUoKSB7XG4gICAgICAgIGxiVXNlck5hbWUuc2V0VGV4dChhZG1pbi5nZXRVc2VybmFtZSgpKTtcbiAgICB9XG4uLi5cblxuICAgICAgICBqYXZheC5zd2luZy5Hcm91cExheW91dCBsYXlvdXQgPSBuZXcgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQoZ2V0Q29udGVudFBhbmUoKSk7XG4gICAgICAgIGdldENvbnRlbnRQYW5lKCkuc2V0TGF5b3V0KGxheW91dCk7XG4gICAgICAgIGxheW91dC5zZXRIb3Jpem9udGFsR3JvdXAoXG4gICAgICAgICAgICBsYXlvdXQuY3JlYXRlUGFyYWxsZWxHcm91cChqYXZheC5zd2luZy5Hcm91cExheW91dC5BbGlnbm1lbnQuTEVBRElORylcbiAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlU2VxdWVudGlhbEdyb3VwKClcbiAgICAgICAgICAgICAgICAuYWRkR2FwKDE4MywgMTgzLCAxODMpXG4gICAgICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVQYXJhbGxlbEdyb3VwKGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LkFsaWdubWVudC5MRUFESU5HKVxuICAgICAgICAgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVNlcXVlbnRpYWxHcm91cCgpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGxiSGVsbG8pXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkUHJlZmVycmVkR2FwKGphdmF4LnN3aW5nLkxheW91dFN0eWxlLkNvbXBvbmVudFBsYWNlbWVudC5SRUxBVEVEKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChsYlVzZXJOYW1lKSlcbiAgICAgICAgICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVQYXJhbGxlbEdyb3VwKGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LkFsaWdubWVudC5MRUFESU5HLCBmYWxzZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlU2VxdWVudGlhbEdyb3VwKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVBhcmFsbGVsR3JvdXAoamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuQWxpZ25tZW50LlRSQUlMSU5HLCBmYWxzZSlcbi4uLlxuICAgICAgICAvLzwvZWRpdG9yLWZvbGQ+XG5cbiAgICAgICAgLyogQ3JlYXRlIGFuZCBkaXNwbGF5IHRoZSBmb3JtICovXG4gICAgICAgIGphdmEuYXd0LkV2ZW50UXVldWUuaW52b2tlTGF0ZXIobmV3IFJ1bm5hYmxlKCkge1xuICAgICAgICAgICAgcHVibGljIHZvaWQgcnVuKCkge1xuICAgICAgICAgICAgICAgIG5ldyBEYXNoYm9hcmQoKS5zZXRWaXNpYmxlKHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBWYXJpYWJsZXMgZGVjbGFyYXRpb24gLSBkbyBub3QgbW9kaWZ5Ly9HRU4tQkVHSU46dmFyaWFibGVzXG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KQnV0dG9uIGJ0bkNvbnRyYWN0O1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkJ1dHRvbiBidG5DdXN0b21lcjtcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpCdXR0b24gYnRuRXhpdDtcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpCdXR0b24gYnRuSGlzdG9yeTtcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpCdXR0b24gYnRuUGxhbjtcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpCdXR0b24gYnRuU3RhdGlzdGljO1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkJ1dHRvbiBidG5Vc2VyO1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSlNlcGFyYXRvciBqU2VwYXJhdG9yMTtcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpMYWJlbCBsYkhlbGxvO1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkxhYmVsIGxiVXNlck5hbWU7XG4gICAgLy8gRW5kIG9mIHZhcmlhYmxlcyBkZWNsYXJhdGlvbi8vR0VOLUVORDp2YXJpYWJsZXNcbn1cbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9jb20vc3RvcmUvYXBwL3BldHN0b3JlL1ZpZXdzL0FkbWluRmFjdG9yeS5qYXZhXG4uLi5cblxuICAgIHB1YmxpYyB2b2lkIHNob3dXaW5kb3coU3RyaW5nIGZ4bWxOYW1lKSB7XG4gICAgICAgIFN0YWdlIHN0YWdlID0gbmV3IFN0YWdlKCk7XG4gICAgICAgIFBhcmVudCByb290ID0gbnVsbDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHN3aXRjaCAoZnhtbE5hbWUudG9Mb3dlckNhc2UoKSkge1xuICAgICAgICAgICAgICAgIGNhc2UgXCJkYXNoYm9hcmRcIjpcbiAgICAgICAgICAgICAgICAgICAgcm9vdCA9IGxvYWRGWE1MKERBU0hCT0FSRF9GWE1MKTtcbiAgICAgICAgICAgICAgICAgICAgc3RhZ2Uuc2V0VGl0bGUoXCJC4bqjbmcgxJFp4buBdSBraGnhu4NuIEFkbWluXCIpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwidXNlcm1hbmFnZW1lbnRcIjpcbiAgICAgICAgICAgICAgICAgICAgcm9vdCA9IGxvYWRGWE1MKFVTRVJNQU5BR0VNRU5UX0ZYTUwpO1xuICAgICAgICAgICAgICAgICAgICBzdGFnZS5zZXRUaXRsZShcIlF14bqjbiBsw70gdMOgaSBraG/huqNuXCIpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiY3VzdG9tZXJtYW5hZ2VtZW50XCI6XG4gICAgICAgICAgICAgICAgICAgIHJvb3QgPSBsb2FkRlhNTChDVVNUT01FUk1BTkFHRU1FTlRfRlhNTCk7XG4gICAgICAgICAgICAgICAgICAgIHN0YWdlLnNldFRpdGxlKFwiUXXhuqNuIGzDvSBraMOhY2ggaMOgbmdcIik7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJkaXNjb3VudG1hbmFnZW1lbnRcIjpcbiAgICAgICAgICAgICAgICAgICAgcm9vdCA9IGxvYWRGWE1MKERJU0NPVU5UTUFOQUdFTUVOVF9GWE1MKTtcbiAgICAgICAgICAgICAgICAgICAgc3RhZ2Uuc2V0VGl0bGUoXCJRdeG6o24gbMO9IGtodXnhur9uIG3Do2lcIik7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJwZXRtYW5hZ2VtZW50XCI6XG4gICAgICAgICAgICAgICAgICAgIHJvb3QgPSBsb2FkRlhNTChQRVRNQU5BR0VNRU5UX0ZYTUwpO1xuICAgICAgICAgICAgICAgICAgICBzdGFnZS5zZXRUaXRsZShcIlF14bqjbiBsw70gdGjDuiBjxrBuZ1wiKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcInByb2R1Y3RtYW5hZ2VtZW50XCI6XG4gICAgICAgICAgICAgICAgICAgIHJvb3QgPSBsb2FkRlhNTChQUk9EVUNUTUFOQUdFTUVOVF9GWE1MKTtcbiAgICAgICAgICAgICAgICAgICAgc3RhZ2Uuc2V0VGl0bGUoXCJRdeG6o24gbMO9IHPhuqNuIHBo4bqpbVwiKTtcbi4uLlxuUGF0aDogc3JjL21haW4vcmVzb3VyY2VzL0ZYTUwvQWRtaW4vRGFzaGJvYXJkLmZ4bWxcbi4uLlxuXG48VkJveCBwcmVmSGVpZ2h0PVwiNTEyLjBcIiBwcmVmV2lkdGg9XCI5OTAuMFwiIHN0eWxlc2hlZXRzPVwiQC4uLy4uL1N0eWxlcy9BZG1pbi9EYXNoYm9hcmQuY3NzXCIgeG1sbnM9XCJodHRwOi8vamF2YWZ4LmNvbS9qYXZhZngvMjMuMC4xXCIgeG1sbnM6Zng9XCJodHRwOi8vamF2YWZ4LmNvbS9meG1sLzFcIiBmeDpjb250cm9sbGVyPVwiY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5Db250cm9sbGVycy5BZG1pbi5EYXNoYm9hcmRDb250cm9sbGVyXCI+XG4gICAgPGNoaWxkcmVuPlxuICAgICAgICA8Zng6aW5jbHVkZSBzb3VyY2U9XCJBZG1pbk1lbnUuZnhtbFwiIC8+XG4gICAgICAgIDxTY3JvbGxQYW5lIGZpdFRvV2lkdGg9XCJ0cnVlXCIgcHJlZkhlaWdodD1cIjQ0Mi4wXCIgcHJlZldpZHRoPVwiOTkwLjBcIiBzdHlsZUNsYXNzPVwiZGFzaGJvYXJkLWNvbnRhaW5lclwiPlxuICAgICAgICAgICAgPGNvbnRlbnQ+XG4gICAgICAgICAgICAgICAgPFZCb3ggc3BhY2luZz1cIjIwLjBcIj5cbiAgICAgICAgICAgICAgICAgICAgPHBhZGRpbmc+XG4gICAgICAgICAgICAgICAgICAgICAgICA8SW5zZXRzIGJvdHRvbT1cIjIwLjBcIiBsZWZ0PVwiMjAuMFwiIHJpZ2h0PVwiMjAuMFwiIHRvcD1cIjIwLjBcIiAvPlxuICAgICAgICAgICAgICAgICAgICA8L3BhZGRpbmc+XG4gICAgICAgICAgICAgICAgICAgIDxjaGlsZHJlbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwhLS0gV2VsY29tZSBTZWN0aW9uIC0tPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEhCb3ggYWxpZ25tZW50PVwiQ0VOVEVSXCIgc3R5bGVDbGFzcz1cIndlbGNvbWUtc2VjdGlvblwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxjaGlsZHJlbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPExhYmVsIHN0eWxlQ2xhc3M9XCJ3ZWxjb21lLXRleHRcIiB0ZXh0PVwiWGluIGNow6BvIFF14bqjbiB0cuG7iyB2acOqblwiIEhCb3guaGdyb3c9XCJBTFdBWVNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxmb250PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb250IG5hbWU9XCJTeXN0ZW0gQm9sZFwiIHNpemU9XCIyNC4wXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZm9udD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxIQm94Lm1hcmdpbj5cbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9jb20vc3RvcmUvYXBwL3BldHN0b3JlL0RBTy9Vc2VyREFPLmphdmFcbnBhY2thZ2UgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5EQU87XG5cbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLk1vZGVscy5FbnRpdGllcy5Vc2VyO1xuaW1wb3J0IG9yZy5taW5kcm90LmpiY3J5cHQuQkNyeXB0O1xuXG5pbXBvcnQgamF2YS5zcWwuKjtcbmltcG9ydCBqYXZhLnV0aWwuQXJyYXlMaXN0O1xuaW1wb3J0IGphdmEudXRpbC5CYXNlNjQ7XG5cbnB1YmxpYyBjbGFzcyBVc2VyREFPIGltcGxlbWVudHMgQmFzZURBTzxVc2VyLCBJbnRlZ2VyPiB7XG4gICAgcHVibGljIHN0YXRpYyBmaW5hbCBpbnQgaXNEdXBsaWNhdGUgPSAtMTtcblxuICAgIHB1YmxpYyBzdGF0aWMgVXNlckRBTyBnZXRJbnN0YW5jZSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBVc2VyREFPKCk7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBTdHJpbmcgZW5jb2RlKFN0cmluZyBwYXNzd29yZCkge1xuLy8gICAgICAgIHJldHVybiBCYXNlNjQuZ2V0RW5jb2RlcigpLmVuY29kZVRvU3RyaW5nKHBhc3N3b3JkLmdldEJ5dGVzKCkpO1xuICAgICAgICByZXR1cm4gQkNyeXB0Lmhhc2hwdyhwYXNzd29yZCwgQkNyeXB0LmdlbnNhbHQoKSk7XG4gICAgfVxuLi4uXG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbm4gPSBEYXRhYmFzZVV0aWwuZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgICAgICAgU3RyaW5nIHNxbCA9IFwiSU5TRVJUIElOVE8gVXNlcnMgKHVzZXJuYW1lLCBwYXNzd29yZCwgcm9sZSwgaW1hZ2VfdXJsLCBpc0FjdGl2ZSkgVkFMVUVTICg/LCA/LCA/LCA/LCA/KVwiO1xuICAgICAgICAgICAgc3RtdCA9IGNvbm4ucHJlcGFyZVN0YXRlbWVudChzcWwsIFN0YXRlbWVudC5SRVRVUk5fR0VORVJBVEVEX0tFWVMpO1xuXG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygxLCBlbnRpdHkuZ2V0VXNlcm5hbWUoKSk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygyLCBlbmNvZGUoZW50aXR5LmdldFBhc3N3b3JkKCkpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDMsIGVudGl0eS5nZXRSb2xlKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoNCwgZW50aXR5LmdldEltYWdlVXJsKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRCb29sZWFuKDUsIGVudGl0eS5pc0FjdGl2ZSgpKTtcblxuICAgICAgICAgICAgaW50IGFmZmVjdGVkUm93cyA9IHN0bXQuZXhlY3V0ZVVwZGF0ZSgpO1xuICAgICAgICAgICAgaWYgKGFmZmVjdGVkUm93cyA9PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRyeSAoUmVzdWx0U2V0IGdlbmVyYXRlZEtleXMgPSBzdG10LmdldEdlbmVyYXRlZEtleXMoKSkge1xuICAgICAgICAgICAgICAgIGlmIChnZW5lcmF0ZWRLZXlzLm5leHQoKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ2VuZXJhdGVkS2V5cy5nZXRJbnQoMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBEYXRhYmFzZVV0aWwuY2xvc2VSZXNvdXJjZXMocnMsIHN0bXQsIGNvbm4pO1xuICAgICAgICB9XG4gICAgfVxuLi4uXG4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCI4OThhMTJjMC1hOTYyLTQ1MjEtYjg1MC04YjZjMGE1OTY1YmI7dG9vbHVfMDFLd0pQWHA4YnBCdkFvU2FMazdhVzI2Ijp7InJlcXVlc3RJZCI6Ijg5OGExMmMwLWE5NjItNDUyMS1iODUwLThiNmMwYTU5NjViYiIsInRvb2xVc2VJZCI6InRvb2x1XzAxS3dKUFhwOGJwQnZBb1NhTGs3YVcyNiIsInBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IlRoZSBmb2xsb3dpbmcgY29kZSBzZWN0aW9ucyB3ZXJlIHJldHJpZXZlZDpcblBhdGg6IHNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL0xvZ2luLmphdmFcbi8qXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0xpY2Vuc2VzL2xpY2Vuc2UtZGVmYXVsdC50eHQgdG8gY2hhbmdlIHRoaXMgbGljZW5zZVxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9HVUlGb3Jtcy9KRnJhbWUuamF2YSB0byBlZGl0IHRoaXMgdGVtcGxhdGVcbiAqL1xucGFja2FnZSBpbnRlcm5ldC5tYW5nZW1lbnQuc3lzdGVtO1xuXG5pbXBvcnQgREFPLlVzZXJEQU87XG5pbXBvcnQgTW9kZWwuVXNlcjtcbmltcG9ydCBqYXZheC5zd2luZy5KT3B0aW9uUGFuZTtcbi4uLlxuXG4gICAgcHJpdmF0ZSB2b2lkIGJ0bkxvZ2luQWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkxvZ2luQWN0aW9uUGVyZm9ybWVkXG4gICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxuICAgICAgICBpZih2YWxpZGF0ZUZpZWxkcygpKSB7XG4gICAgICAgICAgICB0cnl7XG4gICAgICAgICAgICAgICAgU3RyaW5nIHVzZXJuYW1lID0gdHh0VXNlck5hbWUuZ2V0VGV4dCgpLnRyaW0oKTtcbiAgICAgICAgICAgICAgICBTdHJpbmcgcGFzc3dvcmQgPSB0eHRQYXNzd29yZC5nZXRUZXh0KCkudHJpbSgpO1xuXG4gICAgICAgICAgICAgICAgVXNlciB1c2VyID0gbnVsbDtcbiAgICAgICAgICAgICAgICBib29sZWFuIGlzU3VjY2VzcyA9IFVzZXJEQU8ubG9naW4odXNlcm5hbWUsIHBhc3N3b3JkKTtcblxuICAgICAgICAgICAgICAgIGlmKGlzU3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyh0aGlzLCBcIsSQxINuZyBuaOG6rXAgdGjDoG5oIGPDtG5nIVwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLklORk9STUFUSU9OX01FU1NBR0UpO1xuLy8gICAgICAgICAgICAgICAgICAgIG5ldyBNYWluRnJhbWUoKS5zZXRWaXNpYmxlKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyh0aGlzLCBcIlNhaSB0w6puIMSRxINuZyBuaOG6rXAgaG/hurdjIG3huq10IGto4bqpdS5cIiwgXCJM4buXaVwiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoKEV4Y2VwdGlvbiBleCkge1xuICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwiTOG7l2k6IFwiICsgZXguZ2V0TWVzc2FnZSgpLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cblxuICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0bkxvZ2luQWN0aW9uUGVyZm9ybWVkXG5cbiAgICBwcml2YXRlIHZvaWQgYnRuRm9yZ290UGFzc3dvcmRBY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuRm9yZ290UGFzc3dvcmRBY3Rpb25QZXJmb3JtZWRcbiAgICAgICAgLy8gT3BlbiB0aGUgRm9yZ290UGFzc3dvcmQgZGlhbG9nXG4gICAgICAgIEZvcmdvdFBhc3N3b3JkIGZvcmdvdFBhc3N3b3JkRGlhbG9nID0gbmV3IEZvcmdvdFBhc3N3b3JkKHRoaXMsIHRydWUpO1xuICAgICAgICBmb3Jnb3RQYXNzd29yZERpYWxvZy5zZXRWaXNpYmxlKHRydWUpO1xuICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0bkZvcmdvdFBhc3N3b3JkQWN0aW9uUGVyZm9ybWVkXG5cbiAgICBwcml2YXRlIHZvaWQgYnRuRXhpdEFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5FeGl0QWN0aW9uUGVyZm9ybWVkXG4gICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxuICAgICAgICBpbnQgcmVzdWx0ID0gSk9wdGlvblBhbmUuc2hvd0NvbmZpcm1EaWFsb2cobnVsbCwgXCJC4bqhbiBjw7MgY2jhuq9jIGNo4bqvbiBtdeG7kW4gdGhvw6F0IGtow7RuZz9cIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5ZRVNfTk9fT1BUSU9OLCBKT3B0aW9uUGFuZS5RVUVTVElPTl9NRVNTQUdFKTtcblxuICAgICAgICBpZiAocmVzdWx0ID09IEpPcHRpb25QYW5lLllFU19PUFRJT04pIHtcbiAgICAgICAgICAgIFN5c3RlbS5leGl0KDApO1xuICAgICAgICB9XG4gICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuRXhpdEFjdGlvblBlcmZvcm1lZFxuXG4gICAgcHJpdmF0ZSB2b2lkIGJ0blNpZ251cEFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5TaWdudXBBY3Rpb25QZXJmb3JtZWRcbiAgICAgICAgLy8gVE9ETyBhZGQgeW91ciBoYW5kbGluZyBjb2RlIGhlcmU6XG4gICAgICAgIHNldFZpc2libGUoZmFsc2UpO1xuICAgICAgICBuZXcgU2lnblVwKCkuc2V0VmlzaWJsZSh0cnVlKTtcbiAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5TaWdudXBBY3Rpb25QZXJmb3JtZWRcbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9jb20vc3RvcmUvYXBwL3BldHN0b3JlL0NvbnRyb2xsZXJzL0xvZ2luQ29udHJvbGxlci5qYXZhXG4uLi5cblxuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuREFPLlVzZXJEQU87XG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5EQU8uU3RhZmZEQU87XG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5Nb2RlbHMuRW50aXRpZXMuVXNlcjtcbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLk1vZGVscy5FbnRpdGllcy5TdGFmZjtcbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLlNlc3Npb25zLlNlc3Npb25NYW5hZ2VyO1xuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuVmlld3MuQWRtaW5GYWN0b3J5O1xuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuVmlld3MuVmlld0ZhY3Rvcnk7XG5pbXBvcnQgZGUuamVuc2QuZnguZ2x5cGhzLmZvbnRhd2Vzb21lLkZvbnRBd2Vzb21lSWNvbjtcbmltcG9ydCBkZS5qZW5zZC5meC5nbHlwaHMuZm9udGF3ZXNvbWUuRm9udEF3ZXNvbWVJY29uVmlldztcbmltcG9ydCBqYXZhZnguZnhtbC5GWE1MO1xuaW1wb3J0IGphdmFmeC5meG1sLkluaXRpYWxpemFibGU7XG5pbXBvcnQgamF2YWZ4LnNjZW5lLmNvbnRyb2wuKjtcbmltcG9ydCBqYXZhZnguc2NlbmUuaW5wdXQuTW91c2VFdmVudDtcbmltcG9ydCBqYXZhZnguc3RhZ2UuU3RhZ2U7XG5pbXBvcnQgamF2YWZ4LnNjZW5lLmltYWdlLkltYWdlO1xuaW1wb3J0IGphdmFmeC5zY2VuZS5pbWFnZS5JbWFnZVZpZXc7XG5pbXBvcnQgamF2YWZ4LnNjZW5lLnBhaW50LkltYWdlUGF0dGVybjtcbmltcG9ydCBqYXZhLnV0aWwuT2JqZWN0cztcbi4uLlxuXG5wdWJsaWMgY2xhc3MgTG9naW5Db250cm9sbGVyIGltcGxlbWVudHMgSW5pdGlhbGl6YWJsZSB7XG5cbiAgICBARlhNTFxuICAgIHByaXZhdGUgRm9udEF3ZXNvbWVJY29uVmlldyBleWVJY29uO1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIFRleHRGaWVsZCBzaG93UGFzc3dvcmQ7XG5cbiAgICBARlhNTFxuICAgIHByaXZhdGUgUGFzc3dvcmRGaWVsZCBwYXNzd29yZEZpZWxkO1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIFRleHRGaWVsZCB1c2VybmFtZUZpZWxkO1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIEJ1dHRvbiBsb2dpbkJ1dHRvbjtcblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBMYWJlbCBlcnJvckxhYmVsO1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIEh5cGVybGluayBmb3Jnb3RQYXNzd29yZExpbms7XG5cbiAgICBARlhNTFxuICAgIHByaXZhdGUgSW1hZ2VWaWV3IHVzZXJJbWFnZTtcblxuICAgIHByaXZhdGUgZG91YmxlIHgsIHk7XG5cbiAgICBVc2VyREFPIHVzZXJEQU8gPSBuZXcgVXNlckRBTygpO1xuICAgIFN0YWZmREFPIHN0YWZmREFPID0gU3RhZmZEQU8uZ2V0SW5zdGFuY2UoKTtcbiAgICBwdWJsaWMgc3RhdGljIGludCBpZFN0YWZmQ3VycmVudDtcbiAgICBwdWJsaWMgc3RhdGljIGludCBpZEFkbWluQ3VycmVudDtcblxuICAgIHByaXZhdGUgU2Vzc2lvbk1hbmFnZXIgc2Vzc2lvbk1hbmFnZXIgPSBuZXcgU2Vzc2lvbk1hbmFnZXIoKTtcbi4uLlxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBUw6xtIHVzZXIgdGhlbyB1c2VybmFtZVxuICAgICAgICAgICAgVXNlciB1c2VyID0gdXNlckRBTy5maW5kQnlVc2VybmFtZSh1c2VybmFtZSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmKHVzZXIgPT0gbnVsbCB8fCB1c2VyLmdldFVzZXJuYW1lKCkgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIENvbnRyb2xsZXJVdGlscy5zaG93QWxlcnQoQWxlcnQuQWxlcnRUeXBlLkVSUk9SLCBcIkzhu5dpXCIsIFwiVMOqbiDEkcSDbmcgbmjhuq1wIGtow7RuZyDEkcO6bmdcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBLaeG7g20gdHJhIHTDqm4gxJHEg25nIG5o4bqtcFxuICAgICAgICAgICAgaWYgKCF1c2VyLmdldFVzZXJuYW1lKCkuZXF1YWxzKHVzZXJuYW1lKSkge1xuICAgICAgICAgICAgICAgIENvbnRyb2xsZXJVdGlscy5zaG93QWxlcnQoQWxlcnQuQWxlcnRUeXBlLkVSUk9SLCBcIkzhu5dpXCIsIFwiVMOqbiDEkcSDbmcgbmjhuq1wIGtow7RuZyDEkcO6bmdcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBLaeG7g20gdHJhIG3huq10IGto4bqpdVxuICAgICAgICAgICAgaWYoIUJDcnlwdC5jaGVja3B3KHBhc3N3b3JkLCB1c2VyLmdldFBhc3N3b3JkKCkpKSB7XG4gICAgICAgICAgICAgICAgQ29udHJvbGxlclV0aWxzLnNob3dBbGVydChBbGVydC5BbGVydFR5cGUuRVJST1IsIFwiTOG7l2lcIiwgXCJN4bqtdCBraOG6qXUga2jDtG5nIMSRw7puZ1wiKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNlc3Npb25NYW5hZ2VyLnNldEN1cnJlbnRVc2VyKHVzZXIpO1xuXG4gICAgICAgICAgICBTdGFnZSBjdXJyZW50U3RhZ2UgPSAoU3RhZ2UpIHVzZXJuYW1lRmllbGQuZ2V0U2NlbmUoKS5nZXRXaW5kb3coKTtcblxuICAgICAgICAgICAgaWYodXNlci5nZXRSb2xlKCkuZXF1YWxzKFVzZXIuUk9MRV9BRE1JTikpIHtcbiAgICAgICAgICAgICAgICBpZEFkbWluQ3VycmVudCA9IHVzZXIuZ2V0VXNlcklkKCk7XG4gICAgICAgICAgICAgICAgQWRtaW5GYWN0b3J5LmdldEluc3RhbmNlKCkuc3dpdGNoQ29udGVudChcImRhc2hib2FyZFwiLCBjdXJyZW50U3RhZ2UpO1xuICAgICAgICAgICAgfSBlbHNlIGlmKHVzZXIuZ2V0Um9sZSgpLmVxdWFscyhVc2VyLlJPTEVfVVNFUikpIHtcbiAgICAgICAgICAgICAgICBpZFN0YWZmQ3VycmVudCA9IHVzZXIuZ2V0VXNlcklkKCk7XG4gICAgICAgICAgICAgICAgU3RhZmYgc3RhZmYgPSBzdGFmZkRBTy5maW5kQnlVc2VySWQodXNlci5nZXRVc2VySWQoKSk7XG4gICAgICAgICAgICAgICAgaWYgKHN0YWZmICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbk1hbmFnZXIuc2V0Q3VycmVudFN0YWZmKHN0YWZmKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgVmlld0ZhY3RvcnkuZ2V0SW5zdGFuY2UoKS5zd2l0Y2hDb250ZW50KFwiZGFzaGJvYXJkXCIsIGN1cnJlbnRTdGFnZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIENvbnRyb2xsZXJVdGlscy5zaG93QWxlcnQoQWxlcnQuQWxlcnRUeXBlLkVSUk9SLCBcIkzhu5dpXCIsIFwiVmFpIHRyw7IgbmfGsOG7nWkgZMO5bmcga2jDtG5nIGjhu6NwIGzhu4dcIik7XG4gICAgICAgICAgICAgICAgc2Vzc2lvbk1hbmFnZXIuY2xlYXIoKTtcbiAgICAgICAgICAgIH1cbi4uLlxuUGF0aDogc3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vRm9yZ290UGFzc3dvcmQuamF2YVxuLypcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvTGljZW5zZXMvbGljZW5zZS1kZWZhdWx0LnR4dCB0byBjaGFuZ2UgdGhpcyBsaWNlbnNlXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0dVSUZvcm1zL0pGcmFtZS5qYXZhIHRvIGVkaXQgdGhpcyB0ZW1wbGF0ZVxuICovXG5wYWNrYWdlIGludGVybmV0Lm1hbmdlbWVudC5zeXN0ZW07XG5cbmltcG9ydCBEQU8uU3Vic2NyaWJlckRBTztcbmltcG9ydCBNb2RlbC5TdWJzY3JpYmVyO1xuaW1wb3J0IGphdmF4LnN3aW5nLkpPcHRpb25QYW5lO1xuaW1wb3J0IGludGVybmV0Lm1hbmdlbWVudC5zeXN0ZW0uTG9naW47XG4uLi5cblxuICAgIHByaXZhdGUgdm9pZCBidG5FeGl0QWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkV4aXRBY3Rpb25QZXJmb3JtZWRcbiAgICAgICAgLy8gVE9ETyBhZGQgeW91ciBoYW5kbGluZyBjb2RlIGhlcmU6XG4gICAgICAgIGludCByZXN1bHQgPSBKT3B0aW9uUGFuZS5zaG93Q29uZmlybURpYWxvZyhudWxsLCBcIkLhuqFuIGPDsyBjaOG6r2MgY2jhuq9uIG114buRbiB0aG/DoXQga2jDtG5nP1wiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLllFU19OT19PUFRJT04sIEpPcHRpb25QYW5lLlFVRVNUSU9OX01FU1NBR0UpO1xuXG4gICAgICAgIGlmIChyZXN1bHQgPT0gSk9wdGlvblBhbmUuWUVTX09QVElPTikge1xuICAgICAgICAgICAgbmV3IExvZ2luKCkuc2V0VmlzaWJsZSh0cnVlKTtcbiAgICAgICAgICAgIHRoaXMuZGlzcG9zZSgpO1xuICAgICAgICB9XG4gICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuRXhpdEFjdGlvblBlcmZvcm1lZFxuXG4gICAgcHJpdmF0ZSB2b2lkIGJ0bkNoZWNrQWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkNoZWNrQWN0aW9uUGVyZm9ybWVkXG4gICAgICAgIFN5c3RlbS5vdXQucHJpbnQoXCJIZWxsb1wiKTtcbiAgICAgICAgaWYgKHZhbGlkYXRlUGhvbmUoKSkge1xuICAgICAgICAgICAgU3RyaW5nIHBob25lID0gdHh0UGhvbmUuZ2V0VGV4dCgpO1xuICAgICAgICAgICAgY3VycmVudFN1YnNjcmliZXIgPSBTdWJzY3JpYmVyREFPLmdldEJ5UGhvbmUocGhvbmUpO1xuLi4uXG5cbiAgICBwcml2YXRlIHZvaWQgYnRuQ2hhbmdlQWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkNoYW5nZUFjdGlvblBlcmZvcm1lZFxuICAgICAgICBpZiAodmFsaWRhdGVGaWVsZHMoKSAmJiBjdXJyZW50U3Vic2NyaWJlciAhPSBudWxsKSB7XG4gICAgICAgICAgICBTdHJpbmcgbmV3UGFzc3dvcmQgPSB0eHRQYXNzd29yZC5nZXRUZXh0KCk7XG5cbiAgICAgICAgICAgIGJvb2xlYW4gc3VjY2VzcyA9IFN1YnNjcmliZXJEQU8udXBkYXRlUGFzc3dvcmQoY3VycmVudFN1YnNjcmliZXIuZ2V0VXNlcl9pZCgpLCBuZXdQYXNzd29yZCk7XG5cbiAgICAgICAgICAgIGlmIChzdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXCLEkOG7lWkgbeG6rXQga2jhuql1IHRow6BuaCBjw7RuZyEgVnVpIGzDsm5nIMSRxINuZyBuaOG6rXAgbOG6oWkuXCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuSU5GT1JNQVRJT05fTUVTU0FHRSk7XG4gICAgICAgICAgICAgICAgbmV3IExvZ2luKCkuc2V0VmlzaWJsZSh0cnVlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXCLEkOG7lWkgbeG6rXQga2jhuql1IHRo4bqldCBi4bqhaSEgVnVpIGzDsm5nIHRo4butIGzhuqFpIHNhdS5cIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0bkNoYW5nZUFjdGlvblBlcmZvcm1lZFxuLi4uXG5QYXRoOiBzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9TaWduVXAuamF2YVxuLypcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvTGljZW5zZXMvbGljZW5zZS1kZWZhdWx0LnR4dCB0byBjaGFuZ2UgdGhpcyBsaWNlbnNlXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0dVSUZvcm1zL0pGcmFtZS5qYXZhIHRvIGVkaXQgdGhpcyB0ZW1wbGF0ZVxuICovXG5wYWNrYWdlIGludGVybmV0Lm1hbmdlbWVudC5zeXN0ZW07XG5cbmltcG9ydCBEQU8uU3Vic2NyaWJlckRBTztcbmltcG9ydCBNb2RlbC5TdWJzY3JpYmVyO1xuaW1wb3J0IGphdmEudGltZS5Mb2NhbERhdGVUaW1lO1xuaW1wb3J0IGphdmF4LnN3aW5nLkpPcHRpb25QYW5lO1xuXG4vKipcbiAqXG4gKiBAYXV0aG9yIE5nb2MgVGhhb1xuICovXG5wdWJsaWMgY2xhc3MgU2lnblVwIGV4dGVuZHMgamF2YXguc3dpbmcuSkZyYW1lIHtcblxuICAgIHB1YmxpYyBTdHJpbmcgcGhvbmVQYXR0ZXJuID0gXCJeWzAtOV0qJFwiO1xuICAgIHByaXZhdGUgU3RyaW5nIERFRkFVTFRfUk9MRSA9IFwidXNlclwiO1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgbmV3IGZvcm0gU2lnbkluXG4gICAgICovXG4gICAgcHVibGljIFNpZ25VcCgpIHtcbiAgICAgICAgaW5pdENvbXBvbmVudHMoKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBjbGVhcigpe1xuICAgICAgICB0eHROYW1lLnNldFRleHQoXCJcIik7XG4gICAgICAgIHR4dFVzZXJOYW1lLnNldFRleHQoXCJcIik7XG4gICAgICAgIHR4dFBhc3N3b3JkLnNldFRleHQoXCJcIik7XG4gICAgICAgIHR4dEFkZHJlc3Muc2V0VGV4dChcIlwiKTtcbiAgICAgICAgdHh0UGhvbmUuc2V0VGV4dChcIlwiKTtcbiAgICB9XG4uLi5cblxuICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0blJldHVybkFjdGlvblBlcmZvcm1lZFxuXG4gICAgcHJpdmF0ZSB2b2lkIGJ0blNpZ251cEFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5TaWdudXBBY3Rpb25QZXJmb3JtZWRcbiAgICAgICAgLy8gVE9ETyBhZGQgeW91ciBoYW5kbGluZyBjb2RlIGhlcmU6XG4gICAgICAgIGlmICh2YWxpZGF0ZUZpZWxkcygpKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIFN1YnNjcmliZXIgc3ViID0gbmV3IFN1YnNjcmliZXIoKTtcbiAgICAgICAgICAgICAgICBzdWIuc2V0RnVsbE5hbWUodHh0TmFtZS5nZXRUZXh0KCkpO1xuICAgICAgICAgICAgICAgIHN1Yi5zZXRVc2VybmFtZSh0eHRVc2VyTmFtZS5nZXRUZXh0KCkpO1xuICAgICAgICAgICAgICAgIHN1Yi5zZXRQYXNzd29yZCh0eHRQYXNzd29yZC5nZXRUZXh0KCkpO1xuICAgICAgICAgICAgICAgIHN1Yi5zZXRSb2xlKERFRkFVTFRfUk9MRSk7XG4gICAgICAgICAgICAgICAgc3ViLnNldEFkZHJlc3ModHh0QWRkcmVzcy5nZXRUZXh0KCkpO1xuICAgICAgICAgICAgICAgIHN1Yi5zZXRQaG9uZSh0eHRQaG9uZS5nZXRUZXh0KCkpO1xuICAgICAgICAgICAgICAgIHN1Yi5zZXRDcmVhdGVfYXQoTG9jYWxEYXRlVGltZS5ub3coKSk7XG4gICAgICAgICAgICAgICAgU3Vic2NyaWJlckRBTy5pbnNlcnQoc3ViKTtcbiAgICAgICAgICAgICAgICBjbGVhcigpO1xuICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGV4KSB7XG4gICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXCJM4buXaTogXCIgKyBleC5nZXRNZXNzYWdlKCksIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5TaWdudXBBY3Rpb25QZXJmb3JtZWRcbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9jb20vc3RvcmUvYXBwL3BldHN0b3JlL0NvbnRyb2xsZXJzL0FkbWluL0Rhc2hib2FyZENvbnRyb2xsZXIuamF2YVxuLi4uXG5cbiAgICBwcml2YXRlIHZvaWQgbmF2aWdhdGVUbyhTdHJpbmcgdmlld05hbWUpIHtcbiAgICAgICAgU3RhZ2UgY3VycmVudFN0YWdlID0gKFN0YWdlKSBsb2dvdXRCdXR0b24uZ2V0U2NlbmUoKS5nZXRXaW5kb3coKTtcbiAgICAgICAgQWRtaW5GYWN0b3J5LmdldEluc3RhbmNlKCkuc3dpdGNoQ29udGVudCh2aWV3TmFtZSwgY3VycmVudFN0YWdlKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHZvaWQgaGFuZGxlTG9nb3V0KCkge1xuICAgICAgICAvLyBTdG9wIGF1dG8tcmVmcmVzaCBpZiBhY3RpdmVcbiAgICAgICAgc3RvcEF1dG9SZWZyZXNoKCk7XG5cbiAgICAgICAgU3RhZ2UgY3VycmVudFN0YWdlID0gKFN0YWdlKSBsb2dvdXRCdXR0b24uZ2V0U2NlbmUoKS5nZXRXaW5kb3coKTtcbiAgICAgICAgaWYgKENvbnRyb2xsZXJVdGlscy5zaG93Q29uZmlybWF0aW9uQW5kV2FpdChcIsSQxINuZyB4deG6pXRcIiwgXCJC4bqhbiBjw7MgY2jhuq9jIGNo4bqvbiBtdeG7kW4gxJHEg25nIHh14bqldCBraMO0bmc/XFxuTmjhuqVuIE9LIMSR4buDIHjDoWMgbmjhuq1uLlwiKSkge1xuICAgICAgICAgICAgU2Vzc2lvbk1hbmFnZXIuY2xlYXIoKTtcbiAgICAgICAgICAgIFZpZXdGYWN0b3J5LmdldEluc3RhbmNlKCkuc3dpdGNoQ29udGVudChcImxvZ2luXCIsIGN1cnJlbnRTdGFnZSk7XG4gICAgICAgIH1cbiAgICB9XG5cblxufVxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL2NvbS9zdG9yZS9hcHAvcGV0c3RvcmUvQ29udHJvbGxlcnMvQWRtaW4vQWRtaW5NZW51Q29udHJvbGxlci5qYXZhXG4uLi5cblxuICAgICAgICBNZW51SXRlbSBsb2dvdXRNZW51SXRlbSA9IG5ldyBNZW51SXRlbShcIsSQxINuZyB4deG6pXRcIik7XG4gICAgICAgIGxvZ291dE1lbnVJdGVtLnNldE9uQWN0aW9uKGUgLT4gaGFuZGxlTG9nb3V0KG51bGwpKTtcbiAgICAgICAgbWVudUxvZ291dC5nZXRJdGVtcygpLmFkZChsb2dvdXRNZW51SXRlbSk7XG4gICAgfVxuXG4gICAgQEZYTUxcbiAgICB2b2lkIGhhbmRsZUxvZ291dChBY3Rpb25FdmVudCBldmVudCkge1xuICAgICAgICBTdGFnZSBjdXJyZW50U3RhZ2UgPSAoU3RhZ2UpIHJvb3QuZ2V0U2NlbmUoKS5nZXRXaW5kb3coKTtcbiAgICAgICAgaWYgKENvbnRyb2xsZXJVdGlscy5zaG93Q29uZmlybWF0aW9uQW5kV2FpdChcIsSQxINuZyB4deG6pXRcIiwgXCJC4bqhbiBjw7MgY2jhuq9jIGNo4bqvbiBtdeG7kW4gxJHEg25nIHh14bqldCBraMO0bmc/XFxuTmjhuqVuIE9LIMSR4buDIHjDoWMgbmjhuq1uLlwiKSkge1xuICAgICAgICAgICAgU2Vzc2lvbk1hbmFnZXIuY2xlYXIoKTtcbiAgICAgICAgICAgIFZpZXdGYWN0b3J5LmdldEluc3RhbmNlKCkuc3dpdGNoQ29udGVudChcImxvZ2luXCIsIGN1cnJlbnRTdGFnZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBDb250cm9sbGVyVXRpbHMuc2hvd0FsZXJ0KEFsZXJ0LkFsZXJ0VHlwZS5JTkZPUk1BVElPTiwgXCJUaMO0bmcgYsOhb1wiLCBcIsSQxINuZyB4deG6pXQga2jDtG5nIHRow6BuaCBjw7RuZ1wiKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi4uLlxuUGF0aDogc3JjL0RBTy9Vc2VyREFPLmphdmFcbi8qXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0xpY2Vuc2VzL2xpY2Vuc2UtZGVmYXVsdC50eHQgdG8gY2hhbmdlIHRoaXMgbGljZW5zZVxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NsYXNzLmphdmEgdG8gZWRpdCB0aGlzIHRlbXBsYXRlXG4gKi9cbnBhY2thZ2UgREFPO1xuXG5pbXBvcnQgTW9kZWwuVXNlcjtcbmltcG9ydCBqYXZhLnV0aWwuTGlzdDtcblxuLyoqXG4gKlxuICogQGF1dGhvciBOZ29jIFRoYW9cbiAqL1xucHVibGljIGNsYXNzIFVzZXJEQU97XG5cbiAgICBwdWJsaWMgc3RhdGljIHZvaWQgaW5zZXJ0KFVzZXIgb2JqKSB7XG4gICAgICAgIFxuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgdm9pZCB1cGRhdGUoVXNlciBvYmopIHtcbiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpOyAvLyBHZW5lcmF0ZWQgZnJvbSBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ29kZS9HZW5lcmF0ZWRNZXRob2RCb2R5XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyB2b2lkIGRlbGV0ZShpbnQgaWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpOyAvLyBHZW5lcmF0ZWQgZnJvbSBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ29kZS9HZW5lcmF0ZWRNZXRob2RCb2R5XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBVc2VyIGdldEJ5SWQoaW50IGlkKSB7XG4gICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbihcIk5vdCBzdXBwb3J0ZWQgeWV0LlwiKTsgLy8gR2VuZXJhdGVkIGZyb20gbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NvZGUvR2VuZXJhdGVkTWV0aG9kQm9keVxuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxVc2VyPiBnZXRBbGwoKSB7XG4gICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbihcIk5vdCBzdXBwb3J0ZWQgeWV0LlwiKTsgLy8gR2VuZXJhdGVkIGZyb20gbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NvZGUvR2VuZXJhdGVkTWV0aG9kQm9keVxuICAgIH1cbiAgICBcbn1cbi4uLlxuUGF0aDogc3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vSW50ZXJuZXRNYW5nZW1lbnRTeXN0ZW0uamF2YVxuLypcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvTGljZW5zZXMvbGljZW5zZS1kZWZhdWx0LnR4dCB0byBjaGFuZ2UgdGhpcyBsaWNlbnNlXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvTWFpbi5qYXZhIHRvIGVkaXQgdGhpcyB0ZW1wbGF0ZVxuICovXG5wYWNrYWdlIGludGVybmV0Lm1hbmdlbWVudC5zeXN0ZW07XG5cbi8qKlxuICpcbiAqIEBhdXRob3IgTmdvYyBUaGFvXG4gKi9cbnB1YmxpYyBjbGFzcyBJbnRlcm5ldE1hbmdlbWVudFN5c3RlbSB7XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gYXJncyB0aGUgY29tbWFuZCBsaW5lIGFyZ3VtZW50c1xuICAgICAqL1xuICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBtYWluKFN0cmluZ1tdIGFyZ3MpIHtcbiAgICAgICAgLy8gVE9ETyBjb2RlIGFwcGxpY2F0aW9uIGxvZ2ljIGhlcmVcbiAgICB9XG4gICAgXG59XG4uLi5cblBhdGg6IHNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL0FkbWluL0Rhc2hib2FyZC5qYXZhXG4vKlxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9MaWNlbnNlcy9saWNlbnNlLWRlZmF1bHQudHh0IHRvIGNoYW5nZSB0aGlzIGxpY2Vuc2VcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvR1VJRm9ybXMvSkZyYW1lLmphdmEgdG8gZWRpdCB0aGlzIHRlbXBsYXRlXG4gKi9cbnBhY2thZ2UgaW50ZXJuZXQubWFuZ2VtZW50LnN5c3RlbS5BZG1pbjtcblxuaW1wb3J0IE1vZGVsLlVzZXI7XG5pbXBvcnQgaW50ZXJuZXQubWFuZ2VtZW50LnN5c3RlbS5TZXNzaW9uLlVzZXJTZXNzaW9uO1xuaW1wb3J0IGphdmEudGltZS5Mb2NhbFRpbWU7XG5pbXBvcnQgamF2YXguc3dpbmcuSk9wdGlvblBhbmU7XG5cbi8qKlxuICpcbiAqIEBhdXRob3IgTmdvYyBUaGFvXG4gKi9cbnB1YmxpYyBjbGFzcyBEYXNoYm9hcmQgZXh0ZW5kcyBqYXZheC5zd2luZy5KRnJhbWUge1xuXG4gICAgVXNlciBhZG1pbiA9IFVzZXJTZXNzaW9uLmdldEN1cnJlbnRVc2VyKCk7XG4gICAgXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBuZXcgZm9ybSBEYXNoYm9hcmRcbiAgICAgKi9cbiAgICBwdWJsaWMgRGFzaGJvYXJkKCkge1xuICAgICAgICBpbml0Q29tcG9uZW50cygpO1xuICAgICAgICBzZXR1cEhlbGxvKCk7XG4gICAgICAgIHNldHVwVXNlcm5hbWUoKTtcbiAgICB9XG4gICAgXG4gICAgcHJpdmF0ZSB2b2lkIHNldHVwSGVsbG8oKSB7XG4gICAgICAgIExvY2FsVGltZSBub3cgPSBMb2NhbFRpbWUubm93KCk7XG4gICAgICAgIGludCBob3VyID0gbm93LmdldEhvdXIoKTtcbiAgICAgICAgXG4gICAgICAgIFN0cmluZyBncmVldGluZztcblxuICAgICAgICBpZiAoaG91ciA+PSA1ICYmIGhvdXIgPCAxMSkge1xuICAgICAgICAgICAgZ3JlZXRpbmcgPSBcIkNow6BvIGJ14buVaSBzw6FuZyxcIjtcbiAgICAgICAgfSBlbHNlIGlmIChob3VyID49IDExICYmIGhvdXIgPCAxNSkge1xuICAgICAgICAgICAgZ3JlZXRpbmcgPSBcIkNow6BvIGJ14buVaSB0csawYSxcIjtcbiAgICAgICAgfSBlbHNlIGlmIChob3VyID49IDE1ICYmIGhvdXIgPCAxNykge1xuICAgICAgICAgICAgZ3JlZXRpbmcgPSBcIkNow6BvIGJ14buVaSBjaGnhu4F1LFwiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZ3JlZXRpbmcgPSBcIkNow6BvIGJ14buVaSB04buRaSxcIjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgbGJIZWxsby5zZXRUZXh0KGdyZWV0aW5nKTtcbiAgICB9XG4gICAgXG4gICAgcHJpdmF0ZSB2b2lkIHNldHVwVXNlcm5hbWUoKSB7XG4gICAgICAgIGxiVXNlck5hbWUuc2V0VGV4dChhZG1pbi5nZXRVc2VybmFtZSgpKTtcbiAgICB9XG4uLi5cblxuICAgICAgICBzZXREZWZhdWx0Q2xvc2VPcGVyYXRpb24oamF2YXguc3dpbmcuV2luZG93Q29uc3RhbnRzLkVYSVRfT05fQ0xPU0UpO1xuXG4gICAgICAgIGJ0blVzZXIuc2V0Rm9udChuZXcgamF2YS5hd3QuRm9udChcIkFyaWFsXCIsIDEsIDI0KSk7IC8vIE5PSTE4TlxuICAgICAgICBidG5Vc2VyLnNldEljb24obmV3IGphdmF4LnN3aW5nLkltYWdlSWNvbihnZXRDbGFzcygpLmdldFJlc291cmNlKFwiL0ltYWdlcy91c2VyLnBuZ1wiKSkpOyAvLyBOT0kxOE5cbiAgICAgICAgYnRuVXNlci5zZXRUZXh0KFwiUXXhuqNuIGzDvSBuZ8aw4budaSBkw7luZ1wiKTtcbiAgICAgICAgYnRuVXNlci5zZXRDdXJzb3IobmV3IGphdmEuYXd0LkN1cnNvcihqYXZhLmF3dC5DdXJzb3IuSEFORF9DVVJTT1IpKTtcbiAgICAgICAgYnRuVXNlci5zZXRIb3Jpem9udGFsQWxpZ25tZW50KGphdmF4LnN3aW5nLlN3aW5nQ29uc3RhbnRzLkxFRlQpO1xuICAgICAgICBidG5Vc2VyLmFkZEFjdGlvbkxpc3RlbmVyKG5ldyBqYXZhLmF3dC5ldmVudC5BY3Rpb25MaXN0ZW5lcigpIHtcbiAgICAgICAgICAgIHB1YmxpYyB2b2lkIGFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHtcbiAgICAgICAgICAgICAgICBidG5Vc2VyQWN0aW9uUGVyZm9ybWVkKGV2dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuLi4uXG5cbiAgICAgICAgbGJVc2VyTmFtZS5zZXRGb250KG5ldyBqYXZhLmF3dC5Gb250KFwiQXJpYWxcIiwgMywgMTgpKTsgLy8gTk9JMThOXG4gICAgICAgIGxiVXNlck5hbWUuc2V0Rm9yZWdyb3VuZChqYXZheC5zd2luZy5VSU1hbmFnZXIuZ2V0RGVmYXVsdHMoKS5nZXRDb2xvcihcIkFjdGlvbnMuR3JlZW5cIikpO1xuICAgICAgICBsYlVzZXJOYW1lLnNldFRleHQoXCJ1c2VybmFtZSFcIik7XG5cbiAgICAgICAgbGJIZWxsby5zZXRGb250KG5ldyBqYXZhLmF3dC5Gb250KFwiQXJpYWxcIiwgMiwgMTgpKTsgLy8gTk9JMThOXG4gICAgICAgIGxiSGVsbG8uc2V0VGV4dChcIkNow6BvIGJ14buVaSBzw6FuZyxcIik7XG5cbiAgICAgICAgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQgbGF5b3V0ID0gbmV3IGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0KGdldENvbnRlbnRQYW5lKCkpO1xuICAgICAgICBnZXRDb250ZW50UGFuZSgpLnNldExheW91dChsYXlvdXQpO1xuICAgICAgICBsYXlvdXQuc2V0SG9yaXpvbnRhbEdyb3VwKFxuICAgICAgICAgICAgbGF5b3V0LmNyZWF0ZVBhcmFsbGVsR3JvdXAoamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuQWxpZ25tZW50LkxFQURJTkcpXG4gICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVNlcXVlbnRpYWxHcm91cCgpXG4gICAgICAgICAgICAgICAgLmFkZEdhcCgxODMsIDE4MywgMTgzKVxuICAgICAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlUGFyYWxsZWxHcm91cChqYXZheC5zd2luZy5Hcm91cExheW91dC5BbGlnbm1lbnQuTEVBRElORylcbiAgICAgICAgICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVTZXF1ZW50aWFsR3JvdXAoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChsYkhlbGxvKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZFByZWZlcnJlZEdhcChqYXZheC5zd2luZy5MYXlvdXRTdHlsZS5Db21wb25lbnRQbGFjZW1lbnQuUkVMQVRFRClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQobGJVc2VyTmFtZSkpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlUGFyYWxsZWxHcm91cChqYXZheC5zd2luZy5Hcm91cExheW91dC5BbGlnbm1lbnQuTEVBRElORywgZmFsc2UpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVNlcXVlbnRpYWxHcm91cCgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVQYXJhbGxlbEdyb3VwKGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LkFsaWdubWVudC5UUkFJTElORywgZmFsc2UpXG4uLi5cbiAgICAgICAgLy88L2VkaXRvci1mb2xkPlxuXG4gICAgICAgIC8qIENyZWF0ZSBhbmQgZGlzcGxheSB0aGUgZm9ybSAqL1xuICAgICAgICBqYXZhLmF3dC5FdmVudFF1ZXVlLmludm9rZUxhdGVyKG5ldyBSdW5uYWJsZSgpIHtcbiAgICAgICAgICAgIHB1YmxpYyB2b2lkIHJ1bigpIHtcbiAgICAgICAgICAgICAgICBuZXcgRGFzaGJvYXJkKCkuc2V0VmlzaWJsZSh0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gVmFyaWFibGVzIGRlY2xhcmF0aW9uIC0gZG8gbm90IG1vZGlmeS8vR0VOLUJFR0lOOnZhcmlhYmxlc1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkJ1dHRvbiBidG5Db250cmFjdDtcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpCdXR0b24gYnRuQ3VzdG9tZXI7XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KQnV0dG9uIGJ0bkV4aXQ7XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KQnV0dG9uIGJ0bkhpc3Rvcnk7XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KQnV0dG9uIGJ0blBsYW47XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KQnV0dG9uIGJ0blN0YXRpc3RpYztcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpCdXR0b24gYnRuVXNlcjtcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpTZXBhcmF0b3IgalNlcGFyYXRvcjE7XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KTGFiZWwgbGJIZWxsbztcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpMYWJlbCBsYlVzZXJOYW1lO1xuICAgIC8vIEVuZCBvZiB2YXJpYWJsZXMgZGVjbGFyYXRpb24vL0dFTi1FTkQ6dmFyaWFibGVzXG59XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvY29tL3N0b3JlL2FwcC9wZXRzdG9yZS9EQU8vVXNlckRBTy5qYXZhXG5wYWNrYWdlIGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuREFPO1xuXG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5Nb2RlbHMuRW50aXRpZXMuVXNlcjtcbmltcG9ydCBvcmcubWluZHJvdC5qYmNyeXB0LkJDcnlwdDtcblxuaW1wb3J0IGphdmEuc3FsLio7XG5pbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDtcbmltcG9ydCBqYXZhLnV0aWwuQmFzZTY0O1xuXG5wdWJsaWMgY2xhc3MgVXNlckRBTyBpbXBsZW1lbnRzIEJhc2VEQU88VXNlciwgSW50ZWdlcj4ge1xuICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgaW50IGlzRHVwbGljYXRlID0gLTE7XG5cbiAgICBwdWJsaWMgc3RhdGljIFVzZXJEQU8gZ2V0SW5zdGFuY2UoKSB7XG4gICAgICAgIHJldHVybiBuZXcgVXNlckRBTygpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgU3RyaW5nIGVuY29kZShTdHJpbmcgcGFzc3dvcmQpIHtcbi8vICAgICAgICByZXR1cm4gQmFzZTY0LmdldEVuY29kZXIoKS5lbmNvZGVUb1N0cmluZyhwYXNzd29yZC5nZXRCeXRlcygpKTtcbiAgICAgICAgcmV0dXJuIEJDcnlwdC5oYXNocHcocGFzc3dvcmQsIEJDcnlwdC5nZW5zYWx0KCkpO1xuICAgIH1cbi4uLlxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25uID0gRGF0YWJhc2VVdGlsLmdldENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgIFN0cmluZyBzcWwgPSBcIklOU0VSVCBJTlRPIFVzZXJzICh1c2VybmFtZSwgcGFzc3dvcmQsIHJvbGUsIGltYWdlX3VybCwgaXNBY3RpdmUpIFZBTFVFUyAoPywgPywgPywgPywgPylcIjtcbiAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsLCBTdGF0ZW1lbnQuUkVUVVJOX0dFTkVSQVRFRF9LRVlTKTtcblxuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMSwgZW50aXR5LmdldFVzZXJuYW1lKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMiwgZW5jb2RlKGVudGl0eS5nZXRQYXNzd29yZCgpKSk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygzLCBlbnRpdHkuZ2V0Um9sZSgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDQsIGVudGl0eS5nZXRJbWFnZVVybCgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0Qm9vbGVhbig1LCBlbnRpdHkuaXNBY3RpdmUoKSk7XG5cbiAgICAgICAgICAgIGludCBhZmZlY3RlZFJvd3MgPSBzdG10LmV4ZWN1dGVVcGRhdGUoKTtcbiAgICAgICAgICAgIGlmIChhZmZlY3RlZFJvd3MgPT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0cnkgKFJlc3VsdFNldCBnZW5lcmF0ZWRLZXlzID0gc3RtdC5nZXRHZW5lcmF0ZWRLZXlzKCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoZ2VuZXJhdGVkS2V5cy5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdlbmVyYXRlZEtleXMuZ2V0SW50KDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgRGF0YWJhc2VVdGlsLmNsb3NlUmVzb3VyY2VzKHJzLCBzdG10LCBjb25uKTtcbiAgICAgICAgfVxuICAgIH1cbi4uLlxuUGF0aDogc3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vTG9naW4uZm9ybVxuPD94bWwgdmVyc2lvbj1cIjEuMFwiIGVuY29kaW5nPVwiVVRGLThcIiA/PlxuXG48Rm9ybSB2ZXJzaW9uPVwiMS4zXCIgbWF4VmVyc2lvbj1cIjEuOVwiIHR5cGU9XCJvcmcubmV0YmVhbnMubW9kdWxlcy5mb3JtLmZvcm1pbmZvLkpGcmFtZUZvcm1JbmZvXCI+XG4gIDxQcm9wZXJ0aWVzPlxuICAgIDxQcm9wZXJ0eSBuYW1lPVwiZGVmYXVsdENsb3NlT3BlcmF0aW9uXCIgdHlwZT1cImludFwiIHZhbHVlPVwiM1wiLz5cbiAgPC9Qcm9wZXJ0aWVzPlxuICA8U3ludGhldGljUHJvcGVydGllcz5cbiAgICA8U3ludGhldGljUHJvcGVydHkgbmFtZT1cImZvcm1TaXplUG9saWN5XCIgdHlwZT1cImludFwiIHZhbHVlPVwiMVwiLz5cbiAgICA8U3ludGhldGljUHJvcGVydHkgbmFtZT1cImdlbmVyYXRlQ2VudGVyXCIgdHlwZT1cImJvb2xlYW5cIiB2YWx1ZT1cImZhbHNlXCIvPlxuICA8L1N5bnRoZXRpY1Byb3BlcnRpZXM+XG4gIDxBdXhWYWx1ZXM+XG4gICAgPEF1eFZhbHVlIG5hbWU9XCJGb3JtU2V0dGluZ3NfYXV0b1Jlc291cmNpbmdcIiB0eXBlPVwiamF2YS5sYW5nLkludGVnZXJcIiB2YWx1ZT1cIjBcIi8+XG4gICAgPEF1eFZhbHVlIG5hbWU9XCJGb3JtU2V0dGluZ3NfYXV0b1NldENvbXBvbmVudE5hbWVcIiB0eXBlPVwiamF2YS5sYW5nLkJvb2xlYW5cIiB2YWx1ZT1cImZhbHNlXCIvPlxuICAgIDxBdXhWYWx1ZSBuYW1lPVwiRm9ybVNldHRpbmdzX2dlbmVyYXRlRlFOXCIgdHlwZT1cImphdmEubGFuZy5Cb29sZWFuXCIgdmFsdWU9XCJ0cnVlXCIvPlxuICAgIDxBdXhWYWx1ZSBuYW1lPVwiRm9ybVNldHRpbmdzX2dlbmVyYXRlTW5lbW9uaWNzQ29kZVwiIHR5cGU9XCJqYXZhLmxhbmcuQm9vbGVhblwiIHZhbHVlPVwiZmFsc2VcIi8+XG4uLi5cblBhdGg6IHNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL0FkbWluL0Rhc2hib2FyZC5mb3JtXG48P3htbCB2ZXJzaW9uPVwiMS4wXCIgZW5jb2Rpbmc9XCJVVEYtOFwiID8+XG5cbjxGb3JtIHZlcnNpb249XCIxLjNcIiBtYXhWZXJzaW9uPVwiMS45XCIgdHlwZT1cIm9yZy5uZXRiZWFucy5tb2R1bGVzLmZvcm0uZm9ybWluZm8uSkZyYW1lRm9ybUluZm9cIj5cbiAgPFByb3BlcnRpZXM+XG4gICAgPFByb3BlcnR5IG5hbWU9XCJkZWZhdWx0Q2xvc2VPcGVyYXRpb25cIiB0eXBlPVwiaW50XCIgdmFsdWU9XCIzXCIvPlxuICA8L1Byb3BlcnRpZXMuLi4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCJjNWJlMWU5NC03MzFmLTQzZjctODE1Yi1hNzY2MjMyMGQ0NTQ7dG9vbHVfMDFKMmJGbnQ0ZGJ4dEtuWjhYNmdDV1ZnIjp7InJlcXVlc3RJZCI6ImM1YmUxZTk0LTczMWYtNDNmNy04MTViLWE3NjYyMzIwZDQ1NCIsInRvb2xVc2VJZCI6InRvb2x1XzAxSjJiRm50NGRieHRLblo4WDZnQ1dWZyIsInBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IlRoZSBmb2xsb3dpbmcgY29kZSBzZWN0aW9ucyB3ZXJlIHJldHJpZXZlZDpcblBhdGg6IHNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL0xvZ2luLmphdmFcbi8qXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0xpY2Vuc2VzL2xpY2Vuc2UtZGVmYXVsdC50eHQgdG8gY2hhbmdlIHRoaXMgbGljZW5zZVxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9HVUlGb3Jtcy9KRnJhbWUuamF2YSB0byBlZGl0IHRoaXMgdGVtcGxhdGVcbiAqL1xucGFja2FnZSBpbnRlcm5ldC5tYW5nZW1lbnQuc3lzdGVtO1xuXG5pbXBvcnQgREFPLlVzZXJEQU87XG5pbXBvcnQgTW9kZWwuVXNlcjtcbmltcG9ydCBqYXZheC5zd2luZy5KT3B0aW9uUGFuZTtcbi4uLlxuXG4gICAgcHJpdmF0ZSB2b2lkIGJ0bkxvZ2luQWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkxvZ2luQWN0aW9uUGVyZm9ybWVkXG4gICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxuICAgICAgICBpZih2YWxpZGF0ZUZpZWxkcygpKSB7XG4gICAgICAgICAgICB0cnl7XG4gICAgICAgICAgICAgICAgU3RyaW5nIHVzZXJuYW1lID0gdHh0VXNlck5hbWUuZ2V0VGV4dCgpLnRyaW0oKTtcbiAgICAgICAgICAgICAgICBTdHJpbmcgcGFzc3dvcmQgPSB0eHRQYXNzd29yZC5nZXRUZXh0KCkudHJpbSgpO1xuXG4gICAgICAgICAgICAgICAgVXNlciB1c2VyID0gbnVsbDtcbiAgICAgICAgICAgICAgICBib29sZWFuIGlzU3VjY2VzcyA9IFVzZXJEQU8ubG9naW4odXNlcm5hbWUsIHBhc3N3b3JkKTtcblxuICAgICAgICAgICAgICAgIGlmKGlzU3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyh0aGlzLCBcIsSQxINuZyBuaOG6rXAgdGjDoG5oIGPDtG5nIVwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLklORk9STUFUSU9OX01FU1NBR0UpO1xuLy8gICAgICAgICAgICAgICAgICAgIG5ldyBNYWluRnJhbWUoKS5zZXRWaXNpYmxlKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyh0aGlzLCBcIlNhaSB0w6puIMSRxINuZyBuaOG6rXAgaG/hurdjIG3huq10IGto4bqpdS5cIiwgXCJM4buXaVwiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoKEV4Y2VwdGlvbiBleCkge1xuICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwiTOG7l2k6IFwiICsgZXguZ2V0TWVzc2FnZSgpLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cblxuICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0bkxvZ2luQWN0aW9uUGVyZm9ybWVkXG5cbiAgICBwcml2YXRlIHZvaWQgYnRuRm9yZ290UGFzc3dvcmRBY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuRm9yZ290UGFzc3dvcmRBY3Rpb25QZXJmb3JtZWRcbiAgICAgICAgLy8gT3BlbiB0aGUgRm9yZ290UGFzc3dvcmQgZGlhbG9nXG4gICAgICAgIEZvcmdvdFBhc3N3b3JkIGZvcmdvdFBhc3N3b3JkRGlhbG9nID0gbmV3IEZvcmdvdFBhc3N3b3JkKHRoaXMsIHRydWUpO1xuICAgICAgICBmb3Jnb3RQYXNzd29yZERpYWxvZy5zZXRWaXNpYmxlKHRydWUpO1xuICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0bkZvcmdvdFBhc3N3b3JkQWN0aW9uUGVyZm9ybWVkXG5cbiAgICBwcml2YXRlIHZvaWQgYnRuRXhpdEFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5FeGl0QWN0aW9uUGVyZm9ybWVkXG4gICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxuICAgICAgICBpbnQgcmVzdWx0ID0gSk9wdGlvblBhbmUuc2hvd0NvbmZpcm1EaWFsb2cobnVsbCwgXCJC4bqhbiBjw7MgY2jhuq9jIGNo4bqvbiBtdeG7kW4gdGhvw6F0IGtow7RuZz9cIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5ZRVNfTk9fT1BUSU9OLCBKT3B0aW9uUGFuZS5RVUVTVElPTl9NRVNTQUdFKTtcblxuICAgICAgICBpZiAocmVzdWx0ID09IEpPcHRpb25QYW5lLllFU19PUFRJT04pIHtcbiAgICAgICAgICAgIFN5c3RlbS5leGl0KDApO1xuICAgICAgICB9XG4gICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuRXhpdEFjdGlvblBlcmZvcm1lZFxuXG4gICAgcHJpdmF0ZSB2b2lkIGJ0blNpZ251cEFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5TaWdudXBBY3Rpb25QZXJmb3JtZWRcbiAgICAgICAgLy8gVE9ETyBhZGQgeW91ciBoYW5kbGluZyBjb2RlIGhlcmU6XG4gICAgICAgIHNldFZpc2libGUoZmFsc2UpO1xuICAgICAgICBuZXcgU2lnblVwKCkuc2V0VmlzaWJsZSh0cnVlKTtcbiAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5TaWdudXBBY3Rpb25QZXJmb3JtZWRcbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9jb20vc3RvcmUvYXBwL3BldHN0b3JlL0NvbnRyb2xsZXJzL0xvZ2luQ29udHJvbGxlci5qYXZhXG4uLi5cblxuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuREFPLlVzZXJEQU87XG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5EQU8uU3RhZmZEQU87XG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5Nb2RlbHMuRW50aXRpZXMuVXNlcjtcbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLk1vZGVscy5FbnRpdGllcy5TdGFmZjtcbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLlNlc3Npb25zLlNlc3Npb25NYW5hZ2VyO1xuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuVmlld3MuQWRtaW5GYWN0b3J5O1xuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuVmlld3MuVmlld0ZhY3Rvcnk7XG5pbXBvcnQgZGUuamVuc2QuZnguZ2x5cGhzLmZvbnRhd2Vzb21lLkZvbnRBd2Vzb21lSWNvbjtcbmltcG9ydCBkZS5qZW5zZC5meC5nbHlwaHMuZm9udGF3ZXNvbWUuRm9udEF3ZXNvbWVJY29uVmlldztcbmltcG9ydCBqYXZhZnguZnhtbC5GWE1MO1xuaW1wb3J0IGphdmFmeC5meG1sLkluaXRpYWxpemFibGU7XG5pbXBvcnQgamF2YWZ4LnNjZW5lLmNvbnRyb2wuKjtcbmltcG9ydCBqYXZhZnguc2NlbmUuaW5wdXQuTW91c2VFdmVudDtcbmltcG9ydCBqYXZhZnguc3RhZ2UuU3RhZ2U7XG5pbXBvcnQgamF2YWZ4LnNjZW5lLmltYWdlLkltYWdlO1xuaW1wb3J0IGphdmFmeC5zY2VuZS5pbWFnZS5JbWFnZVZpZXc7XG5pbXBvcnQgamF2YWZ4LnNjZW5lLnBhaW50LkltYWdlUGF0dGVybjtcbmltcG9ydCBqYXZhLnV0aWwuT2JqZWN0cztcbi4uLlxuXG5wdWJsaWMgY2xhc3MgTG9naW5Db250cm9sbGVyIGltcGxlbWVudHMgSW5pdGlhbGl6YWJsZSB7XG5cbiAgICBARlhNTFxuICAgIHByaXZhdGUgRm9udEF3ZXNvbWVJY29uVmlldyBleWVJY29uO1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIFRleHRGaWVsZCBzaG93UGFzc3dvcmQ7XG5cbiAgICBARlhNTFxuICAgIHByaXZhdGUgUGFzc3dvcmRGaWVsZCBwYXNzd29yZEZpZWxkO1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIFRleHRGaWVsZCB1c2VybmFtZUZpZWxkO1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIEJ1dHRvbiBsb2dpbkJ1dHRvbjtcblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBMYWJlbCBlcnJvckxhYmVsO1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIEh5cGVybGluayBmb3Jnb3RQYXNzd29yZExpbms7XG5cbiAgICBARlhNTFxuICAgIHByaXZhdGUgSW1hZ2VWaWV3IHVzZXJJbWFnZTtcblxuICAgIHByaXZhdGUgZG91YmxlIHgsIHk7XG5cbiAgICBVc2VyREFPIHVzZXJEQU8gPSBuZXcgVXNlckRBTygpO1xuICAgIFN0YWZmREFPIHN0YWZmREFPID0gU3RhZmZEQU8uZ2V0SW5zdGFuY2UoKTtcbiAgICBwdWJsaWMgc3RhdGljIGludCBpZFN0YWZmQ3VycmVudDtcbiAgICBwdWJsaWMgc3RhdGljIGludCBpZEFkbWluQ3VycmVudDtcblxuICAgIHByaXZhdGUgU2Vzc2lvbk1hbmFnZXIgc2Vzc2lvbk1hbmFnZXIgPSBuZXcgU2Vzc2lvbk1hbmFnZXIoKTtcbi4uLlxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBUw6xtIHVzZXIgdGhlbyB1c2VybmFtZVxuICAgICAgICAgICAgVXNlciB1c2VyID0gdXNlckRBTy5maW5kQnlVc2VybmFtZSh1c2VybmFtZSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmKHVzZXIgPT0gbnVsbCB8fCB1c2VyLmdldFVzZXJuYW1lKCkgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIENvbnRyb2xsZXJVdGlscy5zaG93QWxlcnQoQWxlcnQuQWxlcnRUeXBlLkVSUk9SLCBcIkzhu5dpXCIsIFwiVMOqbiDEkcSDbmcgbmjhuq1wIGtow7RuZyDEkcO6bmdcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBLaeG7g20gdHJhIHTDqm4gxJHEg25nIG5o4bqtcFxuICAgICAgICAgICAgaWYgKCF1c2VyLmdldFVzZXJuYW1lKCkuZXF1YWxzKHVzZXJuYW1lKSkge1xuICAgICAgICAgICAgICAgIENvbnRyb2xsZXJVdGlscy5zaG93QWxlcnQoQWxlcnQuQWxlcnRUeXBlLkVSUk9SLCBcIkzhu5dpXCIsIFwiVMOqbiDEkcSDbmcgbmjhuq1wIGtow7RuZyDEkcO6bmdcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBLaeG7g20gdHJhIG3huq10IGto4bqpdVxuICAgICAgICAgICAgaWYoIUJDcnlwdC5jaGVja3B3KHBhc3N3b3JkLCB1c2VyLmdldFBhc3N3b3JkKCkpKSB7XG4gICAgICAgICAgICAgICAgQ29udHJvbGxlclV0aWxzLnNob3dBbGVydChBbGVydC5BbGVydFR5cGUuRVJST1IsIFwiTOG7l2lcIiwgXCJN4bqtdCBraOG6qXUga2jDtG5nIMSRw7puZ1wiKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNlc3Npb25NYW5hZ2VyLnNldEN1cnJlbnRVc2VyKHVzZXIpO1xuXG4gICAgICAgICAgICBTdGFnZSBjdXJyZW50U3RhZ2UgPSAoU3RhZ2UpIHVzZXJuYW1lRmllbGQuZ2V0U2NlbmUoKS5nZXRXaW5kb3coKTtcblxuICAgICAgICAgICAgaWYodXNlci5nZXRSb2xlKCkuZXF1YWxzKFVzZXIuUk9MRV9BRE1JTikpIHtcbiAgICAgICAgICAgICAgICBpZEFkbWluQ3VycmVudCA9IHVzZXIuZ2V0VXNlcklkKCk7XG4gICAgICAgICAgICAgICAgQWRtaW5GYWN0b3J5LmdldEluc3RhbmNlKCkuc3dpdGNoQ29udGVudChcImRhc2hib2FyZFwiLCBjdXJyZW50U3RhZ2UpO1xuICAgICAgICAgICAgfSBlbHNlIGlmKHVzZXIuZ2V0Um9sZSgpLmVxdWFscyhVc2VyLlJPTEVfVVNFUikpIHtcbiAgICAgICAgICAgICAgICBpZFN0YWZmQ3VycmVudCA9IHVzZXIuZ2V0VXNlcklkKCk7XG4gICAgICAgICAgICAgICAgU3RhZmYgc3RhZmYgPSBzdGFmZkRBTy5maW5kQnlVc2VySWQodXNlci5nZXRVc2VySWQoKSk7XG4gICAgICAgICAgICAgICAgaWYgKHN0YWZmICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbk1hbmFnZXIuc2V0Q3VycmVudFN0YWZmKHN0YWZmKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgVmlld0ZhY3RvcnkuZ2V0SW5zdGFuY2UoKS5zd2l0Y2hDb250ZW50KFwiZGFzaGJvYXJkXCIsIGN1cnJlbnRTdGFnZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIENvbnRyb2xsZXJVdGlscy5zaG93QWxlcnQoQWxlcnQuQWxlcnRUeXBlLkVSUk9SLCBcIkzhu5dpXCIsIFwiVmFpIHRyw7IgbmfGsOG7nWkgZMO5bmcga2jDtG5nIGjhu6NwIGzhu4dcIik7XG4gICAgICAgICAgICAgICAgc2Vzc2lvbk1hbmFnZXIuY2xlYXIoKTtcbiAgICAgICAgICAgIH1cbi4uLlxuUGF0aDogc3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vRm9yZ290UGFzc3dvcmQuamF2YVxuLypcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvTGljZW5zZXMvbGljZW5zZS1kZWZhdWx0LnR4dCB0byBjaGFuZ2UgdGhpcyBsaWNlbnNlXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0dVSUZvcm1zL0pGcmFtZS5qYXZhIHRvIGVkaXQgdGhpcyB0ZW1wbGF0ZVxuICovXG5wYWNrYWdlIGludGVybmV0Lm1hbmdlbWVudC5zeXN0ZW07XG5cbmltcG9ydCBEQU8uU3Vic2NyaWJlckRBTztcbmltcG9ydCBNb2RlbC5TdWJzY3JpYmVyO1xuaW1wb3J0IGphdmF4LnN3aW5nLkpPcHRpb25QYW5lO1xuaW1wb3J0IGludGVybmV0Lm1hbmdlbWVudC5zeXN0ZW0uTG9naW47XG4uLi5cblxuICAgIHByaXZhdGUgdm9pZCBidG5FeGl0QWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkV4aXRBY3Rpb25QZXJmb3JtZWRcbiAgICAgICAgLy8gVE9ETyBhZGQgeW91ciBoYW5kbGluZyBjb2RlIGhlcmU6XG4gICAgICAgIGludCByZXN1bHQgPSBKT3B0aW9uUGFuZS5zaG93Q29uZmlybURpYWxvZyhudWxsLCBcIkLhuqFuIGPDsyBjaOG6r2MgY2jhuq9uIG114buRbiB0aG/DoXQga2jDtG5nP1wiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLllFU19OT19PUFRJT04sIEpPcHRpb25QYW5lLlFVRVNUSU9OX01FU1NBR0UpO1xuXG4gICAgICAgIGlmIChyZXN1bHQgPT0gSk9wdGlvblBhbmUuWUVTX09QVElPTikge1xuICAgICAgICAgICAgbmV3IExvZ2luKCkuc2V0VmlzaWJsZSh0cnVlKTtcbiAgICAgICAgICAgIHRoaXMuZGlzcG9zZSgpO1xuICAgICAgICB9XG4gICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuRXhpdEFjdGlvblBlcmZvcm1lZFxuXG4gICAgcHJpdmF0ZSB2b2lkIGJ0bkNoZWNrQWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkNoZWNrQWN0aW9uUGVyZm9ybWVkXG4gICAgICAgIFN5c3RlbS5vdXQucHJpbnQoXCJIZWxsb1wiKTtcbiAgICAgICAgaWYgKHZhbGlkYXRlUGhvbmUoKSkge1xuICAgICAgICAgICAgU3RyaW5nIHBob25lID0gdHh0UGhvbmUuZ2V0VGV4dCgpO1xuICAgICAgICAgICAgY3VycmVudFN1YnNjcmliZXIgPSBTdWJzY3JpYmVyREFPLmdldEJ5UGhvbmUocGhvbmUpO1xuLi4uXG5cbiAgICBwcml2YXRlIHZvaWQgYnRuQ2hhbmdlQWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkNoYW5nZUFjdGlvblBlcmZvcm1lZFxuICAgICAgICBpZiAodmFsaWRhdGVGaWVsZHMoKSAmJiBjdXJyZW50U3Vic2NyaWJlciAhPSBudWxsKSB7XG4gICAgICAgICAgICBTdHJpbmcgbmV3UGFzc3dvcmQgPSB0eHRQYXNzd29yZC5nZXRUZXh0KCk7XG5cbiAgICAgICAgICAgIGJvb2xlYW4gc3VjY2VzcyA9IFN1YnNjcmliZXJEQU8udXBkYXRlUGFzc3dvcmQoY3VycmVudFN1YnNjcmliZXIuZ2V0VXNlcl9pZCgpLCBuZXdQYXNzd29yZCk7XG5cbiAgICAgICAgICAgIGlmIChzdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXCLEkOG7lWkgbeG6rXQga2jhuql1IHRow6BuaCBjw7RuZyEgVnVpIGzDsm5nIMSRxINuZyBuaOG6rXAgbOG6oWkuXCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuSU5GT1JNQVRJT05fTUVTU0FHRSk7XG4gICAgICAgICAgICAgICAgbmV3IExvZ2luKCkuc2V0VmlzaWJsZSh0cnVlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXCLEkOG7lWkgbeG6rXQga2jhuql1IHRo4bqldCBi4bqhaSEgVnVpIGzDsm5nIHRo4butIGzhuqFpIHNhdS5cIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0bkNoYW5nZUFjdGlvblBlcmZvcm1lZFxuLi4uXG5QYXRoOiBzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9TaWduVXAuamF2YVxuLypcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvTGljZW5zZXMvbGljZW5zZS1kZWZhdWx0LnR4dCB0byBjaGFuZ2UgdGhpcyBsaWNlbnNlXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0dVSUZvcm1zL0pGcmFtZS5qYXZhIHRvIGVkaXQgdGhpcyB0ZW1wbGF0ZVxuICovXG5wYWNrYWdlIGludGVybmV0Lm1hbmdlbWVudC5zeXN0ZW07XG5cbmltcG9ydCBEQU8uU3Vic2NyaWJlckRBTztcbmltcG9ydCBNb2RlbC5TdWJzY3JpYmVyO1xuaW1wb3J0IGphdmEudGltZS5Mb2NhbERhdGVUaW1lO1xuaW1wb3J0IGphdmF4LnN3aW5nLkpPcHRpb25QYW5lO1xuXG4vKipcbiAqXG4gKiBAYXV0aG9yIE5nb2MgVGhhb1xuICovXG5wdWJsaWMgY2xhc3MgU2lnblVwIGV4dGVuZHMgamF2YXguc3dpbmcuSkZyYW1lIHtcblxuICAgIHB1YmxpYyBTdHJpbmcgcGhvbmVQYXR0ZXJuID0gXCJeWzAtOV0qJFwiO1xuICAgIHByaXZhdGUgU3RyaW5nIERFRkFVTFRfUk9MRSA9IFwidXNlclwiO1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgbmV3IGZvcm0gU2lnbkluXG4gICAgICovXG4gICAgcHVibGljIFNpZ25VcCgpIHtcbiAgICAgICAgaW5pdENvbXBvbmVudHMoKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBjbGVhcigpe1xuICAgICAgICB0eHROYW1lLnNldFRleHQoXCJcIik7XG4gICAgICAgIHR4dFVzZXJOYW1lLnNldFRleHQoXCJcIik7XG4gICAgICAgIHR4dFBhc3N3b3JkLnNldFRleHQoXCJcIik7XG4gICAgICAgIHR4dEFkZHJlc3Muc2V0VGV4dChcIlwiKTtcbiAgICAgICAgdHh0UGhvbmUuc2V0VGV4dChcIlwiKTtcbiAgICB9XG4uLi5cblxuICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0blJldHVybkFjdGlvblBlcmZvcm1lZFxuXG4gICAgcHJpdmF0ZSB2b2lkIGJ0blNpZ251cEFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5TaWdudXBBY3Rpb25QZXJmb3JtZWRcbiAgICAgICAgLy8gVE9ETyBhZGQgeW91ciBoYW5kbGluZyBjb2RlIGhlcmU6XG4gICAgICAgIGlmICh2YWxpZGF0ZUZpZWxkcygpKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIFN1YnNjcmliZXIgc3ViID0gbmV3IFN1YnNjcmliZXIoKTtcbiAgICAgICAgICAgICAgICBzdWIuc2V0RnVsbE5hbWUodHh0TmFtZS5nZXRUZXh0KCkpO1xuICAgICAgICAgICAgICAgIHN1Yi5zZXRVc2VybmFtZSh0eHRVc2VyTmFtZS5nZXRUZXh0KCkpO1xuICAgICAgICAgICAgICAgIHN1Yi5zZXRQYXNzd29yZCh0eHRQYXNzd29yZC5nZXRUZXh0KCkpO1xuICAgICAgICAgICAgICAgIHN1Yi5zZXRSb2xlKERFRkFVTFRfUk9MRSk7XG4gICAgICAgICAgICAgICAgc3ViLnNldEFkZHJlc3ModHh0QWRkcmVzcy5nZXRUZXh0KCkpO1xuICAgICAgICAgICAgICAgIHN1Yi5zZXRQaG9uZSh0eHRQaG9uZS5nZXRUZXh0KCkpO1xuICAgICAgICAgICAgICAgIHN1Yi5zZXRDcmVhdGVfYXQoTG9jYWxEYXRlVGltZS5ub3coKSk7XG4gICAgICAgICAgICAgICAgU3Vic2NyaWJlckRBTy5pbnNlcnQoc3ViKTtcbiAgICAgICAgICAgICAgICBjbGVhcigpO1xuICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGV4KSB7XG4gICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXCJM4buXaTogXCIgKyBleC5nZXRNZXNzYWdlKCksIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5TaWdudXBBY3Rpb25QZXJmb3JtZWRcbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9jb20vc3RvcmUvYXBwL3BldHN0b3JlL0NvbnRyb2xsZXJzL0FkbWluL0Rhc2hib2FyZENvbnRyb2xsZXIuamF2YVxuLi4uXG5cbiAgICBwcml2YXRlIHZvaWQgbmF2aWdhdGVUbyhTdHJpbmcgdmlld05hbWUpIHtcbiAgICAgICAgU3RhZ2UgY3VycmVudFN0YWdlID0gKFN0YWdlKSBsb2dvdXRCdXR0b24uZ2V0U2NlbmUoKS5nZXRXaW5kb3coKTtcbiAgICAgICAgQWRtaW5GYWN0b3J5LmdldEluc3RhbmNlKCkuc3dpdGNoQ29udGVudCh2aWV3TmFtZSwgY3VycmVudFN0YWdlKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHZvaWQgaGFuZGxlTG9nb3V0KCkge1xuICAgICAgICAvLyBTdG9wIGF1dG8tcmVmcmVzaCBpZiBhY3RpdmVcbiAgICAgICAgc3RvcEF1dG9SZWZyZXNoKCk7XG5cbiAgICAgICAgU3RhZ2UgY3VycmVudFN0YWdlID0gKFN0YWdlKSBsb2dvdXRCdXR0b24uZ2V0U2NlbmUoKS5nZXRXaW5kb3coKTtcbiAgICAgICAgaWYgKENvbnRyb2xsZXJVdGlscy5zaG93Q29uZmlybWF0aW9uQW5kV2FpdChcIsSQxINuZyB4deG6pXRcIiwgXCJC4bqhbiBjw7MgY2jhuq9jIGNo4bqvbiBtdeG7kW4gxJHEg25nIHh14bqldCBraMO0bmc/XFxuTmjhuqVuIE9LIMSR4buDIHjDoWMgbmjhuq1uLlwiKSkge1xuICAgICAgICAgICAgU2Vzc2lvbk1hbmFnZXIuY2xlYXIoKTtcbiAgICAgICAgICAgIFZpZXdGYWN0b3J5LmdldEluc3RhbmNlKCkuc3dpdGNoQ29udGVudChcImxvZ2luXCIsIGN1cnJlbnRTdGFnZSk7XG4gICAgICAgIH1cbiAgICB9XG5cblxufVxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL2NvbS9zdG9yZS9hcHAvcGV0c3RvcmUvQ29udHJvbGxlcnMvQWRtaW4vQWRtaW5NZW51Q29udHJvbGxlci5qYXZhXG4uLi5cblxuICAgICAgICBNZW51SXRlbSBsb2dvdXRNZW51SXRlbSA9IG5ldyBNZW51SXRlbShcIsSQxINuZyB4deG6pXRcIik7XG4gICAgICAgIGxvZ291dE1lbnVJdGVtLnNldE9uQWN0aW9uKGUgLT4gaGFuZGxlTG9nb3V0KG51bGwpKTtcbiAgICAgICAgbWVudUxvZ291dC5nZXRJdGVtcygpLmFkZChsb2dvdXRNZW51SXRlbSk7XG4gICAgfVxuXG4gICAgQEZYTUxcbiAgICB2b2lkIGhhbmRsZUxvZ291dChBY3Rpb25FdmVudCBldmVudCkge1xuICAgICAgICBTdGFnZSBjdXJyZW50U3RhZ2UgPSAoU3RhZ2UpIHJvb3QuZ2V0U2NlbmUoKS5nZXRXaW5kb3coKTtcbiAgICAgICAgaWYgKENvbnRyb2xsZXJVdGlscy5zaG93Q29uZmlybWF0aW9uQW5kV2FpdChcIsSQxINuZyB4deG6pXRcIiwgXCJC4bqhbiBjw7MgY2jhuq9jIGNo4bqvbiBtdeG7kW4gxJHEg25nIHh14bqldCBraMO0bmc/XFxuTmjhuqVuIE9LIMSR4buDIHjDoWMgbmjhuq1uLlwiKSkge1xuICAgICAgICAgICAgU2Vzc2lvbk1hbmFnZXIuY2xlYXIoKTtcbiAgICAgICAgICAgIFZpZXdGYWN0b3J5LmdldEluc3RhbmNlKCkuc3dpdGNoQ29udGVudChcImxvZ2luXCIsIGN1cnJlbnRTdGFnZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBDb250cm9sbGVyVXRpbHMuc2hvd0FsZXJ0KEFsZXJ0LkFsZXJ0VHlwZS5JTkZPUk1BVElPTiwgXCJUaMO0bmcgYsOhb1wiLCBcIsSQxINuZyB4deG6pXQga2jDtG5nIHRow6BuaCBjw7RuZ1wiKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi4uLlxuUGF0aDogc3JjL0RBTy9Vc2VyREFPLmphdmFcbi8qXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0xpY2Vuc2VzL2xpY2Vuc2UtZGVmYXVsdC50eHQgdG8gY2hhbmdlIHRoaXMgbGljZW5zZVxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NsYXNzLmphdmEgdG8gZWRpdCB0aGlzIHRlbXBsYXRlXG4gKi9cbnBhY2thZ2UgREFPO1xuXG5pbXBvcnQgTW9kZWwuVXNlcjtcbmltcG9ydCBqYXZhLnV0aWwuTGlzdDtcblxuLyoqXG4gKlxuICogQGF1dGhvciBOZ29jIFRoYW9cbiAqL1xucHVibGljIGNsYXNzIFVzZXJEQU97XG5cbiAgICBwdWJsaWMgc3RhdGljIHZvaWQgaW5zZXJ0KFVzZXIgb2JqKSB7XG4gICAgICAgIFxuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgdm9pZCB1cGRhdGUoVXNlciBvYmopIHtcbiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpOyAvLyBHZW5lcmF0ZWQgZnJvbSBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ29kZS9HZW5lcmF0ZWRNZXRob2RCb2R5XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyB2b2lkIGRlbGV0ZShpbnQgaWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpOyAvLyBHZW5lcmF0ZWQgZnJvbSBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ29kZS9HZW5lcmF0ZWRNZXRob2RCb2R5XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBVc2VyIGdldEJ5SWQoaW50IGlkKSB7XG4gICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbihcIk5vdCBzdXBwb3J0ZWQgeWV0LlwiKTsgLy8gR2VuZXJhdGVkIGZyb20gbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NvZGUvR2VuZXJhdGVkTWV0aG9kQm9keVxuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxVc2VyPiBnZXRBbGwoKSB7XG4gICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbihcIk5vdCBzdXBwb3J0ZWQgeWV0LlwiKTsgLy8gR2VuZXJhdGVkIGZyb20gbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NvZGUvR2VuZXJhdGVkTWV0aG9kQm9keVxuICAgIH1cbiAgICBcbn1cbi4uLlxuUGF0aDogc3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vSW50ZXJuZXRNYW5nZW1lbnRTeXN0ZW0uamF2YVxuLypcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvTGljZW5zZXMvbGljZW5zZS1kZWZhdWx0LnR4dCB0byBjaGFuZ2UgdGhpcyBsaWNlbnNlXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvTWFpbi5qYXZhIHRvIGVkaXQgdGhpcyB0ZW1wbGF0ZVxuICovXG5wYWNrYWdlIGludGVybmV0Lm1hbmdlbWVudC5zeXN0ZW07XG5cbi8qKlxuICpcbiAqIEBhdXRob3IgTmdvYyBUaGFvXG4gKi9cbnB1YmxpYyBjbGFzcyBJbnRlcm5ldE1hbmdlbWVudFN5c3RlbSB7XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gYXJncyB0aGUgY29tbWFuZCBsaW5lIGFyZ3VtZW50c1xuICAgICAqL1xuICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBtYWluKFN0cmluZ1tdIGFyZ3MpIHtcbiAgICAgICAgLy8gVE9ETyBjb2RlIGFwcGxpY2F0aW9uIGxvZ2ljIGhlcmVcbiAgICB9XG4gICAgXG59XG4uLi5cblBhdGg6IHNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL0FkbWluL0Rhc2hib2FyZC5qYXZhXG4uLi5cblxuLyoqXG4gKlxuICogQGF1dGhvciBOZ29jIFRoYW9cbiAqL1xucHVibGljIGNsYXNzIERhc2hib2FyZCBleHRlbmRzIGphdmF4LnN3aW5nLkpGcmFtZSB7XG5cbiAgICBVc2VyIGFkbWluID0gVXNlclNlc3Npb24uZ2V0Q3VycmVudFVzZXIoKTtcbiAgICBcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIG5ldyBmb3JtIERhc2hib2FyZFxuICAgICAqL1xuICAgIHB1YmxpYyBEYXNoYm9hcmQoKSB7XG4gICAgICAgIGluaXRDb21wb25lbnRzKCk7XG4gICAgICAgIHNldHVwSGVsbG8oKTtcbiAgICAgICAgc2V0dXBVc2VybmFtZSgpO1xuICAgIH1cbiAgICBcbiAgICBwcml2YXRlIHZvaWQgc2V0dXBIZWxsbygpIHtcbiAgICAgICAgTG9jYWxUaW1lIG5vdyA9IExvY2FsVGltZS5ub3coKTtcbiAgICAgICAgaW50IGhvdXIgPSBub3cuZ2V0SG91cigpO1xuICAgICAgICBcbiAgICAgICAgU3RyaW5nIGdyZWV0aW5nO1xuXG4gICAgICAgIGlmIChob3VyID49IDUgJiYgaG91ciA8IDExKSB7XG4gICAgICAgICAgICBncmVldGluZyA9IFwiQ2jDoG8gYnXhu5VpIHPDoW5nLFwiO1xuICAgICAgICB9IGVsc2UgaWYgKGhvdXIgPj0gMTEgJiYgaG91ciA8IDE1KSB7XG4gICAgICAgICAgICBncmVldGluZyA9IFwiQ2jDoG8gYnXhu5VpIHRyxrBhLFwiO1xuICAgICAgICB9IGVsc2UgaWYgKGhvdXIgPj0gMTUgJiYgaG91ciA8IDE3KSB7XG4gICAgICAgICAgICBncmVldGluZyA9IFwiQ2jDoG8gYnXhu5VpIGNoaeG7gXUsXCI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBncmVldGluZyA9IFwiQ2jDoG8gYnXhu5VpIHThu5FpLFwiO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBsYkhlbGxvLnNldFRleHQoZ3JlZXRpbmcpO1xuICAgIH1cbiAgICBcbiAgICBwcml2YXRlIHZvaWQgc2V0dXBVc2VybmFtZSgpIHtcbiAgICAgICAgbGJVc2VyTmFtZS5zZXRUZXh0KGFkbWluLmdldFVzZXJuYW1lKCkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGNhbGxlZCBmcm9tIHdpdGhpbiB0aGUgY29uc3RydWN0b3IgdG8gaW5pdGlhbGl6ZSB0aGUgZm9ybS5cbiAgICAgKiBXQVJOSU5HOiBEbyBOT1QgbW9kaWZ5IHRoaXMgY29kZS4gVGhlIGNvbnRlbnQgb2YgdGhpcyBtZXRob2QgaXMgYWx3YXlzXG4gICAgICogcmVnZW5lcmF0ZWQgYnkgdGhlIEZvcm0gRWRpdG9yLlxuICAgICAqL1xuICAgIEBTdXBwcmVzc1dhcm5pbmdzKFwidW5jaGVja2VkXCIpXG4gICAgLy8gPGVkaXRvci1mb2xkIGRlZmF1bHRzdGF0ZT1cImNvbGxhcHNlZFwiIGRlc2M9XCJHZW5lcmF0ZWQgQ29kZVwiPi8vR0VOLUJFR0lOOmluaXRDb21wb25lbnRzXG4gICAgcHJpdmF0ZSB2b2lkIGluaXRDb21wb25lbnRzKCkge1xuXG4gICAgICAgIGJ0blVzZXIgPSBuZXcgamF2YXguc3dpbmcuSkJ1dHRvbigpO1xuICAgICAgICBidG5DdXN0b21lciA9IG5ldyBqYXZheC5zd2luZy5KQnV0dG9uKCk7XG4gICAgICAgIGJ0blBsYW4gPSBuZXcgamF2YXguc3dpbmcuSkJ1dHRvbigpO1xuICAgICAgICBidG5Db250cmFjdCA9IG5ldyBqYXZheC5zd2luZy5KQnV0dG9uKCk7XG4gICAgICAgIGJ0bkhpc3RvcnkgPSBuZXcgamF2YXguc3dpbmcuSkJ1dHRvbigpO1xuICAgICAgICBidG5TdGF0aXN0aWMgPSBuZXcgamF2YXguc3dpbmcuSkJ1dHRvbigpO1xuICAgICAgICBidG5FeGl0ID0gbmV3IGphdmF4LnN3aW5nLkpCdXR0b24oKTtcbiAgICAgICAgalNlcGFyYXRvcjEgPSBuZXcgamF2YXguc3dpbmcuSlNlcGFyYXRvcigpO1xuICAgICAgICBsYlVzZXJOYW1lID0gbmV3IGphdmF4LnN3aW5nLkpMYWJlbCgpO1xuICAgICAgICBsYkhlbGxvID0gbmV3IGphdmF4LnN3aW5nLkpMYWJlbCgpO1xuXG4gICAgICAgIHNldERlZmF1bHRDbG9zZU9wZXJhdGlvbihqYXZheC5zd2luZy5XaW5kb3dDb25zdGFudHMuRVhJVF9PTl9DTE9TRSk7XG5cbiAgICAgICAgYnRuVXNlci5zZXRGb250KG5ldyBqYXZhLmF3dC5Gb250KFwiQXJpYWxcIiwgMSwgMjQpKTsgLy8gTk9JMThOXG4gICAgICAgIGJ0blVzZXIuc2V0SWNvbihuZXcgamF2YXguc3dpbmcuSW1hZ2VJY29uKGdldENsYXNzKCkuZ2V0UmVzb3VyY2UoXCIvSW1hZ2VzL3VzZXIucG5nXCIpKSk7IC8vIE5PSTE4TlxuICAgICAgICBidG5Vc2VyLnNldFRleHQoXCJRdeG6o24gbMO9IG5nxrDhu51pIGTDuW5nXCIpO1xuICAgICAgICBidG5Vc2VyLnNldEN1cnNvcihuZXcgamF2YS5hd3QuQ3Vyc29yKGphdmEuYXd0LkN1cnNvci5IQU5EX0NVUlNPUikpO1xuICAgICAgICBidG5Vc2VyLnNldEhvcml6b250YWxBbGlnbm1lbnQoamF2YXguc3dpbmcuU3dpbmdDb25zdGFudHMuTEVGVCk7XG4gICAgICAgIGJ0blVzZXIuYWRkQWN0aW9uTGlzdGVuZXIobmV3IGphdmEuYXd0LmV2ZW50LkFjdGlvbkxpc3RlbmVyKCkge1xuICAgICAgICAgICAgcHVibGljIHZvaWQgYWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkge1xuICAgICAgICAgICAgICAgIGJ0blVzZXJBY3Rpb25QZXJmb3JtZWQoZXZ0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4uLi5cbiAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChidG5DdXN0b21lciwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuREVGQVVMVF9TSVpFLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5ERUZBVUxUX1NJWkUsIFNob3J0Lk1BWF9WQUxVRSkpXG4gICAgICAgICAgICAgICAgLmFkZEdhcCgzNSwgMzUsIDM1KVxuICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQoYnRuRXhpdCwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUsIDQwLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSlcbiAgICAgICAgICAgICAgICAuYWRkR2FwKDIwMSwgMjAxLCAyMDEpKVxuICAgICAgICApO1xuXG4gICAgICAgIHBhY2soKTtcbiAgICB9Ly8gPC9lZGl0b3ItZm9sZD4vL0dFTi1FTkQ6aW5pdENvbXBvbmVudHNcblxuICAgIHByaXZhdGUgdm9pZCBidG5Vc2VyQWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0blVzZXJBY3Rpb25QZXJmb3JtZWRcbiAgICAgICAgLy8gVE9ETyBhZGQgeW91ciBoYW5kbGluZyBjb2RlIGhlcmU6XG4gICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuVXNlckFjdGlvblBlcmZvcm1lZFxuXG4gICAgcHJpdmF0ZSB2b2lkIGJ0bkN1c3RvbWVyQWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkN1c3RvbWVyQWN0aW9uUGVyZm9ybWVkXG4gICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxuICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0bkN1c3RvbWVyQWN0aW9uUGVyZm9ybWVkXG4uLi5cbiAgICAgICAgLy88L2VkaXRvci1mb2xkPlxuXG4gICAgICAgIC8qIENyZWF0ZSBhbmQgZGlzcGxheSB0aGUgZm9ybSAqL1xuICAgICAgICBqYXZhLmF3dC5FdmVudFF1ZXVlLmludm9rZUxhdGVyKG5ldyBSdW5uYWJsZSgpIHtcbiAgICAgICAgICAgIHB1YmxpYyB2b2lkIHJ1bigpIHtcbiAgICAgICAgICAgICAgICBuZXcgRGFzaGJvYXJkKCkuc2V0VmlzaWJsZSh0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gVmFyaWFibGVzIGRlY2xhcmF0aW9uIC0gZG8gbm90IG1vZGlmeS8vR0VOLUJFR0lOOnZhcmlhYmxlc1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkJ1dHRvbiBidG5Db250cmFjdDtcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpCdXR0b24gYnRuQ3VzdG9tZXI7XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KQnV0dG9uIGJ0bkV4aXQ7XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KQnV0dG9uIGJ0bkhpc3Rvcnk7XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KQnV0dG9uIGJ0blBsYW47XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KQnV0dG9uIGJ0blN0YXRpc3RpYztcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpCdXR0b24gYnRuVXNlcjtcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpTZXBhcmF0b3IgalNlcGFyYXRvcjE7XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KTGFiZWwgbGJIZWxsbztcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpMYWJlbCBsYlVzZXJOYW1lO1xuICAgIC8vIEVuZCBvZiB2YXJpYWJsZXMgZGVjbGFyYXRpb24vL0dFTi1FTkQ6dmFyaWFibGVzXG59XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvY29tL3N0b3JlL2FwcC9wZXRzdG9yZS9EQU8vVXNlckRBTy5qYXZhXG5wYWNrYWdlIGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuREFPO1xuXG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5Nb2RlbHMuRW50aXRpZXMuVXNlcjtcbmltcG9ydCBvcmcubWluZHJvdC5qYmNyeXB0LkJDcnlwdDtcblxuaW1wb3J0IGphdmEuc3FsLio7XG5pbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDtcbmltcG9ydCBqYXZhLnV0aWwuQmFzZTY0O1xuXG5wdWJsaWMgY2xhc3MgVXNlckRBTyBpbXBsZW1lbnRzIEJhc2VEQU88VXNlciwgSW50ZWdlcj4ge1xuICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgaW50IGlzRHVwbGljYXRlID0gLTE7XG5cbiAgICBwdWJsaWMgc3RhdGljIFVzZXJEQU8gZ2V0SW5zdGFuY2UoKSB7XG4gICAgICAgIHJldHVybiBuZXcgVXNlckRBTygpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgU3RyaW5nIGVuY29kZShTdHJpbmcgcGFzc3dvcmQpIHtcbi8vICAgICAgICByZXR1cm4gQmFzZTY0LmdldEVuY29kZXIoKS5lbmNvZGVUb1N0cmluZyhwYXNzd29yZC5nZXRCeXRlcygpKTtcbiAgICAgICAgcmV0dXJuIEJDcnlwdC5oYXNocHcocGFzc3dvcmQsIEJDcnlwdC5nZW5zYWx0KCkpO1xuICAgIH1cbi4uLlxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25uID0gRGF0YWJhc2VVdGlsLmdldENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgIFN0cmluZyBzcWwgPSBcIklOU0VSVCBJTlRPIFVzZXJzICh1c2VybmFtZSwgcGFzc3dvcmQsIHJvbGUsIGltYWdlX3VybCwgaXNBY3RpdmUpIFZBTFVFUyAoPywgPywgPywgPywgPylcIjtcbiAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsLCBTdGF0ZW1lbnQuUkVUVVJOX0dFTkVSQVRFRF9LRVlTKTtcblxuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMSwgZW50aXR5LmdldFVzZXJuYW1lKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMiwgZW5jb2RlKGVudGl0eS5nZXRQYXNzd29yZCgpKSk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygzLCBlbnRpdHkuZ2V0Um9sZSgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDQsIGVudGl0eS5nZXRJbWFnZVVybCgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0Qm9vbGVhbig1LCBlbnRpdHkuaXNBY3RpdmUoKSk7XG5cbiAgICAgICAgICAgIGludCBhZmZlY3RlZFJvd3MgPSBzdG10LmV4ZWN1dGVVcGRhdGUoKTtcbiAgICAgICAgICAgIGlmIChhZmZlY3RlZFJvd3MgPT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0cnkgKFJlc3VsdFNldCBnZW5lcmF0ZWRLZXlzID0gc3RtdC5nZXRHZW5lcmF0ZWRLZXlzKCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoZ2VuZXJhdGVkS2V5cy5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdlbmVyYXRlZEtleXMuZ2V0SW50KDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgRGF0YWJhc2VVdGlsLmNsb3NlUmVzb3VyY2VzKHJzLCBzdG10LCBjb25uKTtcbiAgICAgICAgfVxuICAgIH1cbi4uLlxuUGF0aDogc3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vTG9naW4uZm9ybVxuPD94bWwgdmVyc2lvbj1cIjEuMFwiIGVuY29kaW5nPVwiVVRGLThcIiA/PlxuXG48Rm9ybSB2ZXJzaW9uPVwiMS4zXCIgbWF4VmVyc2lvbj1cIjEuOVwiIHR5cGU9XCJvcmcubmV0YmVhbnMubW9kdWxlcy5mb3JtLmZvcm1pbmZvLkpGcmFtZUZvcm1JbmZvXCI+XG4gIDxQcm9wZXJ0aWVzPlxuICAgIDxQcm9wZXJ0eSBuYW1lPVwiZGVmYXVsdENsb3NlT3BlcmF0aW9uXCIgdHlwZT1cImludFwiIHZhbHVlPVwiM1wiLz5cbiAgPC9Qcm9wZXJ0aWVzPlxuICA8U3ludGhldGljUHJvcGVydGllcz5cbiAgICA8U3ludGhldGljUHJvcGVydHkgbmFtZT1cImZvcm1TaXplUG9saWN5XCIgdHlwZT1cImludFwiIHZhbHVlPVwiMVwiLz5cbiAgICA8U3ludGhldGljUHJvcGVydHkgbmFtZT1cImdlbmVyYXRlQ2VudGVyXCIgdHlwZT1cImJvb2xlYW5cIiB2YWx1ZT1cImZhbHNlXCIvPlxuICA8L1N5bnRoZXRpY1Byb3BlcnRpZXM+XG4gIDxBdXhWYWx1ZXM+XG4gICAgPEF1eFZhbHVlIG5hbWU9XCJGb3JtU2V0dGluZ3NfYXV0b1Jlc291cmNpbmdcIiB0eXBlPVwiamF2YS5sYW5nLkludGVnZXJcIiB2YWx1ZT1cIjBcIi8+XG4gICAgPEF1eFZhbHVlIG5hbWU9XCJGb3JtU2V0dGluZ3NfYXV0b1NldENvbXBvbmVudE5hbWVcIiB0eXBlPVwiamF2YS5sYW5nLkJvb2xlYW5cIiB2YWx1ZT1cImZhbHNlXCIvPlxuICAgIDxBdXhWYWx1ZSBuYW1lPVwiRm9ybVNldHRpbmdzX2dlbmVyYXRlRlFOXCIgdHlwZT1cImphdmEubGFuZy5Cb29sZWFuXCIgdmFsdWU9XCJ0cnVlXCIvPlxuICAgIDxBdXhWYWx1ZSBuYW1lPVwiRm9ybVNldHRpbmdzX2dlbmVyYXRlTW5lbW9uaWNzQ29kZVwiIHR5cGU9XCJqYXZhLmxhbmcuQm9vbGVhblwiIHZhbHVlPVwiZmFsc2VcIi8+XG4uLi5cblBhdGg6IHNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL0FkbWluL0Rhc2hib2FyZC5mb3JtXG48P3htbCB2ZXJzaW9uPVwiMS4wXCIgZW5jb2Rpbmc9XCJVVEYtOFwiID8+XG5cbjxGb3JtIHZlcnNpb249XCIxLjNcIiBtYXhWZXJzaW9uPVwiMS45XCIgdHlwZT1cIm9yZy5uZXRiZWFucy5tb2R1bGVzLmZvcm0uZm9ybWluZm8uSkZyYW1lRm9ybUluZm9cIj5cbiAgPFByb3BlcnRpZXM+XG4gICAgPFByb3BlcnR5IG5hbWU9XCJkZWZhdWx0Q2xvc2VPcGVyYXRpb25cIiB0eXBlPVwiaW50XCIgdmFsdWU9XCIzXCIvPlxuICA8Ly4uLiIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX0sImZkOTRhMzJhLTQzNGYtNDc4My1hYjQzLTM0YjdlODU0ZmIzYTt0b29sdV8wMTJ6OGNpSkxrOEtnYWZhWVpnMVhjNmMiOnsicmVxdWVzdElkIjoiZmQ5NGEzMmEtNDM0Zi00NzgzLWFiNDMtMzRiN2U4NTRmYjNhIiwidG9vbFVzZUlkIjoidG9vbHVfMDEyejhjaUpMazhLZ2FmYVlaZzFYYzZjIiwicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiVGhlIGZvbGxvd2luZyBjb2RlIHNlY3Rpb25zIHdlcmUgcmV0cmlldmVkOlxuUGF0aDogc3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vTG9naW4uamF2YVxuLypcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvTGljZW5zZXMvbGljZW5zZS1kZWZhdWx0LnR4dCB0byBjaGFuZ2UgdGhpcyBsaWNlbnNlXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0dVSUZvcm1zL0pGcmFtZS5qYXZhIHRvIGVkaXQgdGhpcyB0ZW1wbGF0ZVxuICovXG5wYWNrYWdlIGludGVybmV0Lm1hbmdlbWVudC5zeXN0ZW07XG5cbmltcG9ydCBEQU8uVXNlckRBTztcbmltcG9ydCBNb2RlbC5Vc2VyO1xuaW1wb3J0IGphdmF4LnN3aW5nLkpPcHRpb25QYW5lO1xuLi4uXG5cbiAgICBwcml2YXRlIHZvaWQgYnRuTG9naW5BY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuTG9naW5BY3Rpb25QZXJmb3JtZWRcbiAgICAgICAgLy8gVE9ETyBhZGQgeW91ciBoYW5kbGluZyBjb2RlIGhlcmU6XG4gICAgICAgIGlmKHZhbGlkYXRlRmllbGRzKCkpIHtcbiAgICAgICAgICAgIHRyeXtcbiAgICAgICAgICAgICAgICBTdHJpbmcgdXNlcm5hbWUgPSB0eHRVc2VyTmFtZS5nZXRUZXh0KCkudHJpbSgpO1xuICAgICAgICAgICAgICAgIFN0cmluZyBwYXNzd29yZCA9IHR4dFBhc3N3b3JkLmdldFRleHQoKS50cmltKCk7XG5cbiAgICAgICAgICAgICAgICBVc2VyIHVzZXIgPSBudWxsO1xuICAgICAgICAgICAgICAgIGJvb2xlYW4gaXNTdWNjZXNzID0gVXNlckRBTy5sb2dpbih1c2VybmFtZSwgcGFzc3dvcmQpO1xuXG4gICAgICAgICAgICAgICAgaWYoaXNTdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKHRoaXMsIFwixJDEg25nIG5o4bqtcCB0aMOgbmggY8O0bmchXCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuSU5GT1JNQVRJT05fTUVTU0FHRSk7XG4vLyAgICAgICAgICAgICAgICAgICAgbmV3IE1haW5GcmFtZSgpLnNldFZpc2libGUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcG9zZSgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKHRoaXMsIFwiU2FpIHTDqm4gxJHEg25nIG5o4bqtcCBob+G6t2MgbeG6rXQga2jhuql1LlwiLCBcIkzhu5dpXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2goRXhjZXB0aW9uIGV4KSB7XG4gICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXCJM4buXaTogXCIgKyBleC5nZXRNZXNzYWdlKCksIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuXG4gICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuTG9naW5BY3Rpb25QZXJmb3JtZWRcblxuICAgIHByaXZhdGUgdm9pZCBidG5Gb3Jnb3RQYXNzd29yZEFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5Gb3Jnb3RQYXNzd29yZEFjdGlvblBlcmZvcm1lZFxuICAgICAgICAvLyBPcGVuIHRoZSBGb3Jnb3RQYXNzd29yZCBkaWFsb2dcbiAgICAgICAgRm9yZ290UGFzc3dvcmQgZm9yZ290UGFzc3dvcmREaWFsb2cgPSBuZXcgRm9yZ290UGFzc3dvcmQodGhpcywgdHJ1ZSk7XG4gICAgICAgIGZvcmdvdFBhc3N3b3JkRGlhbG9nLnNldFZpc2libGUodHJ1ZSk7XG4gICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuRm9yZ290UGFzc3dvcmRBY3Rpb25QZXJmb3JtZWRcblxuICAgIHByaXZhdGUgdm9pZCBidG5FeGl0QWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkV4aXRBY3Rpb25QZXJmb3JtZWRcbiAgICAgICAgLy8gVE9ETyBhZGQgeW91ciBoYW5kbGluZyBjb2RlIGhlcmU6XG4gICAgICAgIGludCByZXN1bHQgPSBKT3B0aW9uUGFuZS5zaG93Q29uZmlybURpYWxvZyhudWxsLCBcIkLhuqFuIGPDsyBjaOG6r2MgY2jhuq9uIG114buRbiB0aG/DoXQga2jDtG5nP1wiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLllFU19OT19PUFRJT04sIEpPcHRpb25QYW5lLlFVRVNUSU9OX01FU1NBR0UpO1xuXG4gICAgICAgIGlmIChyZXN1bHQgPT0gSk9wdGlvblBhbmUuWUVTX09QVElPTikge1xuICAgICAgICAgICAgU3lzdGVtLmV4aXQoMCk7XG4gICAgICAgIH1cbiAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5FeGl0QWN0aW9uUGVyZm9ybWVkXG5cbiAgICBwcml2YXRlIHZvaWQgYnRuU2lnbnVwQWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0blNpZ251cEFjdGlvblBlcmZvcm1lZFxuICAgICAgICAvLyBUT0RPIGFkZCB5b3VyIGhhbmRsaW5nIGNvZGUgaGVyZTpcbiAgICAgICAgc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgICAgIG5ldyBTaWduVXAoKS5zZXRWaXNpYmxlKHRydWUpO1xuICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0blNpZ251cEFjdGlvblBlcmZvcm1lZFxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL2NvbS9zdG9yZS9hcHAvcGV0c3RvcmUvQ29udHJvbGxlcnMvTG9naW5Db250cm9sbGVyLmphdmFcbi4uLlxuXG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5EQU8uVXNlckRBTztcbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLkRBTy5TdGFmZkRBTztcbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLk1vZGVscy5FbnRpdGllcy5Vc2VyO1xuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuTW9kZWxzLkVudGl0aWVzLlN0YWZmO1xuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuU2Vzc2lvbnMuU2Vzc2lvbk1hbmFnZXI7XG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5WaWV3cy5BZG1pbkZhY3Rvcnk7XG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5WaWV3cy5WaWV3RmFjdG9yeTtcbmltcG9ydCBkZS5qZW5zZC5meC5nbHlwaHMuZm9udGF3ZXNvbWUuRm9udEF3ZXNvbWVJY29uO1xuaW1wb3J0IGRlLmplbnNkLmZ4LmdseXBocy5mb250YXdlc29tZS5Gb250QXdlc29tZUljb25WaWV3O1xuaW1wb3J0IGphdmFmeC5meG1sLkZYTUw7XG5pbXBvcnQgamF2YWZ4LmZ4bWwuSW5pdGlhbGl6YWJsZTtcbmltcG9ydCBqYXZhZnguc2NlbmUuY29udHJvbC4qO1xuaW1wb3J0IGphdmFmeC5zY2VuZS5pbnB1dC5Nb3VzZUV2ZW50O1xuaW1wb3J0IGphdmFmeC5zdGFnZS5TdGFnZTtcbmltcG9ydCBqYXZhZnguc2NlbmUuaW1hZ2UuSW1hZ2U7XG5pbXBvcnQgamF2YWZ4LnNjZW5lLmltYWdlLkltYWdlVmlldztcbmltcG9ydCBqYXZhZnguc2NlbmUucGFpbnQuSW1hZ2VQYXR0ZXJuO1xuaW1wb3J0IGphdmEudXRpbC5PYmplY3RzO1xuLi4uXG5cbnB1YmxpYyBjbGFzcyBMb2dpbkNvbnRyb2xsZXIgaW1wbGVtZW50cyBJbml0aWFsaXphYmxlIHtcblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBGb250QXdlc29tZUljb25WaWV3IGV5ZUljb247XG5cbiAgICBARlhNTFxuICAgIHByaXZhdGUgVGV4dEZpZWxkIHNob3dQYXNzd29yZDtcblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBQYXNzd29yZEZpZWxkIHBhc3N3b3JkRmllbGQ7XG5cbiAgICBARlhNTFxuICAgIHByaXZhdGUgVGV4dEZpZWxkIHVzZXJuYW1lRmllbGQ7XG5cbiAgICBARlhNTFxuICAgIHByaXZhdGUgQnV0dG9uIGxvZ2luQnV0dG9uO1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIExhYmVsIGVycm9yTGFiZWw7XG5cbiAgICBARlhNTFxuICAgIHByaXZhdGUgSHlwZXJsaW5rIGZvcmdvdFBhc3N3b3JkTGluaztcblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBJbWFnZVZpZXcgdXNlckltYWdlO1xuXG4gICAgcHJpdmF0ZSBkb3VibGUgeCwgeTtcblxuICAgIFVzZXJEQU8gdXNlckRBTyA9IG5ldyBVc2VyREFPKCk7XG4gICAgU3RhZmZEQU8gc3RhZmZEQU8gPSBTdGFmZkRBTy5nZXRJbnN0YW5jZSgpO1xuICAgIHB1YmxpYyBzdGF0aWMgaW50IGlkU3RhZmZDdXJyZW50O1xuICAgIHB1YmxpYyBzdGF0aWMgaW50IGlkQWRtaW5DdXJyZW50O1xuXG4gICAgcHJpdmF0ZSBTZXNzaW9uTWFuYWdlciBzZXNzaW9uTWFuYWdlciA9IG5ldyBTZXNzaW9uTWFuYWdlcigpO1xuLi4uXG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFTDrG0gdXNlciB0aGVvIHVzZXJuYW1lXG4gICAgICAgICAgICBVc2VyIHVzZXIgPSB1c2VyREFPLmZpbmRCeVVzZXJuYW1lKHVzZXJuYW1lKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYodXNlciA9PSBudWxsIHx8IHVzZXIuZ2V0VXNlcm5hbWUoKSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgQ29udHJvbGxlclV0aWxzLnNob3dBbGVydChBbGVydC5BbGVydFR5cGUuRVJST1IsIFwiTOG7l2lcIiwgXCJUw6puIMSRxINuZyBuaOG6rXAga2jDtG5nIMSRw7puZ1wiKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEtp4buDbSB0cmEgdMOqbiDEkcSDbmcgbmjhuq1wXG4gICAgICAgICAgICBpZiAoIXVzZXIuZ2V0VXNlcm5hbWUoKS5lcXVhbHModXNlcm5hbWUpKSB7XG4gICAgICAgICAgICAgICAgQ29udHJvbGxlclV0aWxzLnNob3dBbGVydChBbGVydC5BbGVydFR5cGUuRVJST1IsIFwiTOG7l2lcIiwgXCJUw6puIMSRxINuZyBuaOG6rXAga2jDtG5nIMSRw7puZ1wiKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEtp4buDbSB0cmEgbeG6rXQga2jhuql1XG4gICAgICAgICAgICBpZighQkNyeXB0LmNoZWNrcHcocGFzc3dvcmQsIHVzZXIuZ2V0UGFzc3dvcmQoKSkpIHtcbiAgICAgICAgICAgICAgICBDb250cm9sbGVyVXRpbHMuc2hvd0FsZXJ0KEFsZXJ0LkFsZXJ0VHlwZS5FUlJPUiwgXCJM4buXaVwiLCBcIk3huq10IGto4bqpdSBraMO0bmcgxJHDum5nXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc2Vzc2lvbk1hbmFnZXIuc2V0Q3VycmVudFVzZXIodXNlcik7XG5cbiAgICAgICAgICAgIFN0YWdlIGN1cnJlbnRTdGFnZSA9IChTdGFnZSkgdXNlcm5hbWVGaWVsZC5nZXRTY2VuZSgpLmdldFdpbmRvdygpO1xuXG4gICAgICAgICAgICBpZih1c2VyLmdldFJvbGUoKS5lcXVhbHMoVXNlci5ST0xFX0FETUlOKSkge1xuICAgICAgICAgICAgICAgIGlkQWRtaW5DdXJyZW50ID0gdXNlci5nZXRVc2VySWQoKTtcbiAgICAgICAgICAgICAgICBBZG1pbkZhY3RvcnkuZ2V0SW5zdGFuY2UoKS5zd2l0Y2hDb250ZW50KFwiZGFzaGJvYXJkXCIsIGN1cnJlbnRTdGFnZSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYodXNlci5nZXRSb2xlKCkuZXF1YWxzKFVzZXIuUk9MRV9VU0VSKSkge1xuICAgICAgICAgICAgICAgIGlkU3RhZmZDdXJyZW50ID0gdXNlci5nZXRVc2VySWQoKTtcbiAgICAgICAgICAgICAgICBTdGFmZiBzdGFmZiA9IHN0YWZmREFPLmZpbmRCeVVzZXJJZCh1c2VyLmdldFVzZXJJZCgpKTtcbiAgICAgICAgICAgICAgICBpZiAoc3RhZmYgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBzZXNzaW9uTWFuYWdlci5zZXRDdXJyZW50U3RhZmYoc3RhZmYpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBWaWV3RmFjdG9yeS5nZXRJbnN0YW5jZSgpLnN3aXRjaENvbnRlbnQoXCJkYXNoYm9hcmRcIiwgY3VycmVudFN0YWdlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgQ29udHJvbGxlclV0aWxzLnNob3dBbGVydChBbGVydC5BbGVydFR5cGUuRVJST1IsIFwiTOG7l2lcIiwgXCJWYWkgdHLDsiBuZ8aw4budaSBkw7luZyBraMO0bmcgaOG7o3AgbOG7h1wiKTtcbiAgICAgICAgICAgICAgICBzZXNzaW9uTWFuYWdlci5jbGVhcigpO1xuICAgICAgICAgICAgfVxuLi4uXG5QYXRoOiBzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9TaWduVXAuamF2YVxuLypcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvTGljZW5zZXMvbGljZW5zZS1kZWZhdWx0LnR4dCB0byBjaGFuZ2UgdGhpcyBsaWNlbnNlXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0dVSUZvcm1zL0pGcmFtZS5qYXZhIHRvIGVkaXQgdGhpcyB0ZW1wbGF0ZVxuICovXG5wYWNrYWdlIGludGVybmV0Lm1hbmdlbWVudC5zeXN0ZW07XG5cbmltcG9ydCBEQU8uU3Vic2NyaWJlckRBTztcbmltcG9ydCBNb2RlbC5TdWJzY3JpYmVyO1xuaW1wb3J0IGphdmEudGltZS5Mb2NhbERhdGVUaW1lO1xuaW1wb3J0IGphdmF4LnN3aW5nLkpPcHRpb25QYW5lO1xuXG4vKipcbiAqXG4gKiBAYXV0aG9yIE5nb2MgVGhhb1xuICovXG5wdWJsaWMgY2xhc3MgU2lnblVwIGV4dGVuZHMgamF2YXguc3dpbmcuSkZyYW1lIHtcblxuICAgIHB1YmxpYyBTdHJpbmcgcGhvbmVQYXR0ZXJuID0gXCJeWzAtOV0qJFwiO1xuICAgIHByaXZhdGUgU3RyaW5nIERFRkFVTFRfUk9MRSA9IFwidXNlclwiO1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgbmV3IGZvcm0gU2lnbkluXG4gICAgICovXG4gICAgcHVibGljIFNpZ25VcCgpIHtcbiAgICAgICAgaW5pdENvbXBvbmVudHMoKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBjbGVhcigpe1xuICAgICAgICB0eHROYW1lLnNldFRleHQoXCJcIik7XG4gICAgICAgIHR4dFVzZXJOYW1lLnNldFRleHQoXCJcIik7XG4gICAgICAgIHR4dFBhc3N3b3JkLnNldFRleHQoXCJcIik7XG4gICAgICAgIHR4dEFkZHJlc3Muc2V0VGV4dChcIlwiKTtcbiAgICAgICAgdHh0UGhvbmUuc2V0VGV4dChcIlwiKTtcbiAgICB9XG4uLi5cblxuICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0blJldHVybkFjdGlvblBlcmZvcm1lZFxuXG4gICAgcHJpdmF0ZSB2b2lkIGJ0blNpZ251cEFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5TaWdudXBBY3Rpb25QZXJmb3JtZWRcbiAgICAgICAgLy8gVE9ETyBhZGQgeW91ciBoYW5kbGluZyBjb2RlIGhlcmU6XG4gICAgICAgIGlmICh2YWxpZGF0ZUZpZWxkcygpKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIFN1YnNjcmliZXIgc3ViID0gbmV3IFN1YnNjcmliZXIoKTtcbiAgICAgICAgICAgICAgICBzdWIuc2V0RnVsbE5hbWUodHh0TmFtZS5nZXRUZXh0KCkpO1xuICAgICAgICAgICAgICAgIHN1Yi5zZXRVc2VybmFtZSh0eHRVc2VyTmFtZS5nZXRUZXh0KCkpO1xuICAgICAgICAgICAgICAgIHN1Yi5zZXRQYXNzd29yZCh0eHRQYXNzd29yZC5nZXRUZXh0KCkpO1xuICAgICAgICAgICAgICAgIHN1Yi5zZXRSb2xlKERFRkFVTFRfUk9MRSk7XG4gICAgICAgICAgICAgICAgc3ViLnNldEFkZHJlc3ModHh0QWRkcmVzcy5nZXRUZXh0KCkpO1xuICAgICAgICAgICAgICAgIHN1Yi5zZXRQaG9uZSh0eHRQaG9uZS5nZXRUZXh0KCkpO1xuICAgICAgICAgICAgICAgIHN1Yi5zZXRDcmVhdGVfYXQoTG9jYWxEYXRlVGltZS5ub3coKSk7XG4gICAgICAgICAgICAgICAgU3Vic2NyaWJlckRBTy5pbnNlcnQoc3ViKTtcbiAgICAgICAgICAgICAgICBjbGVhcigpO1xuICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGV4KSB7XG4gICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXCJM4buXaTogXCIgKyBleC5nZXRNZXNzYWdlKCksIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5TaWdudXBBY3Rpb25QZXJmb3JtZWRcbi4uLlxuUGF0aDogc3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vRm9yZ290UGFzc3dvcmQuamF2YVxuLypcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvTGljZW5zZXMvbGljZW5zZS1kZWZhdWx0LnR4dCB0byBjaGFuZ2UgdGhpcyBsaWNlbnNlXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0dVSUZvcm1zL0pGcmFtZS5qYXZhIHRvIGVkaXQgdGhpcyB0ZW1wbGF0ZVxuICovXG5wYWNrYWdlIGludGVybmV0Lm1hbmdlbWVudC5zeXN0ZW07XG5cbmltcG9ydCBEQU8uU3Vic2NyaWJlckRBTztcbmltcG9ydCBNb2RlbC5TdWJzY3JpYmVyO1xuaW1wb3J0IGphdmF4LnN3aW5nLkpPcHRpb25QYW5lO1xuaW1wb3J0IGludGVybmV0Lm1hbmdlbWVudC5zeXN0ZW0uTG9naW47XG4uLi5cblxuICAgIHByaXZhdGUgdm9pZCBidG5FeGl0QWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkV4aXRBY3Rpb25QZXJmb3JtZWRcbiAgICAgICAgLy8gVE9ETyBhZGQgeW91ciBoYW5kbGluZyBjb2RlIGhlcmU6XG4gICAgICAgIGludCByZXN1bHQgPSBKT3B0aW9uUGFuZS5zaG93Q29uZmlybURpYWxvZyhudWxsLCBcIkLhuqFuIGPDsyBjaOG6r2MgY2jhuq9uIG114buRbiB0aG/DoXQga2jDtG5nP1wiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLllFU19OT19PUFRJT04sIEpPcHRpb25QYW5lLlFVRVNUSU9OX01FU1NBR0UpO1xuXG4gICAgICAgIGlmIChyZXN1bHQgPT0gSk9wdGlvblBhbmUuWUVTX09QVElPTikge1xuICAgICAgICAgICAgbmV3IExvZ2luKCkuc2V0VmlzaWJsZSh0cnVlKTtcbiAgICAgICAgICAgIHRoaXMuZGlzcG9zZSgpO1xuICAgICAgICB9XG4gICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuRXhpdEFjdGlvblBlcmZvcm1lZFxuXG4gICAgcHJpdmF0ZSB2b2lkIGJ0bkNoZWNrQWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkNoZWNrQWN0aW9uUGVyZm9ybWVkXG4gICAgICAgIFN5c3RlbS5vdXQucHJpbnQoXCJIZWxsb1wiKTtcbiAgICAgICAgaWYgKHZhbGlkYXRlUGhvbmUoKSkge1xuICAgICAgICAgICAgU3RyaW5nIHBob25lID0gdHh0UGhvbmUuZ2V0VGV4dCgpO1xuICAgICAgICAgICAgY3VycmVudFN1YnNjcmliZXIgPSBTdWJzY3JpYmVyREFPLmdldEJ5UGhvbmUocGhvbmUpO1xuLi4uXG5cbiAgICBwcml2YXRlIHZvaWQgYnRuQ2hhbmdlQWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkNoYW5nZUFjdGlvblBlcmZvcm1lZFxuICAgICAgICBpZiAodmFsaWRhdGVGaWVsZHMoKSAmJiBjdXJyZW50U3Vic2NyaWJlciAhPSBudWxsKSB7XG4gICAgICAgICAgICBTdHJpbmcgbmV3UGFzc3dvcmQgPSB0eHRQYXNzd29yZC5nZXRUZXh0KCk7XG5cbiAgICAgICAgICAgIGJvb2xlYW4gc3VjY2VzcyA9IFN1YnNjcmliZXJEQU8udXBkYXRlUGFzc3dvcmQoY3VycmVudFN1YnNjcmliZXIuZ2V0VXNlcl9pZCgpLCBuZXdQYXNzd29yZCk7XG5cbiAgICAgICAgICAgIGlmIChzdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXCLEkOG7lWkgbeG6rXQga2jhuql1IHRow6BuaCBjw7RuZyEgVnVpIGzDsm5nIMSRxINuZyBuaOG6rXAgbOG6oWkuXCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuSU5GT1JNQVRJT05fTUVTU0FHRSk7XG4gICAgICAgICAgICAgICAgbmV3IExvZ2luKCkuc2V0VmlzaWJsZSh0cnVlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXCLEkOG7lWkgbeG6rXQga2jhuql1IHRo4bqldCBi4bqhaSEgVnVpIGzDsm5nIHRo4butIGzhuqFpIHNhdS5cIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0bkNoYW5nZUFjdGlvblBlcmZvcm1lZFxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL2NvbS9zdG9yZS9hcHAvcGV0c3RvcmUvREFPL1VzZXJEQU8uamF2YVxucGFja2FnZSBjb20uc3RvcmUuYXBwLnBldHN0b3JlLkRBTztcblxuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuTW9kZWxzLkVudGl0aWVzLlVzZXI7XG5pbXBvcnQgb3JnLm1pbmRyb3QuamJjcnlwdC5CQ3J5cHQ7XG5cbmltcG9ydCBqYXZhLnNxbC4qO1xuaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7XG5pbXBvcnQgamF2YS51dGlsLkJhc2U2NDtcblxucHVibGljIGNsYXNzIFVzZXJEQU8gaW1wbGVtZW50cyBCYXNlREFPPFVzZXIsIEludGVnZXI+IHtcbiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIGludCBpc0R1cGxpY2F0ZSA9IC0xO1xuXG4gICAgcHVibGljIHN0YXRpYyBVc2VyREFPIGdldEluc3RhbmNlKCkge1xuICAgICAgICByZXR1cm4gbmV3IFVzZXJEQU8oKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIFN0cmluZyBlbmNvZGUoU3RyaW5nIHBhc3N3b3JkKSB7XG4vLyAgICAgICAgcmV0dXJuIEJhc2U2NC5nZXRFbmNvZGVyKCkuZW5jb2RlVG9TdHJpbmcocGFzc3dvcmQuZ2V0Qnl0ZXMoKSk7XG4gICAgICAgIHJldHVybiBCQ3J5cHQuaGFzaHB3KHBhc3N3b3JkLCBCQ3J5cHQuZ2Vuc2FsdCgpKTtcbiAgICB9XG5cbi8vICAgIHB1YmxpYyBzdGF0aWMgU3RyaW5nIGRlY29kZShTdHJpbmcgcGFzc3dvcmQpIHtcbi8vICAgICAgICByZXR1cm4gbmV3IFN0cmluZyhCYXNlNjQuZ2V0RGVjb2RlcigpLmRlY29kZShwYXNzd29yZCkpO1xuLy8gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBib29sZWFuIHZlcmlmeShTdHJpbmcgcGFzc3dvcmQsIFN0cmluZyBoYXNoZWQpIHtcbiAgICAgICAgcmV0dXJuIEJDcnlwdC5jaGVja3B3KHBhc3N3b3JkLCBoYXNoZWQpO1xuICAgIH1cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBpbnQgaW5zZXJ0KFVzZXIgZW50aXR5KSB7XG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuICAgICAgICBSZXN1bHRTZXQgcnMgPSBudWxsO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25uID0gRGF0YWJhc2VVdGlsLmdldENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgIFN0cmluZyBzcWwgPSBcIklOU0VSVCBJTlRPIFVzZXJzICh1c2VybmFtZSwgcGFzc3dvcmQsIHJvbGUsIGltYWdlX3VybCwgaXNBY3RpdmUpIFZBTFVFUyAoPywgPywgPywgPywgPylcIjtcbiAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsLCBTdGF0ZW1lbnQuUkVUVVJOX0dFTkVSQVRFRF9LRVlTKTtcblxuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMSwgZW50aXR5LmdldFVzZXJuYW1lKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMiwgZW5jb2RlKGVudGl0eS5nZXRQYXNzd29yZCgpKSk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygzLCBlbnRpdHkuZ2V0Um9sZSgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDQsIGVudGl0eS5nZXRJbWFnZVVybCgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0Qm9vbGVhbig1LCBlbnRpdHkuaXNBY3RpdmUoKSk7XG5cbiAgICAgICAgICAgIGludCBhZmZlY3RlZFJvd3MgPSBzdG10LmV4ZWN1dGVVcGRhdGUoKTtcbiAgICAgICAgICAgIGlmIChhZmZlY3RlZFJvd3MgPT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0cnkgKFJlc3VsdFNldCBnZW5lcmF0ZWRLZXlzID0gc3RtdC5nZXRHZW5lcmF0ZWRLZXlzKCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoZ2VuZXJhdGVkS2V5cy5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdlbmVyYXRlZEtleXMuZ2V0SW50KDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgRGF0YWJhc2VVdGlsLmNsb3NlUmVzb3VyY2VzKHJzLCBzdG10LCBjb25uKTtcbiAgICAgICAgfVxuICAgIH1cbi4uLlxuUGF0aDogc3JjL0RBTy9Vc2VyREFPLmphdmFcbi8qXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0xpY2Vuc2VzL2xpY2Vuc2UtZGVmYXVsdC50eHQgdG8gY2hhbmdlIHRoaXMgbGljZW5zZVxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NsYXNzLmphdmEgdG8gZWRpdCB0aGlzIHRlbXBsYXRlXG4gKi9cbnBhY2thZ2UgREFPO1xuXG5pbXBvcnQgTW9kZWwuVXNlcjtcbmltcG9ydCBqYXZhLnV0aWwuTGlzdDtcblxuLyoqXG4gKlxuICogQGF1dGhvciBOZ29jIFRoYW9cbiAqL1xucHVibGljIGNsYXNzIFVzZXJEQU97XG5cbiAgICBwdWJsaWMgc3RhdGljIHZvaWQgaW5zZXJ0KFVzZXIgb2JqKSB7XG4gICAgICAgIFxuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgdm9pZCB1cGRhdGUoVXNlciBvYmopIHtcbiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpOyAvLyBHZW5lcmF0ZWQgZnJvbSBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ29kZS9HZW5lcmF0ZWRNZXRob2RCb2R5XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyB2b2lkIGRlbGV0ZShpbnQgaWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpOyAvLyBHZW5lcmF0ZWQgZnJvbSBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ29kZS9HZW5lcmF0ZWRNZXRob2RCb2R5XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBVc2VyIGdldEJ5SWQoaW50IGlkKSB7XG4gICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbihcIk5vdCBzdXBwb3J0ZWQgeWV0LlwiKTsgLy8gR2VuZXJhdGVkIGZyb20gbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NvZGUvR2VuZXJhdGVkTWV0aG9kQm9keVxuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxVc2VyPiBnZXRBbGwoKSB7XG4gICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbihcIk5vdCBzdXBwb3J0ZWQgeWV0LlwiKTsgLy8gR2VuZXJhdGVkIGZyb20gbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NvZGUvR2VuZXJhdGVkTWV0aG9kQm9keVxuICAgIH1cbiAgICBcbn1cbi4uLlxuUGF0aDogc3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vSW50ZXJuZXRNYW5nZW1lbnRTeXN0ZW0uamF2YVxuLypcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvTGljZW5zZXMvbGljZW5zZS1kZWZhdWx0LnR4dCB0byBjaGFuZ2UgdGhpcyBsaWNlbnNlXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvTWFpbi5qYXZhIHRvIGVkaXQgdGhpcyB0ZW1wbGF0ZVxuICovXG5wYWNrYWdlIGludGVybmV0Lm1hbmdlbWVudC5zeXN0ZW07XG5cbi8qKlxuICpcbiAqIEBhdXRob3IgTmdvYyBUaGFvXG4gKi9cbnB1YmxpYyBjbGFzcyBJbnRlcm5ldE1hbmdlbWVudFN5c3RlbSB7XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gYXJncyB0aGUgY29tbWFuZCBsaW5lIGFyZ3VtZW50c1xuICAgICAqL1xuICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBtYWluKFN0cmluZ1tdIGFyZ3MpIHtcbiAgICAgICAgLy8gVE9ETyBjb2RlIGFwcGxpY2F0aW9uIGxvZ2ljIGhlcmVcbiAgICB9XG4gICAgXG59XG4uLi5cblBhdGg6IHNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL0FkbWluL0Rhc2hib2FyZC5qYXZhXG4vKlxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9MaWNlbnNlcy9saWNlbnNlLWRlZmF1bHQudHh0IHRvIGNoYW5nZSB0aGlzIGxpY2Vuc2VcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvR1VJRm9ybXMvSkZyYW1lLmphdmEgdG8gZWRpdCB0aGlzIHRlbXBsYXRlXG4gKi9cbnBhY2thZ2UgaW50ZXJuZXQubWFuZ2VtZW50LnN5c3RlbS5BZG1pbjtcblxuaW1wb3J0IE1vZGVsLlVzZXI7XG5pbXBvcnQgaW50ZXJuZXQubWFuZ2VtZW50LnN5c3RlbS5TZXNzaW9uLlVzZXJTZXNzaW9uO1xuaW1wb3J0IGphdmEudGltZS5Mb2NhbFRpbWU7XG5pbXBvcnQgamF2YXguc3dpbmcuSk9wdGlvblBhbmU7XG5cbi8qKlxuICpcbiAqIEBhdXRob3IgTmdvYyBUaGFvXG4gKi9cbnB1YmxpYyBjbGFzcyBEYXNoYm9hcmQgZXh0ZW5kcyBqYXZheC5zd2luZy5KRnJhbWUge1xuXG4gICAgVXNlciBhZG1pbiA9IFVzZXJTZXNzaW9uLmdldEN1cnJlbnRVc2VyKCk7XG4gICAgXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBuZXcgZm9ybSBEYXNoYm9hcmRcbiAgICAgKi9cbiAgICBwdWJsaWMgRGFzaGJvYXJkKCkge1xuICAgICAgICBpbml0Q29tcG9uZW50cygpO1xuICAgICAgICBzZXR1cEhlbGxvKCk7XG4gICAgICAgIHNldHVwVXNlcm5hbWUoKTtcbiAgICB9XG4gICAgXG4gICAgcHJpdmF0ZSB2b2lkIHNldHVwSGVsbG8oKSB7XG4gICAgICAgIExvY2FsVGltZSBub3cgPSBMb2NhbFRpbWUubm93KCk7XG4gICAgICAgIGludCBob3VyID0gbm93LmdldEhvdXIoKTtcbiAgICAgICAgXG4gICAgICAgIFN0cmluZyBncmVldGluZztcblxuICAgICAgICBpZiAoaG91ciA+PSA1ICYmIGhvdXIgPCAxMSkge1xuICAgICAgICAgICAgZ3JlZXRpbmcgPSBcIkNow6BvIGJ14buVaSBzw6FuZyxcIjtcbiAgICAgICAgfSBlbHNlIGlmIChob3VyID49IDExICYmIGhvdXIgPCAxNSkge1xuICAgICAgICAgICAgZ3JlZXRpbmcgPSBcIkNow6BvIGJ14buVaSB0csawYSxcIjtcbiAgICAgICAgfSBlbHNlIGlmIChob3VyID49IDE1ICYmIGhvdXIgPCAxNykge1xuICAgICAgICAgICAgZ3JlZXRpbmcgPSBcIkNow6BvIGJ14buVaSBjaGnhu4F1LFwiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZ3JlZXRpbmcgPSBcIkNow6BvIGJ14buVaSB04buRaSxcIjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgbGJIZWxsby5zZXRUZXh0KGdyZWV0aW5nKTtcbiAgICB9XG4gICAgXG4gICAgcHJpdmF0ZSB2b2lkIHNldHVwVXNlcm5hbWUoKSB7XG4gICAgICAgIGxiVXNlck5hbWUuc2V0VGV4dChhZG1pbi5nZXRVc2VybmFtZSgpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBjYWxsZWQgZnJvbSB3aXRoaW4gdGhlIGNvbnN0cnVjdG9yIHRvIGluaXRpYWxpemUgdGhlIGZvcm0uXG4gICAgICogV0FSTklORzogRG8gTk9UIG1vZGlmeSB0aGlzIGNvZGUuIFRoZSBjb250ZW50IG9mIHRoaXMgbWV0aG9kIGlzIGFsd2F5c1xuICAgICAqIHJlZ2VuZXJhdGVkIGJ5IHRoZSBGb3JtIEVkaXRvci5cbiAgICAgKi9cbiAgICBAU3VwcHJlc3NXYXJuaW5ncyhcInVuY2hlY2tlZFwiKVxuICAgIC8vIDxlZGl0b3ItZm9sZCBkZWZhdWx0c3RhdGU9XCJjb2xsYXBzZWRcIiBkZXNjPVwiR2VuZXJhdGVkIENvZGVcIj4vL0dFTi1CRUdJTjppbml0Q29tcG9uZW50c1xuICAgIHByaXZhdGUgdm9pZCBpbml0Q29tcG9uZW50cygpIHtcblxuICAgICAgICBidG5Vc2VyID0gbmV3IGphdmF4LnN3aW5nLkpCdXR0b24oKTtcbiAgICAgICAgYnRuQ3VzdG9tZXIgPSBuZXcgamF2YXguc3dpbmcuSkJ1dHRvbigpO1xuICAgICAgICBidG5QbGFuID0gbmV3IGphdmF4LnN3aW5nLkpCdXR0b24oKTtcbiAgICAgICAgYnRuQ29udHJhY3QgPSBuZXcgamF2YXguc3dpbmcuSkJ1dHRvbigpO1xuICAgICAgICBidG5IaXN0b3J5ID0gbmV3IGphdmF4LnN3aW5nLkpCdXR0b24oKTtcbiAgICAgICAgYnRuU3RhdGlzdGljID0gbmV3IGphdmF4LnN3aW5nLkpCdXR0b24oKTtcbiAgICAgICAgYnRuRXhpdCA9IG5ldyBqYXZheC5zd2luZy5KQnV0dG9uKCk7XG4gICAgICAgIGpTZXBhcmF0b3IxID0gbmV3IGphdmF4LnN3aW5nLkpTZXBhcmF0b3IoKTtcbiAgICAgICAgbGJVc2VyTmFtZSA9IG5ldyBqYXZheC5zd2luZy5KTGFiZWwoKTtcbiAgICAgICAgbGJIZWxsbyA9IG5ldyBqYXZheC5zd2luZy5KTGFiZWwoKTtcblxuICAgICAgICBzZXREZWZhdWx0Q2xvc2VPcGVyYXRpb24oamF2YXguc3dpbmcuV2luZG93Q29uc3RhbnRzLkVYSVRfT05fQ0xPU0UpO1xuXG4gICAgICAgIGJ0blVzZXIuc2V0Rm9udChuZXcgamF2YS5hd3QuRm9udChcIkFyaWFsXCIsIDEsIDI0KSk7IC8vIE5PSTE4TlxuICAgICAgICBidG5Vc2VyLnNldEljb24obmV3IGphdmF4LnN3aW5nLkltYWdlSWNvbihnZXRDbGFzcygpLmdldFJlc291cmNlKFwiL0ltYWdlcy91c2VyLnBuZ1wiKSkpOyAvLyBOT0kxOE5cbiAgICAgICAgYnRuVXNlci5zZXRUZXh0KFwiUXXhuqNuIGzDvSBuZ8aw4budaSBkw7luZ1wiKTtcbiAgICAgICAgYnRuVXNlci5zZXRDdXJzb3IobmV3IGphdmEuYXd0LkN1cnNvcihqYXZhLmF3dC5DdXJzb3IuSEFORF9DVVJTT1IpKTtcbiAgICAgICAgYnRuVXNlci5zZXRIb3Jpem9udGFsQWxpZ25tZW50KGphdmF4LnN3aW5nLlN3aW5nQ29uc3RhbnRzLkxFRlQpO1xuICAgICAgICBidG5Vc2VyLmFkZEFjdGlvbkxpc3RlbmVyKG5ldyBqYXZhLmF3dC5ldmVudC5BY3Rpb25MaXN0ZW5lcigpIHtcbiAgICAgICAgICAgIHB1YmxpYyB2b2lkIGFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHtcbiAgICAgICAgICAgICAgICBidG5Vc2VyQWN0aW9uUGVyZm9ybWVkKGV2dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuLi4uXG4gICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQoYnRuQ3VzdG9tZXIsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LkRFRkFVTFRfU0laRSwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuREVGQVVMVF9TSVpFLCBTaG9ydC5NQVhfVkFMVUUpKVxuICAgICAgICAgICAgICAgIC5hZGRHYXAoMzUsIDM1LCAzNSlcbiAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGJ0bkV4aXQsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFLCA0MCwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUpXG4gICAgICAgICAgICAgICAgLmFkZEdhcCgyMDEsIDIwMSwgMjAxKSlcbiAgICAgICAgKTtcblxuICAgICAgICBwYWNrKCk7XG4gICAgfS8vIDwvZWRpdG9yLWZvbGQ+Ly9HRU4tRU5EOmluaXRDb21wb25lbnRzXG5cbiAgICBwcml2YXRlIHZvaWQgYnRuVXNlckFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5Vc2VyQWN0aW9uUGVyZm9ybWVkXG4gICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxuICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0blVzZXJBY3Rpb25QZXJmb3JtZWRcblxuICAgIHByaXZhdGUgdm9pZCBidG5DdXN0b21lckFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5DdXN0b21lckFjdGlvblBlcmZvcm1lZFxuICAgICAgICAvLyBUT0RPIGFkZCB5b3VyIGhhbmRsaW5nIGNvZGUgaGVyZTpcbiAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5DdXN0b21lckFjdGlvblBlcmZvcm1lZFxuLi4uXG4gICAgICAgIC8vPC9lZGl0b3ItZm9sZD5cblxuICAgICAgICAvKiBDcmVhdGUgYW5kIGRpc3BsYXkgdGhlIGZvcm0gKi9cbiAgICAgICAgamF2YS5hd3QuRXZlbnRRdWV1ZS5pbnZva2VMYXRlcihuZXcgUnVubmFibGUoKSB7XG4gICAgICAgICAgICBwdWJsaWMgdm9pZCBydW4oKSB7XG4gICAgICAgICAgICAgICAgbmV3IERhc2hib2FyZCgpLnNldFZpc2libGUodHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFZhcmlhYmxlcyBkZWNsYXJhdGlvbiAtIGRvIG5vdCBtb2RpZnkvL0dFTi1CRUdJTjp2YXJpYWJsZXNcbiAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpCdXR0b24gYnRuQ29udHJhY3Q7XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KQnV0dG9uIGJ0bkN1c3RvbWVyO1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkJ1dHRvbiBidG5FeGl0O1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkJ1dHRvbiBidG5IaXN0b3J5O1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkJ1dHRvbiBidG5QbGFuO1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkJ1dHRvbiBidG5TdGF0aXN0aWM7XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KQnV0dG9uIGJ0blVzZXI7XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KU2VwYXJhdG9yIGpTZXBhcmF0b3IxO1xuICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkxhYmVsIGxiSGVsbG87XG4gICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KTGFiZWwgbGJVc2VyTmFtZTtcbiAgICAvLyBFbmQgb2YgdmFyaWFibGVzIGRlY2xhcmF0aW9uLy9HRU4tRU5EOnZhcmlhYmxlc1xufVxuLi4uXG5QYXRoOiBzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9Mb2dpbi5mb3JtXG48P3htbCB2ZXJzaW9uPVwiMS4wXCIgZW5jb2Rpbmc9XCJVVEYtOFwiID8+XG5cbjxGb3JtIHZlcnNpb249XCIxLjNcIiBtYXhWZXJzaW9uPVwiMS45XCIgdHlwZT1cIm9yZy5uZXRiZWFucy5tb2R1bGVzLmZvcm0uZm9ybWluZm8uSkZyYW1lRm9ybUluZm9cIj5cbiAgPFByb3BlcnRpZXM+XG4gICAgPFByb3BlcnR5IG5hbWU9XCJkZWZhdWx0Q2xvc2VPcGVyYXRpb25cIiB0eXBlPVwiaW50XCIgdmFsdWU9XCIzXCIvPlxuICA8L1Byb3BlcnRpZXM+XG4gIDxTeW50aGV0aWNQcm9wZXJ0aWVzPlxuICAgIDxTeW50aGV0aWNQcm9wZXJ0eSBuYW1lPVwiZm9ybVNpemVQb2xpY3lcIiB0eXBlPVwiaW50XCIgdmFsdWU9XCIxXCIvPlxuICAgIDxTeW50aGV0aWNQcm9wZXJ0eSBuYW1lPVwiZ2VuZXJhdGVDZW50ZXJcIiB0eXBlPVwiYm9vbGVhblwiIHZhbHVlPVwiZmFsc2VcIi8+XG4gIDwvU3ludGhldGljUHJvcGVydGllcz5cbiAgPEF1eFZhbHVlcz5cbiAgICA8QXV4VmFsdWUgbmFtZT1cIkZvcm1TZXR0aW5nc19hdXRvUmVzb3VyY2luZ1wiIHR5cGU9XCJqYXZhLmxhbmcuSW50ZWdlclwiIHZhbHVlPVwiMFwiLz5cbiAgICA8QXV4VmFsdWUgbmFtZT1cIkZvcm1TZXR0aW5nc19hdXRvU2V0Q29tcG9uZW50TmFtZVwiIHR5cGU9XCJqYXZhLmxhbmcuQm9vbGVhblwiIHZhbHVlPVwiZmFsc2VcIi8+XG4gICAgPEF1eFZhbHVlIG5hbWU9XCJGb3JtU2V0dGluZ3NfZ2VuZXJhdGVGUU5cIiB0eXBlPVwiamF2YS5sYW5nLkJvb2xlYW5cIiB2YWx1ZT1cInRydWVcIi8+XG4gICAgPEF1eFZhbHVlIG5hbWU9XCJGb3JtU2V0dGluZ3NfZ2VuZXJhdGVNbmVtb25pY3NDb2RlXCIgdHlwZT1cImphdmEubGFuZy5Cb29sZWFuXCIgdmFsdWU9XCJmYWxzZVwiLz5cbi4uLlxuUGF0aDogc3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vQWRtaW4vRGFzaGJvYXJkLmZvcm1cbjw/eG1sIHZlcnNpb249XCIxLjBcIiBlbmNvZGluZz1cIlVURi04XCIgPz5cblxuPEZvcm0gdmVyc2lvbj1cIjEuM1wiIG1heFZlcnNpb249XCIxLjlcIiB0eXBlPVwib3JnLm5ldGJlYW5zLm1vZHVsZXMuZm9ybS5mb3JtaW5mby5KRnJhbWVGb3JtSW5mb1wiPlxuICA8UHJvcGVydGllcz5cbiAgICA8UHJvcGVydHkgbmFtZT1cImRlZmF1bHRDbG9zZU9wZXJhdGlvblwiIHR5cGU9XCJpbnRcIiB2YWx1ZT1cIjNcIi8+XG4gIDwvUHJvcGVydGllcz5cbiAgPFN5bnRoZXRpY1Byb3BlcnRpZXM+XG4gICAgPFN5bnRoZXRpY1Byb3BlcnR5IG5hbWU9XCJmb3JtU2l6ZVBvbGljeVwiIHR5cGU9XCJpbnRcIiB2YWx1ZT1cIjFcIi8+XG4gICAgPFN5bnRoZXRpY1Byb3BlcnR5IG5hbWU9XCJnZW5lcmF0ZUNlbnRlclwiIHR5cGU9XCJib29sZWFuXCIgdmFsdWU9XCJmYWxzZVwiLz5cbiAgPC9TeW50aGV0aWNQcm9wZXJ0aWVzPlxuICA8QXV4VmFsdWVzPlxuICAgIDxBdXhWYWx1ZSBuYW1lPVwiRm9ybVNldHRpbmdzX2F1dG9SZXNvdXJjaW5nXCIgdHlwZT1cImphdmEubGFuZy5JbnRlZ2VyXCIgdmFsdWU9XCIwXCIvPlxuICAgIDxBdXhWYWx1ZSBuYW1lPVwiRm9ybVNldHRpbmdzX2F1dG9TZXRDb21wb25lbnROYW1lXCIgdHlwZT1cImphdmEubGFuZy5Cb29sZWFuXCIgdmFsdWU9XCJmYWxzZVwiLz5cbiAgICA8QXV4VmFsdWUgbmFtZT1cIkZvcm1TZXR0aW5nc19nZW5lcmF0ZUZRTlwiIHR5cGU9XCJqYXZhLmxhbmcuQm9vbGVhblwiIHZhbHVlPVwidHJ1ZVwiLz5cbiAgICA8QXV4VmFsdWUgbmFtZT1cIkZvcm1TZXR0aW5nc19nZW5lcmF0ZU1uZW1vbmljc0NvZGVcIiB0eXBlPVwiamF2YS5sYW5nLkJvb2xlYW5cIiB2YWx1ZT1cImZhbHNlXCIvPlxuLi4uXG4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCI0ZTBmZGE5Yy05ZWRlLTQ1OGEtYTY4Mi1iMGU3YjIzODMyMjI7dG9vbHVfMDFXeWN3Z3JFcm94OWpBR3FDZkM3NTJnIjp7InJlcXVlc3RJZCI6IjRlMGZkYTljLTllZGUtNDU4YS1hNjgyLWIwZTdiMjM4MzIyMiIsInRvb2xVc2VJZCI6InRvb2x1XzAxV3ljd2dyRXJveDlqQUdxQ2ZDNzUyZyIsInBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IlRoZSBmb2xsb3dpbmcgY29kZSBzZWN0aW9ucyB3ZXJlIHJldHJpZXZlZDpcblBhdGg6IHNyYy9tYWluL2phdmEvY29tL3N0b3JlL2FwcC9wZXRzdG9yZS9Db250cm9sbGVycy9Mb2dpbkNvbnRyb2xsZXIuamF2YVxuLi4uXG5cbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLkRBTy5Vc2VyREFPO1xuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuREFPLlN0YWZmREFPO1xuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuTW9kZWxzLkVudGl0aWVzLlVzZXI7XG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5Nb2RlbHMuRW50aXRpZXMuU3RhZmY7XG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5TZXNzaW9ucy5TZXNzaW9uTWFuYWdlcjtcbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLlZpZXdzLkFkbWluRmFjdG9yeTtcbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLlZpZXdzLlZpZXdGYWN0b3J5O1xuaW1wb3J0IGRlLmplbnNkLmZ4LmdseXBocy5mb250YXdlc29tZS5Gb250QXdlc29tZUljb247XG5pbXBvcnQgZGUuamVuc2QuZnguZ2x5cGhzLmZvbnRhd2Vzb21lLkZvbnRBd2Vzb21lSWNvblZpZXc7XG5pbXBvcnQgamF2YWZ4LmZ4bWwuRlhNTDtcbmltcG9ydCBqYXZhZnguZnhtbC5Jbml0aWFsaXphYmxlO1xuaW1wb3J0IGphdmFmeC5zY2VuZS5jb250cm9sLio7XG5pbXBvcnQgamF2YWZ4LnNjZW5lLmlucHV0Lk1vdXNlRXZlbnQ7XG5pbXBvcnQgamF2YWZ4LnN0YWdlLlN0YWdlO1xuaW1wb3J0IGphdmFmeC5zY2VuZS5pbWFnZS5JbWFnZTtcbmltcG9ydCBqYXZhZnguc2NlbmUuaW1hZ2UuSW1hZ2VWaWV3O1xuaW1wb3J0IGphdmFmeC5zY2VuZS5wYWludC5JbWFnZVBhdHRlcm47XG5pbXBvcnQgamF2YS51dGlsLk9iamVjdHM7XG4uLi5cblxucHVibGljIGNsYXNzIExvZ2luQ29udHJvbGxlciBpbXBsZW1lbnRzIEluaXRpYWxpemFibGUge1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIEZvbnRBd2Vzb21lSWNvblZpZXcgZXllSWNvbjtcblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBUZXh0RmllbGQgc2hvd1Bhc3N3b3JkO1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIFBhc3N3b3JkRmllbGQgcGFzc3dvcmRGaWVsZDtcblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBUZXh0RmllbGQgdXNlcm5hbWVGaWVsZDtcblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBCdXR0b24gbG9naW5CdXR0b247XG5cbiAgICBARlhNTFxuICAgIHByaXZhdGUgTGFiZWwgZXJyb3JMYWJlbDtcblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBIeXBlcmxpbmsgZm9yZ290UGFzc3dvcmRMaW5rO1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIEltYWdlVmlldyB1c2VySW1hZ2U7XG5cbiAgICBwcml2YXRlIGRvdWJsZSB4LCB5O1xuXG4gICAgVXNlckRBTyB1c2VyREFPID0gbmV3IFVzZXJEQU8oKTtcbiAgICBTdGFmZkRBTyBzdGFmZkRBTyA9IFN0YWZmREFPLmdldEluc3RhbmNlKCk7XG4gICAgcHVibGljIHN0YXRpYyBpbnQgaWRTdGFmZkN1cnJlbnQ7XG4gICAgcHVibGljIHN0YXRpYyBpbnQgaWRBZG1pbkN1cnJlbnQ7XG5cbiAgICBwcml2YXRlIFNlc3Npb25NYW5hZ2VyIHNlc3Npb25NYW5hZ2VyID0gbmV3IFNlc3Npb25NYW5hZ2VyKCk7XG4uLi5cblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gVMOsbSB1c2VyIHRoZW8gdXNlcm5hbWVcbiAgICAgICAgICAgIFVzZXIgdXNlciA9IHVzZXJEQU8uZmluZEJ5VXNlcm5hbWUodXNlcm5hbWUpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZih1c2VyID09IG51bGwgfHwgdXNlci5nZXRVc2VybmFtZSgpID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBDb250cm9sbGVyVXRpbHMuc2hvd0FsZXJ0KEFsZXJ0LkFsZXJ0VHlwZS5FUlJPUiwgXCJM4buXaVwiLCBcIlTDqm4gxJHEg25nIG5o4bqtcCBraMO0bmcgxJHDum5nXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gS2nhu4NtIHRyYSB0w6puIMSRxINuZyBuaOG6rXBcbiAgICAgICAgICAgIGlmICghdXNlci5nZXRVc2VybmFtZSgpLmVxdWFscyh1c2VybmFtZSkpIHtcbiAgICAgICAgICAgICAgICBDb250cm9sbGVyVXRpbHMuc2hvd0FsZXJ0KEFsZXJ0LkFsZXJ0VHlwZS5FUlJPUiwgXCJM4buXaVwiLCBcIlTDqm4gxJHEg25nIG5o4bqtcCBraMO0bmcgxJHDum5nXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gS2nhu4NtIHRyYSBt4bqtdCBraOG6qXVcbiAgICAgICAgICAgIGlmKCFCQ3J5cHQuY2hlY2twdyhwYXNzd29yZCwgdXNlci5nZXRQYXNzd29yZCgpKSkge1xuICAgICAgICAgICAgICAgIENvbnRyb2xsZXJVdGlscy5zaG93QWxlcnQoQWxlcnQuQWxlcnRUeXBlLkVSUk9SLCBcIkzhu5dpXCIsIFwiTeG6rXQga2jhuql1IGtow7RuZyDEkcO6bmdcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzZXNzaW9uTWFuYWdlci5zZXRDdXJyZW50VXNlcih1c2VyKTtcblxuICAgICAgICAgICAgU3RhZ2UgY3VycmVudFN0YWdlID0gKFN0YWdlKSB1c2VybmFtZUZpZWxkLmdldFNjZW5lKCkuZ2V0V2luZG93KCk7XG5cbiAgICAgICAgICAgIGlmKHVzZXIuZ2V0Um9sZSgpLmVxdWFscyhVc2VyLlJPTEVfQURNSU4pKSB7XG4gICAgICAgICAgICAgICAgaWRBZG1pbkN1cnJlbnQgPSB1c2VyLmdldFVzZXJJZCgpO1xuICAgICAgICAgICAgICAgIEFkbWluRmFjdG9yeS5nZXRJbnN0YW5jZSgpLnN3aXRjaENvbnRlbnQoXCJkYXNoYm9hcmRcIiwgY3VycmVudFN0YWdlKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZih1c2VyLmdldFJvbGUoKS5lcXVhbHMoVXNlci5ST0xFX1VTRVIpKSB7XG4gICAgICAgICAgICAgICAgaWRTdGFmZkN1cnJlbnQgPSB1c2VyLmdldFVzZXJJZCgpO1xuICAgICAgICAgICAgICAgIFN0YWZmIHN0YWZmID0gc3RhZmZEQU8uZmluZEJ5VXNlcklkKHVzZXIuZ2V0VXNlcklkKCkpO1xuICAgICAgICAgICAgICAgIGlmIChzdGFmZiAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlc3Npb25NYW5hZ2VyLnNldEN1cnJlbnRTdGFmZihzdGFmZik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFZpZXdGYWN0b3J5LmdldEluc3RhbmNlKCkuc3dpdGNoQ29udGVudChcImRhc2hib2FyZFwiLCBjdXJyZW50U3RhZ2UpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBDb250cm9sbGVyVXRpbHMuc2hvd0FsZXJ0KEFsZXJ0LkFsZXJ0VHlwZS5FUlJPUiwgXCJM4buXaVwiLCBcIlZhaSB0csOyIG5nxrDhu51pIGTDuW5nIGtow7RuZyBo4bujcCBs4buHXCIpO1xuICAgICAgICAgICAgICAgIHNlc3Npb25NYW5hZ2VyLmNsZWFyKCk7XG4gICAgICAgICAgICB9XG4uLi5cblBhdGg6IHNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL0xvZ2luLmphdmFcbi8qXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0xpY2Vuc2VzL2xpY2Vuc2UtZGVmYXVsdC50eHQgdG8gY2hhbmdlIHRoaXMgbGljZW5zZVxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9HVUlGb3Jtcy9KRnJhbWUuamF2YSB0byBlZGl0IHRoaXMgdGVtcGxhdGVcbiAqL1xucGFja2FnZSBpbnRlcm5ldC5tYW5nZW1lbnQuc3lzdGVtO1xuXG5pbXBvcnQgREFPLlVzZXJEQU87XG5pbXBvcnQgTW9kZWwuVXNlcjtcbmltcG9ydCBqYXZheC5zd2luZy5KT3B0aW9uUGFuZTtcbi4uLlxuXG4gICAgcHJpdmF0ZSB2b2lkIGJ0bkxvZ2luQWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkxvZ2luQWN0aW9uUGVyZm9ybWVkXG4gICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxuICAgICAgICBpZih2YWxpZGF0ZUZpZWxkcygpKSB7XG4gICAgICAgICAgICB0cnl7XG4gICAgICAgICAgICAgICAgU3RyaW5nIHVzZXJuYW1lID0gdHh0VXNlck5hbWUuZ2V0VGV4dCgpLnRyaW0oKTtcbiAgICAgICAgICAgICAgICBTdHJpbmcgcGFzc3dvcmQgPSB0eHRQYXNzd29yZC5nZXRUZXh0KCkudHJpbSgpO1xuXG4gICAgICAgICAgICAgICAgVXNlciB1c2VyID0gbnVsbDtcbiAgICAgICAgICAgICAgICBib29sZWFuIGlzU3VjY2VzcyA9IFVzZXJEQU8ubG9naW4odXNlcm5hbWUsIHBhc3N3b3JkKTtcblxuICAgICAgICAgICAgICAgIGlmKGlzU3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyh0aGlzLCBcIsSQxINuZyBuaOG6rXAgdGjDoG5oIGPDtG5nIVwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLklORk9STUFUSU9OX01FU1NBR0UpO1xuLy8gICAgICAgICAgICAgICAgICAgIG5ldyBNYWluRnJhbWUoKS5zZXRWaXNpYmxlKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyh0aGlzLCBcIlNhaSB0w6puIMSRxINuZyBuaOG6rXAgaG/hurdjIG3huq10IGto4bqpdS5cIiwgXCJM4buXaVwiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgICAgICAgICAgICAgICB9XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvY29tL3N0b3JlL2FwcC9wZXRzdG9yZS9EQU8vVXNlckRBTy5qYXZhXG5wYWNrYWdlIGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuREFPO1xuXG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5Nb2RlbHMuRW50aXRpZXMuVXNlcjtcbmltcG9ydCBvcmcubWluZHJvdC5qYmNyeXB0LkJDcnlwdDtcblxuaW1wb3J0IGphdmEuc3FsLio7XG5pbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDtcbmltcG9ydCBqYXZhLnV0aWwuQmFzZTY0O1xuXG5wdWJsaWMgY2xhc3MgVXNlckRBTyBpbXBsZW1lbnRzIEJhc2VEQU88VXNlciwgSW50ZWdlcj4ge1xuICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgaW50IGlzRHVwbGljYXRlID0gLTE7XG5cbiAgICBwdWJsaWMgc3RhdGljIFVzZXJEQU8gZ2V0SW5zdGFuY2UoKSB7XG4gICAgICAgIHJldHVybiBuZXcgVXNlckRBTygpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgU3RyaW5nIGVuY29kZShTdHJpbmcgcGFzc3dvcmQpIHtcbi8vICAgICAgICByZXR1cm4gQmFzZTY0LmdldEVuY29kZXIoKS5lbmNvZGVUb1N0cmluZyhwYXNzd29yZC5nZXRCeXRlcygpKTtcbiAgICAgICAgcmV0dXJuIEJDcnlwdC5oYXNocHcocGFzc3dvcmQsIEJDcnlwdC5nZW5zYWx0KCkpO1xuICAgIH1cblxuLy8gICAgcHVibGljIHN0YXRpYyBTdHJpbmcgZGVjb2RlKFN0cmluZyBwYXNzd29yZCkge1xuLy8gICAgICAgIHJldHVybiBuZXcgU3RyaW5nKEJhc2U2NC5nZXREZWNvZGVyKCkuZGVjb2RlKHBhc3N3b3JkKSk7XG4vLyAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGJvb2xlYW4gdmVyaWZ5KFN0cmluZyBwYXNzd29yZCwgU3RyaW5nIGhhc2hlZCkge1xuICAgICAgICByZXR1cm4gQkNyeXB0LmNoZWNrcHcocGFzc3dvcmQsIGhhc2hlZCk7XG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIGludCBpbnNlcnQoVXNlciBlbnRpdHkpIHtcbiAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcbiAgICAgICAgUHJlcGFyZWRTdGF0ZW1lbnQgc3RtdCA9IG51bGw7XG4gICAgICAgIFJlc3VsdFNldCBycyA9IG51bGw7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbm4gPSBEYXRhYmFzZVV0aWwuZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgICAgICAgU3RyaW5nIHNxbCA9IFwiSU5TRVJUIElOVE8gVXNlcnMgKHVzZXJuYW1lLCBwYXNzd29yZCwgcm9sZSwgaW1hZ2VfdXJsLCBpc0FjdGl2ZSkgVkFMVUVTICg/LCA/LCA/LCA/LCA/KVwiO1xuICAgICAgICAgICAgc3RtdCA9IGNvbm4ucHJlcGFyZVN0YXRlbWVudChzcWwsIFN0YXRlbWVudC5SRVRVUk5fR0VORVJBVEVEX0tFWVMpO1xuXG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygxLCBlbnRpdHkuZ2V0VXNlcm5hbWUoKSk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygyLCBlbmNvZGUoZW50aXR5LmdldFBhc3N3b3JkKCkpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDMsIGVudGl0eS5nZXRSb2xlKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoNCwgZW50aXR5LmdldEltYWdlVXJsKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRCb29sZWFuKDUsIGVudGl0eS5pc0FjdGl2ZSgpKTtcblxuICAgICAgICAgICAgaW50IGFmZmVjdGVkUm93cyA9IHN0bXQuZXhlY3V0ZVVwZGF0ZSgpO1xuICAgICAgICAgICAgaWYgKGFmZmVjdGVkUm93cyA9PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRyeSAoUmVzdWx0U2V0IGdlbmVyYXRlZEtleXMgPSBzdG10LmdldEdlbmVyYXRlZEtleXMoKSkge1xuICAgICAgICAgICAgICAgIGlmIChnZW5lcmF0ZWRLZXlzLm5leHQoKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ2VuZXJhdGVkS2V5cy5nZXRJbnQoMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBEYXRhYmFzZVV0aWwuY2xvc2VSZXNvdXJjZXMocnMsIHN0bXQsIGNvbm4pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIGludCB1cGRhdGUoVXNlciBlbnRpdHkpIHtcbiAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcbiAgICAgICAgUHJlcGFyZWRTdGF0ZW1lbnQgc3RtdCA9IG51bGw7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbm4gPSBEYXRhYmFzZVV0aWwuZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgICAgICAgU3RyaW5nIHNxbCA9IFwiVVBEQVRFIFVzZXJzIFNFVCB1c2VybmFtZSA9ID8sIHBhc3N3b3JkID0gPywgcm9sZSA9ID8sIGltYWdlX3VybCA9ID8sIGlzQWN0aXZlID0gPyBXSEVSRSB1c2VyX2lkID0gP1wiO1xuICAgICAgICAgICAgc3RtdCA9IGNvbm4ucHJlcGFyZVN0YXRlbWVudChzcWwpO1xuXG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygxLCBlbnRpdHkuZ2V0VXNlcm5hbWUoKSk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygyLCBlbmNvZGUoZW50aXR5LmdldFBhc3N3b3JkKCkpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDMsIGVudGl0eS5nZXRSb2xlKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoNCwgZW50aXR5LmdldEltYWdlVXJsKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRCb29sZWFuKDUsIGVudGl0eS5pc0FjdGl2ZSgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0SW50KDYsIGVudGl0eS5nZXRVc2VySWQoKSk7XG5cbiAgICAgICAgICAgIHJldHVybiBzdG10LmV4ZWN1dGVVcGRhdGUoKTtcbiAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIERhdGFiYXNlVXRpbC5jbG9zZVJlc291cmNlcyhzdG10LCBjb25uKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBpbnQgdXBkYXRlKFVzZXIgZW50aXR5LCBib29sZWFuIGlzVXNlcm5hbWVDaGFuZ2VkKSB7XG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25uID0gRGF0YWJhc2VVdGlsLmdldENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgIFN0cmluZyBzcWwgPSBcIlVQREFURSBVc2VycyBTRVQgdXNlcm5hbWUgPSA/LCBwYXNzd29yZCA9ID8sIHJvbGUgPSA/LCBpbWFnZV91cmwgPSA/LCBpc0FjdGl2ZSA9ID8gV0hFUkUgdXNlcl9pZCA9ID9cIjtcbiAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsKTtcblxuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMSwgZW50aXR5LmdldFVzZXJuYW1lKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMiwgZW5jb2RlKGVudGl0eS5nZXRQYXNzd29yZCgpKSk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygzLCBlbnRpdHkuZ2V0Um9sZSgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDQsIGVudGl0eS5nZXRJbWFnZVVybCgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0Qm9vbGVhbig1LCBlbnRpdHkuaXNBY3RpdmUoKSk7XG4gICAgICAgICAgICBzdG10LnNldEludCg2LCBlbnRpdHkuZ2V0VXNlcklkKCkpO1xuXG4gICAgICAgICAgICByZXR1cm4gc3RtdC5leGVjdXRlVXBkYXRlKCk7XG4gICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBEYXRhYmFzZVV0aWwuY2xvc2VSZXNvdXJjZXMoc3RtdCwgY29ubik7XG4gICAgICAgIH1cbiAgICB9XG4uLi5cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBVc2VyIGZpbmRCeUlkKEludGVnZXIgaWQpIHtcbiAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcbiAgICAgICAgUHJlcGFyZWRTdGF0ZW1lbnQgc3RtdCA9IG51bGw7XG4gICAgICAgIFJlc3VsdFNldCBycyA9IG51bGw7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbm4gPSBEYXRhYmFzZVV0aWwuZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgICAgICAgU3RyaW5nIHNxbCA9IFwiU0VMRUNUICogRlJPTSBVc2VycyBXSEVSRSB1c2VyX2lkID0gP1wiO1xuICAgICAgICAgICAgc3RtdCA9IGNvbm4ucHJlcGFyZVN0YXRlbWVudChzcWwpO1xuICAgICAgICAgICAgc3RtdC5zZXRJbnQoMSwgaWQpO1xuICAgICAgICAgICAgcnMgPSBzdG10LmV4ZWN1dGVRdWVyeSgpO1xuXG4gICAgICAgICAgICBpZiAocnMubmV4dCgpKSB7XG4gICAgICAgICAgICAgICAgVXNlciB1c2VyID0gbmV3IFVzZXIoKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldFVzZXJJZChycy5nZXRJbnQoXCJ1c2VyX2lkXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldFVzZXJuYW1lKHJzLmdldFN0cmluZyhcInVzZXJuYW1lXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldFBhc3N3b3JkKHJzLmdldFN0cmluZyhcInBhc3N3b3JkXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldFJvbGUocnMuZ2V0U3RyaW5nKFwicm9sZVwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRJbWFnZVVybChycy5nZXRTdHJpbmcoXCJpbWFnZV91cmxcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0QWN0aXZlKHJzLmdldEJvb2xlYW4oXCJpc0FjdGl2ZVwiKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVzZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgRGF0YWJhc2VVdGlsLmNsb3NlUmVzb3VyY2VzKHJzLCBzdG10LCBjb25uKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4uLi5cblxuICAgIHB1YmxpYyBVc2VyIGZpbmRCeVVzZXJuYW1lKFN0cmluZyB1c2VybmFtZSkge1xuICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgICAgICBQcmVwYXJlZFN0YXRlbWVudCBzdG10ID0gbnVsbDtcbiAgICAgICAgUmVzdWx0U2V0IHJzID0gbnVsbDtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29ubiA9IERhdGFiYXNlVXRpbC5nZXRDb25uZWN0aW9uKCk7XG4gICAgICAgICAgICBTdHJpbmcgc3FsID0gXCJTRUxFQ1QgKiBGUk9NIFVzZXJzIFdIRVJFIHVzZXJuYW1lID0gP1wiO1xuICAgICAgICAgICAgc3RtdCA9IGNvbm4ucHJlcGFyZVN0YXRlbWVudChzcWwpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMSwgdXNlcm5hbWUpO1xuICAgICAgICAgICAgcnMgPSBzdG10LmV4ZWN1dGVRdWVyeSgpO1xuXG4gICAgICAgICAgICBpZiAocnMubmV4dCgpKSB7XG4gICAgICAgICAgICAgICAgVXNlciB1c2VyID0gbmV3IFVzZXIoKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldFVzZXJJZChycy5nZXRJbnQoXCJ1c2VyX2lkXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldFVzZXJuYW1lKHJzLmdldFN0cmluZyhcInVzZXJuYW1lXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldFBhc3N3b3JkKHJzLmdldFN0cmluZyhcInBhc3N3b3JkXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldFJvbGUocnMuZ2V0U3RyaW5nKFwicm9sZVwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRJbWFnZVVybChycy5nZXRTdHJpbmcoXCJpbWFnZV91cmxcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0QWN0aXZlKHJzLmdldEJvb2xlYW4oXCJpc0FjdGl2ZVwiKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVzZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgRGF0YWJhc2VVdGlsLmNsb3NlUmVzb3VyY2VzKHJzLCBzdG10LCBjb25uKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBwdWJsaWMgVXNlciBmaW5kQnlFbWFpbChTdHJpbmcgZW1haWwpIHtcbiAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcbiAgICAgICAgUHJlcGFyZWRTdGF0ZW1lbnQgc3RtdCA9IG51bGw7XG4gICAgICAgIFJlc3VsdFNldCBycyA9IG51bGw7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIEtp4buDbSB0cmEgZW1haWwgY8OzIHThu5NuIHThuqFpIHRyb25nIGLhuqNuZyBTdGFmZnMga2jDtG5nXG4gICAgICAgICAgICBjb25uID0gRGF0YWJhc2VVdGlsLmdldENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgIFN0cmluZyBjaGVja1NxbCA9IFwiU0VMRUNUICogRlJPTSBTdGFmZnMgV0hFUkUgZW1haWwgPSA/XCI7XG4gICAgICAgICAgICBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KGNoZWNrU3FsKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDEsIGVtYWlsKTtcbiAgICAgICAgICAgIHJzID0gc3RtdC5leGVjdXRlUXVlcnkoKTtcblxuICAgICAgICAgICAgLy8gTuG6v3UgZW1haWwgdOG7k24gdOG6oWksIGzhuqV5IHRow7RuZyB0aW4gdXNlclxuICAgICAgICAgICAgU3RyaW5nIHNxbCA9IFwiU0VMRUNUIHUuKiBGUk9NIFVzZXJzIHUgXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJKT0lOIFN0YWZmcyBzIE9OIHUudXNlcl9pZCA9IHMudXNlcl9pZCBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICBcIldIRVJFIHMuZW1haWwgPSA/XCI7XG4gICAgICAgICAgICBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHNxbCk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygxLCBlbWFpbCk7XG5cbiAgICAgICAgICAgIHJzID0gc3RtdC5leGVjdXRlUXVlcnkoKTtcblxuICAgICAgICAgICAgaWYgKHJzLm5leHQoKSkge1xuICAgICAgICAgICAgICAgIFVzZXIgdXNlciA9IG5ldyBVc2VyKCk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRVc2VySWQocnMuZ2V0SW50KFwidXNlcl9pZFwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRVc2VybmFtZShycy5nZXRTdHJpbmcoXCJ1c2VybmFtZVwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRQYXNzd29yZChycy5nZXRTdHJpbmcoXCJwYXNzd29yZFwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRSb2xlKHJzLmdldFN0cmluZyhcInJvbGVcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0SW1hZ2VVcmwocnMuZ2V0U3RyaW5nKFwiaW1hZ2VfdXJsXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldEFjdGl2ZShycy5nZXRCb29sZWFuKFwiaXNBY3RpdmVcIikpO1xuICAgICAgICAgICAgICAgIHJldHVybiB1c2VyO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiU1FMIEVycm9yOiBcIiArIGUuZ2V0TWVzc2FnZSgpKTtcbiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBEYXRhYmFzZVV0aWwuY2xvc2VSZXNvdXJjZXMocnMsIHN0bXQsIGNvbm4pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbi4uLlxuUGF0aDogc3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vU2Vzc2lvbi9Vc2VyU2Vzc2lvbi5qYXZhXG4vKlxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9MaWNlbnNlcy9saWNlbnNlLWRlZmF1bHQudHh0IHRvIGNoYW5nZSB0aGlzIGxpY2Vuc2VcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9DbGFzcy5qYXZhIHRvIGVkaXQgdGhpcyB0ZW1wbGF0ZVxuICovXG5wYWNrYWdlIGludGVybmV0Lm1hbmdlbWVudC5zeXN0ZW0uU2Vzc2lvbjtcblxuaW1wb3J0IE1vZGVsLlVzZXI7XG5cbi8qKlxuICpcbiAqIEBhdXRob3IgTmdvYyBUaGFvXG4gKi9cbnB1YmxpYyBjbGFzcyBVc2VyU2Vzc2lvbiB7XG4gICAgcHVibGljIHN0YXRpYyBVc2VyIGN1cnJlbnRVc2VyO1xuXG4gICAgcHVibGljIFVzZXJTZXNzaW9uKCkge1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgVXNlciBnZXRDdXJyZW50VXNlcigpIHtcbiAgICAgICAgcmV0dXJuIGN1cnJlbnRVc2VyO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBzZXRDdXJyZW50VXNlcihVc2VyIGN1cnJlbnRVc2VyKSB7XG4gICAgICAgIFVzZXJTZXNzaW9uLmN1cnJlbnRVc2VyID0gY3VycmVudFVzZXI7XG4gICAgfVxuICAgIFxuICAgIFxufVxuLi4uXG5QYXRoOiBzcmMvREFPL1VzZXJEQU8uamF2YVxuLypcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvTGljZW5zZXMvbGljZW5zZS1kZWZhdWx0LnR4dCB0byBjaGFuZ2UgdGhpcyBsaWNlbnNlXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ2xhc3MuamF2YSB0byBlZGl0IHRoaXMgdGVtcGxhdGVcbiAqL1xucGFja2FnZSBEQU87XG5cbmltcG9ydCBNb2RlbC5Vc2VyO1xuaW1wb3J0IGphdmEudXRpbC5MaXN0O1xuXG4vKipcbiAqXG4gKiBAYXV0aG9yIE5nb2MgVGhhb1xuICovXG5wdWJsaWMgY2xhc3MgVXNlckRBT3tcblxuICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBpbnNlcnQoVXNlciBvYmopIHtcbiAgICAgICAgXG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyB2b2lkIHVwZGF0ZShVc2VyIG9iaikge1xuICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oXCJOb3Qgc3VwcG9ydGVkIHlldC5cIik7IC8vIEdlbmVyYXRlZCBmcm9tIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9Db2RlL0dlbmVyYXRlZE1ldGhvZEJvZHlcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIHZvaWQgZGVsZXRlKGludCBpZCkge1xuICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oXCJOb3Qgc3VwcG9ydGVkIHlldC5cIik7IC8vIEdlbmVyYXRlZCBmcm9tIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9Db2RlL0dlbmVyYXRlZE1ldGhvZEJvZHlcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIFVzZXIgZ2V0QnlJZChpbnQgaWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpOyAvLyBHZW5lcmF0ZWQgZnJvbSBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ29kZS9HZW5lcmF0ZWRNZXRob2RCb2R5XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBMaXN0PFVzZXI+IGdldEFsbCgpIHtcbiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpOyAvLyBHZW5lcmF0ZWQgZnJvbSBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ29kZS9HZW5lcmF0ZWRNZXRob2RCb2R5XG4gICAgfVxuICAgIFxufVxuLi4uXG5QYXRoOiBzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9BZG1pbi9EYXNoYm9hcmQuamF2YVxuLypcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvTGljZW5zZXMvbGljZW5zZS1kZWZhdWx0LnR4dCB0byBjaGFuZ2UgdGhpcyBsaWNlbnNlXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0dVSUZvcm1zL0pGcmFtZS5qYXZhIHRvIGVkaXQgdGhpcyB0ZW1wbGF0ZVxuICovXG5wYWNrYWdlIGludGVybmV0Lm1hbmdlbWVudC5zeXN0ZW0uQWRtaW47XG5cbmltcG9ydCBNb2RlbC5Vc2VyO1xuaW1wb3J0IGludGVybmV0Lm1hbmdlbWVudC5zeXN0ZW0uU2Vzc2lvbi5Vc2VyU2Vzc2lvbjtcbmltcG9ydCBqYXZhLnRpbWUuTG9jYWxUaW1lO1xuaW1wb3J0IGphdmF4LnN3aW5nLkpPcHRpb25QYW5lO1xuXG4vKipcbiAqXG4gKiBAYXV0aG9yIE5nb2MgVGhhb1xuICovXG5wdWJsaWMgY2xhc3MgRGFzaGJvYXJkIGV4dGVuZHMgamF2YXguc3dpbmcuSkZyYW1lIHtcblxuICAgIFVzZXIgYWRtaW4gPSBVc2VyU2Vzc2lvbi5nZXRDdXJyZW50VXNlcigpO1xuICAgIFxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgbmV3IGZvcm0gRGFzaGJvYXJkXG4gICAgICovXG4gICAgcHVibGljIERhc2hib2FyZCgpIHtcbiAgICAgICAgaW5pdENvbXBvbmVudHMoKTtcbiAgICAgICAgc2V0dXBIZWxsbygpO1xuICAgICAgICBzZXR1cFVzZXJuYW1lKCk7XG4gICAgfVxuICAgIFxuICAgIHByaXZhdGUgdm9pZCBzZXR1cEhlbGxvKCkge1xuICAgICAgICBMb2NhbFRpbWUgbm93ID0gTG9jYWxUaW1lLm5vdygpO1xuICAgICAgICBpbnQgaG91ciA9IG5vdy5nZXRIb3VyKCk7XG4gICAgICAgIFxuICAgICAgICBTdHJpbmcgZ3JlZXRpbmc7XG5cbiAgICAgICAgaWYgKGhvdXIgPj0gNSAmJiBob3VyIDwgMTEpIHtcbiAgICAgICAgICAgIGdyZWV0aW5nID0gXCJDaMOgbyBideG7lWkgc8OhbmcsXCI7XG4gICAgICAgIH0gZWxzZSBpZiAoaG91ciA+PSAxMSAmJiBob3VyIDwgMTUpIHtcbiAgICAgICAgICAgIGdyZWV0aW5nID0gXCJDaMOgbyBideG7lWkgdHLGsGEsXCI7XG4gICAgICAgIH0gZWxzZSBpZiAoaG91ciA+PSAxNSAmJiBob3VyIDwgMTcpIHtcbiAgICAgICAgICAgIGdyZWV0aW5nID0gXCJDaMOgbyBideG7lWkgY2hp4buBdSxcIjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGdyZWV0aW5nID0gXCJDaMOgbyBideG7lWkgdOG7kWksXCI7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGxiSGVsbG8uc2V0VGV4dChncmVldGluZyk7XG4gICAgfVxuICAgIFxuICAgIHByaXZhdGUgdm9pZCBzZXR1cFVzZXJuYW1lKCkge1xuICAgICAgICBsYlVzZXJOYW1lLnNldFRleHQoYWRtaW4uZ2V0VXNlcm5hbWUoKSk7XG4gICAgfVxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL2NvbS9zdG9yZS9hcHAvcGV0c3RvcmUvQ29udHJvbGxlcnMvQWRtaW4vQWRtaW5NZW51Q29udHJvbGxlci5qYXZhXG4uLi5cblxuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuQ29udHJvbGxlcnMuQ29udHJvbGxlclV0aWxzO1xuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuTW9kZWxzLkVudGl0aWVzLlN0YWZmO1xuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuTW9kZWxzLkVudGl0aWVzLlVzZXI7XG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5TZXNzaW9ucy5TZXNzaW9uTWFuYWdlcjtcbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLlV0aWxzLkltYWdlVXRpbHM7XG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5WaWV3cy5BZG1pbkZhY3Rvcnk7XG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5WaWV3cy5Nb2RlbFZpZXc7XG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5WaWV3cy5WaWV3RmFjdG9yeTtcbmltcG9ydCBkZS5qZW5zZC5meC5nbHlwaHMuZm9udGF3ZXNvbWUuRm9udEF3ZXNvbWVJY29uVmlldztcbmltcG9ydCBqYXZhZnguZXZlbnQuQWN0aW9uRXZlbnQ7XG5pbXBvcnQgamF2YWZ4LmZ4bWwuRlhNTDtcbmltcG9ydCBqYXZhZnguZnhtbC5Jbml0aWFsaXphYmxlO1xuaW1wb3J0IGphdmFmeC5zY2VuZS5jb250cm9sLio7XG5pbXBvcnQgamF2YWZ4LnNjZW5lLmltYWdlLkltYWdlO1xuaW1wb3J0IGphdmFmeC5zY2VuZS5pbWFnZS5JbWFnZVZpZXc7XG5pbXBvcnQgamF2YWZ4LnNjZW5lLmxheW91dC5BbmNob3JQYW5lO1xuaW1wb3J0IGphdmFmeC5zY2VuZS5wYWludC5JbWFnZVBhdHRlcm47XG4uLi5cblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBMYWJlbCB1c2VybmFtZUxhYmVsO1xuXG4gICAgcHJpdmF0ZSBVc2VyIGN1cnJlbnRVc2VyO1xuXG4vLyAgICBwcml2YXRlIFNlc3Npb25NYW5hZ2VyIHNlc3Npb25NYW5hZ2VyO1xuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIHZvaWQgaW5pdGlhbGl6ZShVUkwgdXJsLCBSZXNvdXJjZUJ1bmRsZSByZXNvdXJjZUJ1bmRsZSkge1xuICAgICAgICBjdXJyZW50VXNlciA9IFNlc3Npb25NYW5hZ2VyLmdldEN1cnJlbnRVc2VyKCk7XG4gICAgICAgIHNldHVwVXNlck5hbWUoKTtcbiAgICAgICAgc2V0dXBVc2VySW1hZ2UoKTtcbiAgICAgICAgc2V0TWVudSgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgdm9pZCBzZXR1cFVzZXJOYW1lKCkge1xuICAgICAgICBpZiAoY3VycmVudFVzZXIgIT0gbnVsbCkge1xuICAgICAgICAgICAgdXNlcm5hbWVMYWJlbC5zZXRUZXh0KGN1cnJlbnRVc2VyLmdldFVzZXJuYW1lKCkpO1xuICAgICAgICAgICAgbmFtZUxhYmVsLnNldFRleHQoY3VycmVudFVzZXIuZ2V0VXNlcm5hbWUoKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB1c2VybmFtZUxhYmVsLnNldFRleHQoXCJDaMawYSDEkcSDbmcgbmjhuq1wXCIpO1xuICAgICAgICAgICAgbmFtZUxhYmVsLnNldFRleHQoXCJDaMawYSBj4bqtcCBuaOG6rXQgdGjDtG5nIHRpblwiKTtcbiAgICAgICAgfVxuICAgIH1cbi4uLlxuXG4gICAgICAgIE1lbnVJdGVtIGxvZ291dE1lbnVJdGVtID0gbmV3IE1lbnVJdGVtKFwixJDEg25nIHh14bqldFwiKTtcbiAgICAgICAgbG9nb3V0TWVudUl0ZW0uc2V0T25BY3Rpb24oZSAtPiBoYW5kbGVMb2dvdXQobnVsbCkpO1xuICAgICAgICBtZW51TG9nb3V0LmdldEl0ZW1zKCkuYWRkKGxvZ291dE1lbnVJdGVtKTtcbiAgICB9XG5cbiAgICBARlhNTFxuICAgIHZvaWQgaGFuZGxlTG9nb3V0KEFjdGlvbkV2ZW50IGV2ZW50KSB7XG4gICAgICAgIFN0YWdlIGN1cnJlbnRTdGFnZSA9IChTdGFnZSkgcm9vdC5nZXRTY2VuZSgpLmdldFdpbmRvdygpO1xuICAgICAgICBpZiAoQ29udHJvbGxlclV0aWxzLnNob3dDb25maXJtYXRpb25BbmRXYWl0KFwixJDEg25nIHh14bqldFwiLCBcIkLhuqFuIGPDsyBjaOG6r2MgY2jhuq9uIG114buRbiDEkcSDbmcgeHXhuqV0IGtow7RuZz9cXG5OaOG6pW4gT0sgxJHhu4MgeMOhYyBuaOG6rW4uXCIpKSB7XG4gICAgICAgICAgICBTZXNzaW9uTWFuYWdlci5jbGVhcigpO1xuICAgICAgICAgICAgVmlld0ZhY3RvcnkuZ2V0SW5zdGFuY2UoKS5zd2l0Y2hDb250ZW50KFwibG9naW5cIiwgY3VycmVudFN0YWdlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIENvbnRyb2xsZXJVdGlscy5zaG93QWxlcnQoQWxlcnQuQWxlcnRUeXBlLklORk9STUFUSU9OLCBcIlRow7RuZyBiw6FvXCIsIFwixJDEg25nIHh14bqldCBraMO0bmcgdGjDoG5oIGPDtG5nXCIpO1xuICAgICAgICB9XG4gICAgfVxufVxuLi4uXG5QYXRoOiBzcmMvTW9kZWwvVXNlci5qYXZhXG4uLi5cblxuaW1wb3J0IGphdmEudGltZS5Mb2NhbERhdGVUaW1lO1xuLyoqXG4gKlxuICogQGF1dGhvciBOZ29jIFRoYW9cbiAqL1xucHVibGljIGNsYXNzIFVzZXIge1xuICAgIHByaXZhdGUgaW50IHVzZXJfaWQ7XG4gICAgcHJpdmF0ZSBTdHJpbmcgdXNlcm5hbWU7XG4gICAgcHJpdmF0ZSBTdHJpbmcgcGFzc3dvcmQ7XG4gICAgcHJpdmF0ZSBTdHJpbmcgcm9sZTtcbiAgICBwcml2YXRlIExvY2FsRGF0ZVRpbWUgY3JlYXRlX2F0O1xuICAgIHByaXZhdGUgYm9vbGVhbiBpc0FjdGl2ZTtcblxuICAgIHB1YmxpYyBVc2VyKCkge1xuICAgIH1cblxuICAgIHB1YmxpYyBVc2VyKGludCB1c2VyX2lkLCBTdHJpbmcgdXNlcm5hbWUsIFN0cmluZyBwYXNzd29yZCwgU3RyaW5nIHJvbGUsIExvY2FsRGF0ZVRpbWUgY3JlYXRlX2F0LCBib29sZWFuIGlzQWN0aXZlKSB7XG4gICAgICAgIHRoaXMudXNlcl9pZCA9IHVzZXJfaWQ7XG4gICAgICAgIHRoaXMudXNlcm5hbWUgPSB1c2VybmFtZTtcbiAgICAgICAgdGhpcy5wYXNzd29yZCA9IHBhc3N3b3JkO1xuICAgICAgICB0aGlzLnJvbGUgPSByb2xlO1xuICAgICAgICB0aGlzLmNyZWF0ZV9hdCA9IGNyZWF0ZV9hdDtcbiAgICAgICAgdGhpcy5pc0FjdGl2ZSA9IGlzQWN0aXZlO1xuICAgIH1cblxuICAgIHB1YmxpYyBpbnQgZ2V0VXNlcl9pZCgpIHtcbiAgICAgICAgcmV0dXJuIHVzZXJfaWQ7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgc2V0VXNlcl9pZChpbnQgdXNlcl9pZCkge1xuICAgICAgICB0aGlzLnVzZXJfaWQgPSB1c2VyX2lkO1xuICAgIH1cblxuICAgIHB1YmxpYyBTdHJpbmcgZ2V0VXNlcm5hbWUoKSB7XG4gICAgICAgIHJldHVybiB1c2VybmFtZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXRVc2VybmFtZShTdHJpbmcgdXNlcm5hbWUpIHtcbiAgICAgICAgdGhpcy51c2VybmFtZSA9IHVzZXJuYW1lO1xuICAgIH1cbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9jb20vc3RvcmUvYXBwL3BldHN0b3JlL0NvbnRyb2xsZXJzL0FkbWluL0Rhc2hib2FyZENvbnRyb2xsZXIuamF2YVxuLi4uXG5cbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLkNvbnRyb2xsZXJzLkNvbnRyb2xsZXJVdGlscztcbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLkRBTy5EYXNoYm9hcmREQU87XG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5Nb2RlbHMuRW50aXRpZXMuUGV0U2FsZXNEYXRhO1xuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuTW9kZWxzLkVudGl0aWVzLlByb2R1Y3RTYWxlc0RhdGE7XG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5TZXNzaW9ucy5TZXNzaW9uTWFuYWdlcjtcbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLlZpZXdzLkFkbWluRmFjdG9yeTtcbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLlZpZXdzLlZpZXdGYWN0b3J5O1xuaW1wb3J0IGphdmFmeC5hbmltYXRpb24uS2V5RnJhbWU7XG5pbXBvcnQgamF2YWZ4LmFuaW1hdGlvbi5UaW1lbGluZTtcbmltcG9ydCBqYXZhZnguYXBwbGljYXRpb24uUGxhdGZvcm07XG5pbXBvcnQgamF2YWZ4LmNvbGxlY3Rpb25zLkZYQ29sbGVjdGlvbnM7XG5pbXBvcnQgamF2YWZ4LmNvbGxlY3Rpb25zLk9ic2VydmFibGVMaXN0O1xuaW1wb3J0IGphdmFmeC5meG1sLkZYTUw7XG5pbXBvcnQgamF2YWZ4LmZ4bWwuSW5pdGlhbGl6YWJsZTtcbmltcG9ydCBqYXZhZnguc2NlbmUuY2hhcnQuQmFyQ2hhcnQ7XG5pbXBvcnQgamF2YWZ4LnNjZW5lLmNoYXJ0LlBpZUNoYXJ0O1xuaW1wb3J0IGphdmFmeC5zY2VuZS5jaGFydC5YWUNoYXJ0O1xuLi4uXG5cbiAgICBwcml2YXRlIHZvaWQgbmF2aWdhdGVUbyhTdHJpbmcgdmlld05hbWUpIHtcbiAgICAgICAgU3RhZ2UgY3VycmVudFN0YWdlID0gKFN0YWdlKSBsb2dvdXRCdXR0b24uZ2V0U2NlbmUoKS5nZXRXaW5kb3coKTtcbiAgICAgICAgQWRtaW5GYWN0b3J5LmdldEluc3RhbmNlKCkuc3dpdGNoQ29udGVudCh2aWV3TmFtZSwgY3VycmVudFN0YWdlKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHZvaWQgaGFuZGxlTG9nb3V0KCkge1xuICAgICAgICAvLyBTdG9wIGF1dG8tcmVmcmVzaCBpZiBhY3RpdmVcbiAgICAgICAgc3RvcEF1dG9SZWZyZXNoKCk7XG5cbiAgICAgICAgU3RhZ2UgY3VycmVudFN0YWdlID0gKFN0YWdlKSBsb2dvdXRCdXR0b24uZ2V0U2NlbmUoKS5nZXRXaW5kb3coKTtcbiAgICAgICAgaWYgKENvbnRyb2xsZXJVdGlscy5zaG93Q29uZmlybWF0aW9uQW5kV2FpdChcIsSQxINuZyB4deG6pXRcIiwgXCJC4bqhbiBjw7MgY2jhuq9jIGNo4bqvbiBtdeG7kW4gxJHEg25nIHh14bqldCBraMO0bmc/XFxuTmjhuqVuIE9LIMSR4buDIHjDoWMgbmjhuq1uLlwiKSkge1xuICAgICAgICAgICAgU2Vzc2lvbk1hbmFnZXIuY2xlYXIoKTtcbiAgICAgICAgICAgIFZpZXdGYWN0b3J5LmdldEluc3RhbmNlKCkuc3dpdGNoQ29udGVudChcImxvZ2luXCIsIGN1cnJlbnRTdGFnZSk7XG4gICAgICAgIH1cbiAgICB9XG5cblxufVxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL2NvbS9zdG9yZS9hcHAvcGV0c3RvcmUvUGV0U3RvcmVBcHBsaWNhdGlvbi5qYXZhXG5wYWNrYWdlIGNvbS5zdG9yZS4uLi4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCIwODBkZjBmMS02ZjgxLTQzZDgtYWRlOS04YTAxNzRjNTFlYTU7dG9vbHVfMDFGanBVbk1NQldRZ2ZTcDdMWnJ0WFJWIjp7InJlcXVlc3RJZCI6IjA4MGRmMGYxLTZmODEtNDNkOC1hZGU5LThhMDE3NGM1MWVhNSIsInRvb2xVc2VJZCI6InRvb2x1XzAxRmpwVW5NTUJXUWdmU3A3TFpydFhSViIsInBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IlRoZSBmb2xsb3dpbmcgY29kZSBzZWN0aW9ucyB3ZXJlIHJldHJpZXZlZDpcblBhdGg6IHNyYy9tYWluL2phdmEvY29tL3N0b3JlL2FwcC9wZXRzdG9yZS9EQU8vVXNlckRBTy5qYXZhXG5wYWNrYWdlIGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuREFPO1xuXG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5Nb2RlbHMuRW50aXRpZXMuVXNlcjtcbmltcG9ydCBvcmcubWluZHJvdC5qYmNyeXB0LkJDcnlwdDtcblxuaW1wb3J0IGphdmEuc3FsLio7XG5pbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDtcbmltcG9ydCBqYXZhLnV0aWwuQmFzZTY0O1xuXG5wdWJsaWMgY2xhc3MgVXNlckRBTyBpbXBsZW1lbnRzIEJhc2VEQU88VXNlciwgSW50ZWdlcj4ge1xuICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgaW50IGlzRHVwbGljYXRlID0gLTE7XG5cbiAgICBwdWJsaWMgc3RhdGljIFVzZXJEQU8gZ2V0SW5zdGFuY2UoKSB7XG4gICAgICAgIHJldHVybiBuZXcgVXNlckRBTygpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgU3RyaW5nIGVuY29kZShTdHJpbmcgcGFzc3dvcmQpIHtcbi8vICAgICAgICByZXR1cm4gQmFzZTY0LmdldEVuY29kZXIoKS5lbmNvZGVUb1N0cmluZyhwYXNzd29yZC5nZXRCeXRlcygpKTtcbiAgICAgICAgcmV0dXJuIEJDcnlwdC5oYXNocHcocGFzc3dvcmQsIEJDcnlwdC5nZW5zYWx0KCkpO1xuICAgIH1cblxuLy8gICAgcHVibGljIHN0YXRpYyBTdHJpbmcgZGVjb2RlKFN0cmluZyBwYXNzd29yZCkge1xuLy8gICAgICAgIHJldHVybiBuZXcgU3RyaW5nKEJhc2U2NC5nZXREZWNvZGVyKCkuZGVjb2RlKHBhc3N3b3JkKSk7XG4vLyAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGJvb2xlYW4gdmVyaWZ5KFN0cmluZyBwYXNzd29yZCwgU3RyaW5nIGhhc2hlZCkge1xuICAgICAgICByZXR1cm4gQkNyeXB0LmNoZWNrcHcocGFzc3dvcmQsIGhhc2hlZCk7XG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIGludCBpbnNlcnQoVXNlciBlbnRpdHkpIHtcbiAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcbiAgICAgICAgUHJlcGFyZWRTdGF0ZW1lbnQgc3RtdCA9IG51bGw7XG4gICAgICAgIFJlc3VsdFNldCBycyA9IG51bGw7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbm4gPSBEYXRhYmFzZVV0aWwuZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgICAgICAgU3RyaW5nIHNxbCA9IFwiSU5TRVJUIElOVE8gVXNlcnMgKHVzZXJuYW1lLCBwYXNzd29yZCwgcm9sZSwgaW1hZ2VfdXJsLCBpc0FjdGl2ZSkgVkFMVUVTICg/LCA/LCA/LCA/LCA/KVwiO1xuICAgICAgICAgICAgc3RtdCA9IGNvbm4ucHJlcGFyZVN0YXRlbWVudChzcWwsIFN0YXRlbWVudC5SRVRVUk5fR0VORVJBVEVEX0tFWVMpO1xuXG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygxLCBlbnRpdHkuZ2V0VXNlcm5hbWUoKSk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygyLCBlbmNvZGUoZW50aXR5LmdldFBhc3N3b3JkKCkpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDMsIGVudGl0eS5nZXRSb2xlKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoNCwgZW50aXR5LmdldEltYWdlVXJsKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRCb29sZWFuKDUsIGVudGl0eS5pc0FjdGl2ZSgpKTtcblxuICAgICAgICAgICAgaW50IGFmZmVjdGVkUm93cyA9IHN0bXQuZXhlY3V0ZVVwZGF0ZSgpO1xuICAgICAgICAgICAgaWYgKGFmZmVjdGVkUm93cyA9PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRyeSAoUmVzdWx0U2V0IGdlbmVyYXRlZEtleXMgPSBzdG10LmdldEdlbmVyYXRlZEtleXMoKSkge1xuICAgICAgICAgICAgICAgIGlmIChnZW5lcmF0ZWRLZXlzLm5leHQoKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ2VuZXJhdGVkS2V5cy5nZXRJbnQoMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBEYXRhYmFzZVV0aWwuY2xvc2VSZXNvdXJjZXMocnMsIHN0bXQsIGNvbm4pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIGludCB1cGRhdGUoVXNlciBlbnRpdHkpIHtcbiAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcbiAgICAgICAgUHJlcGFyZWRTdGF0ZW1lbnQgc3RtdCA9IG51bGw7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbm4gPSBEYXRhYmFzZVV0aWwuZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgICAgICAgU3RyaW5nIHNxbCA9IFwiVVBEQVRFIFVzZXJzIFNFVCB1c2VybmFtZSA9ID8sIHBhc3N3b3JkID0gPywgcm9sZSA9ID8sIGltYWdlX3VybCA9ID8sIGlzQWN0aXZlID0gPyBXSEVSRSB1c2VyX2lkID0gP1wiO1xuICAgICAgICAgICAgc3RtdCA9IGNvbm4ucHJlcGFyZVN0YXRlbWVudChzcWwpO1xuXG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygxLCBlbnRpdHkuZ2V0VXNlcm5hbWUoKSk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygyLCBlbmNvZGUoZW50aXR5LmdldFBhc3N3b3JkKCkpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDMsIGVudGl0eS5nZXRSb2xlKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoNCwgZW50aXR5LmdldEltYWdlVXJsKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRCb29sZWFuKDUsIGVudGl0eS5pc0FjdGl2ZSgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0SW50KDYsIGVudGl0eS5nZXRVc2VySWQoKSk7XG5cbiAgICAgICAgICAgIHJldHVybiBzdG10LmV4ZWN1dGVVcGRhdGUoKTtcbiAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIERhdGFiYXNlVXRpbC5jbG9zZVJlc291cmNlcyhzdG10LCBjb25uKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBpbnQgdXBkYXRlKFVzZXIgZW50aXR5LCBib29sZWFuIGlzVXNlcm5hbWVDaGFuZ2VkKSB7XG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25uID0gRGF0YWJhc2VVdGlsLmdldENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgIFN0cmluZyBzcWwgPSBcIlVQREFURSBVc2VycyBTRVQgdXNlcm5hbWUgPSA/LCBwYXNzd29yZCA9ID8sIHJvbGUgPSA/LCBpbWFnZV91cmwgPSA/LCBpc0FjdGl2ZSA9ID8gV0hFUkUgdXNlcl9pZCA9ID9cIjtcbiAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsKTtcblxuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMSwgZW50aXR5LmdldFVzZXJuYW1lKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMiwgZW5jb2RlKGVudGl0eS5nZXRQYXNzd29yZCgpKSk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygzLCBlbnRpdHkuZ2V0Um9sZSgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDQsIGVudGl0eS5nZXRJbWFnZVVybCgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0Qm9vbGVhbig1LCBlbnRpdHkuaXNBY3RpdmUoKSk7XG4gICAgICAgICAgICBzdG10LnNldEludCg2LCBlbnRpdHkuZ2V0VXNlcklkKCkpO1xuXG4gICAgICAgICAgICByZXR1cm4gc3RtdC5leGVjdXRlVXBkYXRlKCk7XG4gICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBEYXRhYmFzZVV0aWwuY2xvc2VSZXNvdXJjZXMoc3RtdCwgY29ubik7XG4gICAgICAgIH1cbiAgICB9XG4uLi5cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBBcnJheUxpc3Q8VXNlcj4gZmluZEFsbCgpIHtcbiAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcbiAgICAgICAgUHJlcGFyZWRTdGF0ZW1lbnQgc3RtdCA9IG51bGw7XG4gICAgICAgIFJlc3VsdFNldCBycyA9IG51bGw7XG4gICAgICAgIEFycmF5TGlzdDxVc2VyPiB1c2VycyA9IG5ldyBBcnJheUxpc3Q8PigpO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25uID0gRGF0YWJhc2VVdGlsLmdldENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgIFN0cmluZyBzcWwgPSBcIlNFTEVDVCAqIEZST00gVXNlcnNcIjtcbiAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsKTtcbiAgICAgICAgICAgIHJzID0gc3RtdC5leGVjdXRlUXVlcnkoKTtcblxuICAgICAgICAgICAgd2hpbGUgKHJzLm5leHQoKSkge1xuICAgICAgICAgICAgICAgIFVzZXIgdXNlciA9IG5ldyBVc2VyKCk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRVc2VySWQocnMuZ2V0SW50KFwidXNlcl9pZFwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRVc2VybmFtZShycy5nZXRTdHJpbmcoXCJ1c2VybmFtZVwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRQYXNzd29yZChycy5nZXRTdHJpbmcoXCJwYXNzd29yZFwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRSb2xlKHJzLmdldFN0cmluZyhcInJvbGVcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0SW1hZ2VVcmwocnMuZ2V0U3RyaW5nKFwiaW1hZ2VfdXJsXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldEFjdGl2ZShycy5nZXRCb29sZWFuKFwiaXNBY3RpdmVcIikpO1xuICAgICAgICAgICAgICAgIHVzZXJzLmFkZCh1c2VyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBEYXRhYmFzZVV0aWwuY2xvc2VSZXNvdXJjZXMocnMsIHN0bXQsIGNvbm4pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1c2VycztcbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgVXNlciBmaW5kQnlJZChJbnRlZ2VyIGlkKSB7XG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuICAgICAgICBSZXN1bHRTZXQgcnMgPSBudWxsO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25uID0gRGF0YWJhc2VVdGlsLmdldENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgIFN0cmluZyBzcWwgPSBcIlNFTEVDVCAqIEZST00gVXNlcnMgV0hFUkUgdXNlcl9pZCA9ID9cIjtcbiAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsKTtcbiAgICAgICAgICAgIHN0bXQuc2V0SW50KDEsIGlkKTtcbiAgICAgICAgICAgIHJzID0gc3RtdC5leGVjdXRlUXVlcnkoKTtcblxuICAgICAgICAgICAgaWYgKHJzLm5leHQoKSkge1xuICAgICAgICAgICAgICAgIFVzZXIgdXNlciA9IG5ldyBVc2VyKCk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRVc2VySWQocnMuZ2V0SW50KFwidXNlcl9pZFwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRVc2VybmFtZShycy5nZXRTdHJpbmcoXCJ1c2VybmFtZVwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRQYXNzd29yZChycy5nZXRTdHJpbmcoXCJwYXNzd29yZFwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRSb2xlKHJzLmdldFN0cmluZyhcInJvbGVcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0SW1hZ2VVcmwocnMuZ2V0U3RyaW5nKFwiaW1hZ2VfdXJsXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldEFjdGl2ZShycy5nZXRCb29sZWFuKFwiaXNBY3RpdmVcIikpO1xuICAgICAgICAgICAgICAgIHJldHVybiB1c2VyO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIERhdGFiYXNlVXRpbC5jbG9zZVJlc291cmNlcyhycywgc3RtdCwgY29ubik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuLi4uXG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbm4gPSBEYXRhYmFzZVV0aWwuZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgICAgICAgU3RyaW5nIHNxbCA9IFwiU0VMRUNUICogRlJPTSBVc2VycyBXSEVSRSBcIiArIGNvbmRpdGlvbjtcbiAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsKTtcbiAgICAgICAgICAgIHJzID0gc3RtdC5leGVjdXRlUXVlcnkoKTtcblxuICAgICAgICAgICAgd2hpbGUgKHJzLm5leHQoKSkge1xuICAgICAgICAgICAgICAgIFVzZXIgdXNlciA9IG5ldyBVc2VyKCk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRVc2VySWQocnMuZ2V0SW50KFwidXNlcl9pZFwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRVc2VybmFtZShycy5nZXRTdHJpbmcoXCJ1c2VybmFtZVwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRQYXNzd29yZChycy5nZXRTdHJpbmcoXCJwYXNzd29yZFwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRSb2xlKHJzLmdldFN0cmluZyhcInJvbGVcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0SW1hZ2VVcmwocnMuZ2V0U3RyaW5nKFwiaW1hZ2VfdXJsXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldEFjdGl2ZShycy5nZXRCb29sZWFuKFwiaXNBY3RpdmVcIikpO1xuICAgICAgICAgICAgICAgIHVzZXJzLmFkZCh1c2VyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBEYXRhYmFzZVV0aWwuY2xvc2VSZXNvdXJjZXMocnMsIHN0bXQsIGNvbm4pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1c2VycztcbiAgICB9XG5cbiAgICBwdWJsaWMgVXNlciBmaW5kQnlVc2VybmFtZShTdHJpbmcgdXNlcm5hbWUpIHtcbiAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcbiAgICAgICAgUHJlcGFyZWRTdGF0ZW1lbnQgc3RtdCA9IG51bGw7XG4gICAgICAgIFJlc3VsdFNldCBycyA9IG51bGw7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbm4gPSBEYXRhYmFzZVV0aWwuZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgICAgICAgU3RyaW5nIHNxbCA9IFwiU0VMRUNUICogRlJPTSBVc2VycyBXSEVSRSB1c2VybmFtZSA9ID9cIjtcbiAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDEsIHVzZXJuYW1lKTtcbiAgICAgICAgICAgIHJzID0gc3RtdC5leGVjdXRlUXVlcnkoKTtcblxuICAgICAgICAgICAgaWYgKHJzLm5leHQoKSkge1xuICAgICAgICAgICAgICAgIFVzZXIgdXNlciA9IG5ldyBVc2VyKCk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRVc2VySWQocnMuZ2V0SW50KFwidXNlcl9pZFwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRVc2VybmFtZShycy5nZXRTdHJpbmcoXCJ1c2VybmFtZVwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRQYXNzd29yZChycy5nZXRTdHJpbmcoXCJwYXNzd29yZFwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRSb2xlKHJzLmdldFN0cmluZyhcInJvbGVcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0SW1hZ2VVcmwocnMuZ2V0U3RyaW5nKFwiaW1hZ2VfdXJsXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldEFjdGl2ZShycy5nZXRCb29sZWFuKFwiaXNBY3RpdmVcIikpO1xuICAgICAgICAgICAgICAgIHJldHVybiB1c2VyO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIERhdGFiYXNlVXRpbC5jbG9zZVJlc291cmNlcyhycywgc3RtdCwgY29ubik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcHVibGljIFVzZXIgZmluZEJ5RW1haWwoU3RyaW5nIGVtYWlsKSB7XG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuICAgICAgICBSZXN1bHRTZXQgcnMgPSBudWxsO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBLaeG7g20gdHJhIGVtYWlsIGPDsyB04buTbiB04bqhaSB0cm9uZyBi4bqjbmcgU3RhZmZzIGtow7RuZ1xuICAgICAgICAgICAgY29ubiA9IERhdGFiYXNlVXRpbC5nZXRDb25uZWN0aW9uKCk7XG4gICAgICAgICAgICBTdHJpbmcgY2hlY2tTcWwgPSBcIlNFTEVDVCAqIEZST00gU3RhZmZzIFdIRVJFIGVtYWlsID0gP1wiO1xuICAgICAgICAgICAgc3RtdCA9IGNvbm4ucHJlcGFyZVN0YXRlbWVudChjaGVja1NxbCk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygxLCBlbWFpbCk7XG4gICAgICAgICAgICBycyA9IHN0bXQuZXhlY3V0ZVF1ZXJ5KCk7XG5cbiAgICAgICAgICAgIC8vIE7hur91IGVtYWlsIHThu5NuIHThuqFpLCBs4bqleSB0aMO0bmcgdGluIHVzZXJcbiAgICAgICAgICAgIFN0cmluZyBzcWwgPSBcIlNFTEVDVCB1LiogRlJPTSBVc2VycyB1IFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiSk9JTiBTdGFmZnMgcyBPTiB1LnVzZXJfaWQgPSBzLnVzZXJfaWQgXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJXSEVSRSBzLmVtYWlsID0gP1wiO1xuICAgICAgICAgICAgc3RtdCA9IGNvbm4ucHJlcGFyZVN0YXRlbWVudChzcWwpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMSwgZW1haWwpO1xuXG4gICAgICAgICAgICBycyA9IHN0bXQuZXhlY3V0ZVF1ZXJ5KCk7XG5cbiAgICAgICAgICAgIGlmIChycy5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICBVc2VyIHVzZXIgPSBuZXcgVXNlcigpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0VXNlcklkKHJzLmdldEludChcInVzZXJfaWRcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0VXNlcm5hbWUocnMuZ2V0U3RyaW5nKFwidXNlcm5hbWVcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0UGFzc3dvcmQocnMuZ2V0U3RyaW5nKFwicGFzc3dvcmRcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0Um9sZShycy5nZXRTdHJpbmcoXCJyb2xlXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldEltYWdlVXJsKHJzLmdldFN0cmluZyhcImltYWdlX3VybFwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRBY3RpdmUocnMuZ2V0Qm9vbGVhbihcImlzQWN0aXZlXCIpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdXNlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlNRTCBFcnJvcjogXCIgKyBlLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgRGF0YWJhc2VVdGlsLmNsb3NlUmVzb3VyY2VzKHJzLCBzdG10LCBjb25uKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBwdWJsaWMgYm9vbGVhbiBjaGVja0R1cGxpY2F0ZShTdHJpbmcgdXNlcm5hbWUsIGludCBleGNsdWRlVXNlcklkKSB7XG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuICAgICAgICBSZXN1bHRTZXQgcnMgPSBudWxsO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29ubiA9IERhdGFiYXNlVXRpbC5nZXRDb25uZWN0aW9uKCk7XG4gICAgICAgICAgICBTdHJpbmcgc3FsID0gXCJTRUxFQ1QgQ09VTlQoKikgRlJPTSBVc2VycyBXSEVSRSBMT1dFUih1c2VybmFtZSkgPSBMT1dFUig/KVwiO1xuICAgICAgICAgICAgaWYgKGV4Y2x1ZGVVc2VySWQgPj0gMCkge1xuICAgICAgICAgICAgICAgIHNxbCArPSBcIiBBTkQgdXNlcl9pZCA8PiA/XCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHNxbCk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygxLCB1c2VybmFtZSk7XG4gICAgICAgICAgICBpZiAoZXhjbHVkZVVzZXJJZCA+PSAwKSB7XG4gICAgICAgICAgICAgICAgc3RtdC5zZXRJbnQoMiwgZXhjbHVkZVVzZXJJZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBycyA9IHN0bXQuZXhlY3V0ZVF1ZXJ5KCk7XG4gICAgICAgICAgICBpZiAocnMubmV4dCgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJzLmdldEludCgxKSA+IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgRGF0YWJhc2VVdGlsLmNsb3NlUmVzb3VyY2VzKHJzLCBzdG10LCBjb25uKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcHVibGljIGJvb2xlYW4gY2hlY2tVc2VySUQoVXNlciBlbnRpdHkpIHtcbiAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcbiAgICAgICAgUHJlcGFyZWRTdGF0ZW1lbnQgc3RtdCA9IG51bGw7XG4gICAgICAgIFJlc3VsdFNldCBycyA9IG51bGw7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbm4gPSBEYXRhYmFzZVV0aWwuZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgICAgICAgU3RyaW5nIHNxbCA9IFwiU0VMRUNUIENPVU5UKCopIEZST00gVXNlcnMgV0hFUkUgdXNlcl9pZCA9ID9cIjtcbiAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsKTtcbiAgICAgICAgICAgIHN0bXQuc2V0SW50KDEsIGVudGl0eS5nZXRVc2VySWQoKSk7XG4gICAgICAgICAgICBycyA9IHN0bXQuZXhlY3V0ZVF1ZXJ5KCk7XG5cbiAgICAgICAgICAgIGlmIChycy5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcnMuZ2V0SW50KDEpID4gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBEYXRhYmFzZVV0aWwuY2xvc2VSZXNvdXJjZXMocnMsIHN0bXQsIGNvbm4pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvY29tL3N0b3JlL2FwcC9wZXRzdG9yZS9Db250cm9sbGVycy9Mb2dpbkNvbnRyb2xsZXIuamF2YVxuLi4uXG5cbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLkRBTy5Vc2VyREFPO1xuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuREFPLlN0YWZmREFPO1xuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuTW9kZWxzLkVudGl0aWVzLlVzZXI7XG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5Nb2RlbHMuRW50aXRpZXMuU3RhZmY7XG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5TZXNzaW9ucy5TZXNzaW9uTWFuYWdlcjtcbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLlZpZXdzLkFkbWluRmFjdG9yeTtcbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLlZpZXdzLlZpZXdGYWN0b3J5O1xuaW1wb3J0IGRlLmplbnNkLmZ4LmdseXBocy5mb250YXdlc29tZS5Gb250QXdlc29tZUljb247XG5pbXBvcnQgZGUuamVuc2QuZnguZ2x5cGhzLmZvbnRhd2Vzb21lLkZvbnRBd2Vzb21lSWNvblZpZXc7XG5pbXBvcnQgamF2YWZ4LmZ4bWwuRlhNTDtcbmltcG9ydCBqYXZhZnguZnhtbC5Jbml0aWFsaXphYmxlO1xuaW1wb3J0IGphdmFmeC5zY2VuZS5jb250cm9sLio7XG5pbXBvcnQgamF2YWZ4LnNjZW5lLmlucHV0Lk1vdXNlRXZlbnQ7XG5pbXBvcnQgamF2YWZ4LnN0YWdlLlN0YWdlO1xuaW1wb3J0IGphdmFmeC5zY2VuZS5pbWFnZS5JbWFnZTtcbmltcG9ydCBqYXZhZnguc2NlbmUuaW1hZ2UuSW1hZ2VWaWV3O1xuaW1wb3J0IGphdmFmeC5zY2VuZS5wYWludC5JbWFnZVBhdHRlcm47XG5pbXBvcnQgamF2YS51dGlsLk9iamVjdHM7XG4uLi5cblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gVMOsbSB1c2VyIHRoZW8gdXNlcm5hbWVcbiAgICAgICAgICAgIFVzZXIgdXNlciA9IHVzZXJEQU8uZmluZEJ5VXNlcm5hbWUodXNlcm5hbWUpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZih1c2VyID09IG51bGwgfHwgdXNlci5nZXRVc2VybmFtZSgpID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBDb250cm9sbGVyVXRpbHMuc2hvd0FsZXJ0KEFsZXJ0LkFsZXJ0VHlwZS5FUlJPUiwgXCJM4buXaVwiLCBcIlTDqm4gxJHEg25nIG5o4bqtcCBraMO0bmcgxJHDum5nXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gS2nhu4NtIHRyYSB0w6puIMSRxINuZyBuaOG6rXBcbiAgICAgICAgICAgIGlmICghdXNlci5nZXRVc2VybmFtZSgpLmVxdWFscyh1c2VybmFtZSkpIHtcbiAgICAgICAgICAgICAgICBDb250cm9sbGVyVXRpbHMuc2hvd0FsZXJ0KEFsZXJ0LkFsZXJ0VHlwZS5FUlJPUiwgXCJM4buXaVwiLCBcIlTDqm4gxJHEg25nIG5o4bqtcCBraMO0bmcgxJHDum5nXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gS2nhu4NtIHRyYSBt4bqtdCBraOG6qXVcbiAgICAgICAgICAgIGlmKCFCQ3J5cHQuY2hlY2twdyhwYXNzd29yZCwgdXNlci5nZXRQYXNzd29yZCgpKSkge1xuICAgICAgICAgICAgICAgIENvbnRyb2xsZXJVdGlscy5zaG93QWxlcnQoQWxlcnQuQWxlcnRUeXBlLkVSUk9SLCBcIkzhu5dpXCIsIFwiTeG6rXQga2jhuql1IGtow7RuZyDEkcO6bmdcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzZXNzaW9uTWFuYWdlci5zZXRDdXJyZW50VXNlcih1c2VyKTtcblxuICAgICAgICAgICAgU3RhZ2UgY3VycmVudFN0YWdlID0gKFN0YWdlKSB1c2VybmFtZUZpZWxkLmdldFNjZW5lKCkuZ2V0V2luZG93KCk7XG5cbiAgICAgICAgICAgIGlmKHVzZXIuZ2V0Um9sZSgpLmVxdWFscyhVc2VyLlJPTEVfQURNSU4pKSB7XG4gICAgICAgICAgICAgICAgaWRBZG1pbkN1cnJlbnQgPSB1c2VyLmdldFVzZXJJZCgpO1xuICAgICAgICAgICAgICAgIEFkbWluRmFjdG9yeS5nZXRJbnN0YW5jZSgpLnN3aXRjaENvbnRlbnQoXCJkYXNoYm9hcmRcIiwgY3VycmVudFN0YWdlKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZih1c2VyLmdldFJvbGUoKS5lcXVhbHMoVXNlci5ST0xFX1VTRVIpKSB7XG4gICAgICAgICAgICAgICAgaWRTdGFmZkN1cnJlbnQgPSB1c2VyLmdldFVzZXJJZCgpO1xuICAgICAgICAgICAgICAgIFN0YWZmIHN0YWZmID0gc3RhZmZEQU8uZmluZEJ5VXNlcklkKHVzZXIuZ2V0VXNlcklkKCkpO1xuICAgICAgICAgICAgICAgIGlmIChzdGFmZiAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlc3Npb25NYW5hZ2VyLnNldEN1cnJlbnRTdGFmZihzdGFmZik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFZpZXdGYWN0b3J5LmdldEluc3RhbmNlKCkuc3dpdGNoQ29udGVudChcImRhc2hib2FyZFwiLCBjdXJyZW50U3RhZ2UpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBDb250cm9sbGVyVXRpbHMuc2hvd0FsZXJ0KEFsZXJ0LkFsZXJ0VHlwZS5FUlJPUiwgXCJM4buXaVwiLCBcIlZhaSB0csOyIG5nxrDhu51pIGTDuW5nIGtow7RuZyBo4bujcCBs4buHXCIpO1xuICAgICAgICAgICAgICAgIHNlc3Npb25NYW5hZ2VyLmNsZWFyKCk7XG4gICAgICAgICAgICB9XG4uLi5cblBhdGg6IHNyYy9EQU8vVXNlckRBTy5qYXZhXG4vKlxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9MaWNlbnNlcy9saWNlbnNlLWRlZmF1bHQudHh0IHRvIGNoYW5nZSB0aGlzIGxpY2Vuc2VcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9DbGFzcy5qYXZhIHRvIGVkaXQgdGhpcyB0ZW1wbGF0ZVxuICovXG5wYWNrYWdlIERBTztcblxuaW1wb3J0IE1vZGVsLlVzZXI7XG5pbXBvcnQgamF2YS51dGlsLkxpc3Q7XG5cbi8qKlxuICpcbiAqIEBhdXRob3IgTmdvYyBUaGFvXG4gKi9cbnB1YmxpYyBjbGFzcyBVc2VyREFPe1xuXG4gICAgcHVibGljIHN0YXRpYyB2b2lkIGluc2VydChVc2VyIG9iaikge1xuICAgICAgICBcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIHZvaWQgdXBkYXRlKFVzZXIgb2JqKSB7XG4gICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbihcIk5vdCBzdXBwb3J0ZWQgeWV0LlwiKTsgLy8gR2VuZXJhdGVkIGZyb20gbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NvZGUvR2VuZXJhdGVkTWV0aG9kQm9keVxuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBkZWxldGUoaW50IGlkKSB7XG4gICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbihcIk5vdCBzdXBwb3J0ZWQgeWV0LlwiKTsgLy8gR2VuZXJhdGVkIGZyb20gbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NvZGUvR2VuZXJhdGVkTWV0aG9kQm9keVxuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgVXNlciBnZXRCeUlkKGludCBpZCkge1xuICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oXCJOb3Qgc3VwcG9ydGVkIHlldC5cIik7IC8vIEdlbmVyYXRlZCBmcm9tIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9Db2RlL0dlbmVyYXRlZE1ldGhvZEJvZHlcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIExpc3Q8VXNlcj4gZ2V0QWxsKCkge1xuICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oXCJOb3Qgc3VwcG9ydGVkIHlldC5cIik7IC8vIEdlbmVyYXRlZCBmcm9tIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9Db2RlL0dlbmVyYXRlZE1ldGhvZEJvZHlcbiAgICB9XG4gICAgXG59XG4uLi5cblBhdGg6IHNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL0xvZ2luLmphdmFcbi4uLlxuXG4gICAgcHJpdmF0ZSB2b2lkIGJ0bkxvZ2luQWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkxvZ2luQWN0aW9uUGVyZm9ybWVkXG4gICAgICAgIC8vIFRPRE8gYWRkIHlvdXIgaGFuZGxpbmcgY29kZSBoZXJlOlxuICAgICAgICBpZih2YWxpZGF0ZUZpZWxkcygpKSB7XG4gICAgICAgICAgICB0cnl7XG4gICAgICAgICAgICAgICAgU3RyaW5nIHVzZXJuYW1lID0gdHh0VXNlck5hbWUuZ2V0VGV4dCgpLnRyaW0oKTtcbiAgICAgICAgICAgICAgICBTdHJpbmcgcGFzc3dvcmQgPSB0eHRQYXNzd29yZC5nZXRUZXh0KCkudHJpbSgpO1xuXG4gICAgICAgICAgICAgICAgVXNlciB1c2VyID0gbnVsbDtcbiAgICAgICAgICAgICAgICBib29sZWFuIGlzU3VjY2VzcyA9IFVzZXJEQU8ubG9naW4odXNlcm5hbWUsIHBhc3N3b3JkKTtcblxuICAgICAgICAgICAgICAgIGlmKGlzU3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyh0aGlzLCBcIsSQxINuZyBuaOG6rXAgdGjDoG5oIGPDtG5nIVwiLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLklORk9STUFUSU9OX01FU1NBR0UpO1xuLy8gICAgICAgICAgICAgICAgICAgIG5ldyBNYWluRnJhbWUoKS5zZXRWaXNpYmxlKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyh0aGlzLCBcIlNhaSB0w6puIMSRxINuZyBuaOG6rXAgaG/hurdjIG3huq10IGto4bqpdS5cIiwgXCJM4buXaVwiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgICAgICAgICAgICAgICB9XG4uLi5cblBhdGg6IHNyYy9EQU8vU3Vic2NyaWJlckRBTy5qYXZhXG4vKlxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9MaWNlbnNlcy9saWNlbnNlLWRlZmF1bHQudHh0IHRvIGNoYW5nZSB0aGlzIGxpY2Vuc2VcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9DbGFzcy5qYXZhIHRvIGVkaXQgdGhpcyB0ZW1wbGF0ZVxuICovXG5wYWNrYWdlIERBTztcblxuaW1wb3J0IE1vZGVsLlN1YnNjcmliZXI7XG5pbXBvcnQgamF2YS51dGlsLkxpc3Q7XG5pbXBvcnQgamF2YS5zcWwuUHJlcGFyZWRTdGF0ZW1lbnQ7XG5pbXBvcnQgamF2YS5zcWwuVGltZXN0YW1wO1xuaW1wb3J0IERBTy5EYk9wZXJhdGlvbnMuU3FsT3BlcmF0aW9uO1xuXG4vKipcbiAqXG4gKiBAYXV0aG9yIE5nb2MgVGhhb1xuICovXG5wdWJsaWMgY2xhc3MgU3Vic2NyaWJlckRBT3tcblxuICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBpbnNlcnQoZmluYWwgU3Vic2NyaWJlciBvYmopIHtcbiAgICAgICAgLy8gR2VuZXJhdGUgdXNlcl9pZCBhbmQgc3Vic2NyaWJlcl9pZFxuICAgICAgICBmaW5hbCBpbnQgdXNlcklkID0gRGJPcGVyYXRpb25zLmdldE5leHRJZChcIlVTRVJcIiwgXCJ1c2VyX2lkXCIpO1xuICAgICAgICBmaW5hbCBpbnQgc3Vic2NyaWJlcklkID0gRGJPcGVyYXRpb25zLmdldE5leHRJZChcIlNVQlNDUklCRVJcIiwgXCJzdWJzY3JpYmVyX2lkXCIpO1xuXG4gICAgICAgIC8vIFNldCB0aGUgZ2VuZXJhdGVkIElEc1xuICAgICAgICBvYmouc2V0VXNlcl9pZCh1c2VySWQpO1xuICAgICAgICBvYmouc2V0U3Vic2NyaWJlcl9pZChzdWJzY3JpYmVySWQpO1xuLi4uXG5cbiAgICAgICAgICAgIC8vIEluc2VydCBpbnRvIFNVQlNDUklCRVIgdGFibGVcbiAgICAgICAgICAgIG5ldyBTcWxPcGVyYXRpb24oKSB7XG4gICAgICAgICAgICAgICAgQE92ZXJyaWRlXG4gICAgICAgICAgICAgICAgcHVibGljIFN0cmluZyBnZXRTcWwoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIklOU0VSVCBJTlRPIFNVQlNDUklCRVIgKHN1YnNjcmliZXJfaWQsIG5hbWUsIGFkZHJlc3MsIHBob25lLCB1c2VyX2lkKSBWQUxVRVMgKD8sID8sID8sID8sID8pXCI7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgQE92ZXJyaWRlXG4gICAgICAgICAgICAgICAgcHVibGljIHZvaWQgc2V0UGFyYW1ldGVycyhQcmVwYXJlZFN0YXRlbWVudCBwcykgdGhyb3dzIEV4Y2VwdGlvbiB7XG4gICAgICAgICAgICAgICAgICAgIHBzLnNldEludCgxLCBzdWJzY3JpYmVySWQpO1xuICAgICAgICAgICAgICAgICAgICBwcy5zZXRTdHJpbmcoMiwgb2JqLmdldEZ1bGxOYW1lKCkpO1xuICAgICAgICAgICAgICAgICAgICBwcy5zZXRTdHJpbmcoMywgb2JqLmdldEFkZHJlc3MoKSk7XG4gICAgICAgICAgICAgICAgICAgIHBzLnNldFN0cmluZyg0LCBvYmouZ2V0UGhvbmUoKSk7XG4gICAgICAgICAgICAgICAgICAgIHBzLnNldEludCg1LCB1c2VySWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAvLyBFeGVjdXRlIHRoZSB0cmFuc2FjdGlvblxuICAgICAgICBEYk9wZXJhdGlvbnMuZXhlY3V0ZVRyYW5zYWN0aW9uKG9wZXJhdGlvbnMsIFwixJDEg25nIGvDvSB0aMOgbmggY8O0bmchXCIpO1xuICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIHZvaWQgdXBkYXRlKFN1YnNjcmliZXIgb2JqKSB7XG4gICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbihcIk5vdCBzdXBwb3J0ZWQgeWV0LlwiKTsgLy8gR2VuZXJhdGVkIGZyb20gbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NvZGUvR2VuZXJhdGVkTWV0aG9kQm9keVxuICAgIH1cbi4uLlxuUGF0aDogc3JjL0RBTy9Db25uZWN0aW9uUHJvdmlkZXIuamF2YVxuLi4uXG5cbiAgICBwdWJsaWMgc3RhdGljIENvbm5lY3Rpb24gZ2V0Q29ubigpe1xuICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJBdHRlbXB0aW5nIHRvIGNvbm5lY3QgdG8gZGF0YWJhc2UuLi5cIik7XG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJVUkw6IFwiICsgVVJMKTtcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlVzZXI6IFwiICsgVVNFUik7XG5cbiAgICAgICAgICAgIENsYXNzLmZvck5hbWUoXCJjb20ubXlzcWwuY2ouamRiYy5Ecml2ZXJcIik7XG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJEcml2ZXIgbG9hZGVkIHN1Y2Nlc3NmdWxseVwiKTtcblxuICAgICAgICAgICAgY29ubiA9IERyaXZlck1hbmFnZXIuZ2V0Q29ubmVjdGlvbihVUkwsIFVTRVIsIFBBU1NXT1JEKTtcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkNvbm5lY3Rpb24gZXN0YWJsaXNoZWQ6IFwiICsgKGNvbm4gIT0gbnVsbCkpO1xuXG4gICAgICAgIH0gY2F0Y2ggKENsYXNzTm90Rm91bmRFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgU3lzdGVtLmVyci5wcmludGxuKFwiTXlTUUwgSkRCQyBEcml2ZXIgbm90IGZvdW5kLlwiKTtcbiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBTeXN0ZW0uZXJyLnByaW50bG4oXCJDb25uZWN0aW9uIGZhaWxlZDogXCIgKyBlLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb25uO1xuICAgIH1cbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9jb20vc3RvcmUvYXBwL3BldHN0b3JlL0RBTy9QZXREQU8uamF2YVxuLi4uXG5cbiAgICAvLyB0aW0ga2llbSB0aGVvIHRlbiwgbG9haSwgZ2lvbmdcbiAgICBwdWJsaWMgQXJyYXlMaXN0PFBldD4gc2VhcmNoUGV0cyhTdHJpbmcgc2VhcmNoVGV4dCwgaW50IGxpbWl0KSB7XG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuICAgICAgICBSZXN1bHRTZXQgcnMgPSBudWxsO1xuICAgICAgICBBcnJheUxpc3Q8UGV0PiBwZXRMaXN0ID0gbmV3IEFycmF5TGlzdDw+KCk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbm4gPSBEYXRhYmFzZVV0aWwuZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgICAgICAgU3RyaW5nIHNxbCA9IFwiU0VMRUNUICogRlJPTSBQZXRzIFdIRVJFIExPV0VSKG5hbWUpIExJS0UgPyBMSU1JVCA/XCI7XG5cbiAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsKTtcbiAgICAgICAgICAgIFN0cmluZyBzZWFyY2hQYXR0ZXJuID0gXCIlXCIgKyBzZWFyY2hUZXh0LnRvTG93ZXJDYXNlKCkgKyBcIiVcIjtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDEsIHNlYXJjaFBhdHRlcm4pO1xuICAgICAgICAgICAgc3RtdC5zZXRJbnQoMiwgbGltaXQpO1xuXG4gICAgICAgICAgICBycyA9IHN0bXQuZXhlY3V0ZVF1ZXJ5KCk7XG5cbiAgICAgICAgICAgIHdoaWxlIChycy5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICBwZXRMaXN0LmFkZChQZXRNYXBwZXIuZnJvbVJlc3V0U2V0KHJzKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcGV0TGlzdDtcbiAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIERhdGFiYXNlVXRpbC5jbG9zZVJlc291cmNlcyhycywgc3RtdCwgY29ubik7XG4gICAgICAgIH1cbiAgICB9XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvY29tL3N0b3JlL2FwcC9wZXRzdG9yZS9Db250cm9sbGVycy9BZG1pbi9Vc2VySW5mb3JDb250cm9sbGVyLmphdmFcbi4uLlxuXG4gICAgICAgICAgICBpbnQgcmVzdWx0O1xuICAgICAgICAgICAgaWYgKGlzTmV3VXNlcikge1xuICAgICAgICAgICAgICAgIGlmICh1c2VyREFPLmNoZWNrRHVwbGljYXRlKHVzZXIuZ2V0VXNlcm5hbWUoKS50cmltKCksIC0xKSkge1xuICAgICAgICAgICAgICAgICAgICBDb250cm9sbGVyVXRpbHMuc2hvd0FsZXJ0KEFsZXJ0LkFsZXJ0VHlwZS5FUlJPUiwgXCJM4buXaVwiLCBcIlTDqm4gbmfGsOG7nWkgZMO5bmcgxJHDoyB04buTbiB04bqhaSFcIik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gdXNlckRBTy5pbnNlcnQodXNlcik7XG4gICAgLi4uIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiY2UzZGIwZDktMzVkZC00Y2YxLWFmNjEtODFlM2FkMDc2ZWQ5O3Rvb2x1XzAxRkJMQXY0U3ZlRTNocVNrTG80QmpBUCI6eyJyZXF1ZXN0SWQiOiJjZTNkYjBkOS0zNWRkLTRjZjEtYWY2MS04MWUzYWQwNzZlZDkiLCJ0b29sVXNlSWQiOiJ0b29sdV8wMUZCTEF2NFN2ZUUzaHFTa0xvNEJqQVAiLCJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJUaGUgZm9sbG93aW5nIGNvZGUgc2VjdGlvbnMgd2VyZSByZXRyaWV2ZWQ6XG5QYXRoOiBzcmMvbWFpbi9qYXZhL2NvbS9zdG9yZS9hcHAvcGV0c3RvcmUvREFPL1VzZXJEQU8uamF2YVxucGFja2FnZSBjb20uc3RvcmUuYXBwLnBldHN0b3JlLkRBTztcblxuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuTW9kZWxzLkVudGl0aWVzLlVzZXI7XG5pbXBvcnQgb3JnLm1pbmRyb3QuamJjcnlwdC5CQ3J5cHQ7XG5cbmltcG9ydCBqYXZhLnNxbC4qO1xuaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7XG5pbXBvcnQgamF2YS51dGlsLkJhc2U2NDtcblxucHVibGljIGNsYXNzIFVzZXJEQU8gaW1wbGVtZW50cyBCYXNlREFPPFVzZXIsIEludGVnZXI+IHtcbiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIGludCBpc0R1cGxpY2F0ZSA9IC0xO1xuXG4gICAgcHVibGljIHN0YXRpYyBVc2VyREFPIGdldEluc3RhbmNlKCkge1xuICAgICAgICByZXR1cm4gbmV3IFVzZXJEQU8oKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIFN0cmluZyBlbmNvZGUoU3RyaW5nIHBhc3N3b3JkKSB7XG4vLyAgICAgICAgcmV0dXJuIEJhc2U2NC5nZXRFbmNvZGVyKCkuZW5jb2RlVG9TdHJpbmcocGFzc3dvcmQuZ2V0Qnl0ZXMoKSk7XG4gICAgICAgIHJldHVybiBCQ3J5cHQuaGFzaHB3KHBhc3N3b3JkLCBCQ3J5cHQuZ2Vuc2FsdCgpKTtcbiAgICB9XG5cbi8vICAgIHB1YmxpYyBzdGF0aWMgU3RyaW5nIGRlY29kZShTdHJpbmcgcGFzc3dvcmQpIHtcbi8vICAgICAgICByZXR1cm4gbmV3IFN0cmluZyhCYXNlNjQuZ2V0RGVjb2RlcigpLmRlY29kZShwYXNzd29yZCkpO1xuLy8gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBib29sZWFuIHZlcmlmeShTdHJpbmcgcGFzc3dvcmQsIFN0cmluZyBoYXNoZWQpIHtcbiAgICAgICAgcmV0dXJuIEJDcnlwdC5jaGVja3B3KHBhc3N3b3JkLCBoYXNoZWQpO1xuICAgIH1cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBpbnQgaW5zZXJ0KFVzZXIgZW50aXR5KSB7XG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuICAgICAgICBSZXN1bHRTZXQgcnMgPSBudWxsO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25uID0gRGF0YWJhc2VVdGlsLmdldENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgIFN0cmluZyBzcWwgPSBcIklOU0VSVCBJTlRPIFVzZXJzICh1c2VybmFtZSwgcGFzc3dvcmQsIHJvbGUsIGltYWdlX3VybCwgaXNBY3RpdmUpIFZBTFVFUyAoPywgPywgPywgPywgPylcIjtcbiAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsLCBTdGF0ZW1lbnQuUkVUVVJOX0dFTkVSQVRFRF9LRVlTKTtcblxuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMSwgZW50aXR5LmdldFVzZXJuYW1lKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMiwgZW5jb2RlKGVudGl0eS5nZXRQYXNzd29yZCgpKSk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygzLCBlbnRpdHkuZ2V0Um9sZSgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDQsIGVudGl0eS5nZXRJbWFnZVVybCgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0Qm9vbGVhbig1LCBlbnRpdHkuaXNBY3RpdmUoKSk7XG5cbiAgICAgICAgICAgIGludCBhZmZlY3RlZFJvd3MgPSBzdG10LmV4ZWN1dGVVcGRhdGUoKTtcbiAgICAgICAgICAgIGlmIChhZmZlY3RlZFJvd3MgPT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0cnkgKFJlc3VsdFNldCBnZW5lcmF0ZWRLZXlzID0gc3RtdC5nZXRHZW5lcmF0ZWRLZXlzKCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoZ2VuZXJhdGVkS2V5cy5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdlbmVyYXRlZEtleXMuZ2V0SW50KDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgRGF0YWJhc2VVdGlsLmNsb3NlUmVzb3VyY2VzKHJzLCBzdG10LCBjb25uKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBpbnQgdXBkYXRlKFVzZXIgZW50aXR5KSB7XG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25uID0gRGF0YWJhc2VVdGlsLmdldENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgIFN0cmluZyBzcWwgPSBcIlVQREFURSBVc2VycyBTRVQgdXNlcm5hbWUgPSA/LCBwYXNzd29yZCA9ID8sIHJvbGUgPSA/LCBpbWFnZV91cmwgPSA/LCBpc0FjdGl2ZSA9ID8gV0hFUkUgdXNlcl9pZCA9ID9cIjtcbiAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsKTtcblxuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMSwgZW50aXR5LmdldFVzZXJuYW1lKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMiwgZW5jb2RlKGVudGl0eS5nZXRQYXNzd29yZCgpKSk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygzLCBlbnRpdHkuZ2V0Um9sZSgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDQsIGVudGl0eS5nZXRJbWFnZVVybCgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0Qm9vbGVhbig1LCBlbnRpdHkuaXNBY3RpdmUoKSk7XG4gICAgICAgICAgICBzdG10LnNldEludCg2LCBlbnRpdHkuZ2V0VXNlcklkKCkpO1xuXG4gICAgICAgICAgICByZXR1cm4gc3RtdC5leGVjdXRlVXBkYXRlKCk7XG4gICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBEYXRhYmFzZVV0aWwuY2xvc2VSZXNvdXJjZXMoc3RtdCwgY29ubik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgaW50IHVwZGF0ZShVc2VyIGVudGl0eSwgYm9vbGVhbiBpc1VzZXJuYW1lQ2hhbmdlZCkge1xuICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgICAgICBQcmVwYXJlZFN0YXRlbWVudCBzdG10ID0gbnVsbDtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29ubiA9IERhdGFiYXNlVXRpbC5nZXRDb25uZWN0aW9uKCk7XG4gICAgICAgICAgICBTdHJpbmcgc3FsID0gXCJVUERBVEUgVXNlcnMgU0VUIHVzZXJuYW1lID0gPywgcGFzc3dvcmQgPSA/LCByb2xlID0gPywgaW1hZ2VfdXJsID0gPywgaXNBY3RpdmUgPSA/IFdIRVJFIHVzZXJfaWQgPSA/XCI7XG4gICAgICAgICAgICBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHNxbCk7XG5cbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDEsIGVudGl0eS5nZXRVc2VybmFtZSgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDIsIGVuY29kZShlbnRpdHkuZ2V0UGFzc3dvcmQoKSkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMywgZW50aXR5LmdldFJvbGUoKSk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZyg0LCBlbnRpdHkuZ2V0SW1hZ2VVcmwoKSk7XG4gICAgICAgICAgICBzdG10LnNldEJvb2xlYW4oNSwgZW50aXR5LmlzQWN0aXZlKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRJbnQoNiwgZW50aXR5LmdldFVzZXJJZCgpKTtcblxuICAgICAgICAgICAgcmV0dXJuIHN0bXQuZXhlY3V0ZVVwZGF0ZSgpO1xuICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgRGF0YWJhc2VVdGlsLmNsb3NlUmVzb3VyY2VzKHN0bXQsIGNvbm4pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIGludCBkZWxldGUoVXNlciBlbnRpdHkpIHtcbiAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcbiAgICAgICAgUHJlcGFyZWRTdGF0ZW1lbnQgc3RtdCA9IG51bGw7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbm4gPSBEYXRhYmFzZVV0aWwuZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgICAgICAgU3RyaW5nIHNxbCA9IFwiREVMRVRFIEZST00gVXNlcnMgV0hFUkUgdXNlcl9pZCA9ID9cIjtcbiAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsKTtcblxuICAgICAgICAgICAgc3RtdC5zZXRJbnQoMSwgZW50aXR5LmdldFVzZXJJZCgpKTtcblxuICAgICAgICAgICAgcmV0dXJuIHN0bXQuZXhlY3V0ZVVwZGF0ZSgpO1xuICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgRGF0YWJhc2VVdGlsLmNsb3NlUmVzb3VyY2VzKHN0bXQsIGNvbm4pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIEFycmF5TGlzdDxVc2VyPiBmaW5kQWxsKCkge1xuICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgICAgICBQcmVwYXJlZFN0YXRlbWVudCBzdG10ID0gbnVsbDtcbiAgICAgICAgUmVzdWx0U2V0IHJzID0gbnVsbDtcbiAgICAgICAgQXJyYXlMaXN0PFVzZXI+IHVzZXJzID0gbmV3IEFycmF5TGlzdDw+KCk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbm4gPSBEYXRhYmFzZVV0aWwuZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgICAgICAgU3RyaW5nIHNxbCA9IFwiU0VMRUNUICogRlJPTSBVc2Vyc1wiO1xuICAgICAgICAgICAgc3RtdCA9IGNvbm4ucHJlcGFyZVN0YXRlbWVudChzcWwpO1xuICAgICAgICAgICAgcnMgPSBzdG10LmV4ZWN1dGVRdWVyeSgpO1xuXG4gICAgICAgICAgICB3aGlsZSAocnMubmV4dCgpKSB7XG4gICAgICAgICAgICAgICAgVXNlciB1c2VyID0gbmV3IFVzZXIoKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldFVzZXJJZChycy5nZXRJbnQoXCJ1c2VyX2lkXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldFVzZXJuYW1lKHJzLmdldFN0cmluZyhcInVzZXJuYW1lXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldFBhc3N3b3JkKHJzLmdldFN0cmluZyhcInBhc3N3b3JkXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldFJvbGUocnMuZ2V0U3RyaW5nKFwicm9sZVwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRJbWFnZVVybChycy5nZXRTdHJpbmcoXCJpbWFnZV91cmxcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0QWN0aXZlKHJzLmdldEJvb2xlYW4oXCJpc0FjdGl2ZVwiKSk7XG4gICAgICAgICAgICAgICAgdXNlcnMuYWRkKHVzZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIERhdGFiYXNlVXRpbC5jbG9zZVJlc291cmNlcyhycywgc3RtdCwgY29ubik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVzZXJzO1xuICAgIH1cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBVc2VyIGZpbmRCeUlkKEludGVnZXIgaWQpIHtcbiAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcbiAgICAgICAgUHJlcGFyZWRTdGF0ZW1lbnQgc3RtdCA9IG51bGw7XG4gICAgICAgIFJlc3VsdFNldCBycyA9IG51bGw7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbm4gPSBEYXRhYmFzZVV0aWwuZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgICAgICAgU3RyaW5nIHNxbCA9IFwiU0VMRUNUICogRlJPTSBVc2VycyBXSEVSRSB1c2VyX2lkID0gP1wiO1xuICAgICAgICAgICAgc3RtdCA9IGNvbm4ucHJlcGFyZVN0YXRlbWVudChzcWwpO1xuICAgICAgICAgICAgc3RtdC5zZXRJbnQoMSwgaWQpO1xuICAgICAgICAgICAgcnMgPSBzdG10LmV4ZWN1dGVRdWVyeSgpO1xuXG4gICAgICAgICAgICBpZiAocnMubmV4dCgpKSB7XG4gICAgICAgICAgICAgICAgVXNlciB1c2VyID0gbmV3IFVzZXIoKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldFVzZXJJZChycy5nZXRJbnQoXCJ1c2VyX2lkXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldFVzZXJuYW1lKHJzLmdldFN0cmluZyhcInVzZXJuYW1lXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldFBhc3N3b3JkKHJzLmdldFN0cmluZyhcInBhc3N3b3JkXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldFJvbGUocnMuZ2V0U3RyaW5nKFwicm9sZVwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRJbWFnZVVybChycy5nZXRTdHJpbmcoXCJpbWFnZV91cmxcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0QWN0aXZlKHJzLmdldEJvb2xlYW4oXCJpc0FjdGl2ZVwiKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVzZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgRGF0YWJhc2VVdGlsLmNsb3NlUmVzb3VyY2VzKHJzLCBzdG10LCBjb25uKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4uLi5cblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29ubiA9IERhdGFiYXNlVXRpbC5nZXRDb25uZWN0aW9uKCk7XG4gICAgICAgICAgICBTdHJpbmcgc3FsID0gXCJTRUxFQ1QgKiBGUk9NIFVzZXJzIFdIRVJFIFwiICsgY29uZGl0aW9uO1xuICAgICAgICAgICAgc3RtdCA9IGNvbm4ucHJlcGFyZVN0YXRlbWVudChzcWwpO1xuICAgICAgICAgICAgcnMgPSBzdG10LmV4ZWN1dGVRdWVyeSgpO1xuXG4gICAgICAgICAgICB3aGlsZSAocnMubmV4dCgpKSB7XG4gICAgICAgICAgICAgICAgVXNlciB1c2VyID0gbmV3IFVzZXIoKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldFVzZXJJZChycy5nZXRJbnQoXCJ1c2VyX2lkXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldFVzZXJuYW1lKHJzLmdldFN0cmluZyhcInVzZXJuYW1lXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldFBhc3N3b3JkKHJzLmdldFN0cmluZyhcInBhc3N3b3JkXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldFJvbGUocnMuZ2V0U3RyaW5nKFwicm9sZVwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRJbWFnZVVybChycy5nZXRTdHJpbmcoXCJpbWFnZV91cmxcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0QWN0aXZlKHJzLmdldEJvb2xlYW4oXCJpc0FjdGl2ZVwiKSk7XG4gICAgICAgICAgICAgICAgdXNlcnMuYWRkKHVzZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIERhdGFiYXNlVXRpbC5jbG9zZVJlc291cmNlcyhycywgc3RtdCwgY29ubik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVzZXJzO1xuICAgIH1cblxuICAgIHB1YmxpYyBVc2VyIGZpbmRCeVVzZXJuYW1lKFN0cmluZyB1c2VybmFtZSkge1xuICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgICAgICBQcmVwYXJlZFN0YXRlbWVudCBzdG10ID0gbnVsbDtcbiAgICAgICAgUmVzdWx0U2V0IHJzID0gbnVsbDtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29ubiA9IERhdGFiYXNlVXRpbC5nZXRDb25uZWN0aW9uKCk7XG4gICAgICAgICAgICBTdHJpbmcgc3FsID0gXCJTRUxFQ1QgKiBGUk9NIFVzZXJzIFdIRVJFIHVzZXJuYW1lID0gP1wiO1xuICAgICAgICAgICAgc3RtdCA9IGNvbm4ucHJlcGFyZVN0YXRlbWVudChzcWwpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMSwgdXNlcm5hbWUpO1xuICAgICAgICAgICAgcnMgPSBzdG10LmV4ZWN1dGVRdWVyeSgpO1xuXG4gICAgICAgICAgICBpZiAocnMubmV4dCgpKSB7XG4gICAgICAgICAgICAgICAgVXNlciB1c2VyID0gbmV3IFVzZXIoKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldFVzZXJJZChycy5nZXRJbnQoXCJ1c2VyX2lkXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldFVzZXJuYW1lKHJzLmdldFN0cmluZyhcInVzZXJuYW1lXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldFBhc3N3b3JkKHJzLmdldFN0cmluZyhcInBhc3N3b3JkXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldFJvbGUocnMuZ2V0U3RyaW5nKFwicm9sZVwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRJbWFnZVVybChycy5nZXRTdHJpbmcoXCJpbWFnZV91cmxcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0QWN0aXZlKHJzLmdldEJvb2xlYW4oXCJpc0FjdGl2ZVwiKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVzZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgRGF0YWJhc2VVdGlsLmNsb3NlUmVzb3VyY2VzKHJzLCBzdG10LCBjb25uKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBwdWJsaWMgVXNlciBmaW5kQnlFbWFpbChTdHJpbmcgZW1haWwpIHtcbiAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcbiAgICAgICAgUHJlcGFyZWRTdGF0ZW1lbnQgc3RtdCA9IG51bGw7XG4gICAgICAgIFJlc3VsdFNldCBycyA9IG51bGw7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIEtp4buDbSB0cmEgZW1haWwgY8OzIHThu5NuIHThuqFpIHRyb25nIGLhuqNuZyBTdGFmZnMga2jDtG5nXG4gICAgICAgICAgICBjb25uID0gRGF0YWJhc2VVdGlsLmdldENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgIFN0cmluZyBjaGVja1NxbCA9IFwiU0VMRUNUICogRlJPTSBTdGFmZnMgV0hFUkUgZW1haWwgPSA/XCI7XG4gICAgICAgICAgICBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KGNoZWNrU3FsKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDEsIGVtYWlsKTtcbiAgICAgICAgICAgIHJzID0gc3RtdC5leGVjdXRlUXVlcnkoKTtcblxuICAgICAgICAgICAgLy8gTuG6v3UgZW1haWwgdOG7k24gdOG6oWksIGzhuqV5IHRow7RuZyB0aW4gdXNlclxuICAgICAgICAgICAgU3RyaW5nIHNxbCA9IFwiU0VMRUNUIHUuKiBGUk9NIFVzZXJzIHUgXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJKT0lOIFN0YWZmcyBzIE9OIHUudXNlcl9pZCA9IHMudXNlcl9pZCBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICBcIldIRVJFIHMuZW1haWwgPSA/XCI7XG4gICAgICAgICAgICBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHNxbCk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygxLCBlbWFpbCk7XG5cbiAgICAgICAgICAgIHJzID0gc3RtdC5leGVjdXRlUXVlcnkoKTtcblxuICAgICAgICAgICAgaWYgKHJzLm5leHQoKSkge1xuICAgICAgICAgICAgICAgIFVzZXIgdXNlciA9IG5ldyBVc2VyKCk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRVc2VySWQocnMuZ2V0SW50KFwidXNlcl9pZFwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRVc2VybmFtZShycy5nZXRTdHJpbmcoXCJ1c2VybmFtZVwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRQYXNzd29yZChycy5nZXRTdHJpbmcoXCJwYXNzd29yZFwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRSb2xlKHJzLmdldFN0cmluZyhcInJvbGVcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0SW1hZ2VVcmwocnMuZ2V0U3RyaW5nKFwiaW1hZ2VfdXJsXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldEFjdGl2ZShycy5nZXRCb29sZWFuKFwiaXNBY3RpdmVcIikpO1xuICAgICAgICAgICAgICAgIHJldHVybiB1c2VyO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiU1FMIEVycm9yOiBcIiArIGUuZ2V0TWVzc2FnZSgpKTtcbiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBEYXRhYmFzZVV0aWwuY2xvc2VSZXNvdXJjZXMocnMsIHN0bXQsIGNvbm4pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHB1YmxpYyBib29sZWFuIGNoZWNrRHVwbGljYXRlKFN0cmluZyB1c2VybmFtZSwgaW50IGV4Y2x1ZGVVc2VySWQpIHtcbiAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcbiAgICAgICAgUHJlcGFyZWRTdGF0ZW1lbnQgc3RtdCA9IG51bGw7XG4gICAgICAgIFJlc3VsdFNldCBycyA9IG51bGw7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25uID0gRGF0YWJhc2VVdGlsLmdldENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgIFN0cmluZyBzcWwgPSBcIlNFTEVDVCBDT1VOVCgqKSBGUk9NIFVzZXJzIFdIRVJFIExPV0VSKHVzZXJuYW1lKSA9IExPV0VSKD8pXCI7XG4gICAgICAgICAgICBpZiAoZXhjbHVkZVVzZXJJZCA+PSAwKSB7XG4gICAgICAgICAgICAgICAgc3FsICs9IFwiIEFORCB1c2VyX2lkIDw+ID9cIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDEsIHVzZXJuYW1lKTtcbiAgICAgICAgICAgIGlmIChleGNsdWRlVXNlcklkID49IDApIHtcbiAgICAgICAgICAgICAgICBzdG10LnNldEludCgyLCBleGNsdWRlVXNlcklkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJzID0gc3RtdC5leGVjdXRlUXVlcnkoKTtcbiAgICAgICAgICAgIGlmIChycy5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcnMuZ2V0SW50KDEpID4gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBEYXRhYmFzZVV0aWwuY2xvc2VSZXNvdXJjZXMocnMsIHN0bXQsIGNvbm4pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYm9vbGVhbiBjaGVja1VzZXJJRChVc2VyIGVudGl0eSkge1xuICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgICAgICBQcmVwYXJlZFN0YXRlbWVudCBzdG10ID0gbnVsbDtcbiAgICAgICAgUmVzdWx0U2V0IHJzID0gbnVsbDtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29ubiA9IERhdGFiYXNlVXRpbC5nZXRDb25uZWN0aW9uKCk7XG4gICAgICAgICAgICBTdHJpbmcgc3FsID0gXCJTRUxFQ1QgQ09VTlQoKikgRlJPTSBVc2VycyBXSEVSRSB1c2VyX2lkID0gP1wiO1xuICAgICAgICAgICAgc3RtdCA9IGNvbm4ucHJlcGFyZVN0YXRlbWVudChzcWwpO1xuICAgICAgICAgICAgc3RtdC5zZXRJbnQoMSwgZW50aXR5LmdldFVzZXJJZCgpKTtcbiAgICAgICAgICAgIHJzID0gc3RtdC5leGVjdXRlUXVlcnkoKTtcblxuICAgICAgICAgICAgaWYgKHJzLm5leHQoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBycy5nZXRJbnQoMSkgPiAwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIERhdGFiYXNlVXRpbC5jbG9zZVJlc291cmNlcyhycywgc3RtdCwgY29ubik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn1cbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9jb20vc3RvcmUvYXBwL3BldHN0b3JlL0NvbnRyb2xsZXJzL0xvZ2luQ29udHJvbGxlci5qYXZhXG4uLi5cblxuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuREFPLlVzZXJEQU87XG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5EQU8uU3RhZmZEQU87XG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5Nb2RlbHMuRW50aXRpZXMuVXNlcjtcbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLk1vZGVscy5FbnRpdGllcy5TdGFmZjtcbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLlNlc3Npb25zLlNlc3Npb25NYW5hZ2VyO1xuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuVmlld3MuQWRtaW5GYWN0b3J5O1xuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuVmlld3MuVmlld0ZhY3Rvcnk7XG5pbXBvcnQgZGUuamVuc2QuZnguZ2x5cGhzLmZvbnRhd2Vzb21lLkZvbnRBd2Vzb21lSWNvbjtcbmltcG9ydCBkZS5qZW5zZC5meC5nbHlwaHMuZm9udGF3ZXNvbWUuRm9udEF3ZXNvbWVJY29uVmlldztcbmltcG9ydCBqYXZhZnguZnhtbC5GWE1MO1xuaW1wb3J0IGphdmFmeC5meG1sLkluaXRpYWxpemFibGU7XG5pbXBvcnQgamF2YWZ4LnNjZW5lLmNvbnRyb2wuKjtcbmltcG9ydCBqYXZhZnguc2NlbmUuaW5wdXQuTW91c2VFdmVudDtcbmltcG9ydCBqYXZhZnguc3RhZ2UuU3RhZ2U7XG5pbXBvcnQgamF2YWZ4LnNjZW5lLmltYWdlLkltYWdlO1xuaW1wb3J0IGphdmFmeC5zY2VuZS5pbWFnZS5JbWFnZVZpZXc7XG5pbXBvcnQgamF2YWZ4LnNjZW5lLnBhaW50LkltYWdlUGF0dGVybjtcbmltcG9ydCBqYXZhLnV0aWwuT2JqZWN0cztcbi4uLlxuXG5wdWJsaWMgY2xhc3MgTG9naW5Db250cm9sbGVyIGltcGxlbWVudHMgSW5pdGlhbGl6YWJsZSB7XG5cbiAgICBARlhNTFxuICAgIHByaXZhdGUgRm9udEF3ZXNvbWVJY29uVmlldyBleWVJY29uO1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIFRleHRGaWVsZCBzaG93UGFzc3dvcmQ7XG5cbiAgICBARlhNTFxuICAgIHByaXZhdGUgUGFzc3dvcmRGaWVsZCBwYXNzd29yZEZpZWxkO1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIFRleHRGaWVsZCB1c2VybmFtZUZpZWxkO1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIEJ1dHRvbiBsb2dpbkJ1dHRvbjtcblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBMYWJlbCBlcnJvckxhYmVsO1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIEh5cGVybGluayBmb3Jnb3RQYXNzd29yZExpbms7XG5cbiAgICBARlhNTFxuICAgIHByaXZhdGUgSW1hZ2VWaWV3IHVzZXJJbWFnZTtcblxuICAgIHByaXZhdGUgZG91YmxlIHgsIHk7XG5cbiAgICBVc2VyREFPIHVzZXJEQU8gPSBuZXcgVXNlckRBTygpO1xuICAgIFN0YWZmREFPIHN0YWZmREFPID0gU3RhZmZEQU8uZ2V0SW5zdGFuY2UoKTtcbiAgICBwdWJsaWMgc3RhdGljIGludCBpZFN0YWZmQ3VycmVudDtcbiAgICBwdWJsaWMgc3RhdGljIGludCBpZEFkbWluQ3VycmVudDtcblxuICAgIHByaXZhdGUgU2Vzc2lvbk1hbmFnZXIgc2Vzc2lvbk1hbmFnZXIgPSBuZXcgU2Vzc2lvbk1hbmFnZXIoKTtcbi4uLlxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBUw6xtIHVzZXIgdGhlbyB1c2VybmFtZVxuICAgICAgICAgICAgVXNlciB1c2VyID0gdXNlckRBTy5maW5kQnlVc2VybmFtZSh1c2VybmFtZSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmKHVzZXIgPT0gbnVsbCB8fCB1c2VyLmdldFVzZXJuYW1lKCkgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIENvbnRyb2xsZXJVdGlscy5zaG93QWxlcnQoQWxlcnQuQWxlcnRUeXBlLkVSUk9SLCBcIkzhu5dpXCIsIFwiVMOqbiDEkcSDbmcgbmjhuq1wIGtow7RuZyDEkcO6bmdcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBLaeG7g20gdHJhIHTDqm4gxJHEg25nIG5o4bqtcFxuICAgICAgICAgICAgaWYgKCF1c2VyLmdldFVzZXJuYW1lKCkuZXF1YWxzKHVzZXJuYW1lKSkge1xuICAgICAgICAgICAgICAgIENvbnRyb2xsZXJVdGlscy5zaG93QWxlcnQoQWxlcnQuQWxlcnRUeXBlLkVSUk9SLCBcIkzhu5dpXCIsIFwiVMOqbiDEkcSDbmcgbmjhuq1wIGtow7RuZyDEkcO6bmdcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBLaeG7g20gdHJhIG3huq10IGto4bqpdVxuICAgICAgICAgICAgaWYoIUJDcnlwdC5jaGVja3B3KHBhc3N3b3JkLCB1c2VyLmdldFBhc3N3b3JkKCkpKSB7XG4gICAgICAgICAgICAgICAgQ29udHJvbGxlclV0aWxzLnNob3dBbGVydChBbGVydC5BbGVydFR5cGUuRVJST1IsIFwiTOG7l2lcIiwgXCJN4bqtdCBraOG6qXUga2jDtG5nIMSRw7puZ1wiKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNlc3Npb25NYW5hZ2VyLnNldEN1cnJlbnRVc2VyKHVzZXIpO1xuXG4gICAgICAgICAgICBTdGFnZSBjdXJyZW50U3RhZ2UgPSAoU3RhZ2UpIHVzZXJuYW1lRmllbGQuZ2V0U2NlbmUoKS5nZXRXaW5kb3coKTtcblxuICAgICAgICAgICAgaWYodXNlci5nZXRSb2xlKCkuZXF1YWxzKFVzZXIuUk9MRV9BRE1JTikpIHtcbiAgICAgICAgICAgICAgICBpZEFkbWluQ3VycmVudCA9IHVzZXIuZ2V0VXNlcklkKCk7XG4gICAgICAgICAgICAgICAgQWRtaW5GYWN0b3J5LmdldEluc3RhbmNlKCkuc3dpdGNoQ29udGVudChcImRhc2hib2FyZFwiLCBjdXJyZW50U3RhZ2UpO1xuICAgICAgICAgICAgfSBlbHNlIGlmKHVzZXIuZ2V0Um9sZSgpLmVxdWFscyhVc2VyLlJPTEVfVVNFUikpIHtcbiAgICAgICAgICAgICAgICBpZFN0YWZmQ3VycmVudCA9IHVzZXIuZ2V0VXNlcklkKCk7XG4gICAgICAgICAgICAgICAgU3RhZmYgc3RhZmYgPSBzdGFmZkRBTy5maW5kQnlVc2VySWQodXNlci5nZXRVc2VySWQoKSk7XG4gICAgICAgICAgICAgICAgaWYgKHN0YWZmICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbk1hbmFnZXIuc2V0Q3VycmVudFN0YWZmKHN0YWZmKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgVmlld0ZhY3RvcnkuZ2V0SW5zdGFuY2UoKS5zd2l0Y2hDb250ZW50KFwiZGFzaGJvYXJkXCIsIGN1cnJlbnRTdGFnZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIENvbnRyb2xsZXJVdGlscy5zaG93QWxlcnQoQWxlcnQuQWxlcnRUeXBlLkVSUk9SLCBcIkzhu5dpXCIsIFwiVmFpIHRyw7IgbmfGsOG7nWkgZMO5bmcga2jDtG5nIGjhu6NwIGzhu4dcIik7XG4gICAgICAgICAgICAgICAgc2Vzc2lvbk1hbmFnZXIuY2xlYXIoKTtcbiAgICAgICAgICAgIH1cbi4uLlxuUGF0aDogc3JjL0RBTy9Vc2VyREFPLmphdmFcbi8qXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0xpY2Vuc2VzL2xpY2Vuc2UtZGVmYXVsdC50eHQgdG8gY2hhbmdlIHRoaXMgbGljZW5zZVxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NsYXNzLmphdmEgdG8gZWRpdCB0aGlzIHRlbXBsYXRlXG4gKi9cbnBhY2thZ2UgREFPO1xuXG5pbXBvcnQgTW9kZWwuVXNlcjtcbmltcG9ydCBqYXZhLnV0aWwuTGlzdDtcblxuLyoqXG4gKlxuICogQGF1dGhvciBOZ29jIFRoYW9cbiAqL1xucHVibGljIGNsYXNzIFVzZXJEQU97XG5cbiAgICBwdWJsaWMgc3RhdGljIHZvaWQgaW5zZXJ0KFVzZXIgb2JqKSB7XG4gICAgICAgIFxuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgdm9pZCB1cGRhdGUoVXNlciBvYmopIHtcbiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpOyAvLyBHZW5lcmF0ZWQgZnJvbSBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ29kZS9HZW5lcmF0ZWRNZXRob2RCb2R5XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyB2b2lkIGRlbGV0ZShpbnQgaWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpOyAvLyBHZW5lcmF0ZWQgZnJvbSBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ29kZS9HZW5lcmF0ZWRNZXRob2RCb2R5XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBVc2VyIGdldEJ5SWQoaW50IGlkKSB7XG4gICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbihcIk5vdCBzdXBwb3J0ZWQgeWV0LlwiKTsgLy8gR2VuZXJhdGVkIGZyb20gbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NvZGUvR2VuZXJhdGVkTWV0aG9kQm9keVxuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxVc2VyPiBnZXRBbGwoKSB7XG4gICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbihcIk5vdCBzdXBwb3J0ZWQgeWV0LlwiKTsgLy8gR2VuZXJhdGVkIGZyb20gbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NvZGUvR2VuZXJhdGVkTWV0aG9kQm9keVxuICAgIH1cbiAgICBcbn1cbi4uLlxuUGF0aDogc3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vTG9naW4uamF2YVxuLypcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvTGljZW5zZXMvbGljZW5zZS1kZWZhdWx0LnR4dCB0byBjaGFuZ2UgdGhpcyBsaWNlbnNlXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0dVSUZvcm1zL0pGcmFtZS5qYXZhIHRvIGVkaXQgdGhpcyB0ZW1wbGF0ZVxuICovXG5wYWNrYWdlIGludGVybmV0Lm1hbmdlbWVudC5zeXN0ZW07XG5cbmltcG9ydCBEQU8uVXNlckRBTztcbmltcG9ydCBNb2RlbC5Vc2VyO1xuaW1wb3J0IGphdmF4LnN3aW5nLkpPcHRpb25QYW5lO1xuLi4uXG5cbiAgICBwcml2YXRlIHZvaWQgYnRuTG9naW5BY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuTG9naW5BY3Rpb25QZXJmb3JtZWRcbiAgICAgICAgLy8gVE9ETyBhZGQgeW91ciBoYW5kbGluZyBjb2RlIGhlcmU6XG4gICAgICAgIGlmKHZhbGlkYXRlRmllbGRzKCkpIHtcbiAgICAgICAgICAgIHRyeXtcbiAgICAgICAgICAgICAgICBTdHJpbmcgdXNlcm5hbWUgPSB0eHRVc2VyTmFtZS5nZXRUZXh0KCkudHJpbSgpO1xuICAgICAgICAgICAgICAgIFN0cmluZyBwYXNzd29yZCA9IHR4dFBhc3N3b3JkLmdldFRleHQoKS50cmltKCk7XG5cbiAgICAgICAgICAgICAgICBVc2VyIHVzZXIgPSBudWxsO1xuICAgICAgICAgICAgICAgIGJvb2xlYW4gaXNTdWNjZXNzID0gVXNlckRBTy5sb2dpbih1c2VybmFtZSwgcGFzc3dvcmQpO1xuXG4gICAgICAgICAgICAgICAgaWYoaXNTdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKHRoaXMsIFwixJDEg25nIG5o4bqtcCB0aMOgbmggY8O0bmchXCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuSU5GT1JNQVRJT05fTUVTU0FHRSk7XG4vLyAgICAgICAgICAgICAgICAgICAgbmV3IE1haW5GcmFtZSgpLnNldFZpc2libGUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcG9zZSgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKHRoaXMsIFwiU2FpIHTDqm4gxJHEg25nIG5o4bqtcCBob+G6t2MgbeG6rXQga2jhuql1LlwiLCBcIkzhu5dpXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgICAgICAgICAgICAgIH1cbi4uLlxuUGF0aDogc3JjL0RBTy9TdWJzY3JpYmVyREFPLmphdmFcbi8qXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0xpY2Vuc2VzL2xpY2Vuc2UtZGVmYXVsdC50eHQgdG8gY2hhbmdlIHRoaXMgbGljZW5zZVxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NsYXNzLmphdmEgdG8gZWRpdCB0aGlzIHRlbXBsYXRlXG4gKi9cbnBhY2thZ2UgREFPO1xuXG5pbXBvcnQgTW9kZWwuU3Vic2NyaWJlcjtcbmltcG9ydCBqYXZhLnV0aWwuTGlzdDtcbmltcG9ydCBqYXZhLnNxbC5QcmVwYXJlZFN0YXRlbWVudDtcbmltcG9ydCBqYXZhLnNxbC5UaW1lc3RhbXA7XG5pbXBvcnQgREFPLkRiT3BlcmF0aW9ucy5TcWxPcGVyYXRpb247XG5cbi8qKlxuICpcbiAqIEBhdXRob3IgTmdvYyBUaGFvXG4gKi9cbnB1YmxpYyBjbGFzcyBTdWJzY3JpYmVyREFPe1xuXG4gICAgcHVibGljIHN0YXRpYyB2b2lkIGluc2VydChmaW5hbCBTdWJzY3JpYmVyIG9iaikge1xuICAgICAgICAvLyBHZW5lcmF0ZSB1c2VyX2lkIGFuZCBzdWJzY3JpYmVyX2lkXG4gICAgICAgIGZpbmFsIGludCB1c2VySWQgPSBEYk9wZXJhdGlvbnMuZ2V0TmV4dElkKFwiVVNFUlwiLCBcInVzZXJfaWRcIik7XG4gICAgICAgIGZpbmFsIGludCBzdWJzY3JpYmVySWQgPSBEYk9wZXJhdGlvbnMuZ2V0TmV4dElkKFwiU1VCU0NSSUJFUlwiLCBcInN1YnNjcmliZXJfaWRcIik7XG5cbiAgICAgICAgLy8gU2V0IHRoZSBnZW5lcmF0ZWQgSURzXG4gICAgICAgIG9iai5zZXRVc2VyX2lkKHVzZXJJZCk7XG4gICAgICAgIG9iai5zZXRTdWJzY3JpYmVyX2lkKHN1YnNjcmliZXJJZCk7XG5cbiAgICAgICAgLy8gQ3JlYXRlIFNRTCBvcGVyYXRpb25zIGZvciB0aGUgdHJhbnNhY3Rpb25cbiAgICAgICAgU3FsT3BlcmF0aW9uW10gb3BlcmF0aW9ucyA9IG5ldyBTcWxPcGVyYXRpb25bXSB7XG4gICAgICAgICAgICAvLyBJbnNlcnQgaW50byBVU0VSIHRhYmxlXG4gICAgICAgICAgICBuZXcgU3FsT3BlcmF0aW9uKCkge1xuICAgICAgICAgICAgICAgIEBPdmVycmlkZVxuICAgICAgICAgICAgICAgIHB1YmxpYyBTdHJpbmcgZ2V0U3FsKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJJTlNFUlQgSU5UTyBVU0VSKHVzZXJfaWQsIHVzZXJuYW1lLCBwYXNzd29yZCwgcm9sZSwgY3JlYXRlZF9hdCkgVkFMVUVTICg/LCA/LCA/LCA/LCA/KVwiO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIEBPdmVycmlkZVxuICAgICAgICAgICAgICAgIHB1YmxpYyB2b2lkIHNldFBhcmFtZXRlcnMoUHJlcGFyZWRTdGF0ZW1lbnQgcHMpIHRocm93cyBFeGNlcHRpb24ge1xuICAgICAgICAgICAgICAgICAgICBwcy5zZXRJbnQoMSwgdXNlcklkKTtcbiAgICAgICAgICAgICAgICAgICAgcHMuc2V0U3RyaW5nKDIsIG9iai5nZXRVc2VybmFtZSgpKTtcbiAgICAgICAgICAgICAgICAgICAgcHMuc2V0U3RyaW5nKDMsIG9iai5nZXRQYXNzd29yZCgpKTtcbiAgICAgICAgICAgICAgICAgICAgcHMuc2V0U3RyaW5nKDQsIG9iai5nZXRSb2xlKCkpO1xuICAgICAgICAgICAgICAgICAgICBwcy5zZXRUaW1lc3RhbXAoNSwgVGltZXN0YW1wLnZhbHVlT2Yob2JqLmdldENyZWF0ZV9hdCgpKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgLy8gSW5zZXJ0IGludG8gU1VCU0NSSUJFUiB0YWJsZVxuICAgICAgICAgICAgbmV3IFNxbE9wZXJhdGlvbigpIHtcbiAgICAgICAgICAgICAgICBAT3ZlcnJpZGVcbiAgICAgICAgICAgICAgICBwdWJsaWMgU3RyaW5nIGdldFNxbCgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiSU5TRVJUIElOVE8gU1VCU0NSSUJFUiAoc3Vic2NyaWJlcl9pZCwgbmFtZSwgYWRkcmVzcywgcGhvbmUsIHVzZXJfaWQpIFZBTFVFUyAoPywgPywgPywgPywgPylcIjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBAT3ZlcnJpZGVcbiAgICAgICAgICAgICAgICBwdWJsaWMgdm9pZCBzZXRQYXJhbWV0ZXJzKFByZXBhcmVkU3RhdGVtZW50IHBzKSB0aHJvd3MgRXhjZXB0aW9uIHtcbiAgICAgICAgICAgICAgICAgICAgcHMuc2V0SW50KDEsIHN1YnNjcmliZXJJZCk7XG4gICAgICAgICAgICAgICAgICAgIHBzLnNldFN0cmluZygyLCBvYmouZ2V0RnVsbE5hbWUoKSk7XG4gICAgICAgICAgICAgICAgICAgIHBzLnNldFN0cmluZygzLCBvYmouZ2V0QWRkcmVzcygpKTtcbiAgICAgICAgICAgICAgICAgICAgcHMuc2V0U3RyaW5nKDQsIG9iai5nZXRQaG9uZSgpKTtcbiAgICAgICAgICAgICAgICAgICAgcHMuc2V0SW50KDUsIHVzZXJJZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIEV4ZWN1dGUgdGhlIHRyYW5zYWN0aW9uXG4gICAgICAgIERiT3BlcmF0aW9ucy5leGVjdXRlVHJhbnNhY3Rpb24ob3BlcmF0aW9ucywgXCLEkMSDbmcga8O9IHRow6BuaCBjw7RuZyFcIik7XG4gICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgdm9pZCB1cGRhdGUoU3Vic2NyaWJlciBvYmopIHtcbiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpOyAvLyBHZW5lcmF0ZWQgZnJvbSBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvLi4uIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiMzc3ZjM0ZjAtNDQxMS00YTZhLWE3MTgtNmIwM2EwYTkwZTJkO3Rvb2x1XzAxR2FvNTRmalNkMXo5TEtqdG1aN3AxciI6eyJyZXF1ZXN0SWQiOiIzNzdmMzRmMC00NDExLTRhNmEtYTcxOC02YjAzYTBhOTBlMmQiLCJ0b29sVXNlSWQiOiJ0b29sdV8wMUdhbzU0ZmpTZDF6OUxLanRtWjdwMXIiLCJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJUaGUgZm9sbG93aW5nIGNvZGUgc2VjdGlvbnMgd2VyZSByZXRyaWV2ZWQ6XG5QYXRoOiBzcmMvbWFpbi9qYXZhL2NvbS9zdG9yZS9hcHAvcGV0c3RvcmUvQ29udHJvbGxlcnMvTG9naW5Db250cm9sbGVyLmphdmFcbi4uLlxuXG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5EQU8uVXNlckRBTztcbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLkRBTy5TdGFmZkRBTztcbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLk1vZGVscy5FbnRpdGllcy5Vc2VyO1xuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuTW9kZWxzLkVudGl0aWVzLlN0YWZmO1xuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuU2Vzc2lvbnMuU2Vzc2lvbk1hbmFnZXI7XG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5WaWV3cy5BZG1pbkZhY3Rvcnk7XG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5WaWV3cy5WaWV3RmFjdG9yeTtcbmltcG9ydCBkZS5qZW5zZC5meC5nbHlwaHMuZm9udGF3ZXNvbWUuRm9udEF3ZXNvbWVJY29uO1xuaW1wb3J0IGRlLmplbnNkLmZ4LmdseXBocy5mb250YXdlc29tZS5Gb250QXdlc29tZUljb25WaWV3O1xuaW1wb3J0IGphdmFmeC5meG1sLkZYTUw7XG5pbXBvcnQgamF2YWZ4LmZ4bWwuSW5pdGlhbGl6YWJsZTtcbmltcG9ydCBqYXZhZnguc2NlbmUuY29udHJvbC4qO1xuaW1wb3J0IGphdmFmeC5zY2VuZS5pbnB1dC5Nb3VzZUV2ZW50O1xuaW1wb3J0IGphdmFmeC5zdGFnZS5TdGFnZTtcbmltcG9ydCBqYXZhZnguc2NlbmUuaW1hZ2UuSW1hZ2U7XG5pbXBvcnQgamF2YWZ4LnNjZW5lLmltYWdlLkltYWdlVmlldztcbmltcG9ydCBqYXZhZnguc2NlbmUucGFpbnQuSW1hZ2VQYXR0ZXJuO1xuaW1wb3J0IGphdmEudXRpbC5PYmplY3RzO1xuLi4uXG5cbnB1YmxpYyBjbGFzcyBMb2dpbkNvbnRyb2xsZXIgaW1wbGVtZW50cyBJbml0aWFsaXphYmxlIHtcblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBGb250QXdlc29tZUljb25WaWV3IGV5ZUljb247XG5cbiAgICBARlhNTFxuICAgIHByaXZhdGUgVGV4dEZpZWxkIHNob3dQYXNzd29yZDtcblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBQYXNzd29yZEZpZWxkIHBhc3N3b3JkRmllbGQ7XG5cbiAgICBARlhNTFxuICAgIHByaXZhdGUgVGV4dEZpZWxkIHVzZXJuYW1lRmllbGQ7XG5cbiAgICBARlhNTFxuICAgIHByaXZhdGUgQnV0dG9uIGxvZ2luQnV0dG9uO1xuXG4gICAgQEZYTUxcbiAgICBwcml2YXRlIExhYmVsIGVycm9yTGFiZWw7XG5cbiAgICBARlhNTFxuICAgIHByaXZhdGUgSHlwZXJsaW5rIGZvcmdvdFBhc3N3b3JkTGluaztcblxuICAgIEBGWE1MXG4gICAgcHJpdmF0ZSBJbWFnZVZpZXcgdXNlckltYWdlO1xuXG4gICAgcHJpdmF0ZSBkb3VibGUgeCwgeTtcblxuICAgIFVzZXJEQU8gdXNlckRBTyA9IG5ldyBVc2VyREFPKCk7XG4gICAgU3RhZmZEQU8gc3RhZmZEQU8gPSBTdGFmZkRBTy5nZXRJbnN0YW5jZSgpO1xuICAgIHB1YmxpYyBzdGF0aWMgaW50IGlkU3RhZmZDdXJyZW50O1xuICAgIHB1YmxpYyBzdGF0aWMgaW50IGlkQWRtaW5DdXJyZW50O1xuXG4gICAgcHJpdmF0ZSBTZXNzaW9uTWFuYWdlciBzZXNzaW9uTWFuYWdlciA9IG5ldyBTZXNzaW9uTWFuYWdlcigpO1xuLi4uXG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFTDrG0gdXNlciB0aGVvIHVzZXJuYW1lXG4gICAgICAgICAgICBVc2VyIHVzZXIgPSB1c2VyREFPLmZpbmRCeVVzZXJuYW1lKHVzZXJuYW1lKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYodXNlciA9PSBudWxsIHx8IHVzZXIuZ2V0VXNlcm5hbWUoKSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgQ29udHJvbGxlclV0aWxzLnNob3dBbGVydChBbGVydC5BbGVydFR5cGUuRVJST1IsIFwiTOG7l2lcIiwgXCJUw6puIMSRxINuZyBuaOG6rXAga2jDtG5nIMSRw7puZ1wiKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEtp4buDbSB0cmEgdMOqbiDEkcSDbmcgbmjhuq1wXG4gICAgICAgICAgICBpZiAoIXVzZXIuZ2V0VXNlcm5hbWUoKS5lcXVhbHModXNlcm5hbWUpKSB7XG4gICAgICAgICAgICAgICAgQ29udHJvbGxlclV0aWxzLnNob3dBbGVydChBbGVydC5BbGVydFR5cGUuRVJST1IsIFwiTOG7l2lcIiwgXCJUw6puIMSRxINuZyBuaOG6rXAga2jDtG5nIMSRw7puZ1wiKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEtp4buDbSB0cmEgbeG6rXQga2jhuql1XG4gICAgICAgICAgICBpZighQkNyeXB0LmNoZWNrcHcocGFzc3dvcmQsIHVzZXIuZ2V0UGFzc3dvcmQoKSkpIHtcbiAgICAgICAgICAgICAgICBDb250cm9sbGVyVXRpbHMuc2hvd0FsZXJ0KEFsZXJ0LkFsZXJ0VHlwZS5FUlJPUiwgXCJM4buXaVwiLCBcIk3huq10IGto4bqpdSBraMO0bmcgxJHDum5nXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc2Vzc2lvbk1hbmFnZXIuc2V0Q3VycmVudFVzZXIodXNlcik7XG5cbiAgICAgICAgICAgIFN0YWdlIGN1cnJlbnRTdGFnZSA9IChTdGFnZSkgdXNlcm5hbWVGaWVsZC5nZXRTY2VuZSgpLmdldFdpbmRvdygpO1xuXG4gICAgICAgICAgICBpZih1c2VyLmdldFJvbGUoKS5lcXVhbHMoVXNlci5ST0xFX0FETUlOKSkge1xuICAgICAgICAgICAgICAgIGlkQWRtaW5DdXJyZW50ID0gdXNlci5nZXRVc2VySWQoKTtcbiAgICAgICAgICAgICAgICBBZG1pbkZhY3RvcnkuZ2V0SW5zdGFuY2UoKS5zd2l0Y2hDb250ZW50KFwiZGFzaGJvYXJkXCIsIGN1cnJlbnRTdGFnZSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYodXNlci5nZXRSb2xlKCkuZXF1YWxzKFVzZXIuUk9MRV9VU0VSKSkge1xuICAgICAgICAgICAgICAgIGlkU3RhZmZDdXJyZW50ID0gdXNlci5nZXRVc2VySWQoKTtcbiAgICAgICAgICAgICAgICBTdGFmZiBzdGFmZiA9IHN0YWZmREFPLmZpbmRCeVVzZXJJZCh1c2VyLmdldFVzZXJJZCgpKTtcbiAgICAgICAgICAgICAgICBpZiAoc3RhZmYgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBzZXNzaW9uTWFuYWdlci5zZXRDdXJyZW50U3RhZmYoc3RhZmYpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBWaWV3RmFjdG9yeS5nZXRJbnN0YW5jZSgpLnN3aXRjaENvbnRlbnQoXCJkYXNoYm9hcmRcIiwgY3VycmVudFN0YWdlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgQ29udHJvbGxlclV0aWxzLnNob3dBbGVydChBbGVydC5BbGVydFR5cGUuRVJST1IsIFwiTOG7l2lcIiwgXCJWYWkgdHLDsiBuZ8aw4budaSBkw7luZyBraMO0bmcgaOG7o3AgbOG7h1wiKTtcbiAgICAgICAgICAgICAgICBzZXNzaW9uTWFuYWdlci5jbGVhcigpO1xuICAgICAgICAgICAgfVxuLi4uXG5QYXRoOiBzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9Mb2dpbi5qYXZhXG4uLi5cblxuICAgIHByaXZhdGUgdm9pZCBidG5Mb2dpbkFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5Mb2dpbkFjdGlvblBlcmZvcm1lZFxuICAgICAgICAvLyBUT0RPIGFkZCB5b3VyIGhhbmRsaW5nIGNvZGUgaGVyZTpcbiAgICAgICAgaWYodmFsaWRhdGVGaWVsZHMoKSkge1xuICAgICAgICAgICAgdHJ5e1xuICAgICAgICAgICAgICAgIFN0cmluZyB1c2VybmFtZSA9IHR4dFVzZXJOYW1lLmdldFRleHQoKS50cmltKCk7XG4gICAgICAgICAgICAgICAgU3RyaW5nIHBhc3N3b3JkID0gdHh0UGFzc3dvcmQuZ2V0VGV4dCgpLnRyaW0oKTtcblxuICAgICAgICAgICAgICAgIFVzZXIgdXNlciA9IG51bGw7XG4gICAgICAgICAgICAgICAgYm9vbGVhbiBpc1N1Y2Nlc3MgPSBVc2VyREFPLmxvZ2luKHVzZXJuYW1lLCBwYXNzd29yZCk7XG5cbiAgICAgICAgICAgICAgICBpZihpc1N1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2codGhpcywgXCLEkMSDbmcgbmjhuq1wIHRow6BuaCBjw7RuZyFcIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5JTkZPUk1BVElPTl9NRVNTQUdFKTtcbi8vICAgICAgICAgICAgICAgICAgICBuZXcgTWFpbkZyYW1lKCkuc2V0VmlzaWJsZSh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwb3NlKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2codGhpcywgXCJTYWkgdMOqbiDEkcSDbmcgbmjhuq1wIGhv4bq3YyBt4bqtdCBraOG6qXUuXCIsIFwiTOG7l2lcIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAgICAgICAgICAgICAgfVxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL2NvbS9zdG9yZS9hcHAvcGV0c3RvcmUvREFPL1VzZXJEQU8uamF2YVxucGFja2FnZSBjb20uc3RvcmUuYXBwLnBldHN0b3JlLkRBTztcblxuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuTW9kZWxzLkVudGl0aWVzLlVzZXI7XG5pbXBvcnQgb3JnLm1pbmRyb3QuamJjcnlwdC5CQ3J5cHQ7XG5cbmltcG9ydCBqYXZhLnNxbC4qO1xuaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7XG5pbXBvcnQgamF2YS51dGlsLkJhc2U2NDtcblxucHVibGljIGNsYXNzIFVzZXJEQU8gaW1wbGVtZW50cyBCYXNlREFPPFVzZXIsIEludGVnZXI+IHtcbiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIGludCBpc0R1cGxpY2F0ZSA9IC0xO1xuXG4gICAgcHVibGljIHN0YXRpYyBVc2VyREFPIGdldEluc3RhbmNlKCkge1xuICAgICAgICByZXR1cm4gbmV3IFVzZXJEQU8oKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIFN0cmluZyBlbmNvZGUoU3RyaW5nIHBhc3N3b3JkKSB7XG4vLyAgICAgICAgcmV0dXJuIEJhc2U2NC5nZXRFbmNvZGVyKCkuZW5jb2RlVG9TdHJpbmcocGFzc3dvcmQuZ2V0Qnl0ZXMoKSk7XG4gICAgICAgIHJldHVybiBCQ3J5cHQuaGFzaHB3KHBhc3N3b3JkLCBCQ3J5cHQuZ2Vuc2FsdCgpKTtcbiAgICB9XG5cbi8vICAgIHB1YmxpYyBzdGF0aWMgU3RyaW5nIGRlY29kZShTdHJpbmcgcGFzc3dvcmQpIHtcbi8vICAgICAgICByZXR1cm4gbmV3IFN0cmluZyhCYXNlNjQuZ2V0RGVjb2RlcigpLmRlY29kZShwYXNzd29yZCkpO1xuLy8gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBib29sZWFuIHZlcmlmeShTdHJpbmcgcGFzc3dvcmQsIFN0cmluZyBoYXNoZWQpIHtcbiAgICAgICAgcmV0dXJuIEJDcnlwdC5jaGVja3B3KHBhc3N3b3JkLCBoYXNoZWQpO1xuICAgIH1cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBpbnQgaW5zZXJ0KFVzZXIgZW50aXR5KSB7XG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuICAgICAgICBSZXN1bHRTZXQgcnMgPSBudWxsO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25uID0gRGF0YWJhc2VVdGlsLmdldENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgIFN0cmluZyBzcWwgPSBcIklOU0VSVCBJTlRPIFVzZXJzICh1c2VybmFtZSwgcGFzc3dvcmQsIHJvbGUsIGltYWdlX3VybCwgaXNBY3RpdmUpIFZBTFVFUyAoPywgPywgPywgPywgPylcIjtcbiAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsLCBTdGF0ZW1lbnQuUkVUVVJOX0dFTkVSQVRFRF9LRVlTKTtcblxuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMSwgZW50aXR5LmdldFVzZXJuYW1lKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMiwgZW5jb2RlKGVudGl0eS5nZXRQYXNzd29yZCgpKSk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygzLCBlbnRpdHkuZ2V0Um9sZSgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDQsIGVudGl0eS5nZXRJbWFnZVVybCgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0Qm9vbGVhbig1LCBlbnRpdHkuaXNBY3RpdmUoKSk7XG5cbiAgICAgICAgICAgIGludCBhZmZlY3RlZFJvd3MgPSBzdG10LmV4ZWN1dGVVcGRhdGUoKTtcbiAgICAgICAgICAgIGlmIChhZmZlY3RlZFJvd3MgPT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0cnkgKFJlc3VsdFNldCBnZW5lcmF0ZWRLZXlzID0gc3RtdC5nZXRHZW5lcmF0ZWRLZXlzKCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoZ2VuZXJhdGVkS2V5cy5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdlbmVyYXRlZEtleXMuZ2V0SW50KDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgRGF0YWJhc2VVdGlsLmNsb3NlUmVzb3VyY2VzKHJzLCBzdG10LCBjb25uKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBpbnQgdXBkYXRlKFVzZXIgZW50aXR5KSB7XG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25uID0gRGF0YWJhc2VVdGlsLmdldENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgIFN0cmluZyBzcWwgPSBcIlVQREFURSBVc2VycyBTRVQgdXNlcm5hbWUgPSA/LCBwYXNzd29yZCA9ID8sIHJvbGUgPSA/LCBpbWFnZV91cmwgPSA/LCBpc0FjdGl2ZSA9ID8gV0hFUkUgdXNlcl9pZCA9ID9cIjtcbiAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsKTtcblxuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMSwgZW50aXR5LmdldFVzZXJuYW1lKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMiwgZW5jb2RlKGVudGl0eS5nZXRQYXNzd29yZCgpKSk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygzLCBlbnRpdHkuZ2V0Um9sZSgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDQsIGVudGl0eS5nZXRJbWFnZVVybCgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0Qm9vbGVhbig1LCBlbnRpdHkuaXNBY3RpdmUoKSk7XG4gICAgICAgICAgICBzdG10LnNldEludCg2LCBlbnRpdHkuZ2V0VXNlcklkKCkpO1xuXG4gICAgICAgICAgICByZXR1cm4gc3RtdC5leGVjdXRlVXBkYXRlKCk7XG4gICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBEYXRhYmFzZVV0aWwuY2xvc2VSZXNvdXJjZXMoc3RtdCwgY29ubik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgaW50IHVwZGF0ZShVc2VyIGVudGl0eSwgYm9vbGVhbiBpc1VzZXJuYW1lQ2hhbmdlZCkge1xuICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgICAgICBQcmVwYXJlZFN0YXRlbWVudCBzdG10ID0gbnVsbDtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29ubiA9IERhdGFiYXNlVXRpbC5nZXRDb25uZWN0aW9uKCk7XG4gICAgICAgICAgICBTdHJpbmcgc3FsID0gXCJVUERBVEUgVXNlcnMgU0VUIHVzZXJuYW1lID0gPywgcGFzc3dvcmQgPSA/LCByb2xlID0gPywgaW1hZ2VfdXJsID0gPywgaXNBY3RpdmUgPSA/IFdIRVJFIHVzZXJfaWQgPSA/XCI7XG4gICAgICAgICAgICBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHNxbCk7XG5cbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDEsIGVudGl0eS5nZXRVc2VybmFtZSgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDIsIGVuY29kZShlbnRpdHkuZ2V0UGFzc3dvcmQoKSkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMywgZW50aXR5LmdldFJvbGUoKSk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZyg0LCBlbnRpdHkuZ2V0SW1hZ2VVcmwoKSk7XG4gICAgICAgICAgICBzdG10LnNldEJvb2xlYW4oNSwgZW50aXR5LmlzQWN0aXZlKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRJbnQoNiwgZW50aXR5LmdldFVzZXJJZCgpKTtcblxuICAgICAgICAgICAgcmV0dXJuIHN0bXQuZXhlY3V0ZVVwZGF0ZSgpO1xuICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgRGF0YWJhc2VVdGlsLmNsb3NlUmVzb3VyY2VzKHN0bXQsIGNvbm4pO1xuICAgICAgICB9XG4gICAgfVxuLi4uXG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgQXJyYXlMaXN0PFVzZXI+IGZpbmRBbGwoKSB7XG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuICAgICAgICBSZXN1bHRTZXQgcnMgPSBudWxsO1xuICAgICAgICBBcnJheUxpc3Q8VXNlcj4gdXNlcnMgPSBuZXcgQXJyYXlMaXN0PD4oKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29ubiA9IERhdGFiYXNlVXRpbC5nZXRDb25uZWN0aW9uKCk7XG4gICAgICAgICAgICBTdHJpbmcgc3FsID0gXCJTRUxFQ1QgKiBGUk9NIFVzZXJzXCI7XG4gICAgICAgICAgICBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHNxbCk7XG4gICAgICAgICAgICBycyA9IHN0bXQuZXhlY3V0ZVF1ZXJ5KCk7XG5cbiAgICAgICAgICAgIHdoaWxlIChycy5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICBVc2VyIHVzZXIgPSBuZXcgVXNlcigpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0VXNlcklkKHJzLmdldEludChcInVzZXJfaWRcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0VXNlcm5hbWUocnMuZ2V0U3RyaW5nKFwidXNlcm5hbWVcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0UGFzc3dvcmQocnMuZ2V0U3RyaW5nKFwicGFzc3dvcmRcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0Um9sZShycy5nZXRTdHJpbmcoXCJyb2xlXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldEltYWdlVXJsKHJzLmdldFN0cmluZyhcImltYWdlX3VybFwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRBY3RpdmUocnMuZ2V0Qm9vbGVhbihcImlzQWN0aXZlXCIpKTtcbiAgICAgICAgICAgICAgICB1c2Vycy5hZGQodXNlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgRGF0YWJhc2VVdGlsLmNsb3NlUmVzb3VyY2VzKHJzLCBzdG10LCBjb25uKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdXNlcnM7XG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIFVzZXIgZmluZEJ5SWQoSW50ZWdlciBpZCkge1xuICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgICAgICBQcmVwYXJlZFN0YXRlbWVudCBzdG10ID0gbnVsbDtcbiAgICAgICAgUmVzdWx0U2V0IHJzID0gbnVsbDtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29ubiA9IERhdGFiYXNlVXRpbC5nZXRDb25uZWN0aW9uKCk7XG4gICAgICAgICAgICBTdHJpbmcgc3FsID0gXCJTRUxFQ1QgKiBGUk9NIFVzZXJzIFdIRVJFIHVzZXJfaWQgPSA/XCI7XG4gICAgICAgICAgICBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHNxbCk7XG4gICAgICAgICAgICBzdG10LnNldEludCgxLCBpZCk7XG4gICAgICAgICAgICBycyA9IHN0bXQuZXhlY3V0ZVF1ZXJ5KCk7XG5cbiAgICAgICAgICAgIGlmIChycy5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICBVc2VyIHVzZXIgPSBuZXcgVXNlcigpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0VXNlcklkKHJzLmdldEludChcInVzZXJfaWRcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0VXNlcm5hbWUocnMuZ2V0U3RyaW5nKFwidXNlcm5hbWVcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0UGFzc3dvcmQocnMuZ2V0U3RyaW5nKFwicGFzc3dvcmRcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0Um9sZShycy5nZXRTdHJpbmcoXCJyb2xlXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldEltYWdlVXJsKHJzLmdldFN0cmluZyhcImltYWdlX3VybFwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRBY3RpdmUocnMuZ2V0Qm9vbGVhbihcImlzQWN0aXZlXCIpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdXNlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBEYXRhYmFzZVV0aWwuY2xvc2VSZXNvdXJjZXMocnMsIHN0bXQsIGNvbm4pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbi4uLlxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25uID0gRGF0YWJhc2VVdGlsLmdldENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgIFN0cmluZyBzcWwgPSBcIlNFTEVDVCAqIEZST00gVXNlcnMgV0hFUkUgXCIgKyBjb25kaXRpb247XG4gICAgICAgICAgICBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHNxbCk7XG4gICAgICAgICAgICBycyA9IHN0bXQuZXhlY3V0ZVF1ZXJ5KCk7XG5cbiAgICAgICAgICAgIHdoaWxlIChycy5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICBVc2VyIHVzZXIgPSBuZXcgVXNlcigpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0VXNlcklkKHJzLmdldEludChcInVzZXJfaWRcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0VXNlcm5hbWUocnMuZ2V0U3RyaW5nKFwidXNlcm5hbWVcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0UGFzc3dvcmQocnMuZ2V0U3RyaW5nKFwicGFzc3dvcmRcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0Um9sZShycy5nZXRTdHJpbmcoXCJyb2xlXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldEltYWdlVXJsKHJzLmdldFN0cmluZyhcImltYWdlX3VybFwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRBY3RpdmUocnMuZ2V0Qm9vbGVhbihcImlzQWN0aXZlXCIpKTtcbiAgICAgICAgICAgICAgICB1c2Vycy5hZGQodXNlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgRGF0YWJhc2VVdGlsLmNsb3NlUmVzb3VyY2VzKHJzLCBzdG10LCBjb25uKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdXNlcnM7XG4gICAgfVxuXG4gICAgcHVibGljIFVzZXIgZmluZEJ5VXNlcm5hbWUoU3RyaW5nIHVzZXJuYW1lKSB7XG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuICAgICAgICBSZXN1bHRTZXQgcnMgPSBudWxsO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25uID0gRGF0YWJhc2VVdGlsLmdldENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgIFN0cmluZyBzcWwgPSBcIlNFTEVDVCAqIEZST00gVXNlcnMgV0hFUkUgdXNlcm5hbWUgPSA/XCI7XG4gICAgICAgICAgICBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHNxbCk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygxLCB1c2VybmFtZSk7XG4gICAgICAgICAgICBycyA9IHN0bXQuZXhlY3V0ZVF1ZXJ5KCk7XG5cbiAgICAgICAgICAgIGlmIChycy5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICBVc2VyIHVzZXIgPSBuZXcgVXNlcigpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0VXNlcklkKHJzLmdldEludChcInVzZXJfaWRcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0VXNlcm5hbWUocnMuZ2V0U3RyaW5nKFwidXNlcm5hbWVcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0UGFzc3dvcmQocnMuZ2V0U3RyaW5nKFwicGFzc3dvcmRcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0Um9sZShycy5nZXRTdHJpbmcoXCJyb2xlXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldEltYWdlVXJsKHJzLmdldFN0cmluZyhcImltYWdlX3VybFwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRBY3RpdmUocnMuZ2V0Qm9vbGVhbihcImlzQWN0aXZlXCIpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdXNlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBEYXRhYmFzZVV0aWwuY2xvc2VSZXNvdXJjZXMocnMsIHN0bXQsIGNvbm4pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHB1YmxpYyBVc2VyIGZpbmRCeUVtYWlsKFN0cmluZyBlbWFpbCkge1xuICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgICAgICBQcmVwYXJlZFN0YXRlbWVudCBzdG10ID0gbnVsbDtcbiAgICAgICAgUmVzdWx0U2V0IHJzID0gbnVsbDtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gS2nhu4NtIHRyYSBlbWFpbCBjw7MgdOG7k24gdOG6oWkgdHJvbmcgYuG6o25nIFN0YWZmcyBraMO0bmdcbiAgICAgICAgICAgIGNvbm4gPSBEYXRhYmFzZVV0aWwuZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgICAgICAgU3RyaW5nIGNoZWNrU3FsID0gXCJTRUxFQ1QgKiBGUk9NIFN0YWZmcyBXSEVSRSBlbWFpbCA9ID9cIjtcbiAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoY2hlY2tTcWwpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMSwgZW1haWwpO1xuICAgICAgICAgICAgcnMgPSBzdG10LmV4ZWN1dGVRdWVyeSgpO1xuXG4gICAgICAgICAgICAvLyBO4bq/dSBlbWFpbCB04buTbiB04bqhaSwgbOG6pXkgdGjDtG5nIHRpbiB1c2VyXG4gICAgICAgICAgICBTdHJpbmcgc3FsID0gXCJTRUxFQ1QgdS4qIEZST00gVXNlcnMgdSBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICBcIkpPSU4gU3RhZmZzIHMgT04gdS51c2VyX2lkID0gcy51c2VyX2lkIFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiV0hFUkUgcy5lbWFpbCA9ID9cIjtcbiAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDEsIGVtYWlsKTtcblxuICAgICAgICAgICAgcnMgPSBzdG10LmV4ZWN1dGVRdWVyeSgpO1xuXG4gICAgICAgICAgICBpZiAocnMubmV4dCgpKSB7XG4gICAgICAgICAgICAgICAgVXNlciB1c2VyID0gbmV3IFVzZXIoKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldFVzZXJJZChycy5nZXRJbnQoXCJ1c2VyX2lkXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldFVzZXJuYW1lKHJzLmdldFN0cmluZyhcInVzZXJuYW1lXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldFBhc3N3b3JkKHJzLmdldFN0cmluZyhcInBhc3N3b3JkXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldFJvbGUocnMuZ2V0U3RyaW5nKFwicm9sZVwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRJbWFnZVVybChycy5nZXRTdHJpbmcoXCJpbWFnZV91cmxcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0QWN0aXZlKHJzLmdldEJvb2xlYW4oXCJpc0FjdGl2ZVwiKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVzZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJTUUwgRXJyb3I6IFwiICsgZS5nZXRNZXNzYWdlKCkpO1xuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIERhdGFiYXNlVXRpbC5jbG9zZVJlc291cmNlcyhycywgc3RtdCwgY29ubik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcHVibGljIGJvb2xlYW4gY2hlY2tEdXBsaWNhdGUoU3RyaW5nIHVzZXJuYW1lLCBpbnQgZXhjbHVkZVVzZXJJZCkge1xuICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgICAgICBQcmVwYXJlZFN0YXRlbWVudCBzdG10ID0gbnVsbDtcbiAgICAgICAgUmVzdWx0U2V0IHJzID0gbnVsbDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbm4gPSBEYXRhYmFzZVV0aWwuZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgICAgICAgU3RyaW5nIHNxbCA9IFwiU0VMRUNUIENPVU5UKCopIEZST00gVXNlcnMgV0hFUkUgTE9XRVIodXNlcm5hbWUpID0gTE9XRVIoPylcIjtcbiAgICAgICAgICAgIGlmIChleGNsdWRlVXNlcklkID49IDApIHtcbiAgICAgICAgICAgICAgICBzcWwgKz0gXCIgQU5EIHVzZXJfaWQgPD4gP1wiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3RtdCA9IGNvbm4ucHJlcGFyZVN0YXRlbWVudChzcWwpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMSwgdXNlcm5hbWUpO1xuICAgICAgICAgICAgaWYgKGV4Y2x1ZGVVc2VySWQgPj0gMCkge1xuICAgICAgICAgICAgICAgIHN0bXQuc2V0SW50KDIsIGV4Y2x1ZGVVc2VySWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcnMgPSBzdG10LmV4ZWN1dGVRdWVyeSgpO1xuICAgICAgICAgICAgaWYgKHJzLm5leHQoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBycy5nZXRJbnQoMSkgPiAwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIERhdGFiYXNlVXRpbC5jbG9zZVJlc291cmNlcyhycywgc3RtdCwgY29ubik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHB1YmxpYyBib29sZWFuIGNoZWNrVXNlcklEKFVzZXIgZW50aXR5KSB7XG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuICAgICAgICBSZXN1bHRTZXQgcnMgPSBudWxsO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25uID0gRGF0YWJhc2VVdGlsLmdldENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgIFN0cmluZyBzcWwgPSBcIlNFTEVDVCBDT1VOVCgqKSBGUk9NIFVzZXJzIFdIRVJFIHVzZXJfaWQgPSA/XCI7XG4gICAgICAgICAgICBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHNxbCk7XG4gICAgICAgICAgICBzdG10LnNldEludCgxLCBlbnRpdHkuZ2V0VXNlcklkKCkpO1xuICAgICAgICAgICAgcnMgPSBzdG10LmV4ZWN1dGVRdWVyeSgpO1xuXG4gICAgICAgICAgICBpZiAocnMubmV4dCgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJzLmdldEludCgxKSA+IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgRGF0YWJhc2VVdGlsLmNsb3NlUmVzb3VyY2VzKHJzLCBzdG10LCBjb25uKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuLi4uXG5QYXRoOiBzcmMvREFPL1VzZXJEQU8uamF2YVxuLypcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvTGljZW5zZXMvbGljZW5zZS1kZWZhdWx0LnR4dCB0byBjaGFuZ2UgdGhpcyBsaWNlbnNlXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ2xhc3MuamF2YSB0byBlZGl0IHRoaXMgdGVtcGxhdGVcbiAqL1xucGFja2FnZSBEQU87XG5cbmltcG9ydCBNb2RlbC5Vc2VyO1xuaW1wb3J0IGphdmEudXRpbC5MaXN0O1xuXG4vKipcbiAqXG4gKiBAYXV0aG9yIE5nb2MgVGhhb1xuICovXG5wdWJsaWMgY2xhc3MgVXNlckRBT3tcblxuICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBpbnNlcnQoVXNlciBvYmopIHtcbiAgICAgICAgXG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyB2b2lkIHVwZGF0ZShVc2VyIG9iaikge1xuICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oXCJOb3Qgc3VwcG9ydGVkIHlldC5cIik7IC8vIEdlbmVyYXRlZCBmcm9tIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9Db2RlL0dlbmVyYXRlZE1ldGhvZEJvZHlcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIHZvaWQgZGVsZXRlKGludCBpZCkge1xuICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oXCJOb3Qgc3VwcG9ydGVkIHlldC5cIik7IC8vIEdlbmVyYXRlZCBmcm9tIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9Db2RlL0dlbmVyYXRlZE1ldGhvZEJvZHlcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIFVzZXIgZ2V0QnlJZChpbnQgaWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpOyAvLyBHZW5lcmF0ZWQgZnJvbSBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ29kZS9HZW5lcmF0ZWRNZXRob2RCb2R5XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBMaXN0PFVzZXI+IGdldEFsbCgpIHtcbiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpOyAvLyBHZW5lcmF0ZWQgZnJvbSBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ29kZS9HZW5lcmF0ZWRNZXRob2RCb2R5XG4gICAgfVxuICAgIFxufVxuLi4uXG5QYXRoOiBzcmMvREFPL1N1YnNjcmliZXJEQU8uamF2YVxuLypcbiAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvTGljZW5zZXMvbGljZW5zZS1kZWZhdWx0LnR4dCB0byBjaGFuZ2UgdGhpcyBsaWNlbnNlXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ2xhc3MuamF2YSB0byBlZGl0IHRoaXMgdGVtcGxhdGVcbiAqL1xucGFja2FnZSBEQU87XG5cbmltcG9ydCBNb2RlbC5TdWJzY3JpYmVyO1xuaW1wb3J0IGphdmEudXRpbC5MaXN0O1xuaW1wb3J0IGphdmEuc3FsLlByZXBhcmVkU3RhdGVtZW50O1xuaW1wb3J0IGphdmEuc3FsLlRpbWVzdGFtcDtcbmltcG9ydCBEQU8uRGJPcGVyYXRpb25zLlNxbE9wZXJhdGlvbjtcblxuLyoqXG4gKlxuICogQGF1dGhvciBOZ29jIFRoYW9cbiAqL1xucHVibGljIGNsYXNzIFN1YnNjcmliZXJEQU97XG5cbiAgICBwdWJsaWMgc3RhdGljIHZvaWQgaW5zZXJ0KGZpbmFsIFN1YnNjcmliZXIgb2JqKSB7XG4gICAgICAgIC8vIEdlbmVyYXRlIHVzZXJfaWQgYW5kIHN1YnNjcmliZXJfaWRcbiAgICAgICAgZmluYWwgaW50IHVzZXJJZCA9IERiT3BlcmF0aW9ucy5nZXROZXh0SWQoXCJVU0VSXCIsIFwidXNlcl9pZFwiKTtcbiAgICAgICAgZmluYWwgaW50IHN1YnNjcmliZXJJZCA9IERiT3BlcmF0aW9ucy5nZXROZXh0SWQoXCJTVUJTQ1JJQkVSXCIsIFwic3Vic2NyaWJlcl9pZFwiKTtcblxuICAgICAgICAvLyBTZXQgdGhlIGdlbmVyYXRlZCBJRHNcbiAgICAgICAgb2JqLnNldFVzZXJfaWQodXNlcklkKTtcbiAgICAgICAgb2JqLnNldFN1YnNjcmliZXJfaWQoc3Vic2NyaWJlcklkKTtcbi4uLlxuXG4gICAgICAgICAgICAvLyBJbnNlcnQgaW50byBTVUJTQ1JJQkVSIHRhYmxlXG4gICAgICAgICAgICBuZXcgU3FsT3BlcmF0aW9uKCkge1xuICAgICAgICAgICAgICAgIEBPdmVycmlkZVxuICAgICAgICAgICAgICAgIHB1YmxpYyBTdHJpbmcgZ2V0U3FsKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJJTlNFUlQgSU5UTyBTVUJTQ1JJQkVSIChzdWJzY3JpYmVyX2lkLCBuYW1lLCBhZGRyZXNzLCBwaG9uZSwgdXNlcl9pZCkgVkFMVUVTICg/LCA/LCA/LCA/LCA/KVwiO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIEBPdmVycmlkZVxuICAgICAgICAgICAgICAgIHB1YmxpYyB2b2lkIHNldFBhcmFtZXRlcnMoUHJlcGFyZWRTdGF0ZW1lbnQgcHMpIHRocm93cyBFeGNlcHRpb24ge1xuICAgICAgICAgICAgICAgICAgICBwcy5zZXRJbnQoMSwgc3Vic2NyaWJlcklkKTtcbiAgICAgICAgICAgICAgICAgICAgcHMuc2V0U3RyaW5nKDIsIG9iai5nZXRGdWxsTmFtZSgpKTtcbiAgICAgICAgICAgICAgICAgICAgcHMuc2V0U3RyaW5nKDMsIG9iai5nZXRBZGRyZXNzKCkpO1xuICAgICAgICAgICAgICAgICAgICBwcy5zZXRTdHJpbmcoNCwgb2JqLmdldFBob25lKCkpO1xuICAgICAgICAgICAgICAgICAgICBwcy5zZXRJbnQoNSwgdXNlcklkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gRXhlY3V0ZSB0aGUgdHJhbnNhY3Rpb25cbiAgICAgICAgRGJPcGVyYXRpb25zLmV4ZWN1dGVUcmFuc2FjdGlvbihvcGVyYXRpb25zLCBcIsSQxINuZyBrw70gdGjDoG5oIGPDtG5nIVwiKTtcbiAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyB2b2lkIHVwZGF0ZShTdWJzY3JpYmVyIG9iaikge1xuICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oXCJOb3Qgc3VwcG9ydGVkIHlldC5cIik7IC8vIEdlbmVyYXRlZCBmcm9tIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvQ2xhc3Nlcy9Db2RlL0dlbmVyYXRlZE1ldGhvZEJvZHlcbiAgICB9XG4uLi5cblBhdGg6IHNyYy9EQU8vQ29ubmVjdGlvblByb3ZpZGVyLmphdmFcbi4uLlxuXG4gICAgcHVibGljIHN0YXRpYyBDb25uZWN0aW9uIGdldENvbm4oKXtcbiAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQXR0ZW1wdGluZyB0byBjb25uZWN0IHRvIGRhdGFiYXNlLi4uXCIpO1xuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiVVJMOiBcIiArIFVSTCk7XG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJVc2VyOiBcIiArIFVTRVIpO1xuXG4gICAgICAgICAgICBDbGFzcy5mb3JOYW1lKFwiY29tLm15c3FsLmNqLmpkYmMuRHJpdmVyXCIpO1xuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRHJpdmVyIGxvYWRlZCBzdWNjZXNzZnVsbHlcIik7XG5cbiAgICAgICAgICAgIGNvbm4gPSBEcml2ZXJNYW5hZ2VyLmdldENvbm5lY3Rpb24oVVJMLCBVU0VSLCBQQVNTV09SRCk7XG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJDb25uZWN0aW9uIGVzdGFibGlzaGVkOiBcIiArIChjb25uICE9IG51bGwpKTtcblxuICAgICAgICB9IGNhdGNoIChDbGFzc05vdEZvdW5kRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIFN5c3RlbS5lcnIucHJpbnRsbihcIk15U1FMIEpEQkMgRHJpdmVyIG5vdCBmb3VuZC5cIik7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgU3lzdGVtLmVyci5wcmludGxuKFwiQ29ubmVjdGlvbiBmYWlsZWQ6IFwiICsgZS5nZXRNZXNzYWdlKCkpO1xuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29ubjtcbiAgICB9XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvY29tL3N0b3JlL2FwcC9wZXRzdG9yZS9EQU8vUGV0REFPLmphdmFcbi4uLlxuXG4gICAgLy8gdGltIGtpZW0gdGhlbyB0ZW4sIGxvYWksIGdpb25nXG4gICAgcHVibGljIEFycmF5TGlzdDxQZXQ+IHNlYXJjaFBldHMoU3RyaW5nIHNlYXJjaFRleHQsIGludCBsaW1pdCkge1xuICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgICAgICBQcmVwYXJlZFN0YXRlbWVudCBzdG10ID0gbnVsbDtcbiAgICAgICAgUmVzdWx0U2V0IHJzID0gbnVsbDtcbiAgICAgICAgQXJyYXlMaXN0PFBldD4gcGV0TGlzdCA9IG5ldyBBcnJheUxpc3Q8PigpO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25uID0gRGF0YWJhc2VVdGlsLmdldENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgIFN0cmluZyBzcWwgPSBcIlNFTEVDVCAqIEZST00gUGV0cyBXSEVSRSBMT1dFUihuYW1lKSBMSUtFID8gTElNSVQgP1wiO1xuXG4gICAgICAgICAgICBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHNxbCk7XG4gICAgICAgICAgICBTdHJpbmcgc2VhcmNoUGF0dGVybiA9IFwiJVwiICsgc2VhcmNoVGV4dC50b0xvd2VyQ2FzZSgpICsgXCIlXCI7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygxLCBzZWFyY2hQYXR0ZXJuKTtcbiAgICAgICAgICAgIHN0bXQuc2V0SW50KDIsIGxpbWl0KTtcblxuICAgICAgICAgICAgcnMgPSBzdG10LmV4ZWN1dGVRdWVyeSgpO1xuXG4gICAgICAgICAgICB3aGlsZSAocnMubmV4dCgpKSB7XG4gICAgICAgICAgICAgICAgcGUuLi4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCJlNWNjODdjNS1hMzViLTRlNzQtYTQ1OS0zMTU3NmFlNzg3OTM7dG9vbHVfMDE2eERyeGRKRExZY0JEd3BCcWNOQ2F3Ijp7InJlcXVlc3RJZCI6ImU1Y2M4N2M1LWEzNWItNGU3NC1hNDU5LTMxNTc2YWU3ODc5MyIsInRvb2xVc2VJZCI6InRvb2x1XzAxNnhEcnhkSkRMWWNCRHdwQnFjTkNhdyIsInBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IlRoZSBmb2xsb3dpbmcgY29kZSBzZWN0aW9ucyB3ZXJlIHJldHJpZXZlZDpcblBhdGg6IHNyYy9tYWluL2phdmEvY29tL3N0b3JlL2FwcC9wZXRzdG9yZS9EQU8vVXNlckRBTy5qYXZhXG5wYWNrYWdlIGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuREFPO1xuXG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5Nb2RlbHMuRW50aXRpZXMuVXNlcjtcbmltcG9ydCBvcmcubWluZHJvdC5qYmNyeXB0LkJDcnlwdDtcblxuaW1wb3J0IGphdmEuc3FsLio7XG5pbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDtcbmltcG9ydCBqYXZhLnV0aWwuQmFzZTY0O1xuXG5wdWJsaWMgY2xhc3MgVXNlckRBTyBpbXBsZW1lbnRzIEJhc2VEQU88VXNlciwgSW50ZWdlcj4ge1xuICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgaW50IGlzRHVwbGljYXRlID0gLTE7XG5cbiAgICBwdWJsaWMgc3RhdGljIFVzZXJEQU8gZ2V0SW5zdGFuY2UoKSB7XG4gICAgICAgIHJldHVybiBuZXcgVXNlckRBTygpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgU3RyaW5nIGVuY29kZShTdHJpbmcgcGFzc3dvcmQpIHtcbi8vICAgICAgICByZXR1cm4gQmFzZTY0LmdldEVuY29kZXIoKS5lbmNvZGVUb1N0cmluZyhwYXNzd29yZC5nZXRCeXRlcygpKTtcbiAgICAgICAgcmV0dXJuIEJDcnlwdC5oYXNocHcocGFzc3dvcmQsIEJDcnlwdC5nZW5zYWx0KCkpO1xuICAgIH1cblxuLy8gICAgcHVibGljIHN0YXRpYyBTdHJpbmcgZGVjb2RlKFN0cmluZyBwYXNzd29yZCkge1xuLy8gICAgICAgIHJldHVybiBuZXcgU3RyaW5nKEJhc2U2NC5nZXREZWNvZGVyKCkuZGVjb2RlKHBhc3N3b3JkKSk7XG4vLyAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGJvb2xlYW4gdmVyaWZ5KFN0cmluZyBwYXNzd29yZCwgU3RyaW5nIGhhc2hlZCkge1xuICAgICAgICByZXR1cm4gQkNyeXB0LmNoZWNrcHcocGFzc3dvcmQsIGhhc2hlZCk7XG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIGludCBpbnNlcnQoVXNlciBlbnRpdHkpIHtcbiAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcbiAgICAgICAgUHJlcGFyZWRTdGF0ZW1lbnQgc3RtdCA9IG51bGw7XG4gICAgICAgIFJlc3VsdFNldCBycyA9IG51bGw7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbm4gPSBEYXRhYmFzZVV0aWwuZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgICAgICAgU3RyaW5nIHNxbCA9IFwiSU5TRVJUIElOVE8gVXNlcnMgKHVzZXJuYW1lLCBwYXNzd29yZCwgcm9sZSwgaW1hZ2VfdXJsLCBpc0FjdGl2ZSkgVkFMVUVTICg/LCA/LCA/LCA/LCA/KVwiO1xuICAgICAgICAgICAgc3RtdCA9IGNvbm4ucHJlcGFyZVN0YXRlbWVudChzcWwsIFN0YXRlbWVudC5SRVRVUk5fR0VORVJBVEVEX0tFWVMpO1xuXG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygxLCBlbnRpdHkuZ2V0VXNlcm5hbWUoKSk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygyLCBlbmNvZGUoZW50aXR5LmdldFBhc3N3b3JkKCkpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDMsIGVudGl0eS5nZXRSb2xlKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoNCwgZW50aXR5LmdldEltYWdlVXJsKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRCb29sZWFuKDUsIGVudGl0eS5pc0FjdGl2ZSgpKTtcblxuICAgICAgICAgICAgaW50IGFmZmVjdGVkUm93cyA9IHN0bXQuZXhlY3V0ZVVwZGF0ZSgpO1xuICAgICAgICAgICAgaWYgKGFmZmVjdGVkUm93cyA9PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRyeSAoUmVzdWx0U2V0IGdlbmVyYXRlZEtleXMgPSBzdG10LmdldEdlbmVyYXRlZEtleXMoKSkge1xuICAgICAgICAgICAgICAgIGlmIChnZW5lcmF0ZWRLZXlzLm5leHQoKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ2VuZXJhdGVkS2V5cy5nZXRJbnQoMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBEYXRhYmFzZVV0aWwuY2xvc2VSZXNvdXJjZXMocnMsIHN0bXQsIGNvbm4pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIGludCB1cGRhdGUoVXNlciBlbnRpdHkpIHtcbiAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcbiAgICAgICAgUHJlcGFyZWRTdGF0ZW1lbnQgc3RtdCA9IG51bGw7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbm4gPSBEYXRhYmFzZVV0aWwuZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgICAgICAgU3RyaW5nIHNxbCA9IFwiVVBEQVRFIFVzZXJzIFNFVCB1c2VybmFtZSA9ID8sIHBhc3N3b3JkID0gPywgcm9sZSA9ID8sIGltYWdlX3VybCA9ID8sIGlzQWN0aXZlID0gPyBXSEVSRSB1c2VyX2lkID0gP1wiO1xuICAgICAgICAgICAgc3RtdCA9IGNvbm4ucHJlcGFyZVN0YXRlbWVudChzcWwpO1xuXG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygxLCBlbnRpdHkuZ2V0VXNlcm5hbWUoKSk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygyLCBlbmNvZGUoZW50aXR5LmdldFBhc3N3b3JkKCkpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDMsIGVudGl0eS5nZXRSb2xlKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoNCwgZW50aXR5LmdldEltYWdlVXJsKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRCb29sZWFuKDUsIGVudGl0eS5pc0FjdGl2ZSgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0SW50KDYsIGVudGl0eS5nZXRVc2VySWQoKSk7XG5cbiAgICAgICAgICAgIHJldHVybiBzdG10LmV4ZWN1dGVVcGRhdGUoKTtcbiAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIERhdGFiYXNlVXRpbC5jbG9zZVJlc291cmNlcyhzdG10LCBjb25uKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBpbnQgdXBkYXRlKFVzZXIgZW50aXR5LCBib29sZWFuIGlzVXNlcm5hbWVDaGFuZ2VkKSB7XG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25uID0gRGF0YWJhc2VVdGlsLmdldENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgIFN0cmluZyBzcWwgPSBcIlVQREFURSBVc2VycyBTRVQgdXNlcm5hbWUgPSA/LCBwYXNzd29yZCA9ID8sIHJvbGUgPSA/LCBpbWFnZV91cmwgPSA/LCBpc0FjdGl2ZSA9ID8gV0hFUkUgdXNlcl9pZCA9ID9cIjtcbiAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsKTtcblxuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMSwgZW50aXR5LmdldFVzZXJuYW1lKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMiwgZW5jb2RlKGVudGl0eS5nZXRQYXNzd29yZCgpKSk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygzLCBlbnRpdHkuZ2V0Um9sZSgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDQsIGVudGl0eS5nZXRJbWFnZVVybCgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0Qm9vbGVhbig1LCBlbnRpdHkuaXNBY3RpdmUoKSk7XG4gICAgICAgICAgICBzdG10LnNldEludCg2LCBlbnRpdHkuZ2V0VXNlcklkKCkpO1xuXG4gICAgICAgICAgICByZXR1cm4gc3RtdC5leGVjdXRlVXBkYXRlKCk7XG4gICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBEYXRhYmFzZVV0aWwuY2xvc2VSZXNvdXJjZXMoc3RtdCwgY29ubik7XG4gICAgICAgIH1cbiAgICB9XG4uLi5cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBBcnJheUxpc3Q8VXNlcj4gZmluZEFsbCgpIHtcbiAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcbiAgICAgICAgUHJlcGFyZWRTdGF0ZW1lbnQgc3RtdCA9IG51bGw7XG4gICAgICAgIFJlc3VsdFNldCBycyA9IG51bGw7XG4gICAgICAgIEFycmF5TGlzdDxVc2VyPiB1c2VycyA9IG5ldyBBcnJheUxpc3Q8PigpO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25uID0gRGF0YWJhc2VVdGlsLmdldENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgIFN0cmluZyBzcWwgPSBcIlNFTEVDVCAqIEZST00gVXNlcnNcIjtcbiAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsKTtcbiAgICAgICAgICAgIHJzID0gc3RtdC5leGVjdXRlUXVlcnkoKTtcblxuICAgICAgICAgICAgd2hpbGUgKHJzLm5leHQoKSkge1xuICAgICAgICAgICAgICAgIFVzZXIgdXNlciA9IG5ldyBVc2VyKCk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRVc2VySWQocnMuZ2V0SW50KFwidXNlcl9pZFwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRVc2VybmFtZShycy5nZXRTdHJpbmcoXCJ1c2VybmFtZVwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRQYXNzd29yZChycy5nZXRTdHJpbmcoXCJwYXNzd29yZFwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRSb2xlKHJzLmdldFN0cmluZyhcInJvbGVcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0SW1hZ2VVcmwocnMuZ2V0U3RyaW5nKFwiaW1hZ2VfdXJsXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldEFjdGl2ZShycy5nZXRCb29sZWFuKFwiaXNBY3RpdmVcIikpO1xuICAgICAgICAgICAgICAgIHVzZXJzLmFkZCh1c2VyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBEYXRhYmFzZVV0aWwuY2xvc2VSZXNvdXJjZXMocnMsIHN0bXQsIGNvbm4pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1c2VycztcbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgVXNlciBmaW5kQnlJZChJbnRlZ2VyIGlkKSB7XG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuICAgICAgICBSZXN1bHRTZXQgcnMgPSBudWxsO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25uID0gRGF0YWJhc2VVdGlsLmdldENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgIFN0cmluZyBzcWwgPSBcIlNFTEVDVCAqIEZST00gVXNlcnMgV0hFUkUgdXNlcl9pZCA9ID9cIjtcbiAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsKTtcbiAgICAgICAgICAgIHN0bXQuc2V0SW50KDEsIGlkKTtcbiAgICAgICAgICAgIHJzID0gc3RtdC5leGVjdXRlUXVlcnkoKTtcblxuICAgICAgICAgICAgaWYgKHJzLm5leHQoKSkge1xuICAgICAgICAgICAgICAgIFVzZXIgdXNlciA9IG5ldyBVc2VyKCk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRVc2VySWQocnMuZ2V0SW50KFwidXNlcl9pZFwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRVc2VybmFtZShycy5nZXRTdHJpbmcoXCJ1c2VybmFtZVwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRQYXNzd29yZChycy5nZXRTdHJpbmcoXCJwYXNzd29yZFwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRSb2xlKHJzLmdldFN0cmluZyhcInJvbGVcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0SW1hZ2VVcmwocnMuZ2V0U3RyaW5nKFwiaW1hZ2VfdXJsXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldEFjdGl2ZShycy5nZXRCb29sZWFuKFwiaXNBY3RpdmVcIikpO1xuICAgICAgICAgICAgICAgIHJldHVybiB1c2VyO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIERhdGFiYXNlVXRpbC5jbG9zZVJlc291cmNlcyhycywgc3RtdCwgY29ubik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuLi4uXG5cbiAgICBwdWJsaWMgVXNlciBmaW5kQnlVc2VybmFtZShTdHJpbmcgdXNlcm5hbWUpIHtcbiAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcbiAgICAgICAgUHJlcGFyZWRTdGF0ZW1lbnQgc3RtdCA9IG51bGw7XG4gICAgICAgIFJlc3VsdFNldCBycyA9IG51bGw7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbm4gPSBEYXRhYmFzZVV0aWwuZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgICAgICAgU3RyaW5nIHNxbCA9IFwiU0VMRUNUICogRlJPTSBVc2VycyBXSEVSRSB1c2VybmFtZSA9ID9cIjtcbiAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDEsIHVzZXJuYW1lKTtcbiAgICAgICAgICAgIHJzID0gc3RtdC5leGVjdXRlUXVlcnkoKTtcblxuICAgICAgICAgICAgaWYgKHJzLm5leHQoKSkge1xuICAgICAgICAgICAgICAgIFVzZXIgdXNlciA9IG5ldyBVc2VyKCk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRVc2VySWQocnMuZ2V0SW50KFwidXNlcl9pZFwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRVc2VybmFtZShycy5nZXRTdHJpbmcoXCJ1c2VybmFtZVwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRQYXNzd29yZChycy5nZXRTdHJpbmcoXCJwYXNzd29yZFwiKSk7XG4gICAgICAgICAgICAgICAgdXNlci5zZXRSb2xlKHJzLmdldFN0cmluZyhcInJvbGVcIikpO1xuICAgICAgICAgICAgICAgIHVzZXIuc2V0SW1hZ2VVcmwocnMuZ2V0U3RyaW5nKFwiaW1hZ2VfdXJsXCIpKTtcbiAgICAgICAgICAgICAgICB1c2VyLnNldEFjdGl2ZShycy5nZXRCb29sZWFuKFwiaXNBY3RpdmVcIikpO1xuICAgICAgICAgICAgICAgIHJldHVybiB1c2VyO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIERhdGFiYXNlVXRpbC5jbG9zZVJlc291cmNlcyhycywgc3RtdCwgY29ubik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcHVibGljIFVzZXIgZmluZEJ5RW1haWwoU3RyaW5nIGVtYWlsKSB7XG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuICAgICAgICBSZXN1bHRTZXQgcnMgPSBudWxsO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBLaeG7g20gdHJhIGVtYWlsIGPDsyB04buTbiB04bqhaSB0cm9uZyBi4bqjbmcgU3RhZmZzIGtow7RuZ1xuICAgICAgICAgICAgY29ubiA9IERhdGFiYXNlVXRpbC5nZXRDb25uZWN0aW9uKCk7XG4gICAgICAgICAgICBTdHJpbmcgY2hlY2tTcWwgPSBcIlNFTEVDVCAqIEZST00gU3RhZmZzIFdIRVJFIGVtYWlsID0gP1wiO1xuICAgICAgICAgICAgc3RtdCA9IGNvbm4ucHJlcGFyZVN0YXRlbWVudChjaGVja1NxbCk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygxLCBlbWFpbCk7XG4gICAgICAgICAgICBycyA9IHN0bXQuZXhlY3V0ZVF1ZXJ5KCk7XG5cbiAgICAgICAgICAgIC8vIE7hur91IGVtYWlsIHThu5NuIHThuqFpLCBs4bqleSB0aMO0bmcgdGluIHVzZXJcbiAgICAgICAgICAgIFN0cmluZyBzcWwgPSBcIlNFTEVDVCB1LiogRlJPTSBVc2VycyB1IFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiSk9JTiBTdGFmZnMgcyBPTiB1LnVzZXJfaWQgPSBzLnVzZXJfaWQgXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJXSEVSRSBzLmVtYWlsID0gP1wiO1xuICAgICAgICAgICAgc3RtdCA9IGNvbm4ucHJlcGFyZVN0YXRlbWVudChzcWwpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMSwgZW1haWwpO1xuXG4gICAgICAgICAgICBycyA9IHN0bXQuZXhlY3V0ZVF1ZXJ5KCk7XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvY29tL3N0b3JlL2FwcC9wZXRzdG9yZS9Db250cm9sbGVycy9Mb2dpbkNvbnRyb2xsZXIuamF2YVxuLi4uXG5cbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLkRBTy5Vc2VyREFPO1xuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuREFPLlN0YWZmREFPO1xuaW1wb3J0IGNvbS5zdG9yZS5hcHAucGV0c3RvcmUuTW9kZWxzLkVudGl0aWVzLlVzZXI7XG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5Nb2RlbHMuRW50aXRpZXMuU3RhZmY7XG5pbXBvcnQgY29tLnN0b3JlLmFwcC5wZXRzdG9yZS5TZXNzaW9ucy5TZXNzaW9uTWFuYWdlcjtcbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLlZpZXdzLkFkbWluRmFjdG9yeTtcbmltcG9ydCBjb20uc3RvcmUuYXBwLnBldHN0b3JlLlZpZXdzLlZpZXdGYWN0b3J5O1xuaW1wb3J0IGRlLmplbnNkLmZ4LmdseXBocy5mb250YXdlc29tZS5Gb250QXdlc29tZUljb247XG5pbXBvcnQgZGUuamVuc2QuZnguZ2x5cGhzLmZvbnRhd2Vzb21lLkZvbnRBd2Vzb21lSWNvblZpZXc7XG5pbXBvcnQgamF2YWZ4LmZ4bWwuRlhNTDtcbmltcG9ydCBqYXZhZnguZnhtbC5Jbml0aWFsaXphYmxlO1xuaW1wb3J0IGphdmFmeC5zY2VuZS5jb250cm9sLio7XG5pbXBvcnQgamF2YWZ4LnNjZW5lLmlucHV0Lk1vdXNlRXZlbnQ7XG5pbXBvcnQgamF2YWZ4LnN0YWdlLlN0YWdlO1xuaW1wb3J0IGphdmFmeC5zY2VuZS5pbWFnZS5JbWFnZTtcbmltcG9ydCBqYXZhZnguc2NlbmUuaW1hZ2UuSW1hZ2VWaWV3O1xuaW1wb3J0IGphdmFmeC5zY2VuZS5wYWludC5JbWFnZVBhdHRlcm47XG5pbXBvcnQgamF2YS51dGlsLk9iamVjdHM7XG4uLi5cblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gVMOsbSB1c2VyIHRoZW8gdXNlcm5hbWVcbiAgICAgICAgICAgIFVzZXIgdXNlciA9IHVzZXJEQU8uZmluZEJ5VXNlcm5hbWUodXNlcm5hbWUpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZih1c2VyID09IG51bGwgfHwgdXNlci5nZXRVc2VybmFtZSgpID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBDb250cm9sbGVyVXRpbHMuc2hvd0FsZXJ0KEFsZXJ0LkFsZXJ0VHlwZS5FUlJPUiwgXCJM4buXaVwiLCBcIlTDqm4gxJHEg25nIG5o4bqtcCBraMO0bmcgxJHDum5nXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gS2nhu4NtIHRyYSB0w6puIMSRxINuZyBuaOG6rXBcbiAgICAgICAgICAgIGlmICghdXNlci5nZXRVc2VybmFtZSgpLmVxdWFscyh1c2VybmFtZSkpIHtcbiAgICAgICAgICAgICAgICBDb250cm9sbGVyVXRpbHMuc2hvd0FsZXJ0KEFsZXJ0LkFsZXJ0VHlwZS5FUlJPUiwgXCJM4buXaVwiLCBcIlTDqm4gxJHEg25nIG5o4bqtcCBraMO0bmcgxJHDum5nXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gS2nhu4NtIHRyYSBt4bqtdCBraOG6qXVcbiAgICAgICAgICAgIGlmKCFCQ3J5cHQuY2hlY2twdyhwYXNzd29yZCwgdXNlci5nZXRQYXNzd29yZCgpKSkge1xuICAgICAgICAgICAgICAgIENvbnRyb2xsZXJVdGlscy5zaG93QWxlcnQoQWxlcnQuQWxlcnRUeXBlLkVSUk9SLCBcIkzhu5dpXCIsIFwiTeG6rXQga2jhuql1IGtow7RuZyDEkcO6bmdcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuLi4uXG5QYXRoOiBzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9Mb2dpbi5qYXZhXG4uLi5cblxuICAgIHByaXZhdGUgdm9pZCBidG5Mb2dpbkFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5Mb2dpbkFjdGlvblBlcmZvcm1lZFxuICAgICAgICAvLyBUT0RPIGFkZCB5b3VyIGhhbmRsaW5nIGNvZGUgaGVyZTpcbiAgICAgICAgaWYodmFsaWRhdGVGaWVsZHMoKSkge1xuICAgICAgICAgICAgdHJ5e1xuICAgICAgICAgICAgICAgIFN0cmluZyB1c2VybmFtZSA9IHR4dFVzZXJOYW1lLmdldFRleHQoKS50cmltKCk7XG4gICAgICAgICAgICAgICAgU3RyaW5nIHBhc3N3b3JkID0gdHh0UGFzc3dvcmQuZ2V0VGV4dCgpLnRyaW0oKTtcblxuICAgICAgICAgICAgICAgIFVzZXIgdXNlciA9IG51bGw7XG4gICAgICAgICAgICAgICAgYm9vbGVhbiBpc1N1Y2Nlc3MgPSBVc2VyREFPLmxvZ2luKHVzZXJuYW1lLCBwYXNzd29yZCk7XG5cbiAgICAgICAgICAgICAgICBpZihpc1N1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2codGhpcywgXCLEkMSDbmcgbmjhuq1wIHRow6BuaCBjw7RuZyFcIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5JTkZPUk1BVElPTl9NRVNTQUdFKTtcbi8vICAgICAgICAgICAgICAgICAgICBuZXcgTWFpbkZyYW1lKCkuc2V0VmlzaWJsZSh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwb3NlKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2codGhpcywgXCJTYWkgdMOqbiDEkcSDbmcgbmjhuq1wIGhv4bq3YyBt4bqtdCBraOG6qXUuXCIsIFwiTOG7l2lcIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAgICAgICAgICAgICAgfVxuLi4uXG5QYXRoOiBzcmMvREFPL0RiT3BlcmF0aW9ucy5qYXZhXG5wYWNrYWdlIERBTztcblxuaW1wb3J0IGphdmEuc3FsLkNvbm5lY3Rpb247XG5pbXBvcnQgamF2YS5zcWwuUHJlcGFyZWRTdGF0ZW1lbnQ7XG5pbXBvcnQgamF2YS5zcWwuUmVzdWx0U2V0O1xuaW1wb3J0IGphdmEuc3FsLlN0YXRlbWVudDtcbmltcG9ydCBqYXZheC5zd2luZy5KT3B0aW9uUGFuZTtcblxucHVibGljIGNsYXNzIERiT3BlcmF0aW9ucyB7XG4gICAgcHVibGljIHN0YXRpYyB2b2lkIHNldERhdGFPckRlbGV0ZShTdHJpbmcgcXVlcnksIFN0cmluZyBtc2cpIHtcbiAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcbiAgICAgICAgU3RhdGVtZW50IHN0ID0gbnVsbDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbm4gPSBDb25uZWN0aW9uUHJvdmlkZXIuZ2V0Q29ubigpO1xuICAgICAgICAgICAgc3QgPSBjb25uLmNyZWF0ZVN0YXRlbWVudCgpO1xuICAgICAgICAgICAgc3QuZXhlY3V0ZVVwZGF0ZShxdWVyeSk7XG5cbiAgICAgICAgICAgIGlmKCFtc2cuZXF1YWxzKFwiXCIpKSB7XG4gICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgbXNnLCBcIk1lc3NhZ2VcIiwgSk9wdGlvblBhbmUuSU5GT1JNQVRJT05fTUVTU0FHRSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBleCkge1xuICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgZXgsIFwiTWVzc2FnZVwiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKHN0ICE9IG51bGwpIHN0LmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgaWYgKGNvbm4gIT0gbnVsbCkgY29ubi5jbG9zZSgpO1xuICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2VuZXJhdGUgdGhlIG5leHQgYXZhaWxhYmxlIElEIGZvciBhIHRhYmxlXG4gICAgICogQHBhcmFtIHRhYmxlTmFtZSBOYW1lIG9mIHRoZSB0YWJsZVxuICAgICAqIEBwYXJhbSBpZENvbHVtbk5hbWUgTmFtZSBvZiB0aGUgSUQgY29sdW1uXG4gICAgICogQHJldHVybiBOZXh0IGF2YWlsYWJsZSBJRFxuICAgICAqL1xuICAgIHB1YmxpYyBzdGF0aWMgaW50IGdldE5leHRJZChTdHJpbmcgdGFibGVOYW1lLCBTdHJpbmcgaWRDb2x1bW5OYW1lKSB7XG4gICAgICAgIGludCBuZXh0SWQgPSAxOyAvLyBEZWZhdWx0IHN0YXJ0aW5nIElEXG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgICAgIFN0YXRlbWVudCBzdG10ID0gbnVsbDtcbiAgICAgICAgUmVzdWx0U2V0IHJzID0gbnVsbDtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29ubiA9IENvbm5lY3Rpb25Qcm92aWRlci5nZXRDb25uKCk7XG4gICAgICAgICAgICBzdG10ID0gY29ubi5jcmVhdGVTdGF0ZW1lbnQoKTtcbiAgICAgICAgICAgIFN0cmluZyBxdWVyeSA9IFwiU0VMRUNUIE1BWChcIiArIGlkQ29sdW1uTmFtZSArIFwiKSBBUyBtYXhfaWQgRlJPTSBcIiArIHRhYmxlTmFtZTtcbiAgICAgICAgICAgIHJzID0gc3RtdC5leGVjdXRlUXVlcnkocXVlcnkpO1xuXG4gICAgICAgICAgICBpZiAocnMubmV4dCgpKSB7XG4gICAgICAgICAgICAgICAgaW50IG1heElkID0gcnMuZ2V0SW50KFwibWF4X2lkXCIpO1xuICAgICAgICAgICAgICAgIG5leHRJZCA9IG1heElkICsgMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIGUsIFwiRXJyb3JcIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmIChycyAhPSBudWxsKSBycy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIGlmIChzdG10ICE9IG51bGwpIHN0bXQuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICBpZiAoY29ubiAhPSBudWxsKSBjb25uLmNsb3NlKCk7XG4gICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbmV4dElkO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgYm9vbGVhbiBleGVjdXRlVHJhbnNhY3Rpb24oU3FsT3BlcmF0aW9uW10gb3BlcmF0aW9ucywgU3RyaW5nIHN1Y2Nlc3NNc2cpIHtcbiAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcbiAgICAgICAgYm9vbGVhbiBzdWNjZXNzID0gZmFsc2U7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbm4gPSBDb25uZWN0aW9uUHJvdmlkZXIuZ2V0Q29ubigpO1xuICAgICAgICAgICAgY29ubi5zZXRBdXRvQ29tbWl0KGZhbHNlKTtcblxuICAgICAgICAgICAgLy8gRXhlY3V0ZSBhbGwgb3BlcmF0aW9uc1xuICAgICAgICAgICAgZm9yIChTcWxPcGVyYXRpb24gb3BlcmF0aW9uIDogb3BlcmF0aW9ucykge1xuICAgICAgICAgICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHBzID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KG9wZXJhdGlvbi5nZXRTcWwoKSk7XG4gICAgICAgICAgICAgICAgb3BlcmF0aW9uLnNldFBhcmFtZXRlcnMocHMpO1xuICAgICAgICAgICAgICAgIHBzLmV4ZWN1dGVVcGRhdGUoKTtcbiAgICAgICAgICAgICAgICBwcy5jbG9zZSgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBDb21taXQgdHJhbnNhY3Rpb25cbiAgICAgICAgICAgIGNvbm4uY29tbWl0KCk7XG4gICAgICAgICAgICBzdWNjZXNzID0gdHJ1ZTtcblxuICAgICAgICAgICAgLy8gU2hvdyBzdWNjZXNzIG1lc3NhZ2UgaWYgcHJvdmlkZWRcbiAgICAgICAgICAgIGlmIChzdWNjZXNzTXNnICE9IG51bGwgJiYgIXN1Y2Nlc3NNc2cuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgc3VjY2Vzc01zZywgXCJTdWNjZXNzXCIsIEpPcHRpb25QYW5lLklORk9STUFUSU9OX01FU1NBR0UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgLy8gUm9sbGJhY2sgdHJhbnNhY3Rpb24gb24gZXJyb3JcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbm4gIT0gbnVsbCkgY29ubi5yb2xsYmFjaygpO1xuICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIHJvbGxiYWNrRXgpIHtcbiAgICAgICAgICAgICAgICByb2xsYmFja0V4LnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcIkVycm9yOiBcIiArIGUuZ2V0TWVzc2FnZSgpLCBcIkVycm9yXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbm4gIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBjb25uLnNldEF1dG9Db21taXQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbm4uY2xvc2UoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc3VjY2VzcztcbiAgICB9XG5cbiAgICBwdWJsaWMgaW50ZXJmYWNlIFNxbE9wZXJhdGlvbiB7XG4gICAgICAgIFN0cmluZyBnZXRTcWwoKTtcbiAgICAgICAgdm9pZCBzZXRQYXJhbWV0ZXJzKFByZXBhcmVkU3RhdGVtZW50IHBzKSB0aHJvd3MgRXhjZXB0aW9uO1xuICAgIH1cbn1cbi4uLlxuUGF0aDogc3JjL0RBTy9Vc2VyREFPLmphdmFcbi8qXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0xpY2Vuc2VzL2xpY2Vuc2UtZGVmYXVsdC50eHQgdG8gY2hhbmdlIHRoaXMgbGljZW5zZVxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NsYXNzLmphdmEgdG8gZWRpdCB0aGlzIHRlbXBsYXRlXG4gKi9cbnBhY2thZ2UgREFPO1xuXG5pbXBvcnQgTW9kZWwuVXNlcjtcbmltcG9ydCBqYXZhLnV0aWwuTGlzdDtcblxuLyoqXG4gKlxuICogQGF1dGhvciBOZ29jIFRoYW9cbiAqL1xucHVibGljIGNsYXNzIFVzZXJEQU97XG5cbiAgICBwdWJsaWMgc3RhdGljIHZvaWQgaW5zZXJ0KFVzZXIgb2JqKSB7XG4gICAgICAgIFxuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgdm9pZCB1cGRhdGUoVXNlciBvYmopIHtcbiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpOyAvLyBHZW5lcmF0ZWQgZnJvbSBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ29kZS9HZW5lcmF0ZWRNZXRob2RCb2R5XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyB2b2lkIGRlbGV0ZShpbnQgaWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpOyAvLyBHZW5lcmF0ZWQgZnJvbSBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ29kZS9HZW5lcmF0ZWRNZXRob2RCb2R5XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBVc2VyIGdldEJ5SWQoaW50IGlkKSB7XG4gICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbihcIk5vdCBzdXBwb3J0ZWQgeWV0LlwiKTsgLy8gR2VuZXJhdGVkIGZyb20gbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NvZGUvR2VuZXJhdGVkTWV0aG9kQm9keVxuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxVc2VyPiBnZXRBbGwoKSB7XG4gICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbihcIk5vdCBzdXBwb3J0ZWQgeWV0LlwiKTsgLy8gR2VuZXJhdGVkIGZyb20gbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NvZGUvR2VuZXJhdGVkTWV0aG9kQm9keVxuICAgIH1cbiAgICBcbn1cbi4uLlxuUGF0aDogc3JjL0RBTy9TdWJzY3JpYmVyREFPLmphdmFcbi8qXG4gKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0xpY2Vuc2VzL2xpY2Vuc2UtZGVmYXVsdC50eHQgdG8gY2hhbmdlIHRoaXMgbGljZW5zZVxuICogQ2xpY2sgbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NsYXNzLmphdmEgdG8gZWRpdCB0aGlzIHRlbXBsYXRlXG4gKi9cbnBhY2thZ2UgREFPO1xuXG5pbXBvcnQgTW9kZWwuU3Vic2NyaWJlcjtcbmltcG9ydCBqYXZhLnV0aWwuTGlzdDtcbmltcG9ydCBqYXZhLnNxbC5QcmVwYXJlZFN0YXRlbWVudDtcbmltcG9ydCBqYXZhLnNxbC5UaW1lc3RhbXA7XG5pbXBvcnQgREFPLkRiT3BlcmF0aW9ucy5TcWxPcGVyYXRpb247XG5cbi8qKlxuICpcbiAqIEBhdXRob3IgTmdvYyBUaGFvXG4gKi9cbnB1YmxpYyBjbGFzcyBTdWJzY3JpYmVyREFPe1xuXG4gICAgcHVibGljIHN0YXRpYyB2b2lkIGluc2VydChmaW5hbCBTdWJzY3JpYmVyIG9iaikge1xuICAgICAgICAvLyBHZW5lcmF0ZSB1c2VyX2lkIGFuZCBzdWJzY3JpYmVyX2lkXG4gICAgICAgIGZpbmFsIGludCB1c2VySWQgPSBEYk9wZXJhdGlvbnMuZ2V0TmV4dElkKFwiVVNFUlwiLCBcInVzZXJfaWRcIik7XG4gICAgICAgIGZpbmFsIGludCBzdWJzY3JpYmVySWQgPSBEYk9wZXJhdGlvbnMuZ2V0TmV4dElkKFwiU1VCU0NSSUJFUlwiLCBcInN1YnNjcmliZXJfaWRcIik7XG5cbiAgICAgICAgLy8gU2V0IHRoZSBnZW5lcmF0ZWQgSURzXG4gICAgICAgIG9iai5zZXRVc2VyX2lkKHVzZXJJZCk7XG4gICAgICAgIG9iai5zZXRTdWJzY3JpYmVyX2lkKHN1YnNjcmliZXJJZCk7XG5cbiAgICAgICAgLy8gQ3JlYXRlIFNRTCBvcGVyYXRpb25zIGZvciB0aGUgdHJhbnNhY3Rpb25cbiAgICAgICAgU3FsT3BlcmF0aW9uW10gb3BlcmF0aW9ucyA9IG5ldyBTcWxPcGVyYXRpb25bXSB7XG4gICAgICAgICAgICAvLyBJbnNlcnQgaW50byBVU0VSIHRhYmxlXG4gICAgICAgICAgICBuZXcgU3FsT3BlcmF0aW9uKCkge1xuICAgICAgICAgICAgICAgIEBPdmVycmlkZVxuICAgICAgICAgICAgICAgIHB1YmxpYyBTdHJpbmcgZ2V0U3FsKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJJTlNFUlQgSU5UTyBVU0VSKHVzZXJfaWQsIHVzZXJuYW1lLCBwYXNzd29yZCwgcm9sZSwgY3JlYXRlZF9hdCkgVkFMVUVTICg/LCA/LCA/LCA/LCA/KVwiO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIEBPdmVycmlkZVxuICAgICAgICAgICAgICAgIHB1YmxpYyB2b2lkIHNldFBhcmFtZXRlcnMoUHJlcGFyZWRTdGF0ZW1lbnQgcHMpIHRocm93cyBFeGNlcHRpb24ge1xuICAgICAgICAgICAgICAgICAgICBwcy5zZXRJbnQoMSwgdXNlcklkKTtcbiAgICAgICAgICAgICAgICAgICAgcHMuc2V0U3RyaW5nKDIsIG9iai5nZXRVc2VybmFtZSgpKTtcbiAgICAgICAgICAgICAgICAgICAgcHMuc2V0U3RyaW5nKDMsIG9iai5nZXRQYXNzd29yZCgpKTtcbiAgICAgICAgICAgICAgICAgICAgcHMuc2V0U3RyaW5nKDQsIG9iai5nZXRSb2xlKCkpO1xuICAgICAgICAgICAgICAgICAgICBwcy5zZXRUaW1lc3RhbXAoNSwgVGltZXN0YW1wLnZhbHVlT2Yob2JqLmdldENyZWF0ZV9hdCgpKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgLy8gSW5zZXJ0IGludG8gU1VCU0NSSUJFUiB0YWJsZVxuICAgICAgICAgICAgbmV3IFNxbE9wZXJhdGlvbigpIHtcbiAgICAgICAgICAgICAgICBAT3ZlcnJpZGVcbiAgICAgICAgICAgICAgICBwdWJsaWMgU3RyaW5nIGdldFNxbCgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiSU5TRVJUIElOVE8gU1VCU0NSSUJFUiAoc3Vic2NyaWJlcl9pZCwgbmFtZSwgYWRkcmVzcywgcGhvbmUsIHVzZXJfaWQpIFZBTFVFUyAoPywgPywgPywgPywgPylcIjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBAT3ZlcnJpZGVcbiAgICAgICAgICAgICAgICBwdWJsaWMgdm9pZCBzZXRQYXJhbWV0ZXJzKFByZXBhcmVkU3RhdGVtZW50IHBzKSB0aHJvd3MgRXhjZXB0aW9uIHtcbiAgICAgICAgICAgICAgICAgICAgcHMuc2V0SW50KDEsIHN1YnNjcmliZXJJZCk7XG4gICAgICAgICAgICAgICAgICAgIHBzLnNldFN0cmluZygyLCBvYmouZ2V0RnVsbE5hbWUoKSk7XG4gICAgICAgICAgICAgICAgICAgIHBzLnNldFN0cmluZygzLCBvYmouZ2V0QWRkcmVzcygpKTtcbiAgICAgICAgICAgICAgICAgICAgcHMuc2V0U3RyaW5nKDQsIG9iai5nZXRQaG9uZSgpKTtcbiAgICAgICAgICAgICAgICAgICAgcHMuc2V0SW50KDUsIHVzZXJJZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIEV4ZWN1dGUgdGhlIHRyYW5zYWN0aW9uXG4gICAgICAgIERiT3BlcmF0aW9ucy5leGVjdXRlVHJhbnNhY3Rpb24ob3BlcmF0aW9ucywgXCLEkMSDbmcga8O9IHRow6BuaCBjw7RuZyFcIik7XG4gICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgdm9pZCB1cGRhdGUoU3Vic2NyaWJlciBvYmopIHtcbiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpOyAvLyBHZW5lcmF0ZWQgZnJvbSBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ29kZS9HZW5lcmF0ZWRNZXRob2RCb2R5XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyB2b2lkIGRlbGV0ZShpbnQgaWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpOyAvLyBHZW5lcmF0ZWQgZnJvbSBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ29kZS9HZW5lcmF0ZWRNZXRob2RCb2R5XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBTdWJzY3JpYmVyIGdldEJ5SWQoaW50IGlkKSB7XG4gICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbihcIk5vdCBzdXBwb3J0ZWQgeWV0LlwiKTsgLy8gR2VuZXJhdGVkIGZyb20gbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NvZGUvR2VuZXJhdGVkTWV0aG9kQm9keVxuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxTdWJzY3JpYmVyPiBnZXRBbGwoKSB7XG4gICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbihcIk5vdCBzdXBwb3J0ZWQgeWV0LlwiKTsgLy8gR2VuZXJhdGVkIGZyb20gbmJmczovL25iaG9zdC9TeXN0ZW1GaWxlU3lzdGVtL1RlbXBsYXRlcy9DbGFzc2VzL0NvZGUvR2VuZXJhdGVkTWV0aG9kQm9keVxuICAgIH1cblxuXG59XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvY29tL3N0b3JlL2FwcC9wZXRzdG9yZS9EQU8vUGV0REFPLmphdmFcbi4uLlxuXG4gICAgLy8gdGltIGtpZW0gdGhlbyB0ZW4sIGxvYWksIGdpb25nXG4gICAgcHVibGljIEFycmF5TGlzdDxQZXQ+IHNlYXJjaFBldHMoU3RyaW5nIHNlYXJjaFRleHQsIGludCBsaW1pdCkge1xuICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgICAgICBQcmVwYXJlZFN0YXRlbWVudCBzdG10ID0gbnVsbDtcbiAgICAgICAgUmVzdWx0U2V0IHJzID0gbnVsbDtcbiAgICAgICAgQXJyYXlMaXN0PFBldD4gcGV0TGlzdCA9IG5ldyBBcnJheUxpc3Q8PigpO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25uID0gRGF0YWJhc2VVdGlsLmdldENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgIFN0cmluZyBzcWwgPSBcIlNFTEVDVCAqIEZST00gUGV0cyBXSEVSRSBMT1dFUihuYW1lKSBMSUtFID8gTElNSVQgP1wiO1xuXG4gICAgICAgICAgICBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHNxbCk7XG4gICAgICAgICAgICBTdHJpbmcgc2VhcmNoUGF0dGVybiA9IFwiJVwiICsgc2VhcmNoVGV4dC50b0xvd2VyQ2FzZSgpICsgXCIlXCI7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygxLCBzZWFyY2hQYXR0ZXJuKTtcbiAgICAgICAgICAgIHN0bXQuc2V0SW50KDIsIGxpbWl0KTtcblxuICAgICAgICAgICAgcnMgPSBzdG10LmV4ZWN1dGVRdWVyeSgpO1xuXG4gICAgICAgICAgICB3aGlsZSAocnMubmV4dCgpKSB7XG4gICAgICAgICAgICAgICAgcGV0TGlzdC5hZGQoUGV0TWFwcGVyLmZyb21SZXN1dFNldChycykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHBldExpc3Q7XG4gICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBEYXRhYmFzZVV0aWwuY2xvc2VSZXNvdXJjZXMocnMsIHN0bXQsIGNvbm4pO1xuICAgICAgICB9XG4gLi4uIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiYmFmMmU1NmUtNzczMi00MzcyLTk2ODItZTM1N2NiNGU0YzgzO3Rvb2x1XzAxVzM1eFZoaDRnMndzTVhyd3NIQUI5SiI6eyJyZXF1ZXN0SWQiOiJiYWYyZTU2ZS03NzMyLTQzNzItOTY4Mi1lMzU3Y2I0ZTRjODMiLCJ0b29sVXNlSWQiOiJ0b29sdV8wMVczNXhWaGg0ZzJ3c01YcndzSEFCOUoiLCJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJIZXJlJ3MgdGhlIHJlc3VsdCBvZiBydW5uaW5nIGBjYXQgLW5gIG9uIHNyYy9EQU8vVXNlckRBTy5qYXZhOlxuICAgICAxXHQvKlxuICAgICAyXHQgKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0xpY2Vuc2VzL2xpY2Vuc2UtZGVmYXVsdC50eHQgdG8gY2hhbmdlIHRoaXMgbGljZW5zZVxuICAgICAzXHQgKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ2xhc3MuamF2YSB0byBlZGl0IHRoaXMgdGVtcGxhdGVcbiAgICAgNFx0ICovXG4gICAgIDVcdHBhY2thZ2UgREFPO1xuICAgICA2XHRcbiAgICAgN1x0aW1wb3J0IE1vZGVsLlVzZXI7XG4gICAgIDhcdGltcG9ydCBqYXZhLnV0aWwuTGlzdDtcbiAgICAgOVx0aW1wb3J0IGphdmEuc3FsLlByZXBhcmVkU3RhdGVtZW50O1xuICAgIDEwXHRpbXBvcnQgamF2YS5zcWwuVGltZXN0YW1wO1xuICAgIDExXHRpbXBvcnQgREFPLkRiT3BlcmF0aW9ucy5TcWxPcGVyYXRpb247XG4gICAgMTJcdGltcG9ydCBqYXZhLnNxbC5SZXN1bHRTZXQ7XG4gICAgMTNcdC8qKlxuICAgIDE0XHQgKlxuICAgIDE1XHQgKiBAYXV0aG9yIE5nb2MgVGhhb1xuICAgIDE2XHQgKi9cbiAgICAxN1x0cHVibGljIGNsYXNzIFVzZXJEQU97XG4gICAgMThcdFxuICAgIDE5XHQgICAgcHVibGljIHN0YXRpYyB2b2lkIGluc2VydChmaW5hbCBVc2VyIG9iaikge1xuICAgIDIwXHQgICAgICAgIGZpbmFsIGludCB1c2VySWQgPSBEYk9wZXJhdGlvbnMuZ2V0TmV4dElkKFwiVVNFUlwiLCBcInVzZXJfaWRcIik7XG4gICAgMjFcdCAgICAgICAgXG4gICAgMjJcdCAgICAgICAgb2JqLnNldFVzZXJfaWQodXNlcklkKTtcbiAgICAyM1x0ICAgICAgICBcbiAgICAyNFx0ICAgICAgICBTcWxPcGVyYXRpb25bXSBvcGVyYXRpb25zID0gbmV3IFNxbE9wZXJhdGlvbltdIHtcbiAgICAyNVx0ICAgICAgICAgICAgbmV3IFNxbE9wZXJhdGlvbigpIHtcbiAgICAyNlx0ICAgICAgICAgICAgICAgIEBPdmVycmlkZVxuICAgIDI3XHQgICAgICAgICAgICAgICAgcHVibGljIFN0cmluZyBnZXRTcWwoKSB7XG4gICAgMjhcdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiSU5TRVJUIElOVE8gVVNFUih1c2VyX2lkLCB1c2VybmFtZSwgcGFzc3dvcmQsIHJvbGUsIGNyZWF0ZWRfYXQpIFZBTFVFUyAoPywgPywgPywgPywgPylcIjtcbiAgICAyOVx0ICAgICAgICAgICAgICAgIH1cbiAgICAzMFx0XG4gICAgMzFcdCAgICAgICAgICAgICAgICBAT3ZlcnJpZGVcbiAgICAzMlx0ICAgICAgICAgICAgICAgIHB1YmxpYyB2b2lkIHNldFBhcmFtZXRlcnMoUHJlcGFyZWRTdGF0ZW1lbnQgcHMpIHRocm93cyBFeGNlcHRpb24ge1xuICAgIDMzXHQgICAgICAgICAgICAgICAgICAgIHBzLnNldEludCgxLCB1c2VySWQpO1xuICAgIDM0XHQgICAgICAgICAgICAgICAgICAgIHBzLnNldFN0cmluZygyLCBvYmouZ2V0VXNlcm5hbWUoKSk7XG4gICAgMzVcdCAgICAgICAgICAgICAgICAgICAgcHMuc2V0U3RyaW5nKDMsIG9iai5nZXRQYXNzd29yZCgpKTtcbiAgICAzNlx0ICAgICAgICAgICAgICAgICAgICBwcy5zZXRTdHJpbmcoNCwgb2JqLmdldFJvbGUoKSk7XG4gICAgMzdcdCAgICAgICAgICAgICAgICAgICAgcHMuc2V0VGltZXN0YW1wKDUsIFRpbWVzdGFtcC52YWx1ZU9mKG9iai5nZXRDcmVhdGVfYXQoKSkpO1xuICAgIDM4XHQgICAgICAgICAgICAgICAgfVxuICAgIDM5XHQgICAgICAgICAgICB9XG4gICAgNDBcdCAgICAgICAgfTtcbiAgICA0MVx0ICAgICAgICBcbiAgICA0Mlx0ICAgICAgICBEYk9wZXJhdGlvbnMuZXhlY3V0ZVRyYW5zYWN0aW9uKG9wZXJhdGlvbnMsIFwiVGjDqm0gdMOgaSBraG/huqNuIHRow6BuaCBjw7RuZyFcIik7XG4gICAgNDNcdCAgICB9XG4gICAgNDRcdCAgICBcbiAgICA0NVx0ICAgIHB1YmxpYyBzdGF0aWMgYm9vbGVhbiBsb2dpbihmaW5hbCBTdHJpbmcgdXNlck5hbWUsIGZpbmFsIFN0cmluZyBwYXNzd29yZCkge1xuICAgIDQ2XHQgICAgICAgIFVzZXIgdXNlciA9IG51bGw7XG4gICAgNDdcdCAgICAgICAgYm9vbGVhbiBpc1ZhbGlkID0gZmFsc2U7XG4gICAgNDhcdCAgICAgICAgdHJ5IHtcbiAgICA0OVx0ICAgICAgICAgICAgUmVzdWx0U2V0IHJzID0gRGJPcGVyYXRpb25zLmdldERhdGEoXCJTRUxFQ1QgKiBGUk9NIFVTRVIgV0hFUkUgdXNlcm5hbWUgPSAnXCIgKyB1c2VyTmFtZSArIFwiJyBhbmQgcGFzc3dvcmQgPSAnXCIgKyBwYXNzd29yZCArXCInXCIpO1xuICAgIDUwXHQgICAgICAgICAgICB3aGlsZSAocnMubmV4dCgpKSB7XG4gICAgNTFcdCAgICAgICAgICAgICAgICBib29sZWFuIGlzQWN0aXZlID0gcnMuZ2V0Qm9vbGVhbihcImlzQWN0aXZlXCIpO1xuICAgIDUyXHQgICAgICAgICAgICAgICAgaWYgKGlzQWN0aXZlKSB7XG4gICAgNTNcdCAgICAgICAgICAgICAgICAgICAgaXNWYWxpZCA9IHRydWU7XG4gICAgNTRcdCAgICAgICAgICAgICAgICB9XG4gICAgNTVcdCAgICAgICAgICAgIH1cbiAgICA1Nlx0ICAgICAgICAgICAgXG4gICAgNTdcdCAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGV4KSB7XG4gICAgNThcdCAgICAgICAgICAgIGV4LnByaW50U3RhY2tUcmFjZSgpO1xuICAgIDU5XHQgICAgICAgIH0gXG4gICAgNjBcdFxuICAgIDYxXHQgICAgICAgIHJldHVybiBpc1ZhbGlkO1xuICAgIDYyXHQgICAgfVxuICAgIDYzXHRcbiAgICA2NFx0ICAgIHB1YmxpYyBzdGF0aWMgdm9pZCB1cGRhdGUoVXNlciBvYmopIHtcbiAgICA2NVx0ICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oXCJOb3Qgc3VwcG9ydGVkIHlldC5cIik7XG4gICAgNjZcdCAgICB9XG4gICAgNjdcdFxuICAgIDY4XHQgICAgcHVibGljIHN0YXRpYyB2b2lkIGRlbGV0ZShpbnQgaWQpIHtcbiAgICA2OVx0ICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oXCJOb3Qgc3VwcG9ydGVkIHlldC5cIik7XG4gICAgNzBcdCAgICB9XG4gICAgNzFcdFxuICAgIDcyXHQgICAgcHVibGljIHN0YXRpYyBVc2VyIGdldEJ5SWQoaW50IGlkKSB7XG4gICAgNzNcdCAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpO1xuICAgIDc0XHQgICAgfVxuICAgIDc1XHRcbiAgICA3Nlx0ICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxVc2VyPiBnZXRBbGwoKSB7XG4gICAgNzdcdCAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTm90IHN1cHBvcnRlZCB5ZXQuXCIpO1xuICAgIDc4XHQgICAgfVxuICAgIDc5XHQgICAgXG4gICAgODBcdH1cbiAgICA4MVx0XG5Ub3RhbCBsaW5lcyBpbiBmaWxlOiA4MVxuIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiNWVmODZiMGEtMzU5Ni00YTZlLThhZTUtZTMyYTU5MzdiYjRjO3Rvb2x1XzAxNlVtaG5WNjk4cWhiSjgzNTlQYXI2eSI6eyJyZXF1ZXN0SWQiOiI1ZWY4NmIwYS0zNTk2LTRhNmUtOGFlNS1lMzJhNTkzN2JiNGMiLCJ0b29sVXNlSWQiOiJ0b29sdV8wMTZVbWhuVjY5OHFoYko4MzU5UGFyNnkiLCJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJIZXJlJ3MgdGhlIHJlc3VsdCBvZiBydW5uaW5nIGBjYXQgLW5gIG9uIHNyYy9EQU8vRGJPcGVyYXRpb25zLmphdmE6XG4gICAgIDFcdHBhY2thZ2UgREFPO1xuICAgICAyXHRcbiAgICAgM1x0aW1wb3J0IGphdmEuc3FsLkNvbm5lY3Rpb247XG4gICAgIDRcdGltcG9ydCBqYXZhLnNxbC5QcmVwYXJlZFN0YXRlbWVudDtcbiAgICAgNVx0aW1wb3J0IGphdmEuc3FsLlJlc3VsdFNldDtcbiAgICAgNlx0aW1wb3J0IGphdmEuc3FsLlN0YXRlbWVudDtcbiAgICAgN1x0aW1wb3J0IGphdmF4LnN3aW5nLkpPcHRpb25QYW5lO1xuICAgICA4XHRcbiAgICAgOVx0cHVibGljIGNsYXNzIERiT3BlcmF0aW9ucyB7XG4gICAgMTBcdCAgICBwdWJsaWMgc3RhdGljIHZvaWQgc2V0RGF0YU9yRGVsZXRlKFN0cmluZyBxdWVyeSwgU3RyaW5nIG1zZykge1xuICAgIDExXHQgICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgMTJcdCAgICAgICAgU3RhdGVtZW50IHN0ID0gbnVsbDtcbiAgICAxM1x0ICAgICAgICB0cnkge1xuICAgIDE0XHQgICAgICAgICAgICBjb25uID0gQ29ubmVjdGlvblByb3ZpZGVyLmdldENvbm4oKTtcbiAgICAxNVx0ICAgICAgICAgICAgc3QgPSBjb25uLmNyZWF0ZVN0YXRlbWVudCgpO1xuICAgIDE2XHQgICAgICAgICAgICBzdC5leGVjdXRlVXBkYXRlKHF1ZXJ5KTtcbiAgICAxN1x0XG4gICAgMThcdCAgICAgICAgICAgIGlmKCFtc2cuZXF1YWxzKFwiXCIpKSB7XG4gICAgMTlcdCAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBtc2csIFwiTWVzc2FnZVwiLCBKT3B0aW9uUGFuZS5JTkZPUk1BVElPTl9NRVNTQUdFKTtcbiAgICAyMFx0ICAgICAgICAgICAgfVxuICAgIDIxXHQgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBleCkge1xuICAgIDIyXHQgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBleCwgXCJNZXNzYWdlXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgIDIzXHQgICAgICAgIH0gZmluYWxseSB7XG4gICAgMjRcdCAgICAgICAgICAgIHRyeSB7XG4gICAgMjVcdCAgICAgICAgICAgICAgICBpZiAoc3QgIT0gbnVsbCkgc3QuY2xvc2UoKTtcbiAgICAyNlx0ICAgICAgICAgICAgICAgIGlmIChjb25uICE9IG51bGwpIGNvbm4uY2xvc2UoKTtcbiAgICAyN1x0ICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICAyOFx0ICAgICAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgMjlcdCAgICAgICAgICAgIH1cbiAgICAzMFx0ICAgICAgICB9XG4gICAgMzFcdCAgICB9XG4gICAgMzJcdCAgICBcbiAgICAzM1x0ICAgIHB1YmxpYyBzdGF0aWMgUmVzdWx0U2V0IGdldERhdGEoU3RyaW5nIHF1ZXJ5KXtcbiAgICAzNFx0ICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgIDM1XHQgICAgICAgIFN0YXRlbWVudCBzdCA9IG51bGw7XG4gICAgMzZcdCAgICAgICAgUmVzdWx0U2V0IHJzID0gbnVsbDtcbiAgICAzN1x0ICAgICAgICBcbiAgICAzOFx0ICAgICAgICB0cnl7XG4gICAgMzlcdCAgICAgICAgICAgIGNvbm4gPSBDb25uZWN0aW9uUHJvdmlkZXIuZ2V0Q29ubigpO1xuICAgIDQwXHQgICAgICAgICAgICBzdCA9IGNvbm4uY3JlYXRlU3RhdGVtZW50KCk7XG4gICAgNDFcdCAgICAgICAgICAgIHJzID0gc3QuZXhlY3V0ZVF1ZXJ5KHF1ZXJ5KTtcbiAgICA0Mlx0ICAgICAgICAgICAgXG4gICAgNDNcdCAgICAgICAgICAgIHJldHVybiBycztcbiAgICA0NFx0ICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZXgpe1xuICAgIDQ1XHQgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBleCwgXCJNZXNzYWdlXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgIDQ2XHQgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICA0N1x0ICAgICAgICB9IFxuICAgIDQ4XHQgICAgfVxuICAgIDQ5XHRcbiAgICA1MFx0ICAgIHB1YmxpYyBzdGF0aWMgaW50IGdldE5leHRJZChTdHJpbmcgdGFibGVOYW1lLCBTdHJpbmcgaWRDb2x1bW5OYW1lKSB7XG4gICAgNTFcdCAgICAgICAgaW50IG5leHRJZCA9IDE7XG4gICAgNTJcdCAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcbiAgICA1M1x0ICAgICAgICBTdGF0ZW1lbnQgc3RtdCA9IG51bGw7XG4gICAgNTRcdCAgICAgICAgUmVzdWx0U2V0IHJzID0gbnVsbDtcbiAgICA1NVx0XG4gICAgNTZcdCAgICAgICAgdHJ5IHtcbiAgICA1N1x0ICAgICAgICAgICAgY29ubiA9IENvbm5lY3Rpb25Qcm92aWRlci5nZXRDb25uKCk7XG4gICAgNThcdCAgICAgICAgICAgIHN0bXQgPSBjb25uLmNyZWF0ZVN0YXRlbWVudCgpO1xuICAgIDU5XHQgICAgICAgICAgICBTdHJpbmcgcXVlcnkgPSBcIlNFTEVDVCBNQVgoXCIgKyBpZENvbHVtbk5hbWUgKyBcIikgQVMgbWF4X2lkIEZST00gXCIgKyB0YWJsZU5hbWU7XG4gICAgNjBcdCAgICAgICAgICAgIHJzID0gc3RtdC5leGVjdXRlUXVlcnkocXVlcnkpO1xuICAgIDYxXHRcbiAgICA2Mlx0ICAgICAgICAgICAgaWYgKHJzLm5leHQoKSkge1xuICAgIDYzXHQgICAgICAgICAgICAgICAgaW50IG1heElkID0gcnMuZ2V0SW50KFwibWF4X2lkXCIpO1xuICAgIDY0XHQgICAgICAgICAgICAgICAgbmV4dElkID0gbWF4SWQgKyAxO1xuICAgIDY1XHQgICAgICAgICAgICB9XG4gICAgNjZcdCAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICA2N1x0ICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgZSwgXCJFcnJvclwiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgICA2OFx0ICAgICAgICB9IGZpbmFsbHkge1xuICAgIDY5XHQgICAgICAgICAgICB0cnkge1xuICAgIDcwXHQgICAgICAgICAgICAgICAgaWYgKHJzICE9IG51bGwpIHJzLmNsb3NlKCk7XG4gICAgNzFcdCAgICAgICAgICAgICAgICBpZiAoc3RtdCAhPSBudWxsKSBzdG10LmNsb3NlKCk7XG4gICAgNzJcdCAgICAgICAgICAgICAgICBpZiAoY29ubiAhPSBudWxsKSBjb25uLmNsb3NlKCk7XG4gICAgNzNcdCAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAgNzRcdCAgICAgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgIDc1XHQgICAgICAgICAgICB9XG4gICAgNzZcdCAgICAgICAgfVxuICAgIDc3XHRcbiAgICA3OFx0ICAgICAgICByZXR1cm4gbmV4dElkO1xuICAgIDc5XHQgICAgfVxuICAgIDgwXHRcbiAgICA4MVx0ICAgIHB1YmxpYyBzdGF0aWMgYm9vbGVhbiBleGVjdXRlVHJhbnNhY3Rpb24oU3FsT3BlcmF0aW9uW10gb3BlcmF0aW9ucywgU3RyaW5nIHN1Y2Nlc3NNc2cpIHtcbiAgICA4Mlx0ICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgIDgzXHQgICAgICAgIGJvb2xlYW4gc3VjY2VzcyA9IGZhbHNlO1xuICAgIDg0XHRcbiAgICA4NVx0ICAgICAgICB0cnkge1xuICAgIDg2XHQgICAgICAgICAgICBjb25uID0gQ29ubmVjdGlvblByb3ZpZGVyLmdldENvbm4oKTtcbiAgICA4N1x0ICAgICAgICAgICAgY29ubi5zZXRBdXRvQ29tbWl0KGZhbHNlKTtcbiAgICA4OFx0XG4gICAgODlcdCAgICAgICAgICAgIGZvciAoU3FsT3BlcmF0aW9uIG9wZXJhdGlvbiA6IG9wZXJhdGlvbnMpIHtcbiAgICA5MFx0ICAgICAgICAgICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHBzID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KG9wZXJhdGlvbi5nZXRTcWwoKSk7XG4gICAgOTFcdCAgICAgICAgICAgICAgICBvcGVyYXRpb24uc2V0UGFyYW1ldGVycyhwcyk7XG4gICAgOTJcdCAgICAgICAgICAgICAgICBwcy5leGVjdXRlVXBkYXRlKCk7XG4gICAgOTNcdCAgICAgICAgICAgICAgICBwcy5jbG9zZSgpO1xuICAgIDk0XHQgICAgICAgICAgICB9XG4gICAgOTVcdFxuICAgIDk2XHQgICAgICAgICAgICBjb25uLmNvbW1pdCgpO1xuICAgIDk3XHQgICAgICAgICAgICBzdWNjZXNzID0gdHJ1ZTtcbiAgICA5OFx0XG4gICAgOTlcdCAgICAgICAgICAgIGlmIChzdWNjZXNzTXNnICE9IG51bGwgJiYgIXN1Y2Nlc3NNc2cuaXNFbXB0eSgpKSB7XG4gICAxMDBcdCAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBzdWNjZXNzTXNnLCBcIlRow6BuaCBjw7RuZ1wiLCBKT3B0aW9uUGFuZS5JTkZPUk1BVElPTl9NRVNTQUdFKTtcbiAgIDEwMVx0ICAgICAgICAgICAgfVxuICAgMTAyXHQgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAxMDNcdCAgICAgICAgICAgIHRyeSB7XG4gICAxMDRcdCAgICAgICAgICAgICAgICBpZiAoY29ubiAhPSBudWxsKSBjb25uLnJvbGxiYWNrKCk7XG4gICAxMDVcdCAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiByb2xsYmFja0V4KSB7XG4gICAxMDZcdCAgICAgICAgICAgICAgICByb2xsYmFja0V4LnByaW50U3RhY2tUcmFjZSgpO1xuICAgMTA3XHQgICAgICAgICAgICB9XG4gICAxMDhcdFxuICAgMTA5XHQgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcIkVycm9yOiBcIiArIGUuZ2V0TWVzc2FnZSgpLCBcIkzhu5dpXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgMTEwXHQgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgMTExXHQgICAgICAgIH0gZmluYWxseSB7XG4gICAxMTJcdCAgICAgICAgICAgIHRyeSB7XG4gICAxMTNcdCAgICAgICAgICAgICAgICBpZiAoY29ubiAhPSBudWxsKSB7XG4gICAxMTRcdCAgICAgICAgICAgICAgICAgICAgY29ubi5zZXRBdXRvQ29tbWl0KHRydWUpO1xuICAgMTE1XHQgICAgICAgICAgICAgICAgICAgIGNvbm4uY2xvc2UoKTtcbiAgIDExNlx0ICAgICAgICAgICAgICAgIH1cbiAgIDExN1x0ICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgIDExOFx0ICAgICAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAxMTlcdCAgICAgICAgICAgIH1cbiAgIDEyMFx0ICAgICAgICB9XG4gICAxMjFcdFxuICAgMTIyXHQgICAgICAgIHJldHVybiBzdWNjZXNzO1xuICAgMTIzXHQgICAgfVxuICAgMTI0XHRcbiAgIDEyNVx0ICAgIHB1YmxpYyBpbnRlcmZhY2UgU3FsT3BlcmF0aW9uIHtcbiAgIDEyNlx0ICAgICAgICBTdHJpbmcgZ2V0U3FsKCk7XG4gICAxMjdcdCAgICAgICAgdm9pZCBzZXRQYXJhbWV0ZXJzKFByZXBhcmVkU3RhdGVtZW50IHBzKSB0aHJvd3MgRXhjZXB0aW9uO1xuICAgMTI4XHQgICAgfVxuICAgMTI5XHR9XG4gICAxMzBcdFxuVG90YWwgbGluZXMgaW4gZmlsZTogMTMwXG4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCIxMTRkNDY3Yy00ZDZhLTQwNDAtODZkNC1iZmEyYTY0ZTJmNzY7dG9vbHVfMDFDSDNXcEpjMmdmQTR3N0hWbUtSdnRLIjp7InJlcXVlc3RJZCI6IjExNGQ0NjdjLTRkNmEtNDA0MC04NmQ0LWJmYTJhNjRlMmY3NiIsInRvb2xVc2VJZCI6InRvb2x1XzAxQ0gzV3BKYzJnZkE0dzdIVm1LUnZ0SyIsInBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IkhlcmUncyB0aGUgcmVzdWx0IG9mIHJ1bm5pbmcgYGNhdCAtbmAgb24gc3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vU2Vzc2lvbi9Vc2VyU2Vzc2lvbi5qYXZhOlxuICAgICAxXHQvKlxuICAgICAyXHQgKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0xpY2Vuc2VzL2xpY2Vuc2UtZGVmYXVsdC50eHQgdG8gY2hhbmdlIHRoaXMgbGljZW5zZVxuICAgICAzXHQgKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0NsYXNzZXMvQ2xhc3MuamF2YSB0byBlZGl0IHRoaXMgdGVtcGxhdGVcbiAgICAgNFx0ICovXG4gICAgIDVcdHBhY2thZ2UgaW50ZXJuZXQubWFuZ2VtZW50LnN5c3RlbS5TZXNzaW9uO1xuICAgICA2XHRcbiAgICAgN1x0aW1wb3J0IE1vZGVsLlVzZXI7XG4gICAgIDhcdFxuICAgICA5XHQvKipcbiAgICAxMFx0ICpcbiAgICAxMVx0ICogQGF1dGhvciBOZ29jIFRoYW9cbiAgICAxMlx0ICovXG4gICAgMTNcdHB1YmxpYyBjbGFzcyBVc2VyU2Vzc2lvbiB7XG4gICAgMTRcdCAgICBwdWJsaWMgc3RhdGljIFVzZXIgY3VycmVudFVzZXI7XG4gICAgMTVcdFxuICAgIDE2XHQgICAgcHVibGljIFVzZXJTZXNzaW9uKCkge1xuICAgIDE3XHQgICAgfVxuICAgIDE4XHRcbiAgICAxOVx0ICAgIHB1YmxpYyBzdGF0aWMgVXNlciBnZXRDdXJyZW50VXNlcigpIHtcbiAgICAyMFx0ICAgICAgICByZXR1cm4gY3VycmVudFVzZXI7XG4gICAgMjFcdCAgICB9XG4gICAgMjJcdFxuICAgIDIzXHQgICAgcHVibGljIHN0YXRpYyB2b2lkIHNldEN1cnJlbnRVc2VyKFVzZXIgY3VycmVudFVzZXIpIHtcbiAgICAyNFx0ICAgICAgICBVc2VyU2Vzc2lvbi5jdXJyZW50VXNlciA9IGN1cnJlbnRVc2VyO1xuICAgIDI1XHQgICAgfVxuICAgIDI2XHQgICAgXG4gICAgMjdcdCAgICBcbiAgICAyOFx0fVxuICAgIDI5XHRcblRvdGFsIGxpbmVzIGluIGZpbGU6IDI5XG4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCJjNDRhOTQ5ZS1hY2VjLTQzYTgtODUwMy1hOGViMjJjYzhmODg7dG9vbHVfMDFVR2p5WW9WN1R2TTFuMXhaMmY5em9hIjp7InJlcXVlc3RJZCI6ImM0NGE5NDllLWFjZWMtNDNhOC04NTAzLWE4ZWIyMmNjOGY4OCIsInRvb2xVc2VJZCI6InRvb2x1XzAxVUdqeVlvVjdUdk0xbjF4WjJmOXpvYSIsInBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IkhlcmUncyB0aGUgcmVzdWx0IG9mIHJ1bm5pbmcgYGNhdCAtbmAgb24gc3JjL2ludGVybmV0L21hbmdlbWVudC9zeXN0ZW0vQWRtaW4vRGFzaGJvYXJkLmphdmE6XG4gICAgIDFcdC8qXG4gICAgIDJcdCAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvTGljZW5zZXMvbGljZW5zZS1kZWZhdWx0LnR4dCB0byBjaGFuZ2UgdGhpcyBsaWNlbnNlXG4gICAgIDNcdCAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvR1VJRm9ybXMvSkZyYW1lLmphdmEgdG8gZWRpdCB0aGlzIHRlbXBsYXRlXG4gICAgIDRcdCAqL1xuICAgICA1XHRwYWNrYWdlIGludGVybmV0Lm1hbmdlbWVudC5zeXN0ZW0uQWRtaW47XG4gICAgIDZcdFxuICAgICA3XHRpbXBvcnQgTW9kZWwuVXNlcjtcbiAgICAgOFx0aW1wb3J0IGludGVybmV0Lm1hbmdlbWVudC5zeXN0ZW0uU2Vzc2lvbi5Vc2VyU2Vzc2lvbjtcbiAgICAgOVx0aW1wb3J0IGphdmEudGltZS5Mb2NhbFRpbWU7XG4gICAgMTBcdGltcG9ydCBqYXZheC5zd2luZy5KT3B0aW9uUGFuZTtcbiAgICAxMVx0XG4gICAgMTJcdC8qKlxuICAgIDEzXHQgKlxuICAgIDE0XHQgKiBAYXV0aG9yIE5nb2MgVGhhb1xuICAgIDE1XHQgKi9cbiAgICAxNlx0cHVibGljIGNsYXNzIERhc2hib2FyZCBleHRlbmRzIGphdmF4LnN3aW5nLkpGcmFtZSB7XG4gICAgMTdcdFxuICAgIDE4XHQgICAgVXNlciBhZG1pbiA9IFVzZXJTZXNzaW9uLmdldEN1cnJlbnRVc2VyKCk7XG4gICAgMTlcdCAgICBcbiAgICAyMFx0ICAgIC8qKlxuICAgIDIxXHQgICAgICogQ3JlYXRlcyBuZXcgZm9ybSBEYXNoYm9hcmRcbiAgICAyMlx0ICAgICAqL1xuICAgIDIzXHQgICAgcHVibGljIERhc2hib2FyZCgpIHtcbiAgICAyNFx0ICAgICAgICBpbml0Q29tcG9uZW50cygpO1xuICAgIDI1XHQgICAgICAgIHNldHVwSGVsbG8oKTtcbiAgICAyNlx0ICAgICAgICBzZXR1cFVzZXJuYW1lKCk7XG4gICAgMjdcdCAgICB9XG4gICAgMjhcdCAgICBcbiAgICAyOVx0ICAgIHByaXZhdGUgdm9pZCBzZXR1cEhlbGxvKCkge1xuICAgIDMwXHQgICAgICAgIExvY2FsVGltZSBub3cgPSBMb2NhbFRpbWUubm93KCk7XG4gICAgMzFcdCAgICAgICAgaW50IGhvdXIgPSBub3cuZ2V0SG91cigpO1xuICAgIDMyXHQgICAgICAgIFxuICAgIDMzXHQgICAgICAgIFN0cmluZyBncmVldGluZztcbiAgICAzNFx0XG4gICAgMzVcdCAgICAgICAgaWYgKGhvdXIgPj0gNSAmJiBob3VyIDwgMTEpIHtcbiAgICAzNlx0ICAgICAgICAgICAgZ3JlZXRpbmcgPSBcIkNow6BvIGJ14buVaSBzw6FuZyxcIjtcbiAgICAzN1x0ICAgICAgICB9IGVsc2UgaWYgKGhvdXIgPj0gMTEgJiYgaG91ciA8IDE1KSB7XG4gICAgMzhcdCAgICAgICAgICAgIGdyZWV0aW5nID0gXCJDaMOgbyBideG7lWkgdHLGsGEsXCI7XG4gICAgMzlcdCAgICAgICAgfSBlbHNlIGlmIChob3VyID49IDE1ICYmIGhvdXIgPCAxNykge1xuICAgIDQwXHQgICAgICAgICAgICBncmVldGluZyA9IFwiQ2jDoG8gYnXhu5VpIGNoaeG7gXUsXCI7XG4gICAgNDFcdCAgICAgICAgfSBlbHNlIHtcbiAgICA0Mlx0ICAgICAgICAgICAgZ3JlZXRpbmcgPSBcIkNow6BvIGJ14buVaSB04buRaSxcIjtcbiAgICA0M1x0ICAgICAgICB9XG4gICAgNDRcdCAgICAgICAgXG4gICAgNDVcdCAgICAgICAgbGJIZWxsby5zZXRUZXh0KGdyZWV0aW5nKTtcbiAgICA0Nlx0ICAgIH1cbiAgICA0N1x0ICAgIFxuICAgIDQ4XHQgICAgcHJpdmF0ZSB2b2lkIHNldHVwVXNlcm5hbWUoKSB7XG4gICAgNDlcdCAgICAgICAgbGJVc2VyTmFtZS5zZXRUZXh0KGFkbWluLmdldFVzZXJuYW1lKCkpO1xuICAgIDUwXHQgICAgfVxuVG90YWwgbGluZXMgaW4gZmlsZTogMjk2XG4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCI3YTRhOWY0ZC05ZWFjLTQ4MWQtYmU2Yi1hMzE1YjQ5NzFlNWI7dG9vbHVfMDEyaFBkQkN6TXkxb1d2UTVLWUhMdlJUIjp7InJlcXVlc3RJZCI6IjdhNGE5ZjRkLTllYWMtNDgxZC1iZTZiLWEzMTViNDk3MWU1YiIsInRvb2xVc2VJZCI6InRvb2x1XzAxMmhQZEJDek15MW9XdlE1S1lITHZSVCIsInBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IlN1Y2Nlc3NmdWxseSBlZGl0ZWQgdGhlIGZpbGUgc3JjL0RBTy9Vc2VyREFPLmphdmEuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlIGZvciBlbnRyeSB3aXRoIGluZGV4IFswXTpcblJlcGxhY2VtZW50IHN1Y2Nlc3NmdWwuXG5FZGl0ZWQgc2VjdGlvbiBhZnRlciBJREUgYXV0by1mb3JtYXR0aW5nIHdhcyBhcHBsaWVkOlxuICAgIDQxXHRcbiAgICA0Mlx0ICAgICAgICBEYk9wZXJhdGlvbnMuZXhlY3V0ZVRyYW5zYWN0aW9uKG9wZXJhdGlvbnMsIFwiVGjDqm0gdMOgaSBraG/huqNuIHRow6BuaCBjw7RuZyFcIik7XG4gICAgNDNcdCAgICB9XG4gICAgNDRcdFxuICAgIDQ1XHQgICAgcHVibGljIHN0YXRpYyBVc2VyIGxvZ2luKGZpbmFsIFN0cmluZyB1c2VyTmFtZSwgZmluYWwgU3RyaW5nIHBhc3N3b3JkKSB7XG4gICAgNDZcdCAgICAgICAgVXNlciB1c2VyID0gbnVsbDtcbiAgICA0N1x0ICAgICAgICB0cnkge1xuICAgIDQ4XHQgICAgICAgICAgICBSZXN1bHRTZXQgcnMgPSBEYk9wZXJhdGlvbnMuZ2V0RGF0YShcIlNFTEVDVCAqIEZST00gVVNFUiBXSEVSRSB1c2VybmFtZSA9ICdcIiArIHVzZXJOYW1lICsgXCInIGFuZCBwYXNzd29yZCA9ICdcIiArIHBhc3N3b3JkICtcIidcIik7XG4gICAgNDlcdCAgICAgICAgICAgIGlmIChycy5uZXh0KCkpIHtcbiAgICA1MFx0ICAgICAgICAgICAgICAgIGJvb2xlYW4gaXNBY3RpdmUgPSBycy5nZXRCb29sZWFuKFwiaXNBY3RpdmVcIik7XG4gICAgNTFcdCAgICAgICAgICAgICAgICBpZiAoaXNBY3RpdmUpIHtcbiAgICA1Mlx0ICAgICAgICAgICAgICAgICAgICB1c2VyID0gbmV3IFVzZXIoKTtcbiAgICA1M1x0ICAgICAgICAgICAgICAgICAgICB1c2VyLnNldFVzZXJfaWQocnMuZ2V0SW50KFwidXNlcl9pZFwiKSk7XG4gICAgNTRcdCAgICAgICAgICAgICAgICAgICAgdXNlci5zZXRVc2VybmFtZShycy5nZXRTdHJpbmcoXCJ1c2VybmFtZVwiKSk7XG4gICAgNTVcdCAgICAgICAgICAgICAgICAgICAgdXNlci5zZXRQYXNzd29yZChycy5nZXRTdHJpbmcoXCJwYXNzd29yZFwiKSk7XG4gICAgNTZcdCAgICAgICAgICAgICAgICAgICAgdXNlci5zZXRSb2xlKHJzLmdldFN0cmluZyhcInJvbGVcIikpO1xuICAgIDU3XHQgICAgICAgICAgICAgICAgICAgIHVzZXIuc2V0Q3JlYXRlX2F0KHJzLmdldFRpbWVzdGFtcChcImNyZWF0ZWRfYXRcIikudG9Mb2NhbERhdGVUaW1lKCkpO1xuICAgIDU4XHQgICAgICAgICAgICAgICAgICAgIHVzZXIuc2V0SXNBY3RpdmUoaXNBY3RpdmUpO1xuICAgIDU5XHQgICAgICAgICAgICAgICAgfVxuICAgIDYwXHQgICAgICAgICAgICB9XG4gICAgNjFcdCAgICAgICAgICAgIHJzLmNsb3NlKCk7XG4gICAgNjJcdCAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGV4KSB7XG4gICAgNjNcdCAgICAgICAgICAgIGV4LnByaW50U3RhY2tUcmFjZSgpO1xuICAgIDY0XHQgICAgICAgIH1cbiAgICA2NVx0XG4gICAgNjZcdCAgICAgICAgcmV0dXJuIHVzZXI7XG4gICAgNjdcdCAgICB9XG4gICAgNjhcdFxuICAgIDY5XHQgICAgcHVibGljIHN0YXRpYyB2b2lkIHVwZGF0ZShVc2VyIG9iaikge1xuICAgIDcwXHQgICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbihcIk5vdCBzdXBwb3J0ZWQgeWV0LlwiKTtcbiAgICA3MVx0ICAgIH1cblxuUmV2aWV3IHRoZSBjaGFuZ2VzIGFuZCBtYWtlIHN1cmUgdGhleSBhcmUgYXMgZXhwZWN0ZWQgKGNvcnJlY3QgaW5kZW50YXRpb24sIG5vIGR1cGxpY2F0ZSBsaW5lcywgZXRjKS5cbkVkaXQgdGhlIGZpbGUgYWdhaW4gaWYgbmVjZXNzYXJ5LlxuIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiZDM0NzFmYjUtZDk2MC00NWZjLTk5ZjEtOWQ3MzEwMTY4MzVhO3Rvb2x1XzAxTUJabXRWUXlpUXZlR1BzWG1vM05ZYSI6eyJyZXF1ZXN0SWQiOiJkMzQ3MWZiNS1kOTYwLTQ1ZmMtOTlmMS05ZDczMTAxNjgzNWEiLCJ0b29sVXNlSWQiOiJ0b29sdV8wMU1CWm10VlF5aVF2ZUdQc1htbzNOWWEiLCJwaGFzZSI6NiwicmVzdWx0Ijp7InRleHQiOiJGYWlsZWQgdG8gZWRpdCB0aGUgZmlsZSBzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9Mb2dpbi5qYXZhLiBTZWUgYmVsb3cgZm9yIGRldGFpbHMuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlIGZvciBlbnRyeSB3aXRoIGluZGV4IFswXTpcbk5vIHJlcGxhY2VtZW50IHdhcyBwZXJmb3JtZWQsIG9sZFN0ciBkaWQgbm90IGFwcGVhciB2ZXJiYXRpbSBpbiBzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9Mb2dpbi5qYXZhLlxuVGhlIGNvbnRlbnQgaW4gdGhlIHNwZWNpZmllZCByZWdpb24gaXM6XG4gICAgIDFcdC8qXG4gICAgIDJcdCAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvTGljZW5zZXMvbGljZW5zZS1kZWZhdWx0LnR4dCB0byBjaGFuZ2UgdGhpcyBsaWNlbnNlXG4gICAgIDNcdCAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvR1VJRm9ybXMvSkZyYW1lLmphdmEgdG8gZWRpdCB0aGlzIHRlbXBsYXRlXG4gICAgIDRcdCAqL1xuICAgICA1XHRwYWNrYWdlIGludGVybmV0Lm1hbmdlbWVudC5zeXN0ZW07XG4gICAgIDZcdFxuICAgICA3XHRpbXBvcnQgREFPLlVzZXJEQU87XG4gICAgIDhcdGltcG9ydCBNb2RlbC5Vc2VyO1xuICAgICA5XHRpbXBvcnQgaW50ZXJuZXQubWFuZ2VtZW50LnN5c3RlbS5TZXNzaW9uLlVzZXJTZXNzaW9uO1xuICAgIDEwXHRpbXBvcnQgamF2YXguc3dpbmcuSk9wdGlvblBhbmU7XG4gICAgMTFcdFxuICAgIDEyXHQvKipcbiAgICAxM1x0ICpcbiAgICAxNFx0ICogQGF1dGhvciBOZ29jIFRoYW9cbiAgICAxNVx0ICovXG4gICAgMTZcdHB1YmxpYyBjbGFzcyBMb2dpbiBleHRlbmRzIGphdmF4LnN3aW5nLkpGcmFtZSB7XG4gICAgMTdcdFxuICAgIDE4XHQgICAgLyoqXG4gICAgMTlcdCAgICAgKiBDcmVhdGVzIG5ldyBmb3JtIExvZ2luXG4gICAgMjBcdCAgICAgKi9cbiAgICAyMVx0ICAgIHB1YmxpYyBMb2dpbigpIHtcblxuRGlmZiBiZXR3ZWVuIG9sZFN0ciBhbmQgdGhlIHNwZWNpZmllZCByZWdpb24gaXM6XG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4tLS0gb2xkU3RyXG4rKysgcmVnaW9uQ29udGVudFxuQEAgLTEsMTcgKzEsMTcgQEBcbi0gICAgcHJpdmF0ZSB2b2lkIGJ0bkxvZ2luQWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkxvZ2luQWN0aW9uUGVyZm9ybWVkXG4tICAgICAgICAvLyBUT0RPIGFkZCB5b3VyIGhhbmRsaW5nIGNvZGUgaGVyZTpcbi0gICAgICAgIGlmKHZhbGlkYXRlRmllbGRzKCkpIHtcbi0gICAgICAgICAgICB0cnl7XG4tICAgICAgICAgICAgICAgIFN0cmluZyB1c2VybmFtZSA9IHR4dFVzZXJOYW1lLmdldFRleHQoKS50cmltKCk7XG4tICAgICAgICAgICAgICAgIFN0cmluZyBwYXNzd29yZCA9IHR4dFBhc3N3b3JkLmdldFRleHQoKS50cmltKCk7XG4rLypcbisgKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0xpY2Vuc2VzL2xpY2Vuc2UtZGVmYXVsdC50eHQgdG8gY2hhbmdlIHRoaXMgbGljZW5zZVxuKyAqIENsaWNrIG5iZnM6Ly9uYmhvc3QvU3lzdGVtRmlsZVN5c3RlbS9UZW1wbGF0ZXMvR1VJRm9ybXMvSkZyYW1lLmphdmEgdG8gZWRpdCB0aGlzIHRlbXBsYXRlXG4rICovXG4rcGFja2FnZSBpbnRlcm5ldC5tYW5nZW1lbnQuc3lzdGVtO1xuIFxuLSAgICAgICAgICAgICAgICBVc2VyIHVzZXIgPSBudWxsO1xuLSAgICAgICAgICAgICAgICBib29sZWFuIGlzU3VjY2VzcyA9IFVzZXJEQU8ubG9naW4odXNlcm5hbWUsIHBhc3N3b3JkKTtcbitpbXBvcnQgREFPLlVzZXJEQU87XG4raW1wb3J0IE1vZGVsLlVzZXI7XG4raW1wb3J0IGludGVybmV0Lm1hbmdlbWVudC5zeXN0ZW0uU2Vzc2lvbi5Vc2VyU2Vzc2lvbjtcbitpbXBvcnQgamF2YXguc3dpbmcuSk9wdGlvblBhbmU7XG4gXG4tICAgICAgICAgICAgICAgIGlmKGlzU3VjY2Vzcykge1xuLSAgICAgICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2codGhpcywgXCLEkMSDbmcgbmjhuq1wIHRow6BuaCBjw7RuZyFcIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5JTkZPUk1BVElPTl9NRVNTQUdFKTtcbi0vLyAgICAgICAgICAgICAgICAgICAgbmV3IE1haW5GcmFtZSgpLnNldFZpc2libGUodHJ1ZSk7XG4tICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3Bvc2UoKTtcbi0gICAgICAgICAgICAgICAgfSBlbHNlIHtcbi0gICAgICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKHRoaXMsIFwiU2FpIHTDqm4gxJHEg25nIG5o4bqtcCBob+G6t2MgbeG6rXQga2jhuql1LlwiLCBcIkzhu5dpXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuLSAgICAgICAgICAgICAgICB9XG4rLyoqXG4rICpcbisgKiBAYXV0aG9yIE5nb2MgVGhhb1xuKyAqL1xuK3B1YmxpYyBjbGFzcyBMb2dpbiBleHRlbmRzIGphdmF4LnN3aW5nLkpGcmFtZSB7XG4rXG5cblxuRml4IGZhaWxlZCBzdHJfcmVwbGFjZSBlbnRyaWVzIGFjY29yZGluZ2x5IGFuZCB0cnkgYWdhaW4uXG4iLCJpc0Vycm9yIjp0cnVlLCJyZXF1ZXN0SWQiOiIifX0sIjY1YzEzYTU5LTFjOWEtNDEyZC04ZWYwLTE1MWM5ZDhjOTQxNTt0b29sdV8wMVM0OG9oZkVnR2EyQmVvTkpZVndheUQiOnsicmVxdWVzdElkIjoiNjVjMTNhNTktMWM5YS00MTJkLThlZjAtMTUxYzlkOGM5NDE1IiwidG9vbFVzZUlkIjoidG9vbHVfMDFTNDhvaGZFZ0dhMkJlb05KWVZ3YXlEIiwicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiSGVyZSdzIHRoZSByZXN1bHQgb2YgcnVubmluZyBgY2F0IC1uYCBvbiBzcmMvaW50ZXJuZXQvbWFuZ2VtZW50L3N5c3RlbS9Mb2dpbi5qYXZhOlxuICAgICAxXHQvKlxuICAgICAyXHQgKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0xpY2Vuc2VzL2xpY2Vuc2UtZGVmYXVsdC50eHQgdG8gY2hhbmdlIHRoaXMgbGljZW5zZVxuICAgICAzXHQgKiBDbGljayBuYmZzOi8vbmJob3N0L1N5c3RlbUZpbGVTeXN0ZW0vVGVtcGxhdGVzL0dVSUZvcm1zL0pGcmFtZS5qYXZhIHRvIGVkaXQgdGhpcyB0ZW1wbGF0ZVxuICAgICA0XHQgKi9cbiAgICAgNVx0cGFja2FnZSBpbnRlcm5ldC5tYW5nZW1lbnQuc3lzdGVtO1xuICAgICA2XHRcbiAgICAgN1x0aW1wb3J0IERBTy5Vc2VyREFPO1xuICAgICA4XHRpbXBvcnQgTW9kZWwuVXNlcjtcbiAgICAgOVx0aW1wb3J0IGludGVybmV0Lm1hbmdlbWVudC5zeXN0ZW0uU2Vzc2lvbi5Vc2VyU2Vzc2lvbjtcbiAgICAxMFx0aW1wb3J0IGphdmF4LnN3aW5nLkpPcHRpb25QYW5lO1xuICAgIDExXHRcbiAgICAxMlx0LyoqXG4gICAgMTNcdCAqXG4gICAgMTRcdCAqIEBhdXRob3IgTmdvYyBUaGFvXG4gICAgMTVcdCAqL1xuICAgIDE2XHRwdWJsaWMgY2xhc3MgTG9naW4gZXh0ZW5kcyBqYXZheC5zd2luZy5KRnJhbWUge1xuICAgIDE3XHRcbiAgICAxOFx0ICAgIC8qKlxuICAgIDE5XHQgICAgICogQ3JlYXRlcyBuZXcgZm9ybSBMb2dpblxuICAgIDIwXHQgICAgICovXG4gICAgMjFcdCAgICBwdWJsaWMgTG9naW4oKSB7XG4gICAgMjJcdCAgICAgICAgaW5pdENvbXBvbmVudHMoKTtcbiAgICAyM1x0ICAgICAgICBzZXRUaXRsZShcIsSQxINuZyBrw71cIik7XG4gICAgMjRcdCAgICB9XG4gICAgMjVcdFxuICAgIDI2XHQgICAgcHVibGljIHZvaWQgY2xlYXIoKXtcbiAgICAyN1x0ICAgICAgICB0eHRVc2VyTmFtZS5zZXRUZXh0KFwiXCIpO1xuICAgIDI4XHQgICAgICAgIHR4dFBhc3N3b3JkLnNldFRleHQoXCJcIik7XG4gICAgMjlcdCAgICB9XG4gICAgMzBcdFxuICAgIDMxXHQgICAgcHVibGljIGJvb2xlYW4gdmFsaWRhdGVGaWVsZHMoKXtcbiAgICAzMlx0ICAgICAgICBTdHJpbmcgdXNlck5hbWUgPSB0eHRVc2VyTmFtZS5nZXRUZXh0KCk7XG4gICAgMzNcdCAgICAgICAgU3RyaW5nIHBhc3N3b3JkID0gdHh0UGFzc3dvcmQuZ2V0VGV4dCgpO1xuICAgIDM0XHRcbiAgICAzNVx0ICAgICAgICBpZih1c2VyTmFtZS5pc0VtcHR5KCkgfHwgcGFzc3dvcmQuaXNFbXB0eSgpKXtcbiAgICAzNlx0ICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2cobnVsbCwgXCJWdWkgbMOybmcga2jDtG5nIGLhu48gdHLhu5FuZyFcIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgICAzN1x0ICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIDM4XHQgICAgICAgIH1cbiAgICAzOVx0ICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICA0MFx0ICAgIH1cbiAgICA0MVx0XG4gICAgNDJcdCAgICAvKipcbiAgICA0M1x0ICAgICAqIFRoaXMgbWV0aG9kIGlzIGNhbGxlZCBmcm9tIHdpdGhpbiB0aGUgY29uc3RydWN0b3IgdG8gaW5pdGlhbGl6ZSB0aGUgZm9ybS5cbiAgICA0NFx0ICAgICAqIFdBUk5JTkc6IERvIE5PVCBtb2RpZnkgdGhpcyBjb2RlLiBUaGUgY29udGVudCBvZiB0aGlzIG1ldGhvZCBpcyBhbHdheXNcbiAgICA0NVx0ICAgICAqIHJlZ2VuZXJhdGVkIGJ5IHRoZSBGb3JtIEVkaXRvci5cbiAgICA0Nlx0ICAgICAqL1xuICAgIDQ3XHQgICAgQFN1cHByZXNzV2FybmluZ3MoXCJ1bmNoZWNrZWRcIilcbiAgICA0OFx0ICAgIC8vIDxlZGl0b3ItZm9sZCBkZWZhdWx0c3RhdGU9XCJjb2xsYXBzZWRcIiBkZXNjPVwiR2VuZXJhdGVkIENvZGVcIj4vL0dFTi1CRUdJTjppbml0Q29tcG9uZW50c1xuICAgIDQ5XHQgICAgcHJpdmF0ZSB2b2lkIGluaXRDb21wb25lbnRzKCkge1xuICAgIDUwXHRcbiAgICA1MVx0ICAgICAgICBqTGFiZWwxID0gbmV3IGphdmF4LnN3aW5nLkpMYWJlbCgpO1xuICAgIDUyXHQgICAgICAgIGpMYWJlbDIgPSBuZXcgamF2YXguc3dpbmcuSkxhYmVsKCk7XG4gICAgNTNcdCAgICAgICAgakxhYmVsMyA9IG5ldyBqYXZheC5zd2luZy5KTGFiZWwoKTtcbiAgICA1NFx0ICAgICAgICBqTGFiZWw0ID0gbmV3IGphdmF4LnN3aW5nLkpMYWJlbCgpO1xuICAgIDU1XHQgICAgICAgIHR4dFVzZXJOYW1lID0gbmV3IGphdmF4LnN3aW5nLkpUZXh0RmllbGQoKTtcbiAgICA1Nlx0ICAgICAgICB0eHRQYXNzd29yZCA9IG5ldyBqYXZheC5zd2luZy5KUGFzc3dvcmRGaWVsZCgpO1xuICAgIDU3XHQgICAgICAgIGpTZXBhcmF0b3IxID0gbmV3IGphdmF4LnN3aW5nLkpTZXBhcmF0b3IoKTtcbiAgICA1OFx0ICAgICAgICBqU2VwYXJhdG9yMiA9IG5ldyBqYXZheC5zd2luZy5KU2VwYXJhdG9yKCk7XG4gICAgNTlcdCAgICAgICAgYnRuTG9naW4gPSBuZXcgamF2YXguc3dpbmcuSkJ1dHRvbigpO1xuICAgIDYwXHQgICAgICAgIGJ0bkZvcmdvdFBhc3N3b3JkID0gbmV3IGphdmF4LnN3aW5nLkpCdXR0b24oKTtcbiAgICA2MVx0ICAgICAgICBidG5TaWdudXAgPSBuZXcgamF2YXguc3dpbmcuSkJ1dHRvbigpO1xuICAgIDYyXHQgICAgICAgIGpMYWJlbDUgPSBuZXcgamF2YXguc3dpbmcuSkxhYmVsKCk7XG4gICAgNjNcdCAgICAgICAgYnRuRXhpdCA9IG5ldyBqYXZheC5zd2luZy5KQnV0dG9uKCk7XG4gICAgNjRcdFxuICAgIDY1XHQgICAgICAgIHNldERlZmF1bHRDbG9zZU9wZXJhdGlvbihqYXZheC5zd2luZy5XaW5kb3dDb25zdGFudHMuRVhJVF9PTl9DTE9TRSk7XG4gICAgNjZcdFxuICAgIDY3XHQgICAgICAgIGpMYWJlbDEuc2V0Rm9udChuZXcgamF2YS5hd3QuRm9udChcIkFyaWFsXCIsIDEsIDM2KSk7IC8vIE5PSTE4TlxuICAgIDY4XHQgICAgICAgIGpMYWJlbDEuc2V0Rm9yZWdyb3VuZChqYXZheC5zd2luZy5VSU1hbmFnZXIuZ2V0RGVmYXVsdHMoKS5nZXRDb2xvcihcIkFjdGlvbnMuQmx1ZVwiKSk7XG4gICAgNjlcdCAgICAgICAgakxhYmVsMS5zZXRUZXh0KFwixJDEgk5HIE5I4bqsUFwiKTtcbiAgICA3MFx0XG4gICAgNzFcdCAgICAgICAgakxhYmVsMi5zZXRGb250KG5ldyBqYXZhLmF3dC5Gb250KFwiQXJpYWxcIiwgMiwgMTgpKTsgLy8gTk9JMThOXG4gICAgNzJcdCAgICAgICAgakxhYmVsMi5zZXRUZXh0KFwiQ2jDoG8gbeG7q25nIGLhuqFuIHF1YXkgbOG6oWkhXCIpO1xuICAgIDczXHRcbiAgICA3NFx0ICAgICAgICBqTGFiZWwzLnNldEZvbnQobmV3IGphdmEuYXd0LkZvbnQoXCJBcmlhbFwiLCAxLCAxNCkpOyAvLyBOT0kxOE5cbiAgICA3NVx0ICAgICAgICBqTGFiZWwzLnNldFRleHQoXCJUw6puIMSRxINuZyBuaOG6rXA6XCIpO1xuICAgIDc2XHRcbiAgICA3N1x0ICAgICAgICBqTGFiZWw0LnNldEZvbnQobmV3IGphdmEuYXd0LkZvbnQoXCJBcmlhbFwiLCAxLCAxNCkpOyAvLyBOT0kxOE5cbiAgICA3OFx0ICAgICAgICBqTGFiZWw0LnNldFRleHQoXCJN4bqtdCBraOG6qXU6XCIpO1xuICAgIDc5XHRcbiAgICA4MFx0ICAgICAgICB0eHRVc2VyTmFtZS5zZXRGb250KG5ldyBqYXZhLmF3dC5Gb250KFwiQXJpYWxcIiwgMCwgMTQpKTsgLy8gTk9JMThOXG4gICAgODFcdFxuICAgIDgyXHQgICAgICAgIHR4dFBhc3N3b3JkLnNldEZvbnQobmV3IGphdmEuYXd0LkZvbnQoXCJBcmlhbFwiLCAwLCAxNCkpOyAvLyBOT0kxOE5cbiAgICA4M1x0XG4gICAgODRcdCAgICAgICAgYnRuTG9naW4uc2V0Rm9udChuZXcgamF2YS5hd3QuRm9udChcIkFyaWFsXCIsIDEsIDE2KSk7IC8vIE5PSTE4TlxuICAgIDg1XHQgICAgICAgIGJ0bkxvZ2luLnNldEljb24obmV3IGphdmF4LnN3aW5nLkltYWdlSWNvbihnZXRDbGFzcygpLmdldFJlc291cmNlKFwiL0ltYWdlcy9lbnRlci5wbmdcIikpKTsgLy8gTk9JMThOXG4gICAgODZcdCAgICAgICAgYnRuTG9naW4uc2V0VGV4dChcIsSQxINuZyBuaOG6rXBcIik7XG4gICAgODdcdCAgICAgICAgYnRuTG9naW4uc2V0Q3Vyc29yKG5ldyBqYXZhLmF3dC5DdXJzb3IoamF2YS5hd3QuQ3Vyc29yLkhBTkRfQ1VSU09SKSk7XG4gICAgODhcdCAgICAgICAgYnRuTG9naW4uc2V0SG9yaXpvbnRhbEFsaWdubWVudChqYXZheC5zd2luZy5Td2luZ0NvbnN0YW50cy5MRUZUKTtcbiAgICA4OVx0ICAgICAgICBidG5Mb2dpbi5hZGRBY3Rpb25MaXN0ZW5lcihuZXcgamF2YS5hd3QuZXZlbnQuQWN0aW9uTGlzdGVuZXIoKSB7XG4gICAgOTBcdCAgICAgICAgICAgIHB1YmxpYyB2b2lkIGFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHtcbiAgICA5MVx0ICAgICAgICAgICAgICAgIGJ0bkxvZ2luQWN0aW9uUGVyZm9ybWVkKGV2dCk7XG4gICAgOTJcdCAgICAgICAgICAgIH1cbiAgICA5M1x0ICAgICAgICB9KTtcbiAgICA5NFx0XG4gICAgOTVcdCAgICAgICAgYnRuRm9yZ290UGFzc3dvcmQuc2V0Rm9udChuZXcgamF2YS5hd3QuRm9udChcIkFyaWFsXCIsIDEsIDE0KSk7IC8vIE5PSTE4TlxuICAgIDk2XHQgICAgICAgIGJ0bkZvcmdvdFBhc3N3b3JkLnNldEljb24obmV3IGphdmF4LnN3aW5nLkltYWdlSWNvbihnZXRDbGFzcygpLmdldFJlc291cmNlKFwiL0ltYWdlcy9yZXNldC1wYXNzd29yZC5wbmdcIikpKTsgLy8gTk9JMThOXG4gICAgOTdcdCAgICAgICAgYnRuRm9yZ290UGFzc3dvcmQuc2V0VGV4dChcIlF1w6puIG3huq10IGto4bqpdT9cIik7XG4gICAgOThcdCAgICAgICAgYnRuRm9yZ290UGFzc3dvcmQuc2V0Q3Vyc29yKG5ldyBqYXZhLmF3dC5DdXJzb3IoamF2YS5hd3QuQ3Vyc29yLkhBTkRfQ1VSU09SKSk7XG4gICAgOTlcdCAgICAgICAgYnRuRm9yZ290UGFzc3dvcmQuc2V0SG9yaXpvbnRhbEFsaWdubWVudChqYXZheC5zd2luZy5Td2luZ0NvbnN0YW50cy5MRUZUKTtcbiAgIDEwMFx0ICAgICAgICBidG5Gb3Jnb3RQYXNzd29yZC5hZGRBY3Rpb25MaXN0ZW5lcihuZXcgamF2YS5hd3QuZXZlbnQuQWN0aW9uTGlzdGVuZXIoKSB7XG4gICAxMDFcdCAgICAgICAgICAgIHB1YmxpYyB2b2lkIGFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHtcbiAgIDEwMlx0ICAgICAgICAgICAgICAgIGJ0bkZvcmdvdFBhc3N3b3JkQWN0aW9uUGVyZm9ybWVkKGV2dCk7XG4gICAxMDNcdCAgICAgICAgICAgIH1cbiAgIDEwNFx0ICAgICAgICB9KTtcbiAgIDEwNVx0XG4gICAxMDZcdCAgICAgICAgYnRuU2lnbnVwLnNldEZvbnQobmV3IGphdmEuYXd0LkZvbnQoXCJBcmlhbFwiLCAxLCAxNikpOyAvLyBOT0kxOE5cbiAgIDEwN1x0ICAgICAgICBidG5TaWdudXAuc2V0SWNvbihuZXcgamF2YXguc3dpbmcuSW1hZ2VJY29uKGdldENsYXNzKCkuZ2V0UmVzb3VyY2UoXCIvSW1hZ2VzL2FkZC11c2VyLnBuZ1wiKSkpOyAvLyBOT0kxOE5cbiAgIDEwOFx0ICAgICAgICBidG5TaWdudXAuc2V0VGV4dChcIsSQxINuZyBrw71cIik7XG4gICAxMDlcdCAgICAgICAgYnRuU2lnbnVwLnNldEN1cnNvcihuZXcgamF2YS5hd3QuQ3Vyc29yKGphdmEuYXd0LkN1cnNvci5IQU5EX0NVUlNPUikpO1xuICAgMTEwXHQgICAgICAgIGJ0blNpZ251cC5zZXRIb3Jpem9udGFsQWxpZ25tZW50KGphdmF4LnN3aW5nLlN3aW5nQ29uc3RhbnRzLkxFRlQpO1xuICAgMTExXHQgICAgICAgIGJ0blNpZ251cC5hZGRBY3Rpb25MaXN0ZW5lcihuZXcgamF2YS5hd3QuZXZlbnQuQWN0aW9uTGlzdGVuZXIoKSB7XG4gICAxMTJcdCAgICAgICAgICAgIHB1YmxpYyB2b2lkIGFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHtcbiAgIDExM1x0ICAgICAgICAgICAgICAgIGJ0blNpZ251cEFjdGlvblBlcmZvcm1lZChldnQpO1xuICAgMTE0XHQgICAgICAgICAgICB9XG4gICAxMTVcdCAgICAgICAgfSk7XG4gICAxMTZcdFxuICAgMTE3XHQgICAgICAgIGpMYWJlbDUuc2V0SWNvbihuZXcgamF2YXguc3dpbmcuSW1hZ2VJY29uKGdldENsYXNzKCkuZ2V0UmVzb3VyY2UoXCIvSW1hZ2VzL2JnMi5qcGdcIikpKTsgLy8gTk9JMThOXG4gICAxMThcdCAgICAgICAgakxhYmVsNS5zZXRUZXh0KFwiakxhYmVsNVwiKTtcbiAgIDExOVx0XG4gICAxMjBcdCAgICAgICAgYnRuRXhpdC5zZXRGb250KG5ldyBqYXZhLmF3dC5Gb250KFwiQXJpYWxcIiwgMSwgMTQpKTsgLy8gTk9JMThOXG4gICAxMjFcdCAgICAgICAgYnRuRXhpdC5zZXRJY29uKG5ldyBqYXZheC5zd2luZy5JbWFnZUljb24oZ2V0Q2xhc3MoKS5nZXRSZXNvdXJjZShcIi9JbWFnZXMvbG9nb3V0LnBuZ1wiKSkpOyAvLyBOT0kxOE5cbiAgIDEyMlx0ICAgICAgICBidG5FeGl0LnNldFRleHQoXCJUaG/DoXRcIik7XG4gICAxMjNcdCAgICAgICAgYnRuRXhpdC5zZXRDdXJzb3IobmV3IGphdmEuYXd0LkN1cnNvcihqYXZhLmF3dC5DdXJzb3IuSEFORF9DVVJTT1IpKTtcbiAgIDEyNFx0ICAgICAgICBidG5FeGl0LnNldEhvcml6b250YWxBbGlnbm1lbnQoamF2YXguc3dpbmcuU3dpbmdDb25zdGFudHMuTEVGVCk7XG4gICAxMjVcdCAgICAgICAgYnRuRXhpdC5hZGRBY3Rpb25MaXN0ZW5lcihuZXcgamF2YS5hd3QuZXZlbnQuQWN0aW9uTGlzdGVuZXIoKSB7XG4gICAxMjZcdCAgICAgICAgICAgIHB1YmxpYyB2b2lkIGFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHtcbiAgIDEyN1x0ICAgICAgICAgICAgICAgIGJ0bkV4aXRBY3Rpb25QZXJmb3JtZWQoZXZ0KTtcbiAgIDEyOFx0ICAgICAgICAgICAgfVxuICAgMTI5XHQgICAgICAgIH0pO1xuICAgMTMwXHRcbiAgIDEzMVx0ICAgICAgICBqYXZheC5zd2luZy5Hcm91cExheW91dCBsYXlvdXQgPSBuZXcgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQoZ2V0Q29udGVudFBhbmUoKSk7XG4gICAxMzJcdCAgICAgICAgZ2V0Q29udGVudFBhbmUoKS5zZXRMYXlvdXQobGF5b3V0KTtcbiAgIDEzM1x0ICAgICAgICBsYXlvdXQuc2V0SG9yaXpvbnRhbEdyb3VwKFxuICAgMTM0XHQgICAgICAgICAgICBsYXlvdXQuY3JlYXRlUGFyYWxsZWxHcm91cChqYXZheC5zd2luZy5Hcm91cExheW91dC5BbGlnbm1lbnQuTEVBRElORylcbiAgIDEzNVx0ICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVTZXF1ZW50aWFsR3JvdXAoKVxuICAgMTM2XHQgICAgICAgICAgICAgICAgLmFkZEdhcCg4MywgODMsIDgzKVxuICAgMTM3XHQgICAgICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVQYXJhbGxlbEdyb3VwKGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LkFsaWdubWVudC5MRUFESU5HKVxuICAgMTM4XHQgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQoakxhYmVsMSlcbiAgIDEzOVx0ICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGpMYWJlbDIpXG4gICAxNDBcdCAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChqU2VwYXJhdG9yMSwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUsIDM2OCwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUpXG4gICAxNDFcdCAgICAgICAgICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVTZXF1ZW50aWFsR3JvdXAoKVxuICAgMTQyXHQgICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGpMYWJlbDMpXG4gICAxNDNcdCAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRHYXAoMjksIDI5LCAyOSlcbiAgIDE0NFx0ICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudCh0eHRVc2VyTmFtZSwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUsIDIzMCwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUpKVxuICAgMTQ1XHQgICAgICAgICAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlU2VxdWVudGlhbEdyb3VwKClcbiAgIDE0Nlx0ICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChqTGFiZWw0KVxuICAgMTQ3XHQgICAgICAgICAgICAgICAgICAgICAgICAuYWRkR2FwKDcwLCA3MCwgNzApXG4gICAxNDhcdCAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQodHh0UGFzc3dvcmQsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFLCAyMzAsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFKSlcbiAgIDE0OVx0ICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGpTZXBhcmF0b3IyLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSwgMzY4LCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSlcbiAgIDE1MFx0ICAgICAgICAgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVNlcXVlbnRpYWxHcm91cCgpXG4gICAxNTFcdCAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlUGFyYWxsZWxHcm91cChqYXZheC5zd2luZy5Hcm91cExheW91dC5BbGlnbm1lbnQuVFJBSUxJTkcsIGZhbHNlKVxuICAgMTUyXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChidG5FeGl0LCBqYXZheC5zd2luZy5Hcm91cExheW91dC5ERUZBVUxUX1NJWkUsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LkRFRkFVTFRfU0laRSwgU2hvcnQuTUFYX1ZBTFVFKVxuICAgMTUzXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChidG5TaWdudXAsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LkRFRkFVTFRfU0laRSwgMTI4LCBTaG9ydC5NQVhfVkFMVUUpKVxuICAgMTU0XHQgICAgICAgICAgICAgICAgICAgICAgICAuYWRkR2FwKDc2LCA3NiwgNzYpXG4gICAxNTVcdCAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlUGFyYWxsZWxHcm91cChqYXZheC5zd2luZy5Hcm91cExheW91dC5BbGlnbm1lbnQuTEVBRElORylcbiAgIDE1Nlx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQoYnRuTG9naW4sIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFLCAxNjQsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFKVxuICAgMTU3XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChidG5Gb3Jnb3RQYXNzd29yZCwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuQWxpZ25tZW50LlRSQUlMSU5HKSkpKVxuICAgMTU4XHQgICAgICAgICAgICAgICAgLmFkZEdhcCg2MCwgNjAsIDYwKVxuICAgMTU5XHQgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChqTGFiZWw1LCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSwgNTA1LCBTaG9ydC5NQVhfVkFMVUUpKVxuICAgMTYwXHQgICAgICAgICk7XG4gICAxNjFcdCAgICAgICAgbGF5b3V0LnNldFZlcnRpY2FsR3JvdXAoXG4gICAxNjJcdCAgICAgICAgICAgIGxheW91dC5jcmVhdGVQYXJhbGxlbEdyb3VwKGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LkFsaWdubWVudC5MRUFESU5HKVxuICAgMTYzXHQgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVNlcXVlbnRpYWxHcm91cCgpXG4gICAxNjRcdCAgICAgICAgICAgICAgICAuYWRkR2FwKDEzOCwgMTM4LCAxMzgpXG4gICAxNjVcdCAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGpMYWJlbDEpXG4gICAxNjZcdCAgICAgICAgICAgICAgICAuYWRkR2FwKDEyLCAxMiwgMTIpXG4gICAxNjdcdCAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGpMYWJlbDIpXG4gICAxNjhcdCAgICAgICAgICAgICAgICAuYWRkR2FwKDEyLCAxMiwgMTIpXG4gICAxNjlcdCAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGpTZXBhcmF0b3IxLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSwgMTAsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFKVxuICAgMTcwXHQgICAgICAgICAgICAgICAgLmFkZEdhcCgzMCwgMzAsIDMwKVxuICAgMTcxXHQgICAgICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVQYXJhbGxlbEdyb3VwKGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LkFsaWdubWVudC5MRUFESU5HKVxuICAgMTcyXHQgICAgICAgICAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlU2VxdWVudGlhbEdyb3VwKClcbiAgIDE3M1x0ICAgICAgICAgICAgICAgICAgICAgICAgLmFkZEdhcCgzLCAzLCAzKVxuICAgMTc0XHQgICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGpMYWJlbDMpKVxuICAgMTc1XHQgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQodHh0VXNlck5hbWUsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5ERUZBVUxUX1NJWkUsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFKSlcbiAgIDE3Nlx0ICAgICAgICAgICAgICAgIC5hZGRHYXAoMTgsIDE4LCAxOClcbiAgIDE3N1x0ICAgICAgICAgICAgICAgIC5hZGRHcm91cChsYXlvdXQuY3JlYXRlUGFyYWxsZWxHcm91cChqYXZheC5zd2luZy5Hcm91cExheW91dC5BbGlnbm1lbnQuTEVBRElORylcbiAgIDE3OFx0ICAgICAgICAgICAgICAgICAgICAuYWRkR3JvdXAobGF5b3V0LmNyZWF0ZVNlcXVlbnRpYWxHcm91cCgpXG4gICAxNzlcdCAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRHYXAoMywgMywgMylcbiAgIDE4MFx0ICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChqTGFiZWw0KSlcbiAgIDE4MVx0ICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KHR4dFBhc3N3b3JkLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuREVGQVVMVF9TSVpFLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSkpXG4gICAxODJcdCAgICAgICAgICAgICAgICAuYWRkR2FwKDMwLCAzMCwgMzApXG4gICAxODNcdCAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50KGpTZXBhcmF0b3IyLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSwgMTAsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFKVxuICAgMTg0XHQgICAgICAgICAgICAgICAgLmFkZEdhcCgxMiwgMTIsIDEyKVxuICAgMTg1XHQgICAgICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVQYXJhbGxlbEdyb3VwKGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LkFsaWdubWVudC5MRUFESU5HKVxuICAgMTg2XHQgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQoYnRuU2lnbnVwLCBqYXZheC5zd2luZy5Hcm91cExheW91dC5QUkVGRVJSRURfU0laRSwgMzUsIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFKVxuICAgMTg3XHQgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQoYnRuTG9naW4sIGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LlBSRUZFUlJFRF9TSVpFLCAzNSwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUpKVxuICAgMTg4XHQgICAgICAgICAgICAgICAgLmFkZEdhcCgxMiwgMTIsIDEyKVxuICAgMTg5XHQgICAgICAgICAgICAgICAgLmFkZEdyb3VwKGxheW91dC5jcmVhdGVQYXJhbGxlbEdyb3VwKGphdmF4LnN3aW5nLkdyb3VwTGF5b3V0LkFsaWdubWVudC5MRUFESU5HKVxuICAgMTkwXHQgICAgICAgICAgICAgICAgICAgIC5hZGRDb21wb25lbnQoYnRuRm9yZ290UGFzc3dvcmQpXG4gICAxOTFcdCAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudChidG5FeGl0KSkpXG4gICAxOTJcdCAgICAgICAgICAgIC5hZGRDb21wb25lbnQoakxhYmVsNSwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUsIDYzMCwgamF2YXguc3dpbmcuR3JvdXBMYXlvdXQuUFJFRkVSUkVEX1NJWkUpXG4gICAxOTNcdCAgICAgICAgKTtcbiAgIDE5NFx0XG4gICAxOTVcdCAgICAgICAgcGFjaygpO1xuICAgMTk2XHQgICAgfS8vIDwvZWRpdG9yLWZvbGQ+Ly9HRU4tRU5EOmluaXRDb21wb25lbnRzXG4gICAxOTdcdFxuICAgMTk4XHQgICAgcHJpdmF0ZSB2b2lkIGJ0bkxvZ2luQWN0aW9uUGVyZm9ybWVkKGphdmEuYXd0LmV2ZW50LkFjdGlvbkV2ZW50IGV2dCkgey8vR0VOLUZJUlNUOmV2ZW50X2J0bkxvZ2luQWN0aW9uUGVyZm9ybWVkXG4gICAxOTlcdCAgICAgICAgLy8gVE9ETyBhZGQgeW91ciBoYW5kbGluZyBjb2RlIGhlcmU6XG4gICAyMDBcdCAgICAgICAgaWYodmFsaWRhdGVGaWVsZHMoKSkge1xuICAgMjAxXHQgICAgICAgICAgICB0cnl7XG4gICAyMDJcdCAgICAgICAgICAgICAgICBTdHJpbmcgdXNlcm5hbWUgPSB0eHRVc2VyTmFtZS5nZXRUZXh0KCkudHJpbSgpO1xuICAgMjAzXHQgICAgICAgICAgICAgICAgU3RyaW5nIHBhc3N3b3JkID0gdHh0UGFzc3dvcmQuZ2V0VGV4dCgpLnRyaW0oKTtcbiAgIDIwNFx0ICAgICAgICAgICAgICAgIFxuICAgMjA1XHQgICAgICAgICAgICAgICAgVXNlciB1c2VyID0gbnVsbDtcbiAgIDIwNlx0ICAgICAgICAgICAgICAgIGJvb2xlYW4gaXNTdWNjZXNzID0gVXNlckRBTy5sb2dpbih1c2VybmFtZSwgcGFzc3dvcmQpO1xuICAgMjA3XHRcbiAgIDIwOFx0ICAgICAgICAgICAgICAgIGlmKGlzU3VjY2Vzcykge1xuICAgMjA5XHQgICAgICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKHRoaXMsIFwixJDEg25nIG5o4bqtcCB0aMOgbmggY8O0bmchXCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuSU5GT1JNQVRJT05fTUVTU0FHRSk7XG4gICAyMTBcdCAgICAgICAgICAgICAgICAgXG4gICAyMTFcdCAgICAgICAgICAgICAgICAgICAgVXNlclNlc3Npb24uc2V0Q3VycmVudFVzZXIodXNlcik7XG4gICAyMTJcdCAgICAgICAgICAgICAgICAgICAgXG4gICAyMTNcdC8vICAgICAgICAgICAgICAgICAgICBuZXcgTWFpbkZyYW1lKCkuc2V0VmlzaWJsZSh0cnVlKTtcbiAgIDIxNFx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3Bvc2UoKTtcbiAgIDIxNVx0ICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAyMTZcdCAgICAgICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2codGhpcywgXCJTYWkgdMOqbiDEkcSDbmcgbmjhuq1wIGhv4bq3YyBt4bqtdCBraOG6qXUuXCIsIFwiTOG7l2lcIiwgSk9wdGlvblBhbmUuRVJST1JfTUVTU0FHRSk7XG4gICAyMTdcdCAgICAgICAgICAgICAgICB9XG4gICAyMThcdCAgICAgICAgICAgIH0gY2F0Y2goRXhjZXB0aW9uIGV4KSB7XG4gICAyMTlcdCAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyhudWxsLCBcIkzhu5dpOiBcIiArIGV4LmdldE1lc3NhZ2UoKSwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgIDIyMFx0ICAgICAgICAgICAgfVxuICAgMjIxXHQgICAgICAgIH1cbiAgIDIyMlx0XG4gICAyMjNcdFxuICAgMjI0XHQgICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuTG9naW5BY3Rpb25QZXJmb3JtZWRcbiAgIDIyNVx0XG4gICAyMjZcdCAgICBwcml2YXRlIHZvaWQgYnRuRm9yZ290UGFzc3dvcmRBY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuRm9yZ290UGFzc3dvcmRBY3Rpb25QZXJmb3JtZWRcbiAgIDIyN1x0ICAgICAgICAvLyBPcGVuIHRoZSBGb3Jnb3RQYXNzd29yZCBkaWFsb2dcbiAgIDIyOFx0ICAgICAgICBGb3Jnb3RQYXNzd29yZCBmb3Jnb3RQYXNzd29yZERpYWxvZyA9IG5ldyBGb3Jnb3RQYXNzd29yZCh0aGlzLCB0cnVlKTtcbiAgIDIyOVx0ICAgICAgICBmb3Jnb3RQYXNzd29yZERpYWxvZy5zZXRWaXNpYmxlKHRydWUpO1xuICAgMjMwXHQgICAgfS8vR0VOLUxBU1Q6ZXZlbnRfYnRuRm9yZ290UGFzc3dvcmRBY3Rpb25QZXJmb3JtZWRcbiAgIDIzMVx0XG4gICAyMzJcdCAgICBwcml2YXRlIHZvaWQgYnRuRXhpdEFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5FeGl0QWN0aW9uUGVyZm9ybWVkXG4gICAyMzNcdCAgICAgICAgLy8gVE9ETyBhZGQgeW91ciBoYW5kbGluZyBjb2RlIGhlcmU6XG4gICAyMzRcdCAgICAgICAgaW50IHJlc3VsdCA9IEpPcHRpb25QYW5lLnNob3dDb25maXJtRGlhbG9nKG51bGwsIFwiQuG6oW4gY8OzIGNo4bqvYyBjaOG6r24gbXXhu5FuIHRob8OhdCBraMO0bmc/XCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuWUVTX05PX09QVElPTiwgSk9wdGlvblBhbmUuUVVFU1RJT05fTUVTU0FHRSk7XG4gICAyMzVcdFxuICAgMjM2XHQgICAgICAgIGlmIChyZXN1bHQgPT0gSk9wdGlvblBhbmUuWUVTX09QVElPTikge1xuICAgMjM3XHQgICAgICAgICAgICBTeXN0ZW0uZXhpdCgwKTtcbiAgIDIzOFx0ICAgICAgICB9XG4gICAyMzlcdCAgICB9Ly9HRU4tTEFTVDpldmVudF9idG5FeGl0QWN0aW9uUGVyZm9ybWVkXG4gICAyNDBcdFxuICAgMjQxXHQgICAgcHJpdmF0ZSB2b2lkIGJ0blNpZ251cEFjdGlvblBlcmZvcm1lZChqYXZhLmF3dC5ldmVudC5BY3Rpb25FdmVudCBldnQpIHsvL0dFTi1GSVJTVDpldmVudF9idG5TaWdudXBBY3Rpb25QZXJmb3JtZWRcbiAgIDI0Mlx0ICAgICAgICAvLyBUT0RPIGFkZCB5b3VyIGhhbmRsaW5nIGNvZGUgaGVyZTpcbiAgIDI0M1x0ICAgICAgICBzZXRWaXNpYmxlKGZhbHNlKTtcbiAgIDI0NFx0ICAgICAgICBuZXcgU2lnblVwKCkuc2V0VmlzaWJsZSh0cnVlKTtcbiAgIDI0NVx0ICAgIH0vL0dFTi1MQVNUOmV2ZW50X2J0blNpZ251cEFjdGlvblBlcmZvcm1lZFxuICAgMjQ2XHRcbiAgIDI0N1x0ICAgIC8qKlxuICAgMjQ4XHQgICAgICogQHBhcmFtIGFyZ3MgdGhlIGNvbW1hbmQgbGluZSBhcmd1bWVudHNcbiAgIDI0OVx0ICAgICAqL1xuICAgMjUwXHQgICAgcHVibGljIHN0YXRpYyB2b2lkIG1haW4oU3RyaW5nIGFyZ3NbXSkge1xuICAgMjUxXHQgICAgICAgIC8qIFNldCB0aGUgTmltYnVzIGxvb2sgYW5kIGZlZWwgKi9cbiAgIDI1Mlx0ICAgICAgICAvLzxlZGl0b3ItZm9sZCBkZWZhdWx0c3RhdGU9XCJjb2xsYXBzZWRcIiBkZXNjPVwiIExvb2sgYW5kIGZlZWwgc2V0dGluZyBjb2RlIChvcHRpb25hbCkgXCI+XG4gICAyNTNcdCAgICAgICAgLyogSWYgTmltYnVzIChpbnRyb2R1Y2VkIGluIEphdmEgU0UgNikgaXMgbm90IGF2YWlsYWJsZSwgc3RheSB3aXRoIHRoZSBkZWZhdWx0IGxvb2sgYW5kIGZlZWwuXG4gICAyNTRcdCAgICAgICAgICogRm9yIGRldGFpbHMgc2VlIGh0dHA6Ly9kb3dubG9hZC5vcmFjbGUuY29tL2phdmFzZS90dXRvcmlhbC91aXN3aW5nL2xvb2thbmRmZWVsL3BsYWYuaHRtbFxuICAgMjU1XHQgICAgICAgICAqL1xuICAgMjU2XHQgICAgICAgIHRyeSB7XG4gICAyNTdcdCAgICAgICAgICAgIGZvciAoamF2YXguc3dpbmcuVUlNYW5hZ2VyLkxvb2tBbmRGZWVsSW5mbyBpbmZvIDogamF2YXguc3dpbmcuVUlNYW5hZ2VyLmdldEluc3RhbGxlZExvb2tBbmRGZWVscygpKSB7XG4gICAyNThcdCAgICAgICAgICAgICAgICBpZiAoXCJOaW1idXNcIi5lcXVhbHMoaW5mby5nZXROYW1lKCkpKSB7XG4gICAyNTlcdCAgICAgICAgICAgICAgICAgICAgamF2YXguc3dpbmcuVUlNYW5hZ2VyLnNldExvb2tBbmRGZWVsKGluZm8uZ2V0Q2xhc3NOYW1lKCkpO1xuICAgMjYwXHQgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgMjYxXHQgICAgICAgICAgICAgICAgfVxuICAgMjYyXHQgICAgICAgICAgICB9XG4gICAyNjNcdCAgICAgICAgfSBjYXRjaCAoQ2xhc3NOb3RGb3VuZEV4Y2VwdGlvbiBleCkge1xuICAgMjY0XHQgICAgICAgICAgICBqYXZhLnV0aWwubG9nZ2luZy5Mb2dnZXIuZ2V0TG9nZ2VyKExvZ2luLmNsYXNzLmdldE5hbWUoKSkubG9nKGphdmEudXRpbC5sb2dnaW5nLkxldmVsLlNFVkVSRSwgbnVsbCwgZXgpO1xuICAgMjY1XHQgICAgICAgIH0gY2F0Y2ggKEluc3RhbnRpYXRpb25FeGNlcHRpb24gZXgpIHtcbiAgIDI2Nlx0ICAgICAgICAgICAgamF2YS51dGlsLmxvZ2dpbmcuTG9nZ2VyLmdldExvZ2dlcihMb2dpbi5jbGFzcy5nZXROYW1lKCkpLmxvZyhqYXZhLnV0aWwubG9nZ2luZy5MZXZlbC5TRVZFUkUsIG51bGwsIGV4KTtcbiAgIDI2N1x0ICAgICAgICB9IGNhdGNoIChJbGxlZ2FsQWNjZXNzRXhjZXB0aW9uIGV4KSB7XG4gICAyNjhcdCAgICAgICAgICAgIGphdmEudXRpbC5sb2dnaW5nLkxvZ2dlci5nZXRMb2dnZXIoTG9naW4uY2xhc3MuZ2V0TmFtZSgpKS5sb2coamF2YS51dGlsLmxvZ2dpbmcuTGV2ZWwuU0VWRVJFLCBudWxsLCBleCk7XG4gICAyNjlcdCAgICAgICAgfSBjYXRjaCAoamF2YXguc3dpbmcuVW5zdXBwb3J0ZWRMb29rQW5kRmVlbEV4Y2VwdGlvbiBleCkge1xuICAgMjcwXHQgICAgICAgICAgICBqYXZhLnV0aWwubG9nZ2luZy5Mb2dnZXIuZ2V0TG9nZ2VyKExvZ2luLmNsYXNzLmdldE5hbWUoKSkubG9nKGphdmEudXRpbC5sb2dnaW5nLkxldmVsLlNFVkVSRSwgbnVsbCwgZXgpO1xuICAgMjcxXHQgICAgICAgIH1cbiAgIDI3Mlx0ICAgICAgICAvLzwvZWRpdG9yLWZvbGQ+XG4gICAyNzNcdFxuICAgMjc0XHQgICAgICAgIC8qIENyZWF0ZSBhbmQgZGlzcGxheSB0aGUgZm9ybSAqL1xuICAgMjc1XHQgICAgICAgIGphdmEuYXd0LkV2ZW50UXVldWUuaW52b2tlTGF0ZXIobmV3IFJ1bm5hYmxlKCkge1xuICAgMjc2XHQgICAgICAgICAgICBwdWJsaWMgdm9pZCBydW4oKSB7XG4gICAyNzdcdCAgICAgICAgICAgICAgICBuZXcgTG9naW4oKS5zZXRWaXNpYmxlKHRydWUpO1xuICAgMjc4XHQgICAgICAgICAgICB9XG4gICAyNzlcdCAgICAgICAgfSk7XG4gICAyODBcdCAgICB9XG4gICAyODFcdFxuICAgMjgyXHQgICAgLy8gVmFyaWFibGVzIGRlY2xhcmF0aW9uIC0gZG8gbm90IG1vZGlmeS8vR0VOLUJFR0lOOnZhcmlhYmxlc1xuICAgMjgzXHQgICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KQnV0dG9uIGJ0bkV4aXQ7XG4gICAyODRcdCAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpCdXR0b24gYnRuRm9yZ290UGFzc3dvcmQ7XG4gICAyODVcdCAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpCdXR0b24gYnRuTG9naW47XG4gICAyODZcdCAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpCdXR0b24gYnRuU2lnbnVwO1xuICAgMjg3XHQgICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KTGFiZWwgakxhYmVsMTtcbiAgIDI4OFx0ICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkxhYmVsIGpMYWJlbDI7XG4gICAyODlcdCAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpMYWJlbCBqTGFiZWwzO1xuICAgMjkwXHQgICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KTGFiZWwgakxhYmVsNDtcbiAgIDI5MVx0ICAgIHByaXZhdGUgamF2YXguc3dpbmcuSkxhYmVsIGpMYWJlbDU7XG4gICAyOTJcdCAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpTZXBhcmF0b3IgalNlcGFyYXRvcjE7XG4gICAyOTNcdCAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpTZXBhcmF0b3IgalNlcGFyYXRvcjI7XG4gICAyOTRcdCAgICBwcml2YXRlIGphdmF4LnN3aW5nLkpQYXNzd29yZEZpZWxkIHR4dFBhc3N3b3JkO1xuICAgMjk1XHQgICAgcHJpdmF0ZSBqYXZheC5zd2luZy5KVGV4dEZpZWxkIHR4dFVzZXJOYW1lO1xuICAgMjk2XHQgICAgLy8gRW5kIG9mIHZhcmlhYmxlcyBkZWNsYXJhdGlvbi8vR0VOLUVORDp2YXJpYWJsZXNcbiAgIDI5N1x0fVxuICAgMjk4XHRcblRvdGFsIGxpbmVzIGluIGZpbGU6IDI5OFxuIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiNmZkMTM0MjMtOGFjZi00ZmMxLTlhN2ItYTFmMjk5ODlmYjMyO3Rvb2x1XzAxN1M1WVNUZjNON0xndDFwbW9ZSGliYSI6eyJyZXF1ZXN0SWQiOiI2ZmQxMzQyMy04YWNmLTRmYzEtOWE3Yi1hMWYyOTk4OWZiMzIiLCJ0b29sVXNlSWQiOiJ0b29sdV8wMTdTNVlTVGYzTjdMZ3QxcG1vWUhpYmEiLCJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJTdWNjZXNzZnVsbHkgZWRpdGVkIHRoZSBmaWxlIHNyYy9pbnRlcm5ldC9tYW5nZW1lbnQvc3lzdGVtL0xvZ2luLmphdmEuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlIGZvciBlbnRyeSB3aXRoIGluZGV4IFswXTpcblJlcGxhY2VtZW50IHN1Y2Nlc3NmdWwuXG5FZGl0ZWQgc2VjdGlvbiBhZnRlciBJREUgYXV0by1mb3JtYXR0aW5nIHdhcyBhcHBsaWVkOlxuICAgMTk0XHRcbiAgIDE5NVx0ICAgICAgICBwYWNrKCk7XG4gICAxOTZcdCAgICB9Ly8gPC9lZGl0b3ItZm9sZD4vL0dFTi1FTkQ6aW5pdENvbXBvbmVudHNcbiAgIDE5N1x0XG4gICAxOThcdCAgICBwcml2YXRlIHZvaWQgYnRuTG9naW5BY3Rpb25QZXJmb3JtZWQoamF2YS5hd3QuZXZlbnQuQWN0aW9uRXZlbnQgZXZ0KSB7Ly9HRU4tRklSU1Q6ZXZlbnRfYnRuTG9naW5BY3Rpb25QZXJmb3JtZWRcbiAgIDE5OVx0ICAgICAgICAvLyBUT0RPIGFkZCB5b3VyIGhhbmRsaW5nIGNvZGUgaGVyZTpcbiAgIDIwMFx0ICAgICAgICBpZih2YWxpZGF0ZUZpZWxkcygpKSB7XG4gICAyMDFcdCAgICAgICAgICAgIHRyeXtcbiAgIDIwMlx0ICAgICAgICAgICAgICAgIFN0cmluZyB1c2VybmFtZSA9IHR4dFVzZXJOYW1lLmdldFRleHQoKS50cmltKCk7XG4gICAyMDNcdCAgICAgICAgICAgICAgICBTdHJpbmcgcGFzc3dvcmQgPSB0eHRQYXNzd29yZC5nZXRUZXh0KCkudHJpbSgpO1xuICAgMjA0XHRcbiAgIDIwNVx0ICAgICAgICAgICAgICAgIFVzZXIgdXNlciA9IFVzZXJEQU8ubG9naW4odXNlcm5hbWUsIHBhc3N3b3JkKTtcbiAgIDIwNlx0XG4gICAyMDdcdCAgICAgICAgICAgICAgICBpZih1c2VyICE9IG51bGwpIHtcbiAgIDIwOFx0ICAgICAgICAgICAgICAgICAgICAvLyBTdG9yZSB1c2VyIGluZm9ybWF0aW9uIGluIHRoZSBzZXNzaW9uXG4gICAyMDlcdCAgICAgICAgICAgICAgICAgICAgVXNlclNlc3Npb24uc2V0Q3VycmVudFVzZXIodXNlcik7XG4gICAyMTBcdFxuICAgMjExXHQgICAgICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKHRoaXMsIFwixJDEg25nIG5o4bqtcCB0aMOgbmggY8O0bmchXCIsIFwiVGjDtG5nIGLDoW9cIiwgSk9wdGlvblBhbmUuSU5GT1JNQVRJT05fTUVTU0FHRSk7XG4gICAyMTJcdFxuICAgMjEzXHQgICAgICAgICAgICAgICAgICAgIC8vIE9wZW4gdGhlIGFwcHJvcHJpYXRlIGRhc2hib2FyZCBiYXNlZCBvbiB1c2VyIHJvbGVcbiAgIDIxNFx0ICAgICAgICAgICAgICAgICAgICBpZihcImFkbWluXCIuZXF1YWxzSWdub3JlQ2FzZSh1c2VyLmdldFJvbGUoKSkpIHtcbiAgIDIxNVx0ICAgICAgICAgICAgICAgICAgICAgICAgbmV3IGludGVybmV0Lm1hbmdlbWVudC5zeXN0ZW0uQWRtaW4uRGFzaGJvYXJkKCkuc2V0VmlzaWJsZSh0cnVlKTtcbiAgIDIxNlx0ICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgMjE3XHQgICAgICAgICAgICAgICAgICAgICAgICAvLyBGb3IgcmVndWxhciB1c2VycywgeW91IGNhbiBjcmVhdGUgYSBkaWZmZXJlbnQgZGFzaGJvYXJkXG4gICAyMThcdCAgICAgICAgICAgICAgICAgICAgICAgIC8vIG5ldyBVc2VyRGFzaGJvYXJkKCkuc2V0VmlzaWJsZSh0cnVlKTtcbiAgIDIxOVx0ICAgICAgICAgICAgICAgICAgICAgICAgSk9wdGlvblBhbmUuc2hvd01lc3NhZ2VEaWFsb2codGhpcywgXCJDaOG7qWMgbsSDbmcgxJFhbmcgxJHGsOG7o2MgcGjDoXQgdHJp4buDbiFcIiwgXCJUaMO0bmcgYsOhb1wiLCBKT3B0aW9uUGFuZS5JTkZPUk1BVElPTl9NRVNTQUdFKTtcbiAgIDIyMFx0ICAgICAgICAgICAgICAgICAgICB9XG4gICAyMjFcdFxuICAgMjIyXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcG9zZSgpO1xuICAgMjIzXHQgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgIDIyNFx0ICAgICAgICAgICAgICAgICAgICBKT3B0aW9uUGFuZS5zaG93TWVzc2FnZURpYWxvZyh0aGlzLCBcIlNhaSB0w6puIMSRxINuZyBuaOG6rXAgaG/hurdjIG3huq10IGto4bqpdS5cIiwgXCJM4buXaVwiLCBKT3B0aW9uUGFuZS5FUlJPUl9NRVNTQUdFKTtcbiAgIDIyNVx0ICAgICAgICAgICAgICAgIH1cbiAgIDIyNlx0ICAgICAgICAgICAgfSBjYXRjaChFeGNlcHRpb24gZXgpIHtcbiAgIDIyN1x0ICAgICAgICAgICAgICAgIEpPcHRpb25QYW5lLnNob3dNZXNzYWdlRGlhbG9nKG51bGwsIFwiTOG7l2k6IFwiICsgZXguZ2V0TWVzc2FnZSgpLCBcIlRow7RuZyBiw6FvXCIsIEpPcHRpb25QYW5lLkVSUk9SX01FU1NBR0UpO1xuICAgMjI4XHQgICAgICAgICAgICB9XG4gICAyMjlcdCAgICAgICAgfVxuXG5SZXZpZXcgdGhlIGNoYW5nZXMgYW5kIG1ha2Ugc3VyZSB0aGV5IGFyZSBhcyBleHBlY3RlZCAoY29ycmVjdCBpbmRlbnRhdGlvbiwgbm8gZHVwbGljYXRlIGxpbmVzLCBldGMpLlxuRWRpdCB0aGUgZmlsZSBhZ2FpbiBpZiBuZWNlc3NhcnkuXG4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19fSwiZHJhZnRFeGNoYW5nZSI6eyJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJyaWNoX3RleHRfanNvbl9yZXByIjp7InR5cGUiOiJkb2MiLCJjb250ZW50IjpbeyJ0eXBlIjoicGFyYWdyYXBoIn1dfSwic3RhdHVzIjoiZHJhZnQifSwicmVxdWVzdElkcyI6W10sImlzUGlubmVkIjpmYWxzZSwiaXNTaGFyZWFibGUiOnRydWUsImV4dHJhRGF0YSI6eyJpc0FnZW50Q29udmVyc2F0aW9uIjp0cnVlLCJoYXNEaXJ0eUVkaXRzIjp0cnVlLCJiYXNlbGluZVRpbWVzdGFtcCI6MTc0NzE0MTQ4Nzc0MX0sInBlcnNvbmFUeXBlIjowfX0sImFnZW50RXhlY3V0aW9uTW9kZSI6Im1hbnVhbCIsImlzQWdlbnRFZGl0c0NvbGxhcHNlZCI6dHJ1ZX0=" />
      </map>
    </option>
  </component>
</project>